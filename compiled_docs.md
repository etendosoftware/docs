==ARTICLE_START==
# Article Title: Home
## Article Path: /Home
## Article URL: 
 https://docs.etendo.software/latest/index
## Article Content: 
Etendo is a highly adaptable and scalable ERP software designed for non-retail businesses. Our product is tailored to suit the needs of different companies, providing a flexible and modern solution. Etendo combines a web platform with a user-friendly interface and a mobile application, allowing you to manage your business efficiently from anywhere. We are committed to using cutting-edge technologies and continuously improving our product to meet your evolving business needs.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /Getting Started/Overview
## Article URL: 
 https://docs.etendo.software/latest/getting-started/overview
## Article Content: 
We're excited to guide you through the swift setup of Etendo Classic, enabling you to have it up and running within a matter of a few simple steps. <br>
Before you embark on this journey, it's important to ensure that you've met the necessary technical prerequisites for the Etendo installation process. <br> Additionally, take a moment to acquaint yourself with the intuitive navigation interface, which will prove invaluable as you navigate the software's features.
To expedite and streamline your workflow, we've thoughtfully provided convenient shortcuts to make your work easier and faster.

[:material-order-bool-ascending-variant: Requirements](https://docs.etendo.software/latest/getting-started/requirements.md){ .md-button .md-button--primary .md-button .md-button--primary--primary }
[:material-tools: Install Etendo](https://docs.etendo.software/latest/getting-started/installation.md){ .md-button .md-button--primary .md-button .md-button--primary--primary } 
[:material-page-previous-outline: Navigating the Interface](https://docs.etendo.software/latest/getting-started/user-interface/workspace.md){ .md-button .md-button--primary .md-button .md-button--primary--primary } 
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Requirements
## Article Path: /Getting Started/Requirements
## Article URL: 
 https://docs.etendo.software/latest/getting-started/requirements
## Article Content: 
#### Overview

This section explains the stack of tools and requirements to install Etendo.

#### Client: web browsers

|     |     |     |     |
| --- | --- | --- | --- |
| **Web browser** |     | **Minimum required** | **Recommended version** |
| ![Chrome logo.png](https://docs.etendo.software/latest/assets/drive/mOCl2euDZU8wO2MedNIrplZBmdiqguZm86ab6e3RVnKM4B4uX3s0UMMf0FVPIYLYeHmFy8FHPMNsJ9nOX6rXZAo76IzmQSSPrrN2DgNiD3DrJIG2j25JRJvASy7yiBGzsJBRp2Cg.png) | **Google Chrome** | 95  | **97 or higher** |
| ![Safari icon large.png](https://docs.etendo.software/latest/assets/drive/JVloGgFusza-4BFZ30Gjra-m_4Aknv5c3Y5vJEoYZ4B4HiEV09e6bMcnSfyImo7D7TJbgPRsIIUScqqatrJBW8SoMV7HmSe3q12JLmaEp7AIYT2FSuLrjcz2mnT3fQ6NCMWg0zAu.png) | **Apple Safari** | 12  | **14 or higher** |
| ![Firefox logo 2017.png](https://docs.etendo.software/latest/assets/drive/p3EzTz7im_NXkvyXHa5aIk29Va-vEN-96NUPsPr1BLqnWL7AA6CuewRnASM9EfEyMxRmaGmq3pNHPbAqNy2ZJL6xAuEUtM5q10QXfcadnvVJwW7-ISmAZ9xNgbOSs3XwSDsppY1P.png) | **Mozilla Firefox ESR** | 78  | **90 or higher** |
| ![Microsoft Edge logo.png](https://docs.etendo.software/latest/assets/drive/acUA_bLGo6j1tRenMx_zSRQddDaf2N86N0iL2cT5o5Om5Gc96_YzQ0HOZ_CdZAitgs1m6M24Nbk5cbs1Et2I0MrUPB1a5sapBINQg_4Jzg8C_aoCmS3-CaKmn8BItB4O25SvFpy6.png) | **Microsoft Edge (Chromium based)** | 95  | **97 or higher** |

#### Client: network connectivity

Here, there are example configurations, depending on the number of concurrent users to be supported. These assume the server is hosted with a fast connection, so it's network is not a limiting factor.

| Downstream bandwidth | Concurrent users |
| --- | --- |
| 3Mbit/s | <=10 |
| 10MBit/s | <=20 |
| 100MBit/s | <=100 |

#### Server: Java based = multiplatform

Etendo runs wherever the Java JDK works. This currently means:

##### Operating systems:
:material-microsoft-windows:  Windows <br>
:simple-linux:  Linux distribution <br>
:simple-freebsd:  FreeBSD <br>
:simple-macos:  Mac OSX <br>
Solaris and more.  <br>

##### Architectures:
x86, x86\_64, IA64, Sparc, PowerPC, AIX.  
Either PostgreSQL should also be supported by your target system

#### Server: software stack

| Stack component | Supported versions | Recommended version | Instalation Guide |
| :--- | :--- | :--- | :--- |
| :fontawesome-brands-java:  Java SE | 11  | Latest 11.x | [Java Instalation Guide](https://www.java.com/en/download/manual.jsp){target="_blank"} |
| :simple-postgresql:  PostgreSQL | 10.x, 11.x, 12.x, 13.x, Amazon RDS | Latest 14.x | [Postgres Instalation Guide ](https://www.postgresql.org/download/){target="_blank"} |
| :simple-apachetomcat:  Apache Tomcat | 8.5.x (x >= 24), 9.0.x | Latest 9.0.x | [Tomcat Instalation Guide](https://tomcat.apache.org/download-90.cgi){target="_blank"} |
| :simple-oracle:  Oracle | 19c (LTS) | 19c (LTS) |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Installation
## Article Path: /Getting Started/Installation
## Article URL: 
 https://docs.etendo.software/latest/getting-started/installation
## Article Content: 
#### Overview
This section explains how to install a new Etendo environment. It includes:

- Tutorial about the Etendo installation.
- The steps to install Etendo.

#### Tutorial

<iframe width="560" height="315" src="https://www.youtube.com/embed/ixNnRuL10xo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

#### Requirements 
This section outlines the [System Requirements](https://docs.etendo.software/latest/getting-started/requirements.md).

!!!info
    The [Docker Management](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/docker-management.md) module allows for the distribution of the infrastructure needed to configure Etendo Classic within Etendo modules, which include Docker containers for each service. Specifically, the Docker Management module includes the [PostgreSQL Database Service](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/docker-management.md#postgres-database-service) and the [Dockerized Tomcat Service](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/tomcat-dockerized-service.md) module. If these containers are used, the **services must be launched**, and then follow with the installation guide.

#### PostgreSQL Configuration
Check this article to configure PostgreSQL correctly: [PostgreSQL Configuration](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/postgresql-configuration.md)

#### Install Etendo 
=== ":material-language-java: JAR Format"

    ### Steps to Install Etendo in JAR Format

    1.  Clone Etendo Base project in a temporal directory.

        ``` bash
        cd /tmp
        git clone https://github.com/etendosoftware/etendo_base.git EtendoERP 
        ```
    2.  Copy the sources in `/opt/EtendoERP` folder.

        ```bash
        mv EtendoERP/* /opt/EtendoERP/
        cd /opt/EtendoERP
        ```

    3. Modify the `gradle.properties` file with your GitHub Credentials. Create the credentials by following this [guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/use-of-repositories-in-etendo.md).
       
        ```groovy
        nexusUser=
        nexusPassword=
        githubUser= username
        githubToken=*******

        context.name=etendo

        bbdd.sid=etendo
        bbdd.port=5432
        bbdd.systemUser=postgres
        bbdd.systemPassword=syspass
        bbdd.user=tad
        bbdd.password=tad

        org.gradle.jvmargs=-Dfile.encoding=UTF-8
        ```
    4. Change the `build.gradle` file, uncomment the core dependency in the dependencies section:
            
        ```
        implementation('com.etendoerp.platform:etendo-core:<version>')
        ```

        !!! info
            To know the available versions of Etendo Classic, please visit the [Release Notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/release-notes.md) page.

    5. Modify the `gradle.properties` file with your environment variables, if it is necessary:
        
        ```groovy
        nexusUser=
        nexusPassword=
        githubUser= username
        githubToken=*******

        context.name=etendo

        bbdd.sid=etendo
        bbdd.port=5432
        bbdd.systemUser=postgres
        bbdd.systemPassword=syspass
        bbdd.user=tad
        bbdd.password=tad
        ```
    6. Dependencies
        ``` bash
        ./gradlew dependencies
        ```
    7. Setup 
        ```
        ./gradlew setup
        ```
    8. Installation 
        ```
        ./gradlew install smartbuild
        ```
    9. Start the Tomcat, in case of Linux you can run:
        ```
        sudo /etc/init.d/tomcat start
        ```
        
        !!! note
            If you want to run Etendo locally, go to [Run Etendo Development Environment](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/install-etendo-development-environment.md#run-etendo-development-environment).

    10. Open your browser in `https://<Public server IP>/<Context Name>`

=== ":octicons-file-zip-24: Source Format"

    ### Steps to Install Etendo in Sources Format

    1.  Clone Etendo Base project in a temporal directory.

        ``` bash
        cd /tmp
        git clone https://github.com/etendosoftware/etendo_base.git EtendoERP 
        ```

    2.  Copy the sources in `/opt/EtendoERP` folder.
        ```bash
        mv EtendoERP/* /opt/EtendoERP/
        cd /opt/EtendoERP
        ```
    3. Modify the `gradle.properties` file with your GitHub Credentials. Create the credentials by following this [guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/use-of-repositories-in-etendo.md).
        ```groovy
        nexusUser=
        nexusPassword=
        githubUser= username
        githubToken=*******
        context.name=etendo

        bbdd.sid=etendo
        bbdd.port=5432
        bbdd.systemUser=postgres
        bbdd.systemPassword=syspass
        bbdd.user=tad
        bbdd.password=tad

        org.gradle.jvmargs=-Dfile.encoding=UTF-8
        ```

    4. By default, the latest core version available will be expanded but if there is a need to change it, edit the `build.gradle` file changing the `coreVersion = "(<version>,<version>)"`.
        
        ```groovy
        etendo {
            coreVersion = "<version>"
        }
        ```

        !!! info
            To know the available versions of Etendo Classic, please visit the [Release Notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/release-notes.md) page.

    5.  Expand Etendo Base

        ```
        ./gradlew expand 
        ```
    6. Modify the `gradle.properties` file with your environment variables, if it is necessary:

        ```groovy
        context.name=etendo

        bbdd.sid=etendo
        bbdd.port=5432
        bbdd.systemUser=postgres
        bbdd.systemPassword=syspass
        bbdd.user=tad
        bbdd.password=tad
        ```

    7. Setup: to apply or create the initial configurations
        ```
        ./gradlew setup
        ```
    8. Installation: Create the database, compile the sources and deploy to Apache Tomcat
        ```
        ./gradlew install smartbuild
        ```
    9. Make sure you have the following PostgreSQL configuration in your `postgresql.conf`, this file is located wherever you have postgresql installed
        ```
        lc_numeric = 'en_US.UTF-8'
        max_locks_per_transaction = 128
        ```        

        !!! note
            After modifying the file restart postgresql
           
    10.  Start the Tomcat, in case of Linux you can run:
        ```
        sudo /etc/init.d/tomcat start
        ```

        !!! note
            If you want to run Etendo locally, go to [Run Etendo Development Environment](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/install-etendo-development-environment.md#run-etendo-development-environment).
                
    11. Open your browser in `https://<Public server IP>/<Context Name>`

=== ":octicons-issue-opened-24: ISO"

    ### Steps to Install the ISO with Internet Connection

    1. Download the ISO from the [release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/iso.md) page.

    2. Burn the ISO image into a USB stick. It is recommended to use balenaEtcher on Linux and Rufus on Windows. Alternatively, you can begin with your preferred virtualizer.

    3. Start the system using the ISO image. You will be prompted:

        - **Network Connections**: Verify that you are on a network with an internet connection and that an IP address is correctly assigned to your server.
        
        - **Guide Storage Configuration**: Select the disk where you want to run the installation. If you only have one disk, proceed to the next step.
        
        - **Storage Configuration**: Same as the previous step.
        
        - **Profile Setup**: Enter your name, the server's name, and the user *etendo* with the password of your choice.

    4. Wait for the **operating system** installation and server upgrade to take place. When prompted, select **reboot now**.

    5. After the restart, the final server configuration will begin. Wait for it to finish, and the server will be ready.

    ### Steps to Install the ISO without Internet Connection

    If you do not have an internet connection during installation, follow these additional steps:

    1. Follow the same procedure outlined in the previous section, *Steps to Install the ISO with Internet Connection* up to the network configuration stage.

        - **Network Configuration**: In this section, if you do not have an internet connection, select **Continue without internet**.

    2. After the operating system installation is complete, restart the server as prompted.

    3. Log in to the server using the username and password you configured during installation.

    4. Configure the network settings as desired to establish an internet connection.

    5. Once connected to the internet, log in as the superuser: `sudo su`.

    6. Begin the installation process by running the command: `etendo-install`.

    7. After the installation is finished, the server will be ready for use.

    <iframe width="560" height="315" src="https://www.youtube.com/embed/FqG4uM4PpbA?si=wKhH34wvQKY_7r4e" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Workspace
## Article Path: /Getting Started/User interface/Workspace
## Article URL: 
 https://docs.etendo.software/latest/getting-started/user-interface/workspace
## Article Content: 
#### Login 

Access **Etendo** through a Web browser by entering Etendo URL into the address bar of the browser.

The login window opens up:

![Log in screen](https://docs.etendo.software/latest/assets/drive/1pnoVz0-AFDoHwb_FQUiKETTrMXxLPxDJ.png)


!!! info
    In case the login page is not being displayed, please verify the correctness of the URL, or contact your system administrator.
    

Enter your user name and password. The user name and password are assigned by the system administrator.

!!! tip
    If you do not know your user name and password contact your system administrator.


Click **Let’s Continue** and the **Etendo** Home Page shows up.


#### Welcome Page

The first tab contains **Etendo workspace**, a customized portal-style home page. Here you will find: 

![Workspace screen](https://docs.etendo.software/latest/assets/drive/11lRke25pNzkHposOIdSH-DO9nTSBmi-o.png)

1\. **Left bar**: In this section, the user’s recent view content and documents are shown. In the Manage Workspace subsection at the bottom of this bar, the user can also add and administrate widgets.

2\. **Widgets**:  This section is for the user to customize by adding direct access to resourceful information Widgets in the user’s workspace tab. Widgets are customizable and the available set will be dependent on role and instance activation status. See how to embed a Widget into a window tab:

!!! info
    To add widgets, click the **Add Widget** link in the left column in the workspace and select from the library.


#### Top Navigation

The top navigation bar offers the following menus or functionalities:

![Top navigation bar](https://docs.etendo.software/latest/assets/drive/1q5pk7GKDtdUVr6maSiRlTMd-LM0Csaut.png)

|     |     |
| --- | --- |
| 1   | Quick Menu |
| 2   | Quick Launch |
| 3   | Application Menu |
| 4   | Alerts |
| 5   | Help |
| 6   | User section |
| 7   | End session |

From the top navigation bar, the user can launch new documents via the Quick Menu functionalities or jump to existing documents via the Application menu.

##### Quick Menu

**Create New:**  Through faster navigation, the user can access the creation of a new document, saving time and increasing the user experience. By using this functionality, a new document of a specific type is created on a new tab in form view.

![Quick menu](https://docs.etendo.software/latest/assets/drive/14_Y05jKQ3FrnvWGO0AqVmuPJNWnXDjFh.png)

**Quick Launch:** It is a browser.  By entering the first couple of letters of the name of the document type, suggestions are offered for the type of document you are looking for. The browser shows the user’s last three searches.

![Quick launch](https://docs.etendo.software/latest/assets/drive/11Rhg6Rbyz8Ri9rRRO_304t3c88N2OiYp.png)

##### Application

Read more in the [Application areas](navigation.md#application-areas) section.

!!! info
    *The contents of the Application Menu depend on the user's role. For example, one user can have various roles and see different things with each one.*

##### Alerts

An alert is a notification that informs or warns the user about a critical or important situation. In this section, you can see and edit all your active alerts.

The number of new alerts is shown in the top navigation as Alerts (n). This link takes you to the Alerts Management tab. This tab shows four sections, each one representing a status or stage in the alert life cycle:

-   **New alerts:** Alerts that you have not marked as read/acknowledged and that are not ignored nor solved.
-   **Pending alerts:** Alerts the user has marked as read/pending because they do not want to see them in the new section anymore. The user would do this, for example, when they have taken care of the problem but this has not been updated in the system. A typical example is: Stock of product x dropped below critical level. The user just placed a new order by phone\*\*,\*\* but it will still take a day to receive the orders.
-   **Ignored alerts:** Alerts that the user does not want to see again. By placing them in the Ignored section, it means that they are now exceptions to the alert rule.
-   **Solved alerts:** Alerts are automatically moved to the solved section when the system notices that the alert threshold ceased to be violated. Note that you cannot mark alerts as “Solved” yourself.

##### Help

Context-sensitive help can be accessed by clicking the item Help in the top navigation bar. This action opens a new tab to provide the user with specific information about any selected window. 
In this section, the user can also find information about the ERP.


##### User Section

The name of this section varies according to the name set up by the client.

The User section is split in two tabs: Profile and Change Password.

![User section](https://docs.etendo.software/latest/assets/drive/14odPRGme02UvFhR_feYwFh_sJYcE_3ku.png)

###### Profile

In this section, you can:

-   See the current role information.
-   Change the session options such as role, client, organization, warehouse and language you want to work with.
-   Set your default session options. Tick the “set as default” option to keep the same role every log in.

!!! info
    **Role:** The profile of security for the user, defining what windows and tabs they can see.<br>
    **Client:** Client for this installation.<br>
    **Organization:** The client’s organizational entity.<br>
    **Warehouse:** A logistical unit with the purpose of storage and manipulation of goods.<br>
    **Language:** The language in which the system information is shown.


###### Password

In this section, the user is able to change the password through this tab by writing the current password first and then, introducing the new password. Then, click **Confirm password.**

##### End Session

|     |     |
| --- | --- |
| ![End session](https://docs.etendo.software/latest/assets/drive/1WWtlvWh47YYIJot9rCXOV3za-4NzggxP.png) | This button logs you out of the application. A confirmation dialog lets you confirm. 


---
This work is a derivative of ["User Interface Introduction"](http://wiki.openbravo.com/wiki/User_Interface_Introduction){target="_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="_blank"} by [Etendo](https://etendo.software){target="_blank"}.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Navigation
## Article Path: /Getting Started/User interface/Navigation
## Article URL: 
 https://docs.etendo.software/latest/getting-started/user-interface/navigation
## Article Content: 
#### Navigation 

To get to a window, type a part of its name in the **Create New button** or the **Quick Launch button**. Etendo also offers a tree menu for easy discovery.

##### Quick Launch

!!! info
    For more information about Quick Launch functionalities, see the Quick Menu section in the Top Navigation Bar section.


##### Application menu tree structure

The Application menu is used to make all the application elements accessible to the user. Also, the last three searches are shown in this window.

![Application menu navigation](https://docs.etendo.software/latest/assets/drive/15OtgKjJ76XdA_PLUgQIY21SLVtSU-34j.png)

###### Icon references

There are different types of menu items which are identified with different icons:

|     |     |
| --- | --- |
| ![](https://docs.etendo.software/latest/assets/drive/1apop_xv-FUNdRrbFRKYftecCOtoNPBsW.png ) | Folders are used to organize other items within them. They can be expanded or collapsed to show their contents by clicking them. |
| ![](https://docs.etendo.software/latest/assets/drive/1NRP6x7Skj7LAT4mVS3QtloWPHncJGIQD.png) | Reports explode information from Etendo Classic. |
| ![](https://docs.etendo.software/latest/assets/drive/19YyKApp-ccjaq7vy_2NkpEtEOimOU1jW.png) | Processes allow complex operations to be performed. Some examples would be to import data from a file or the automatic creation of invoices from purchase orders. |
| ![](https://docs.etendo.software/latest/assets/drive/1uO4tHOiBKtbZC9303O3-we-NWVlYLgQx.png) | Windows allow the user to create, modify or query records. By records, it is meant any entity that has its own data within Etendo Classic, such as a product, an order, an invoice, etc. |

#### Application Areas 

Etendo is split into different application areas. Each area is represented by a separate folder accessible from the Application menu in **the top navigation** screen area.

##### Window structure

The Toolbar contains action buttons and process buttons. Action buttons are generic and can be applied to almost all selected records.  Process buttons are record specific and depend on the record status and the active level (header or lines or lower).

![Window structure](https://docs.etendo.software/latest/assets/drive/14FFpTaeNhX8GcezEMlHcoECXHqw_6hqT.png)

|     |     |
| --- | --- |
| 1   | Action buttons |
| 2   | Process buttons |

##### Buttons

The action buttons perform the following actions:   
 

|     |     |
| --- | --- |
| ![Create new record](https://docs.etendo.software/latest/assets/drive/1GKlIMPwsdJGcBxlsAaPPA1JKLtltwKtE.png) | Create a new record in a form 
| ![Insert new row](https://docs.etendo.software/latest/assets/drive/1Y1C3_1wbieXR4kT8N5m8R0U2mkXw5kdG.png) | Insert a new row in grid view 
| ![Save your changes](https://docs.etendo.software/latest/assets/drive/1XhR2JA823h4QSC0WDHjFZBsu_vfwf0OH.png) | Save your changes in the database 
| ![Close current record](https://docs.etendo.software/latest/assets/drive/1dBa6cXcbn42LpfdNixq_vTi6sXfd8Keq.png) | Close the current record and return to grid view 
| ![Cancel changes](https://docs.etendo.software/latest/assets/drive/1NsE9zY7TiPoUgYIQ8UppUVObXUKVVY4S.png) | Cancel changes and return to last saved state 
| ![Delete current record](https://docs.etendo.software/latest/assets/drive/1d4lwOizdurcc-TbeKyf-hHr9AoiybAVN.png) | Delete the current selected record(s) from the database |
| ![Refresh current data](https://docs.etendo.software/latest/assets/drive/1VYT35K3_gln6IhYBW8H9L5Qj-fQ_2zMS.png) | Refresh the current data from the database 
| ![Export to spreadsheet](https://docs.etendo.software/latest/assets/drive/1DiWO0xVHHDOOX1VubqN2jTCUllOwLpaF.png) | Export to spreadsheet 
| ![Upload new attachment](https://docs.etendo.software/latest/assets/drive/1GpERUp_lqI33tTyeajqKkwBmuMlDqhwH.png) | Upload new attachment 
| ![Copy record](https://docs.etendo.software/latest/assets/drive/1KC4OssTS5KT53zrp6-x7IjLk7af6Wa7x.png) | Copy record 
| ![Print record](https://docs.etendo.software/latest/assets/drive/12xqXpyWebW_9nS51oKncFUuMKL_3XPMs.png) | Print record 
| ![Show audit trail](https://docs.etendo.software/latest/assets/drive/1cOwiLhDDaipaNp8WUoZ_YV2KK0M9jNmM.png) | Email 
| ![Show audit trail](https://docs.etendo.software/latest/assets/drive/16ZwtS_WTw9JN2rgMXqztMl-30PufisGJ.png) | Show audit trail 
| ![Get a direct link](https://docs.etendo.software/latest/assets/drive/1cNvwjtP2gv3q0IcLr7WzK-dzqJePnFdK.png) | Get a direct link to this view or record 
| ![Form personalization](https://docs.etendo.software/latest/assets/drive/1QttVniwTrd0JC-QabYjnXzunnC9dIZx1.png) | Form personalization 
| ![Save view](https://docs.etendo.software/latest/assets/drive/1DEpV-kFC2K9JvhSD0eeEhgjPFcM7bi6W.png) | Save view |.png
| ![Show table and form](https://docs.etendo.software/latest/assets/drive/1kSNsODGVIbTbEDzYRDqR_LqCVKk0_sXp.png) | Show table and form |.png

---
This work is a derivative of ["User Interface Introduction"](http://wiki.openbravo.com/wiki/User_Interface_Introduction){target="_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="_blank"} by [Etendo](https://etendo.software){target="_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Grid and Forms
## Article Path: /Getting Started/User interface/Grid and Forms
## Article URL: 
 https://docs.etendo.software/latest/getting-started/user-interface/grid-and-forms
## Article Content: 
#### Grid and Form View

Etendo allows the customization of grid and form views. Customized windows and form views are stored once saved in the Window Personalization window.

##### Grid View

![Grid view example](https://docs.etendo.software/latest/assets/drive/1Fc2LfvRYeixaOCFt6qKl-GG4ycr0tyhR.png)

##### Form View

![Form view example](https://docs.etendo.software/latest/assets/drive/1BFjhtuYG6q5bsfwuSCVt_c4qmaj46vdY.png)

##### Show Table and Form

With this button ![](https://docs.etendo.software/latest/assets/getting-started/user-interface/grid-and-forms/tandf.png) in the toolbar, the user can have both grid and form view of the same record and use them more efficiently.

![](https://docs.etendo.software/latest/assets/getting-started/user-interface/grid-and-forms/tableandform.png)

#### Grid View

The grid view functions as the base view and often as a starting point to filtering and drilling down. The user can open a record in the form view on top of the grid. The interaction metaphor that is used is that of a file explorer of an operating system. The grid is the folder with files, a double click opens the record. The record in form view can be closed at any time by clicking the close (X) button in the top right corner of the form.

A record (Form view) in the grid can be opened via:

-   A double click on the row.
-   Pressing ENTER on the keyboard.
-   Clicking the form/document icon on the left side of the row.

##### Column Filtering

On top of the columns in a grid, the user will find column filters. These filters can be applied to find specific records. There are several types of column filters:

-   Regular column filters: These are fields that are empty by default, but once the user starts typing the first characters of a search term, the grid will be filtered in real-time.
-   Date column filters: Clicking it will launch a dialog where the user can set a range, for example, *8 days ago till today*.
-   Dropdown reference column filters: filters on references to other data, for example, from a sales order to a business partner. You can filter on multiple values, if there are many values to filter on then you can scroll in the dropdown box.
-   Dropdown column filters: Filters that contain a limited set of values. Just open the dropdown and select a value. 

![Filtering](https://docs.etendo.software/latest/assets/drive/1kul74WVN4g1YXarFm12iaPTJNpC0YfCw.png)

The following symbols can be used in regular column filter fields to create more complex filter expressions. Note that once you start typing a filter expression in a numerical value column, the real-time filtering is switched off and you will need to hit Enter to apply the filter.

|     |     |     |     |
| --- | --- | --- | --- |
| **Symbol** | **Filter** | **Example** | **Meaning** |
| <   | less than (also works for strings) | <100 | Only shows amounts less than 100 |
| \>  | greater than (also works for strings) | \>100 | Only shows amounts greater than 100 |
| !   | not equal (also works for strings) | !100 | Shows everything except amounts that equal 100 |
| ^   | starts with | ^H  | Only shows values that start with "H" |
| \|  | ends with | H   | Only shows values that end with "H" |
| !^  | does not start with | !^H | Only shows values that do not start with "H" |
| !@  | does not end with | !@H | Only shows values that do not end with "H" |
| ~   | contains (this is the default for most column filters) | ~buenas | Only shows values that contain "buenas" |
| !~  | does not contain | !~buenas | Only shows values that do not contain "buenas" |
| ##   | is Null | ##   | Only shows records without a value in this column (works in regular and date column filters) |
| !##  | is not Null | !##  | Only shows records with a value in this column (works in regular and date column filters) |
| \== | exact match (for fields where 'contains' is the default) | \==FV/1 | Only shows values that equal exactly "FV/1" |
| a...b | range (between a and b) | 0...100 | Only shows values between 0 and 100. |
| or  | OR boolean | check or cash | Only shows records that contain "check" or "cash". Note if you want to use the term 'or' as a filter value then, you should prefix it with a '\\'. So to get all records containing the value 'or' filter using this value: \\or. |
| and | AND boolean | check and cash | Only shows records that contain "check" and "cash". Note if you want to use the term 'and' as a filter value then, you should prefix it with a '\\'. So to get all records containing the value 'and' filter using this value: \\and. |

Filters can be cleared by clicking the funnel icon in the top right of the grid.

##### Right Click

The right click can be used to find more options about any section of the grid view. In this drop-down menu, keyboard shortcuts are displayed, columns can be added to the view and summary options can be found.

![Right click options](https://docs.etendo.software/latest/assets/drive/1QNBKfBUaLNkhLHC6Y7G8GYcOReRcHMzZ.png)

##### Bulk Processing

Etendo allows the user to massively process records. This process engine enables the user to select an input entity, create criteria to get results, run actions for the input or define output which can be later used as input for other actions. 

![](https://docs.etendo.software/latest/assets/getting-started/user-interface/grid-and-forms/bulkposting.gif)
                                    
!!!info
    The document actions displayed when selecting more than one document will be all the ones available based on the statuses of the selected records, depending on the type of document being selected.


##### Save View

Save View stores grid and form settings, column filters and even the entire layout of the screen, for example, the position of the splitter bar between the header and lines. With this option, the user can rearrange the grid, adapt it to their task and save this view to open it at another time. The user can access saved views through a pull down menu that sits underneath the Save View button in the toolbar.

![](https://docs.etendo.software/latest/assets/getting-started/user-interface/grid-and-forms/saveview.png)

A saved view can be set as default and can be deleted. The active view is indicated by a little arrow in front of the view name.

!!!info
    As an administrator, you are able to save predefined views on different levels (client, org, role) which are made available to users. As a regular user, you can only edit/save views on your own levels and not change views entered by an administrator.

##### Keyboard Shortcuts

|     |     |
| --- | --- |
| **Shortcut** | **Action** |
| Ctrl + Shift + f | Jump to column filters |
| Esc | Returns to grid while keeping the filter value |
| Alt + Del | Clear column filters |
| Ctrl + i | Insert row |
| Del | Delete row |
| F2  | Edit row |
| Ctrl + F2 | Switch to form view (while editing) |
| Enter | Open row (into form view) |
| Ctrl + Alt + Shift + <Letter> | Execute process (yellow buttons) |
| Esc | Cancel editing |

#### Form View

In the form view, the user has access to detailed information about each record.

In this view, each field title can be followed by two different icons:

|     |     |
| --- | --- |
| ![Arrow icon](https://docs.etendo.software/latest/assets/drive/1sK4lTD4FNi3-WZDkGzPpE3Px7brhZZWd.png) | By clicking here, the user can open a new tab with more specific information. 
| ![Asterisk icon](https://docs.etendo.software/latest/assets/drive/15aZZ-UGcGfakPeYAImHnx4gRwRp2fmP6.png) | This shows the field is required to be complete. The field has a yellow background. 

##### Form Personalization

This button in the toolbar ![](https://docs.etendo.software/latest/assets/getting-started/user-interface/grid-and-forms/logo.png) allows the user to customize forms to include necessary fields and features that suit their needs best.

![](https://docs.etendo.software/latest/assets/getting-started/user-interface/grid-and-forms/formpersonalization.png)

##### User Messages

User Messages are displayed at the top of the view and their function is to inform or warn the user about an exception, error or other situation in the application that needs the user's attention. There are four different types of user messages.

**Info:** This type of message is used to communicate interesting but not essential information.

![Info message](https://docs.etendo.software/latest/assets/drive/1atlScOy_dksTaOEundWmIu203B7jO02D.png)

**Success:** This type of message is displayed after successful process execution.

![Success message](https://docs.etendo.software/latest/assets/drive/1wus0cnCi2Ou9eQ1eIADpTQ0SVOAuSMGS.png)

**Error:** This type of message is used for exceptions and errors. A typical case is a process that was not executed successfully.

![Error message](https://docs.etendo.software/latest/assets/drive/1yKisLYaiB95bt1wRMLXNhprmONuf7NQR.png)

**Warning:** This type of message is used to inform the user about a system status or event that might cause a problem.

![Warning message](https://docs.etendo.software/latest/assets/drive/19f47PVut5FN5_iXv_RszQsO28MvmWyqT.png)

##### Status Bar

The Status Bar conveys the editing status of the document (New, Editing or Saved) together with a user-defined set of read-only attributes. These allow the user to get an overview of the document without having to scan the remainder of the form. The status bar is only visible in form view.

![Status bar](https://docs.etendo.software/latest/assets/drive/1d5GpX_oOyNMvqvy94JBtOeg4FJnWSZZI.png)

|     |     |
| --- | --- |
| 1   | Status |
| 2   | Buttons |

On the right side of the status bar, the following buttons are available:

|     |     |
| --- | --- |
| ![Browse to previous record](https://docs.etendo.software/latest/assets/drive/1jP4R73D1bYKd-qSAiRwK2HH0NKmODj-4.png) | Browse to next record 
| ![Browse to previous record](https://docs.etendo.software/latest/assets/drive/1YeC8yk9CzwM5hTScn4JNIcvA44ut80vq.png) | Browse to previous record 
| ![Maximize form](https://docs.etendo.software/latest/assets/drive/1xRCMAPS6c3GyMd4ygc5TbULgR7TUkX1Q.png) | Maximize form 
| ![Restore size](https://docs.etendo.software/latest/assets/drive/1fiogmu4e5r1nP5g0Aa7L8dFfZG2xcvzF.png) | Restore form to previous size 
| ![Close form](https://docs.etendo.software/latest/assets/drive/1KU3xBqPUVQKl43Je-S9ij3Vr031G2LCf.png) | Close form (save and return to grid.png) |

##### Keyboard Shortcuts

|     |     |
| --- | --- |
| **Shortcut** | **Action** |
| Alt + ArrowDown | Open dropdown |
| Space | Once a multi-select dropdown list is opened, it (un)selects the focused item. Used in FK and List references in the grid filter |
| Ctrl + Enter | Open selector |
| Ctrl + Alt + Enter | Open on tab ("link out") |
| Alt + Shift + Enter | Maximize or restore form view |
| Ctrl + Shift + x | Save & Close |
| Esc | Close (same as X top-right icon) |
| Alt + Shift + PageUp | Next record |
| Alt + Shift + PageDown | Previous record |
| Ctrl + Del | Delete |
| Ctrl + s | Save |
| Ctrl + d | New record in form view |

##### Grid summary function update on selection 

Via the set summary function through the right click button, it is possible to keep on updating the number of selected records in the grid. This function allows the user to dynamically get summary functions of a subset of records in the filtered window. 
  
#### Tabs

Etendo allows the user to have multiple transactions opened at the same time on different tabs. You can switch between active tabs. The active tab is highlighted in blue color with a thin yellow line on top of it. The inactive tabs remain greyed out.

![Tabs](https://docs.etendo.software/latest/assets/drive/1L_S4knqCWJRPXPKIAn6_W-ompY7O4zZT.png)

Tabs can be closed by pressing the X button:

It is possible to reorder tab position. To do it, drag the tab and drop it in the desired position:

In case of tab overflow, when the total width of the tabs exceeds the available horizontal space, three yellow arrows appear to the right of the last tab that allow you to scroll through the tabs and easily navigate to one:

![Tabs](https://docs.etendo.software/latest/assets/drive/1_K-cBXnCPoABJJmRfAowo3u58fyol43O.png)
  
---
This work is a derivative of ["User Interface Introduction"](http://wiki.openbravo.com/wiki/User_Interface_Introduction){target="_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="_blank"} by [Etendo](https://etendo.software){target="_blank"}.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /User Guide/Overview
## Article URL: 
 https://docs.etendo.software/latest/user-guide/overview
## Article Content: 
#### Welcome to User Software Documentation

In this section, we welcome you to a complete user guide to facilitate your experience working with each of our products.

##### Are you ready to dive into the world of our software?

Whether you're looking to master the basics or explore advanced features, our guides are designed to fit your needs. If you are a developer, we suggest you visit our section created especially for you: [Developer Guide](https://docs.etendo.software/latest/developer-guide/overview.md).

---

<figure markdown>
![etendo-classic.png](https://docs.etendo.software/latest/assets/user-guide/overview/etendo-classic.png){align=right width=400}
<br><br>
##### Here you will find user guides on how to use our platform with all Etendo Classic windows, as well as guides for all our bundles in the optional features section.
</figure>


---

<figure markdown>
![etendo-mobile.png](https://docs.etendo.software/latest/assets/user-guide/overview/etendo-mobile.png){align=left width=400}
<br><br>
##### You will find information on how to use the Etendo mobile application, from downloading it from the Play Store and App Store as well as the complete user interface.
</figure>


---

<figure markdown>
![etendo-copilot.png](https://docs.etendo.software/latest/assets/user-guide/overview/etendo-copilot.png){align=right width=400}
<br>
##### In this section, you will find everything about our Copilot project. Currently you have information about Bastian, our artificial intelligence based chatbot that can answer you all about Etendo.
</figure>
==ARTICLE_END==
==ARTICLE_START==
# Article Title: ✨ Getting Started
## Article Path: /User Guide/Etendo Classic/Basic Features/General Setup/✨ Getting Started
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/getting-started
## Article Content: 

#### Overview

This section describes the steps that need to be performed first to configure Etendo.
Etendo installations require at least a [Client](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/client.md) and an [Organization](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/enterprise-model.md#organization). Client and Organization are the two key concepts within the General Setup.

In other words, it is not possible to issue an invoice or to post a journal entry to the ledger in Etendo if there is no Client and Organization properly created and configured.

The first steps to follow to configure Etendo are:

###### Installation of the Localization Bundle if available for the country

!!!info
    Read the [Install Modules](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/install-modules-in-etendo.md) documentation to install the Localization bundle. 

This can be considered the first basic step while setting Etendo instances as it is required to install first the localization bundle if any, in order to apply the accounting reference data or Chart of Accounts while creating either the Client or the Organization later on.

A Localization Bundle can include at least:

- the complete **translation** for the official language(s) in the country.
The language is automatically available once the localization bundle has been successfully installed, therefore it can be selected as described at [profile](https://docs.etendo.software/latest/getting-started/user-interface/workspace.md#profile).

- the **chart of accounts** that defines the accounting structure if any to comply with the approved local practice and laws.
The Chart of Accounts is available for selection just while running either the Initial Client Setup or the Initial Organization Setup.

- and the setup of the **taxes** which comply with the in-country tax authorities requirements.
The setup of the taxes is also available for selection while running either the [Initial Client setup](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-run-an-initial-client-setup-process.md) or the [Initial Organization setup](https://docs.etendo.software/latest/general-setup/enterprise-model.md#initial-organization-setup), and even in the Enterprise Module Management window.

###### Initial Client Setup

A [Client](https://docs.etendo.software/latest/general-setup/client.md) in Etendo is the top-most level of configuration and data within Etendo.

Above means that certain configurations such as users, customers, vendors and other [master data](https://docs.etendo.software/latest/master-data-management/master-data.md) can be managed in a client and therefore be available across all the organizations within the client.

!!! info
    Each client can host at least one or even more than one organization that can be used to model your enterprise.

The [Initial Client setup](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-run-an-initial-client-setup-process.md) is the process which creates a Client in Etendo. A Client cannot be created manually.

This process besides creating a Client allows selecting the reference data included in the bundle/s already installed.
All that data, if applied to the Client, will be shared by all the organizations which belong to the Client.

!!! info
    There is a System Client which is automatically created by Etendo as part of the Etendo installation process.
    This client handles application data such as tables, columns and fields and it also manages some data which can be shared across all the Clients such as currencies, countries and regions and units of measure.

###### Initial Organization setup

An **Organization** is the second level of configuration and data.

Organizations can be structured in a hierarchical way within a Client providing multiple options while modeling your enterprise.

There are different types of Organizations which can either be independent legal entities or not.
Legal entities can either require accounting or not and Not Legal Entities can either allow transactional data or not.

The [Initial Organization setup](https://docs.etendo.software/latest/general-setup/enterprise-model.md#initial-organization-setup) is the **process** which creates Organizations in Etendo.

!!! info
    An Organization can be created once the Client it belongs to has been created.

An Organization cannot be created manually.

Same way, this process besides creating an Organization allows selecting the reference data included in the bundle/s already installed.

This time the data, if applied to the Organization, will be available just for the Organization being created.

!!! info
    There is an Organization named (\*) which is automatically created at the same time that the System Client is created. Every organization created later on will hierarchically be located below it.

###### Users and Roles setup

Etendo security can be split into Functional and Data security.
**Functional** security manage the access rights to Etendo entities such as Windows and Processes by properly setting up [users](https://docs.etendo.software/latest/general-setup/security.md#user) and [roles](https://docs.etendo.software/latest/general-setup/security.md#role):

A **User** is an entity which can log into Etendo whenever it has a password and at least one role assigned.
Each person accessing Etendo should have a different user assigned properly configured.

A **Role** is the connection between users and access rights to Organizations, Windows, Processes and Forms in Etendo.
Access rights are first configured at role level, roles are then assigned to the user/s.

Etendo creates two users by default, the System user and the Admin user:

- the **System** user is the owner of Etendo application data. It is not possible to log into Etendo as System user.
- the **Admin** user is a **super** user which has access to any Etendo Client.

The password assigned to this user is Etendo, however it can be changed if needed in the [user](https://docs.etendo.software/latest/general-setup/security.md#user) window.

This user is assigned to the System Administrator Role, a role with no access restrictions.
**Data security** is an advance setting as it manages the access rights to subsets of data within Etendo entities such as Windows and Processes, by properly setting up the [Data Access Level](https://docs.etendo.software/latest/general-setup/security.md#role-access) at table level and the [role](https://docs.etendo.software/latest/general-setup/security.md#role):

!!! info
    Data Access level defines the client and/or the organization each record is going to be visible from.

Every [table](https://docs.etendo.software/latest/general-setup/security.md#role-access) in Etendo has a Data Access Level column.

User Access Level allows limiting the records which will be accessible in entities such as Windows, Processes, Forms, Widget Classes and Views for a [role](https://docs.etendo.software/latest/general-setup/security.md#role), or even limit the access to a given entity.

##### Basic Setup Diagram

The diagram below shows the Etendo basic General Setup flow for a legal entity with accounting. This flow is one part of the overall Business setup flow.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/general-setup/getting-started/basic-general-setup.png)

In the example above, the **Accounting** data can not be shared across all the organization/s of the client because it was not applied at client level but to the Organization being created.

This setup would fit in the case of a Client which has **one or more independent legal entities with accounting underneath**, same as the sample client shipped with Etendo by default (F&B sample client).

There is a close relationship between the general setup which allows the creation and configuration of an enterprise, and the accounting configuration area because to set a Legal with Accounting Organization as ready, it requires below accounting items to be properly created and configured first:

1. a [Fiscal Calendar](https://docs.etendo.software/latest/financial-management/accounting/setup.md#fiscal-calendar)

2. and an organization's [General Ledger configuration](https://docs.etendo.software/latest/financial-management/accounting/setup.md#general-ledger-configuration) which includes a dimension that is the [Account Tree](https://docs.etendo.software/latest/financial-management/accounting/setup.md#account-tree) or Chart of Accounts.

!!! info
    The Fiscal Calendar, once manually created, can be available to all the organizations within the client if it is created for the (\* (asterisk)) organization.

A defaulted **General Ledger configuration** and the **Chart of Accounts** can be automatically created if an **Accounting** reference data such as a **Localization Bundle** containing a Chart of Accounts module is installed and applied to the Organization. Moreover, in case there is no Localization Bundle for your country, Etendo delivers a Generic Chart of Accounts module which, if installed and applied, creates a sample Chart of Accounts and a defaulted General Ledger configuration which can be later on customized to meet the needs of your organization.

#### Business setup diagram

The diagram below shows the business setup flow.
This business setup flow goes from the Generic setup and Master Data areas to the Accounting and Warehouse setup areas.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/general-setup/getting-started/Quick_Guide_Diagram_new.png)

If you want to know more about the basic setup of the business configurations in Etendo, please review the different articles in the General Setup section.

By following this setup flow you should be able to have your own version of Etendo ready to execute the basic Business Flows.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Clear Report Cache
## Article Path: /User Guide/Etendo Classic/Basic Features/General Setup/Clear Report Cache
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/clear-report-cache
## Article Content: 
!!! info
    To be able to include this functionality, the Platform Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Platform Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=5AE4A287F2584210876230321FBEE614){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Platform Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/platform-extensions/release-notes.md).

![](https://docs.etendo.software/latest/assets/drive/1QOK6qRnoFyXzZwsY4Cgwo22iBZ2CITgV.png)

In this window, the user, in general a developer, can delete the report cache data by clicking the “Done” button. This has technical purposes.  
After clicking it, a success message will be shown indicating the completion of the process.

!!! info
    For more information, visit [Platform Extensions Bundle developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/overview.md#report-cache-management)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Attachments Configuration
## Article Path: /User Guide/Etendo Classic/Basic Features/General Setup/Attachments Configuration
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/attachments-configuration
## Article Content: 
#### Overview

Client configuration of the Attachment Method to be used. Each attachment method can include its own extra fields to complete the configuration of the attachment method. It is only possible to have one active configuration on each client.

###### Header

It shows all configuration related to the attachment method used to save attachments. Each Attachment Method can include its own specific configuration fields like: server URL, user, password, language, etc.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Application
## Article Path: /User Guide/Etendo Classic/Basic Features/General Setup/Application
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/application
## Article Content: 
#### Create Sequences

:material-menu: `Application` > `General Setup` > `Application` > `Create Sequences`

In this window, the Create Sequences process is executed.

When selecting the organization and executing the process, Etendo creates the sequences for the type of fields "Transactional Sequence" or "Non transactional Sequence".

The main advantage of these new sequences is dynamic masking, which makes it possible to add dates or dynamic strings.

![](https://docs.etendo.software/latest/assets/drive/12h763OVeuLSs-GkZq5-zTPZMMV0UzuV9.png)

!!! warning
    The user can run this process only after a developer configures the sequence fields using transactional or non-transactional sequences.

!!! info
    For more information about this configuration, visit the technical documentation about [Sequences](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-use-advanced-sequences.md).

After that, in the `Financial Management`>`Accounting`>`Setup`>`Document Sequence` window the user can see and edit the sequences generated.

![sequenceslist.png](https://docs.etendo.software/latest/assets/legacy/technicaldocumentation/platform/sequenceslist.png)

| _List of sequences generated by the process_ |

#### Conversion Rate Download Rule

:material-menu: `Application` > `General Setup` > `Application` > `Conversion Rate Download Rule`

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

This module automatically generates conversion ranks with a background process using Apilayer. It allows keeping currency conversions up to date.

Conversion rate, also called currency exchange rate, is the rate at which one currency may be converted into another one within a given period of time. Currency is an accepted medium of monetary exchange that may vary across countries.

![](https://docs.etendo.software/latest/assets/drive/1zFe45U_EkZAD3OWHF2CY89LpaZ2NDcj1.png)

Fields to note:

- **From Currency**: Original currency
- **To Currency**: Target currency
- **Tolerance**: The maximum difference allowed between the new conversion rate and the previous one. This is used to insert or not the new downloaded rate.

#### Currency

:material-menu: `Application` > `General Setup` > `Application` > `Currency`

##### Overview

Currencies and conversion rates are basic settings in Etendo.

Currencies used worldwide are automatically created and listed in the currency window once Etendo installation is completed.

!!! info
    All these currencies are linked to the system organization (\*), that means that those currencies will be shared by all the organizations in the system.

##### Currency

Currency window allows the user to visualize or to create and configure the currencies to use in monetary transactions.

![](https://docs.etendo.software/latest/assets/drive/Id_-XkKhJGKz4E4IgrcdchCEUtwHOz2EE8QQ_GiPaqSU470JxMUXCRZAIVHbLnAjQATCkVBbBy-1AbEPbzOR-EItV6nxocGv5sBtAkabdwigmNQiaO7qcrF0yUAdIxkmozBdAn-t.png)

As shown in the image above, currency relevant data is:

- the currency _ISO code_. Currency ISO codes are worldwide used codes for the representation of currencies and funds.
- the currency _symbol_ which can be placed at the right or at the left of an amount
- and the currency _precision_ or number of decimals to use while calculating amounts in that currency.

Etendo allows the user to setup three types of currency precision:

- the **standard precision,** defaulted to 2, is the one used overall but for prices and cost amounts calculations which can use a different precision.  
  This precision is the one used to calculate order and invoices amounts such as "Line Net Amount", "Total Net Amount" and "Total Gross Amount", therefore it should not be bigger than 2 unless the currency allows the user to pay smaller quantities than 0.01
- the **costing precision,** defaulted to 2, is the one used for product cost calculations. It is recommended to change it up to 4
- and the **price precision** is the one used for unit/list prices which can have more than 2 decimals precision because amounts are finally rounded to 2 by the standard precision.

!!! warning
    Changes on currency precision can only be made at client level, therefore System Admin Role needs to be used.

##### Conversion Rates

Conversion rates tab lists the available conversion rates for a given currency.

![](https://docs.etendo.software/latest/assets/drive/WLfdO4txHazfD7hrPCx81A_8FTa07TqNpNlv_ZIyEEBcbJt907KdDTIkZ71Y9Qa4d2opmcOfqNopEEYG-bvxrJT4V_y8ELvirA4MLN7JpMH8rdtBHgnAsHtMNZfkMJEM_c68jzIx.png)

A conversion rate is the valid rate at which one currency may be converted into another one within a given period of time.

This implies that a single currency might have several conversion rates depending on:

- the currency at which might be converted
- and the period of validity

!!! info
    Currency conversion rates can be also created in the Conversion Rates window, therefore it can be reviewed in this tab.

!!! note
    Etendo recommends conversion rates to be configured in the Conversion Rates window, as it is required to defined both the "Multiple Rate By" (USD - €) and the "Divide Rate By" (€ - USD) to properly defined the exchange of two currencies.

##### Translation

Currencies can be translated to any language if required.

![](https://docs.etendo.software/latest/assets/drive/h1lRXjQBmJVNgWlx_tv7RGfyF56NqhAfh872qimAXBSDYMLLQouPXNbHMF9dcByVgIoOc261XbWARBiXrTLsvtRQ8e8-rg-5wncWfV6QQxf6l1kRrHoe7u_xGC38Hq5GIdKojK94.png)

#### Conversion Rates

:material-menu: `Application` > `General Setup` > `Application` > `Conversion Rates`

##### Overview

Conversion rate also called currency exchange rate is the rate at which one currency may be converted into another one.

!!! info
    Conversion rates can only be created at system organization level (\*), which implies they are available for all the organizations within the client.

##### Conversion Rate

Conversion rates window allows the user to create the rates to be used for multi currency transactions.

Etendo requires the user to enter and maintain currency exchange rate in both senses, that means to enter at the same time the two rates below:

- a _Multiple rate by_ which is the rate by which the base amount will be multiplied for to calculate the converted amount.
- and a _Divide rate by_ which is the rate by which the base amount will be divided by to calculate the converted amount.

For instance, USD exchange rate to EUR should have a _Multiple rate by_ = 0.68 setting and a _Divide rate by_ = 1.47 setting, as shown in the image below:

![](https://docs.etendo.software/latest/assets/drive/0jd4xH1XIAHAk9o1yEa-ApHM2BcsMBuMK8YX9QPMH6u-A_h5M7O3lOaNA8xrMycgog-vAV-WgQhfCHf9UjwM6ftv1zZT_Fld28RaOTuwRU0Xw8V0Ql_A7KNgO20zKgYlvzlWcXs7.png)

#### Country and Region

:material-menu: `Application` > `General Setup` > `Application` > `Country and Region`

##### Overview

Countries and regions are basic settings to share within Etendo.

Countries and their corresponding regions are automatically created and listed in this window once Etendo installation is completed.

!!! info
    All these countries and regions are linked to the system organization (\*), that means that those countries and regions will be shared by all the organizations in the system.

##### Country

This window allows the user to visualize and/or to create and maintain the countries and the regions to be used in daily business activities.

![](https://docs.etendo.software/latest/assets/drive/7wlTKkSY89CblxbUfLmnLafkVTgPVlmk7_I-SS8d0mFe3lrRH3_5VN_PvJeClUPP1ZC9uhTTcLDdH3GhKAH2nuqpJgJgAEBwdJnVkTX1GtYu7OmXavxslpmGx84aoeNbNS2m8sCu.png)

As shown in the image above, country relevant data is:

- the _country ISO code_.
    - Country ISO codes are worldwide used codes for the representation of the countries.
- the _address print format_.
- whether it has any kind of _regions_ such as states or not. "Has regions" flag needs to be enable to enter regions in the Region tab.
- the _region name_
- the country _IBAN code_ of the country
    - IBAN or _International Bank Account Number_ is a system of numbering that was created to categorize the bank accounts worldwide.
- the country _IBAN code length_ of the country.
- the _Phone number format_
- the default _language_
- and the default _currency_

##### Translation

Countries and regions can be translated to any language.

![](https://docs.etendo.software/latest/assets/drive/J2nmC6HSXqsQMZ1gnwrSmgZ0GuXGZBR-l91sYP3vxBIZw_VxBHsjFzNhZg3aoxzWrIVgWjYl5oRXcb8pc9dh61OFDA4-B4XKaQEGctSmKA63gsKy0t7CqTHgF10Qq1XvPtWn4U1x.png)

##### Region

Regions tab allows the user to visualize and/or to create and maintain the regions of any type of country.

!!! info
    Country regions are simply defined by a name and a description.

#### Preference

:material-menu: `Application` > `General Setup` > `Application` > `Preference`

##### Overview

A preference is a type of session value which can either be an attribute or a property.

!!! info
    Every time a user logs in Etendo, a new session is opened.

While logging in, the user enters several variables such as the _Role_, the _Client_ and the _Organization_ and, once in, the user navigates to a _Window_.

All those variables have a key influence on the session values the user will get.

In other words, _Preferences_ allow the user to define session values, session values which can either be a property or an attribute defined for a single client or for all of them, or for a single organization or for all of them.

!!! info
    Preferences can be assigned to the system or to a specific module, therefore, while exporting that module, the preferences it has assigned will also be exported, so those general settings can be reused.

For instance, there is an existing _Property_ named "_Implements an alternative Invoice Process button_". That existing property is currently assigned to the Module "Advanced Payables and Receivables Management" with a value = "Y" for any client, organization, user, role and window:

- Above preference means that if the Advanced Payables and Receivables Management module is installed, it will use an alternative invoice process button, besides every user logging in Etendo will get that feature working regardless of its role, user and the client or the organization it is working on.

For instance, there is an _Attribute_ named _"Autosave"_ which is currently assigned to the system with a value ="Y". This attribute is visible and therefore applicable to System client and to (\*) organization for any user, role and window.

- The preference above means that every user logging in Etendo will get that feature working regardless of its role and user and the client or the organization it is working on.

##### Preference

Preference window allows the user to define and maintain session values which can be visible and therefore applied to different levels such as Client, Organization, User, Role and Window.

###### Preference Definition

![](https://docs.etendo.software/latest/assets/drive/ORFZT6LvzmxT-rOY-l1Xw07GvftHNxLMJU6RxtHo8LmMioTFNJMYUcITNJlA5xrvFyW8PMzRi2grIoMM-tFBiotCV4s3YNbUzC5G7UyavRacVSjEpYLuQQtdo9v_aTHWIgVHoM1w.png)

As shown in the image above there is one field named "_Property List_" which is key in defining a preference as a property or as an attribute:

- if the _Property List_ checkbox is _checked_, the preference is configured as a **property** to be taken from an existing list of properties.  
  There are many types of properties already created, besides _modules can add new properties to that list_ with the aim of getting those other modules or even the system can use them by setting the corresponding properties values.  
  Some of the available properties are listed and briefly explained below:
  - **Enable UOM Management**  
    If set to Value = "Y" at "System" level, it allows the user to define alternative UOM for a product, besides product's UOM.  
    Same way, a new field named "_Operative Quantity_" will then be shown in purchase, inventory and sales transaction documents, therefore "Ordered Quantity", "Movement Quantity" and "Invoiced Quantity" always shows "Operative Quantity" entered by the end-user, converted to the product's UOM.  
    **Enable automatic Price Difference Corrections**  
    If set to Value = "Y", it allows the creation of Price Difference correction cost adjustments.
  - **Enable Negative Stock Corrections**  
    If set to Value = "Y", it allows the creation of Negative Stock correction cost adjustments.
  - **Enable Cancel and Replace**  
    If set to Value = "Y", it allows to Cancel and Replace booked sales orders.
  - **Cancel and Replace - Associate shipment lines to new order**  
    This preference requires "Enable Cancel and Replace" preference enabled, and it only works if "Create netting shipment on Cancel and Replace" preference is not enabled  
    If set to Value = "Y", it assigns the shipment(s) related to the cancelled sales order lines to the replaced sales order lines.
  - **Cancel and Replace - Create netting goods shipment**  
    This preference requires "Enable Cancel and Replace" preference enabled, and it only works if "Cancel and Replace - Associate shipment lines to new order" preference is not enabled  
    If set to Value = "Y", it automatically creates and completes a "netting" goods shipment related to the cancelled, voided and replaced sales orders.
  - **CSV Text Encoding**  
    If set to Value = "Y" allows to specify the encoding to be used in the Export to CSV process
  - **Grid configuration**  
    If set to Value = "Y" every time a user changes a grid view, those changes are saved in this window linked to this property.
  - **Implements customer Credit Used calculation**  
    This property is currently assigned to the Advanced Payables and Receivables management module with a property value ="Y". This property avoids the C_BP_SOCREDITUSED_REFRESH function calculation.
  - **Implements an alternative Invoice Process button**  
    This property is also assigned to the Advanced Payables and Receivables management module with a property value ="Y". This property avoids the usage of core invoice process button.
  - **Implements an alternative Financial Management**  
    Same applies to this which allows an alternative financial management for that module.
  - **Implements Payment Monitor management**  
    Same applies to this, which disables core's background process and button on the invoice header that manage the payment monitor.
  - **Recent views shown in the workspace** property set to "Y"  
    This allows that the recent views are shown in the user workspace
  - **Show MRP and Production fields** property set to "Y"  
    This allows that the MRP and production fields are shown
  - **Not allow changing exchange rate and amount**  
    If you set this property with value = "Y", exchange rate and amount are read-only in Add Payment from Sales Invoice, Purchase Invoice, Payment In, Payment Out, Financial Account, in Select Expected Payments from Payment Proposal and in Funds Transfer from Financial Account.
  - **Write-off limit**  
    This property with a property value ="Y" allows configuring write-off limit in Add Payment from Sales Invoice, Purchase Invoice, Payment In, Payment Out, Financial Account and in Select Expected Payments from Payment Proposal. The write-off limit is set for each Financial Account in Financial Account window.
  - **Show Product Characteristics Parents**  
    Values can be 1,2,3,4, etc. The number means how many levels in the hierarchy tree the user wants to show in form view in the Product window. For example, if the tree is: Colour->Green->Green light->0034
  - **Allow Multiple Tabs of Window**  
    If set to Value = _'Y'_ allows opening more than one tab of a single window.
  - **Attach By Default**
    - If set to Value = 'Y' the "Print Document" popup will not be shown, this popup is the one which asks if the user want to attach the document or instead of it just print it without attaching. When the value of the preference is set to 'Y' the document will be automatically attached.
    - If set to Value = 'N' the "Print Document" popup will not be shown, this popup is the one which asks if the user wants to attach the document or instead of it just print it without attaching. When the value of the preference is set to 'N' the document won't be attached.
    - If Value is Undefined the "Print Document" popup will be shown with two options: "Yes" and "No, just print it". If "Yes" is selected, the document will be attached. If "No, just print it" is selected, the document won't be attached.
  - **Direct Print**
    - If set to Value = 'Y' the Direct Print mode is enabled.
    - If set to Value = 'N' or Undefined, the standard print mode is used.
  - **Allow Where Parameter**
    - If set to Value = 'Y', it allows getting the "\_where" parameter from manual datasources. A warning will be shown if the "\_where" parameter is sent.
    - If set to Value = 'N' or Undefined, it will not allow getting the "\_where" parameter from manual datasources. An exception will be thrown if the "\_where" parameter is sent.
  - **Allow Unsecured Datasource Request**
    - If set to Value = 'Y', it allows doing unsecured datasource request. A warning will be shown if the current role does not have access.
    - If set to Value = 'N' or Undefined, it will not allow doing unsecured datasource request. It is required to have a role with enough access permissions. An OBSecurityException is thrown if current role does not have access.
  - **External Rebuild**, when this preference is defined as system level with its value set to _Y_, it will not be possible to rebuild the system from Module Manager Console after installing/updating modules. It forces rebuilding the system from command line.
  - **Bypass Access Level Entity Check**, when this preference is defined with its value set to _Y_, it will allow bypassing the check that compares role's user level with entity's access level to completely prevent accessing latter one.
  - **Translate Yes/No Reference in Export To CSV**, when this preference is defined with its value set to _Y_, the value of the columns whose reference is _Yes/No_ will be translated to the current context language when exporting the grid of a standard window into CSV.
  - **Disable Linked Items Section**, when this preference is defined for a window with its value set to _Y_, the Linked Items section will be disabled for that window. If there is not any window defined in the visibility settings, this section will be disabled for every window in the application.
  - **Enable Screen Reader**, If this preference is set to _Y_ the full screen reader will be enabled. This will improve the accessibility to visual impaired people.
  - **Excel Export Format**, this preference allows setting the export format to be used when generating Excel reports. Two values are supported: _XLS_ or _XLSX_. When this preference is not defined, _XLSX_ is the default Excel export format.
  - **"Filter by documents processed since N days ago"** is related to Create Lines From in Sales/Purchase Invoice. It limits transactions starting from the current date to the defined days ago. If the preference is not defined then queries retrieve all records created since one year ago (365 days), else it will be filtered by the count of days defined as the preference value.

![](https://docs.etendo.software/latest/assets/drive/U-6eYqg2DbvQutUsYua4ZGYyN6m1Eg0Kf0kmS2ONtUO0l12g9IUSmE9NWCAHuLBjiy9IQt_dS1PG71TEorFR55Jg3z2S_UUBUq8NwYaCp-BUa1b5d6q9ZIquttmiYsoQzFKV4rR6.png)

- if the _Property List_ checkbox is _not checked_, the preference is configured as an **attribute**. An attribute is a free text attribute which can get whatever value.

![](https://docs.etendo.software/latest/assets/drive/t1vw7KGogAD0Tqp1UIoVESm6KBOrDcv9f2BuzzDGdaNP9yXkId4n_YODwWpbnzvGiSKEktpKJqAUtwwlUpKH3DR1Z6t51QShE5mUAWtuaksNDKhgeu-_YxYsnlwXySWaLwsyOfaU.png)

- **"ShowAuditDefault"** attribute allows enabling the Audit Trail feature. Audit Trail feature allows tracking every change done to any Etendo table or entity.
- **"ShowAcct"** attribute allows showing Post buttons and Accounting tab whenever its value is set to "Y".
- **"ForcedLinkWindowDBTableName"** where "DBTableName" is the name of the table in database.  
  This attribute allows a direct navigation to the window which UUID is set as attribute value, instead of using the standard navigation logic.
- **"ModalModuleModuleJavaPackage"** where "ModuleJavaPackage" is the name of the module's Java Package name or _"ModalModuleModuleUUID"_ where Module UUID is the unique identifier of the module in the data base.  
  This attribute defines whether the processes within a module invoked from a menu or a button or a tab are opened in browser popups (attribute value = "N") or in modal popups (attribute value ="Y").
  - _Browser popups_ implies the deployment of the process in a new window in the browser
  - _Modal popups_ implies the deployment of the process in another layer inside the application window.
- **"ModalProcessProcessUUID"** where Process UUID is the UUID of the process.  
  This attribute defines whether a given process is opened in modal popup (attribute value ="Y") or in browser popup (attribute value ="N").
  - This attribute has a higher preference than ModalModule, therefore it is possible to define all processes in a module to open in modal popups but some of them.
- **"SaveAttachmentsOldWay"**  
  This attribute defines whether attachments should be saved using the old attachment model.

###### Preferences Visibility

Preference visibility section defines the _levels_ where a preference is going to be used and therefore applied.

Preference levels can be set to a given value or left empty. If a level is left empty, the preference will be valid for any value of that level.

For instance, if user level is empty, any user will be able to see that preference. In case the same preference has values at different levels, the most specific one will then be used.

Available levels are:

- _Client_ - if this level is set to empty or to System, the preference will be visible from any client used to log in.
- _Organization_ - if this level is set to empty or to (\*), the preference will be visible from any organization used to log in.
- _User_ - if this level is set to a given user, only that user will be able to see that preference once logged in.
- _Role_ - if this level is set to a given role, only that role will be able to see that preference.
- _Window_ - if this level is set to a given window, only that window will be able to see that preference.

###### Preference Priority

Preference Priority section defines _priority_ of multiple preferences defined for same Property

Preference Priority will be applied while loading the default Preferences of the Logged in Role.

- Check Priority by Client **(Visible at client)** :
  - Undefined client visibility is handled as SYSTEM.
  - If pref1 or pref2 either of them which does not set to SYSTEM CLIENT will be considered.
  - If pref1 or pref2 both have value set and both not set to SYSTEM CLIENT, then it will check Next Priority Level.
- Check Priority by Organization **(Visible at Organization)** :
  - If pref1 or pref2 either of them which has value set will be considered.
  - If pref1 or pref2 both have values set then, It will check the depth of the value in Organization Tree and Highest Organization's Preferences will be Considered.
  - If pref1 or pref2 both have the same value set then it will check Next Priority Level.
- Check Priority by user **(Visible at User)** :
  - If pref1 or pref2 either of them which has value set will be considered.
  - If pref1 or pref2 both have value set then it will check Next Priority Level.
- Check Priority by Role **(Visible at Role)** :
  - If pref1 or pref2 either of them which has value set will be considered.
  - If pref1 or pref2 both have a value set then it will check Next Priority Level.
- Check Priority by Window **(Visible at Window)** :
  - If pref1 or pref2 either of them which has value set will be considered.
  - If pref1 or pref2 both have a value set then it will check Next Priority Level.
- **SAME PRIORITY**:
  - If all the above levels are the same then it will and will consider preference with column **"selected"=true**.

###### Preferences Values

When logging in Etendo or entering the role or the organization, the preferences visible for that user, role, client, organization or window are stored in the Etendo session. Those session values can be obtained by using the method: _org.openbravo.erpCommon.utility.Utility.getContext method._

Additionally:

- It is possible to look for the value of a given preference by using the method: _org.openbravo.erpCommon.businessUtility.Preferences.getPreferenceValue_.  
  This method shows an exception in case:
  - a preference property does not have a value defined for the required visibility level
  - or there is a conflict caused by the definition of more than one property values for the same preference property for a given visibility level

Conflicts can be manually resolved by checking and modifying the preference.

#### Session Preferences

:material-menu: `Application` > `General Setup` > `Application` > `Session Preferences`

Session preferences allow showing or hiding accounting tabs or translation tabs for a given user, role, client and organization.

![](https://docs.etendo.software/latest/assets/drive/VAr7jhdNC8mm1JlSp-Jq-dBswsbSAMKpcuq_Tg6_Z3yKcxRbc3N8IgLn-gimlxHoPzGvtOl0i3k7wPCdqKKG8zO1xgcS5xvh-sC1T0yO2qeanxvBMqt-P8TUPDo9n-ASz4p2LjaL.png)

As shown in the image above, session preferences window allow the user to setup a list of session preferences for the user, the role, the client and the organization entered while login in Etendo.

That user will need to have access rights to this window to get these preferences setup.

Available session preferences which can be shown or hidden are:

- **Enable Accounting** (previously called _Show accounting tabs_), this option allows showing the tabs defined as "accounting tabs" in a window, besides this option allows showing the process buttons that "Post" a document.  
  The complete list of accounting tabs is listed below. This option if selected set the "ShowAcct preference to "Yes".

|                                |                              |
| ------------------------------ | ---------------------------- |
| Window Name                    | Tab/Sub-Tab Name             |
| General Ledger Configuration   | General Ledger Configuration |
| General Ledger Configuration   | Documents                    |
| General Ledger Configuration   | General_Accounts             |
| General Ledger Configuration   | Defaults                     |
| Accounting Transaction Details | Header                       |
| Asset Group                    | Accounting                   |
| Asset                          | Accounting                   |
| Business Partner               | Customer Accounting          |
| Business Partner               | Vendor Accounting            |
| Business Partner               | Employee Accounting          |
| Business Partner Category      | Accounting                   |
| Financial Account              | Accounting History           |
| Financial Account              | Accounting Configuration     |
| Financial Account              | Accounting                   |
| G/L Item                       | Accounting                   |
| Product                        | Accounting                   |
| Product Category               | Accounting                   |
| Tax Rate                       | Accounting                   |
| Warehouse and storage bin      | Accounting                   |

- **Show Translation tabs**, this option allows showing translation tabs.  
  Translation tabs are shown in many Etendo windows. This option, if selected, sets the "ShowTrl" preference to "Yes".
- **Show Audit** - same way, this option allows showing the Audit Trail information. Audit Trail information can be found as well in many Etendo windows under the group section "Audit".  
  This option, if selected, sets the "ShowAuditDefault" preference to "Yes".
- **Theme or skin** - there are two possible options, "Default" or "Classic" skin or "2.50 to 3.00 Compatible".
- **Transaction Range** - this one is about the number of days (counting backwards from current day) used in the implicit filter of sales order or purchase order by example. Implicit filters are the filters used not to show documents that have been completed the last x days to avoid overflow.
- **"Records Range"** and **"Selector registry range"** only applies to 2.50 views. Etendo 3 allows scrolling down to see all the records in a window, tab or selector.

Finally, the **Save Preferences** button allows saving the changes.

#### Number to Word Converter

:material-menu: `Application` > `General Setup` > `Application` > `Number to Word Converter`

!!! info
    To be able to include this functionality, the Platform Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Platform Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=5AE4A287F2584210876230321FBEE614){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Platform Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/platform-extensions/release-notes.md).

This module provides the infrastructure to convert a number into its equivalent in words. This functionality is especially useful while printing checks.

Once installed, this module creates a new window which can be found in the application path: **General Setup // Application**

Some fields to note are:

**Organization** that is the legal entity which requires printing checks in a given language.  
**Language** that is the language's words into which the amounts to pay needs to be converted.  
**Javaclass** that is the route where the Javaclass that converts amounts into a given language is located.

The "javaclass" field is required but empty by default unless another module such as the Number to Word (Spanish) or the Number to Word (English) is installed and properly applied to the legal entity for which it is required to print checks. Additionally, the Javaclass can be filled in manually.

![](https://docs.etendo.software/latest/assets/drive/1YjGbvShn-Mwb6iNpbajKgNo77ukscR3n.png)

#### Window Personalization

:material-menu: `Application` > `General Setup` > `Application` > `Window Personalization`

##### Overview

Etendo allows the customization of grid and form views. Customize windows and form views are stored once saved in the Window Personalization window. Etendo windows can be shown in _Form View_ and in _Grid View_, both ways can be customized as required.

##### Window Personalization

Window Personalization lists and maintains the customized form views.

![](https://docs.etendo.software/latest/assets/drive/xS4tDlk0VJ49snDskpuJfugXl-ziE6vT8HMe7op-QkP_NzRwF-Rr7rgisAd3RnIXQLgaJ0h6hK07xGi2hbhGd37GcHr8q8zyW0zzZ4bOYdxQzByOqDjw202Qn0WoHMxu7WoIXCHU.png)

Once a form has been customized, saved and listed in the _"Window Personalization"_ window, it is possible to configure the levels of visibility where that form personalization will apply.

#### Alert

:material-menu: `Application` > `General Setup` > `Application` > `Alert`

##### Overview

Alerts are notifications which inform about events happening whenever an alert rule has been properly defined to monitor those events.

The way "_Alerts_" work in Etendo is described below:

- Alert rules need to be previously defined as SQL queries. SQL queries define the event that is going to be monitored.  
  For instance, _"Products without a defined price"_, _"Products under stock"_ or _"Bank account without accounting information"_
- An alert rule can be applied to every Etendo user or just to a set of them. Alert recipients are the Etendo users for which a given event is going to be monitored.
- An Etendo background process is permanently checking if the SQL query defined in each of the active rule alerts return any record.
  - If that is the case, Etendo creates and returns a new _alert instance,_ which is saved in the _"Alert Management"_ window in _"New"_ status.

The _number of alerts instances_ informing about events being monitored happening is shown in the "Top Navigation" menu:

![](https://docs.etendo.software/latest/assets/drive/z341Sqx0_VIs2wSRDSm-6Jlq_2MmxWxxFa406LPjtgffjFTdFIds94ov5CwjlKGP7vDSEyxAdiYnVGN3m0AaIZjGIz2WkrZSmPlCagaI-KmACHhix0-qaazsTFjJ3D9sG0sTkbHv.png)

Alerts instances can be visualized and managed in the _Alert Management_ window which is opened by clicking the "Alert" option of the Top Navigation menu.

![](https://docs.etendo.software/latest/assets/drive/-wFUIZt2K33Chbp-czLqJmO7f1hP5fcD2jkcZaI7CtnhlHHbdh7lk1_ayiFKbrcfx8slOlIXVjeiIe15gmt_CkcTwhWQGhAbfXXGCMaF6-ba5l_OGBnMsKpP8CkL23o7AwzywwMX.png)

Alerts can have 4 different status:

- _New_ - new alerts instances which reflect the events monitored happening.
- _Pending_ - acknowledge alert instances for which an end-user action is pending to be done to get them solved or fixed.
- _Ignore_ - not applicable alert instances which must be ignored.
- _Solved_ - alert instances solved as the event happening is fixed or solved.

The way to manage alerts instances is by manually selecting and moving them to the next or previous status once they are manually acknowledged, ignored or solved.

##### Alert Rule

Alert window allows the definition of alert rules as SQL queries which define the event to be monitored and how it will be monitored.

Alerts are defined by entering below data:

- The _"Name"_ of the alert which is the event to be monitored.
- The _"SQL"_ query.
- and the _"Tab"_ where the alert instance can be fixed or solved.

![](https://docs.etendo.software/latest/assets/drive/7FDlwrebuc8IysmRIryYm81mF7QPheC-khbM3NdpZUdAIlXzkhZMDvasxwUPYPDMEyJcP_oM5t16sfAW3ZOCyVNUmR8nE4WWZkLYexMWFuKDHaCb0j8Axa1AetNm9j5rEVq36Kri.png)

##### Translation

Alerts can be translated to any language required.

##### Alert Recipient

Alerts can be allocated to specific users or contact or to all of them.

!!! warning
    If no _Role_ or _User_ is configured in the _Alert Recipient tab_ of a given alert, that alert will apply to any Etendo user or role.

Etendo supports alerts notification to user or roles by email:

- for this, it is required to properly configure _e-mail_ server, account and password for the corresponding client in the header of the Client window, section "Request Management".

##### Alert

Alert tab list the events happening which generate the corresponding alert.

![](https://docs.etendo.software/latest/assets/drive/qRqaP9bx7a04XzXIrzdpZZ3eS3OaglF9SMM3xvRYaL3Vrkhcxz_EI5BxPbtrnQoW_DXad8d-_oQBJntpSgZdchM9RtWisxif2I3GWPM2Yda4XlbPG_kkWIqlvgDl5cvOObV43F4W.png)

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Client
## Article Path: /User Guide/Etendo Classic/Basic Features/General Setup/Client
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/client
## Article Content: 
#### Overview

A client is an independent entity composed of at least an organization. A client can include and manage master data such as users, customers and vendors. That master data is then shared among all the organizations which belong to that client.

Etendo allows the user to create more than one Client and more than one Organization within each Client to model your enterprise according to your needs.

Normally, it is enough creating just one Client which hosts multiple organizations that can be used to model your enterprise, the main reasons for this are:

- a client can manage master data that is therefore available to all organizations within that client
- besides, each organization can also manage its own master data and have its own transactional data
- finally, a Client cannot share any master data with another Client.

Clients are created by running the [Initial Client setup process](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-run-an-initial-client-setup-process.md) available for the "System Administrator" role.

Organizations are created by running the Initial Organization setup process available for the "Client Administrator" role.

#### Client

The Client window allows the user to view and maintain the clients created by running the Initial Client Setup process.

![](https://docs.etendo.software/latest/assets/drive/wMk7KssPzOXZVKhjV7qnWPlXL7Jxp4k-0URRQOskHEzl8S2Bm-YYnS9alftc1syx4nGMulhABjv_qKTWCD8QksvoikpfUN0DQCMBGXnTR-SKMjk2Ic7tMe5M7CZaE-yz5FCMtuXB.png)

!!! info
    The field "Days To Password expiration" allows the user to set a day limit during which a password may be valid for users. The limit will be reset every time a user changes his password.

The value of the field determines the day limit during which a password must be valid for users:

- If it is set to 0, no day limit will be applied.
- If the value is greater than 0, the day limit will apply after the last date of user update password date.

Setting the value will apply the configuration to all Users from that Client.

A relevant field to note is the **"Central Maintenance"** checkbox under the section "Accounting Dimensions".

This checkbox, if selected, allows the user to configure that the Client centrally maintains key accounting dimensions such as "Organization", "Business Partner" or "Cost Center", therefore the configuration set in here is shared by all the organizations of the client.

New Clients created by running the Initial Client Setup process are created as "Centrally Maintained" by default with the mandatory accounting dimensions (Organization, Business Partner, Product) selected.

The organizations of the Client which require to have additional dimensions not listed in here, for instance "Campaign" or "Sales Region", will have to configure them in the Dimension tab of the organization's general ledger configuration.

Existing clients are not set as "Central Maintained" by default because the accounting dimensions which were set are the ones which were configured in the Dimension tab of the corresponding organization's general ledger configuration.

It is now possible to change existing Clients as "Centrally Maintained", this action overrides what is configured for the organization in relation to the accounting dimensions that can be centrally maintained in the Client, those dimensions are:

- Mandatory dimensions:
  - Organization
  - Business Partner
  - and Product

Mandatory dimensions can be filled in or not depending on the document category being created. For instance, "Organization" needs to be always specified in the document's header regardless of the document being created, however "Business Partner" and "Product" are mandatory dimensions that need to be filled in a purchase invoice but can be filled in a G/L Journal if needed.

- Non Mandatory dimensions:
  - Project
  - Cost Center
  - 1st Dimension, this is a free text dimension which can be customized as required (i.e. it could be customized as "Department"), same as the next one
  - and 2nd Dimension

Non mandatory dimensions can be filled in or not depending on what is needed and regardless of the document category being created.

Above dimensions are then shown either in the header or/and in the lines of the documents to be posted to the ledger within a section named "Dimensions".

Besides, there is a financial report named Accounting Transaction Details which shows every ledger entry of an organization's general ledger detailing every dimension value entered.

!!! info
    It is important to remark that the settings displayed in the client window in both the "Accounting Dimensions" section and in the Dimensions tab is the defaulted configuration provided by Etendo.

This defaulted configuration is populated from the Dimension Mapping window.

It is always possible to customize the defaulted configuration, for instance:

- if a client needs to show and therefore make available the organization dimension in the lines of the documents, below actions need to happen:

    - check the checkbox "Show in Lines" for the Organization dimension
    - and delete or modify the records linked to the "Organization" accounting dimension in the Dimension tab as all those records are defaulted not to show Organization in any document category lines.

##### Information

Information tab allows the user to add, edit and maintain client generic information such as default units of measure and images.

![](https://docs.etendo.software/latest/assets/drive/xj_ATfvJhEVYxSBgsLALNk4ZzrjF9oF5bONVGhnh_MFd676cYAJ-y_SPwBYm8QRYOZeFR7Vl1JakOWLL7-6FmeWEASYdUDRk_e672LxTfNp7z-hc9dred0Imhz4zKW8kuv-FA_1Q.png)

Additional information allowed to be specified:

- _Discount calculated from Line Amounts_ excluding taxes and charges
- Default _units of measure_ for:
      - _volume_
      - _weight_
      - _length_
      - and _time_
- _Price List_
- _Product for freight_
- _Check shipment Organization_ to monitor that the organization shipping the goods is the same as the organization of the customer.
- _Check Order Organization_ to monitor that the organization ordering the goods is the same as the organization of the vendor.
- _Group Invoice lines in accounting_ to get invoices having many invoice lines, do not generate as many accounting lines as invoice lines but a summarized number of accounting lines per account.
- Company _Logos_ for:
      - the _Company Image_
      - the _Company Menu_
      - and _Company Documents_
- _Allow Negative stock_ to do this, Etendo does not check stock if that is not required.

##### Email Configuration

Documents such as orders or invoices can be sent out by email. Email configuration tab allows the user to configure the email server, account and password, variables which require to be properly set up prior to sending documents by email.

![](https://docs.etendo.software/latest/assets/drive/39VWRTt1ZP4Xnxtq9P8nnTWYiFGuxRrPtT_D6sOzAaefl61XCFVGf8My_6SP0a1sODWMVaXB2Lrz3am4UOlKoblc1V8ubFZlQwD679lQjDUYzK-ET3pdoLDP2pekKPTNzZw55-Ma.png)

"Email Configuration" tab gathers the email configuration required for sending out documents such as orders or invoices.

!!! info
    It is important to know the smtp server configuration which is going to be used in order to properly fill the information below:

- **Smtp Server**, email server with SMTP
- **SMTP Authentication**, "yes/no" flag to define if the email server requires authentication or not before sending emails.
- **SMTP Server Account**, email server username in case of authentication required.
- **SMTP Server Password**, email server password in case of authentication required.
- **SMTP Server Sender Address**, email address to send emails from.
- **SMTP Connection Security**, security level needed for the SMTP servers connection. Available options are:
      - None
      - STARTTLS
      - SSL
- **SMTP Port**, port required for your SMTP server
- **SMTP Connection Timeout**, maximum amount of time (in seconds) allowed for an SMTP connection to connect or communicate.

In the provided screenshot, you can see a valid configuration for a gmail account:

- **Smtp Server**, [smtp.gmail.com](http://smtp.gmail.com)
- **SMTP Authentication**, "yes"
- **SMTP Server Account**, a valid gmail account (including the @gmail.com or @yourdomain)
- **SMTP Server Password**, the password for this gmail account
- **SMTP Server Sender Address**, email address to send emails from.
- **SMTP Connection Security**, SSL
- **SMTP Port**, 465
- **SMTP Connection Timeout**, 600 (10 minutes)

##### Dimensions

Dimensions tab allows the user to configure whether a given accounting dimension is going to be available in the header and/or in the lines of a given document category or not.

This tab can be used to configure accounting dimensions availability at document level only if the client is set as "Centrally Maintained". This setting is specific to the document and accounting dimension and it overwrites the configuration in the header.

For example, if a client needs to display project dimension in the header and lines in all documents less in amortization document, the client window should have the following configuration:

![](https://docs.etendo.software/latest/assets/drive/Z99sk_o2Vu9v8vGHzhGXw0tmp5rkwyxGAKUAdt-1-ve8kenhAGjDhIvu3Ixf8rRRk4pc5hoN8msS1KUk5WTs0z0JUd4D8LxV1ItpgEEXu2OActIg73-ikeOb9k7mKGTi1btTJety.png)

The configuration in dimensions tab is populated by the configuration that exists in the Dimension Mapping window.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: CRM Connector
## Article Path: /User Guide/Etendo Classic/Basic Features/General Setup/CRM Connector
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/crm-connector
## Article Content: 
#### Overview

The concrete CRM connector must add a configuration in this window to enable it to connect to the external system and to define the properties and filters used by Etendo to map with the external system information.

##### API Property

An API property is like a Map which matches an external API key with an Etendo Message. It defines the data type and any other related configuration.

##### Property Options

It allows the user to define options accepted by parent property.

##### Filter

Filters for external business partner integration. The filter has a defined type and it is linked to one or many properties.

##### Filter Options

It allows the user to define options accepted by the parent filter.

##### Address Mapping

In this tab, the user can define addresses and determine the properties that should be used for each location column mapping.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Enterprise Model
## Article Path: /User Guide/Etendo Classic/Basic Features/General Setup/Enterprise Model
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/enterprise-model
## Article Content: 
#### Initial Organization Setup

:material-menu: `Application` > `General Setup` > `Enterprise Model` > `Initial Organization Setup`

##### Overview

An Organization is an enterprise of a Client. A client can have at least one or even more than one organization as the way of configuring different types of enterprise models.

Overall organizations can be:

- independent legal entities with a different Tax ID number
- enterprise groups with the aim of getting aggregated figures for the group
- or business areas of the client such as departments

Besides, organizations can be structured:

- by _country or region_
- by _area or function_
- and so on, according to the enterprise model needs.

All of the above provides an insight about the different scenarios which need to be covered while modeling the enterprise.

There could be organizations which require to share master data such as business partners and products while having its own chart of account, taxes, financial reporting and transactional data. That could be the case of independent legal entities belonging to the same enterprise group.

There could be organizations sharing master data and even the same chart of accounts. That could be the case of divisions or departments within the same independent legal entity.

There could be organizations created with the aim of just grouping data, for which its own transactional data is not required.

All of the above is possible due to the fact that there are different types of Organizations, see the section below, and besides organizations can be structured in a hierarchical way:

- At the highest level of the tree, there is an organization named (\*).
      - (\*) organization is created at the same time that the _system client_ is created, and it is shared among the different _client/s_ in the system.
      - Master data created at (\*) organization level is accessible for all the organization beneath it
      - (\*) organization is not an independent legal entity, therefore transactional data is not allowed.
      - Every organization created later on will be created below (\*) organization.
- At a lower level of the tree, there can be parent organization/s which can have child organization/s beneath it/them.
      - Master data such as business partners and products created at parent organization level is accessible for all the child organization/s beneath it.
- At the lowest level of the tree, there can be child organization/s with no organizations beneath it/them.
      - Master data such as business partners and products created at child organization level will not be accessible for the rest of the child organizations, if any.

##### Initial Organization Setup

As already mentioned, Organizations are created by running the Initial Organization Setup process and not only that, once an organization has been created it must be set as "Ready" in the Organization window.

![](https://docs.etendo.software/latest/assets/drive/jaLNPOFQoCLMgujXvhC3sL--3PKbCLcfdvQubK5VvyRy85PwL7t_4V38fCTBCmrioEfhBQKvWWVq87sbLZsuP9D-YMUodiBeLsQrhbY-cnruPAjkkigHou5kknI1D0ZYc4-G0RiB.png)

As shown in the image above, an organization can be created by providing the relevant data below:

- the name of the organization
- the name of the user of the organization
    - Etendo creates a new user and a new role which only has access to the newly created organization.
        - This user can be later on changed by assigning new roles to it.
        - And the role can also be later on changed by assigning new organizations to it.
- the organization type. The options available are:
    - Organization - an organization which is not a legal entity and does not allow transactional data entering.
        - This type of organization allows the creation and configuration of master data to be shared among a group of organizations of any type belonging to it, for instance Business Partners, Chart of Accounts, etc.
        - It does not require general ledger as it does not allow entering transactions, but it can have a given General Ledger configuration to be shared among the organizations underneath
        - The accounting periods can not be opened and closed independently at its level.
        - And there could be as many organizations type "organization" in a branch as required.
    - Legal with accounting - an independent legal entity with a unique Tax ID number which requires accounting, therefore:
        - This organization requires a General Ledger and therefore an Account Tree or Chart of Accounts, as well as a Fiscal Calendar because the accounting periods can and must be opened and closed at its level.
        - This organization type allows the "consolidation" of the Balance Sheet and P&L reports only for the Chart of Accounts it has assigned.
        - Transactions are allowed for this organization type.
        - And finally, there can only be one legal entity per tree branch, therefore the organizations underneath inherit the General Ledger configuration and the Fiscal Calendar of the legal with accounting organization.
    - Legal without accounting - an independent legal entity with a unique Tax ID number which does not require accounting because it is managed in a separated system, therefore:
        - This organization type does not need a general ledger nor a chart of accounts and will not support financial reports at its level.
        - Transactions are allowed for this organization type. Transactions which will not be posted to the ledger.
        - It can not have another legal entity in an upper/lower level of the enterprise tree structure.
    - Generic - an organization which is not a legal entity but must belong to a legal entity placed at an upper level in the organization tree structure. For instance, departments or divisions within an organization or legal entity.
        - There could be as many generic organizations as required per tree branch, but always under a legal entity.
        - This organization type allows transactional data entry, it can have its own general ledger configuration and can inherit the general ledger configuration of the legal entity with accounting they belong to.
        - The accounting periods can not be opened and closed independently at its level.
- the parent organization. While creating an organization, it is possible to select the organization to which the organization being created will belong to. The parent organization would need to be set as "Summary".
    - A generic organization can not be the parent organization of a legal entity organization, but the other way around.
- the organization location/address
- and the organization currency

Besides:

- There is a checkbox named "Include Accounting" which allows the user to select for an organization:
    - an accounting CSV file in the field "Accounting File"
    - or a Chart of Accounts module reference data in the section "Reference Data". Reference data coming from extensions modules is master data such as Taxes, Chart of Accounts, etc to be applied from the already installed modules.

This action creates:

- a General Ledger configuration which is automatically linked to the Organization being created
- and an Account Tree or Chart of Accounts which is also linked to the Organization being created

This step does not create a Fiscal Calendar as the [Initial Client Setup](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-run-an-initial-client-setup-process.md) process does, because Fiscal Calendars need to be created ad hoc for the "Legal with Accounting" Organizations for which "Allow Period Control" feature is going to be enabled.

!!! note
    This step does not imply to manage accounting within an organization, but just to include an accounting file or an accounting reference data in an organization.

Accounting management relies on the organization type being created.

It is not mandatory to select "Include Accounting" checkbox while creating a legal entity with accounting organization for instance because:

- a legal entity with accounting can inherit the client chart of accounts
- or, later, both the Chart of Accounts and the General Ledger configuration can be created manually and be linked to the organization.
- if the checkbox "Include Accounting" is selected, it is possible to select for the organization being created below dimensions to be used while posting the organization's documents to the ledger:
    - Mandatory accounting dimensions such as "Business Partner" and "Product" and not mandatory accounting dimensions such as "Project" and "Sales Region" while creating an Organization in a "Client" which does not centrally maintain the accounting dimensions.  
    In that case, the dimensions selected in here will all be listed in the dimensions tab of the organization's general ledger configuration, therefore will be available just for that organization.
    - Additional accounting dimensions such as "Project" or "Campaign" while creating an Organization in a "Client" which centrally maintains the accounting dimensions.  
    Once more, the dimensions selected in here will be listed in the dimensions tab of the organization's general ledger configuration, therefore will be available just for that organization.

It is possible to apply reference data such as:

- Document types and default algorithm for bank statements auto-matching, this one is similar to the previous one but for specific financial flows such as Payment Outs, Payment In and Financial Accounts.
- or reference data such as master data or configuration data (i.e. tax setup) created for Etendo extension modules.

Finally, it is important to remark that:

- Each organization, of any type, can have its own general ledger configuration/s and currency/ies (apart from the one inherited from its parent) if it is configured to be that way for the Organization
- A calendar is mandatory just for the legal entities with accounting. This organization type is the only one which can have a calendar assigned, the rest can inherit it.
- Financial reports are run by general ledger configuration and therefore by currency, as each general ledger configuration has only one currency allowed.
- Financial Reports such as the Balance Sheet and the P&L as well as Tax Reports can only be created at the level of Legal Entity with accounting.
    - Rest of reports such as sales, procurement and warehouse reports can be launched for any organization type.
- A general ledger configuration should not be assigned to the (\*) organization because that one will then be shared by all the organizations underneath.

##### Examples

**1.** Etendo Demo Data:

Etendo includes demo data for demonstration purposes, which includes an "Enterprise Model" composed by a set of organizations.

![](https://docs.etendo.software/latest/assets/drive/Vuf4G00AIK2uWFXjxHE733lf2QkM1WNhX1Eh29LCef9KNoZMGGnkD0O1vnkML26wZ7V_PHQHSgKtBgTxaB5Y3od9pFqzriF1nCYm7ysoMCJKrPf9-6jKp017i2QCIHKCBbV82bZn.png)

- An organization type "Organization" named F&B International Group.
    - This organization is not a legal entity and it does not allow transactions
    - This organization allows the creation and configuration of master data to be shared among a group of organizations beneath it.
- Two "legal entities with accounting" named "F&B España" and "F&B US" that belong to F&B International Group.
- Below the legal entities with accounting organizations there are four "Generic" organizations, which are not legal entities but belong to a legal entity and besides allow transactional data entry:
    - F&B US West Coast
    - F&B US East Coast
    - F&B España - Region Norte
    - F&B España - Region Sur

**2.** How to create each Organization type:

The basic variables to take into account while creating an organization of the type "Organization" are:

- Organization Type = Organization
- Include Accounting = Yes  
    If the accounting configuration at this level needs to be shared by all the organizations underneath the one being created.
- Accounting Dimensions = Business Partner, Product and Project

The basic variables to take into account while creating an organization of the type "Legal with accounting" are:

- Organization Type = Legal with accounting
- Include Accounting = Yes
- Accounting Dimensions = Business Partner, Product and Project

The basic variables to take into account while creating an organization of the type "Legal without accounting" are:

- Organization Type = Legal without accounting
- Include Accounting = No

The basic variables to take into account while creating an organization of the type "Generic" are:

- Organization Type = Generic
- Include Accounting = Yes  
    If this organization requires its own accounting configuration besides the inherited one, otherwise include accounting = No
- Parent organization = should be a "Legal with Accounting" organization.

**3.** Enterprise Models examples:

![](https://docs.etendo.software/latest/assets/drive/h9cS1Sgl07mpOdqMyrCNa-D3w4typy34vJcGl9wb5xk8vnpOkO4dPBwmBwY1JygGfPEeaQvh7katpn2-_fdTLWn5FyeIEPwZcNdkhkkKn0FUjTCTRLUosk2YcYwMoBegzLlVMzmCFCRzQztOKA.png)

![](https://docs.etendo.software/latest/assets/drive/0mFr7Nl9jVy9ZVIfNVOl8pKVHpLv2h6waw6r0iGBnpjTs8A0P4wYIWAHFbYJKGrduahpu1QbmH4UXDq9n27_ffdvfgAcd8_plxvBEXx8cY7j7eWRjIvLBtByLU0-9Zw1iKsVttxtv3ecG9oNZA.png)

![](https://docs.etendo.software/latest/assets/drive/2IIoZGBxPH1gigLWVMWKxE0GxWoAtAFJX2yheNUuOYoy_orJdRJII2rVZUpGcA8j4aJavDIoRIi1WJDymLDxqAbg-r-u6z4E91SRafrj9bX-EK4M8nhpqUqM1ufnYsgBc51D3HXAxZDPuy7R5A.png)

#### Enterprise Module Management

:material-menu: `Application` > `General Setup` > `Enterprise Model` > `Enterprise Module Management`

##### Overview

Datasets allow the user to define reference data such as master data or configuration data for modules or even for Etendo core.

Reference data can be imported or applied to organizations in the "Enterprise Module Management" window by just selecting the organization for which the reference data needs to be applied and the reference data to apply or to import.

![](https://docs.etendo.software/latest/assets/drive/GCwDdNOwwnsS4qqc5AOasqxELrfP6UKdw6AY3ffwJuGxF0qL36O0MLh6_BZI9TPXNT8ywlVdzqL7nn4gf-opz7Zxo-tX5Ap1o99nZMhU3fLcn3mofw12qESDtmyyLrJJcRh2zdX7.png)

- If a reference data is applied at (\*) organization, every organization in the system will have access to that data.
- If a reference data is applied at a parent organization, all the organizations which belong to it will have access to that data.
- If a reference data is only applied to an organization which does not have any organization underneath in the tree, only that organization will have access to that data.

#### Organization Type

:material-menu: `Application` > `General Setup` > `Enterprise Model` > `Organization Type`

##### Overview

An organization can be a Legal Entity, a Business Unit or neither of both. You can also select if transactions are allowed or not for this organization type.

##### Organization Type

Etendo default Organization types are:

**Organization** - an organization which is not a legal entity and does not allow transactional data entering.

- This type of organization allows the creation and configuration of master data to be shared among a group of organizations of any type belonging to it, for instance Business Partners, Chart of Accounts, etc.
- It does not require a general ledger as it does not allow entering transactions but it can have a given General Ledger configuration to be shared among the organizations underneath.
- The accounting periods can not be opened and closed independently at its level.
- And there could be as many organizations type "organization" in a branch as required.

**Legal with accounting** - an independent legal entity with a unique Tax Id number which requires accounting, therefore:

- this organization requires General Ledger and therefore an Account Tree or Chart of Accounts, as well as a Fiscal Calendar because the accounting periods can and must be opened and closed at its level.
- This organization type allows the "consolidation" of the Balance Sheet and P&L reports only for the Chart of Accounts it has assigned.
- Transactions are allowed for this organization type.
- And finally, there can only be one legal entity per tree branch, therefore the organizations underneath inherit the General Ledger configuration and the Fiscal Calendar of the legal with accounting organization.

**Legal without accounting**\- an independent legal entity with a unique Tax Id number which does not require accounting because it is managed in a separated system, therefore:

- this organization type does not need a general ledger nor a chart of accounts and will not support financial reports at its level.
- Transactions are allowed for this organization type. Transactions which will not be posted to the ledger.
- It can not have another legal entity in an upper/lower level of the enterprise tree structure.

**Generic** - an organization which is not a legal entity but must belong to a legal entity placed at an upper level in the organization tree structure. For instance departments or divisions within an organization or legal entity.

- There could be as many generic organizations as required per tree branch but always under a legal entity.
- This organization type allows transactional data entry, can have its own general ledger configuration and can inherit the general ledger configuration of the legal entity with accounting they belong to.
- The accounting periods can not be opened and closed independently at its level.

Additionally, an organization type can be configured as:  
**"Legal Entity"**  
**"Business Unit"**
**"Legal Entity with Accounting"**  
**"Transactions Allowed"**

!!! info
    Note that any of Etendo Organization types are configured as "Business Unit".

#### Organization

:material-menu: `Application` > `General Setup` > `Enterprise Model` > `Organization`

##### Overview

An organization is an enterprise of a Client. Each client must have at least one organization created by running the Initial Organization Setup process. The process of creating an organization ends after setting it as "Ready".

In other words, the process of creating an organization ends after setting it as "Ready" since Etendo requires performing some checking which validates that the organization has been properly created and that the organization structure is valid. If an organization is not properly created, Etendo will display an error when trying to set it up as ready.

Once an organization is set as ready, no changes can be made to the organization anymore. New organizations can be added, but cannot be placed above the current organization. They can be added underneath or at the same level.

##### Organization

The Organization window allows the user to maintain the organizations created by the Initial Organization Setup process.

There are different types of data left to be entered or changed for an organization:

- The Legal Name of the organization, this name, if any, will be the one used in the financial and tax reports.
- The Summary level checkbox informs Etendo if an organization is going to be a parent organization or not.  
  If an organization is set as summary, it could be selected as "Parent Organization" while running the Initial Organization Setup process.  
  This flag can always be changed regardless if the organization is already set as ready, as it is always possible to add organizations underneath an existing one.
- The Allow Period Control checkbox is only shown for "legal with accounting" organizations.

![](https://docs.etendo.software/latest/assets/drive/35uC1djW49ivi4h02RbbcaNyghZdV2ttZh-LGAZNR9ndREhkn74Dc06RJc6n4_htYuBL4OMH1uYDtMgr0qovmyhA6Pk7N-c7XWjF1e0C7Og1RQZb4y7SThakjOIZDfW8lhxjloWQ.png)

If enabled, it allows selecting a Fiscal Calendar for which the corresponding fiscal periods can be opened or closed in the Open/Close Period Control window.

- Opening & Closing periods process impacts to the organizations underneath the "legal entity with accounting" organization.
- The organization's General Ledger.  
  For instance, legal entities with accounting organizations need to record and post the financial transactions such as invoices and payments to the ledger.  
  Etendo allows customizing the way that the financial transactions are posted to the ledger, that means customizing the General Ledger configuration to meet the organization's needs.  
  This field is automatically defaulted by Etendo, which means that a general ledger is created by default, if :
  - a Localization Pack containing a localized chart of accounts module
  - or an accounting CSV file
  - or the Generic Chart of Accounts Module is installed and then selected while creating the organization by running the Initial Organization Setup process.
- The Default G/L Item for Funds Transfer is used to set default value for G/L Item parameter in Funds Transfer Process from the Financial Account.

**Inherited Information**

This field group is collapsed by default with the following read-only fields.

- the organization's **Period Control Allowed Organization**.
- the organization's **Calendar Owner Organization**.
- Calendar of the organization's **Calendar Owner Organization**.
- the organization's **Legal Entity**.
- the organization's **Business Unit**.

Above fields are automatically fetched and set with proper values when setting organization as ready.

An organization can have only one general ledger configuration assigned unless:

1.  the organization has its own one and besides inherits another one from its parent organization
2.  or if the _advanced general ledger configuration feature_ is enabled at system level.

The way to allow an organization to have more than one general ledger configuration assigned is described below:

- As System Administrator, set your own "template" as "In Development". Save.
- Once done, navigate to the "Windows, Tabs, and Fields" window
- Find the "Organization" window
- Navigate to the "Tab" tab and double click on the "General Ledgers" tab
- Set it as "Active". Save.
- Above detailed steps shows the General Ledger tab, which allows assigning more than one general ledger configuration to an organization.

Food & Beverage (F&B) sample client shipped with Etendo illustrates scenario 1 above:

- Every F&B sample client organization has been created by running the "Initial Organization Setup" process.
- The "F&B International Group" is an "Organization" Organization Type.  
  An Accounting CSV file was selected while it was created, in the same way as the "USD" currency, therefore this organization has the "F&B International Group US/A/Dollar" general ledger configuration assigned.

![](https://docs.etendo.software/latest/assets/drive/tLSZQxp8xgwVv1GQOCVPR1ChHCnrGZ2-UQzAddoZKw4FvXouGcLHhfnVJBS4CS4i2lHeEhxCwDy9SDIRpBmVxuKagI42qJ8Ol4kBnBZOKMxq0fiF6wEqW3BGHXfKEzxaaJjPK6HT.png)

This general ledger configuration can also be shared by the organizations underneath, for instance "F&B US, Inc" and "F&B España S.A."

- Same way, an accounting CSV file was also selected while creating the "Legal with Accounting" organization "F&B España S.A." same way as EUR currency, therefore this organization has the "F&B España, S.A US/A/Euro" general ledger configuration assigned.  
  As a consequence, "F&B España S.A." has two general ledger configurations assigned, its own one and the inherited one.
- Besides, each of the general ledger configurations mentioned above are linked to a different account tree or chart of accounts.
- Therefore, every time that an "F&B US Inc" transaction is posted to the ledger, Etendo opens a new window named "Journal Entries Report" which shows the journal entry created for the "F&B International Group US/A/Dollar" general ledger configuration in USD and in the corresponding accounts of a given Chart of Accounts.
- Every time that an "F&B España S.A." transaction is posted to the ledger, Etendo opens two new windows, one per each general ledger configuration, one of them in USD and the other one in EUR, both of them in different accounts.

The tree action button ![](https://docs.etendo.software/latest/assets/drive/_YumQFCw0KLD-SFUaGI8zjTteIM6MCZo-pEA8IHbI757561hE9StOwYttf2lqUdlmcm8s7G6XtIR5ZjDwckNhEt8q9yIKTqpduMk-kYk3g5NPe24Pvq9DVCg_803cj5Y_cVbz1FX.png) allows dragging and dropping an organization within an enterprise model, whenever it is not "Set as Ready".

**"Set as Ready"** process takes into account the list of requirements below per organization type:

- _Organization type_:
    - No requirements
- _Generic type_
    - to have a "Legal Entity" organization type up in the enterprise model tree.
- _Legal without accounting_
    - not to have another "Legal Entity" organization type up in the enterprise model tree.
- Legal with accounting
    - to have its own general ledger configuration or an inherited one
    - to allow period control
    - to have a fiscal calendar assigned

Once an organization is set as ready:

- The organization newly created can not be moved up or down within the enterprise tree and can not be deleted.
- It is not possible to create new organizations up in the tree but underneath or at the same level.

##### Information

Information tab allows the user to add relevant information of an organization, information such as location and tax ID number.

![](https://docs.etendo.software/latest/assets/drive/EsSwADTSSP7pJ1foh5fXjLZBaL1lb-u2MwMI9KFZaxpgC9ayM66e0NmIcdCOhXEzWLBG78RrjGI7VN_l1mdQg6COaMO0_lQhaXwafKPnSphAcus_1aqxM2Glbickzi645CuxqPVi.png)

Fields to fill in are:

- the organization Location
- the Tax ID number, if required
- the DUNS number, if any
- the User who will act as the main organization Contact. This organization contact is used in some localized fiscal reports (Spanish fiscal reports), that requires a contact person.
- The purchase invoice number which will be used for payments. There are two options available:
    - "Invoice Document Number" (internal number)
    - or "Supplier's Invoice Number"  
        - Any of the above will be included in the payment description field to inform about the invoice number being paid.  
        - This also changes what is going to be shown in several purchase windows such as _Add Payment_ button in purchase invoice or _Add details_ in Payment Out

Finally, the checkbox Tax Not Deductible allows configuring an Organization as a _non tax deductible organization,_ if enabled.

That is the case of Organizations like Public Sector organizations for which tax deduction is not allowed. In this case:

- the purchase tax is posted as an expense
- and the issued sales invoices are tax-exempt

The field Sales Tax Exempt Rate allows entering a by default exempt sales tax rate to be used in the sales invoices by the non-tax-deductible organizations.

##### Period Control

Period Control tab is a read-only tab which lists the fiscal calendar period status of an organization.

![](https://docs.etendo.software/latest/assets/drive/kwmxym70AykyaAYetGSTUoXl5ucDq29sJTt2mo3R0vCsxeSSnyIrP_1jtd36ENRoQHLrrHfFs3__qR6w2wn1hAbwEYbLmQtJ2SUoYa35ffgOHUiWFXUDDwnaL_Vt_ebrZIeAbDBo.png)

**The Status**

It is split in two columns. One that represents the Status with a color code, making it easier to understand the situation at a quick glance. The other one represents the Status by its name, making it possible to filter the records shown. The possible Status values are:

- All Never Opened, colored in gray. Recently created Periods.
- All Opened, colored in green. All the Document Types are open for this Period.
- All Closed, colored in red. All the Document Types are closed for this Period.
- Mixed, colored in orange. Not all the Document Types have the same Status value in this Period. For more information refer to the Documents Tab below.
- All Permanently Closed, colored in red. All the Document Types are Permanently Closed for this Period.

This tab can be used for searching for a period (i.e. Jan-19) and get its current status.

As shown in the image below, the period Feb-19 has a mixed status, meaning that not all the Document Types have the same Status value within the Organization "F&B España S.A." which has the "Calendario España" assigned.

![](https://docs.etendo.software/latest/assets/drive/cjahc3FYZMghn48UlTxGriply3wDhO6ZrX7BsdnjoN5X3rcwWWdLMoeiUbYQ-z--lNwxjsqgmI0d4-8dldLYHy4kY5CqUaj4n7ZAWfg0ML8NxMm9M5ykXpt9kzkh5O-sI2KEjpnz.png)

For more information, see Open/Close Period Control.

##### Documents

Documents tab is a read-only tab which lists the Document Category status for a selected period of an organization.

![](https://docs.etendo.software/latest/assets/drive/p2dQZKtljDS-XwNG0QoRVerVIGFhmR02mySLnF1RE_Cdjv1_jPAGhBCTccBupCha87MLhjnIjUOZGqEaJ1BndBl_sPUl2AGkTI23CJfcnbdB0fDJTRLXaN7oZ2EGhfHTa18bH_Ss.png)

For more information, see Documents in the Open/Close Period Control window.

##### Data Sets

Data sets tab allows viewing the reference data applied to the organization and informs in case there is any update of a reference data applied available.

![](https://docs.etendo.software/latest/assets/drive/eIRJ-zXUf_s6qjf9H9aPP6ynr5hrgULf6DqAwhPtKq4PeR86LpUlWRS8FmcHglGxffMZzBw4AV0vBcyc0xXQO5HV6cxmc6pB0P_qF67nS2NknaRuS58DK3izsNbbO-xj7PM9zLAO.png)

##### Warehouse

Relation of prioritized on-hand warehouses of the Organization.

![](https://docs.etendo.software/latest/assets/drive/6fsqpwBtDAXTJbyug4QSODfEv9-GzyhEMHMQQYgnsIufDr4S4GOCjrOOCSSeGz_u4GnkuVlaUPnOiH83pQbORHhsf2pLzKJKAaPERxaqCNXaHXgWRTz8-sIFqQzg4h_NTOJHKPmC.png)

In this tab, it is possible to define the organization's warehouse/s, that way the quantity on hand of an organization is the sum of the available stock of its warehouse/s.

It is possible to define the priority of each organization's warehouse/s therefore Etendo proposes first the goods of the warehouse with a higher priority.

#### Intercompany

##### Overview

This section describes the Intercompany module included in the Etendo Financial Extensions bundle.

##### Description 

In case the user has to create orders or invoices among two or more organizations that are different but belong to the same client, this functionality allows automatically generating the corresponding inverse document. 

For example, if Organization A makes a sales transaction to organization B, once the sales invoice is manually created by Organization A, this functionality will automatically create a purchase invoice for Organization B.

##### Installation

To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [_Financial Extensions Bundle_](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558).

##### Set Up

##### Organization Window

It is required for each organization using this module to have one business partner assigned.

![](https://docs.etendo.software/latest/assets/drive/PlutLfL7AlJBR18T2om4NqgG3qgdPhgtV7vE876GFmU80QIrKOSgJX2AScc0eWEB2TBUAOdVRFIdaOoMIiVZ3FM2IbIHsHSURbzG6sWX0BHArpvjqEk68iMCrwqirI3OD8I2PH3UnFQWiCYW3t5bDK5G8vtpRioFkYRiBab_zup8KCnjTzk6WAUwHw.png)

###### Business Partner Window

!!! info
    When configuring a new Business Partner, take into account that this business partner should be visible in the inverse organization. 


The Business Partner has to be configured as both vendor and customer, using the corresponding checkboxes.

![](https://docs.etendo.software/latest/assets/drive/7bSIJF7R9TzP-VYXO5gkqySKt7G-7YEM5ZRdplKDfRLtoEfc0FUlhr-JctNSn3vItINYI7hiRVZX1l7BV2yoOydAPlu7K4lTb3oKuPdI-k6X5-4JKmDT-q24OQYAHo3FYxFMoB57JitDmgZ3w9Krhf9sXSkXevDHLO00EHXHOjC_zMSY3mgEse7YyA.png)

![](https://docs.etendo.software/latest/assets/drive/_S08VOtX0-6seijELCJ5kmLXfIJ93cNS9rIryuyqFFqOMeEC2Uq6zb_HCWjaeg8N-LtXuMRX074PBOERYCsZyV1xibJMiuZe4mde_uyxgvQJjPV9BdEsJK-w8YEeORUaQPXcPebVv3r4QhqCD-3D06jGhZM__U36rx0V2wYbN37w9fHG8o2NRrdYgw.png)

In the Intercompany Documents tab, it is necessary to select the required document types for this business partner.

!!! info
    It is not mandatory to create new document types, but it is recommended.

![](https://docs.etendo.software/latest/assets/drive/VT8AxdS0bU_4bD7b8fEIrQF-HK9e2ngLCS5TFjlUBl9ee8W1sysEH9un6GgYTL418D4rvxpIuNOt5JUxLlT2KlJ2UgbXjAZVg4mx6-VexJIx9pwA7yFoY4P0YH1RRd2-hWgMEAnGjZnn9NX53631-9T7MBsxg_RCQP4g1dvj6HqAWMbaECgUfTDT1w.png)

!!! info
    Note: The information in both the source business partner and the target business partner should be the same.

###### Invoices and Orders

!!! info
    The following information can be applied not only to sales and purchase invoices, but also to sales and purchase orders.

####### Header

The relevant fields are described below:

-   Organization: it is necessary to select an organization configured to work as an intercompany organization (In the following example, the organization “F&B US East Coast”).
-   Business Partner: it is necessary to select a business partner configured to work as an intercompany business partner (In the following example, “Be Soft Drinker, Inc.”).
-   Transaction document: it is necessary to select the document type defined in the intercompany document tab of the business partner (In the following example, the document type “AR Invoice Intercompany”).

![](https://docs.etendo.software/latest/assets/drive/CBJAHylu5avoOLB0cuF8RTZZUJFtzQYm24KaV3eRWOB_6H7njxPoJ4ujK_0ZcvPokD8O3q3NZ2B3P4rEASGLEjM9Dadp9YnTsO1hSFBzAMdea3A_OfAUO-T0-BxhX2zqRF_Mh0UsY9ujTx2Pbrjy1TOxp5kpd4QC8fklcmTtfsJMnfrVwUvT7CexMA.png)

####### Lines

The relevant fields are described below:

-   Product: The product must be visible for both organizations (In the following example, “Lemonade”). 
-   G/L items: The necessary G/L items must be visible for both organizations.

![](https://docs.etendo.software/latest/assets/drive/Q8Xn1rgR7uOHOSOr_h_l0ITlepOcHfRklfLTj8awb46t_jUCBKoV3-91JsVU5eGDQY2std_xbpvz0b-APJI11e2o9W4epq9rzioSoPB4XdWsnUpZhnCO2jkLmRinTSv4sPHUM3aODSmHiXfyQL320QR_lE8xpOD3whK6lYeLaMCafXC0G9UrVzZakA.png)

####### Product Window

The relevant fields are described below:

-   Price: The price must be equivalent and available in every price list. 
-   Currency: The currency must be the same for both organizations.
-   Tax: The tax in each organization must be equivalent.

####### Complete or book documents

When you complete invoices or book orders, these processes generate the corresponding inverse document and complete or book both the source and the target documents.

![](https://docs.etendo.software/latest/assets/drive/op4ZxMClAuIecT10AFiO_n2ecoldgryLCVCYAnyWtjFgkDTaghYPrLdZ6bnDxWnykm_HGTLSmG6SkKQOtp45GnOVk3AgLm2Tbud2Lf1zR0Hsie0HE74sD93Rvl1GDfnFOWEWQVKEAfiuVZzja68OrmqgedNsOCsQ2TbrxzB41wmakZZvGBAscWqiEA.png)

####### Reactivate documents

To reactivate intercompany documents, both documents should not have an associated payment.

!!! info
    Note: This process is only allowed for source documents.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Security
## Article Path: /User Guide/Etendo Classic/Basic Features/General Setup/Security
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/security
## Article Content: 
#### User

:material-menu: `Application` > `General Setup` > `Security` > `User`

##### Overview

A user is an entity which can log into Etendo whenever it has a password and at least one role assigned to it.

![](https://docs.etendo.software/latest/assets/drive/uYk0-n-xUoagkerOKb87gcQ11qfxJ4C2C_uPR-SR_HlmbDw89FyUm7UY86xbdoD3TjOPpEBVFu0aITdVibP7fnpylt_fn8SttMp0fH3HkNOAle71cVvxAmMtvbMPkBN4rHrhr21j.png)

As shown in the image above, Etendo allows the user to sign in by entering a username and a password previously created in Etendo. The user assigned to that username will be able to sign in only in case it has at least one user role assigned to it.

##### User

User window allows the user to create as many Etendo users as required. Each person accessing Etendo can have a different user assigned.

![](https://docs.etendo.software/latest/assets/drive/Xu1oqRnWMgbWI8-qp1RP-stpJ2YwNnKLJr04-gRcVOrIEkJm_er9fWwpe4F2Ncy_u3pATEEGw7t59JJrUW2y9QSsmNWTT9XXlC0cZuqlakWhF2KIfYfw6IaJhrseTY1tKjE0Uavl.png)

As shown in the image above, a user can be created by entering the basic information below:

- the _User First and Last Name_
- the _"User Name"_ and the _"Password"_ to use for logging into Etendo
- and in the case of being an "Employee", the employee business partner records in the field "Business Partner", under the "More Information" section.
- the _"Expired Password"_ checkbox: if it is checked, the user's password will be set as expired and when the user logs in, he will be forced to change it.

##### User Roles

Roles are the connection between users and access rights. Each user can have more than one role assigned, however, a user can only log into Etendo by using just one role.

![](https://docs.etendo.software/latest/assets/drive/IdpYeASr5qFi9zCa5EgsKRJfg54EoyBsxbVbj3d7DIbN-8XztHzj2QI35lguEXIKt6FxAmkozQnh7sGeMaKYD4m7-x5QSemv2M48ShmpCxhVWCLFwGa4e94oA1yl4K7-JprsrIcf.png)

For instance, it is possible to create and configure a role for Sales, a role for Finance, a role for Warehouse, and another role for Procurement.

Those roles will have to be configured to allow access to either sales, finance, warehouse or procurement windows, processes and forms. To learn more about how to do this, visit Role.

Whenever there is a new member in the organization, a new user could be created and assigned to any of the existing roles instead of creating and configuring new users permissions every time.

There can be a user having a given role set up as "Role Administrator", that user will be able to add new users to that role.

![](https://docs.etendo.software/latest/assets/drive/6lcpMBWvPHq9NQ2VCpAiYVfd_SBR-7j3aDTZ9c4QyqmQi7Nguuid_7y8TQNEXkh7pLH26YU7fKgqpdMEgi1L3aXyKnoyf6PTz-tutOmotGaFFhh7BG_2-QoafKz4JSrmS8mpXVzS.png)

#### Role

:material-menu: `Application` > `General Setup` > `Security` > `Role`

##### Overview

The aim of a role is to group user/s depending on what parts of Etendo they are allowed to access to and therefore to work in.

!!! info
    Etendo comes with a "super" user named "admin" (_password "admin"_) which can be used to sign in for the first time.

The admin user has several roles assigned:

- the _System Administrator Role_ (this one is assigned to it by default)
    - this role enables admin users to have admin rights to all the existing Clients.
- the _F&B International Group Admin Role_ demo data (this one is also assigned to it by default)
    - this role enables admin users to have "F&B demo data" Client admin rights.
- and besides:
    - every time a new "Client" is created by running the [Initial Client Setup process](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-run-an-initial-client-setup-process.md), Etendo automatically creates for that Client a _"Client Admin"_ user linked to a _"Client Admin role"_:
      - the client admin role enables "Client Admin" user to have admin access rights to that Client and all the organization/s of that client once signed in.
      - the newly created client admin role is also assigned to the admin user by default, therefore it will be possible for the admin user to access the newly created Client.

Finally, every time a new "Organization" is created by running the Initial Organization Setup process, a new user and a new role are created and linked to each other, this time the new user role will only enable the user to access that Organization once signed in.

Having said that, Etendo allows the creation of as many new "Roles" as required to be later on assigned to the existing and/or new users.

!!! info
    Roles group user/s depend on the tasks they do and therefore the parts of Etendo they should have access to parts such as windows, processes, forms, widgets and views.

##### Permissions Inheritance

It is possible to configure roles to retrieve their access to the different Etendo elements automatically, by inheriting them from other "parent" roles. This configuration is possible thanks to a feature known as Role Inheritance.

Having a role, it is possible to assign one or more template roles to it. This way, all the elements which are accessible by these template roles will be available automatically for that role as well.

Besides, any change done in a permission of a template role will be propagated automatically to every role inheriting from it.

!!! note
    It is only possible to inherit permissions from template roles, which are manual roles as well.

When inheriting from multiple roles, the permission application order is determined by the sequence number of each inheritance. This means that if a particular permission is inherited from multiple inheritance, the permission will be taken from the inheritance with higher sequence number.

This process eases the role management, specially when the number of roles defined for a Client is high. Thus, it is possible to define template roles to give access for a particular set of elements, and then create multiple combinations of functional roles in order to give personalized access for the different users. This is illustrated in the picture below.

![](https://docs.etendo.software/latest/assets/drive/vyHTH7_aVNAVElZ2_BGWT5QcVh9MD3w_DCfz20k4Bu6mxa_QCvrKo2ufgIMmvqericF1SZnMm4ONeysEKiw2kON-47niJ5HlcjaVqGiiqPkcNyg9k0FOmnZHHfbqpioJ9At6rbTI.png)

The current list of inheritable elements include the following: organizations, windows, tabs, fields, processes, forms, widgets, views, process definitions, preferences and alert recipients.

For the case of preferences and alert recipients, there are some restrictions to make them inheritable:

- A preference is inheritable if it has a template role set in the Visible At Role field.
- It is not possible to create more than one preference with exactly the same visibility settings for a template role.
- An alert recipient is inheritable if it has the User field empty.
- It is not possible to create more than one inheritable alert recipient with the same alert rule for a template role.

!!! note
    This mechanism takes into account the permissions manually given to the roles. This kind of not inherited access is not affected (not modified) in any case by the inheritance process.

It is also possible to force the recalculation of the permissions of a role, using the _Recalculate Permissions_ process. But following the common flows of a Role configuration, all the inheritances are calculated automatically, so this process is not necessary. For this reason, it remains hidden.

As mentioned before, the changes (create, edit or remove) done in a permission which belongs to a template role will be propagated automatically to all the roles currently inheriting from it. For this reason, a warning message is displayed on the _User Interface_ in order to inform users about the implications of this kind of action.

This warning message is similar to the one shown below. It appears when creating or editing a record that belongs to a template role, in a tab of an inheritable entity.

![](https://docs.etendo.software/latest/assets/drive/ibtK-OMAXBsv2UVQXFaPN7YvQMlh2rgo41Vt21hwrkhk0Grj3gy0Y_7tYhGZU4JZaX7i75-eo6xHmT7P7bHhUWyy2xIpcK5VB8rC7PqSxERaqBP7HXaLXKSeiyNf_1Sj_ZXhxDzb.png)

##### Role

The Role window allows the user to review, create, configure and maintain the roles to use in a given client.

![](https://docs.etendo.software/latest/assets/drive/8MOJrcJaif8MbvpR7NwOIA6JjqOIlmOf3df8nsTRJa7Zq02aanCB7SGImtBiEGqou4crWjRy_nGJNhUVj3rHpcNyYOVw8H-F_X4veFkEtGw_6KCGoJxom1R_MkOlm0pJhIbEYzMB.png)

As already described, there are roles automatically created by Etendo which can be reviewed in this window.

Besides, this window allows the user to create new roles for a given client. Roles creation can properly be done by using a Client Admin user & role.

The fields to fill in are:

- the Name and a brief Description of the role
- the "User level" which is a step forward _"Data Access Level"_ to be defined at Role level.
    - User level allows the user to limit the records which will be accessible in entities such as windows, processes or forms for a role; or even to limit the access to a given entity for a role:
      - Every table in Etendo has a "Data Access Level" defined. The options available are:
        - System, this level allows the user to see System Client records and (\*) organization records, for instance application dictionary records.
        - System/Client, this level allows the user to see any Client record and (\*) organization records, for instance master data related records such as Countries.
        - Client/Organization, this level allows the user to see any Client record but System Client and any Organization including (\*) Organization, for instance master data related records such as Products.
        - Organization, this level allows the user to see any Client record but System Client and any Organization record but (\*) Organization records, for instance transactional data records such as Purchase Orders.
    - User Level available options are:
      - _System_, if a table is defined as "System" data access level, a user role which has this user level assigned will be able to see the records of any Client including System Client records, in an entity such as a given window or form.
      - _Client_, if a table is defined as "System/Client" data access level, a user role which has this user level assigned will be able to see the records belonging to any Client but System Client, in an entity such as a given window or form.
        - On the other hand, if a table is defined as "System" data access level, a user role which has this user level assigned will not be able to see any record as all of them will belong to System Client.
      - _Client + Organization_, if a table is defined as "Client/Organization" data access level, a user role which has this user level assigned will be able to see the records belonging to any Client but System Client and any Organization including (\*) organization, in an entity such as a given window or form.
      - _Organization_, if a table is defined as "Client/Organization" data access level, a user role which has this user level assigned will only be able to see the records belonging to a given organization but (\*) organization, in an entity such as a given window or form.
    - Additionally, depending on the role's user level, no data at all is visible based on the table's access level. This restriction can be bypassed by setting _Bypass Access Level Entity Check_ preference to _Y_, the cases when entity is not accessible are:
      - If access level is System and user level is not System
      - If access level is Organization and user level is not Organization or Client+Organization
      - If access level is Client/Organization and user level is not Client, Organization not Client/Organization
      - If access level is System/Client and user level is not System or Client/Organization
- Manual check. The role automatically gets all standard user plus admin privileges, even when new elements such as windows, processes, forms, widget classes, organizations are added unless the Manual check is enabled.
    - If the manual check is enabled, it will be possible to manually assign access to windows, processes, etc by manually selecting them in the corresponding tab or by using the process button "Grant Access".
    - Grant Access process button allows the user to select:
      - the _module_ or application area for which access is required, modules such as Financial Management or Production Management among others.
      - and the _entities_ of the module selected for which access is required, entities such as windows, processes or forms among others.
    - If the Grant Access process is executed for a role marked as _template_, the granted accesses will be propagated automatically to the roles inheriting from it.
- Template check is shown for roles which have a manual access assignment (Manual flag is Yes). Roles marked as template are those that can be used by other roles to retrieve their permissions automatically, using the Role Inheritance mechanism.
    - For this reason, just template roles can be selected in the Inherit From field of the Role Inheritance tab.
- Restrict backend access: If checked, this role will not have access to the backend (ERP). It will however have access to other applications (such as the WebPOS).
- For Portal Users: If checked, this role will have a simplified (portal) interface, where he only has available the workspace widgets. Portal interface changes the look and feel of the workspace. Top page menu and left-side menu are hidden. Usually a role for Portal Users gives access to users only to their own information using widgets.
- Portal Admin: If checked, the Portal Role will have Portal Administrator privileges.
- Is Web Service Enabled: If checked, web services will be able to obtain data for users with this role. It applies to both JSON REST and XML REST web services.
- Advanced check is shown for roles that have an automatic access assignment (Manual flag is _No_) and automatically grants access for such roles to all Advanced Features.
    - Manually created roles (Manual flag is _Yes_) have their own configuration which can include advanced features or not so this flag is not shown for them.
- Client Administrator checkbox allows a role to admin other users' _Workspace_ as well as _Customized Forms"_:
    - In other words, a client administrator role can assign widgets to the workspace of any client user as well as customized forms.

##### Org Access

Org Access tab allows the user to define the organization/s to which a given role will have access rights to.

As already mentioned, every record in Etendo belongs to an organization, therefore the only way for a user role to edit a record which belongs to an organization is to provide that user role with access to that organization.

![](https://docs.etendo.software/latest/assets/drive/vE-K35fSEj9-BIvgbMGezZvFFgFx4-bfY-LNbMosiyjun4B_-bSKiWnHr-K7bpJSnYwrSypNacZYFmcO9x46g3yGgrHxrywB-z2Agfywx-qVesqxPN9ruiBg45aTxqkyn15BsOkb.png)

- _Organization Administrator_ checkbox allows a role to admin other users' "_Workspace_ as well as _Customized Forms_":
    - In other words, an organization administrator can assign widgets to the workspace of any user of the organization as well as customized forms.

##### User Assignment

The User Assignment tab allows the user to add users to a given role.

![](https://docs.etendo.software/latest/assets/drive/iBeXu8RdIKr-srDU5Q-1Y5e5wYtbvNbXqD8KtMx8MK2gHEXc9BJUcYsA19OgHzCNv7chh30Ws8bVjbtjFkllwl5w8kZZ2ZoAbiXLOeFJDzwEisQu04z8dGAj3CmIy0OOxneMJtz6.png)

"_Role Administrator_" checkbox allows the user to administer the given role for:

- Widgets: they will be able to set default widgets that will be seen by other users with the same role.
- Saved Views: this user will be able to share with other users with the same role the views she saved.

!!! info
    As _Role Administrator_ flag allows the user to modify behavior of other users with the same role, it should only be granted to trusted users.

##### Window Access

This tab lists and/or allows the user to add the windows to which a role will have access to.

As already mentioned, every time a new role is created and saved without selecting the "Manual" checkbox, Etendo automatically fills in all the windows in the Window Access tab.

The information above means that the newly created role will have access to every Etendo window.

![](https://docs.etendo.software/latest/assets/drive/vt5fH1QoVLs_KcIpoESYAQqhSe01e6oHVVFbF-UQy6fwJnDu8B4qOgQDCI34dQheclrgChwDy-IuurthKMqxAljaRU-jVczgUCGnXrXDTv2vERvhxlgGjRy7SA6ivWpqpYMBhcmQ.png)

Having said that, if the "Manual" checkbox is selected, it will be required to _manually_ add a subset of windows which will be accessible for a given role, or it will be required to automatically add them by using the action process "Grant Access". This process will allow window access for a given Etendo module or area such as Projects, Finance or Sales.

_Editable Field_ checkbox defines if the accessible data in a window can be edited by the role or not.

##### Tab Access

It defines whether a tab is editable or read-only for a concrete role.

In a window accessible by a role, it is possible to define for each of its tabs if they are editable or not through the _Editable Tab_ check.

If the window is editable (_Editable Field_ is checked), by default all its tabs will be editable. But it is possible to define some of them not to be editable for this role by adding them in this tab and setting to false the _Editable Tab_ check. Note this is only true if the table behind the tab is editable for the role.

In the same way, having a non-editable window, it is possible to define some of its tabs as editable by checking _Editable Tab_.

##### Field Access

It defines whether a field is editable or read-only for a concrete role.

Field Access tab works very similarly to Tab Access tab, allowing the user to define write access up to a field granularity level.

So if a tab is editable for a role, a concrete set of fields can be made read-only for that role, adding a new row in this tab for each field and setting false _Editable Field_ of each of them. Or in the other way around: in a non-editable tab, fields can be editable if they are added and their _Editable Field_ property is checked.

When editing a tab with some fields defined not to be editable in this way, backend checks modifications in that tab to prevent this to happen. Note this also affects the field in case it was modified by, for example, a callout or a default expression. This is controlled by the _Check on Save_ property, unflagging it, this check will not be performed allowing thus the field to be modified by a callout.

##### Report and Process Access

This tab lists and/or allows the user to add the reports and processes to which a role will have access to.

As already mentioned, every time a new role is created and saved without selecting the "Manual" checkbox, Etendo automatically fills in all the reports and processes in the Report and Process Access tab.

Above means that the newly created role will have access to every Etendo report and process.

![](https://docs.etendo.software/latest/assets/drive/jeSO8cKGRMnO5jlOseLchbPh4OE2fDeLeAAS0VSOIngREivxtfTmTPmNLaDwnn7ujstw7z6Pgqp0oZLZAHxwT1XwtyGmlZdj-vuNEBXnBq1dFNo5UvBFIC_CIAJc6Tn2gweJJPKq.png)

Having said that, if the "Manual" checkbox is selected, it will be required to manually add a subset of report and process which will be accessible for a given role, or it will be required to automatically add them by using the action process "Grant Access". This process will allow report or process access for a given Etendo module or area such as Projects, Finance or Sales.

_Editable Field_ checkbox defines if the accessible data in a report or process can be edited by the role or not.

By default, access to processes in a standard window given from a button is inherited from the permission to the window. So if the role has access to the window, it will be possible to execute all the processes defined in that window, regardless if there are explicit entries for them in _Report and Process Access_ tab. This default behavior can be changed in two different ways:

- To revoke this inherited access and manually decide case by case which are the accessible processes, it is possible to define a "Secured Process" Preference (at system level or for that specific window) with "Y" as value.
- If the developer defined the process as _Requires Explicit Access Permission_. In this case, permissions will never be inherited for that process.

##### Form Access

This tab lists and/or allows adding the forms to which a role will have access to.

As already mentioned, every time a new role is created and saved without selecting the "Manual" checkbox, Etendo automatically fills in all the forms in the Form Access tab.

The information above means that the newly created role will have access to every Etendo form.

![](https://docs.etendo.software/latest/assets/drive/h71SGbrOND-3ZRiDfheu69SJe6ZUIfQdyVOKmL_RaRtqSCRmQ84JoLrhPok37CDsfNRt0BbqoKwNzchby0i1ffWbKxN1JZZy2wBjC_akKrtaYwtR9FNCgEJaYGEFtse9xsx2kG4_.png)

Having said that, if the "Manual" checkbox is selected, it will be required to manually add a subset of forms which will be accessible for a given role, or it will be required to automatically add them by using the action process "Grant Access". This process will allow form access for a given Etendo module or area such as Projects, Finance or Sales.

Editable Field checkbox defines if the accessible data in a form can be edited by the role or not.

##### Widget Class Access

This tab lists and/or allows adding the widget classes to which a role will have access to.

![](https://docs.etendo.software/latest/assets/drive/UJdYTlYdE7iCbPZXvMLbM-FtRsvCjm1H0ogLpoAgaHlt18r4-hS0gB0jXOCtea26kAn3l9phNMuoqFO5uvrKDqHnd_99mcY6FqmqGhHKwcwIiozXLsji0LHlgp6KWLzKuvVYq6S_.png)

Widgets are _User Interface_ elements which can either be placed in the Users' Workspace tab or be part of a generated window.

##### View Implementation

View implementation tab allows the user to select customized views.

A view implementation is a completely custom implementation of a main view.

The access to a _custom view_ can be controlled through this role access tab.

![](https://docs.etendo.software/latest/assets/drive/5OCz4Fl8K2i8uYaKdMnh3lg-DT_9IQBDjimbD37HCtwzOs74M-OTqbTorDwTzxEQaWJBKZRxkhNJc_jF-4kjLOllZSlfZe_9kcngt9KUQB0X3KVYFyeOblGXuzo0LCGDI-C_QlvI.png)

For additional information about views, visit How to implement a new main view.

##### Process Definition

Grants access to Process Definition. By default, access to process definitions in a window (given from a button), is inherited from the permission to the window. To cancel this inherited access and manually decide case by case which are the accessible processes, it is necessary to define a "Secured Process" Preference (at system level or for that specific window) with "Y" as value.

![](https://docs.etendo.software/latest/assets/drive/IFXcBPxniL5TViWp3QIr2LiircvQoutdDPZ4K-zMHibWBRtwsI2fNh8dTXWG5H8_GROHo17oFdKjb-Kuj696jezS3flqH9VJL8yAlFYFV0__mtN4aDKFHrIuosLt28EfSLpfT5iR.png)

Access when the process is invoked from a standard window button is inherited in the same way that for Processes.

##### Role Inheritance

It allows defining an inheritance for a role. An inheritance is a relationship between two roles: if role A inherits from role B, that means that all the permissions that role B has for different application elements like organizations, windows, reports, processes, widgets etc. will be automatically inherited by role A, allowing it to access those elements in the same way as B. It is also possible to define an inheritance hierarchy, i.e., a role can inherit from different roles, and the priority (order) to inherit the permissions is defined by the sequence number. This means that if two inheritances have accesses in common, the accesses of the inheritance with lower sequence number will be overridden with the accesses of the inheritance with higher sequence number.

Within this tab is where the Role Inheritance configuration of a particular role is set.

![](https://docs.etendo.software/latest/assets/drive/KI9-ImqA0ErnTQS_fepHzt63s_3ExEUeRwCXREoaE2NKc1e13FAmtPhHnCQC4CPLwWzbUvWZbertcWG81CDPmYaZzLhN8IrliDLcJ9V48S3VxosZwI2vzSlPc0suV5WKwYcPi8JF.png)

The fields to fill in are:

- **Inherit From**: In this field, it should be selected the role whose permissions will be inherited. It defines the role that will be used to retrieve access to its permissions automatically.
- **Sequence Number**: It defines the order in the application of the role inheritance, when having multiple records in the tab. The lower this value is, the earlier will be retrieved the permissions of the related template role. This means that if the same permission is accessed by two template roles selected to inherit from them, the permission related to the inheritance with higher sequence number will override the other one.


#### Role Access

:material-menu: `Application` > `General Setup` > `Security` > `Role Access`

This window defines access to DB /database tables and columns for selected roles.  
Edit a role to give or withhold the necessary access to tables and columns tables.

##### Table Access

Create or edit access to DB tables for a selected role. The user can give access to the needed information by selecting the options displayed in the table tab.

![](https://docs.etendo.software/latest/assets/drive/ltwp9ZQne8C_2iz5c7u3hay0dodgaB28TeFFxVkLJqhFV3Zgq9LMahoeVrH2BRiz6NH9n1QeCsDSrOoPD_CtKV8cYZULNDDPG5Fly-WhZo5h7_2ASJRlnoS_GinX2nYC6efQebJ6uZYnYAeyabg.png)

#### Audit Trail

:material-menu: `Application` > `General Setup` > `Security` > `Audit Trail`

##### Overview

Audit Trail allows the user to monitor every data change done in any table or entity through the user interface.

Audit trail feature monitors data changes such as:

- Insert
- Update
- Delete

Audit trail feature must be enabled by the "System Administrator Role" in the Application Dictionary, as the first thing to do is to configure the table/s for which this feature is going to be enabled.

Once a change has been made in a table for which the audit trail feature has been enabled, it is possible to monitor that change through the user interface by using the action button "Audit Trail".

![](https://docs.etendo.software/latest/assets/drive/V-wLKxec4uzSuG-eFItBU00cQYeO5SNhiLTDkY78kPRaK6e-P_R_z39-K5icHtUSX-WjoeFL34_Iv45c0aym2FRV9_F_e0W6QA0U8Lim_qkovbX44ihOl-nH-mKEio1pSpfQDqlm.png)

##### Audit Trail

Audit Trail view displays read-only information about all the recorded data changes done in the tables for which the audit trail feature has been enabled.

![](https://docs.etendo.software/latest/assets/drive/CkScAz_BHFw9uZIejCEG18y9IOkyiO23K5CMqCRWCkc-DEAWZ0x5G8RyDwjqApky49FILfUisRIJUnqS_Sfob0j128cKfhFFQhfOI92bmbTAPsN1TyfGVMaPXeoj9tbBzqsTB-r4.png)

The changes done in a given table, column and record are viewed by showing the corresponding record ID or UI of the records in the database.

##### Configuration

In order to track audit information, the system administrator needs to perform two tasks:

- Enable the audit trail for one or more tables in the system
- Run the 'Update Audit Trail infrastructure' process

In the following sections, a step-by-step guide with more detailed information is provided.

##### Enabling audit trail for a table

Enabling/disabling the audit trail feature for a table is done in the Table definition in the Application Dictionary.

- Switch to the System Administrator role
- Go to Application Dictionary > Tables and Columns
- Navigate to the table for which you want to enable the Audit Trail
- Switch to Edit View
- Mark the "Fully Audited" checkbox and save

###### Audit Inserts

When a table is flagged as Fully Audited, the users can decide if they want to audit the insertions done in that table.

![](https://docs.etendo.software/latest/assets/drive/ebTtUMQskmHQd1Fd5BWoW0_lKwtwgNTn41V1uJKV4RGTKR_uXKuR_PqU4rzTUBVQct38OejbovWWycB-z1A7YEvwNedzpv6VCi38eHb2telDh9994cV4vCW1QEOGlDw1Ojs11Und.png)

If the Audit Inserts field is checked in a table, when a new row is inserted in that table several records will be inserted in the Audit Trail table, one for each column in the audited table. These records will contain the original value of the columns of the new row.

Usually, it is not necessary to store this information, because the original value of a column could be easily obtained by using the Old Value and New Value fields of the Audit Trial table that correspond with that column. If the Audit Inserts field is left unchecked, only one row will be inserted in the Audit Trial table for each record inserted in the audited table. At least this one record needs to be inserted in the Audit Trial table to be able to store which process was used to create the record in the audited table.

###### Excluding columns

By default, when a table is audited, modifications in any of its columns are audited. In some cases, it makes sense not to audit changes for some of them. This can be configured by setting the _Exclude Audit_ flag in _Tables and Columns > Table > Column_ tab.

![](https://docs.etendo.software/latest/assets/drive/Xy3wTyW3wrUeerAoND_Rw2c6wVVhxkq_AEzzTjBLLpiBg6VsMWcQjAn6T4te4akp_o-x381v3wT3012cttvLqjKWRsd-Tfe0Go0FX1KGlG_vSG57Bm4yo8ZnB0gxdTSV3qi7f-4b.png)

##### Running the System Compilation

The audit trail system uses a number of generated triggers (one per table to be audited) to collect the audit data for all changes.

These triggers need to be regenerated, when executing a system compilation, once the following actions have been performed:

- The Audit Trail feature has been enabled or disabled for a table
- There has been any structural change to a table being audited (i.e. new columns, changed columns)

##### The Audit Trail Popup

For the set of tables for which the audit trail feature has been enabled, the button ![](https://docs.etendo.software/latest/assets/drive/tmlPernhlkGB49t7gLt12N3zfxbYevzxuPC65DZavmEO8p5UBe2_sO_YD6lBTkhBvnNrQ64jkRAnuahaKRTGnLPGUvmSEX_K5_Ekh5Ojd-21ZyZ4KWEFIjujNg_xqg_PCFahXdJo.png) is shown in the toolbar of the corresponding windows. It gives access to the Audit Trail Popup.

This popup allows examination of the history of the record which is currently shown in the window. It has two main view modes which allow examining the following data:

- 'Record history' of a single record
- 'Deleted records' of a single tab

##### The 'Record History' view

This view is displayed when the popup is opened from an existing record via the new toolbar button.

The top area always shows a reference to the entity (i.e. Sales Order) and the record "1000175 - 2016-04-03 00:00:00.0-0.00" for which the history is displayed.

Then a number of filters are available which allow some restriction on the changes displayed to ease the use of records with many modifications.

The grid in the lower area shows all changes done to this record while the audit trail feature was enabled. The changes are shown sorted from the most recent change back to earlier changes.

!!! info
    Only fields which are visible in the corresponding tab are shown here.

A row in this grid corresponds to a single changed field. For changes to an existing record, the number of grid entries shown correspond to the number of fields changed. For new record creations or record deletion, one row in the grid is shown per field of the inserted/deleted record.

![](https://docs.etendo.software/latest/assets/drive/xuE5w_TI2LS9M4nl1fyqWctoD-pU08N6dq7mQJT7qr-wsocs2FehRp7Gu1jGCsJUu_UZeo1hmDjBPQRFV_d1aM26q9zxMjXPX5GbX-SZOJYuZTwo1PYtoD-oi3XRzlyS723rbaWL.png)

Finally, a link just on top of the grid allows switching to the 'Deleted Records' view. Following that link will show deleted records for the tab from which the Audit Trail popup was opened.

###### Disable filtering by User

The User filter can be removed from both the 'Record History' and the 'Deleted Records' view. This can be interesting for performance reasons when the number of users available is high. In order to do this, go to General Setup|Application|Preference and add the following preference: Show Audit Trail User filter with value Y.

##### The 'Deleted Records' view

This view allows examination of records which have been deleted from a tab and are otherwise no longer accessible in the user interface.

The general layout of the view is similar to the record history view.

An info on the top shows a reference to the entity for which the deleted records are shown. Directly below, a number of filters is available to restrict the records shown.

Then a grid displays all deleted records belonging to this tab/entity. Here one row shown corresponds to a single deleted record and the columns shown are the same as the ones shown in the normal grid view of the same tab.

![](https://docs.etendo.software/latest/assets/drive/lsX2HjGHdMbgCKFRs-_KuE1qmeMs2u9cZ5PXrJ5RmYw08PYbdJ6KB_dY93TwaW9ycfaNUc9fEWmsMFKPipMYza0ZCPZdMcl4c9sjFemg7ndkntS2ai5Rs-eePUDaFXXNdKFJ6VOV.png)

This view offers a number of navigation choices to view related or more detailed information.

###### Navigation: Back to history

The first one is Back to history. Following this link, the view is just switched back to 'Record History' showing the same records as shown before going to the deleted records view.

###### Navigation: History of selected record

The next one, View history of selected deleted record below, allows examining the detailed history of a deleted record, instead of the summary view which is shown here.

This detailed history is displayed in the same 'Record History' view, however its top info area notes the fact that the history of a deleted record is displayed.

The following screenshot shows an example of the history view of the same deleted 'Sales Order' entry. Compared with the previous example of this view, new history entries corresponding to the deletion are shown in addition to the older information about the record creation and modification.

![](https://docs.etendo.software/latest/assets/drive/GtW2mnbfKHPPLTLwrt_Kqjlbdm7lo_7CLDntpxMg4vRZnjAaRkOeUzxOg19gnju2DAgUuLBNrm0szABl1MVSV5Ft9_5ASwBs9jTI9IYuQt1iBTBU3r2z5J-octdDlOzNknRzXKKz.png)

###### Navigation: Child Tabs

As the last method of navigation, the popup allows filtering records based on a parent record. This can be useful to search for deleted lines belonging to a sales order.

There are two possible ways based on the status of the parent record: still existent or already deleted.

If the parent record (i.e. a Sales Order) does still exist, then the following steps can be done two view its deleted lines:

- Go to the lines tab of the Sales Order
- Click the audit trail icon to open the record history view
- Use the 'Deleted Records' links to switch to deleted records view

As the lines tab is not a top level tab (it has a parent tab Sales Order) the deleted records view is automatically filtered to only show lines belonging to the current Sales Order. As visual information that the information shown is filtered, the top info area shows:

![](https://docs.etendo.software/latest/assets/drive/TLPq4qy1yN9UkGD66_5njmuYw_ks8rUXRuOSuS6oXS_BmY92i1kLNyPns4CRsopMKIif0JPp6uJfWpDHgeKgtD07RAR8XcmrVEafUyhiVJ-OEUHhxUF3i77gURAyQPl8yK7PZMLk.png)

If the parent record (i.e. a Sales Order) does not exist anymore, then the same can be accomplished by using the following steps:

- Go to the 'Deleted Records' view of the Sales Order tab
- Search the Sales Order for which the deleted lines should be shown
- Click the _Lines_ link just below the grid

Then the deleted records view will show the deleted lines belonging to the selected (deleted) Sales Order.

##### A generated Audit Trail Window

The second interface to view audit data is a normal generated window which is based on the AuditTrail entity, and allows browsing all audit information filtered by the currently active client. Open the Application menu and navigate to General Setup, Security and select Audit Trail.

It offers a raw view of the audit data, meaning that no translation of raw values is done, but instead the raw column values of each change are displayed.

Simultaneously, this window allows a much more flexible filtering/searching.

![](https://docs.etendo.software/latest/assets/drive/rw7tPRLbT6ngBKyscK7lPe8F8irNUTp74vKBpDDST539eM5zHpl99Sr2fMXFLMcFks6BVhyNsMfFaSeWHgHYSr2vF2GDYjZ6a5fyAa3Nj2QEcpUhGAL6xOPIVwY177LL6kESljcr.png)

##### Limitations

The audit trail feature will record all data changes (for the table for which it has been enabled) with the following exceptions:

- text fields of types (char,varchar) with a length >= 4k will not be audited
- text fields of types (nchar,nvarchar) with a length >= 2k will not be audited
- BLOB fields (binary stored inside the database) will not be audited

##### Etendo Advanced Security

The **Etendo Advanced Security** module allows the user to customize several security features such as the following:

- Password Security
- Password History
- User Lockout
- Multiple Session Verification
- Changing Password after Login
- Expiration Time (Autolock Password)

!!! info
    For more information, visit the [Etendo Advanced Security module User Guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/platform-extensions/etendo-advanced-security.md).
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Process Scheduling
## Article Path: /User Guide/Etendo Classic/Basic Features/General Setup/Process Scheduling
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/process-scheduling
## Article Content: 
#### Process Request

:material-menu: `Application` > `General Setup` > `Process Scheduling` > `Process Request`

##### Overview

A background process is a system action requested by the user, who has to previously provide auxiliary parameter values to execute that action.

There are two background processes which are listed by default in the process request window, those are:

- the _Accounting Server Process_.  
  This process searches for and automatically "Posts" transactions in status "Completed" set as "Posted" = No.
    - Above means that this process allows documents such as purchase invoices, sales invoices or GL journals get automatically posted without any user action but to schedule this process.
- and the Heartbeat Process.  
  This process collects information about Etendo installations, if scheduled.

Besides, there are other background processes which can also be scheduled and therefore monitored:

- the _Costing Background Process_. This process calculates the cost of the material transactions.
- the _Alert Process_. This process checks if the SQL Query defined in each active alert rule returns any record in order to create the corresponding alert instance.  
    This process also removes the _fixed_ alerts instances to ensure they are not shown anymore.
- the _Execute Pending Payments_ process. This process checks and executes Payment In and Payment Out linked to a payment method having an "_Automatic_" _Payment Execution Process_, which are not set as "Deferred" and do not require any input to be executed.
- and the _Payment Monitor_ process. This process checks the invoice's payment status and updates the invoice's "Payment monitor" section.

!!! info
    All the processes above can be scheduled if logged as System Administrator.

##### Process Request

Process Request window allows the user to review and add background processes, which can be scheduled or unscheduled as required.

![](https://docs.etendo.software/latest/assets/drive/Tjhctxd0gIiAgpntricdUhTGgTKf0FvXQjbYcsgOtJ-9XmH8AYJW2pYsyelS-1LnQv91vGZ2Vf_M_gxJjeQJ5lAZNx9iKTqzdi7QTlb-WbHXAEIcouqQ3Qo5BafXEmMPgIRbdS-J.png)

The information to fill in to schedule a background process is:

- select the _Organization_ for which the background process is going to be scheduled
- select the _Process_ to schedule from the list of processes available
- select the _Timing_. Timing options available are:
    - _Run Immediately_, this one does not require entering any additional parameter values but just to press the action button "Schedule Process".
    - _Run Later_, this one requires entering additional parameter values prior to "Schedule the Process":
      - the Start Date
      - and the Start Time
    - _Schedule_, this one requires to also enter additional information:
      - the Start Date
      - the Start Time
      - the Frequency, options available are options such as "Every n seconds", "Every n minutes", "Hourly", "Daily", etc. Depending on the frequency selected, two new fields are populated to enter:
        - the "Interval in Seconds" and the "Number of Repetitions"
        - the "Interval in Minutes" and the "Number of Repetitions"
        - the "Hourly Interval" and the "Number of Repetitions"
        - the "Daily options" and the "Daily Interval"
        - etc.

!!! note
    "Number of Repetitions" is the number of times the process will be scheduled after its first execution. E.g. A value of 3 means that the process will be scheduled 4 times.

- select the _"Security based on Role"_ checkbox to get that only the user who schedules a process can monitor it in the process monitor window, otherwise any user sharing the same role as the one who scheduled the process will be allowed to monitor it.  
  In both cases, it is required that the role have access to the process in the process access tab of the Role window.
- and, finally, configure by when a process needs to finish. "_Finishes_" field allows entering:
    - a _Finish Date_
    - and a _Finish Time_

Process defined as "Run Immediately" and "Run Later" can either be _Scheduled_ or _Rescheduled_.

Processes defined as "Schedule" can either be _Scheduled_ or _Unscheduled_.

##### Costing Background Process

The **Costing Background Process** is the process in charge of searching for goods transactions, such as:

- Goods Receipts
- Goods Shipments
- Physical Inventory
- Goods Movements
- Internal Consumptions
- and Productions

for which its cost has not been calculated yet.

This process considers only transactions having its **"Costing Status"** property as:

- **"Not Calculated"**
- or **"Pending"**.

Costing background process:

- calls the Costing Server process which calculates the cost of each transaction
- and takes into account what configured in the Costing Rule defined for the products, therefore either "Warehouse" dimension is taken into account while calculating the costs, or either "average" or "standard" cost is calculated for the products.

!!! info
    The "Costing Background process" needs to be configured for each Legal entity defined in the client, as this process runs at legal entity (Organization) level.

!!! note
    It is important to remark that if the process is scheduled at (\*) organization level, it will run for all the Legal Entities defined in the Client, therefore it would not be necessary to configure the process more than once.

The transactions are calculated sequentially ordered by the _Transaction Process_ date that is the date and time when the document that originated the transaction was processed.

If the _Costing Server_ shows an error, the background process stops and it is not possible to calculate any new transaction cost until the error is fixed.

The error message can be checked in the Process Monitor window.

!!! note
    Although the Costing Background might have failed the process monitor might show a _Success_. Please refer to the _Process Log_ field to get the real result message.

Some costing algorithms such as "FIFO" implement the "Pending" Costing Status as a way to delay the cost calculation of a given transaction/s until the next run.

This way, the costing calculation process is not stopped for the rest of the transactions having a _Not Calculated_ or _Pending_ status, for which it is possible to calculate the cost.

##### Price Correction Background Process

Price correction background process searches for Goods Receipts that:

- either have a purchase order related which has been reactivated and booked after completing the Goods Receipts
- or have a purchase invoice related

After that, this process checks and compares whether:

- order purchase price has been changed before booking the invoice
- invoice purchase price is not the same as purchase order price

If the purchase price has changed, a Price Correction cost adjustment is created for the products included in the Goods Receipt(s).

There is a process named "Process Price Different Adjustment" that manually adjusts if required all Goods Receipts already invoiced prior to upgrading Etendo to manage the Cost Adjustments feature.

##### Process Group

Process Request has been modified in order to be able to schedule a process group. There is a check Group. Marking the check, a field called Process Group will appear, and you will be able to select a Process Group.

The schedule of a process group will work exactly as the schedule of a single process. It is not possible to schedule a process group and a single process at the same time.

More information in [Process Group](#process-group_1).

![](https://docs.etendo.software/latest/assets/drive/Qq-ABfaxFfvLhrdl-xyZsj0jhuXMJWXDnEdt8B5iYUu7ij_TWKdTUoS29xOSGZNJfpMqB0s_7QVGYI-bBYuZp0G-Hr1yEJkanZEeIAQ7qY07TOXUpsuOGJirzkyfUko2w-mtEPyv.png)

##### Process Monitor

Process monitor is a read-only tab that allows reviewing the status of processes executed by this request. 

More information in [Process Monitor](#process-monitor_1).

![](https://docs.etendo.software/latest/assets/drive/v8HLIJJYI6RlI8-i5h00aJ5Ynz8NuDcCs6srpwZrZWIpsHKrCJ5NhEHcqwHu85BlXz3enXj9v-XJ00GWsPU0BJ6U4qfPVajQPVcpy6AwTUSjZkN_eY27v_q8kcMzk4u8wcWODAL9.png)

##### Processes in Group

In case that the process executed by the process request is a process group, you will find here the information about the executions of the processes in the group for each process group execution. 

More information in [Process Group](#process-group_1).

![](https://docs.etendo.software/latest/assets/drive/1-YKBRq-gs3FtBuSize6FhzqtgT17IZlE.png)

#### Process Monitor

:material-menu: `Application` > `General Setup` > `Process Scheduling` > `Process Monitor`

##### Overview

Process monitor feature allows reviewing the status of processes executed by a user as well as the ones scheduled in the process request window.

In other words, there are two types of processes which can be monitored in this window:

- _transactional_ processes such as Generate Average Cost or Generate Invoices
- and _background_ processes scheduled in the process request

In any case, only the users having a role which have access to a given process/processes will be able to monitor it/them in this window.

Besides, and as already explained, _"Security based on role"_ definition at process request level will allow defining the users which will be able to monitor a given background process in this window.

##### Process Execution

Process Monitor window shows read-only information about individual process execution.

![](https://docs.etendo.software/latest/assets/drive/1n5-1WsQVWLDXUzuynPBRi1mruhlS9uPb.png)

As shown in the image above, process monitor window provides the information below per each process executed:

- the _Name_
- the _User_ who run the process
- the _Start and End time_
- the _Duration_
- the _Status_
- and the _Channel_. The options available are:
    - _Direct_ for transactional process executed manually by the user
    - Process Scheduler for background processes scheduled in the Process Request window.

##### Processes in Group

In case the process executed is a process group, you will find here the information about the executions of the processes in the group. 

More information in [Process Group](#process-group_1).

![](https://docs.etendo.software/latest/assets/drive/1-YKBRq-gs3FtBuSize6FhzqtgT17IZlE.png)

#### Process Group

:material-menu: `Application` > `General Setup` > `Process Scheduling` > `Process Group`

##### Overview

Create a Process Group to be able to schedule and execute a group of processes as a single unit from the Process Scheduler. The batch of processes will be executed in series.

The purpose of this functionality is being able to schedule and execute a group of processes as a single unit from the Process Scheduler.

- The Process Group creates an entry in the Process Request Window and Process Monitor window.
- Each individual process executed in a Progress Group is broken out as a separate entry in the Process Request Window and Process Monitor window.
- Each individual process is listed in the Process Monitor window, regardless if it ran successfully or with error.
- The log for each is listed in its own entry.

##### Process Group

It creates a Process Group to be able to schedule and execute a group of processes as a single unit from the Process Scheduler. The batch of processes will be executed in series.

A Process Group is a set of processes sorted in a certain sequence.

Process Group (Header): Contains information about the process group.

**Process Group Options**

There are two options that can be selected defining a Process Group

![](https://docs.etendo.software/latest/assets/drive/E2KNZetYy11WqMd1jRFYVQsjkQodMAYF63N2y2wYFfkZu8ooMYqJUfvnTdOh0iQu1Gp2NJtbEWCqQFBQGrqnHUTbyLTrdxCY-OUrnYhC997G7hOFYRvo-5ZOsjMWbhwg-PLQLJk5.png)

###### Prevent Concurrent Execution of a Process Group

As the Prevent Concurrent Executions of a single process, mark the Prevent Concurrent Executions checkbox in a Process Group means that just before launch an execution of a Process Group the system will check if there is another instance of the same Process Group running (for the same Client and same Organization). If there is, the system will abort the execution and will show an error message in the log: _Concurrent attempt to execute._

###### Stop the group execution when a process fails

By default, if a process that is part of a Process Group fails, the following processes will be executed.

Marking this check-box "Stop the group execution when a process fails" the execution of following processes will be aborted in case of a process failure.

!!!info
    This option is useful if the processes are dependent between them.

##### Process Group List

It creates a Process inside a Process Group with a sequence number.

Process Group List contains the list of processes that are part of the group, sorted in a certain order.

![](https://docs.etendo.software/latest/assets/drive/APyS4fin8Sb72dYf0TP1ZvLLpkZbsyrQ1Tv8_ABv1Byjurr0B1v8PanDaEytiR0NIhAS_TIbnsTe0aR5xQVNDybH_CicNv-TiGPgHq3deGKEyT8NuL3sPvf0J88asLgU9WWOtrMd.png)

##### Other Considerations

##### Error Result

A process group will show an Error result if it has one or more Error results in the processes that conform the group.

##### Permissions

Process Group is a window, so you can manage permissions for creation of Process Group as you wish: Only System, some clients, some organizations, some roles, etc...

##### Empty Groups

You can not launch executions of empty groups. If you try, you will receive this error: No processes on the group: nameOfTheGroup.

##### Prevent Concurrent Execution Co-Exists

Prevent executions of single processes and group processes will co-exist. Which means that none of them overrides the other and both can be set at the same time.

##### Process Group as Source Data

!!! info "Only for developers"
    Process Group can be considered as Source Data which means that, working as System Administrator, you can assign a "Group Process" and/or a "Group Process List" to your module in order to distribute them as part of your module.

![](https://docs.etendo.software/latest/assets/drive/fSrbl6KIduQt_nL4aZ2wOWGWgcd8H03rnndIVD5YhTx0J1bkdD-m5K57TXKQOuPDm8QtsLi4V_egrxJvgdOWEsV7TPykZRBr_1McjEMny9HXf9kowbFRXFhqcZm9MRhJ0PvT4xoJ.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Master Data
## Article Path: /User Guide/Etendo Classic/Basic Features/Master Data Management/Master Data
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data
## Article Content: 
#### Overview

This section describes the Master Data Management process. One of the steps to take while setting up Etendo is to define the master data to be used across other Etendo application areas.

Master Data Management helps to organize and centralize in a single repository the key data of the organization.

Having a single repository of data avoids data duplication, provides a unique way of data coding and is a key aspect for guaranteeing the coherence and tracking of business processes of any type.

!!! info
    Master data creation is one part of the overall Business Setup flow in Etendo and, as any other setup, it is required prior to entering transactions.

#### Business Partner General View

:material-menu: `Application` > `Master Data Management` > `Business Partner General View`

!!! info
    To be able to include this functionality, the Advanced Business Partner module of the Essentials Bundle must be installed. To do that, follow the instructions from the marketplace: [Advanced Business Partner](https://marketplace.etendo.cloud/#/product-details?module=39AC2D9F72124AC7A1D0A3D005293C9E){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Essentials Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/essentials-extensions/release-notes.md).

The “Advanced Business Partner” module allows the user to have a general view of business partners information and to assign sequence numbers to business partners.

!!! info
    For more information, visit [Advanced Business Partner](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/essentials-extensions/advanced-business-partner.md) in the Essentials Extensions Bundle Documentation.

#### Currency Converters

:material-menu: `Application` > `Master Data Management` > `Currency Converters`

In the Currency Converters window, the necessary Apilayer data has to be configured with the following information:

- Classname: com.smf.currency.apiconfig.CurrencyLayerConverter
- URL: http://apilayer.net/api/
- Token
- User
- Password

![](https://docs.etendo.software/latest/assets/drive/1L7bYs_0DYQCfU6cu-cbssJ1AwjTXtE1a.png)

#### Business Partner

:material-menu: `Application` > `Master Data Management` > `Business Partner`

##### **Overview**

Business partner master data window is the place where the user can easily organize and centralize business partner data.

Nowadays, organizations deal with many third parties such as customers, suppliers, creditors, etc., therefore it is recommended to _import large number of business partners_ instead of creating them one by one using the Import Data module.

Etendo allows the user to enter business partner master data information whenever it is needed as the business takes place, therefore the procedure described within this section explains how to set up a single business partner of any type.

##### **Business Partner**

There are many business partner types such as customers, suppliers and employees you can define and configure.

There is one key field in the business partner header window, which is the *Business Partner Category*.

The user should select a category which the business partner is going to belong to.

To learn more about *Business Partner Category*, visit the Business Partner Category section.

![](https://docs.etendo.software/latest/assets/drive/esJo49kYMnRjEA-vGVWUkzbiHYlQDZdE80wtPZiv7opgty2fS8GNWLqzJNiudJzr-Y_iqCBI3CRcfQlY34v5stDNyGFxIHH9US5FY-W0KYxBTx127DgPUaYMluLuyTJZZVqP3mlroJ2XnZSSvw.png)

The rest of fields at header level are common fields which require to enter basic business partner information such as:

- the **Search Key** or short name which will help you to identify and search a given business partner
- the **Commercial Name**
- the **Fiscal Name,** if known. If it is known, it is the one used in *official* documents such as invoices and tax reports, otherwise the commercial name will be used instead.
- a brief **Description,** if needed
- the business partner **URL,** if known
- a **Reference No** which can be used as an additional way to identify a business partner
- the **Consumption Days** information, which will be used while creating sales or purchase orders for that particular business partner, by using a process named *Copy Lines*.  
  To learn more about that process, visit Sales Order and Purchase Order sections.
- and finally ***Credit Line Limit***. Etendo will inform whenever the credit limit entered in this field for the business partner is over while booking sales invoices.

A new check named Consent for Customer Data Processing has been created in the business partner data model, to reflect whether a given contact consents or not that their data can be used by the organization.

It is not the same to enter and configure a customer than a supplier/creditor or an employee, that is the reason why *Business Partner* window has three main tabs and therefore sub-tabs which allow you to set up each main business partner type separately:

- **Customer** tab
  - **Customer Accounting** sub-tab
- **Vendor** tab
  - **Vendor Accounting** sub-tab
- **Employee** tab
  - **Employee Accounting** sub-tab

The tabs and sub-tabs mentioned above are described in the next chapters of this section.

Finally, it is very important to remark that there could be other types of business partners which require to be set up as business partners in this window; business partners which have nothing to do with either a customer, or a supplier/creditor or an employee.

That is the case of banks. Banks need to be created in the business partner window header by just entering basic header information and no data in any of the business partner window tabs, but Location and Contact. The reason for this is that *Bank* type business partners are needed in the *Remittance* financial workflow.

!!! info
    To learn more about this workflow, visit [Financial Account](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#financial-account).

###### **Set New Currency**

*Set New Currency* process allows the user to change business' partner currency.

Business partner currency is automatically filled in with the currency of the *Price List* assigned to the business partner. Once filled in, it can be changed if required by running *Set New Currency* process.

Normally, business partner currency is the same as the currency of the price list assigned to it. However, it can happen that a business partner having, for instance, an EUR price list assigned, might have USD as its by default currency.

In that case, all the transactions booked in EUR for that business partner, will be exchanged to USD, therefore, the business partner balance is calculated in USD.

Set New Currency process allows defining:

- a new currency for the business partner
- as well as the currency conversion rate to be used to exchange customer balance to the new currency.

![](https://docs.etendo.software/latest/assets/drive/qMRCmdApUN-s9LYIxySdzxh9-vQezR1tP5kqzLUpO62BELBpiwE71zR3QJW9tn2RbSdVXCj5Po2IAXX5AzeBX4QkyQb6G6ns7jw4UTzPUMEeqUPYjfAjvO4jkMueDO_Ko1855ty312Mk3e2JPQ.png)

At first, the currency shown in the *Set New Currency* window is business partner price list currency, in our example *USD*.

Business partner's new currency can be entered in the field *Currency*, for instance *EUR*.

Checkbox *Use default conversion rate* uses the conversion rate defined in Conversion Rates window, to recalculate business partner balance from USD to EUR, in our case.

If this check is not selected, a new field *Rate* is shown to allow entering a specific conversion rate.

Additionally, a business partner might have available credit in a given currency.

If that is the case, Etendo informs the user because business partner available credit will have to be exchanged to the new currency, therefore it can be consumed in the new currency.

![](https://docs.etendo.software/latest/assets/drive/sYcrvJb1PKlU9FPBStEkFIPdTCVTXSXCUte3iY1-kwfVGSiu8Xwux1DvZRxu9tseG0neDLmagLfVpiec4qQaNTLiheq908gynQ9p8Dh7eUOU8MyZ_pGFHICKaAiZwl_5jE0aIHyOfbDb38EVSw.png)

This process automatically creates three new payments, in case business partner has available credit:

- a _GL Item payment_ in EUR, that moves credit amount to the ledger account defined in the selected *G/L Item*, in the CREDIT.
- a _refunded payment_ in EUR, that moves credit amount to a prepayment account in the DEBIT
- and a *Zero* amount payment that is a credit payment in USD (new currency). This credit payment moves the credit amount to a prepayment account in the CREDIT.

Let us take as an example a business partner having a price list in EUR.

- This business partner has a current balance of 306.00 EUR and a generated credit of 100.00 EUR, which decreases its balance to 206.00 EUR.
- After that, *Set New Currency* process is run for this business partner, because its currency needs to change to USD
- *Set New Currency* process informs us that there is available credit for the business partner in the old currency (EUR). That available credit needs to be exchanged to the new currency (USD), therefore a conversion rate needs to be used. In this example, system conversion rate is used, that is 1.13 EUR to USD.
- Once *Set New Currency* process ends, business partner:

    - current balance shown changes to 232.78 USD (206.00 EUR \* 1.13 EUR/USD).
    - currency shown is USD.
    - and three new payments are created, as described above, to exchange available credit into the new currency.

- After that, a new sales invoice is booked for the business partner in EUR, as the business partner price list is in EUR. Sales invoice total gross amount is 41.50 EUR.
- This new sales invoice, once booked, will change business partner balance to 279.68 USD, that is (sales invoice amount 41.50 EUR \* 1.13 EUR to USD) + 232.78 USD.
- After that, a new sales invoice for an amount of 100.00 USD is booked for the business partner. While completing this new sales invoice, a new window appears showing business partner USD credit available, in our case 100 EUR \* 1.13 EUR to USD = 113.00 USD.

![](https://docs.etendo.software/latest/assets/drive/fAiMfanae3I2XAvLdbf3yFYkZhAbN8Me-A2kv3uSF62Q3HaBTz9wyfXBL-22RDXeKgdrNxTLeLDnECldDFwjhkEG-m4Uzgc-JNUrtasuWPvrKKGeTmlRg-Lrc9wqtQDG17R-trrmm8EbG70bgg.png)

##### **Customer**

!!! info
    Customer related data can be entered and configured once the *Customer* checkbox is enabled.

![](https://docs.etendo.software/latest/assets/drive/1gybs8XJw1B6pJZRr-mzWO9fEUm6ylwFr.png)

As shown in the image above, there is a list of relevant data to be entered for customers together with current _customer balance_ information:

You could either select any data such as *Price List* from a previously created list of values, or create it *ad hoc* by navigating to the corresponding window, and then select it.

- **Price List** - the one selected will be the one applied while creating sales documents such as sales orders or sales invoices for that customer.  
  To learn more, visit [Price List](https://docs.etendo.software/latest/master-data-management/pricing.md#price-list).  
  Price lists are defined in a given currency, which could be the same as customer currency or not.  
  In case it is not, customer balance will be calculated by taking into account either the conversion rate defined in the Conversion Rates window or the one entered in the process ***Set New Currency*** which can be run to change the currency of a business partner.
- **Payment method** - the one selected will be the one applied while creating and managing the payments received from that customer.  
  If a Financial Account is linked to the customer, the payment method to select here will be one of the payment methods linked to the financial account.  
  To learn more, visit [Payment Method](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#payment-method).
- **Payment Terms** - the one selected will be the one used while managing sales invoices payment plan.  
  To learn more, visit [Payment Term](https://docs.etendo.software/latest//master-data-management/business-partner-setup.md#payment-term).
- **Financial account** - the one selected will be the one use while collecting and reconciling the payments made by that customer.  
  To learn more about *Financial Account*, visit [Financial Account](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#financial-account).
- **Invoice terms** - there are few invoice terms which can be used while generating sales invoices.  
  To learn more, visit [Generate Invoices](https://docs.etendo.software/latest/sales-management/transactions.md#generate-invoices).
  - **After Order Delivered** - the invoice could be automatically generated once all the goods of the sales order have been shipped
  - **After Delivery** - the goods of the sales order will be automatically invoiced as they are shipped, even if there are partial shipments
  - **Do not invoice** - no invoice will be generated automatically
  - **Immediate** - the invoice will be generated on the next run of the Generate Invoices process.
  - **Customer Schedule after Delivery** - the invoice will be generated according to the calendar agreed with the customer and once the goods ordered have been shipped.  
    If this is the option selected, a new field named *Invoice Schedule* is automatically displayed for you to select the corresponding *Invoice Schedule* or calendar.  
    To learn more, visit [Invoice Schedule](https://docs.etendo.software/latest/master-data-management/business-partner-setup.md#invoice-schedule)
- **Credit Line limit** - If the sum of all pending payments is over the credit limit specified for a customer, the system will alert you by saying that this customer has reached the credit limit whenever this business partner is selected in a sales document (order, shipment or invoice).
- A customer can be defined as *Tax Exempt* whenever applicable, therefore only those Tax rates also defined as exempt apply.
- **Sales Representative** - you can select here a customer sales representative. A sales representative is an employee set as such.
- **SO BP Tax Category** - this field can be found under the *More Information* section.  
  You can use a business partner tax category to get that the sales documents created for a customer can only have a specific set of tax rates linked to that tax category.  
  To learn more, visit [Business Partner Tax Category](https://docs.etendo.software/latest/financial-management/accounting/setup.md#business-partner-tax-category)
- **On Hold** - this checkbox allows blocking a customer, therefore some specific documents cannot be fulfilled for it. If checked, the On Hold section is shown with the following setup, which can obviously be changed as required:
  - **Sales Order:** Blocked
  - **Goods Shipment:** Blocked
  - **Sales invoice:** Blocked
  - **Payment In:** Not blocked

Above defaulted configuration means that it is not possible to complete either a sales order, a goods shipment or a sales invoice for the customer but to receive a payment.

##### **Customer Accounting**

Customer accounting tab allows the user to configure the ledger accounts to be used while posting customer related transactions such as customer receivables and customer advances to the general ledger.

![](https://docs.etendo.software/latest/assets/drive/609fyigYTKbQyThG3K-Cd8GKw2Z-Y_02gsIaYELEwALpv3XCRgCgWeEXZqKvgYrhJWv1xDKvQ9zOTYRiF_ozw9D3xjh6OQIUt2vl1V17dfi8bHY2GoKLs7aXuZXVv3FALP8lA3Mqh6LFdfskaQ.png)

As shown in the screen above, you can configure for each customer and general ledger the accounts to be used in:

- the **Customer Receivables** transactions such as sales invoices posting.  
To learn more, visit [Sales Invoice](https://docs.etendo.software/latest/sales-management/transactions.md#sales-invoice).

- the **Customer Prepayment** transactions, such as those cases when the company shipping the goods requires the customer to advance part or full amount of the debt.  

At first, these accounts are inherited from the Defaults accounts of the organization's general ledger for which the business partner is being created. The end-user can always change them.

Besides, it is important to remark that it is possible to configure the creation of new correlative accounts for the business partners as described in the General Ledgers tab of the Organization window.

##### **Vendor/Creditor**

Vendor or Creditor related data can be entered and configured once the *Vendor* checkbox is enabled.

![](https://docs.etendo.software/latest/assets/drive/ZyKWCq0lO9Z1oggC86Qw1sYw6EACIoC7WNSXCgMczxoJFp9uppOasgk0YlwMWVjxCBSHouebT0uSxObUKBBd9A0TwRj-957-_D37S4p3-xrOMZlqI33LOXr18EDJBwBI0Z36Hxp0hmgQ4tcp-g.png)

As shown in the image above, there is a list of relevant data to be entered for suppliers or creditors, also known as vendors:

- **Purchase Price List** - the one selected will be the one applied while creating purchase documents such as purchase orders or invoices for that vendor.  
  If a Business Partner has already generated Credit, it will not be possible to select a Price List in a different Currency from the generated Credit. In that case, it is possible to convert Credit to a different Currency.  
  To learn more, visit [Price List](https://docs.etendo.software/latest/master-data-management/pricing.md#price-list).
- **Payment method** - the one selected will be the one applied while creating and managing the payments made to that vendor.  
  If a financial account is linked to the vendor, the payment method to select will be a payment method linked to that financial account.  
  To learn more, visit [Payment Method](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#payment-method).
- **Payment Terms** - the one selected will be the one used while managing supplier invoices payment plans.  
  To learn more, visit [Payment Term](https://docs.etendo.software/latest/master-data-management/business-partner-setup.md#payment-term).
- **PO Maturity Date 1** - as indicated in the Payment Term the PO Maturity Date is used in combination with the Fixed Due Date in the payment term to be set to Y and the Next Business Day set to N. The due date of the payment is based on the payment term defined in combination with the PO Maturity Date.
  - For example, the defined payment term is 30 days and the PO Maturity Date 1 is set to 10. If the invoice date is the 1st of the month, based on the 30 days payment term, the payment due date is the 1st of the next month, but since the PO Maturity Date is set to 10, the payment due date as a result is the 10th of next month.
- **PO Maturity Date 2** - a second PO Maturity Date can be set to be combined with the payment term and the first PO Maturity Date.
  - For example, the payment term is 30 days, the PO Maturity Date 1 the value is 10, the PO Maturity Date 2 is 20. The example given in PO Maturity Date 1 will remain the same. However, if the invoice date is the 11th of the month, the payment due date will be the 20th of next month: the 30 days of the payment terms are taken into account and since the 10th of the month is passed the second maturity date of the 20th is taken into account.
- **PO Maturity Date 3** - a third PO Maturity Date can be set to be combined with the payment term and the first and second PO Maturity Date.
- **Financial account** - the one selected will be the one used while withdrawing and reconciling the payments made to a supplier.  
  To learn more, visit [Financial Account](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#financial-account).
- **Tax Category** - you can use a business partner tax category to get that the purchase documents registered from a vendor can only have a specific set of tax rates linked to that tax category.  
  To learn more, visit [Tax Category](https://docs.etendo.software/latest/financial-management/accounting/setup.md#tax-category).
- **On Hold** - this checkbox allows blocking a vendor, therefore some specific documents cannot be fulfilled for it. If checked, the On Hold section is shown with the following setup which can obviously be changed as required:
  - **Purchase Order:** Blocked
  - **Goods Receipt:** Not blocked
  - **Purchase Invoice:** Blocked
  - **Payment Out:** Blocked

Above defaulted configuration means that it is not possible to complete either a purchase order, a purchase invoice or to make a payment but to receive goods sent by the vendor.

As already mentioned if a business partner of any type is blocked it is not possible to Complete (or book) some document types however it is always possible to Void them.

You will realize that Etendo shows an error message stating that it is not possible to complete a document for a business partner set as *on hold*.

###### **Vendor Accounting**

Vendor accounting tab allows the user  to configure the ledger accounts to be used while posting vendor related transactions such as vendor liabilities and vendor advance payments to the general ledger.

![](https://docs.etendo.software/latest/assets/drive/9Z371emBdqUmHgSvKroREH9tZsP4bV-9Eh6T9I-DOkp9x8n4iCFvpI_wOp3copFLr0lNnuogVezfXzQuQV4U6cukoVQJ6oYp1GLt3oxL-iE1TU1LhXIC0rghK_ctPI89l3Lg0u9Shcbj4Q8Aiw.png)

The user can configure for each supplier or creditor and available accounting schema, the ledger accounts to be used in:

- the **Vendor Liability** transactions such as purchase invoices posting.  
  To learn more, visit Purchase Invoice
- the **Vendor Prepayment** transactions such as those cases when the supplier of the goods requires the company to pay in advance part or full amount of the debt.  
  To learn more, visit Vendor Prepayments

At first, these accounts are inherited from the Defaults accounts of the Accounting Schema assigned to the Organization for which the business partner is being created. The end-user can always change them.

Besides, it is important to remark that it is possible to configure the creation of new correlative accounts for the business partners being created as described in the Org Schema tab of the Organization window.

##### **Employee**

A business partner can be set up as employee once the checkbox *Employee* is enabled.

![](https://docs.etendo.software/latest/assets/drive/lK2uSNpu3BHtkn7SCCaLztxheUiyHyDOjL26IGC2vvpvkmfMuvGZ7mC6_L3smeTuyRm5utpzQTNkFhutczZfjAzkauQbxrw9h_6kWjS08dkDYHBP3qiHznt9ybDDoy5YB9dheypb-Gtt_O9y-Xgr-w.png)

Employee tab allows the user to set which of your business partners are *Employees*.

An employee can be:

- appointed as **sales representative** of a customer
- defined as the **responsible of a company project/s**.  
  To learn more, visit Projects and Services Management
- allocated to a **production process** as a resource.  
  To learn more, visit Production Management
- and can **issue expense's sheets** as part of his/her involvement in a company project.  
  To learn more, visit Expense Sheet

###### **Employee Accounting**

The ledger accounts to be used while posting employee related transactions such as paryroll accounting could be added in this tab.

![](https://docs.etendo.software/latest/assets/drive/7kuCcxhGxEGWIpNYq-d8j3hysWa9ru8o2SoKJnxq9Cvkf3G-j1W0M5KDMw4Wq7IiNtKftE3U8GFbFZYUHDBompw3guyv-yamRyKg6-gUoNb1wibWRp0AAj1KQg3S1FGeiPmyyIJnUJOBSE4WQw.png)

As you can see in the image above, nowadays there is no ledger account required to be defined for employee accounting. This is due to the fact that there is no transaction susceptible of being posted for employees.

Anyway, this is the place where *Human Resources* related modules or features should point to while defining the accounts to be used in any employee transaction susceptible of being posted.

##### **Bank Account**

Bank account tab allows the user to list and set up business partner bank accounts.

It is possible to configure and properly set up business partner bank accounts to be used while making or receiving business partner payments of any type.

Therefore, we strongly recommend the user to properly set up bank accounts as those will be used by Etendo as required within Etendo payment management processes.

![](https://docs.etendo.software/latest/assets/drive/XzJTDeFWNJTAq361dyKR7owq_NSU41d06F7NgoVmM6MLjHaSxUc-M2q19MuXNkz90__zk-C6KFFYTIWyuh_D8d5KzJ9R1rGraYBU_y1LJj3uczO0V5DLgUtLQbqitNkiC_E8_Iyp89-X8EnhoA.png)

The *bank account* related data you can enter is:

- the **Bank Name**
- **Active** flag - We recommend you to set as *Active* only one bank account, if possible, in order to avoid errors; otherwise you should keep an eye on the right bank account used.
- **Country** - you can select a country from the list to specify if the bank account is a domestic bank account or a foreign bank account.
- **User/Contact** - in case you want to associate a contact for this bank account
- **Bank Account Format** - List that contains all the possible values for generating the Displayed Account Number, which will be later on used by other reports or processes to get the account identifier. Possible values are: _Use Generic Account No._, _Use IBAN_ or _Use SWIFT + Generic Account No._ Note: _Other options can be added by other modules that extend the supported Bank Account Format_.
- **Generic Account No** - a generic account number to identify the bank account can be introduced here. This field must be mandatory filled in case either _Use Generic Account No._ or _Use SWIFT + Generic Account No._ is selected at the Bank Account Format field.
- **IBAN** - The International Bank Account Number (IBAN) is an international standard for numbering bank accounts.  
  The IBAN consists of a two letter ISO 3166-1 country code, followed by two check digits, and up to thirty alphanumeric characters for the domestic bank account number, called the BBAN (Basic Bank Account Number). This field must be mandatory filled in case _Use IBAN_ is selected at the Bank Account Format field. The IBAN code will be automatically validated when inserting/updating the record taking into account the rules for the country bank defined.
- **SWIFT Code** - Corresponds to the ISO 9362 international bank code identifier. It must be mandatory filled in case _Use SWIFT + Generic Account No._ is selected at the Bank Account Format field.
- **Displayed Account**: It is automatically generated based on the value selected into the Bank Account Format. This field is read only, and it is used by other reports or processes.

###### Remittance

!!! info
    To be able to include this functionality, the Remittance module of the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

If the Remittance module is installed, in this tab, the user can find a “default” checkbox that, if checked, indicates that the selected bank account is the default one, instead of the other options the business partner can have. This means that if the bank account field is not manually populated, Etendo automatically fills the field with the default bank account.

![bank_account_default.png](https://docs.etendo.software/latest/assets/legacy/bank_account_default.png)

!!! note
    If no bank account is selected as default, the one created last is used when no bank account is selected in orders/invoices.

!!! warning
    Only one bank account can be selected as default for each business partner.

###### **Advanced Bank Account Management**

!!! info
    To be able to include this functionality, the Advanced Bank Account Management module of the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

This functionality introduces the possibility to mark a bank account as Default within the Bank Account tab of the Business Partner window. In the Advanced Bank Account Management field, it is possible to check the Default Account checkbox in order to set the account to be used in the documents for different transactions. 


##### **Location/Address**

Business partner locations and full address details can be set up in this tab.

Business partners might have different address details depending on location/address used for either *Goods Receipts/Shipments* purposes or location/address used for *Invoices* purposes.

![](https://docs.etendo.software/latest/assets/drive/ZC4Jc3vlmJB6aVN4fG94bMjafw4pv7IYzCE40ZEhZxA0JPkN2AwFK942M4o-fXhEliP9jHCKO_WSdNBNY8NWi6MyqLM00BmX2YsjHjUPs8B3SNg2UfGAAQETAczHpvwV-Ng93qjIvj3X2zVtyA.png)

Etendo allows the user to define any type of business partner address, by filling in the information below:

- **Location/Address** - if you click in this field the location selector box opens, there you can enter the information below:
  - the **address 1st line**
  - the **address 2nd line**, if needed
  - the **Postal Code**
  - the **City**
  - the **Country** - you can select one from the list, if any
  - the **Region** - once the country is selected, you can select one region of the country selected, from the list, if any.
    - Once the location entered is saved, it's listed in the *Location* window. To learn more, visit Location
- the **Phone** number
- an **Alternative Phone** number, if any
- the address **Name** - this field is automatically filled in by Etendo, once the location / Address information has been configured. The user could change it as needed.
- the **Fax** number
- **Ship to Address** checkbox - the user should flag this one if the address being set up must be used for Goods Receipts/Shipments related transactions.
- **Invoice to Address** checkbox - the user should flag this one if the address being setup must be used for sales or purchase invoices transactions.

###### **Advanced Bank Account Management**

!!! info
    To be able to include this functionality, the Advanced Bank Account Management module of the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Advanced Bank Account Management field is introduced in the Location/ Address tab of the Business Partners window to **associate specific bank accounts** to the different locations.  

!!! warning
    The default account will always be used when generating a new document unless an account is set up in a specific location. 

##### **Contact**

Contact tab allows the user to add and configure the business partner contacts you deal with.

![](https://docs.etendo.software/latest/assets/drive/Hy8AxFtV7E5iAuum7OaH5J2uRp3T6WeI-AjoxfZQKr0R1VyPJ-Br_PvqEJZ3ps8HuwJDDlFJZW6s1P4_h-U36j583nFJR86R3Qu7DqqaPcOl_8AgjtZAR2iCq_FHNt_HMFc3cqhF2l2Y1YLBUg.png)

As you can see in the image above, basic *Contact* data such as:

- **First and Last Name** of the contact
- as well as his/her **Position** in the business partner

can be configured in this tab.

##### **Basic Discount**

Basic Discount tab allows the user to add and configure business partner Basic Discounts.

![](https://docs.etendo.software/latest/assets/drive/2xUfGNVKL2MuKaMd8-0-MAdpaJiPFnOlExD6jrfVaicmThNDW7WV_C3Ve31HTwTENiUJ2TxGKnDRm9__SGlVoDralznQ9o0EfTxYl4xIKcTOhQpRU_pkeP1a-g_jrvcixL2FvJsM-MwK0_2EQQ.png)

It is possible to enter as many **Discounts** as agreed with your business partners, by filling in the information below:

- the **Discount** to be applied while creating sales / purchase transactions for that business partner can be selected from the list (if any) or created by navigating to the **Discount** window.
- **Customer:** this checkbox must be selected if the discount is going to be applied to a Business Partner set as *Customer*
- **Vendor:** this checkbox must be selected if the discount is going to be applied to a Business Partner set as *Vendor*
- **Apply in Order:** this check box must be selected in case the discount can be applied in sales or purchase orders as applicable.
- **Cascade** calculation of the discount. For instance, if first discount is 10% and second one is 5%, a cascade calculation of the total discount won’t be 15% but 14.5%

A discount not applied in Cascade means that it affects the full quantity of the Document Line. A Discount applied in Cascade means that affects the quantity of the Document Line that remains after applying all the discounts that come before it.

An example to explain the difference between a Cascade and not Cascade Discount is the following one:

Three Discounts, each one of 10%, the first two ones are defined as not Cascade and the third one as Cascade. Over an Invoice Line of 1.000 USD

- The first discount will create a line of -100 USD (10% of 1.000 USD)
- The second discount will also create a line of -100 USD (10% of 1.000 USD)
- The third one, however, will create a discount based on applying the previous discounts on cascade, so:
  - 1.000 USD - 10% = 900 USD (applying the 1st discount on Cascade)
  - 900 USD - 10% = 810 USD (applying the 2nd discount on Cascade)
  - 10% of 810 USD = 81 USD. So the third discount will be -81 USD.

In total -100 -100 -81 = -281 USD for all three discounts (a total discount of 28.1%)


##### Rappel Configuration

!!! info
    To be able to include this functionality, the Advanced Rappels module of the Sales Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Sales Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=22CF01FC620140A6AA92CF550EB8DA36){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Sales Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/sales-extensions/release-notes.md).


With this functionality, the user can find the tab “Rappel Configurations” in the business partners included in the Rappel configurations. Also, in the Business Partner window, the user is able to create rappels using the button “Create Rappel”.

![bp_window.png](https://docs.etendo.software/latest/assets/legacy/bp_window.png)

To be able to do this, it is necessary to configure certain aspects in the “Rappel Configurations” window.

!!! info
    For more information, visit [Rappel Configurations](https://docs.etendo.software/latest/master-data-management/business-partner-setup.md#rappel-configurations).

The “Rappel configuration” tab can be found in the tabs section of the Business Partner window. In this tab, the user can find the configured rappels for each business partner.

To create a new rappel, the user must select one of the available configurations in this tab and click the ***Create Rappel*** button. A pop-up window will appear in which the user can select a trading partner to which the Rappel will be assigned, and also configure a date period in which the consumptions will be taken into account to calculate the discounts, determined by the *date from* and the *date to* information.

![bp_pop_up_new.png](https://docs.etendo.software/latest/assets/legacy/bp_pop_up_new.png)

When the rappel is created, a sales invoice is created automatically, as seen below.

![created_rappel.png](https://docs.etendo.software/latest/assets/legacy/created_rappel.png)


Each time a rappel is granted to a business partner, a new sales invoice is automatically generated in order to show the amount of the discount. This invoice has a specific sequence to distinguish it from the rest, according to the options entered when configuring the sequence, and a negative amount since it is a discount. The status of this invoice is “draft”.

!!! info
    For more information, visit [Sales Invoice](https://docs.etendo.software/latest/sales-management/transactions.md#sales-invoice).

#### Business Partner Info

:material-menu: `Application` > `Master Data Management` > `Business Partner Info`

###### **Overview**

In this section, the user can view information related to business partner orders, receipts/shipments, invoices, and assets.

##### **Partner Selection**

The user can select a business partner to begin viewing related transactions.

![](https://docs.etendo.software/latest/assets/drive/4OnjuhWdUoTUGTSu8zWxiV2-AAuj2bKugSYsd0tnIK9CgAS12oX62u4KgxFW35THxZKqIH0Epr-E-q5w4w4y4kbkWR3wCKNTQFosue5bPRC3CMXbOgCNgkzsvXCtZ7OsB53ZD69KhpH-BmTZbQ.png)

###### **Partner Orders**

The user can view orders related to a specific business partner.

![](https://docs.etendo.software/latest/assets/drive/pwcD_Hw4nDDMhW7FDa69spb3uNGrBrfB8AwS8Ni77RyIi6_uPAsIWmWPzkvPoCBe5IIcW_GeFmxgvB4KPxoI6TmwiK2nAsFyOKd7GvbMXzpAyt2DwTPDnyKijbLgejiWZYCnj28D9-y9hZNuDw.png)

##### **Partner Shipments**

The user can view shipments related to a specific business partner.

![](https://docs.etendo.software/latest/assets/drive/DKEnqi6tY-_9PGf13-ntaqJCDwbfHlm8mJl2k4WwaIJ8dZibpai1E-LZhuf8DkUS4dSX2sm5eua0uzGLLdXreV-YW1KnyHvSI1zWRcJDHEjh0DJVslYgN3RBEuTiqjK0g5qpe02UP8ZUf24qyw.png)

##### **Partner Invoices**

The user can view invoices related to a specific business partner.

![](https://docs.etendo.software/latest/assets/drive/GVk5WiJ9CXXVM8khajRov6_24IGCsm0l8nD6ARDMyUL6Os5gle_r3LDHUsq1i-2lAXyf5aZRlgxep-kCgSGkbjMCoGNKVMCDwp-R5Z2pK1-5VYxgk4bswYEc4tcJ_iZGuh5Toi2DcEQIWz9Lsw.png)


#### Product

:material-menu: `Application` > `Master Data Management` > `Product`

###### **Overview**

Product master data window is the place where you can easily organize and centralize the key data of the items of any type you might manage as part of the organization processes and/or activities.

Organizations deal with a variety of different items that may be required by an organization for the performance of its daily activities.

It is possible to load Product information into Etendo en masse using the Import Data module, or one by one using the Product window.

This section describes how to set up Products individually.

###### **Product**

Product window allows the creation of items such as products, raw materials, resources, services, etc.

The information required to create a Product in Etendo is determined by the nature of the Product, its Product Type.

There are four product types available:

- **Item**. The most frequently used product type is *Item*. Inventory held for resale, materials that are placed into a production process, and semifinished or finished goods created through production are examples of products defined using the product type *Item*.
  - An item should be flagged as ***Stocked***, if quantity tracking is required for the item, otherwise there is no need to flag the item as *Stocked*.
  - An item should be flagged as ***Production***, if the item is used in manufacturing.
  - If an item is an intermediate or finished good, its bill of material (BOM) should be detailed on the Bill of Materials tab.
- **Service**. This product type is used to identify such provisions as professional services, transportation, telephony, and other items which do not correspond with material goods.
  - Therefore, a Service is not stockable but can be purchased or sold.
  - A service can have a bill of materials to be defined in the Bill of Materials tab.
- **Resource** and **Expense**. These product types can be used to distinguish between different types of products which can be purchased or sold but cannot be stocked.
  - Resource type can be used to configure resources such as Financial, Legal or Natural resources used by the organization.
  - Expense type can be used to configure expenses such as travel expenses to be used while reporting Employee expenses.

Product types do not confer different accounting treatments. In other words, all product types account the same way while being purchased, stocked or sold.

All of them use the ledger accounts defined in the Accounting tab of the Product window.

![](https://docs.etendo.software/latest/assets/drive/BP3_HION2Ye59yb2o2KNzsNK4o72pdd_v6DVNj5SsrL_3bZCZbH-OG4Snsia_DB_BItoQaJxuJf4vOe1jlrwPhZTswRuf1I8aUTCLlHP1s-NU-625ScthOFj8fgeIrknNz2MdE6kbDgecxTFSw.png)

Additional key data to fill in are:

- **UOM**, that is the unit of measure to be used while purchasing, storing and selling a product, for instance *Units*.  
  A product can also have alternative UOM besides product's UOM.
- **Product Category**, it is mandatory to select a product category to which the product is going to belong to.  
  To learn more, visit Product Category
- **Tax Category**, this category is key for managing the taxes related to the product. Taxes such as VAT depends on the type of product.  
  To learn more, visit Tax Category
- **Purchase** checkbox can be selected to indicate that the product can be purchased to an external supplier. This checkbox is mainly an informative one, as it does not add any business logic behind but regarding MRP.  
  In that case, if selected, MRP will then purchase the product if needed, otherwise it will produce it.
- **Sales** checkbox can be selected to indicate that the product is sold or can be sold to an external parties or customers. This checkbox is an informative one, as it does not add any business logic behind.
- **Stocked** checkbox is selected if the product is part of the inventory, therefore proper inventory movement transactions are registered in Etendo.  
  This flag can not be changed anymore for a product, if that product is part of any sales, purchase, inventory or production document related, whatever document status is.
- **Production** checkbox is selected if the product is part of a production process. Once selected, an additional field appears to select a *Process Plan*.  
  To learn more, visit [Process Plan](https://docs.etendo.software/latest/production-management/setup.md#process-plan)
- **Attribute Set**, a product can have a group of features or an attribute set, such as ***Color and Size***, to take into account while ordering or storing the product.
  - If an Attribute Set is selected here, Etendo displays a new field named *Attribute Set Value*.  
    To learn more, visit Attribute Set
- **Attribute Set Value**, if an Attribute Set value such as *Blue and Large* is selected, Etendo displays a new field named *Use Attribute Set Value As*.
- **Attribute Set Value As**, once an attribute set has been selected, that one could be used as described below depending on the criteria selected in this field:
  - **Default**: This means that the attribute set value defined will be defaulted in each of the transactions, but it is allowed to be changed.  
    In other words, the user will not have to care about setting it each time when creating transactions such as goods receipts and shipments.
    - For instance, it can be set to default the value of the attribute set Size of a product to Medium (because it is the most commonly used).  
      This way, each time that that product is selected, its attribute set value will be set to Medium (unless selected from stock, in which case the attribute set value is set to the value in which the product is stored).  
      It is possible to overwrite this attribute set value, to Small or Large for example.
  - **Overwrite Specification**: This means that the attribute set value will specify completely the product nevertheless, the attribute set value can be changed for this product.
    - For instance, product Alcohol Free Beer is given the attribute set Alcoholic Proof and the attribute set value 0% in the Product window. This definition specifies completely the product: the Alcohol Free Beer is supposed to have a 0% alcoholic proof. But, in the production process, some deviations can happen, and this alcoholic proof can go to 0.01%. Using Overwrite Specification option, the production manager will be allowed to register this deviation in the Production process for Alcohol Free Beer product.
  - **Specification**: This means that the attribute set value will specify completely the product. The attribute set value will always have this value and no other value will be allowed for it.
    - For instance, product Large Blue Jeans is given the attribute set Size & Color with values Large and Blue. This defines the product and will not change. Transactions are done and completed with this product, without forcing to re-set the attribute set value. User can then query all products having Large size or Blue color without having to query the transactions but only the product definition.  
      To learn more about attributes, visit How to Manage Attributes and Attribute Sets article.
- **UPC/EAN**, used to store bar-code information
- **Bill of Materials** checkbox is selected when the product is a bundle of other products as listed in the Bill of Materials tab.
- **Deferred Revenue**: this flag is visible only for products having the Sale flag checked and indicates that _by default_, revenues for sales of this product need to be deferred. When this flag is checked, the Revenue Plan field group becomes visible, allowing users to configure the next two fields.
  - **Revenue Plan Type**: this field specifies the default frequency of the revenue distribution. At the moment, only monthly revenue plans are supported.
  - **Period Number**: this field specifies the default duration of a revenue plan. For example, an annual subscription to a magazine will be defined with a revenue plan of 12 monthly periods, while a season ski pass will have revenue plan of 5 monthly periods.
  - **Default Period**: this field specifies the first period in which revenue is going to be recognized. The options available are:
    - _Current Month_. This option will set the Revenue Plan Starting Period to the same period as the invoice accounting period.
    - _Next Month_. This option will set the Revenue Plan Starting Period to the invoice accounting next period.
    - _Manual_. This option will not set any revenue plan starting period, therefore a starting period can be selected while creating the sales invoice line.
- **Deferred Expense**: this flag is visible only for products having the Purchase flag checked and indicates that _by default_, revenues for sales of this product need to be deferred. When this flag is checked, the Expense Plan field group becomes visible, allowing users to configure the next two fields.
  - **Expense Plan Type**: this field specifies the default frequency of the expense distribution. At the moment, only monthly expense plans are supported.
  - **Period Number**: this field specifies the default duration of an expense plan.
  - **Default Period**: this field specifies the first period in which expense is going to be recognized. The options available are:
    - _Current Month_. This option will set the Expense Plan Starting Period to the same period as the invoice accounting period.
    - _Next Month_. This option will set the Expense Plan Starting Period to the invoice accounting next period.
    - _Manual_. This option will not set any expense plan starting period, therefore a starting period can be selected while creating the purchase invoice line.

These values are used when an invoice is created for a product having an expense plan and/or a revenue plan.

In the same way, these values are also used when an invoice is created from another document (for example: the Generated Invoices process that creates invoices from sales orders). In the same way, these values can be modified on a transaction by transaction basis.

To learn more, visit the How to manage deferred revenue and expenses article.

- **Book Using Purchase Order Price**: This flag is used when posting a Goods Receipt or a Matched Invoice document to the ledger.  
  Normally, the product cost is used while posting those transactions, however this checkbox allows using the product purchase price instead.  
  This feature only works for *Expense* product type not having the *Sales* checkbox selected.

!!! info
    Notice that in this case a Purchase Order needs to be related to the Goods Receipt, otherwise an error message will be shown as the purchase product price is required.

- **Returnable**:This flag is used to indicate if a product can be returned and, in the case that it is, a new field called. When trying to return a non-returnable product from the Return from Customer window, an error will be shown.

![](https://docs.etendo.software/latest/assets/drive/8P_B_7zs64s6GpnSTeK9UQ6lBzvVnqGD9qOV3QR0WnAk_vPEZtjWJclvPzCvLx2HhU2oJuV4AjbxdhmspKkr3cWr20QacqX-VnigfqEjCIv9_blgPk1mEIloiZOBk5oCT6y41jQh9JI7HKA5vQ.png)

- **Overdue Return Days**:In this field, it is possible to configure the maximum amount of days before a product can not be returned. If the field is left blank, the product can be returned without time limitations. When trying to return a product whose period has expired, a warning message will appear.

![](https://docs.etendo.software/latest/assets/drive/QyvN8QXk9YDUur102n0wpiAY2QPyWux7iOpGMyvUkSVWGsoatyBdBBoMx5sxfWxo7dLX--2yo9cchrXV5yDH9nwpLqtOKLW9bsm4j0XFN9rCTCuusTntdbtxsRzu9Pu5pUinLOQ17lH_GAOymA.png)

!!! info
    **Note**: If stocked is not checked and BOM is checked, the product price should be 0. Because in that special case, the product price is the sum of the prices of the bill of materials components it consists of. If promotion wanted to create, 'Discounts and Promotions' should be used.

####### **Variants**

Product can be marked as **Is Generic**. This means that variants of this product will be created based on some characteristics such as colour, size, etc. The definition of these characteristics takes place in the generic product, so it can be said that a generic product is like a template where new variants will inherit all the attributes (taxes, prices, image) of this product. Due to this, a generic product cannot be used for transactions but its variants.

!!! info
    Note:Products that are marked as generic cannot be used in transactions operations such as sales orders, purchase orders, goods receipts, etc.

When this flag is marked, two buttons are shown:

![](https://docs.etendo.software/latest/assets/drive/XpdGDkmZecBZmb-qxyiA42-f6IdA9oTfYqig24hQZtSRsKLgItWO3U5jf-8kuTgHlMfKrUU9BQBSPfay8YoWSPKaYr74W9TXIgzumMG6T2sjq1g1w7zA9N2e2xZHPlGCykvLXWfU-wyAyH_5cw.png)

- It shows all variants that have been created or not for that specific generic product. It is very useful when:
  - The user does not want to generate all variants but just some of them. The button allows the user to select the possible combinations
  - The user adds one more value, for example, red when having before green and white and the variants were already created in the past. It will show the new combinations

For example, imagine generic product T-Shirt Model A has the characteristics:

- Color: Blue, White
- Size: S,M,L

But still variants have not been created. If you press the button, you can see all possible combinations:

![](https://docs.etendo.software/latest/assets/drive/YysrJ-lndKNj6qUEzE5IIaNziDxMduILgMa9XP3Vde2NskD-oIug-d3Ce12C4gZSJCDuqDqyXcTXL0IPRSEkRP3ezOIsF321Zy1pizzXHcUKuWlzNUPivH7sfIyDZhFxOcZUzCprjCYdNRs3Ag.png)

Then all combinations can be selected or just pick some of them. Once the selection takes place pressing Done, combinations will be created as Products. These new products will have the Generic Product field filled with the product that was marked as generic. We can say it is their parent product

![](https://docs.etendo.software/latest/assets/drive/1aZDzwrJXxLjUZhwgGhhHarCA-AsNLDbdSpLvVj2LzAvReay3gMmfC33auIHYoELn1pSKNSYrBWIckgesfl75Lza6jjZVMfXeNw1236dsTpVUMp0Aqmm19kJjAzp0ZRElYQc4F9iujwJ1X-P0A.png)

- It creates/explode all product variants, that is, all combinations based on the characteristics defined

Another button that might appear is ![](https://docs.etendo.software/latest/assets/drive/ZBo4NfiZAG6XK2iCAGS7jK--_4wffCzZHmp5z-8S0KrHU0Qs1U2_HkeL6MWD6KRZAFaYzjui8tmsOW9NKMbp3OkOLM27pUoQXBMC0YcHdCSLzQojA3Twi5IWuQwHEAcwlmjD4bnRYlMJ915Gpg.png). It only shows up when the generic product or the new product variant has a non-variant characteristic related. Two scenarios:

1.  **Generic product**: This button allows entering the value of that characteristic.  
    Imagine the characteristic is Fashion Line that has three values: Sport, Vintage, Classic.  
    Unlike the characteristics that are variants users cannot enter the value through the Characteristic Configuration tab
2.  **Variant Product**: This button allows the user to enter/update the characteristic that is not variant.

Once a variant has been created, its characteristics and values can be viewed either in the grid or in form view:

- Grid view: There is a new column **Characteristic Description**. This column is calculated and is not editable. It shows the characteristics with their values as a text. This column has a new search-selector in order to find product variants based on its characteristics

![](https://docs.etendo.software/latest/assets/drive/uxKcLraqzQTO5YQDc1QPoXzbekSyMuKoCGy0FpkRmreW9hbxKJOcZm-4R2kHVRAf7h-VaVYDoMlqncOk-iCWOZv5d7Nyo6OJIjsJXdlA1e276uJ2iD7YbUTpyY3R8BMUphQJGPqHG9z8Q3oCRw.png)

Press the button ![](https://docs.etendo.software/latest/assets/drive/XY6pNhuZ1_Zz62KSiGF0yVwR7duvGEGLzXb-sj8RZ0wfgcF2VLemqd37yK-hJshznCtz8tSACOFULk0CQo4f4CVrbR2W8-8CaBBUOtxsLXq2rnyATymb5aOTZaihm1mdEJEopKzbefJYQnNLrA.png) and it opens a pop-up to select values:

![](https://docs.etendo.software/latest/assets/drive/Wtk1v4OXf3cYQZQRJVMZZu6bvKWAF94yM7GMeugxV3zLYTJez8HaVSdzgIFurmZ4Y_-kCpYQnv58HewpHMGgyqom8Xtn30PLliwlV8zGlfmMmqPg0yqLfFhLLvB7Mij9Ro9gs7SY4lz-zqhJXg.png)

- Form view: Product variants have a new section named _Characteristic Description_. This section contains as many fields as different characteristics the product has.

There is a preference **Show Product Characteristics Parents**: Values can be 1,2,3,4, etc. The number means how many levels in the hierarchy tree the user wants to show in form view in the Product window. For example, if the tree is: Color->Green->Green light->0034

New values of an existing characteristic can be added. For example, colour red when already having Blue and White. When it happens, this new value is automatically added to all generic products that already have the characteristic Color. This new value will be present in the configuration tab but deactivated. If the user wants to use it in a specific product in order to create new variants he can just activate the value and use the button *Manage Characteristics*

####### **Modify Tax**

- **Modify Tax**: This check allows services to modify the taxes of the product linked to. This allows modifying taxes calculation of a product depending on a service condition. For example, a new kitchen furniture is sold to a customer, the taxes applied to the furniture might change if the installation of the furniture is also provided by the seller of the furniture. Also, this functionality applies only to Orders. The documents that are created afterwards will take the information from the Order document.

This tax modification is implemented through a service linked to the product. This service has to be marked as able to modify taxes of the products linked to, and the configuration of the products to modify taxes and the new tax to apply must be also specified.

To configure it, go to the Product window and create a new service. A service is just a product with the field Product Type set to Service. It has to be activated also the field Linked To Product and the field Modify Tax. When this field is activated, a new tab named Modify taxes categories is visible. In this tab, it is defined the configuration of the tax categories of products this service will modify when linked and the new tax category to apply.

![](https://docs.etendo.software/latest/assets/drive/260ftQHLj7KxqXuouydWqLebx8YSli0i-k7OQh7rvpv1tfbcFB7zqhatrWcMd2F8tFMwLJEA-7xbc9LAtOdi1MNYioVlWheErN2eiFnhvq77HU-oyLHyiUTvrE_T1ruWbkDwOAPwpytv6_sM5w.png)

To ease the configuration process, two components have been added:

1.- Modify Tax for Product Category (Button): Pick and Execute window to assign the product categories and tax categories in the same action.

![](https://docs.etendo.software/latest/assets/drive/8ToxP9o606fpE3T0LM-yFPrDkN_UcfbtRPVfoZvh6Oa_riBLBhSKHPfMvurIv4ijKgDJWyVFo4Bqjxe9tP0uzGw_GUbOBHq5j_s26JnOYPHDpzmwnQnxrdWC4yeQJfjs9glD0TVmOro6OA1wDg.png)

2.- Copy Service Modify Tax Configuration (Button): Pick and Execute window where services which modify taxes are displayed. The user can select one or many services, and current configuration will be assigned to selected services. Once the process has been executed, the old configuration (if it exists) will be deleted and a new one will be added. This process helps in deploying the same configuration to multiple services.

![](https://docs.etendo.software/latest/assets/drive/kiBwqlQgDgPUsbPgVV_vcxX_KBYPiHR4IO7ESfJQQOz6oZqgYal_8hA6Umn-Ik7g_ZfacpN64S_51WsHE-uruqBmRsEHWDRw94xVzBKRwBUiC_WGyGV8E_H3-ZLIVpb1kYpIFggvv_VmQz8n2w.png)

##### **Price**

A product can be part of many Price List Versions which are valid for a given time period.

![](https://docs.etendo.software/latest/assets/drive/djRxxYVfhjv8e71EzysdOeoAUbQHqZSVuQbECB5EJ88BVtBo7FJ5weuwe6rrpxjxcXMKUX8pZKFgAE_lj5WdhmABdxh0Q09e9wdLPK8VBKNf6jBK8E56qbc6oQRtDcmHgxnxclqBQGsbm2B_rg.png)

There are two ways in which the user can get a product to be part of a Price List:

1.  by **selecting the Price List/s** and entering both the *Net Unit Price* and the *Net List Price* values in the Price List tab, while creating the product.  
    As a consequence of that, the product being created will also be part of the Price List selected.
2.  by **selecting the product** and entering both the *Net Unit Price* and the *Net List Price* values, while creating the *Price List*.  
    As a consequence of that, the Price List as well as both *Net Unit Price* and *Net List Price* values will be automatically shown in the *Price List* tab of the product.  
    To learn more, visit Price List.

###### **Price Rule Version**

This tab will only be available when field Is Price Rule Based is selected. This tab gives the possibility of adding Service Price Rules to the Service starting from a certain date.

![](https://docs.etendo.software/latest/assets/drive/oKeZYS9ty3rxPOvfQd1nAc-VteGicSiOkI71kDF0mKBqomlsHjkbrtbMU3I36bDAbhM22cr0vlpMQ9FohG59E2YDtYddX5mFScwzgxcCvihP_y3C7SNdYqdnyIKewEei_gERVk0Nq-e4Gp_7Bg.png)

In this window it is also possible to define a maximum and minimum amounts that will be taken into account when showing services.

Those amounts define an interval between product prices so that the service will only be available to be added in case the sum of the selected products is between the interval.

For services of quantity rule: Unique Quantity the quantity of the line matters, as it will be only added one service.

For services of quantity rule: As per Product the quantity of the line does not matter, the price of the product only matters as there will be added as many services as products are selected. Only if all the products prices are between the tranche, the service will be shown.

Also, if once a service (not yet delivered) has been added to the receipt, the price of the related product changes, a validation will be triggered, and in case the service no longer meets the tranche rules, it will be removed from the current receipt and a pop-up will be shown saying so.

##### **Accounting**

Accounting tab allows the user to configure the ledger accounts to be used while posting product related transactions such as product purchase or sales to the general ledger.

![](https://docs.etendo.software/latest/assets/drive/bLlVeOrdKF3rI3NdVa69a-CAwtO63JpdbyF0fzkMEG1pdmZU8u7bOlhffyM-HCwVnYA_y0kd51iPvCELamYYdp5RA9a7wVithXN1EWh_T73K304xQYB-gApjFi0-6vcof5HZBzUyIUrkpT82JQ.png)

As shown in the screen above, you can configure for each product and general ledger some accounts to be used in the below listed transactions:

- **Product Assets**: this field stores the default account to be used to record inventory transactions such as:
  - Inventory Counts
  - Inventory Movements
  - and Goods Receipt

This account is typically an asset account.

- **Product Expense**: this field stores the default account to be used to record product's purchases:
  - Normally, this account can be configured as an *Expense* account type in case of not managing *Perpetual Inventory*.  
    In that case, the expense is accounted at the time the goods are purchased at the purchase price.  
    The revenue is accounted at the time the goods are sold at the sales price.  
    Not managing *Perpetual Inventory* implies the need of manually adjusting the inventory value at the end of the year.  
    That inventory adjustment implies calculating the difference between the *Final Inventory Value* and the *Initial Inventory Value*.
  - However, this account can also be configured as an *Asset* account in case of *Perpetual Inventory* management.  
    In that case, the expense needs to be accounted when the product is sold to the customer as *Cost of the Goods Sold* at the product cost.  
    In Etendo, the revenue is accounted at the time the goods are sold at the sales price and the cost of the goods sold is accounted at the time of shipping the goods at the product cost.  
    Managing *Perpetual Inventory* does not imply the need of adjusting the inventory value at the end of the year.
- **Product Deferred Expense**: this field stores the default account to be used to record deferred expenses.  
  This account is typically an asset account.
- **Product Revenue**: this field stores the default account to be used to record product sales revenues.  
  This account is typically a revenue account.
- **Product Deferred Revenue**: this field stores the default account to be used to record deferred revenues.  
  This account is typically a liability account.
- **Product COGS**: this field stores the default account to be used to record the cost of the goods sold.  
  This account is typically an expense account.
- **Product Revenue Return**: this field stores the default account to be used to record sales returns.  
  This account is typically a revenue account.
- **Product COGS Return**: this field stores the default account to be used to record.  
  This account is typically an expense account.
- **Invoice Price Variance**: this field stores the default account to be used to record price differences between posted Goods Receipts and booked Purchase Invoices.  
  This account is typically an asset account.

At first, these accounts are inherited from the Defaults accounts of the organization's general ledger configuration for which the product is being created. The end-user can always change them.

!!! info
    Besides, it is important to remark that it is possible to configure the creation of new correlative accounts for the products as described in the General Ledgers tab of the Organization window.

###### **Bill of Materials**

This tab allows editing the bill of materials components the selected product consists of.

Bill of Materials apply to products flagged as **Bill of Materials**.

This tab provides information of the list of products contained and its quantity for the Bill of Materials production.

If the product Tax_Category is flagged as **As per BOM**, this tab also provides information for the price of each product in the Bill of Materials list. The price and quantity in this list is used to perform the division of the base amount to calculate the taxes based on the taxes configured for each product of the list.

![](https://docs.etendo.software/latest/assets/drive/s-cRF1Q5kJQ4sPgBi-R9mMhT6v5JerM6U2qcFr0KgUyU79r0KE3mbTxN5oifJP1_M7XiW8G4j-vLYv6CSF8kr0XnyfO4DVGmazBfVB0aTjpfKS5qgLbYc6ZcBGUki-fBkZNVWmn9pYbVOqlIzw.png)

##### **Costing Rule**

Costing rule tab allows the user to review the costing rules that apply to the product within a given date range.

Costing Rules apply to products set as *Item* type flagged as Stocked.

This tab provides information about the validated costing rule(s) which applies on a given date range to the product, as well as the Costing Algorithm defined for that rule.

Costing rules can be created and validated in the Costing Rules window related to the corresponding legal entity / organization.

Currency used by the costing rule is the currency set for the organization.

![](https://docs.etendo.software/latest/assets/drive/pUP_Yr9n3YIRGELLgfbQGwgdZ2Hbfpn79YXYVdLLoqnm0fsbUkFho_XUijntiFcDgbpRUNu323utJkWNYXS2b9KaazDnoEfi9kr-p_Mr3XD-gRh5udUjkbV1y6IBy3xPiUuQ-w0PW6Wk45oSVw.png)

##### **Costing**

Costing tab collects and summarizes product cost related information as a result of every product transaction. Product's costs are valid during a fixed date range and can be calculated either by using an Average or a Standard costing algorithm.

One of the first things to do while creating or importing a product into Etendo is to inform Etendo about:

1.  the initial **Cost** of the products, if any, by entering it in this tab.  
    Keep reading to learn how to do it.
2.  and the initial **Stock** of the products, if any, by creating and booking a Physical Inventory.

Overall, this tab allows to:

- **define the Cost** of stockable products, that cost can either be a standard cost or an average cost.
- **define the Cost** of non stockable products, that needs to be a standard cost.

In the same way, either a *Standard* or an *Average* Costing Rule needs also to be defined for the Organization as the way to calculate the cost of the products' transactions within that organization.

- **review the average cost** calculated by the Costing Server when using an *Average* Costing Algorithm.

Note that when using a *Standard* costing algorithm the cost of every product transaction is the *default standard cost* entered in this tab.  
!!! info
    The *default standard cost* can be used by the Default Cost method whenever it is not possible to get the price of a transaction for which its cost needs to be calculated.

Average algorithms override the behavior of the *Default Cost* method prioritizing the use of the current *Average Cost* if any.

- and finally to have a view of all the input transactions of the product which have impacted on product cost calculation.
  - Input transactions such as vendor receipts are the ones which impact on product cost calculation, therefore the *Inventory Transaction* field clearly reflects those one by one.
  - Similarly, a *permanent* manual cost adjustment executed in an output transaction, such as a *Goods Movement From* (M-) impacts on product cost calculation, therefore the *Inventory Transaction* field clearly reflects these type of output transactions.
  - The very last transaction informs about:
    - the last cost, valid until a given ending date
    - and the total amount of units of that product which are valued at that cost.

Here, the costs calculated by the *legacy* engine are also visible.

It is possible to recognize them by their cost type:

- **Legacy Average**
- and **Legacy Standard**.

![](https://docs.etendo.software/latest/assets/drive/N1fWn0tV0yzS8dZULfJfiKeIOSvJzfYe-IBCo_TJSVqUavfD-zU4UlJlAhkg7CGNOV5uT__6-46NOHmWzyI3DBaYGwH_2TNdoblDMnC6VwDRzWILLf1k6YWZ8PRAPNWEjcMpSzqz81vqpObEBw.png)

The way to define the **Cost** of a product implies to enter below detailed information:

- The **Organization** for which the calculated costs apply to. Note that the organization needs to be a *Legal Entity*type organization.
- The **Cost Type**. There are two cost types available _Standard_ and _Average_.
- The **Cost** of the product, that cost can either be the standard unit cost of the product or the average unit cost of the product.
- An **Starting Date** when the initial product cost entered is valid from.
- An **Ending Date**, when the initial product cost entered is valid until, i.e. 31-12-9999.  
  That is the same as saying that the cost entered is valid until a new movement of that product is dated on a given date prior to 31-12-9999. Obviously that new input movement will change the product cost.

Besides:

- the **Manual flag**, allows the user to differentiate the cost transactions you have manually entered from the ones automatically created by Etendo.
  - manual ones created by you while entering default product cost information should be checked as Manual.
  - automatic ones related to Material Transactions bookings will not be checked as Manual.
- the **Permanent flag** blocks the ability to delete the cost manually. All costs should be set as Permanent.
- the **Warehouse** allows having a different cost by warehouse when desired and whenever the Costing Rule defined allows to do that.

!!! warning
    Note that you should not fill this field if the Costing Rule does not have the Warehouse Dimension field checked.

##### **Transactions**

Transaction tab is a summarized view of all the transactions of a product.

There is not a way for the user to directly create new product transactions in the transactions tab.

Product transactions of any type are automatically saved and listed in this tab as they are booked in Etendo.

![](https://docs.etendo.software/latest/assets/drive/20u-EUxoETZhWKS6geaudh3OZbjEc0CvxOFx_0njFvaHCzsro7CxBXExfQSPgKnKNX4eRyw4uvcYUIXZSBINAPMX-3nGhUoqA1K08zWlRefUU00gCNAQEvXbU-7RboBfWCxzGUK4OrStxUZ3kQ.png)

As shown in the image above, Etendo saves and informs us about below relevant data for each product transaction type:

- **Storage Bin** where the product has been stored in or taken from
- **Movement Quantity**, as the number of product units moved internally or either in or out
- **Movement Date**, as the date of the product transaction
- **Movement Type**, such as:
  - **Customer Shipment**, this type can have:
    - a negative movement quantity whenever a product is shipped to a customer in a Goods Shipment document.
    - a positive movement quantity whenever a product is returned from a customer in a Return Material Receipt.
  - Internal Consumption, as the units consumed in internal activities such as projects, reparations. This type can be:
    - **Positive** if the units of the product reduce stock from the warehouse
    - or **Negative** if an internal consumption transaction is canceled, this works like when a shipment is canceled.
  - Inventory In, this one relates to a Physical Inventory Count higher than the Stock booked for a product in Etendo.
  - Inventory Out, this one relates to a Physical Inventory Count lower than the Stock booked for a product in Etendo.
  - Movement From, this one relates to Goods Movements from a Warehouse & Storage Bin
  - Movement To, this one relates to Goods Movements to a Warehouse & Storage Bin
  - Production, as the units of a product included in a work effort. This type can be:
    - **Positive**, for P+ when products are added to the warehouse
    - or **Negative**, for P- when products are consumed
  - **Vendor Receipts**, this type can have:
    - a positive movement quantity whenever a product is received from a vendor in a Goods Receipt document.
    - a negative movement quantity whenever a product is returned to a vendor in a Return to Vendor Shipment.

Etendo also informs us about the specific:

- **Goods Receipt/Shipment Line**
- **Physical Inventory Line**
- **Movement Line**
- **Production Line**
- or **Project Issue**

information of the product transaction, as applicable.

It is also possible to review:

1\. The **Costing Status** of a transaction.

Costing status of a transaction can be any of the ones listed below and has a lot to do with the Costing Background Process:

- **Not Calculated**. This status means that the costing background process has not taken the transaction yet to calculate its cost.
- **Cost Calculated**. This status means that the costing background process has already taken the transaction and its cost has been calculated.
- **Pending**. This status has been implemented to get that the costing background process does not throw an error whenever it is not possible to calculate the cost of a transaction.  
  This status is not used by the Costing Algorithms currently implemented in Etendo but can be used by other costing algorithms such as FIFO for those cases where a product output transaction is booked without booking its corresponding product input transaction.
- **Skip**. This status has been implemented to make the costing background process not taking into account the transactions set as *Skip* while calculating costs.  
  This status is not used by the Costing Algorithms currently implemented in Etendo but could be used by other costing algorithms.

2\. and whether the cost of a transaction has been calculated or not.

As soon as a product transaction gets its cost calculated by the Costing Background Process the field *Is Cost Calculated* gets the value *Yes*.

Once the cost of a transaction is calculated you can also view the:

- **Trx Original Cost**, that is the original cost of the transaction
- **Total Cost**, that is the sum of the original cost of the transaction and all adjustment costs of any type.
- **Unit Cost**, that is the sum of the original cost and all the *unit cost* type adjustments.
- **Currency** used for the calculations.

Additionally, ***Is Cost Permanent*** field informs whether the cost of a transaction is permanent or not. In case it is permanent, it will not be changed anymore.

Finally, it is important to remark that in the case of *Average* cost algorithm, the *average* cost of a product is calculated as *Moving Average*.

The average cost of a product is calculated based on the product's transaction flow, therefore it is the sum or subtraction of the *Total Cost* of the transactions listed for the product, divided by the sum of the *Total Movement Quantity* of the transactions.

For instance the average cost of a product which transactions are listed below is equal to 23.33 = (2000.00-1000.00+2500.00)/(100-50+100):

- goods receipt for Movement Qty 100 for a Total cost of 2000
- goods shipment for Movement Qty -50 for a Total cost of 1000
- goods receipt for Movement Qty 100 for a Total cost of 2500

####### **Manual Cost Adjustment**

Additionally, the cost of a transaction can be modified by clicking the Manual Cost Adjustment process button. After clicking this button, a new popup is opened:

![](https://docs.etendo.software/latest/assets/drive/qDJuH3rx2ZvsvrA9Tjl0WZZjwJors5Xu2P2UgEjiBK_jhHX9vbYN3ZKcvH1mLIMWqUTNtrP4iKcFtp3VTDiwTHyLRpzsk4TUvxWl4QXo-ErSsQ4LbqtWnkCi2TWf1ftOhyL97RTpP5BbSEjL-Q.png)

This pop-up allows entering below detailed data:

- **Total Cost Amount**: that is the new total cost of the product transaction
- **Accounting Date**: that is the date when this manual change which will imply a cost adjustment is going to be post to the ledger
- **Incremental**:
  - if not checked, the amount entered in the total cost amount field is the new Total Cost of the transaction which, besides that, will be set as a *Permanent* cost which cannot be adjusted anymore.
  - if checked, the amount entered in the total cost amount field is going to be added to the current total cost, besides *Unit Cost* checkbox is shown.
- **Unit Cost**: This checkbox is shown only if *Incremental* checkbox is selected.
  - if not checked, the incremental amount entered in the field total cost amount is not going to be considered part of the transaction unit cost but total cost. This is like entering an *extra* cost such as *Landed Cost*, which does not change the unit cost of that transaction but the total cost.
  - if checked, the incremental amount entered in the field total cost amount is going to be considered part of the unit cost of the transaction.

For additional information about which cost adjustment is, or it is not unit cost, please review the section Cost Adjustments - Overview.

Once done, a *manual cost correction* cost adjustment will be created.

This cost adjustment can be reviewed and posted to the ledger in the Cost Adjustment window.

In the same way, this cost adjustment can also be reviewed in the Transaction Cost tab.

###### **Transaction Costs**

Transaction Costs records are automatically created by the Costing Background Process and then listed for the product in this tab.

As soon as a product transaction gets its cost calculated, a new record is created in this tab.

As soon as a product transaction gets its cost adjusted, a new record is created in this tab referring to a *Cost Adjustment Line*.

![](https://docs.etendo.software/latest/assets/drive/4lIc4FKc7VmCIoWFVPcV9fVkCqtBn2xTicXNsiin-P85rYySX2jwvUPGUAd3IdEaCUCSQo2hSgp_fuUP2Pp1HhXd6jUX03CePAe2AxypVuOVORVnJejwASLUrEmAGQyLBDCNm1GBXWaYr1N8ew.png)

Some relevant fields to note are:

- **Cost Date**: that is the date when the cost has been calculated (i.e. accounting date of a goods receipt)
- **Cost**: that is the total cost calculated by the costing background process
- **Currency**: that is the currency used to calculate the cost.  
  Currency cost is legal entity currency, therefore product transaction having a different currency (price list in USD currency for instance) gets its cost calculated in the legacy currency (i.e. EUR)
- **Cost Adjustment Line**: if a calculated cost comes from a cost adjustment, this field populates the cost adjustment line that causes that cost.  
  At the end, the total cost of a product transaction is the sum of all the costs listed in this tab, original and adjusted ones which could be part of the unit cost or not (i.e landed costs).
- **Unit Cost**: this field details whether the calculated cost is part of the unit cost of the product or not.
- **Accounting Date**: that is the accounting date when the cost has been calculated and post to the ledger (i.e. accounting date of a goods receipt post to the ledger)

##### **Purchasing**

Purchasing tab information is used for products that are planned by the purchasing plan.

In this tab, the information that is required for the creation of the Purchasing plan and of the automatic creation of Purchase Orders from the Purchasing Plan is entered.

Also, the Requisition process uses the Business Partner information for the automatic creation of Purchase Orders.

![](https://docs.etendo.software/latest/assets/drive/jUizYPPOFt4WfdpL71z7Pxe8z7aMWc7Qnzz0rYE488WWt0fvBY9jKgswYbddRYo1rOzmYGsAmV0zOCGvwuo2BfwWDr4gG94qfwrNTjpfcA3XYq1sNH2wNg495KlwPCY52uGyT_FhGRQWxDzbMw.png)

- **Business Partner**, the vendor that will appear on the Purchase Order when created automatically from the Requisition or from the Purchasing Plan.
- **Quality Rating**: quality rating of the vendor. Information only field that is not used by the MRP process.
- **Current Vendor checkbox**: indication of the default vendor that will be taken into account by the MRP process.
- **UPC/EAN**: Universal Product Code/European Article Number (barcode) of the product as used by the selected vendor. Information only, this information does not appear on a created Purchase Order.
- **Currency**: currency of the purchase order.
- **Net List Price**: information only field of the Net List Price that has to be updated manually on the automatically created Purchase Order from the Purchasing Plan.
- **Price Effective From**: the date that the entered prices became valid. Information only, not used by the MRP process.
- **Purchase Order Price**: information only field of the Net Unit Price that has to be updated manually on the automatically created Purchase Order from the Purchasing Plan.
- **Last Purchase Order Price**: the Net Unit Price on the most recently added Purchase Order.
- **Last Invoice Price**: the Net Unit Price on the most recently added Purchase Invoice.
- **UOM**: the unit of measure of the product.
- **Minimum Order Qty.**: a minimum order quantity for the vendor. In the Purchasing plan, the quantity for suggested purchase orders is this value or above.
- **Quantity per Package**: information only for the packaging of the product. This information is not taken into account for the creation of the information in the Purchasing Plan nor for the creation of Purchase Orders.
- **Purchasing Lead Time**: time in calendar days between when the product is ordered from the vendor and when it is received in stock. In the Purchasing Plan, this information is used to calculate when purchase orders should be placed, resulting in the Planned Order Date for the suggested purchase order.
- **Fixed Cost per Order**: information only field of a fixed amount that has to be added manually to the automatically created Purchase Order from the Purchasing Plan.
- **Vendor Product No.**: the vendor reference for the product
- **Vendor Category**: information-only field to add vendor category information.
- **Discontinued**: information-only field to indicate that this product is no longer used. The Purchasing Plan does not take this set up into account when generating the plan and when creating Purchase Orders. When selected, the field Discontinued by date to indicate when the product is discontinued. For information-only purposes.
- **Quantity Type**:
    - **Exact**: each suggested purchase order is for the exact required quantity. For example, if the demand is for 85 units, the quantity for the suggested purchase order is 85 units.
    - **Multiple**: the quantity that appears as the quantity for the suggested purchase order is a multiple of the standard quantity (as defined on this screen). For example, if the standard quantity is 20 units and the demand is for 85 units, the quantity for the suggested purchase order is 100.
- **Manufacturer**: information-only field to indicate the manufacturer of the product.
- **Standard Quantity**: quantity that is taken into account in combination with the Quantity Type for the quantity value for the suggested purchase order.
- **Capacity**: quantity per day the vendor is able to supply. Based on this field and the lead time, the purchase order date is calculated. The number of days is calculated as the max value of the lead time and the required quantity / capacity.

##### **Manufacturing**

Manufacturing tab is used for products that are planned by the manufacturing plan.

The information in this tab is mainly used by MRP to process the Manufacturing Plan and Purchasing Plan. The storage bin field is filled out for products in production to indicate the default storage bin the product will be stored in when coming out of production.

- **Storage Bin**: default location in the warehouse of the product.
- **Planning Method**: definition of the elements of supply and demands that are taken into account and with which percentage for the creation of the Manufacturing Plan and Purchasing Plan. For more details, see the  [Planning Method](https://docs.etendo.software/latest/material-requirement-planning/setup.md#planning-method) section.
- **Planner**: the person responsible for the execution of the MRP plan of the product. For more details, see the [Planner](https://docs.etendo.software/latest/material-requirement-planning/setup.md#planner) section.
- **Capacity**: production capacity per day for the product.
- **Min. Quantity:** minimum quantity to be entered on a work requirement.
- **Quantity Type**:
    - **Exact**: each suggested work requirement is for the standard quantity (as defined on this screen). Multiple suggested work requirements appear for the total demand. For example, if the standard quantity is 20 units and the demand is for 85 units, 5 lines of suggested work requirements with quantity 20 appear.
    - **Multiple**: the quantity that appears as the quantity for the suggested work requirement is a multiple of the standard quantity (as defined on this screen). For example, if the standard quantity is 20 units and the demand is for 85 units, the quantity for the suggested work requirement is 100.
- **Standard Quantity**: quantity that is taken into account in combination with the Quantity Type for the quantity value for the suggested work requirement.
- **Minimum Lead Time**: manufacturing lead time of the product.
- **Safety Stock**: the minimum level of stock that has to always be in the warehouse. For example, if there is a safety stock for 1000 units and stock is 900 units, a work requirement (Manufacturing Plan) or purchase order (Purchasing Plan) is suggested for 100 units. Typically, low cost products or products with a very long lead time are set up with a safety stock level.
- **Max not reserved stock**: Maximum stock without taking into account the pre-reserved stock. This field is only visible when Stock reservation feature is enabled. See the below example to understand how it works:

1.  _Safety stock_ and _Max not reserved stock_ are 200 and 1000 units, respectively
2.  There are several sales orders to be delivered by 3000 units in total
3.  These sales orders will generate the corresponding purchase orders (pre-reserved) when launching the MRP
4.  There are currently in stock 80 units
5.  When MRP is launched it will create the corresponding pre-reserved and because being after below safety stock it will create another purchase order:
    1.  As the _Max not reserved stock_ is defined, the system will create a purchase order of 920 units (1000-80)
    2.  If this parameter was not defined, it would work as usual and it would create a purchase order of 120 units (200-80)

- **Abc**: value used in warehouse management to indicate a combination of the stock level and the cost of a part. The value is calculated by running the Pareto Product Report.

##### **Translation**

Product names can be translated to any language.

The way to get that is as simple as:

- select first the language required
- and then enter the product name translated into that language.

###### **Characteristics**

Relation of characteristics assigned to the Product.

Fields:

- **Sequence number**: Order of the characteristics
- **Characteristic**: List all the characteristic defined in _Product Characteristics_ window
- **Variant**: When it is marked, it will explode/create combinations with its values. If it is not marked, it will not create combinations with other characteristics. For example
  - Characteristic Color: Variant marked with value Blue and White
  - Characteristic Size: Variant marked with value M and L
  - Characteristic Fashion line: Variant not marked with value Sport
  - It will create four variants/products and for all of them with the characteristic Sport
- **Explode Configuration Tab**: Flag available on Generic Products and Variant Characteristics. When it is checked, the values of the selected variant characteristic are automatically inserted in the _Characteristic Configuration_ tab. If it is not checked, the values must be added manually.
- **Defines Price**: Every value of that characteristic will define the price of the new product. It will overwrite the price defined for the generic product. This price is defined in the _Characteristic Configuration_ tab
- **Price List Type**: It is shown when _Defines Price_ is marked. It allows the user to select in which type of price list you want to overwrite the price. For example:
  - The generic product has two price lists: One is for sales and the other for purchase
  - You select _Sales Price List_ value. Then when creating the product variants it will only overwrite the price in price lists defined as Sales
  - The opposite if the value selected is _Purchase Price List_
- **Define image**: Every value of that characteristic will define the image of the new product. It will overwrite the image of the generic product. This image is defined in the _Characteristic Configuration_ tab
- **Characteristic Subset**: List all the subsets included for the selected Characteristic (i.e. Pants)

Once the record is saved, all the values of the characteristic are populated into the characteristic configuration tab

**Characteristic Configuration**

Characteristic Configuration tab contains the available values for each characteristic assigned to the generic product. Price modifiers to create the variants are defined in this tab as well.

Fields to take into account:

- **Characteristic value**: Cannot be editable since it is populated automatically when selecting the characteristic
- **Code**: Code for the value. It inherits what has been defined in product characteristic window
- **Unit price**: This field is displayed when the characteristic is marked as _Defines Price_. The aim of this field is to have different prices per value. For example, depending on the Sizes
- **Image**: This field is displayed when the characteristic is marked as _Defines Image_. The aim of this field is to have different images per value. For example, depending on the colour.

##### **Stock**

This Tab shows the available Stock for this Product in the application. It only shows Storage Bins for which the quantity available of the Product is not 0

For each not empty storage bin, it also shows information about the:

- reserved quantity
- and the allocated quantity

##### **Unit Cost**

Unit Cost Tab displays information about the actual *Unitary Cost* (Unit Cost) of the product.

The *Unitary Cost* of a Product is the value of each stocked unit of the product no matter the costing algorithm used to calculate the cost of that product.

This cost is calculated using the *Total Stock* of a product and the *Total Value* of the stock of the product, as per formula below:

- Unit Cost = Total Stock Value / Total Stock

This way, the unitary cost calculated is independent of the *Costing Algorithm* used to calculate the cost of each transaction and product, therefore this unitary cost is compatible with all *Costing Algorithms* (Average, Standard, FIFO, ...)

In this Tab, there is going to be a record for:

- each Organization that is a Legal Entity that has a Costing Rule defined
- or each Organization and Warehouse, whenever Warehouse Dimension is defined as a costing dimension of the current Costing Rule defined for the *Legal Entity*.

![](https://docs.etendo.software/latest/assets/drive/KaTTAE01N7KuTheqE-4REVj2b6H1QQnWqxpNvt2oNR_y9sqdYUsBOhQw1RHg_KP10n4NoI5gVpUXfgb0KPHOYx5Ab-RCWIAWvUyboKczDdnTHaWWVfw-bhUDAE4pMsAvEyt3qNtfHeKj7DAQ5A.png)

###### **Product Categories**

The user can define if a product of a certain product category can be related to a product of 'Service' type by creating a relation between an Order Line of the Service product and another Sales Order Line of the product belonging to included/excluded product categories.

This tab will only be available when the field ‘Included Product Categories’ of the Service has a value. It contains all the product categories related to the service.

![](https://docs.etendo.software/latest/assets/drive/PYJo6PQVwfGTLbk5f39Z5opQ3qM4D81lk9qWKX7k1Z-E9RzZC5ZnB9EK4fcWtb37L_ZP_fcJbcnAQdXMF1vLAzXuhseG993zL5eDG2xL-nt-jexrA3D-d4VupddMJEeKGixjbQZFXUBoayzGQQ.png)

The following information about related products is available in the tab:

- **Search Key**: Search Key of the Product Category.
- **Name**: Name of the Product Category.
- **Description**: Description of the Product Category.

This tab is not editable, it is not possible to add records manually or edit them. It only allows to delete records. To add new records, it is necessary to click the ‘Relate Prod Categories’ button (Visible only when the field ‘Included Product Categories’ has a value). This button will open a Pick & Edit displaying all product categories not related to the service.

![](https://docs.etendo.software/latest/assets/drive/n_0U2RkOiXABiP8XeiREnMyOPLHm9-Xsu9hNM-PE6c248gNtomNeOzXROYJJzMpkuRJvKH0GnNDpOp3FSaBOAVURspU8rHeGLY_dhWofqyWmnQ00gJ8yGwuTDxy_PZ_SyzDTmPk6vf2eBeXEDQ.png)

###### **Category Price Rule Version**

###### **Products**

The user can define if a product can be related to a product of 'Service' type by creating a relation between an Order Line of the Service product and another Sales Order Line of the product included/excluded.

This tab will only be available when the field ‘Included Products’ of the Service has a value. It contains all the products related to the service.

![](https://docs.etendo.software/latest/assets/drive/QhyN8Mqa2ybLbU9ny5se3_Z-JsGEIYGIAma4LQhBS4U4TUdZWUQTe3-Y3NP7bwlaQSxr6Fea2aB0K2g-slUF8XLmuN6aDN-3LCgqCjfSl0cl4uyn1c8YgL-w_AuZi8t4jXcDyF-cr2CpqKm-xg.png)

The following information about related products is available in the tab:

- **Search Key**: Search Key of the Product.
- **Name**: Name of the Product.
- **Brand**: Brand Key of the Product.
- **Product Category**: Product Category to which belongs the product.
- **Generic Product**: Generic Product of the Product, if it has any.
- **Characteristic Description**: Characteristics of the Product, if it has any.

This tab is not editable, it is not possible to add records manually or edit them. It only allows to delete records. To add new records, it is necessary to click the  ‘Relate Products’ button (Visible only when the field ‘Included Products’ has a value). This button will open a Pick & Edit displaying all products not related to the service.

![](https://docs.etendo.software/latest/assets/drive/LB2xjm1Lcu3JfY4eab8BA9hFgvjRLJCvaIW52jrLlGSoox67pJL73fBfqhzWBAVBGBGnXAOiaIu7F4O8bYsnbRWsmbZj3ddYGqWZ0vFpcJZdbTdSWIMtGuLFMcFDTONgqvFSgqwm3eW0fNIFxw.png)

###### **Product Price Rule Version**

###### **Alternate UOM**

!!! info
    The user must enable this preference by entering the Preference window, checking the Property list checkbox, choosing “Enable UOM Management” in the Property field with value Y.

![](https://docs.etendo.software/latest/assets/drive/zu1QFJc_LPSBeJOGOOGHLNMjKi-WsPgjKPEaD4-BnQJEKbvhU1jz0WXeW-RHyDOEXYAx67_-Z7F6SIGVxBkGdZT828fkrjzAeu35psYO4H_dSFcw8YosbJailPqSWhZyjhCsN01vu0kqIyTG1g.png)

Fields to note:

- **UOM**, that is the alternative unit of measure of the product, for instance *Pallet*.  
  It is important to remark that any unit of measure needs to be created and configured in Unit of Measure window.
- **Conversion Rate**, that is the conversion between product's alternative unit of measure (AUM) to product's unit of measure.  
  For instance, if product's AUM conversion to product's UOM is 50; that means that 1 Pallet represents 50 Units.
- **Gtin**, that is the *Global Trade Item Number* for the product defined in the corresponding AUM
- **Sales**, **Purchase** and **Logistics**, those fields allow defining the use of product's AUM within Sales, Purchase and Inventory flows.  
  Values allowed are:
  - **Primary**: Product's AUM defined in this tab is used as default unit of measure in the selected flow (Sales or Purchase), when creating a sales or purchase document such as an order or receipt/shipment.  
    Only one Primary AUM can be defined per Product and flow.  
    For instance, if *Pallet* is the primary AUM defined for a product within Purchase flow, that means that every time that a purchase document is created, *Pallet* will be the default unit of measure shown.
  - **Secondary**. Product's AUM defined in this tab can be selected for the selected flow when creating a Document.  
    For instance, if *Pallet* is the secondary AUM defined for a product within Sales flow, while *Pack* is primary one; that means that every time that a sales document is created, *Pack* will be the default unit of measure shown, but end-user can change it to *Pallet*.
  - **Not Applicable**. The AUM defined in this tab for the product will not be available for selection when creating Documents for the selected flow.  
    That is the option to select for *Logistics* as the use of alternative units of measure is currently implemented just for sales and purchase. Inventory transactions/documents always refer to the product's unit of measure.

###### **Modify Taxes Categories**

It defines tax modification for products linked to service. Products linked to this service that belong to the configured category will change the tax category when linked to this service.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Business Partner Setup
## Article Path: /User Guide/Etendo Classic/Basic Features/Master Data Management/Business Partner Setup
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/business-partner-setup
## Article Content: 
#### Overview

Business partners can be grouped into different categories with the aim of helping their management and analysis.

You may want to group the suppliers of a certain type of products within the same category, in order for you to compare the purchase prices your company got from them in relation to the same type of products.

Or you may want to group the customers located in your country within the same category, a different one than the one which groups the customers located abroad, in order for you to compare national and foreign sales figures.

All of the above is possible due to the fact that Business Partner Group is a dimension of Purchase and Sales Reports.

To learn more, visit Procurement Analysis Tools and Sales Analysis Tools.

Finally, it is also important for you to take into account that each business partner category allows the user to set up a different set of ledger accounts to be used while posting transactions such as customer receivables or vendor liabilities.

#### Business Partner Set

:material-menu: `Application` > `Master Data Management` > `Business Partner Setup` > `Business Partner Set`

##### Overview

In this window the user can define lists of business partners to use in other functionalities.

##### Header

In the Business Partner Set header the fields to complete are the organization and the name of the list of business partners. It is also possible to add a description when necessary.

##### Lines

The lines tab allows the user to add the required business partners to the corresponding business partner set.

![](https://docs.etendo.software/latest/assets/drive/8ZKuObE2Ho1XC21yS8iC2Y_OpEE2O90ARCMJbxiSHrqbvwIeoi03nkb_k4uo2xp5B7gbzB2cnINPV2kjKyK-8pkyMz4NNhduzwIAmCwe4ijlZ_wzZU5mefhkcGPg-4DmOdAdc0_fDmHBhC3Gl78.png)

#### Business Partner Category

:material-menu: `Application` > `Master Data Management` > `Business Partner Setup` > `Business Partner Category`

Business partner category window allows the user to create and configure every business partner category your organization may need.

![](https://docs.etendo.software/latest/assets/drive/yiAWq21ZqaNFnysyzjUGdcU9RY9FIVQqQct184kzcnC2D6uQMWfucDd08L5YaVtSd1HtwvLRG2Vdqv9VJ1UrACm7AgCKwAXsZ6n4jWINbhoOqPVy5RpM4jnL_WheUZwDBroliExjc4cd8Z4NjQ.png)

As shown in the image above, the creation of a business partner category requires entering below listed information for each category:

- a Search Key or short name which helps to easily find a category
- a Name
- and a Description

##### Accounting

Each business partner category allows the user to configure a different set of ledger accounts.

![](https://docs.etendo.software/latest/assets/drive/sEas2U1BqTJtpng8QicgZUyvuochrM-jHjiTbEioeEE48ThFV3xNzGAjuMyqxy1SPVwtEqeG5z6lgwu9qZQ2pt162aFt9kfCvkp6rNE1NK_ecgSgqNIa12wrcfNKeuPwetZKmA8s3xiNPOjBEQ.png)

There are several business partner related accounts which need to be properly set up for the organization's general ledger configuration.

The "Copy Accounts" process of the Defaults tab of the General Ledger Configuration screen allows the user to automatically populate at least the mandatory ones shown in the image above.

The accounts automatically defaulted by Etendo can always be changed if required.

These ledger accounts are the ones to be used while posting business partner related transactions such as:

- Customer Receivables, sales invoices posting.  
  To learn more, visit Sales Invoice
- Customer Prepayments, customer payments in advanced posting.  
  To learn more, visit Payment In
- Vendor Liabilities, purchase invoices posting.  
  To learn more, visit Purchase Invoice
- Vendor Prepayments, vendor payments in advanced posting.  
  To learn more, visit Payment Out
- Non-invoiced Goods Receipts, Goods Receipt posting  
  To learn more, visit Goods Receipt
- Write-off amounts, or amounts your company expected to get paid by a customer which are not going to be paid anymore.  
  To learn more, visit Payment In
- Revenue Write-off amounts, or amounts to be paid by your company to a supplier which are not going to be paid anymore.  
  To learn more, visit Payment Out
- Doubtful Debt Account, doubtful debts posting.  
  To learn more, visit Doubtful Debt Run
- Bad Debt Expense Account, expense amount classified as bad debt.  
  To learn more, visit Doubtful Debt Run
- Bad Debt Revenue Account, revenue amount classified as bad debt.  
  To learn more, visit Doubtful Debt Run
- Allowance for Doubtful Debt Account, amount used to provision against possible bad debts.  
  To learn more, visit Doubtful Debt Run

The "Copy Accounts" action button allows the user to copy the accounts defaulted in this window to either:

- the Customer Accounting tab
- or the Vendor Accounting tab

#### Invoice Schedule

:material-menu: `Application` > `Master Data Management` > `Business Partner Setup` > `Invoice Schedule`

##### Overview


Invoice schedule window allows the user to define and configure how often and by when an organization can issue invoices to be sent to customers.

##### Invoice Schedule

An organization can agree and therefore define specific schedules for issuing invoices, schedules which will then need to be linked to the corresponding customers.

![](https://docs.etendo.software/latest/assets/drive/0W4ihla_EA-tyKPr-LD48QtQ8tA-NXalUc6vNw45JFtUQQSqURKxkirYyxbrbtM9533FjdnfxdOMsOdjdBfLx7M20MSpnNzG3YW5qfZ_zyxxEI8_4X01V2G7Mu6yAJtgwGqXzGMtDO1J46IKgg.png)

As shown in the screen above, an invoice schedule can be easily created by entering below data:

- a **Name** for the invoice schedule
- a **Description** if needed
- the **Invoice Frequency** which defines how often sales invoices are going to be issued. The values allowed are:
  - **Daily** - a daily invoice schedule does not require any additional setup as it implies a daily generation of sales invoices.
  - **Monthly** or **Twice Monthly** - a monthly or twice monthly invoice schedule requires to enter additional data such as:
    - **Day of the Month** - this is the day when the invoice is generated, by example: 1st February.
    - **Invoice Cut-Off Day** - this is the last day for including the orders to be invoiced, by example: 31st January
  - **Weekly** - a weekly invoice schedule requires to enter additional data such as:
    - **Day of the Week** - when the invoice is going to be generated, by example: Saturday
    - **Day off the Week Cut-Off** - this is the last day of the week for including the orders to be invoiced, by example: Friday.

The process "**Generate Invoices**" takes into account both:

- the "**Invoice Terms**",  
  to learn more about "Invoice Terms" visit "Master Data Management // Business Partner // Customer tab".
- as well as the **"Invoice Schedule"**

agreed and therefore assigned to each customer.

To learn more about this process, visit "Sales Management // Transactions".

#### Title

:material-menu: `Application` > `Master Data Management` > `Business Partner Setup` > `Title`

##### Overview

Title window allows the user to set up business partner titles such as Mr or Madame to be used while contacting business partners.

The same applies to any type of "Contacts" entered in Etendo.

This is an "Advanced Feature". To be reviewed, as I do not see where Titles can be assigned to business partners and contacts.

##### Title

There are many titles to use while contacting business partners of any type as well as contacts.

![](https://docs.etendo.software/latest/assets/drive/gZHYP7ZHyy6V6WbHltJU8h76GrjkhZX8GTD5xnejWTe8gkLjvlcS9hWiNn8l1NdakL9w5BX7btruUJB4krE5jnDGuSzJd4HTEChxeL7JKXNfUqttcv8_KlpV0sUs27nyb0BW2SjTMbBu4Dd7JQ.png)

Once the required titles have been properly entered and configured, you can link them to the corresponding business Partner "Contact/s" in the Business Partner window.

##### Translation

Business partner titles can be translated to any language required.

The way to get that is as simple as:

- select first the language required
- and then enter the title name translated into that language.

#### Payment Term

:material-menu: `Application` > `Master Data Management` > `Business Partner Setup` > `Payment Term`

##### Overview

A payment term specifies the period allowed to pay off an amount due.

A vendor or a customer may demand a deferred payment period of 30 days or may even demand to partially pay their debts or collect in two or more deferred periods.

Therefore "Payment Terms" will generate a list of scheduled payment/s against an invoice, each payment/s will have a due date and a due or expected amount to be paid.

In other words, each payment term line and/or header is a different scheduled payment against an invoice.

The way it works is:

1.  Payment terms must be first properly created and configured as described in this section.
2.  Then payment terms must be linked to each business partner as described in the "Master Data Management // Business Partner" section.
3.  Finally, every time an invoice is booked for that business partner the payment terms setup by default will be applied and therefore used for the creation of the corresponding Invoice "Payment In/Out Plan".  
    A payment in/out plan lists as many scheduled payments against an invoice as due dates configured in the payment term associated with that invoice.

##### Header

Payment Term window allows the user to create and configure the payment terms to be linked to the business partners.

![](https://docs.etendo.software/latest/assets/drive/Hbh0E3N6Stf3wHCPcTc9GOj6Er8So-o0y49I-7c-G8MuPjkbnJphTN9worhzR1U9oMFyxPfXLMu7uwo4_EFRuJKOlNtM_199vb43qX9IasL8IqkalNo8C42CQddbjwQ8bZ3EqQAxGLFOiiLq2w.png)

As shown in the screen above a payment term which only has a deferred period such as "100% in 120 days", can be created by entering below data in the payment term header window:

- an **"Offset Month Due"** which is the length of the payment period agreed in months, by example "4" as four months.
- or an **"Overdue Payment Days Rule"** which is also the length of the payment period agreed but in days, by example "120" as one hundred and twenty days.
- **Fixed Due Date** flag allows you to enter a fixed maturity payment date, such as 20th of each month, by example.
- **Next Business Day** flag allows you to set as payment date not exactly the corresponding due date but the next business day, this helps avoid due dates calculation over the weekend.
- **Overdue Payment Day Rule** allows you to enter a fixed payment day.

It is important to remark that in the case of defining a payment term split into more than one deferred period such as "50% in 30 days and 50% in 60 days", the second one (or the latest one in case of more than 2 deferred periods) must be setup in the header not in the lines as shown in the image below:

![](https://docs.etendo.software/latest/assets/drive/WiK0QfJlcL1hhV_wm--ADnkVzNO8_O857PO7qGn1hV_3-1vz-WZCWM4DB2HPzQAaDhRNtHM8LE2ZgsVjUZW-A1udQ4Lq6BDpsbztFPRTv_S0t2mUPFLdaJsE_KB9TYOeGbo0xjlDuYBbDG1jiw.png)

##### Translation

Payment Terms can be translated to the language required.

The way to get that is as simple as:

- selecting first the language required
- and then entering the payment term name translated into that language.

##### Lines

It is possible to split payment terms into more than just one payment term line.

The information you can enter for each payment term line is:

- **Percentage Due** - or the percentage of the due amount to be paid each time or for each payment term line.
  - Etendo first shows a "100.00 %". That value can always be changed as needed for the lines.
  - Etendo sums up the percentage enter for each payment term line
  - therefore the remaining % up to 100.00%" is the one which will apply to the very last payment term set up in the header.
- **Offset Month Due** - or the length of the deferred period in months
- **Overdue Payment Days Rule** - or the length of the deferred period in days
- **Fixed Due Date** - this one allows you to enter a fixed maturity payment date such as 20th of each month.
- **Payment Method** - you can get that a payment term line uses a specific payment method which would overwrite the overall one used at invoice level.
- **Rest** - this flag implies that the due amount calculated is not the total amount of the invoice but the total amount of the invoice decreased by the previous due amount
  - therefore the very last due amount will just be the remaining amount.
- **Exclude Tax** - if a payment term line is marked as "exclude tax" the corresponding schedule payment will not include taxes.
  - that time the amount due is the \[total net due amount \* percentage due\]
  - those taxes will be taken into account in the very last payment together with the remaining due amount including taxes.
- **Fixed Week Day** - a fixed day of the week can be selected to get that calculated due dates matches exactly that day of the week.
- **Next Business Day** - allows you to set as payment date not exactly the due date but the next business day.

#### Return Reasons

:material-menu: `Application` > `Master Data Management` > `Business Partner Setup` > `Return Reasons`

##### Overview

In this window you can configure different reasons because either you return goods or the customer returns goods. This is the reason why these values are used in Return to Vendor and Return from Customer windows

##### Return Reasons

This window is in Application||Master Data Management||Business Partner Setup||Return Reasons

![](https://docs.etendo.software/latest/assets/drive/EzeqfjlMA4oiTgUiCE4PQ55leA117l1-VAHRWpjrdBf9Xu78XqC37OMUN3o-VwsC3hzzOmm1zE-xHSJYs5z_7cplRZfNhWZs_zszBRwRfyLgaeaguly1pXDSeej1LpjJ8UIJbgmtpyqyldKCXw.png)

Fields:

- **Return from customer**: When this flag is marked, the value will be available in the window Return from Customer window
- **Return to vendor**: When this flag is marked, the value will be available in the window Return to vendor window

#### Volume Discount

:material-menu: `Application` > `Master Data Management` > `Business Partner Setup` > `Volume Discount`

##### Overview

Volume discounts are discounts which apply after getting a certain volume of sales of specific products or product groups.

Volume discounts are incentives intended to encourage the purchase of goods in greater quantities. This incentive is normally offered to pass on some of the economic efficiencies gained through larger orders, to improve customer relations, and to increase total volume of sales.

##### Volume Discounts

Volume Discount window allows the user to create and properly configure volume discounts related to specific products and/or product groups, which are later on assigned to selected business partners.

![](https://docs.etendo.software/latest/assets/drive/g1bbTT-LAss3Ji167-5259AeMmavJ1HccPLrLUC5l5wjx-iHjnU027a0on1_mjXa4h9lQfVwD9iTKjgQpexYx80NLIrTsNYpbtFO5bzduuJAGE80BoVL2OO5LWRKPweoqPvDlAdg0uFcGnriPA.png)

As shown in the image above, a volume discount can be created by just entering below data in the "Volume Discount" header window:

- the "**Name**" of the volume discount
- the "**Currency**"
- the "**Included Products**" to which the volume discount will apply. Available options are:
  - Only those defined - which means applicable to all the products defined in the "Product" tab below.
  - or All excluding defined - which means all products but the ones defined in the "Product" tab below.
- the "**Included Product Categories**" to which the volume discount will apply. Available options are:
  - Only those defined - which means applicable to all the product categories defined in the "Product Category" tab below.
  - or All excluding defined - which means all product groups but the ones defined in the "Product Category" tab below.
- **Scaled** - A volume discount can be scaled which means that it is possible to define a set of amount ranges having a different discount. To learn more, visit the "Volume Discount Parameters" tab below.

##### Product Category

A volume discount can be configured for a set of product categories or can be configured for all product categories but for a set of them.

Therefore, and depending on the criteria taken, you could select here the products to either include or exclude of a given volume discount.

##### Product

A volume discount can be configured for a set of products or can be configured for all products but a set of them.

Therefore, and depending on the criteria taken, you could select here the product groups to either get included or excluded of a given volume discount.

##### Volume Discount Parameters

Volume discount parameters are a discount % as well as the minimum amount up to which the discount % is applied.

Besides, it is also possible to configure not just a minimum amount up to which a given discount % will apply, but a set of amount ranges to which a different discount % will apply.

As an example, you could configure a volume discount which applies:

- a 2% to the amount range =0,00 to 9,999.99
- a 5% to the amount range = 10,000.00 to 24,999.99
- and a 10% to a minimum amount up to 25,000.00

##### Business Partners

Volume Discounts can be assigned to selected business partners within a given time period.

You can also get a volume discount applied to a selected business partner starting from a given "Valid From Date".

Regardless volume discount makes more sense for "Sales Transaction", it is also possible to create and configure volume discounts to be applied to selected suppliers or vendors by:

- removing the "Sales Transactions" flag
- and by removing the filter "Customer" while selecting business partners in the business partner selector.

#### Basic Discount

:material-menu: `Application` > `Master Data Management` > `Business Partner Setup` > `Basic Discount`

A Basic Discount is a deduction from the total amount of an order or an invoice.

##### Overview

Discounts of this type means a sum of the total order / invoice discount amounts, excluding taxes per each tax rate.

Discounts tab can be found in the Purchase & Sales Order / Invoice windows and allows the user to add discounts manually or to review the ones automatically applied by Etendo based on the Business Partner Discount tab configuration.

![](https://docs.etendo.software/latest/assets/drive/G7GmkLbSq2r0kuQXVluq9Gle5khzHQbG0d1QvHtMBGM5WamIJWzmRqqUaFuQ5Or4N6IEPltXrTgJsaI4DhDEG6it6WKTfkin8tRip2JqNW2TKa2e7fip7OK9gwUNLlbfTCXPAv1UOfSu2wVX-A.png)

Discounts

- When an order or an invoice is in _Draft_ status, the total amounts are the totals amounts including tax, but excluding discounts.
- Once the order/invoice is _Processed_, Etendo calculates the monetary value of the corresponding discounts and shows them as new order/invoice lines.
  - Discount lines have no product nor account but the discount product (see below).
  - Besides, Etendo creates as many new invoice lines as discounts included in the invoice as well as tax rates (%).
  - Discount lines have an ordered quantity equal to "1" and a Net Unit Price equal to the calculated discount amount with an opposite sign to the invoice amount (normally negative) in order to reduce it.
- Finally, discounts can be calculated in cascade.
  - Cascade calculation implies that the first discount is applied to the total net amount and the second discount is applied to the total net amount already decreased by the first discount amount, and so on. Configured in the Business Partner Discount tab.

**Example 1. Purchase invoice containing just one tax rate:**

- Let us imagine a purchase invoice containing two invoice lines for a net line amount of _1,000.00_ each.
- A _18%_ tax rate applies to both purchase order lines.
- There is a _10%_ Discount assigned to the supplier, therefore that discount is shown in the Discounts tab.
- Once above purchase invoice is booked:
  - Etendo shows just one new line with below information:
    - **Product** named _Discount 10%_ which is the one created and linked to the discount.
    - **Invoiced Quantity** equals to _1_.
    - **Net Unit price** equal to the applicable discount amount, which in our example is _\-200_ (10% of the total net amount _2,000.00_).

**Example 2. Purchase invoice containing two different tax rates:**

- Let us imagine a purchase invoice containing two invoice lines for a net line amount of _1,000.00_ each.
- A _18%_ tax rate applies to the first purchase invoice line, and an _8%_ tax rate applies to the second one.
- There is a _5%_ Discount assigned to the supplier, therefore that discount is shown in the **Discounts** tab.
- Once above purchase invoice is booked:
  - Etendo shows two new lines, each of them with below information:
    - **Product** named _Discount 5%_ which is the one created and linked to the "Discount".
    - **Invoiced Quantity** equals to _1_.
    - **Net Unit Price** equals the applicable discount amount, which in our example is _\-50_ (_5%_ of the total net amount at a given tax rate _1,000.00_).

##### Basic Discount

A total discount can be created and configured by entering a discount name, a discount product and a discount %.

![](https://docs.etendo.software/latest/assets/drive/DY-WYecWhUy0pS3Vt255iFAJmuQspg8xhaQ-_l6mt7aoBrp-igyJbmacjFzPbH6BSh7OEw6uLZgJPBDxOtcvd96_QLfGJmSTt1pSkUUxXcvxuvdDbb6hGps_1G6qR1JLiYVSTCrAtuw-tug3fA.png)

Fields to note:

- Previously created Product you could name the same as the discount name. That product is the one to be filled in the new orders / invoice line/s to manage this type of discounts (see above).

#### Salary Category

:material-menu: `Application` > `Master Data Management` > `Business Partner Setup` > `Salary Category`

##### Overview

Create salary categories to be applied to your employees/workers.

The salary category and related cost is used in the **Production** module for the calculation of the cost of a product that is the result of the production process.

All operations in the production process consist of activities. These activities have a cost center defined and how much time of that cost center is used. Each cost center has the employees that are part of the cost center, defined by salary category in the employee tab. The employee is set up as an operator in the employee tab of the business partner. Apart from the employee cost, also the machines cost used in the cost center and any indirect cost, such as electricity, is set up. Based on these components, a cost per hour related to the cost center can be defined. Based on the use of the cost center during production, a cost per produced unit is added to the total cost of the unit.

The salary category and related cost is also used in the **Project and Service management** module to calculate the profitability of a project. The cost related to a salary category for Project Management has to be defined with the 'per hour' unit of measure.

The setup of the salary category of the employee is done in the \[Cost Salary Category\] tab underneath the \[Employee\] tab of the Business Partner

##### Salary Category

It defines costs and date ranges for a specified salary category.

For the use of the salary category for the cost calculation in the Production and Project and Service management module, the cost applied checkbox is selected.

##### Cost

It creates a salary category.

**Cost UOM**: for Project and Service Management, the salary is set up per Hour, so that when the time expenses are entered, the cost of that time can be added to the profitability report.

#### Rappel Configurations

:material-menu: `Application` > `Master Data Management` > `Business Partner Setup` > `Rappel Configurations`

!!! info
    To be able to include this functionality, the Advanced Rappels module of the Sales Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Sales Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=22CF01FC620140A6AA92CF550EB8DA36){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Sales Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/sales-extensions/release-notes.md).

Rappels are discounts based on the volume of consumption of a business partner in a given period of time. This functionality allows the user to configure and grant rappels to business partners.

##### Requirements

Before the user is able to use this functionality, it is necessary to configure a new document sequence and a new document type to be used for Rappels.

###### Document sequence

A specific document sequence for rappels is necessary to distinguish them from other transactions.
In this window, create a new record and fill the corresponding fields:

- **Organization**: The name of the corresponding organization.
- **Name**: The name of the document sequence, in this case, “Rappel sequence”
- **Active**: Yes
- **Auto Numbering**: Yes
- **Increment by**: 1
- **Next assigned number**: 1,000,000
- **Prefix**: It is optional and, in this case, “RAP-” is entered to indicate that these transactions are Rappels.

Save the record and the document sequence for rappels is available.

![document_sequence_new.png](https://docs.etendo.software/latest/assets/legacy/document_sequence_new.png)

!!! info
    For more information, visit [Document Sequence](https://docs.etendo.software/latest/financial-management/accounting/setup.md#document-sequence)

###### Document type

A specific document type is necessary for rappels.
In this window, create a new record and fill the corresponding fields:

- **Organization**: The name of the corresponding organization
- **Name**: The name of the document type, in this case, “Rappel”
- **G/L Category**: In this case, select “AR invoice”
- **Print text**: In this case, “Rappel”
- **Document Category**: “AR Invoice”
- **Sequenced Document**: Yes
- **Document Sequence**: In this case, “Rappel sequence”
- **Table**: C_invoice
- **Sales Transaction**: Yes
- **Is rappel**: Yes

Save the record and the document type for rappels is available.
After saving it, it is necessary to select “rappel” in the field “Document Cancelled” and save again.

![document_type_new.png](https://docs.etendo.software/latest/assets/legacy/document_type_new.png)


!!! warning
    For each organization, it is possible to configure only one "rappel" document type.

!!! info
    For more information, visit [Document Type](https://docs.etendo.software/latest/financial-management/accounting/setup.md#document-type)

##### Rappel Configurations

In this window, the user can configure all the necessary aspects to grant rappels to certain business partners.

![rappel_configuration_window_new.png](https://docs.etendo.software/latest/assets/legacy/rappel_configuration_window_new.png)

###### Header

This window contains the general data of the configuration. The relevant fields are described below:

- **Name**: It indicates the name assigned to the rappel.
- **Currency**: The user can select the currency of the rappel.
- **Include Products**: The user can define if the selected products are to be included or excluded (“all excluding defined” or “only those defined”).
- **Include Product categories**: The user can define if the selected product categories are to be included or excluded (“all excluding defined” or “only those defined”).
- **Include Brands**: The user can select certain brands to be included or excluded (“all excluding defined” or “only those defined”).
- **Include Locations**: The user can select certain locations to be included or excluded (“all excluding defined” or “only those defined”).
- **Warehouse**: It provides information about the warehouse of the products. By default, this field is empty. This is the case except for invoices created from goods shipments.
- **Periodicity**: It provides information about the suggested periodicity of the rappel (“annual”, “biannual”, “monthly” or “quarterly”).
- **Type of Rappel**: The user can select the type of rappel, it can be according to the amount of the consumption or the quantity of products consumed (“amount” or “quantity”).

Once this information is completed, the user is able to save the configuration and use the buttons in the window to configure specific aspects of each rappel.

###### Buttons

At the top of this window, four different buttons can be found.

- **Add product categories**: With this button, the user can select one or more product categories and add them to the rappel.
- **Add products**: With this button, the user can add one or more products to the rappel.
- **Add partners**: With this button, the user can add one or more partners to the rappel, and a date from and a date to must be assigned to determine the validity period for the created rappel.
- **Copy rappel**: With this button, the user can copy the characteristics of an existing rappel to the selected rappel.

###### Tabs

- **Product Category**: In this tab, product categories assigned to the Rappel are shown. It is also possible to assign new categories from this tab.
- **Product**: In this tab, products assigned to the Rappel are shown. It is also possible to assign new products from this tab.
- **appel Parameters**: In this tab, the discount percentage, minimum and maximum amounts can be assigned to the rappel.
- **Business Partners**: In this tab, the business partner to which the Rappel applies is shown. Here, it is possible to select the “from date” and “to date”. This tab also contains a sub tab called “B. Partners Location”, where the location of the business partner is indicated.
- **Brand**: In this tab, the brands of the products to which the Rappel applies or not can be selected.

Remember that the options selected in the tabs “Product Category”,“Product”, and “Brand” must follow a certain logic: the priority is the option selected in the tab “Product Category”. This means that more specific filters apply to the included or excluded product categories.

When selecting the option “only those defined” in the fields “include product categories” and “include products” of the header, if in the “product category” tab the user selects “water”, and in the “product” tab the user selects “white wine”, the rappel will only include the products belonging to the category “water” and not “white wine”.
>
!!! warning
    When selecting the option “All excluding defined” in the “Include product categories” field and the option “Only those defined” in the “include products” field, if in the “product category” tab the user selects “water”, and in the “product” tab the user selects “sparkling water”, the rappel will not include the product “sparkling water” despite what is defined in the “product” tab, since the priority is in the defined “product category”.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Product Setup
## Article Path: /User Guide/Etendo Classic/Basic Features/Master Data Management/Product Setup
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/product-setup
## Article Content: 
#### Product Characteristic

:material-menu: `Application` > `Master Data Management` > `Product Setup` > `Product Characteristic`

##### Overview

Product Characteristic can be defined to complete the definition of a product using variants.

_Product Characteristics_ are attributes that can be added to the product definition to extend the description of each product. Examples of Characteristics are _Size_, _Color_, _Quality_, _Shape_ or _Weight_. These characteristics can be used later to filter or search products.

Once the definition of the characteristics is created, these can be assigned to a product and then create other products or SKU based on this **Generic Product** and its characteristics. This is a generic product where common attributes like tax or prices are defined. By default, products inherit all the attributes of the _Generic Product_ such as taxes, prices, etc. They can be overridden on each product. Generic products cannot be purchased or sold or used in any document.

For example, the Generic product _Shirts Summer Season 2013 by My Provider_ implements the Characteristics _Size_ and _Color_ as variants. This _Generic Product_ will have as Product Variant each combination of Color and Size.

##### Characteristic

**Characteristic Definition**

Field to take into account:

- **Variant**: When it is marked, it will explode/create combinations with its values. If it is not marked, it will not create combinations with other characteristics. For example:
  - Characteristic Color: Variant marked with value Blue and White
  - Characteristic Size: Variant marked with value M and L
  - Characteristic Fashion line: Variant is not marked with value Sport, Classic, Vintage
- **Explode Configuration Tab**: Flag available on Variant Characteristics. When it is checked, the values of the selected variant characteristic are automatically inserted in the _Characteristic Configuration_ tab when the variant is assigned to a generic product. If it is not checked, the values must be added manually.

These three characteristics are assigned to the product in this way:

- Color: Blue, White
- Size: M,L
- Fashion line: Sport

It will create four variants/products and for all of them with the characteristic Sport. We can say that a characteristic that is not a variant is like a tag that is added to each new product.

![](https://docs.etendo.software/latest/assets/drive/cdjlrR76mBK3wKqB3XQ6bNRK_KDGSQ0EVVtc3t_SAYwPU_JW9f9aTb3RyiWfBiICaOuta8k49CiQN8FZ0--XfpKZ22cROG1FySev_r2sTdzSxoo_aegpn6sseo2efzfQXglibd6WknWTX05Ymg.png)

##### Value

Each of the values of a characteristic.

![](https://docs.etendo.software/latest/assets/drive/T08VPSpQt04CjFcMqUGY5stqRukgrwkmbvB4vvZkbroD_H2vXSgKGlb5E8R8mFz7PPfOlxRatH0AQeNQ9iF0ciK6puVW5M7dn8PvXC25R8vcSfoxYDilZ3r8n985hnZN3evM1FuRxdMlUQdBpg.png)

Fields to be into account:

- Name: Value
- Code: To be used later when creating the variant. It will put in the _Search Key_ field
- Summary level: It is allowed to create a tree structure. For example, if the characteristic is color and for the same value(i.e Green) there are different references depending on the supplier:

![](https://docs.etendo.software/latest/assets/drive/30qiD3TYly1aHtadA8da6N1on2NsS-24GPTMc4awiD1PJp8YlesaDaIZWxHD6GroXrmmQqlO009SZ21glwlNUwhVU3AWsNKyuyy-D-P0sypHrPr6pbXSI6Tzxn2WAF5dVFffLzWR_KFKSynaSA.png)

###### Button Add Products

The " Add Products" button is shown when a product characteristic value is NOT a "Variant", therefore it can be assigned to any product.

![](https://docs.etendo.software/latest/assets/drive/IzWGMoCZ3c1nUm2OmvW-MWssK6KzQ1vdmYkLEjwqtOs4aLa_KnRpnZy-kA9YruqEuqstoyo7te-LG9nF3DVjHt7G08DzacTuATqMXW9SeVJ94VywvnPyTEywXyS9h4OaYv2BCAVbb0jy5eCD4Q.png)

It does not update current values. That is why the button only shows products where the characteristic is not assigned to.

- Scenario 1:
  - Product A has the characteristic Color (defined as variant) with values White, Pink, Blue and Black
  - After creating the product variants, the user creates the non-variant characteristic Fashion line: Women, Men
  - Non-variant characteristic can be assigned to the product in Product window by using Update Characteristics process button.
- Scenario 2:
  - Not variant product characteristic is created in Product Characteristic window as "Variant" = No.
  - Once a product characteristic has been entered in "Value" tab, a process button "Add Products" is shown.
  - "Add Products" button opens a pick/execute window where any product or set of products can be related to that product characteristic value.

##### Subset

A subset is a collection of values of a Product Characteristic.

Subset feature is a powerful functionality that allows the user to share the same characteristics for different purposes. For example, lots of colors and sizes can be created for different products:

- Color:
  - Green
  - Gray
  - White
  - Blue
  - Yellow
  - Red
  - Orange

But finally you have different products, for example t-shirts and pants:Subsets:

- Pants
  - Green
  - White
  - Gray
  - Blue
- T-shirts
  - Green
  - White
  - Orange
  - Blue

The aim of this feature is to avoid having duplicate values (blue, blue, green, green) because of different purposes. With this subset when selecting a product that is a pant, for example, instead of selecting the characteristic _Color_ you select the subset _Pants_. This way, instead of retrieving seven values, it will retrieve just four. Another advantage of doing this is when searching for variants instead of having blue two times (and you would not know if the blue is for pants or t-shirts), you will have blue one time. So when searching for variants which have the characteristics _Blue,_ the system will retrieve pants and t-shirts.

##### Subset Value

Each of the values of the product characteristic assigned to the subset.

![](https://docs.etendo.software/latest/assets/drive/8qzF_YI5MuZAL78CRMbdJSNZ8du0swgIEukOgIlHQ_8LTQr1rvbhX2RtOoq9CkprpZaV-Y2nIJQZH40wX_ipyG5uIjKf7bGbA40ZwGQc_U2y1mUFllwYkid1BrbpCRn1ia5FpvwSSqGJCjI5nA.png)

- Sequence number: To order the way of seeing the values
- Name: Value. Notice that only values from the characteristic can be selected.
- Code: If it is filled, it will overwrite the code setup in the characteristic

##### Filtering

Fields based on columns whose reference is Product Characteristics can be filtered in grid assisted with a popup where the tree of available characteristics is displayed.

![](https://docs.etendo.software/latest/assets/drive/c1KyrMrnAS9Ci-UjCi9mCzmMjtHi1layEkYHZWFvgdMoGTGyDW73G28ts-enKErw0xV02TJilqP4GYtWnvWU2VTw1-3CaLmwK_MkXzZd0ECboTr-10RBLFqT4vz4IrFIWZjpvW4kySrV734lkQ.png)

!!! info
    The characteristics available in this popup are limited to the ones applicable to data filtered in the grid where it is displayed with the current filtering criteria for the rest of the fields.

##### Configuration

Product Characteristics is ready to be used out of the box.

Anyway, some new features can be displayed as well with some simple configuration options (these changes need to be exported to the template).

###### Improving product selector

You can select between the different product characteristics using the product selector. There you have a column showing product characteristics description (See image).

![](https://docs.etendo.software/latest/assets/drive/HuSSbpe8wKiBb3z_zy1u3J3Vpade6eOyRQSP28xLwU7-oWoIvIj3RtRDxCG73vVdQMRuN6AaJx51b0AZxqTaO7fJrqFbhd9mdRlXX7W99lFC6ZAVVV6GaRLGesNJZ-6drk9EVJnsd3fqCtsmUQ.png)

That is not the case when selecting from the suggestion box. There, just product names are used. Taking into account that the product with the characteristics share the name, it becomes impossible to distinguish one from another (See image).

![](https://docs.etendo.software/latest/assets/drive/HpBpfokkfU8331lBrHV76V0Jx-n2fECiBH5Fi7-nTB8eghX3S9JBXgt7SNj3xbuJJJQ6pXfZ_k5nHqbcfAos8JUfAIDT-KcidMmxmYXh409vMtUHljjiqgokBwJwBLzJSYR0VposKg3MH2E9Iw.png)

User experience in this case would be completely different if products could be identified from the suggestion box (See image).

![](https://docs.etendo.software/latest/assets/drive/toMnI_Io2di0EJVl4hcg8FejMI1Mji4mE4WwDzzA6F1xQtwVYVnCfXq63Y_irQ-Kd3kL6oBVE9oQ9AYk6OQ3bPgbY3wOivZK6LMsMRCJfpkydJzFTYSvMZt2wLpp-NrFIovQM4NEX0T_T3Ki4Q.png)

This can be easily improved by enabling some options of the selector.

Follow these simple steps to enable this configuration, and please do not forget to export those changes to your template.

- Log as System Administrator
- Go To Tables and Columns and select C_OrderLine
- Go to lines tab and select product (M_Product_ID)
- Navigate to selector (see image)

![](https://docs.etendo.software/latest/assets/drive/N1WJZnz1jvs6oMx3ujSTNn9w6CBuKf1fzCFDRc8f8utnUhODwr8DIg8sz4kePzN-GQEClRIVfmV976AfLmAdd4lgmTLnrOt17IsBXRVvUwzw3C8mKGtsK3shjz_WhIhUvDTyJ5nzzTQ9tXpmIQ.png)

- Go to Defined Selector tab and then to Defined Selector field tab and select Characteristics Description field.
- Edit and flag "Search in suggestion box" and "Show in Picklist" check boxes (See image)

![](https://docs.etendo.software/latest/assets/drive/VeWmotz-vCwIybOp0GCuBP7Bix5SLKwHh68bX2NpVZV1R4Co_k8pAfTI9dLENbG2XPf4RJ1RDg3cro74LxzywXIsLN8RkmjNvDXaDYrkXEazCJRZg3mkZt0oxNuBCGluasJb_00MRnN8KP-0ug.png)

- Last point would be to export these changes to the template. This is really important to avoid problems in future update processes and to keep these changes after the update.

#### Update Product Characteristics Description

:material-menu: `Application` > `Master Data Management` > `Product Setup` > `Update Product Characteristics Description`

##### Overview

Every variant has its product _Characteristic Description_ and this field is calculated automatically when:

- Variants are created
- When the value of a characteristic is change, for example from _Blue_ to _Hard Blue_

For example, if the characteristics of a variant are Color and Size and the values are Blue and XL the result of the description would be: _Color: Blue, Size: XL_

If later on you change Blue for Hard Blue, the new description would be _Color: Hard Blue, Size: XL_

In all of these scenarios, the _Characteristic Description_ is updated without the need of coming to this process.

This process should be used just in some special cases:

- When the name of the Characteristic is changed, for example from Color to Tint
- When through the database characteristics or values are changed

#### Unit of Measure

:material-menu: `Application` > `Master Data Management` > `Product Setup` > `Unit of Measure`

##### Overview

A unit of measure is a standard unit or combination of units to be used alongside the quantity of a product.

There are many units of measure which can be used to count product quantity on hand, or to purchase or sell a product.

Units of measure can also be used for measuring time. There are products such as services or resources which must be measured that way.

Below, you can find a list of the unit of measure you could setup in Etendo:

- **Unit**
- **Box**
- **Hour**
- **Kilogram**
- **KWh** (Kilowatt hour)
- **Litre**
- **Pallet**
- **Pack**
- etc.

##### Unit of Measure

Products of any type are managed in non-monetary units of measure.

![](https://docs.etendo.software/latest/assets/drive/Iw-lfQm_nO_kWlUX4lMKyP1PLsGc2gK0pR-gdpvkELwuNVzmGdIs8uFhBLSMbGk9vlooN8WI_HV4cppv96lpvgGE6jy40utYqvHjJZI8RVyNSbAA0USOej4f1ZcyYslRe9mH3rMAwQhd31dvmw.png)

As shown in the image above, a non-monetary unit of measure can be created in Etendo by filling in below relevant data:

- the **EDI Code**, if any.
- the **UOM Name**
- the **Standard Precision** to be used while rounding calculated quantities of the products having that unit of measure
- the **Costing Precision** to be used while rounding calculated cost of the products having that unit of measure.
- and the **Symbol** or commonly used unit of measure abbreviation

##### Translation

Units of Measure can be translated to any language required.

The way to get that is as simple as:

- select first the language required
- and then enter the unit of measure translated into that language.

##### Conversion

Edit the conversion rate of one unit of measure into another one.

#### Product Category

:material-menu: `Application` > `Master Data Management` > `Product Setup` > `Product Category`

##### Overview

Similar products can be grouped into different categories, which must be created with the aim of helping their management and analysis.

You may want to group similar products within the same category in order to get procurement and sales information summarized by each category. This is possible due to the fact that "Product Group" is one of the "Dimensions" of Purchase and Sales Reports.

To learn more, visit Procurement Analysis Tools and Sales Analysis Tools.

Besides, each product category allows the user to set up a different set of ledger accounts to be used while posting product related transactions such as purchase and sales invoices.

##### Product Category

Product category window allows the user to create and configure every product group your company may need.

![](https://docs.etendo.software/latest/assets/drive/G_gS1HUEVZE4UMppe7SkmQXsZazw9xWDG8mQE-m9fmGzYn_Bwn8DdEE3m1I81RBebq9f7kD2NMrn6QhLMNAMNAu4_SAgrFv5Ag0h2bJLVb0K9ows2xpaDQLz3mtHsAceVkrMhPUcYBmNdZf_wg.png)

As shown in the image above, the creation of a product category requires entering below listed information for each category:

- a **Search Key** or short name which helps to easily find the category
- a **Name**
- a **Description**
- and the **Summary Level** flag which helps to arrange product categories into a hierarchical structure.

Product categories can be arranged into a hierarchical structure, which can be later on exploited by other reports or processes. For more information about how to work with trees, visit the Tree structure section.

##### Accounting

Each product category allows the user to configure a different set of ledger accounts.

![](https://docs.etendo.software/latest/assets/drive/Ueek0FRoMRRlbjH2kzHNqRc-x6COVWDiR7oOOvRG3Z5zpeDyPJ1qV_cTafjT_eENf56h-1M7L3L4RkifbsuhC9-MGUexELBuzvaQwZkcpsYVT8sKuJAbcA0z28vzDPj7Lz9JVBFoFNRCLwKe9g.png)

There is a set of product related accounts which needs to be properly set up for the organization's general ledger configuration.

The "Copy Accounts" process of the Defaults tab of the General Ledger Configuration screen allows to automatically populate at least the mandatory ones shown in the image above.

The accounts automatically defaulted by Etendo can always be changed if required.

The whole list of product related accounts is:

- **Product Assets**: this field stores the default account to be used to record inventory transactions such as:
  - Inventory Counts
  - Inventory Movements
  - and Goods Receipt

This account is typically an asset account.

- **Product Expense**: this field stores the default account to be used to record product purchase expenses.  
  This account is typically an expense account.
- **Product Deferred Expense**: this field stores the default account to be used to record deferred expenses.  
  This account is typically an asset account.
- **Product Revenue**: this field stores the default account to be used to record product sales revenues.  
  This account is typically a revenue account.
- **Product Deferred Revenue**: this field stores the default account to be used to record deferred revenues.  
  This account is typically a liability account.
- **Product COGS**: this field stores the default account to be used to record the cost of the goods sold.  
  This account is typically an expense account.
- **Product Revenue Return**: this field stores the default account to be used to record sales returns.  
  This account is typically a revenue account.
- **Product COGS Return**: this field stores the default account to be used to record return material receipts.  
  This account is typically an expense account.
- **Invoice Price Variance**: this field stores the default account to be used to record price differences between posted Goods Receipts and booked Purchase Invoices.  
  This account is typically an asset account.

!!! info
    The "Copy Accounts" action button allows the user to copy the accounts defaulted in this window to the Product Accounting tab.

##### Assigned Products

Assigned products is a view of all the products which belong to a product category.

As a side note, not real products such as discount products should belong to a specific product group, named by example "Others", as a way of keeping them isolated from the real ones.

To learn more about discount products, visit Discount.

##### Translation

It maintains translations of Product Categories to different languages.

#### Attribute

:material-menu: `Application` > `Master Data Management` > `Product Setup` > `Attribute`

##### Overview

Products can have an attribute or a set of attributes which makes them different to the rest.

An attribute is a feature of a product, such as color or size.

The capacity for managing product attributes allows a proper definition of the products and besides assure compliance with the tracking requirements imposed by the majority of industries.

Etendo allows managing product attributes by following below steps:

1.  Creation of every Product Attribute. An Attribute can be a unique identifier such as a Serial Number, or can have a predefined list of values such as blue, white and red colors.  
    To learn more, keep reading this section.
2.  Creation of Attribute Set/s which can contain just one attribute or mix a set of attributes.  
    To learn more, visit Attribute Set
3.  Set up the relationship between the product and the attribute set.  
    To learn more, visit Product

##### Attribute

Attribute window allows the user to create and edit attributes such as color or size to be assigned to attribute sets.

![](https://docs.etendo.software/latest/assets/drive/KgY7LbRbBSeTKiXl8B-P3rCchmCaJNIgLI3-PCgZZTgJrWVJdtXsYP7yRTR6tYNF3i_T6LtO8PMtzJ8FTiu1P5KtQvQD1SacDNeHwRbNWnGPzOPv9tZ56WT-Fo05Nkxt-unkwXF9BBe0ag8sbw.png)

As shown in the image above, an attribute can be easily defined by entering the relevant data below:

- the **Name** of the attribute
- a short **Description** if required
- If the attribute is unique for each instance of the product, for example a lot number or a serial number, select the **Instance Attribute** checkbox.
- **List** flag allows the user to state that the attribute has a predefined list of values to be entered in the "Attribute Value" tab.  
  To learn more, visit Attribute Value.
- **Mandatory** flag defines the attribute as mandatory, therefore it must always be specified for the product.

##### Attribute Value

An attribute can have several values or individual characteristics to be detailed for each attribute.

Above applies to attributes such as color or size.

Attribute Value tab allows the creation of as many attribute values as required for an attribute.

#### Attribute Set

:material-menu: `Application` > `Master Data Management` > `Product Setup` > `Attribute Set`

##### Overview

An attribute set can be defined by a single attribute or by a set of attributes to apply to specific products.

If **an attribute set** includes among others **an attribute which is unique for each instance of the product**, for example, a lot number or a serial number, this window is the place to define which **Lot Number Sequence** or **Serial Number Sequence** must apply to get that unique attribute.

The steps to follow are:

- **Creation of the Lot Number Sequence/s**. To learn how, visit Lot Number Sequence
- **Creation of the Serial Number Sequence/s**. To learn how, visit Serial Number Sequence
- **Set up the relationship between** the previously created **Lot/Serial Number Sequence/s** and the **Attribute Set**, in the Attribute Set window.  
  To learn how, keep reading this section.

##### Attribute Set

Attribute Set window allows creating as many combinations of attributes as required to define products with few or multiple characteristics.

![](https://docs.etendo.software/latest/assets/drive/eFfHmZoippBAg2UAyKfVODqUewZCKUFQwC-0lr71L_P1uTZIN8khQzaIzN7cPdDoP7ZrlW7RkGUjq24Y2SB3vwd4_zYLHPYxEDxttakbcdEVhUm_oIMyzQeLAByyByHFmOZYit4L2GHp0fHJgg.png)

As shown in the image above, an attribute set to be assigned to a specific product/s can contain:

- a **Name** of the attribute Set
- a brief **Description** if needed
- a **Lot** or unique identifier given to a particular quantity of that product.  
  If **Lot flag is checked,** a new field named "**Lot Control**" is shown for you to select the Lot Number Sequence to follow by the products linked to that particular attribute set.
- a **Serial No** or a unique identifier given to each unit of the product.  
  If **Serial No flag is checked,** a new field named "**Serial No Control**" is shown for you to select the Serial Number Sequence to follow by the products linked to that particular attribute set.
- an **Expiration Date** or date upon which product quality is guaranteed.  
  If **Expiration Date flag is checked,** a new field named "**Guaranteed Days**" is shown for you to enter the number of days a product can be guaranteed.
- finally, the flag "**Require At Least One Value**" implies that at least one attribute set value will be required in product related transactions.

##### Assigned Attribute

An attribute set can have a single or a set of attributes assigned.

![](https://docs.etendo.software/latest/assets/drive/JKPixcSV3hgLjW-UlwcYfpGHyrKD1pT39o4XAyHeltD26-0fx1Kn5wXESm5DPoJtrVMistsa0OaXEZKaYLcxAfOG--fJgVgcXZzDWVGvU5xemPX_SiOMMirw-aIuq17LxKfgKlQ0Q3w4q7N3nA.png)

As shown in the image above, an attribute set can have only one attribute, for example Color or as many attributes as required, for example Size, Lot Number and Serial Number.

The way to get that is just to select the previously created attributes in this tab.

You should take into account that:

- if one of the selected attributes is a "Lot" or a "Serial N?" type attribute, the corresponding Number Sequence must have been properly set up in the Attribute Set window.

#### Lot Number Sequence

:material-menu: `Application` > `Master Data Management` > `Product Setup` > `Lot Number Sequence`

##### Overview

A product attribute can be a Lot Number.

Some products require lot numbering to assure compliance with the tracking requirements imposed by the majority of industries, which implies that a given quantity of a product has always to be linked to a unique lot number.

##### Lot Control

A Lot Number is a unique number given to a particular quantity of a product, which can be defined to have a prefix or a suffix among other characteristics.

![](https://docs.etendo.software/latest/assets/drive/zxXMUjr6dqf-ED398clHXDSahfNlz0oql8RmrUh4LopzsnqQ-wFiN-dP8Ss4YSbnYNA5k8UA1wdTE8uYU0SflUrJjuxkcBqgLrjxAb2yVTvglixLgh4gLQpu4gu9dASMfFCVavnkQldZGOvGGQ.png)

A Lot Number Sequence can be setup:

- by defining the first number or **Starting Number** that will be used as Lot Number
- by specifying the value by which the Lot Number will be **incremented by**
- by defining which is the **Next Assigned Number** that will be used. Etendo updates the next assigned number value as the Lot Numbers are assigned.
- by entering a **Prefix** such as **Lot N?/** which easily helps to understand that the number in question is a lot number.
- by entering a **Suffix** such as **/2011** which helps to provide additional information if needed.

#### Serial Number Sequence

:material-menu: `Application` > `Master Data Management` > `Product Setup` > `Serial Number Sequence`

##### Overview

A product attribute can be a serial number.

Some products require serial numbering to assure compliance with the tracking requirements imposed by the majority of industries which implies that:

- each unit of a product has always to be linked to a unique serial number.

##### Number Control

A Serial Number is a unique number given to each unit of a product/item which can be defined to have a prefix or a suffix among other characteristics.

![](https://docs.etendo.software/latest/assets/drive/_I2P7xT_wcIiLPx2GnSTR3Ne4sqAemn-eWLFVQ1NKaTt_qHVVuQwKso1kczmCmlG6a3AyZeKI8iwolANuoRbYSd3RE0Fg5lmAIWc0kdvdjvPtgtD7cokdzHpLZ2yn3vrm9JM4nRAxYppGdOm8w.png)

A Serial Number Sequence can be setup:

- by defining the first number or **Starting Number** that will be used as Serial Number
- by specifying the value by which the Serial Number will be **incremented by**.  
  In the case of Serial Numbers it will always be "1".
- by defining which is the **Next Assigned Number** that will be used. Etendo updates the next assigned number value as the Serial Numbers are assigned.
- by entering a **Prefix** such as **Serial N?/** which easily helps to understand that the number in question is a serial number.
- by entering a **Suffix** such as **/2011** which helps to provide additional information if needed.

#### Brand

:material-menu: `Application` > `Master Data Management` > `Product Setup` > `Brand`

##### Overview

This window allows the user to enter brands associated with one product.
The brands are manufacturers or commercial names used by manufacturers to identify a product line.

##### Header

To use this functionality, select an organization and add a new brand in the corresponding fields. It is also possible to enter a description when necessary.

![](https://docs.etendo.software/latest/assets/drive/aZfc6Qanmv-C8prh4FgF0KT-ykE3xADBzz57qx01JIBzwouPawsewFcMRjpJ5sN5_kT2VTxnNlwcTCnEYDNswMyijThPC8K634MtikPrLKcmBqYSQ08OH6ZYPedFBlir-8rueg7FQgv1ykKgekY.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Pricing
## Article Path: /User Guide/Etendo Classic/Basic Features/Master Data Management/Pricing
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/pricing
## Article Content: 
#### Price List Schema

:material-menu: `Application` > `Master Data Management` > `Product Setup` > `Price List Schema`

##### Overview

A price list schema is a template used to automatically populate a new version of a price list.

Price List management is not an easy task to handle, mainly in competitive markets where the margins are very tight.

Nowadays, organizations have to deal with a huge variety of products, which have different prices depending on the season and other pricing variables.

Etendo manages prices through three pricing related concepts:

- the **Price List**
- the **Price List Schema**
- and the **Price List Version**

And it allows the creation of:

- **General** Sales and/or Purchase Price List
- **Specific** Price Lists for a specific supplier or customer, or a group of them.
- **Based on cost** Price list based on product cost

The way these concepts work in Etendo is described below:

1.  **Creation of Price List/s**:
    1.  A "Default Price List Schema", with no configuration at all, is created by default after creating an organization.
    2.  The "Default Price List Schema" is the schema to be used in the creation of the price lists which are NOT a "Price List Version".
    3.  The Price Lists linked to the "Default Price List Schema" might contain both the net list price and the net unit prices of the products.  
        To learn more, visit Price List.
    4.  The Price list/s created can be linked to the business partners as required.  
        To learn more, visit Business Partner
2.  **Creation of Price List Schema/s**:
    1.  New Price List Schema can be created as a way to configure a set of commercial rules to be applied to existing price lists.  
        To Learn how, keep reading.
3.  **Creation of Price List Version/s**:
    1.  A new version of an existing Price List is created as a combination of a base price list and a given "Price List Schema".  
        To learn more, visit Price List.
    2.  The Price list/s versions created can be linked to the business partners as required.  
        To learn more, visit Business Partner.

##### Header

Price list schema window supports the creation of as many price list schemas as required with the aim of obtaining an easy management of price lists and price list versions.

![](https://docs.etendo.software/latest/assets/drive/8dm__0RGCoicJS7A0HIQ2wiXDhVxmgxLG0KI3K3QcCW8LIHOvh-QaKXy12rE-WHLQkVlr476bjI-t7tX7Q877O_4-ek18q8CU8MGnz_tTNhFahwOAvn9co79yD-EKha4_NQvAfHwLOmGt0J49g.png)

As shown in the image below, the creation of a price list schema is as easy as to create it and give it a Name.

The set of price and discount rules which might apply to a set of product categories or specific products must be configured in the "Lines" tab.

##### Lines

Price list schema lines tab allows defining a set of price rules such as to apply a discount % to the net unit price of a given product category or specific product.

![](https://docs.etendo.software/latest/assets/drive/1xuN1UnuUBcuYhWnHvIFMpKJ-OufSVW9rM0t-Otml29IRjyIQ5gjF3gIHNu1BdwLNikv9n3_5XmZ3rxWMDvg6Ig80WHdzCkEQI2q4cLeQ4Cbl_W3KVnYszYbQHJffZumj85Y1Q1RJjd_bFOp7w.png)

First thing to notice is that, as shown in the image above, "Lines" tab is split into two sections:

- the first section allows the user to:
  - Inform Etendo about:
    - the "Business Partner" and/or
    - the "Product Category" and/or
    - the "Product"  
      to which the price/discount rules to be defined in the next section are going to apply.
- the second section allows the user to:
  - configure which price of the existing price list is going to be taken as "Base List Price" in the new price list version. The options available are:
    - **Net List Price** which is the price published in the price list
    - **Net Unit Price** which is the final price used in purchase and sales order/invoice lines
    - **Fixed Price**, as it is possible to configure that for the new price list version, therefore the net list price is equal to a given fixed price.
    - **Cost**, which is the price published in the price list, will be the product cost (costing tab in product window) and a margin.
    - **Fixed Price or Cost Based** combines the previous two options with the following condition:
      - If the fixed price is higher than the cost, then the defined fixed price is selected.
      - If the fixed price is lower than the cost, then the cost (plus the defined margin) is selected.
    - **Fixed Price or Cost plus Margin Based** combines fixed price and cost options with the following condition:
      - If the set fixed List/Unit price is higher than the current cost plus List/unit Price margin, the price list will be created with the fixed price.
      - If the set fixed List/Unit price is lower than the current cost plus List/Unit Price margin, then the price list will be created using the cost plus the margin.
  - configure which price of the existing price list is going to be taken as "Base Unit Price" in the new price list version. The options available are the same as above:
    - **Net List Price**
    - **Net Unit Price**
    - **Fixed Price**, as it is possible to configure that for the new price list version, the net unit price is equal than a given fixed price
    - **Cost**
    - **Fixed Price or Cost based**
    - **Fixed Price or Cost plus Margin Based**
  - configure the discounts if any to apply to the net unit price and/or to the net list price in the fields:
    - **List Price Discount %**
    - **Unit Price Discount %**
  - configure the margin on the product cost to apply to the net unit price and/or to the net list price in the fields:
    - **List Price Margin %**
    - **Unit Price Margin %**

Second thing to notice is that the set of price rules and/or discounts could be configured in a "hierarchical" way, that's line by line or applying the last valid price rule (non-hierarchical way).

!!! info
    The Enable Hierarchical Price List preference is available in order to select the desired behavior applying the price list rules.

Let us imagine that the rules which need to be part of a price list schema are:

- to apply a net unit price discount of 5% to the products which belong to a Product Category X.
- to apply a net unit price discount of a 10% to the products which belong to the Product Category Y.
- to apply a net unit price discount of 15% to the Product X that belongs to Product Category X.

The way this works in Etendo is:

- the price list schema must contain 2 lines one per each discount rule to be applied:
  - First Line will contain information such as:
    - Sequence Number = 10
    - Conversion Rate Type = Spot
    - Product Category = Product Category X
    - Base Net Unit Price = Net Unit Price
    - Net Unit Price Discount = 5.00
  - Second Line will contain information such as:
    - Sequence Number = 20
    - Conversion Rate Type = Spot
    - Product Category = Product Category Y
    - Base Net Unit Price = Net Unit Price
    - Net Unit Price Discount = 10.00
  - Third Line will contain information such as:
    - Sequence Number = 30
    - Conversion Rate Type = Spot
    - Product Category = Product Category X
    - Product = Product X
    - Base Net Unit Price = Net Unit Price
    - Net Unit Price Discount = 15.00

Using hierarchical behavior:

- unit price discount of 5% is applied to the products which belong to a Product Category X.
- unit price discount of 10% is applied to the products which belong to a Product Category Y.
- unit price discount 15% is applied to Product X, in addition to the 5% discount for belonging to Product Category X.

Using non-hierarchical behavior:

- unit price discount of 5% is applied to the products which belong to a Product Category X, except to Product X.
- unit price discount of 10% is applied to the products which belong to a Product Category Y.
- unit price discount of 15% is applied to Product X.

#### Price List

:material-menu: `Application` > `Master Data Management` > `Product Setup` > `Price List`

##### Overview

A price list is a listing of prices for different products or services.

!!! info
    It is possible to create as many price list and price list versions as required depending on the organization's needs.

The process of creating a price list is slightly different to the process of creating a price list version.

Price List creation:

1.  Price List Name and Type (sales or purchase) is detailed in the Price List window header. It is also mandatory to define whether the price includes taxes or not.
2.  There exists the possibility of Price list based on cost, for this, the price list should be a sales price list.
3.  The Default Price List Schema with no configuration at all, as well as the valid from date information, must be detailed in the Price List Version tab
4.  The Unit / List price of each product which must be included in the price list is detailed in the Product Price sub-tab.
5.  The price list is ready and can be linked to the business partners as required and used.

Price List version creation:

1.  Price List Name and Type (sales or purchase) is detailed in the Price List window header.
2.  A Price List Schema which contains the new commercial rules to apply, the valid from date and the Base Price List for which the price list version is created and must be detailed in the Price List Version tab.
3.  The process Create Price list populates the "Product Price" tab by including:
    1.  every product contained in the original price list
    2.  each product will have a new unit and/or list price, depending on what was configured in the price list schema used.
4.  The price list version is ready and can be linked to the business partners as required and therefore used.
5.  Documents will automatically default the most recent version of a price list.
6.  There is no end date on price list versions, but old versions can be deactivated.

##### Price List

Price List window allows creating purchase and sales price lists to be assigned to the business partners for its use in purchase and sales transactions such as orders and invoices.

![](https://docs.etendo.software/latest/assets/drive/bHmRBT-3YqtSLK2PErojCQx8-FE-6UJK0_A3mkisnphxh5R2A7qev8UsVYgo9x7o8xbHuvmIhYY9ijGcJ9tymlAeIUqaNHJCOVNlXTv58MpI1iBTJ3ppDjXB0s_3ZXMro8cp8tS3d4oqD4_hHw.png)

As shown in the image above, a price list or a price list version can be created by just entering below relevant information:

- By selecting the field "**Sales Price List**" it will be for sales transactions, otherwise it will be a purchase price list.
- **Default** field allows defining a given price list as the default one to be used in case a business partner does not have a specific price list assigned.
- **Price list based on cost**, this field is shown if the price list is a Sales Price List. This option allows creating a price list based on the cost price plus a margin.
  - the cost price is the one defined in the Costing tab of the product window.
  - the margin is defined in the Price List Schema window.
  - when the price list is a price list based on cost, the price list schema should be configured with cost and a margin.
- **Price includes taxes**. This flag is very important and depending on this the behavior of sales and procurement flows will be affected.
  - If it is marked, then the price defined is the gross unit price
  - If it is not marked, then the price defined is the net unit price

**How does this affect the flows?**

- When the price list includes taxes, the _gross unit price_ and _line gross amount_ are filled and the _net unit price_ is calculated based on the _gross unit price_ and the corresponding tax rate. What cannot be changed is the gross and, due to this, there might be some rounding issues that the system automatically handles adding or subtracting these differences in the tax amount.

As an example : If price inclusive of tax is originally 135.50 and rate is 4.5 % then the rounded price before tax would be 129.67

The order line would stay:

Quantity: 1 Net Unit Price: 129.67 Line Net Amount: 129.67 Gross Unit Price: 135.50 Line Gross Amount: 135.50

But the total gross amount (calculated by the system) would be 135.51 (tax base amount:129.67 + tax amount:5.84) and what it has to be clear is that the final result must be 135.50 (The customer bought 1 unit whose price is 135.50). This difference is going to be solved adjusting taxes:

The system will adjust the difference by summing or subtracting this difference with the tax that has the highest amount. So, in this example, instead of having a tax line where the amount is €5.84, the amount will be €5.83 (5.84-0.01)

Finally, the total gross amount for the sales order would be 135.50 (129.67+5.83) which is the desired amount.

Due to this (Net amount vs Gross amount), when using prices that include taxes, it is recommended to work with greater precision (price precision) to avoid rounding differences.

- When the price list does not include taxes, the _gross unit price_ and _line gross amount_ fields are not displayed and both fields are not calculated at all in the line of the document. The final gross amount of the document will be the result of the sum of the lines net amounts plus the tax amounts.
- The price list is defined at document level (header) so there cannot be lines where the price includes taxes and others where not. This is clear for orders, but for invoices where orders can be grouped in one just invoice the rule is also applied. One invoice cannot have orders where the price list includes taxes and orders where the price list does not include taxes.

##### Price List Version

There could be as many versions of an existing price list as required, versions which can be valid for a given time period and which can be defined according to certain commercial rules.

![](https://docs.etendo.software/latest/assets/drive/ix0WIF0unAQdEluAH0VKvAHPQFFb5f6V5DlOMcJlQVi54MtuV41UG8GUHy1aHghfH4CH5Iz100WDv3Q8-fF_rPaNDGuFvqWwnTmVKxdNDFCSXnQFM3TAhlcxHapRGH4a7K2nXQVkk0lkuPJ1NQ.png)

As shown in the image above, there are two types of "Price List Versions":

- generic and original ones linked to the "Default Price List Schema"
- further price list versions (not based on the cost) which requires both:
  - a Price List Schema
  - and a Base Price List version
- price list versions based on cost require a Price List Schema with Cost configuration in Base list price and Base unit price.

The process button named "Create Price List" must be used only in the case of creating further price list versions as it requires a Base Price List if the price list is not based on cost. If the price list is based on cost, it is mandatory to select the price list schema and optionally the base version.

- if Base version is blank, the application calculates the unit price and list price for all the products (excluding discounts products) plus the margin defined.
- if Base version value is selected, the application calculates the unit price and list price for all the products defined in the base price list as cost plus margin.

##### Product Price

Product Price tab allows the user to either add or edit products and their prices for a selected price list.

![](https://docs.etendo.software/latest/assets/drive/rapFdQYs8ZYQ3c9wO_nEZ-tTniv5PDDLmdlXZ03ByVKh6Im-Jwt2KIB1Rj1Hm1agjXK55WcmCR6Xok4iO4s3zlRoP1TK-C6rh6oJSIBNVEdEcBRJB4OHbEtWV-7ZE8slY7CahOj4x7wU9GBuow.png)

In other words:

- Add products in the case of creating a price list
- Edit products in the case of modifying a price list version:
  - as the required products at their new prices are automatically populated by Etendo in this tab while running the process "Create Price List".

Overall, this tab includes two main fields:

- 'the _List Price'_ field, as the price used as a reference in a given price list or price list version. This price can be the result of a discount or any other commercial rule applied by a Price List Schema.
- and the **Unit Price** field, as the final price used in documents such as orders and invoices. This price can be the result of a discount or any other commercial rule applied by a Price List Schema.

#### Create All Price Lists

:material-menu: `Application` > `Master Data Management` > `Product Setup` > `Create All Price Lists`

##### Overview

On daily sales, especially on retail and distribution, price lists are very important. Therefore, Etendo includes plenty of information to manage and update price list versions per business partner.

This functionality includes different price lists, price list versions per each price list and price list schemes. Have a look at these concepts to better understand Create all Price Lists functionality.

Etendo allows hierarchical price list structure and this hierarchy is based on price list schemes.

###### Functionality

Follow this example about what _Create all Price Lists_ is used for:

Example 1:

Imagine you own a bakery and you sell different bread types to different customers. You may have French bread, rolls, bagels, etc. And for each type you may have different sizes small, medium and extra.

You use a main price list (with a price list version) containing a price per bread when they are medium size. Based on this price list we build 2 other price lists applying a price list schema. For small bread, 5% off and for extra breads 4% more. This way, you will be able to manage price updates easily. Suppose flour price rises 10%, and you want to increase all prices for all breads. You could follow this steps:

- Create a new price list schema increasing the price 10%.
- Create a new version for the main price list, based on the new price list schema.
- Regenerate all price lists based on the main price list automatically. For this third step, you may use the Create All Price Lists feature.

###### Process

The Create All Price Lists generates all price lists pending from the selected price list. The process checks for all child price lists, and applying the defined price list schema, it generates a new version for each price list.

![](https://docs.etendo.software/latest/assets/drive/1gcdIPde692fCVAn9cq0PEXTyJBTBR9vT.png)

![](https://docs.etendo.software/latest/assets/drive/1JC58tbBLqjqN5hDZv5Puwp_lAmDafJqd.png)

#### Discounts and Promotions

:material-menu: `Application` > `Master Data Management` > `Product Setup` > `Discounts and Promotions`

##### Overview

Discounts and Promotions is a mechanism that allows the user to adjust prices based on different rules. External modules can extend this definition by providing additional rules (Discount Types) implementations.

Discounts and Promotions, formerly Price Adjustments, defines rules to be applied to invoice and order lines to adjust prices.

![](https://docs.etendo.software/latest/assets/drive/ls88i8jyKuvAYSUkKg3hrJyY9FkEKi8kj9CkQI0hn-YdEggr1Qd25cPG13CO5Y-jVh5L6w6X-Nlnc7l_7ht0zRV8_4TYSYs-_V7JrZxIkIxmK5XS_KS60noJsXVwMK5FWbeKtEctt6kpiZsEqw.png)

This feature requires to set as "Active":

- the "Read-Only" Tab "Discounts and Promotions" is found in below listed windows:
  - Purchase Order
  - Sales Order
  - Purchase Invoice
  - Sales Invoice
  - and Sales Quotation

###### How Promotions are Applied

Rules are applied to order or invoice lines based on the filters in that rule, for example to a specific Business Partner Category acquiring a concrete set of products during a fixed period of time.

When the line is saved, the actual price shown in it does not take into account promotions. Promotions are calculated when the invoice/order is processed or by clicking the _Calculate Promotions_ button.

!!! info
    _Promotions and Discounts_ can be extended to implement complex rules that attend not to a single line but to all lines in the invoice, being impossible for those to be calculated in advance. 

Etendo manages prices in 3 chunks:

- Price List: it is the base price defined as Product Price. It is the base price reference.
- Price Standard: it is the first discount applied to the price. It can come directly from the Price List, or can be manually edited while entering the line.
- Actual price: it is the real price that will be used in the document. Promotions are applied to the Price Standard to obtain this one.

Multiple promotions can be chained in cascade, in this case the one applied in 2nd position will use as base the actual price obtained after applying the first one. An alternative mechanism to apply promotions in _WebPOS_ is implemented by the Promotions Best Deal Case module.

###### How Promotions are defined

The main fields to take into account when defining a promotion are:

- _Name_ and _Printed Name_: is the way to identify the promotion. _Printed Name_ is used to display the rule to the final user, whereas name is intended for internal usage, although in case _Printed Name_ is empty, _Name_ is used instead.
- _Filter Options_ section: filter options configure in which cases it can be applied.
  - _Starting_ and _Ending_ dates: The period of time the promotion is valid.
  - _Priority_: As explained in the previous section, multiple promotions can be applied in cascade. _Priority_ field defines which is the order these promotions are applied in. When more than one promotion can be applied to a single line, these promotions are sorted by ascending priority, this is, the promotion with priority 1 will be applied before the one with priority 2.

!!! info
    Note it is very important to set priority in case of defining rules that can be applied in cascade.

- _Apply Next_: It allows stopping the promotion cascade chain. When it is flagged, in case   there is another promotion that is applicable, after applying the current promotion, it will be applied. If it is not flagged, this rule will be the last in the chain.
- _Included method_: There are 6 drop down fields to define how _Business Partner Categories_, _Business Partners_, _Product Categories_, _Products_, _Price Lists_ and _Organizations_ are filtered. The actual values for the filters are added in the subtabs with the same names, these fields only define the strategy to filter each of them, values here can be:
  - _All excluding defined_ (default value). It removes from the filter the items selected. For example if we set it to products and add product A, the promotion will apply to any product but A. Note this is the default value for all filters, in case it is left as it is for all of them, and no filter option is added in any sub tab, the promotion will be always applicable.
  - _Only those defined_: Restricts the filter to just the items that are included in the correspondent sub tab.
- _Definition_ section: Fields shown in this section vary depending on the selected promotion type. Here it is typically defined how much to discount and additional conditions to be met to apply the rule.

###### Price Adjustment

_Price Adjustment_ is the promotion type included by default, it behaves almost in the same way _Price Adjustments_ did before they were extended to _Promotions and Discounts_.

As opposed to the rest of Promotions and Discounts, in order to maintain backwards compatibility, prices with adjustments are calculated while the order/invoice line is being edited. So the final price is shown there even before processing it. Promotions and Discounts lines are not created until the document is processed.

!!! warning
    Due to this different behavior between Price Adjustments and the rest of Discounts and Promotions, it is advisable not to use both of them together, so in case Price Adjustments are defined and applied, do not define other types to be applied to the same products.

To define a promotion of _Price Adjustment_ type, follow the indications in the section above for filtering. In the _Definition_ section these are the fields to be taken into account:

- _Discount Amount_: It is a fixed amount discounted to the price.
- _Discount %_: Percentage discounted to the price. In case _Discount Amount_ field is not 0, percentage is applied to the price obtained after subtracting _Discount Amount_ value.
- _Fixed Unit Price_: Sets the price per unit. If this field is set, the two mentioned above are not used.
- _Min_ and _Max_ quantities: Specifies which is the quantity range to apply the rule, values here are included and any (or both) of them can be empty. For example, a promotion with _Min Quantity_ 5 to product A (which UOM is unit) would apply whenever there is a line with 5 or more units of product A.

##### Discounts and Promotions

Defines the Discounts and Promotions main characteristics such as Discount Type, how it is filtered and actual discount information based on type.

##### Translation

Maintains translations of Discounts and Promotions to different languages.

##### Business Partner Category

The user can add business partner categories in order to include or exclude them from a selected Promotion/Discount.

##### Business Partner

The user can add business partners in order to include or exclude them from a selected Promotion/Discount.

##### Business Partner Set

The user can define business partner sets for the discount.

##### Product Category

The user can add product categories in order to include or exclude them from a selected Promotion/Discount.

##### Products

The user can add products in order to include or exclude them from a selected Promotion/Discount..

##### Price List

The user can add price lists in order to include or exclude them from a selected Promotion/Discount.

##### Organization

The user can add organizations in order to include or exclude them from a selected Promotion/Discount.

#### Service Price Rule

:material-menu: `Application` > `Master Data Management` > `Product Setup` > `Service Price Rule`

##### Overview

In this window Price Rules assigned to Price Rule Based services will be configured. Instead of having a fixed price, there will be rules that will determine the price of the Service.

##### Service Price Rule

![](https://docs.etendo.software/latest/assets/drive/X9LCI62xbhWb8fv-Kd56CnOQGzy2Bw1KXj1frgulzwbMa3UkXVFW2GtKdR1a0-BIXVVRePT4wgfzFCFI8LpQAZv66zLqQTzVV_5LuiBKK8wZecnNvki6Pu3rJ-4OBccqbSfCm45H2zJ4eX4xgw.png)

Configuration fields:

- **Name**: Name of the Service Price Rule.
- **Description**: Description of the Service Price Rule.
- **Rule Type**: There are two values to select in the dropdown
  - Percentage: If selected, a Percentage field will be displayed allowing to set a Percentage. To determine the price of the service, this amount will be applied to the amount of the lines related to the service.
    - **Percentage**: Percentage to be applied.
    - **After Discounts**: If selected, the percentage will be applied after adding the discounts to the ticket.
  - **Ranges**: If selected, a new tab Ranges will be displayed allowing to create different Ranges based on the amount of the related lines.

##### Ranges

![](https://docs.etendo.software/latest/assets/drive/QwjLn0C5fh2kKYl7P1q381tMurECKsFm_xLVCviWtFqf48yaxSa0PfpjwM80ji2kQQmDQC3VQVL6YQYyRu9y39AgLl19QBGYO4E2iAXV7cC1qINdvHtHTYAQGmQCDrVeqBr-Jnhd_TVcKDDWcw.png)

In this tab, different Ranges can be created based on the amount of the related order lines. Configuration fields:

- **Amount Up To**: If the summed amount of related order lines is equal or less than this amount, the configuration of this range will be taken into account.
- **Rule Type**: There are two values to select in the dropdown
  - Percentage: If selected, a Percentage field will be displayed allowing to set a Percentage. To determine the price of the service, this amount will be applied to the amount of the lines related to the service.
    - **Percentage**: Percentage to be applied.
    - **After Discounts**: If selected, the percentage will be applied after adding the discounts to the ticket.
  - **Fixed Price**: If selected, a field ‘Price List’ will be displayed.
    - **Price List**: Price List from which the price of the service will be obtained.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: ✨ Getting Started
## Article Path: /User Guide/Etendo Classic/Basic Features/Procurement Management/✨ Getting Started
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/getting-started
## Article Content: 

#### Overview

<iframe width="720" height="480"  src="https://www.youtube.com/embed/d33J6fTMEqM?si=NlHOoCq82bCJG3Rg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

Procurement Management deals with all the activities related to the purchase of goods and services from external suppliers and the corresponding reporting.

This application area of Etendo covers Requisition to Receipt and Invoicing parts of the [Procure To Pay business flow](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/getting-started.md#procure-to-pay-business-flow) and [Supplier Returns business flow](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/getting-started.md#supplier-returns-business-flow).

For Payments Management of Procure To Pay, see Financial Management / Receivables & Payables application area.

#### Procure to Pay Business Flow

*Procure to Pay* workflow manages the life-cycle of a procurement process.

Due to its complexity and different roles involved, it is convenient to split Procure to Pay down into two main sub-processes:
    
1. *Requisition to Receipt* process starts by the creation and management of purchase requisitions and corresponding purchase orders to the moment the warehouse staff receives the merchandise.
2. *Supplier Invoice to Payment* continues the previous sub-process by registering the supplier invoices and closes it by paying supplier invoices.

![procure-to-pay](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/procurement-management/getting-started/procure-to-pay-business-flow.png)

##### Configuration

The following setup needs to be done before performing the process:

- Products
- Costing rules
- Landed Cost Types
- Business Partners (Vendors and Suppliers).
- Price configuration

Products need to be configured prior any purchase requisition is issued.

Each product being purchased needs to have a price in the purchase price list in order to be selectable in any transactional document like a purchase order or a purchase invoice.

Same way, each product that is being purchased needs to be defined in a unit of measure (UOM), and in an alternative unit of measure (AUM) if required.

!!!info
    Please refer to [Product Setup](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/product-setup.md), [Product](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#product) and [Pricing](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/pricing.md) for more information.

The cost of an input transaction such as a "Goods Receipt" can be calculated by using the product's purchase price excluding taxes.

Besides that, the cost of the products included in a Goods Receipt can be adjusted as a result of allocating different types of [Landed Costs](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#landed-cost-type) in the receipt.

The "Costing Server" process is the Etendo "Costing Engine" process that calculates and adjusts a product's transaction cost.
This process requires that the legal entity/organization has a [costing rule](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#costing-rule) configured and applied to the products configured as "Stocked".
Business Partners need to be configured prior to any purchase requisition can automatically turn into a purchase order.

!!!info
    For more information, visit [Business Partner Setup](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/business-partner-setup.md) and [Business Partner](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#business-partner).

Above configuration is part of the overall Business setup flow within the "Master Data Management" setup.

!!!note 
    You are not required to perform any additional setups for the Procurement Management application area if you are going to explore it based on Food & Beverage (F&B) sample client shipped with Etendo by default.
    The sample data set already contains the roles, business partners, products, warehouses and prices pre-configured.

##### Execution

In Procurement Management, the Procure to Pay business process is executed as follows:

Any member of the organization allowed to do so can directly issue a Requisition as a result of an organization or business unit need.

- The requestor creates a new document in the [Requisition](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#requisition) window, enters a "Need by date" and then looks for the product or service needed.
If the product does not exist it can be entered at that time in the [Product](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#product) window.
- The requestor continues by adding for each product needed a new line with the need by date, the product, the quantity, the price if known and if needed its attribute (size and/or color, etc).
A preferred supplier can also be added if known.
- Once done, the requisition is saved in "Draft" status allowing it could be changed later on by the user if needed.

Requisitions notify the purchase staff of products to order, their quantity and the time frame for its delivery. Purchase staff is then in charge of managing already created purchase requisitions or even creating new ones, if required.

- Purchase staff manages requisitions in the [Manage Requisitions](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#manage-requisitions) window.
- Purchase staff can change any data of the requisitions created in draft status, and besides can look for the supplier to be used in the Business Partner field. if the Business Partner does not exist, it can be entered at that time in the [Business Partner](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#business-partner) window.
- Purchase staff can also enter the purchase net unit price and discounts if any, once known.
- Once the requisition is ready, it is completed. The Document Status of the requisition changes to Completed and can then turn into a purchase order.

Purchase staff:

- can massively create Purchase Order/s for the Completed Requisitions in the [Requisition to Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#requisition-to-order) window by searching and then adding requisition lines not linked to an order yet.
The purchase order/s created that way are shown in the Purchase Order window in Booked status.
- and can also directly create Purchase Orders in the [Purchase Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#purchase-order) window. Purchase lines are filled as in the case of the Requisition. Once the Purchase Order is ready, it is processed clicking the Book button.
- To review past and present purchases of the supplier, purchase staff uses the [Purchase Dimensional Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/analysis-tools.md#purchase-dimensional-report).

Warehouse staff:

- Receives the merchandise as well as the delivery notes attached in 2 ways:
    - With the [Goods Receipt](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#goods-receipts) window, Warehouse staff looks for the orders pending to be delivered one by one and then gets corresponding order lines quantity located in a warehouse and storage bin.
    This window also allows creating a receipt in a manual way.
    - With the [Pending Goods Receipt](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#pending-goods-receipts) window. Warehouse staff can massively select the purchase order lines being delivered and locate the quantity receipt in a warehouse and storage bin.
- Allocates landed cost, if any, to the products included in a receipt by:
    - selecting a landed cost type and entering an "estimated" landed cost amount which will be distributed among receipt lines
    - or by selecting a landed cost type and entering a landed cost amount already invoiced which will also be distributed among receipt lines.
- Completes the receipts.
    - Completed receipts updates stock information (product levels increase) and can be [posted](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#goods-receipts) to the ledger therefore product assets accounting is being increased.
    - A Goods receipt can only be posted if the cost of the products being received has been calculated. To do so, the [Costing Background process](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/process-scheduling.md#costing-background-process) needs to be run.
- [Matched Invoices](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#matched-invoices) window helps to manage and post the discrepancies, if any, between the accounting of the receipt and the accounting of the corresponding invoice later on, due to purchase price differences.
- [Goods Receipts Dimensional Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/analysis-tools.md#goods-receipts-dimensional-report) is used to review past receipts of the Business Partner.

Finance staff:

- Registers supplier invoices in different ways:
    - With the [Goods Receipt](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#goods-receipts) window, Finance staff can generate an invoice from a Receipt in status Complete.
    - With the [Purchase Invoice](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#purchase-invoice) window, Finance staff can enter supplier invoices:
        - in a manual way
        - or by retrieving purchase orders or receipts lines pending to be invoiced
        - or by copying invoice lines from existing purchase invoices.
- Registers landed cost invoices and match those ["invoiced" landed costs](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#lines_4) with the landed costs:
    - booked directly in a [receipt(s)](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#landed-cost).
    - or booked through a [landed cost document](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#landed-cost_1).
- [Processes](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#process-matching) and [Posts](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#post-matching) landed cost matching.
- Once a Purchase Invoice is Processed, a Payment Plan of the invoice is created based on the payment terms agreed with the supplier and the purchase invoice can be posted to create the accounting entries of the invoice. Afterwards, the payment plan can be modified.

Additionally:

- The [Matched Purchase Orders](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/analysis-tools.md#matched-purchase-orders) view helps Finance staff to have a look at the order or receipt lines which have not been invoiced yet by a supplier.
- Finance staff is able to review past supplier invoicing information in the [Purchase Invoice Dimensional Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/analysis-tools.md#purchase-invoice-dimensional-report).

Purchase expenses can be recognized in different ways:

- In most cases companies would recognize the expense as soon as the purchase is made. For instance, a company buying consumable products that are not capitalized.
In Etendo, in this situation, the expense is generated as part of the accounting of the purchase invoice corresponding to the transaction.
- Under some circumstances, however, it is required to defer the expense recognition. For instance, a company purchasing a business insurance for the duration of a year would want
to distribute that expense over 12 months.
In Etendo, in this situation, the expense can be deferred within a given number of periods by entering an expense deferred plan in the [purchase invoice lines](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#lines_4).

!!!info
    For a full description of this functionality, please visit the [How to manage deferred revenue and expenses](https://docs.etendo.software/latest/user-guide/etendo-classic/how-to-guides/how-to-manage-deferred-revenue-and-expenses.md) section.

Finally, the finance staff is in charge of making and managing the supplier payments:

- Supplier payments can be made in the Purchase Invoice window by using the Add Payment button. It is also possible to make a prepayment against a Purchase Order.
Detailed payment management documentation is available in the Financial Management / Receivables and Payables application area and in the [How to manage prepaid invoices in payables](https://docs.etendo.software/latest/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables.md) section.

#### Supplier Returns Business Flow

This workflow manages the return of purchased goods back to the supplier. Due to the consequences of returning, it is convenient to split Supplier Returns down into two main sub-processes:

1. *Supplier Return to Debit*: This process manages the return of goods back to the vendor and the request of a debit.

2. *Supplier Return to Replacement*: This process manages the return of goods back to the vendor and the request of a goods replacement.

![supplier-returns](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/procurement-management/getting-started/supplier-return-debit.png)

##### Configuration
The [Return reasons](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/business-partner-setup.md#return-reasons) window is the only one that requires configuration before performing this process.

##### Execution

In Procurement Management, the *Return to Vendor business flow* is executed as follows.

Procurement staff:

- Creates a new document in the [Return to Vendor](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#return-to-vendor-rtv) window and looks for the vendor name in the Business Partner field.
- And continues by adding lines clicking the button [Pick/Edit lines](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#lines_5)
    - It is possible to pick goods receipt lines and edit the quantity you want to return and the price
- Once the Return Material document is accepted by the Vendor, you can process it by clicking the Book button. The status of the document changes from Draft to Booked.
- Only Booked documents can be shipped to the vendor

Warehouse staff:

- Creates a new document in the [Return to Vendor Shipment](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#return-to-vendor-shipment) window and looks for the vendor name in the Business Partner field.
- And continues by adding lines clicking the [Pick/Edit lines](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#lines_6) button
    - Return to Vendor lines are picked
    - It is possible to edit the quantity to be shipped
- Once the document is ready, process it by clicking the button Complete. The status of the document changes from Draft to Completed
- Completed shipment updates stock information (product levels decrease)

Finance staff: To invoice these documents, go to the [Purchase invoice](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#purchase-invoice) window. All scenarios are covered:

- If the vendor sends an invoice just for that specific document, you need to select a Reverse purchase invoice document type and then select the lines through the *Create lines from* button
- If the vendor sends an invoice with the original purchase order plus the return materials order, you need to select a Purchase invoice document type and then select the lines through the *Create lines from* button
- If the vendor does not send an invoice for the return materials order but wants to keep it as credit so you can use it later, you have to:
    - Create a *Reverse purchase invoice* for these returned materials
    - Leave it as credit to be used later through the [Payment out](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#payment-out) window
    - A new purchase invoice based on the original purchase order can consume that credit

#### Relationship with other application areas

Procurement Management has a relationship with other application areas: 

- [Warehouse Management](https://docs.etendo.software/latest/warehouse-management/getting-started.md) as Goods Receipts changes items quantity on hand and its value.
- [Financial Management](https://docs.etendo.software/latest/financial-management/getting-started.md) in terms of managing account payable payments.
- [MRP Management](https://docs.etendo.software/latest/material-requirement-planning/getting-started.md) as purchase planning allows the creation of purchase orders based on material needs.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Transactions
## Article Path: /User Guide/Etendo Classic/Basic Features/Procurement Management/Transactions
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions
## Article Content: 
#### Overview

Procurement management deals with all the activities related to the purchase of goods and services from external suppliers and the corresponding reporting.

The process starts by the creation and management of purchase requisitions and corresponding purchase orders to the moment the merchandise is received in the warehouse.

#### Requisition

:material-menu: `Application` > `Procurement Management` > `Transactions` > `Requisition`

A Requisition is a document that specifies a request to order products.

The user can create requisitions and monitor them in this window:

![Requisition window](https://docs.etendo.software/latest/assets/drive/1ihaEseE5RnNH7INNbaRLyvZC0P2q-hTl.png)

##### Header

Requisition header allows entering the following data:

- The business partner or supplier, this is an optional field that could be filled in by the requester in case it is known, therefore:
  - The supplier entered in the header will be the one used for every requisition line unless it is changed at lines level for a particular line.
  - If there is no supplier entered in the requisition header the one setup by default for the product in its master data window, *Purchasing* tab will be used.
  - If there is no business partner or supplier in the header, or in the lines, or setup in the product, the user will have to enter it while creating the purchase order from the requisition.
- The purchase price list. This is also an optional field to be filled-in, in case it is known by the requester and its behaviour is the same as described above as it is linked to the Business Partner.

Besides, the system populates the following data:

- The document No., which is the Requisition number.
- The requester, which is the user entering the requisition.

![Requisition](https://docs.etendo.software/latest/assets/drive/1G5HR3bMmJXW837o-6qzZ0CTe418q5JB7.png)

The requester can then move to the "Lines" tab to enter additional data.

##### Lines

Each requisition line shows a product demand for a specific date.

Requisition "Lines" tab collects the following demand data:

- The *need by date*, that is the date when the product is required to arrive.
- The *product*, items/products which need to be purchased.
- The *quantity* requested, or the *operative quantity* requested if the product has an _alternative unit of measure (AUM)_ configured.
- The product's *UOM*, or product's *Alternative UOM* depending on product configuration in regards to measure unit.
- The *business partner:* This is an optional field the user can enter if the supplier entered at the requisition header needs to be changed for a particular line.

!!! info
    If there is not a supplier entered at the requisition header, neither at the requisition line, the supplier used will be the one setup by default for the product, therefore this field at line level can also be used to overwrite that defaulted one.

- The *purchase price list*: This is also an optional field that can be entered if the price list entered at the header level or the default product price list information should be overwritten for a particular line.
- The *net list price*: This one is the price of the corresponding price list for a given date. It's an optional field that can be filled in automatically based on the price list entered at the header level or it could be overwritten by the user for a particular product line.
- The *net unit price:* This one can be either equal to the net list price or not, based on the formula: \[net unit price = net list price - discount\]. It is an optional field that can be filled in automatically based on the price list entered at the header level or it could be overwritten by the user for a particular product line.
- The *discount*, if any, is based on a used price list.

![Requisition Lines](https://docs.etendo.software/latest/assets/drive/1CtrCvBCrvUuxYDlaFysmkKu0-0XhemfC.png)

It is possible to enter as many requisition lines as products demand.

The last step is to register the *Requisition* as *Complete* by using the header button "Complete", then:

- *Requisition header status bar* informs us that the Requisition is *Completed*.
- *Requisition lines status bar* informs us that the *Matched purchase order quantity* for each line is equal to 0**, as there is no purchase order linked to each requisition line yet, and the requisition line/s status is *Open*.

It is important to remark that *Requisitions* does not have any impact on:

- Items quantity on hand
- Items costing

#### Manage Requisitions

:material-menu: `Application` > `Procurement Management` > `Transactions` > `Manage Requisitions`

Manage Requisitions window is intended to be used to provide an overall picture of the items needed.

##### Header

This window allows the user to manage requisitions regardless of their current status, therefore they can change or close a requisition and create purchase orders for those demands.

![Requisition window Header](https://docs.etendo.software/latest/assets/drive/1yuE4xa0usvVzSdmthjDWdi12OAqTuJTe.png)

A **requisition** with status "Completed" **can always be changed**, if required. The user needs to reactivate it and then change it and book it.

It is also possible to **close a requisition in case there is no need of the included item/s anymore**, by using the menu button "**Close**" and then select the action "**Close**".

Requisition lines status will then be changed to "Cancelled".

Finally, it is also possible to **create purchase orders** for those **requisitions in status "Complete"**, by using the menu button "**Create Purchase Order**".

In this case, a new window is shown for the user to fill in some data by taking into account that:

- If there are **different suppliers in the requisition lines as well as price list**:
  - the **defaulted ones** entered in the window "Create Purchase Order" **will be the ones used** in the purchase order.
- If there are **different suppliers in the requisition lines as well as price list**, and the user does not enter any defaulted ones in the window "Create Purchase Order":
  - **the ones in the requisition lines will be the ones used** in the purchase orders.
- If **all the requisition lines have the same supplier and price list**:
  - **there will not be any need for selected defaulted ones** in the window "Create Purchase Order", besides only one purchase order will be created.

![Purchase order](https://docs.etendo.software/latest/assets/drive/17OuNS8YpM0VC3MUkLO25DPPHCMwWjq8u.png)

Etendo provides information about the purchase order/s number/s created after pressing the OK button in the "Create Purchase Order" window.

This action links the requisition and the purchase order, and besides a purchase order line is created for each requisition line:

- A **requisition** linked to a purchase order changes its status from **Completed** to **Closed**.
- A **requisition line** linked to a purchase order line changes its status from **Open** to **Closed**.

Any **purchase order** created from a **Requisition**:

- will be listed in the **"Purchase Order" window**.
- will have a "**Booked**" status
- and will contain **data inherited from the Requisition**, data such as:
  - Order Date
  - Scheduled Delivery Date
  - Business Partner
  - Price List
  - Product/s

##### **Lines**

The user can perform a set of actions regarding requisition lines. It is possible for them to either create lines or product demands or to cancel them.

- **New product demands can be manually created** within a requisition by just **adding new requisition lines** before creating a purchase order.
- **Existing product demands or requisition lines can be cancelled**, if they are not required anymore, by using the header button "**Change Status**".

###### **Matched PO (Purchase order) Lines**

This tab allows the user to either review the purchase order line automatically linked to a requisition line or to manually link an existing purchase order line to the corresponding requisition line.

#### Requisition to Order

:material-menu: `Application` > `Procurement Management` > `Transactions` > `Requisition to Order`

Requisition to Order window shows all the "Completed" requisitions which match the criteria used in the "filter" section and it also shows the requisition lines selected as locked, therefore the same product demand can not be included more than once in a purchase order.

![Requisition to order](https://docs.etendo.software/latest/assets/drive/1Xl_R8oaUrOaO0SK4wB5BYNw3wJDEjHBX.png)

In other words, the upper section of this window shows the requisition lines found that are not linked to an order yet.  
Those are the lines which can be added by the user to the "Lock" area in the bottom section of the window.

A requisition line locked can not be changed by any other user, until the one who locked it gets it unlocked.  
That way, during the time that the requisition lines are locked:

- The same product demand will not be included in a purchase order, by mistake.
- The purchase team will have the opportunity to review the stock and contact different vendors if required to negotiate a price for the products.
- If there is no activity during 3 days, the system removes the lock from the lines.

A requisition can be unlocked manually by the purchase manager or the one who locked it by moving it back to the upper part of the "Requisition to Order" screen by using the "Remove" button.

Once the product demands are clear and locked, the last step to take in this window is to create a purchase order for those needs using the process button "Create".

#### Purchase Order

:material-menu: `Application` > `Procurement Management` > `Transactions` > `Purchase Order`

Purchase Order window allows the user to manage orders which once booked will be sent to the external suppliers. In other words, it is a document to register products and/or services to be purchased and documented.

Once the document is booked, it can be sent to the external supplier and it can be prepaid if required.

Purchase orders can be created and booked in the header section of the purchase order window.

##### Header

The **Purchase order header** allows you to enter the following information:

- **Organization:** Organizational entity within client.
- **Transaction Document**, which in this case is defaulted as "**Purchase Order**".
- **Document No**, or the Company purchase order number.
- **Order date:** This date is also defaulted by Etendo based on the system date, but it can always be changed.
- **Business Partner**: End-user needs to select the supplier to which the purchase order is being issued.
- **Partner Address**: Automatically populated once the business partner is selected based on the address or location set us "Ship to Address".
- **Warehouse**: Regardless it is defaulted by Etendo based on the "Profile" selected options, it must be verified by the end-user.
- **Scheduled Delivery Date**: This is the date when the organization or legal entity requires the items to be delivered.
- **Payment Method**, **Payment Terms** and **Price List**: These ones are defaulted by Etendo once a business partner is selected.
- **Order Reference**, free text which can be found under "More Information" section, you can use it to save the supplier order number, if any.

**Once header information is properly filled-in, you can go to the "Lines" tab in order to enter purchase order line/s information**.

!!! info
    To learn how to enter purchase order lines, visit the next section [Lines](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#lines_2).

It is possible to take up to **three possible actions regarding a purchase order**, by using the **header button "Book"**:

- **Process it**, in case you might want to process it but not to book it as final, because it could be you might need to change it later on.
- **Void it**, in case that purchase order is not required anymore and therefore needs to be voided.
- **Book it**, in case it is correct and final.

![Purchase order window](https://docs.etendo.software/latest/assets/drive/1_Jv8WvA53fVRV82tDordRVxJa6xmTEh2.png)

!!! info
    If there are non-stockable BOM products and they have not been exploded, the Book button explodes them automatically.

###### Remittance

!!! info
    the Remittance module of the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).
 
The Remittance module provides the header of the Purchase Order with a new field: “Bank account”.

![bank_account_3.png](https://docs.etendo.software/latest/assets/legacy/bank_account_3.png)

This field defines the corresponding bank account for transactions. Each business partner can have more than one bank account and, in this field, the user can select which of them to use.

###### Advanced Bank Account Management

!!! info
    To be able to include this functionality, the Advanced Bank Account Management module of the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

This module adds a new section to the header of the Purchase Order window: Advanced Bank Account Management. In this section, the user can find the Bank Account field which is automatically filled with the bank account related to the adress or business partner of the order.

!!! info
    For more information, visit the [Advanced Bank Account Management user guide](https://docs.etendo.software/latest/optional-features/bundles/financial-extensions/advanced-bank-account-management.md)


##### **Lines**

Once the purchase order header has been properly filled in and saved, each purchase order line can be created in this tab.

Purchase order lines can be created in three different ways:

**1\. By manually creating new record/s in the "Lines" tab**.

The purchase order fields you can fill in are described below:

- **Product**. You can select an item or product from the list or use the product selector icon.
- **Ordered quantity**, or **Operative Quantity** if the product has an _alternative unit of measure (AUM)_ configured. This is the quantity needed of the product/item.
- Product's **UOM**, or product's **Alternative UOM** depending on product configuration in regards to unit of measure.
- **Attribute Set Value. An attribute associated with a product as part of an attribute set.**
- **Net Unit Price**. This one is coming from the Price List selected in the header, but it could always be changed.
- **Line Net Amount. The final amount of a specified line, based only on quantities and prices.**
- **Tax**. Purchase tax is normally filled in by the system, depending on Taxes setup.

**2\. By retrieving all the lines from previously created purchase orders.** In this case, you must use the process button "**Copy from Orders**".

This process button enables the **Copy from Orders Pick and Edit** window.

"Copy from Orders Pick and Edit" window allows you to search the orders to copy by using the filter options available.

The lines information of the selected orders will be inserted in the purchase order line/s, then that information can be manually changed.

**3\. By copying lines from other purchase orders.**

In this case, you must use the process button **"Copy Lines".**

This process button enables a new window named "Copy Lines from order" which allows you to create order lines by selecting the products already purchased from the supplier of the order by taking into account the _Consumption days_ configured for the supplier.

###### **Explode button**

Explode button is shown when selecting a line with a non-stockable BOM product and the product has not already been exploded. When exploding a product, the bill of materials components the selected product consists of are shown in the order.

!!! info
    Once you have exploded it, you cannot comprime it. You should delete all the lines (first bill of materials components and then the BOM product), and insert again the non-stockable BOM product.

###### **Line Tax**

For each purchase order line, Etendo automatically populates the line tax related information in this tab.

Line tax tab informs about each purchase order line:

- **applied tax rate**
- **calculated tax amount**
- **taxable amount**

!!! info
    It is not possible to either manually create a new line or modify existing ones.

###### **Basic Discounts**

Lists information about discounts automatically applied based on the supplier configuration and / or manually entered for the purchase order.

![Basic discounts](https://docs.etendo.software/latest/assets/drive/1AavUV8S8kQ2dp0P_W9lw06XfmAf5d_g-.png)

###### **Payment Plan**

This shows the total amount expected to be paid upon order booking as well as the amount/s pre-paid or paid against the invoice/s for the order.

Payment Plan information is required at order level because suppliers could ask for a **pre-payment** of all or part of a debt prior to its due date.

Purchase order payment plans **do not show nor manage valid due dates**, but the payment plan of the corresponding purchase invoice/s.

This tab also shows information about the regular payments received against the invoice/s for this order, as amounts paid.

Finally, a payment plan of a purchase order will be **removed**:

- if the purchase order is **reactivated**
- or if the purchase order is **voided**

###### **Payment Details**

Displays the details of the payments (pre-payments or regular payments) made for the order or for the invoice/s of the order.

##### How to Reactivate a Closed Purchase Order

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the [marketplace](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

Etendo allows the user to reactivate closed purchase orders by selecting the needed one/s and clicking the Undo Close button.

![](https://docs.etendo.software/latest/assets/drive/1cyLa7pjnsNgXtnSEK2lZX9s35imhD2Kq.png)

Once the process is finished, the purchase order status turns to booked.

!!! info
    Check the Technical documentation about Advanced Financial Docs Processing to extend the process.

##### Payment Removal

The aim of this functionality is to delete and reactivate payments in an agile and easy way. Also, it allows eliminating and reactivating bank transactions and reconciliations.

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

From this window, it is possible to remove payments associated with a purchase order by selecting the corresponding document and then clicking on the Remove Payment button. If there is an invoice associated with the order, the relationship of this invoice to the payment in question will also be removed (Purchase Invoice window > Payment Plan tab).

If the payment is included in the financial account, i.e., if it is in Deposited/Withdrawn not cleared status, the transaction in it will also be deleted (Financial account window > Transaction tab).

If the payment is reconciled through an automatic method, then in addition to the transaction in the financial account, the line of the bank statement to which it was linked (Financial Account window > Imported Bank Statements) and the corresponding line of the bank reconciliation (Financial Account > Reconciliations) will be deleted.

!!! info
    If the payment is posted, the accounting entry is deleted too.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/procurement-management/transactions/PRpic2.png)

##### Intercompany

In case the user has to create orders or invoices among two or more organizations that are different but belong to the same client, this functionality allows automatically generating the corresponding inverse document.

!!! info
    For more information, visit [the Intercompany module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/overview.md#intercompany).

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

##### Bulk Completion

!!! info
    To be able to include this functionality, the Essentials Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Essentials Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=39AC2D9F72124AC7A1D0A3D005293C9E){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Essential Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/essentials-extensions/release-notes.md).

The Bulk Completion functionality allows the user to complete, reactivate or close multiple records by selecting them and clicking the **Bulk Completion** button. This makes records management easier and more efficient, reducing the time spent processing individual records.

!!! info
    For more information, visit [the Bulk Completion module user guide](https://docs.etendo.software/latest/optional-features/bundles/essentials-extensions/bulk-completion.md).

#### Goods Receipts

:material-menu: `Application` > `Procurement Management` > `Transactions` > `Goods Receipts`

A Goods Receipt is a document issued to acknowledge the receipt of the items listed in it. In other words, it is a document used to register in Etendo the specifics of items physically received in the warehouse.

##### **Header**

Goods Receipts can be issued and booked in the header section of the goods receipt window.

![Good receipts header](https://docs.etendo.software/latest/assets/drive/1cfAL8uTJ79GodTUOh9qoE66rQ2Me9yG9.png)

The fields to fill in the **Goods Receipt header** are:

- **Document Type**, which is filled in by default as "MM Receipt".
- **Warehouse**, where goods are going to be located.
- **Business Partner**, third party which delivers the goods.
- **Movement Date**, delivery date of the goods.
- **Accounting Date**, accounting date in case of posting the Goods Receipt.
- **Purchase Order**, purchase order number linked automatically by Etendo, in case the Goods Receipt is automatically created from a Purchase Order.
- **Order Reference**, Warehouse team can fill in here the Supplier's Delivery Note number, this way the internal Goods Receipt number and the Supplier's Delivery Note number are linked.

**Once header information is properly filled-in, you can then go to the "Lines" tab in order to enter "Goods Receipt Line/s"**.

!!! info
    To learn how to enter goods receipt lines, visit the next section [Lines](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#lines_3)

If a **Goods Receipt** is completed and therefore **booked**:

- The **quantity on hand of the item/s received is increased** by the quantity received.

If a **"Completed" Goods Receipt is voided** because the goods have been returned to the supplier:

- **The quantity on hand of the items/s returned is decreased** by the quantity of the goods returned. Etendo automatically creates a new "Goods Receipt" for exactly the same items but with "negative" quantities.

!!! info
    To learn more about Goods Returns, visit _Return to Vendor_ and _Return to Vendor Shipment_.

Supplier can send a "Purchase Invoice" together with the "Delivery Note" of the goods delivered, therefore:

- From the Goods Receipt window, it is possible to generate the corresponding supplier's invoice, by using the header process button "**Generate Invoice from Receipt**".

This action implies a **link between the goods receipt and the purchase invoice**, the user can be aware of when inquiring about the corresponding purchase invoice.

!!! info
    To learn more, visit [Purchase Invoice](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#purchase-invoice).

##### **Lines**

Once the goods receipt header has been properly filled in and saved, each item received can be listed as a separate goods receipt line.

There are several ways of creating goods receipt lines.

1.**The user can always manually create goods receipt lines.**  
That is the way the user could turn to in case there is not a booked purchase order nor a completed purchase invoice for the goods received they can retrieve data from.

As a consequence, the information to manually fill in is:

- the goods or items received
- the quantity received
- the storage bin where the items are going to be stored

**Explode** button is shown when selecting a line with a non-stockable BOM product and the product has not already been exploded. When exploding a product, the bill of materials components the selected product consists of are shown in the shipment. Once you have exploded it, you cannot comprime it. You should delete all the lines (first bill of materials components and then the BOM product), and insert again the non-stockable BOM product.

2.On the other hand, it is also possible to **"automatically" create goods receipt lines**, by using the header process button **"Create Lines From"**.

This allows the user to select the orders or invoices pending to be received.

For instance, once a purchase order is selected, the purchase order lines pending to be received are shown.

Then, the user is able to select the purchase lines received, change the quantity if required, and get them located in the warehouse.

Finally:

- If a purchase order/line is selected, this action **links each good receipt line to the corresponding purchase order line**, same applies to purchase invoice.

###### **Accounting**

Accounting information related to the material receipt.

A **"Goods Receipts" can be posted** if the "**MaterialMgmtShipmentInOut**" table is set to Active for accounting in the \[_Active Tables_\] tab of the organization's general ledger configuration.

A "Goods Receipt" posting looks like:

![Good receipts posting](https://docs.etendo.software/latest/assets/drive/1mZK5uBnpjcdWbDli0tdWrJc3fCvmR4bg.png)

Posting a "Goods Receipt" requires the calculation of the cost of the contained product/s.

In the case of a goods receipt, that is:

- the purchase price of the product/s
- or the default _standard cost_ of the product/s in case of calculating cost by using an Standard _costing algorithm_.

If there is not a related purchase order, the Costing Server process uses the newer of the following three values:

- the last purchase order price of the receipt's vendor for the product.
- the purchase price list of the product.
- or the _default cost_ of the product.

Moreover:

- The "Legal Entity" organization needs to have a validated _Costing Rule_ configured.
- And the _Costing Background Process_ needs to be scheduled for the _Client_, therefore it can search and allow that the _Costing Server_ process calculates the cost of the transactions.

Once the costs have been calculated, the **Goods Receipt can be posted** to the ledger.

In the case of a receipt containing "Expense" product/s without the "Sales" checkbox selected, it is possible to use the product's purchase price instead of the product's cost to post the goods receipt.

This works if the checkbox _Book Using Purchase Order Price_ is selected for the product/s.

In this case, it is required that a "Purchase Order" is related to the posted "Goods Receipt".

###### **Voiding**

It is possible to totally void a goods receipt by using the header button **"Close"** and then selecting the action "**Void**".

This action creates a **new document** that **reverses the goods receipt.**

Void action allows to specify a "**Void Date**" and a "**Void Accounting Date**" of the new document:

- **Void Date**: that is the movement date of the new document that reverse the goods receipt.
- **Void Accounting Date**: that is the accounting date of the new document that reverse the goods receipt.

Both fields above take original document dates as default date and validate that the dates entered are not prior to the "Movement Date" and the "Accounting Date" of the Goods Receipt, respectively.

Void action implies that:

- Etendo automatically generates a **new document** in the "Goods Receipt" window, and **informs about the document number** created. The document number is also displayed in the description field of the Goods Receipt. This new document is created as described below:
  - The "**transaction document**" used by Etendo is "**MM Receipt**".
  - This document is **exactly the same as the original** one being reversed **but the movement quantity is negative.**
  - Once the **new document** has been created, you can **change** both the "**Movement Date**" and the "**Accounting Date**" of the new document prior to getting it posted.

###### **Landed Cost**

Landed Cost tab allows to allocate additional costs to the goods receipt.

![Landed cost window](https://docs.etendo.software/latest/assets/drive/1YND6qqNXSCzLiiq_PICSVr3GymXZi6_o.png)

It is possible to enter as many landed cost types/lines as required.

Some relevant fields to note are:

- **Landed Cost Type**: that is the landed cost type that is going to be allocated to the goods receipt.
- **Invoice line**: that is to select the corresponding landed cost invoice line if any, that matches the landed cost type being entered.  
  If an invoice line is selected, the invoice line amount gets populated in the next field "Amount".
- **Amount**: that is the landed cost amount. This amount can be an "estimation" or a "real" amount in case of selecting an invoice line.
- **Landed Cost Distribution Algorithm**: that is the one distributed by Etendo "Distribution by Amount", which means that the landed cost amount is going to be distributed among the goods receipt lines proportionally by receipt line amount.

Once all items above are filled in, including corresponding landed cost purchase invoice line, both "Goods Receipt" and Landed Cost _process matching_ are executed by clicking on the "**Complete**" process button.

##### How to Reactivate Goods Receipts

!!! info
    To be able to include this functionality, the Warehouse Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Warehouse Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=EFDA39668E2E4DF2824FFF0A905E6A95){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Warehouse Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/warehouse-extensions/release-notes.md).

From the Goods Receipt window, it is possible to reactivate a previously generated movement just by selecting the corresponding document and clicking the Reactivate button.

Once the receipt is successfully reactivated, the state of the document changes to Draft as it can be observed in the status bar.

![](https://docs.etendo.software/latest/assets/drive/1-Z-wUYZfcGDizQ_Kkp8TUYXTs-KnM67H.png)

!!! warning
    Note: It is not possible to reactivate documents that include transactions with quantities exceeding the existing stock quantity for a certain product in a certain storage bin. The only exception is when the configuration of the storage bin allows Over Issue. For more information, visit [Storage Bin](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#storage-bin).

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

##### Bulk Completion

!!! info
    To be able to include this functionality, the Essentials Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Essentials Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=39AC2D9F72124AC7A1D0A3D005293C9E){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Essential Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/essentials-extensions/release-notes.md).

The Bulk Completion functionality allows the user to complete, reactivate or close multiple records by selecting them and clicking the **Bulk Completion** button. This makes records management easier and more efficient, reducing the time spent processing individual records.

!!! info
    For more information, visit [the Bulk Completion module user guide](https://docs.etendo.software/latest/optional-features/bundles/essentials-extensions/bulk-completion.md).

#### Pending Goods Receipts

:material-menu: `Application` > `Procurement Management` > `Transactions` > `Pending Goods Receipts`

This window allows the user to:

- **Use the Filter options** to narrow down the search of pending purchase orders to be delivered. It is possible to search by:
    - Business Partner
    - From Purchase Order Date -> To Purchase Order Date
    - Purchase Order number
- Enter a **"Reception date".**
- **Select** the "**Order line/s of a purchase order/s" delivered** which are shown grouped by Business Partner and Purchase Order.
- **Change** the "**Quantity**" of the goods being receipt if needed.
- **Enter** the "**Goods receipt location**" or storage bin within a warehouse.
- **Process it** in order to create the corresponding goods receipts.

![Pending goods receipts window](https://docs.etendo.software/latest/assets/drive/1hGrJ6YXXd1p20ZdLQefX1o6_8nVogOd8.png)

#### Purchase Invoice

:material-menu: `Application` > `Procurement Management` > `Transactions` > `Purchase Invoice`

The Purchase Invoice window allows the user to register and manage supplier's invoices.

This stage of the chain **usually comes after "Goods Receipts" booking and management**.

A purchase invoice is an itemized statement of the goods or services provided by a vendor or supplier. It indicates the quantity and price of each product or service provided or to be provided.

Suppliers could send the corresponding purchase invoice/s together with the delivery note/s attached to the goods, that implies that "Purchase Invoices" can be automatically generated from the "Goods Receipt" window, but it is possible that this is not the case, therefore a Purchase Invoice can also be created from scratch in the "Purchase Invoice" window.

The purchase expenses can be recognized as soon as the purchase invoice is accounted, however if an expense deferred plan is configured, it is possible to defer the expense recognition as required.

Supplier invoices can be registered, booked and managed in the header section of the purchase invoice window.

##### Header

**Header** lists the main terms and conditions related to the purchase invoice.

!!! info
    In the majority of cases, the main (and the only) field needed to create a new purchase invoice document is the Business Partner field. All other fields will be pre-filled automatically based on the selected Business Partner, logged in User preferences and other system default parameters.

Some other fields to note are:

- **Transaction document** defaulted as "AP Invoice" or purchase invoice _document type_ which can be manually changed to either "AP Credit Memo" or "Reversed Purchase Invoice".
  - "AP Credit Memo" and "Reversed Purchase Invoice" document types can be considered credit purchase invoices, the difference between them is that:
    - "AP Credit Memo" type must contain either an "Invoiced Quantity" > 0 or "line Net Amounts" >0.  
      Above implies that invoices set as "Credit Memo" should not be related to "Orders" or "Shipments".
    - "Reversed Purchase Invoice" type must contain either an "Invoiced Quantity" <0 or "line Net Amounts" < 0. These are the invoice types that can be related to return "Orders" or "Shipments".
- **Document No**. you could manually fill in the supplier's invoice number in this field, if the document sequence number associated with the transaction document "AP Invoice" is set up to allow you to do that; otherwise it will be automatically provided by the system as an "Internal" purchase invoice number.
- **Invoice Date**: the date the invoice is registered. It is used to calculate when the payment of the invoice is due. Defaults to the current date can always be changed.
- **Accounting Date**: the date to be used in the posting record of the Purchase Invoice to the general ledger. Defaults to the Invoice Date field can always be changed.
- **Payment Terms**: indicates **how** an invoice should be paid. Defaulted according to the Vendor/Creditor tab of the _Business Partner_ window.
- **Payment Method**: defines **when** a purchase invoice needs to be paid. Defaulted according to the Vendor/Creditor tab of the _Business Partner_ window.
- **Supplier Reference**: this is a not-mandatory field which can be used to enter the supplier invoice number.

There are 3 ways of entering lines into the purchase invoice, two of them from the invoice header and the last one from the **Lines** tab:

1.  Selecting products from pending to be invoiced orders or receipts using the _Create Lines From Order and Create Lines From Receipt_ buttons.
2.  Copying all products from the chosen invoice selected in the history of all invoices for different business partners using the _Copy Lines_ button.
3.  Manually, line by line in the _Lines_ tab. This option is used if the underlying document (Purchase Order or Goods Receipt) does not exist in the system prior invoicing takes place.

The **Complete** button finishes the creation of the invoice document with the fulfillment of the _Payment Plan_ tab and the _Payment Monitor_ section in the Header. If there are non-stockable BOM products in the lines and they have not been exploded, the Complete button will explode them automatically.

Once completed, a purchase invoice can be:

- **posted** to the ledger by using the button _Post_
- **voided** by using the button _Reactivate_
- and **paid** by using the button _Add Payment_.

![Purchase invoice window](https://docs.etendo.software/latest/assets/drive/1JvS1mOjiiyATJENTs5SuQIyEAr-UHmE3.png)

###### Remittance

!!! info
    To be able to include this functionality, the Remittance module of the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Remittance module provides the header of the Purchase Invoice with a new field: “Bank account”.

![bank_account.png](https://docs.etendo.software/latest/assets/legacy/bank_account.png)

This field defines the corresponding bank account for transactions. Each business partner can have more than one bank account and, in this field, the user can select which of them to use.


???+ note
    When using the option “Create lines from orders”, if all orders have the same bank account, the invoice uses that bank account. If not, it uses the default one.
  
###### Advanced Bank Account Management

!!! info
    To be able to include this functionality, the Advanced Bank Account Management module of the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

This module adds a new section to the header of the Purchase Invoice window: Advanced Bank Account Management. In this section, the user can find the Bank Account field which is automatically filled with the bank account related to the adress or business partner of the invoice.

!!! info
    For more information, visit the [Advanced Bank Account Management user guide](https://docs.etendo.software/latest/optional-features/bundles/financial-extensions/advanced-bank-account-management.md)

##### **Lines**

Once the purchase invoice header has been properly filled in and saved purchase invoice lines can be registered in this tab.

Lines list each product to be purchased and its characteristics.

The fields to note are:

- **Financial Invoice Line** is selected when the invoice line is not a product but an account not set up as a product but as a _G/L Item_, or an asset not set up as a product.  
  When selected, the product field disappears from the screen and an account field appears related to the purchase invoice line.
- **Attribute Set Value**: field is displayed if the product in the line has _attributes_ (color, size, serial number or several of them together etc).
- **Purchase Order Line and Goods Receipt Line**: references to the purchase order and goods receipt line that is being invoiced.

As already mentioned, purchase expenses can be deferred therefore they are not recognized at the purchase accounting date but within a given number of accounting periods.

When a purchase invoice line is created, it is possible to define at line level whether the line is going to cause the expense to be deferred. The relevant fields are:

- **Deferred Expense**: When this flag is checked, the Expense Plan field group becomes visible, allowing users to configure the next three fields.
- **Expense Plan Type**: This field specifies the frequency of the expense distribution which currently is "monthly".
- **Period Number**: This field specifies the duration of an expense plan.  
  For instance, if a company purchases business insurance for the duration of the year, the period number to enter would be 12 as the company would like to distribute that expense over 12 months.
- **Starting Period**: The first open period in which the expense is going to be recognized.

These fields can be defaulted if configured for the _product_.

If an expense plan is configured, it implies a specific _purchase invoice accounting_.

**Explode** button is shown when selecting a line with a non-stockable BOM product and the product is not already exploded. When exploding a product, the bill of materials components the selected product consists of are shown in the invoice. Once you have exploded it, you cannot comprime it. You should delete all the lines (first bill of materials components and then the BOM product), and insert again the non-stockable BOM product.

**Match LC Cost** button is shown when the purchase order line contains either an "account" or a "product" setup as _landed cost type_.

This process button allows to **match** both the "**estimated**" landed cost booked in the _landed cost_ window, and the one being **invoiced** in the invoice line. Both need to be of the very **same landed cost type**.

Once selected, **"Match LC Cost**" button opens the **"Match LC Cost" pick and edit window**.

Only processed Landed Cost documents will be shown in this Window. It allows you to pick the corresponding landed cost, to enter an amount to match in the field "Matched Amt", and then to select the "**Process Matching**" check-box.

!!! warning
    Note that if the "Process Matching" check-box is not selected here, landed cost matching will have to be processed in the _landed cost_ window by using **Process Matching** button.

##### How to Reactivate a Voided Purchase Invoice

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the [marketplace](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

Etendo allows the user to reactivate voided purchase invoices by selecting the needed one/s and clicking the Unvoid button.

![](https://docs.etendo.software/latest/assets/drive/1UisxZzbpppLvN_rdL__TJg8tLeh5sMfW.png)

Once the process is finished, the sales invoice status turns to Complete.


???+ note 
    In the case of the standard version of the module, it is necessary for the user to also unvoid the corresponding reversed invoice.
!!! warning
    Remember that this reactivation process affects the accounting, since, if the original information is not manually removed from the reactivated document, the accounting information will be doubled.

!!! info
    Check the Technical documentation about Advanced Financial Docs Processing to extend the process.

##### Payment Removal

The aim of this functionality is to delete and reactivate payments in an agile and easy way. Also, it allows eliminating and reactivating bank transactions and reconciliations.

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

From this window, it is possible to delete payments associated with a purchase invoice by selecting the corresponding document and then clicking on the Remove Payment button. If there is an order associated with the invoice, the relationship of this order to the payment in question will also be deleted (Purchase Order window > Payment Plan tab).

If the payment is included in the financial account, i.e., if it is in Deposited/Withdrawn not cleared status, the transaction in it will also be deleted (Financial account window > Transaction tab).

If the payment is reconciled through an automatic method, then in addition to the transaction in the financial account, the line of the bank statement to which it was linked (Financial Account window > Imported Bank Statements) and the corresponding line of the bank reconciliation (Financial Account > Reconciliations) will be deleted.

!!! info
    If the payment is posted, the accounting entry is deleted too.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/procurement-management/transactions/PRpic4.png)

##### Intercompany

In case the user has to create orders or invoices among two or more organizations that are different but belong to the same client, this functionality allows automatically generating the corresponding inverse document.

!!! info
    For more information, visit [the Intercompany module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/overview.md#intercompany).

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

##### Bulk Completion

!!! info
    To be able to include this functionality, the Essentials Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Essentials Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=39AC2D9F72124AC7A1D0A3D005293C9E){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Essential Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/essentials-extensions/release-notes.md).

The Bulk Completion functionality allows the user to complete, reactivate or close multiple records by selecting them and clicking the **Bulk Completion** button. This makes records management easier and more efficient, reducing the time spent processing individual records.

!!! info
    For more information, visit [the Bulk Completion module user guide](https://docs.etendo.software/latest/optional-features/bundles/essentials-extensions/bulk-completion.md).

#### Matched Invoices

:material-menu: `Application` > `Procurement Management` > `Transactions` > `Matched Invoices`

This window helps the user to post the discrepancies between inventory and financial accounting of those items for which the corresponding goods receipts were posted.

Above mentioned discrepancies are mainly caused by differences between:

- the **item's net unit price registered when booking the purchase order** and later on **posting the corresponding Goods Receipt.**
- and the **"final" item's net unit price registered when posting the purchase invoice.**

In the window, there is a listing of all invoices that are matched to goods receipts. The matching of the documents is done when documents are created by using the information of the other document: for example by clicking the Generate Invoice from receipt on the goods receipt or by clicking the Create Lines from button when creating a goods receipt to select the invoice.

![Matched invoices window](https://docs.etendo.software/latest/assets/drive/1AUhlJDfTAknIjUueLpm4QCCmZSwz1vBg.png)

###### **Matched Invoice**

Matched invoice tab lists each invoice line posted linked to the corresponding goods receipt lines, which could also be posted or not.

There is a "**Post**" header button which is the one that posts the discrepancies between inventory and financial accounting if any, once the proper line has been selected.

The general process to post the discrepancies in accounting is detailed below:

A _Matching Invoice_ document can be posted if the cost of the products included in a _Goods Receipt_ has been calculated. To obtain that:

- A validated _Costing Rule_ is required in the Matched Invoice's legal entity,
- and the background process _Costing Background Process_ must be run.

In the case of "Expense" product/s do not having the "Sales" checkbox selected, it is possible to use the product's purchase price instead of the product's cost whenever the checkbox _Book Using Purchase Order Price_ is selected. In this case, it is required that a "Purchase Order" is related to the "Goods Receipt".

###### **Accounting**

Accounting information related to the matched invoices

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

#### Return to Vendor (RTV)

:material-menu: `Application` > `Procurement Management` > `Transactions` > `Return to Vendor`

This window allows the user to create a Return Material document in case a given product needs to be sent back either to be returned for a refund or replacement, or to be repaired.

##### **Header**

The user can create a purchase order and process it.

Once the Return Material document is accepted by the Vendor, the user can process it by clicking the button **Book**. The document changes from _Draft_ to _Booked._

![Return to vendor window](https://docs.etendo.software/latest/assets/drive/1PKb2NIyq5HtvO_4abDPQjajObdcGFiPH.png)

Only _Booked_ documents can be shipped to the vendor.

!!! warning
    Notice the button **Pick/Edit lines** disappears when the Return to vendor document is in status _Booked._

##### **Lines**

Add products to be included in your purchase order. Each product is added by creating a line.

The Lines tab is not editable, since the returned lines always come from receipt lines, to avoid:

- Seeing positive values while negative in the DB.
- Entering lines that are not linked to the original receipt lines.
- Editing attributes, products and so having either the products or attributes different from the shipment line.

To enter new lines you need to click the process button PICK/EDIT Lines.

**Things to consider:**

- The only editable fields are:
  - **Returned**: Quantity you wish to return. When selecting the row, the quantity is not set by default since the system cannot know how many items return.
  - **Net Unit Price**: Price of the original purchase order.
  - **Return reason**: The reason why you return the item.
  - and **Returned UOM**, only in case \*alternative unit of measure (AUM)\*preference is enabled.  
    In that case, product's "primary" AUM for the purchase flow is shown if any, otherwise product's UOM is shown. The user can always change it to product's UOM.

You can define the Return Reason at header level. In this case when picking a line it inherits what selected in the header but you can modify it as you wish.

- Only Material receipt documents that have not been still returned can be picked it, in case a Receipt line has been fully returned it will not be shown.
- When a Receipt line has been partially returned you can still return the rest. What you have already returned for that line is shown in the field **Return Qty other R.**

**Validations:**

- You are not allowed to return more quantity than the **Ship/Receipt Qty**. In case you do it a message is shown.
- Notice that this validation takes into account the **Return Qty other RM** field

!!! info
    To edit a line you need to click again the **Pick/Edit Lines** button and the line appears selected and then you can modify any of the editable fields.

!!! info
    To delete a line you need to unmark the line and then click Done.

##### Bulk Completion

!!! info
    To be able to include this functionality, the Essentials Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Essentials Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=39AC2D9F72124AC7A1D0A3D005293C9E){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Essential Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/essentials-extensions/release-notes.md).

The Bulk Completion functionality allows the user to complete, reactivate or close multiple records by selecting them and clicking the **Bulk Completion** button. This makes records management easier and more efficient, reducing the time spent processing individual records.

!!! info
    For more information, visit [the Bulk Completion module user guide](https://docs.etendo.software/latest/optional-features/bundles/essentials-extensions/bulk-completion.md).

#### Return to Vendor Shipment

:material-menu: `Application` > `Procurement Management` > `Transactions` > `Return to Vendor Shipment`

From this window, the user can deliver the returned goods to the vendor.

##### **Header**

The user can create and edit a goods receipt.

The **RMA vendor ref.** field is populated automatically or not based on:

- If it is filled before selecting a line, then it will not be populated automatically to avoid override it.
- If you select a line/s where all of them belong to the same Return to Vendor document, it will be populated automatically.
- If you select a line/lines but one of them belongs to a different Return to Vendor document, then it will not be populated automatically.

Once the document is ready, you can process it by clicking the button **Complete**. The document changes from _Draft_ to _Completed._

!!! warning
    Notice the button **Pick/Edit lines** disappears when the Return to vendor document is in status _Completed._

![Return to vendor shipment](https://docs.etendo.software/latest/assets/drive/1wuiYHH8xsIwjLRgp0VzWUqAtev43BzD8.png)

To invoice these documents you must use the **Purchase invoice** window. All scenarios are covered:

- If the vendor sends an invoice just for that specific document you need to select a _Reverse purchase invoice_ document type and then select the lines through the _Create lines_ from button.
- If the vendor sends an invoice with the original purchase order plus the return materials order you need to select a _Purchase invoice_ document type and then select the lines through the _Create lines_ from button.
- If the vendor does not send an invoice for the return materials order but wants to keep it as credit where you can use it later, you have to:
  - Create a _Reverse purchase invoice_ for these returned materials.
  - Leave it as credit to be used later through the **Payment out** window.
  - When you create the Purchase invoice for the original Purchase order you can consume that credit.

##### **Lines**

Add products which are included in your goods receipt. Each product is shown on its own line.

The Lines tab is not editable, since the lines always come from return to vendor lines, to avoid:

- Seeing positive values while negative in the DB.
- Entering lines that are not linked to return lines.
- Editing attributes, products and so having either the products or attributes different from the return line.

!!! info
    To enter new lines, the user needs to click the button PICK/EDIT Lines.

**Things to consider:**

- Editable fields are:
  - **Ship Qty**, that value is set automatically when you select the line,
  - and **Returned UOM**, only in case an alternative unit of measure (AUM) preference is enabled, regardless product's UOM is always shown there by default.  
    The user can change it if required, to the product's primary AUM configured for the procurement flow.
- The user can only select Return to Vendor lines that are pending to be shipped to that specific vendor.
- The system proposes the different storage bins from where the item can be picked. Depending how the product is configured we could have three scenarios:
  - Product with an instance attribute (i.e: Serial number): The system will propose only one storage bin as it is shown above.
  - Product with a non-instance attribute (i.e: Colour): The system could propose several storage bins. See below image
  - Product without attributes. Similar to second scenario.

**Validations:**

- You are not allowed to ship more than the **Available Qty.**
- You are not allowed to ship more than the **Pending** quantity.
- The system also validates you cannot ship more than the **Pending** quantity when selecting both lines.

!!! info
    To edit a line, you need to click the **Pick/Edit Lines** button again, the line appears selected and then you can modify any of the editable fields.

!!! info
    To delete a line, you need to unmark the line and then click Done.

If there is not enough available stock for a product in a selected line, then it will be possible to define a Ship Quantity and select it. if there is at least one storage bin with overissue inventory status for the Return To Vendor Shipment's warehouse, in this case the new line will use it as storage bin and it will create a negative stock when the document is processed.

###### **Accounting**

The RTV shipment can be posted **if the table "MaterialMgmtShipmentInOut" is** active for accounting **in the corresponding general ledger configuration.**

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

#### Landed Cost

:material-menu: `Application` > `Procurement Management` > `Transactions` > `Landed Cost`

Landed Cost window allows the user to allocate additional costs such as freight, insurance or duties to goods receipt(s), therefore the cost of the products included in the receipt(s) is adjusted as applicable.

All those costs are needed to place the product in the organization's warehouse.

Every time that a landed cost is booked for a product receipt valued at "Average" cost, a landed cost adjustment is created.

Landed costs distributed and allocated to products valued at "Average" cost imply a change in the inventory value of the product. In other words, the calculated cost ("Total Cost") of the product receipt will need to be adjusted the same as the "Average" cost of the product.

!!! info
    Note that the "Unit Cost" of the receipt transaction will not change as this type of adjustment is not a unit cost adjustment type but an "extra" cost.

All of the above will have an accounting impact, therefore product inventory value can be the same as product accounting value.

On the other hand, if a landed cost is booked for a product receipt valued at "Standard" cost, no cost adjustment will be created but a "Variance" between the "standard" cost defined for the product and its "actual" cost. This variance will need to be posted to a "Landed Cost Variance" account, so it can be later on analysed.

Landed cost window allows both:

- either to book "**estimated**" landed cost that can be later on matched against "actual" landed cost by landed cost type,
- or directly book "**actual**" landed cost by landed cost type.

Landed cost window also allows to post landed costs once processed.

"**Estimated**" Landed Cost scenario:

- A purchase order is booked and after that the corresponding goods receipt and purchase invoice.  
  The "average" cost of the products included in the receipt is calculated at this point.
- After that "estimated" landed costs (i.e freight costs) are allocated to the goods receipt and booked in the landed cost window.  
  The cost of the products included in the receipt is then adjusted the same as products asset accounting.
- After that, a purchase invoice including the actual amount of freight cost is booked and posted to the ledger.
- Then, it is possible to match "estimated" landed cost against "invoiced" landed cost.  
  The cost of the products included in the receipt is adjusted once more if there are differences between estimated and actual landed cost amounts.

"**Actual**" Landed Cost scenario:

- A purchase order is booked and after that, the corresponding goods receipt and purchase invoice.  
  The "average" cost of the products included in the receipt is calculated at this point.
- After that, a landed cost document is created to record actual landed cost to the goods receipt.  
  The cost of the products included in the receipt is then adjusted the same as products asset accounting.

In Summary, landed cost feature follows below detailed steps:

- **Landed Cost Process**:
  - A landed cost document is created including as many different landed cost types and amounts as required.
  - This landed cost document can be related to a single goods receipt, to several goods receipts or to specific goods receipts lines.
  - This landed cost document can record "actual" landed cost in case of selecting the corresponding invoice, therefore the landed cost process and matching is done in one step.
  - Landed cost is processed.
    - This action creates a _landed cost adjustment_ linked to the landed cost document.  
      This cost adjustment has as many adjustment lines as products included in the goods receipt(s) selected, therefore the cost of those products is adjusted as applicable.
- **Landed Cost Post**:
  - Once a landed cost document is processed it can be posted to the ledger, therefore product(s) asset accounting is adjusted as well.
- **Landed Cost Matching**:
  - Landed cost invoice is booked and posted to the ledger later on.
  - After that the "estimated" landed cost booked in the landed cost document can be matched against actual landed costs by landed cost type in the landed cost invoice.
  - Landed cost matching can generate an additional cost adjustment for the product(s) if estimated landed cost amounts were not the same as actual landed cost amounts.
- **Landed Cost Matching Post**:
  - Once landed cost(s) are matched can be posted therefore:
    - product(s) asset accounting is adjusted once more if applicable,
    - and landed cost posting gets landed cost invoice _accounting dimensions._

##### Header

A Landed Cost document can be created, processed and posted in this window.

![Landed cost header](https://docs.etendo.software/latest/assets/drive/1YND6qqNXSCzLiiq_PICSVr3GymXZi6_o.png)

Some fields to note are:

- **Organization**: that is the organization or legal entity for which landed cost needs to be booked.
- **Reference date**: that is the date when the landed cost document is being created.

**Cost**

A Landed Cost Document can have as many cost (lines) as landed cost types to allocate to the Goods Receipt(s) selected.

![Landed cost tabs](https://docs.etendo.software/latest/assets/drive/1jbfoYTDqyRZiF3bTwPQkG8OmjpLr0zau.png)

Some fields to note are:

- Landed Cost Type: that is the landed cost type that is going to be allocated to the receipt(s) or receipt line(s) selected in Receipt tab.
- **Invoice line**: that is to select the corresponding landed cost invoice line if already booked that matches the landed cost type being entered.  
  If an invoice line is selected,the invoice line amount gets populated in the next field "Amount".
- **Amount**: that is the landed cost type amount. This amount can be "estimated" or "actual" in case of selecting an invoice line.
- **Currency**: that is the currency of the landed cost type.
  - It is important to remark that a landed cost document can include as many landed cost types as required in the currency required.  
    For instance, a landed cost document can include two landed cost type lines one in USD and the other one in EUR.  
    In this scenario, a landed cost adjustment will be created including two lines. Cost adjustment amounts will be calculated in the currency configured for the legal entity product transaction belongs to.
- **Landed Cost Distribution Algorithm**: there is one algorithm available distributed by Etendo that is "Distribution by Amount".  
  This algorithm distributes landed cost type amount proportionally by receipt line(s) amount among the receipt(s) selected.

Once a receipt(s) has been selected in Receipt tab, landed cost document (header) can be processed by using the process button "**Process**".

This action creates a landed cost adjustment linked to the landed cost document.

This cost adjustment has as many adjustment lines as products included in the goods receipt(s) selected, therefore the cost of those products is adjusted as applicable.

Once processed, a landed cost document can be:

- **"Reactivated"**, this action voids the landed cost adjustment linked to the landed cost document.
- or **"Post"**, therefore product asset accounting is also adjusted accordingly.

**Landed Cost** posting creates the following accounting entries in case of a "Product" landed cost type:

|                 |                                                                                                                                                           |                                |
| --------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------ |
| Account         | Debit                                                                                                                                                     | Credit                         |
| Product Asset   | "Estimated" Landed Cost Amount.<br><br>(\*)This ledger entry gets goods receipt "accounting dimensions" such as "Vendor" or "Product". See "Detail" link. |                                |
| Product Expense |                                                                                                                                                           | "Estimated" Landed Cost Amount |

**Landed Cost** posting creates the following accounting entries in case of an "Account" landed cost type:

|                   |                                                                                                                                                           |                                |
| ----------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------ |
| Account           | Debit                                                                                                                                                     | Credit                         |
| [_Product Asset_] | "Estimated" Landed Cost Amount.<br><br>(\*)This ledger entry gets goods receipt "accounting dimensions" such as "Vendor" or "Product". See "Detail" link. |                                |
| [_G/L Item_]      |                                                                                                                                                           | "Estimated" Landed Cost Amount |

####### **Process Matching**

Matching between an "estimated" landed cost and an "invoiced" landed cost can be processed in:

**1.** The **GOODS RECEIPT** window before processing and by using the process button "**Complete**"

This scenario takes place whenever all landed cost related information below is available and entered in the Landed Cost tab of the **Goods Receipt** :

- landed cost types
- landed cost amounts
- related landed cost invoice lines

This scenario automatically creates:

- a landed cost document in the **landed cost** window related to the goods receipt that contains all the information entered in the "Landed Cost" tab of the Goods Receipt.  
  This landed cost document is already processed and matched, therefore only actions missing are to post the landed cost document (header) and to post the landed cost matching.
- a landed cost adjustment that adjusts the cost of each product included in the Goods Receipt.

**2**. The **Landed Cost PURCHASE INVOICE** window, by using the process button Match LC Cost which can be found in each landed cost purchase invoice line. After that **"Process Matching" check-box** is selected.

This scenario takes place whenever:

- all landed cost related data but landed cost invoice line information was entered in the Landed Cost tab of **Goods Receipt** window.
- all landed cost related data but landed cost invoice line information was entered in the Cost tab of **Landed Cost** window.

This scenario automatically creates:

- a new landed cost adjustment that adjust once more the cost of each product included in the Goods Receipt if:
  - the landed cost type amount booked is not the same as the one invoiced
  - and the check-box "Is matching adjusted" is selected.
- only action missing is to post the landed cost matching.

**3.** The **LANDED COST** window, by using the process button "**Process Matching**"

This scenario takes place whenever the matching has been executed in the landed cost purchase invoice, see scenario 2 above, but the check-box "Process Matching" was not selected there.

This scenario automatically creates:

- a new landed cost adjustment that adjusts once more the cost of each product included in the Goods Receipt if the landed cost type amount booked is not the same as the one invoiced and the check-box "Is matching adjusted" is selected.
- only action missing is to post the landed cost matching.

**4.** The **LANDED COST** window, by using the process button "**Process**".

This scenario takes place whenever all landed cost related information is entered in the **landed cost** window.:

- landed cost types
- landed cost amounts
- related landed cost invoice lines
- and goods receipt(s)

This scenario automatically creates:

- a landed cost adjustment that adjust the cost of each product included in the Goods Receipt(s).
- only actions missing are to post the landed cost document (header) and to post the landed cost matching.

####### **Post Matching**

A landed cost matching can be posted, after being processed. This posting will have different ledger entries depending on the scenarios listed below:

1\. "**Estimated**" landed cost **equal** to "**invoiced**" landed cost

- In the case of a "product" landed cost type

|                     |                                           |                                                                                                                                                                        |
| ------------------- | ----------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Account             | Debit                                     | Credit                                                                                                                                                                 |
| [_Product Expense_] | "Estimated"="Invoiced" Landed Cost Amount |                                                                                                                                                                        |
| [_Product Expense_] |                                           | "Estimated"="Invoiced" Landed Cost Amount<br><br>(\*)This ledger entry gets landed cost invoice "accounting dimensions" such as "Business Partner". See "Detail" link. |

- In the case of an "account" landed cost type

|              |                                           |                                                                                                                                                                        |
| ------------ | ----------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Account      | Debit                                     | Credit                                                                                                                                                                 |
| [_G/L Item_] | "Estimated"="Invoiced" Landed Cost Amount |                                                                                                                                                                        |
| [_G/L Item_] |                                           | "Estimated"="Invoiced" Landed Cost Amount<br><br>(\*)This ledger entry gets landed cost invoice "accounting dimensions" such as "Business Partner". See "Detail" link. |

The purpose of above ledger entries is to get that landed cost expense accounting gets invoice landed cost "accounting dimensions".

2\. "**Estimated" landed cost not equal to "invoiced" landed cost** & **"Is matching adjusted" = No**.

This last setup ("Is matching adjusted" = No) leads to NOT creating a landed cost adjustment which takes the difference to the product cost (product accounting), therefore that difference remains either in the credit side (estimated>invoiced) or in the debit side (estimated<invoiced) of the product expense account.

- In the case of a "product" landed cost type

|                     |                               |                                                                                                                                                            |
| ------------------- | ----------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Account             | Debit                         | Credit                                                                                                                                                     |
| [_Product Expense_] | "Invoiced" Landed Cost Amount |                                                                                                                                                            |
| [_Product Expense_] |                               | "Invoiced" Landed Cost Amount<br><br>(\*)This ledger entry gets landed cost invoice "accounting dimensions" such as "Business Partner". See "Detail" link. |

- In the case of an "account" landed cost type

|              |                               |                                                                                                                                                            |
| ------------ | ----------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Account      | Debit                         | Credit                                                                                                                                                     |
| [_G/L Item_] | "Invoiced" Landed Cost Amount |                                                                                                                                                            |
| [_G/L Item_] |                               | "Invoiced" Landed Cost Amount<br><br>(\*)This ledger entry gets landed cost invoice "accounting dimensions" such as "Business Partner". See "Detail" link. |

3\. "**Estimated**" landed cost **higher** than "**invoiced**" landed cost. **"Is matching adjusted" = Yes**

This last setup ("Is matching adjusted" = Yes) leads to creating a landed cost adjustment which takes the difference to the product cost (credit side of product accounting).

- In the case of a "product" landed cost type

|                     |                                |                                                                                                                                                            |
| ------------------- | ------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Account             | Debit                          | Credit                                                                                                                                                     |
| [_Product Expense_] | "Estimated" Landed Cost Amount |                                                                                                                                                            |
| [_Product Expense_] |                                | "Invoiced" Landed Cost Amount<br><br>(\*)This ledger entry gets landed cost invoice "accounting dimensions" such as "Business Partner". See "Detail" link. |
| [_Product Asset_]   |                                | Difference (estimated>invoiced) Landed Cost Amount                                                                                                         |

- In the case of an "account" landed cost type

|                   |                                |                                                                                                                                                            |
| ----------------- | ------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Account           | Debit                          | Credit                                                                                                                                                     |
| [_G/L Item_]      | "Estimated" Landed Cost Amount |                                                                                                                                                            |
| [_G/L Item_]      |                                | "Invoiced" Landed Cost Amount<br><br>(\*)This ledger entry gets landed cost invoice "accounting dimensions" such as "Business Partner". See "Detail" link. |
| [_Product Asset_] |                                | Difference (estimated>invoiced) Landed Cost Amount                                                                                                         |

4\. "**Estimated**" landed cost **smaller** than "**invoiced**" landed cost. **"Is matching adjusted" = Yes**

This last setup ("Is matching adjusted" = Yes) leads to creating a landed cost adjustment which takes the difference to the product cost (debit side of product accounting).

- In the case of a "product" landed cost type

|                     |                                                    |                                                                                                                                                            |
| ------------------- | -------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Account             | Debit                                              | Credit                                                                                                                                                     |
| [_Product Asset_]   | Difference (estimated<invoiced) Landed Cost Amount |                                                                                                                                                            |
| [_Product Expense_] | Difference (estimated<invoiced) Landed Cost Amount |                                                                                                                                                            |
| [_Product Expense_] |                                                    | "Invoiced" Landed Cost Amount<br><br>(\*)This ledger entry gets landed cost invoice "accounting dimensions" such as "Business Partner". See "Detail" link. |

- In the case of an "account" landed cost type.

|                   |                                                    |                                                                                                                                                            |
| ----------------- | -------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Account           | Debit                                              | Credit                                                                                                                                                     |
| [_Product Asset_] | Difference (estimated<invoiced) Landed Cost Amount |                                                                                                                                                            |
| [_G/L Item_]      | Difference (estimated<invoiced) Landed Cost Amount |                                                                                                                                                            |
| [_G/L Item_]      |                                                    | "Invoiced" Landed Cost Amount<br><br>(\*)This ledger entry gets landed cost invoice "accounting dimensions" such as "Business Partner". See "Detail" link. |

####### **Cancel Matching**

A landed cost matched can be canceled by using header process button "**Cancel Matching**". Before that landed cost matching needs to be "Unpost".

Cancel matching action implies that:

- Current matched amounts are not removed from Matched Amount tab.
- A new matching needs to be executed in the corresponding landed cost purchase invoice(s).
- Correct matching amounts will then be updated in Matched Amount tab.

###### **Matched Amount**

Matched Amount tab is a read only tab that allows to review the purchase invoice lines matched against landed cost lines.

###### **Accounting Cost**

This tab provides Landed Cost document accounting information.

As any other accounting tabs, this tab shows the ledger journal entries of landed cost posting.

###### **Receipt**

Receipt tab allows the user to select either the receipt(s) or receipt line(s) to which landed cost types booked are going to be allocated.

Once **Landed Cost** header has been properly filled in and saved, a receipt(s) line can be registered in this tab.

Landed cost amounts entered in the "Cost" tab can then be allocated/distributed among the receipt(s) entered here.

Some relevant fields to note are:

- **Good Receipt**: that is to select a goods receipt, therefore landed cost amounts will be distributed among all the lines of the goods receipt.
- **Good Receipt Line**: that is to select a specific good receipt line.

Note that either a good receipt or a good receipt line needs to be selected in a record.

###### **Receipt Line Amount**

Receipt Line Amount is a read only tab that shows detailed information about the landed cost type line allocated to each receipt line, as well as the landed cost amount distributed to each receipt line.

It is important to remark that the "Amount" distributed is calculated by taking into account "Costing" precision defined for the Currency.

###### **Accounting**

This tab provides Landed Cost Matching accounting information.

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button. In this case, this functionality can be used in the **Landed Cost** window and in the **Cost** tab.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

---

This work is a derivative of ["Procurement Management"](http://wiki.openbravo.com/wiki/Procurement_Management){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Analysis Tools
## Article Path: /User Guide/Etendo Classic/Basic Features/Procurement Management/Analysis Tools
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/analysis-tools
## Article Content: 
#### Overview

This section describes the windows related to procurement reports in Etendo. These are:

[:material-file-document-outline: Purchase Order Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/analysis-tools.md#purchase-order-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Purchase Dimensional Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/analysis-tools.md#purchase-dimensional-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Goods Receipt Dimensional Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/analysis-tools.md#goods-receipts-dimensional-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Purchase Invoice Dimensional Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/analysis-tools.md#purchase-invoice-dimensional-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Matched Purchase Orders](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/analysis-tools.md#matched-purchase-orders){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Vendor Invoice Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/analysis-tools.md#vendor-invoice-report){ .md-button .md-button--primary } <br>


#### Purchase Order Report

:material-menu: `Application` > `Procurement Management` > `Analysis Tools` > `Purchase Order Report`

This report displays a detailed list of the purchase orders issued to the suppliers. 

#### Purchase Dimensional Report

:material-menu: `Application` > `Procurement Management` > `Analysis Tools` > `Purchase Dimensional Report`

##### Overview

This report displays information about the purchase orders issued and sent to the suppliers.

It is a dimensional type of report that shows information about registered purchases (Purchase Orders in a status Booked or Closed) during a selected period of time.

This report can display information about the most frequently used suppliers as well as the most frequently purchased goods, along with purchase amounts and ordered quantities information.

##### Parameters window

![](https://docs.etendo.software/latest/assets/drive/1tfjdJFeCwoMFq7Osb7iA4oCx8AQtsO5M.png)


There is no specific field to note, but just the dimensional primary and secondary filters which can be used to narrow down the information to be displayed.

##### Sample Report Output

![](https://docs.etendo.software/latest/assets/drive/1HteUH5sPx3PmrHdRqlR8S6l0EzDizuUu.png)

-   **Amount:** is the **net** amount from the Purchase Order converted to the report **Currency**.

#### Goods Receipts Dimensional Report

:material-menu: `Application` > `Procurement Management` > `Analysis Tools` > `Goods Receipts Dimensional Report`

##### Overview

This report displays information about the goods received in the organization.

This is a dimensional type of report that shows information about registered receipts during a selected period of time.

This report can display information about the most frequently used suppliers as well as the most frequently received goods, together with receipt amounts and receipt quantities information.

##### Parameters window

There is no specific field to note but just the dimensional primary and secondary filters which can be used to narrow down the information to be displayed.

![](https://docs.etendo.software/latest/assets/drive/1ihcncYc8rQoONnKy5KzGqN2IaYw5r18f.png)

!!! tip
    The outcome of this report can be viewed in HTML format and PDF format.

##### Sample Report Output

![](https://docs.etendo.software/latest/assets/drive/1lvq1Mtz7ed_qJW40ezxrQvqa5ssh5NgM.png)

#### Purchase Invoice Dimensional Report

:material-menu: `Application` > `Procurement Management` > `Analysis Tools` > `Purchase Invoice Dimensional Report`

##### Overview

This report displays information about the purchase invoices received in the organization. It is a dimensional type of report that shows information about registered purchase invoices (Purchase Invoices in a status *Completed* or *Voided*) during a selected period of time.

This report can display the total purchase amount of a given supplier, split by product and purchase invoice.

##### Parameters Window

![](https://docs.etendo.software/latest/assets/drive/1clo6ovc9uHR_-6Qp0KbU9gWcOUbG3ocQ.png)

There is no specific field to note, but just the dimensional primary and secondary filters which can be used to narrow down the information to be displayed.

##### Sample Report Output

![](https://docs.etendo.software/latest/assets/drive/1ZQC2irKKXg1XSxOCL2IFC-hbfFPlbHYB.png)

There is also the possibility to export this report to a PDF or a XLS file:


![](https://docs.etendo.software/latest/assets/drive/1SVvvkMUz-HUcjJKWdu7bSKuSpB5lY9Cz.png)

PDF format shows the same fields explained before, but in XLS format, it shows information related to selected invoices columns:

-   Organization
-   Business Partner Group
-   Business Partner
-   Document No.
-   Invoice Date
-   Product Category
-   Product
-   Product Search Key
-   Unit Price
-   Amount
-   Quantity

#### Matched Purchase Orders

:material-menu: `Application` > `Procurement Management` > `Analysis Tools` > `Matched Purchase Orders`

##### Overview

This window informs about the matching between each purchase order, goods receipt and invoice line.

##### Matched Purchase Order

Matched purchase order view informs about which purchase order line is linked to which receipt line and invoice line, if any.

![](https://docs.etendo.software/latest/assets/drive/1HSNC0staVcayYFKAOz3rc8KZDYUxl8Ym.png)

In other words, this window provides valuable information which helps to get a quick understanding of what order lines of a product have already been receipt and invoiced.

#### Vendor Invoice Report

:material-menu: `Application` > `Procurement Management` > `Analysis Tools` > `Vendor Invoice Report`

##### Overview

This report provides information about the total amount invoiced by each supplier within a given time period and for a given currency.

It displays supplier invoices information, which can be narrowed down in order to get information about those invoices related to a given project and/or to a given business partner within a given time period.

##### Parameters Window

![](https://docs.etendo.software/latest/assets/drive/1V8A7QEZI3fa7ecV6W-VK-ki_VXx_8Ii8.png)

Field to note:

-   Currency: It works in the same way as already described in the Purchase Order report.

##### Sample Report Output

![](https://docs.etendo.software/latest/assets/drive/1U3Fx3IPP0R9acd8XMPXhtBR5qQFoj2Am.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: ✨ Getting Started
## Article Path: /User Guide/Etendo Classic/Basic Features/Warehouse Management/✨ Getting Started
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/getting-started
## Article Content: 

#### Overview

<iframe width="720" height="480" src="https://www.youtube.com/embed/l7RMb0Oz7Wo?si=ngxYnwDkiDqwRkLO" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

In Etendo, most of the warehouse movements are created automatically based on the transactions of [Sales](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/getting-started.md) and [Procurement](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/getting-started.md) processes. However, operating a warehouse also involves several manual activities, such as physical inventory, goods movements and their tracking and inventory valuation. These activities are executed in the Warehouse Management application area and are gathered in the Inventory Accuracy business flow which is described below.

#### Inventory Accuracy

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/warehouse-management/getting-started/walltowallaccubusprocess.png)

Main sub-processes of the Inventory Accuracy business flow are:

- *Physical Inventory*: This is a process where a business physically counts individual items in stock at a particular point in time and updates their inventory count within the system (if needed). It represents an opportunity to correct any inaccuracies in the records. Here are several reasons to conduct a physical inventory:
    - To initiate the stock
    - To verify the physical amount, condition, and location of inventory items
    - To identify, document, and add items to its inventory list that are on-hand and meet qualifying criteria, but are not currently shown as part of the inventory
    - To ensure that legitimately transferred or disposed items are no longer carried on the inventory listing
    - To identify any missing or damaged items that need to be located, repaired, or replaced.
- *Goods Movement*: Transfers inventory between storage bins or warehouses. Possible reasons for goods movement are:
    - Goods received at warehouse from another party or warehouse.
    - Inventory movement due to conversion of goods.
- *Goods Tracking*: Displays all of the different movement types that happen in warehouse to verify the history, location, or application of an item by means of documented recorded identification.
- *Inventory Valuation*: Allows a company to provide a monetary value for items that make up their inventory.
- *Inventory Update*: Allows a company to change either current inventory amount or current unit cost of products in stock.
- *Cost Adjustments Review*: Allows a company to review product cost adjustments caused by changes in purchase prices, landed cost allocation or manual / negative cost corrections.

##### Configuration

[Warehouse and Storage Bins](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#warehouse-and-storage-bins) need to be created and configured before performing the business flow.
In addition to this, a [Costing Rule](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#costing-rules) needs to be defined and validated for the legal entity. Each costing rule requires a starting date from when it is going to be valid as well as a [Costing Algorithm](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#costing-algorithm) to be used by the [Costing Background Process](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/process-scheduling.md#costing-background-process), which has to be scheduled.

Besides, [Landed Cost Types](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#landed-cost-type) need to be configured here therefore can be selected while allocating this type of cost to [goods receipts](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#goods-receipts).

Finally, [Warehouse Rules](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#warehouse-rules) can be configured to be applied while retrieving stock from the inventory automatically.

!!!note
        It is not required to do any additional setup for the Warehouse Management application area if Food & Beverage (F&B) sample client shipped with Etendo by default is going to be used to explore it. The sample data set already contains the roles, warehouses, and products pre-configured.

Above configuration is part of the overall Business setup flow within "Warehouse" setup.

##### Execution

In Warehouse Management, main Inventory Accuracy operations are executed as follows.

To get the *Physical Inventory*, Warehouse Staff:

- Starts with the products classifications and runs [Pareto Product Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/analysis-tools.md#pareto-product-report) which distributes products into three classes (A, B or C) according to their cost percentage in the warehouse.
Based on the classification, the frequency of counting cycle can be decided (e.g. A products are counted weekly, B products monthly and C products yearly).
The ABC classification is then populated to the [Manufacturing](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#manufacturing) tab of the Product window by clicking the Update ABC button.
    - Note that the ABC classification is based on the cost of the product's transactions. That is why a [Costing Rule](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#costing-rules) for the legal entity must be configured and validated and the [Costing Background Process](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/process-scheduling.md#costing-background-process) process has to be scheduled.
- After this procedure, the Warehouse Staff creates the physical inventory document in the [Physical Inventory](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/transactions.md#physical-inventory) window by selecting the Warehouse where to execute this activity and pressing the Create Inventory Count List button. They define the criteria for the products to be included in the count-list (for example ABC classification) and it results in the [list](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/transactions.md#lines) of products with their current quantities that is brought to the warehouse and verified against physical inventory.
- In order to update Etendo stock, if differences are found, first the Warehouse Staff selects the [Physical Inventory](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/transactions.md#physical-inventory) that was previously created. Then in the [Lines](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/transactions.md#lines) tab, they find the required products and update the Quantity Count field with a new value. After that, they finish the inventory count by clicking the Process Inventory Count button which updates inventory and triggers document posting (if configured).

To execute *Goods Movement* Warehouse Staff:

- In the [Goods Movements](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/transactions.md#goods-movement) window, lists products to be moved with source and destination information and the respective quantity and then processes the document which updates all product quantities listed under Lines tab in the warehouse and triggers document posting (if configured).

For *Goods Tracking* Warehouse Staff uses:

- [Stock Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/analysis-tools.md#stock-report) that gives a stock level of all products (that have inventory different from zero) and their location (warehouse and storage bin) grouped by product category.
- [Goods Transaction](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/transactions.md#goods-transaction) window that offers a read-only view with extensive filtering capabilities that shows all inventory transactions.
- [Product Movements Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/analysis-tools.md#product-movements-report) shows all receipts, shipments, moves and physical inventories grouped by Transaction Type and Business Partner.
- [Material Transaction Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/analysis-tools.md#material-transaction-report) lists all documents (shipments or receipts) grouped by Business Partner.

*Inventory Valuation* is done with the help of the [Valued Stock Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/analysis-tools.md#valued-stock-report).
This report shows the cost of the stock calculated by the Costing Server process.

*Inventory Update* is done with the help of the [Inventory Amount Update](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/transactions.md#inventory-amount-update) window.
This window allows changing either the total inventory value or the unit cost of a product(s) at a given reference date, therefore a closing and an opening inventory are automatically created in the [Physical Inventory](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/transactions.md#physical-inventory) window.

For *Cost Adjustments Review*, Warehouse Staff uses the [Cost Adjustment](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/transactions.md#cost-adjustment) window.
This window allows reviewing different types of cost adjustment sources together with the product's transactions whose costs are being adjusted, as well as adjustment amounts.

#### Relationship with other application areas

Warehouse Management has a connection with other application areas:

- [Procurement Management](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/getting-started.md) as goods received change stock quantity and its value.
- [Sales Management](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/getting-started.md) as shipment changes stock quantity and its value.
- *Production Management* because raw materials are taken out of warehouse and produced goods are sent back to the stock during production process.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Transactions
## Article Path: /User Guide/Etendo Classic/Basic Features/Warehouse Management/Transactions
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/transactions
## Article Content: 
#### Overview

Warehouse Management deals with all activities related to the warehouse actions necessary for sales and procurement processes.

#### Physical Inventory

:material-menu: `Application` > `Warehouse Management` > `Transactions` > `Physical Inventory`

**Physical Inventory** window allows the user to execute goods count process in Etendo.

<iframe width="560" height="315" src="https://www.youtube.com/embed/xqE_UnYO6cM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

##### Header

Goods count process requires creating an inventory count to check or to update stock quantities.

These are the steps that must be followed in order to create an inventory count:

**1.** The **Header** section identifies the "Physical Inventory" process and lists its main parameters.

![Header](https://docs.etendo.software/latest/assets/drive/1mrD0K5quoU7vF0d3WNeOwW0u_n4vGLWf.png)

All fields are pre-filled automatically when a new record is created.

Some of the fields to note are:

- **Name:** This field is used to reference the physical movement not only in warehouse reports but also on general ledger, therefore it is important to use a significant name.
- **Movement Date:** This is the date when the movement is created and it is defaulted to the current date. This date is also used in the posting record of the Physical Inventory document to the general ledger, if any. It can always be changed, but the user should keep in mind that it is not possible to register physical inventories in the past (the "Process Inventory Count" always takes the current date and not the Movement Date to update the stock). The Movement Date should be the current date unless the user can ensure that no warehouse transactions have been processed in the meanwhile.
- **Warehouse:** warehouse in which the physical inventory takes place. Defaulted to the session value from the top navigation User Preferences menu.

**2.** There are 2 ways of **entering lines** into the physical inventory document:

1.  Automatically, by creating a list of the products available in the warehouse and storage bins defined in the physical inventory header that fulfill the filtering conditions specified by the **Create Inventory Count List** button.
2.  Manually, line by line for certain products. This is used whenever only some products need updating.

**Create Inventory Count List** process can be executed more than once for the same physical inventory. Although lines are created automatically by using the **Create Inventory Count List** process, these lines can later on be updated manually. **Create Inventory Count List** filter dialog has the following parameters:

![Header 2](https://docs.etendo.software/latest/assets/drive/1CWBqL3eiqKbFJ8RTqSJaf1iB2_ltvJp3.png)

The fields to note are:

- **Storage Bin:** Only products on this storage bin will be filtered.
- **Product Category:** Only products belonging to a given product category will be filtered, otherwise all products will be shown.
- **Inventory quantity:** Includes or excludes products on physical inventory depending on actual quantities. The options available are:
    - empty - all product on physical inventory will be shown regardless its quantity
    - 0 - only products on physical inventory having 0 quantity in stock will be shown.
    - <0 - only products on physical inventory having a positive quantity in stock will be shown.
    - \>0 - only products on physical inventory having a negative quantity in stock will be shown.
    - not 0 - only products on physical inventory having a quantity in stock different to 0 will be shown.
- **Set Book Quantity to Zero:** this checkbox sets the **Quantity Count** field on the count list to zero. When the checkbox is not selected, the **Quantity Count** is defaulted to the same value as the **Book Quantity** (On Hand Quantity) of the product.
    - First option is used for blind physical inventories where people who are counting items in the warehouse do not need to know the expected quantities.
    - First option is used to allow the user to enter the "real" quantity count on the warehouse and storage bin. Once the inventory count is processed, the book quantity shown by the system will be updated to the quantity count entered by the user.
- **ABC:** Pareto Product Report

##### Lines

Lines tab allows  the user to add or to edit individual products to be included in the inventory count list. It represents the inventory count list of a given warehouse.

Some relevant fields to note are:

- **Quantity Count:** that is the actual (physically counted) product stock in the **Storage Bin** of the warehouse.
- **Book Quantity:** that is the product stock in the **Storage Bin** according to Etendo.
- **Cost:** that is the unit cost of the product.  
  This field is optional. It can be filled in with the cost if known whenever the stock of a product is increased, otherwise the Default Cost method is used to valuate that transaction which increases the stock of the product.

The process buttons are:

- **Update Quantity** updates current **Book Quantity** field with latest product quantity from the application. This is used in case it has changed since the count list was generated. It is useful for situations when there is a significant amount of time in between generating physical inventory in Etendo and real physical count.
- **Process Inventory Count** finishes Physical Inventory count process after all corrections have been entered and updates the stock.
- **Post** allows to account the inventory count once processed.

##### Accounting

A physical inventory can only be posted to the ledger in case there is a difference between "Quantity count" and "Book Quantity" for a product. Otherwise there will not be anything to post to the ledger.

For instance, a product whose "Quantity count" is 6700 units at a given date, while "Book Quantity" in Etendo is 6000 units.

That physical inventory can be posted once processed, if the cost of the product has been calculated.

**Physical Inventory posting creates the following accounting entries if inventory increases:**

|                           |                                                             |                                                             |
| ------------------------- | ----------------------------------------------------------- | ----------------------------------------------------------- |
| Account               | Debit                                                   | Credit**                                                  |
| Product Asset         | (Quantity Count - Book Quantity) \* Cost of the Product |                                                             |
| Warehouse Differences |                                                             | (Quantity Count - Book Quantity) \* Cost of the Product |

**Physical Inventory posting creates the following accounting entries if inventory decreases:**

|                           |                                                             |                                                             |
| ------------------------- | ----------------------------------------------------------- | ----------------------------------------------------------- |
| Account               | Debit                                                   | Credit                                                  |
| Warehouse Differences | (Quantity Count - Book Quantity) \* Cost of the Product |                                                             |
| Product Asset         |                                                             | (Quantity Count - Book Quantity) \* Cost of the Product |

##### How to Reactivate Physical Inventories

!!! info
    To be able to include this functionality, the Warehouse Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Warehouse Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=EFDA39668E2E4DF2824FFF0A905E6A95){target="_blank"}.

From the Physical Inventory window, it is possible to reactivate a previously generated inventory just by selecting the corresponding document and clicking the Reactivate button.

Once the Inventory is successfully reactivated, the state of the document changes to Not processed as it can be observed in the status bar.

![](https://docs.etendo.software/latest/assets/drive/1WBA34PF6dwDGKc8HW0tC8iuzD_CR-9I2.png)

!!! warning
    It is not possible to reactivate documents that include transactions with quantities exceeding the existing stock quantity for a certain product in a certain storage bin. The only exception is when the configuration of the storage bin allows Over Issue. For more information, visit [Storage Bin](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#storage-bin).

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}.

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

#### Goods Movement

:material-menu: `Application` > `Warehouse Management` > `Transactions` > `Goods Movement`

Goods Movement window allows the user to make internal inventory movements among warehouses and storage bins.

<iframe width="560" height="315" src="https://www.youtube.com/embed/yW4Bv6bORk0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

##### Header

Internal inventory movements can be made by adding products to the lines tab or by moving all items at once.

![Header](https://docs.etendo.software/latest/assets/drive/1kfjIQpgySwJygR6UxhnTHrLbFkseEEDf.png)

All fields are automatically pre-filled in when a **new** record is created. Some of them to note:

- **Name:** This field will be used to reference this goods movement, not only in warehouse reports but also in the general ledger, therefore it is important to use a significant name.  
  This field is defaulted to the current date but it can always be changed as required.
- **Movement Date:** that is the date of the goods movement transaction.  
  This field is defaulted to the current date but it can always be changed as required.  
  From an accounting point of view, goods movement will be reflected on this date.

As already mentioned, there are 2 ways of entering lines (or products to be moved between warehouses and storage bins):

1.  By adding individual products to the Lines tab.
2.  By moving all items from one bin (**Storage Bin From**) to another (**Storage Bin To**) by using the **Move Storage Bin** button.  
    The system automatically inserts one line per every storage bin and product.

![Header](https://docs.etendo.software/latest/assets/drive/170LDHuomqrUcv0OHXssJuBjXJlyzg8H0.png)

##### Lines

Lines tab is a list of the products moved between warehouses and storage bins.

This tab also includes information about the source, destination and the respective quantity.

![Lines](https://docs.etendo.software/latest/assets/drive/18SSKl05H6kTiVvZfZteK0MeJnb787F6p.png)

Some fields to note:

- **Movement Quantity:** that is the product amount to be moved.  
  Defaulted to the total quantity of the **Product** in the Storage Bin.
- **Storage Bin:** that is the bin products are taken from.  
  Defaulted to the Storage Bin selected in the **Product** selector.
- **New Storage Bin:** that is the destination bin for the products.
- **New Attribute Set Instance:** Read only field which is only visible for *Referenced Inventory*  related box/unbox transactions. It shows the new attribute set instance after the boxing/unboxing process takes place.

Once **Process Movements** process is executed, the stock is updated.

##### Accounting

!!! info
    A Goods Movement can be posted to the ledger if the MaterialMgmtInternalMovement table is set to Active in the Active Tables tab of the organization's general ledger configuration.

Goods Movement posting creates following accounting entries.

Posting record date: Movement Date.

|               |                           |                           |                             |
| ------------- | ------------------------- | ------------------------- | --------------------------- |
| Account       | Debit                     | Credit                    | Comment                     |
| Product Asset | Movement Line Cost Amount |                           | One per Goods Movement Line |
| Product Asset |                           | Movement Line Cost Amount | One per Goods Movement Line |

Posting a _Goods Movement_ implies to have its cost calculated:

- A validated Costing Rule in the _Goods Movement_ legal entity is required.
- The background process Costing Background Process must be run.
- Once the cost has been calculated, the Goods Movement can be posted.

##### How to Reactivate Goods Movements

!!! info
    To be able to include this functionality, the Warehouse Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Warehouse Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=EFDA39668E2E4DF2824FFF0A905E6A95){target="_blank"}

From the Goods Movement window, the user is able to reactivate a previously generated movement just by selecting the needed movement and clicking the Reactivate button.

Once the movement is successfully reactivated, the state of the document changes to Not processed as it can be observed in the status bar.

![](https://docs.etendo.software/latest/assets/drive/1tHX7U3NNVTlZ83m_Ql4RFEL52gsgy81B.png)

!!! warning
    It is not possible to reactivate documents that include transactions with quantities exceeding the existing stock quantity for a certain product in a certain storage bin. The only exception is when the configuration of the storage bin allows Over Issue. For more information, visit [Storage Bin](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#storage-bin).

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}.

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

#### Bill of Materials Production

:material-menu: `Application` > `Warehouse Management` > `Transactions` > `Bill of Materials Production`

##### Overview

Create and run production processes using the previously defined bills of materials.

Unlike the name suggests, this process is **not part of production**. This setup is used to combine different end products into another **bundled product**. For example, for a computer that is shipped with different keyboards or products that are shipped with different power cables. There is no actual production involved for the creation of the new product.

The set up of this screen is combined with setups in the product screen:

- the bill of materials checkbox is selected for the product
- the bill of materials tab is filled out

##### BOM Production

In this section the organization is selected, a name of the bundling that will be executed, as well as a date on which it will occur.

##### Production Plan

Add bills of materials to be produced in a specified production plan.

In this section, the product is selected and the number that is executed. Also, the storage bin in which the result of the Production will be stored must be selected.

As indicated in the Overview, the product that is selected needs to be set up correctly first:

- the bill of materials checkbox is selected
- the bill of materials tab is filled out with the information of the components that are combined plus the quantity for each component
- the Verify Bom button was clicked to set the product ready to be used

##### I/O Products

Create and edit the products that are going to be used in the production.

After the Production Plan tab is filled out, the **Create/Process Production** button is clicked to generate the information in this section. Based on the setup of the information in the bill of materials tab of the product combined with the production quantity in the production plan tab, the information of the **components to be used and which quantity** was generated.

After clicking the **Create/Process Production** button for the second time, the changes are executed.

In the popup, the checkbox 'Product quantity must be on stock' can be selected, so the process is only executed if the components are in stock. After successfully processing, the stock of the components decreases and the stock of the bundled product increases.

!!! warning
    Currently, processes involved in the Bill Of Materials Production do not support negative stock. For this reason, if the checkbox 'Product quantity must be on stock' is not selected and there is not enough stock of the consumed products, the available quantity in stock will be used to fill the quantities in the \[I/O Products\] tab lines.

There is a check named **Force Use Of Warehouse Of Selected Storage Bin.** When enabled, the same Warehouse of the selected Storage Bin will be used to retrieve the stock to be consumed. If it is not enabled, the process will take into account all available Warehouses for the set in the header of the Document.

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}.

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

#### Goods Transaction

:material-menu: `Application` > `Warehouse Management` > `Transactions` > `Goods Transaction`

##### Overview

Goods Transaction window provides a read-only view with extensive filtering capabilities that shows all inventory transactions.

All real warehouse movements can be seen in this window: incoming, outgoing, movements between warehouses, physical inventories, etc.

![Goods Transaction](https://docs.etendo.software/latest/assets/drive/1rGnZndz2vH5AEMTbBc1xVao-TLFT1N_r.png)

#### Stock Reservation

:material-menu: `Application` > `Warehouse Management` > `Transactions` > `Stock Reservation`

##### Overview

In this window, it is possible to review and manage existing Reservations.

<iframe width="560" height="315" src="https://www.youtube.com/embed/6Be_9LXecJY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

Stock reservations are mainly used to ensure the stock availability when delivering a Sales Order. With this feature, it is also possible to lock stock not related to any Sales Order to avoid its consumption.

A reservation identifies certain stock in the warehouse that is reserved and cannot be consumed by anyone except the owner of the reservation. Currently, there are two possible owners, a _Saler Order line_ or the _System_. A reservation for a Sales Order line identifies stock that can only be consumed in shipments related to the Sales Order. A _System_ reservation is a special reservation type that cannot be consumed by anyone. _System_ reservations are used for _Hold_ reservations when some stock needs to be blocked in the warehouse.

!!! note
    Reservations are disabled by default. To be able to use them, please insert a new _Preference_ using property _Enable Stock Reservations_ with value _Y_. Then, end session and log in again to continue with the process.

This functionality comes with two types of reservations:

- Pre-Reservation: These are reservations that are not physically in the warehouse but ordered to a supplier and when there is a relationship between the line of the purchase order and a sales order line. Once the purchase order line is received, this pre-reservation is automatically converted to a reservation.
- Reservation: Refers to stock stored in the warehouse that is already reserved by a sales order line.

A reservation is always defined by the product that is desired to be reserved but other dimensions can be defined such as the warehouse, storage bin and attribute (i.e Colour, lots, serial number).

Another interesting thing is the possibility of allocating or not the reservation:

- _Allocated_ stock means that specific stock is reserved for a sales order, rather than it being a general reservation. That particular stock can not be reserved for any other sales order.
- A _Not Allocated_ reserved stock can be changed at any time by other existing stock but always ensuring that the Sales Order line keeps the reservation.

This functionality tries to cover several flows:

1.  Sales
2.  Procurement
3.  Purchasing plan (MRP)

##### Sales Flow

A sales order can be reserved when the document is booked and pending to be delivered. The way to make the reservation is:

- Manual: No reservation is generated automatically. So when the order is booked the reservations needs to be done manually selecting the storage bin, attribute, etc.

- Automatic: The reservation is automatically created and processed, reserving the available stock.  This option reserves stock from any of the available warehouses belonging to the organization of the created sales order, not only from the warehouse defined in the order header.

- Automatic - Only default warehouse: The reservation is limited only to the warehouse specified in the header of the order. This allows optimizing inventory allocation and ensuring that products are allocated according to the warehouse preferences defined in each transaction.

    !!!info
        This last option is only available if the [Automated Warehouse Reservation](https://docs.etendo.software/latest/optional-features/bundles/warehouse-extensions/overview.md#automated-warehouse-reservation) module is installed, part of the Warehouse Extensions Bundle. To do that, follow the instructions from the marketplace: [Warehouse Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=EFDA39668E2E4DF2824FFF0A905E6A95){target="_blank"}.

For more information, visit [Sales Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#sales-order).

##### Procurement Flow

Pre-reservations can also be made from the Purchase Order. Being in the purchase order line, there is the possibility of selecting any sales order line pending to be delivered that is waiting to receive the goods in the warehouse. Once the items are received the pre-reservation is converted to reservation and the goods are reserved for that sales order line.

For more information, visit [Purchase Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#purchase-order).

##### Purchasing Plan (MRP)

When launching the purchasing plan there is now the possibility of making reservations for Sales Order and pre-reservations, that is, create purchase orders linked to sales orders.

##### Reservation Consumption

When a Good Shipment of a reserved Sales Order is automatically created, it will consume reserved stock. The process will propose first the possible allocated stock and later any available stock based on the standard rules to retrieve stock, including reserved stock but NOT allocated (even from other reservations). If the related Sales Order does not have any reservation, only not reserved stock is proposed.

When the Goods Shipment is processed the reservation is updated to reflect the stock that has been finally delivered and update the released quantity. In this step, there are several cases:

- All the stock of the shipment matches the reserved stock. The released quantity is updated accordingly.
- A different stock is shipped.
  - The stock is not reserved by any other reservation. The reservation is updated to reserve the shipped stock and if there was other stock reserved it is deleted from the reservation so the reserved quantity remains equal.
  - The stock is reserved and not allocated in another reservation. The other reservation is updated to search for other available stock.
    - If available stock is found, the other reservation is updated to reserve the found stock and the stock is reassigned to the current reservation.
    - If no available stock is found, an error is shown as the stock is not available. The user should change the stock of the good shipment or edit the other reservation to manually search or free the conflicting stock.
  - The stock is reserved and allocated in another reservation. An error is shown as the stock is not available. The user should change the stock of the good shipment or edit the other reservation to manually search or free the conflicting stock.

##### Reservation

The desired product to be reserved is defined in the main tab.

![Stock](https://docs.etendo.software/latest/assets/drive/1Z_fxaBhzcUR2exlgB69BDletxVUl_fiL.png)

The reservation header defines each reservation. First, the _Organization_ where the reservation is done and the _Product_ and _Quantity_ desired to be reserved are defined. When the reservation is for a Sales Order line, these fields are inherited from the line. Later, the owner of the reservation is defined, currently it is only possible to define Sales Order lines. If this is left blank, the reservation is considered a _System_ reservation where the owner is the _Organization_. Finally, it is possible to define certain dimensions to restrict the stock that can be used to fulfill the reservation:

- _Warehouse_
- _Storage Bin_
- _Attribute Set Value_

!!! note
    It is only possible to select warehouses that are defined as _on hand_ warehouses of the organization and storage bins that belong to them.

The reservation might have different statuses:

- **Draft**: The reservation might already have some stock lines, but those are not yet considered as reserved stock and are available to everyone.
- **Completed**: The reservation has been processed. If some stock was still pending to be reserved the _Complete_ process will try to reserve the available stock. This automatically reserved stock is left as not allocated.
- **Hold**: Any reservation can be set in hold status. This means that the stock is completely blocked and it is not even possible to generate a shipment for the sales order consuming the reserved stock. In this status, the button previously named “Put on Hold” changes to “Unhold” and gives the user the possibility to undo the action.
- **Closed**: A closed Reservation can not be reactivated afterwards. Also, when a Reservation is Closed, it's Quantity is set as the same value as the Released Quantity, preventing further inconsistency problems.

A reservation has 3 main quantities:

**Quantity**

Determines the quantity that is desired to be reserved. If the reservation is related to a Sales Order line this quantity must be the same as the Ordered Quantity.

**Reserved Qty**

It is the total quantity that is really reserved. When there is not enough stock available it is possible to have a lower _Reserved Qty_ than the _Quantity_.

**Released Qty**

It is the quantity that has been delivered and released from the reservation. When a Good Shipment for a reserved Sales Order is processed the Released Qty of the reservation is increased by the delivered quantity.

##### Stock

The Stock tab identifies each existing Stock or Purchase Order selected to fulfill the reservation.

![Stock](https://docs.etendo.software/latest/assets/drive/1588n_FidAyqyw0WwUJ8-E3w_bMRv2MLF.png)

In the _Stock_ tab, the actual reserved stock is shown. The stock should meet the dimensions defined in the header. When the stock is physically in the warehouse the reserved stock is identified by the Storage Bin and the Attribute Set Value when applied. In case of pre-reservations the stock is still not in the warehouse, so the _Storage Bin_ property is blank and the _Purchase Order line_ is set. When a pre-reservation is receipt and converted to reservation the storage bin where the stock has been stored is set keeping the purchase order line.

The reserved stock has 2 quantities:

**Quantity**

The quantity reserved.

**Released Qty**

The quantity that has been released or delivered.

##### Manage Stock

When the reservation is in _Draft_ or _Completed_ status, it is possible to modify the reserved stock using a _pick and execute_ process.

![Stock](https://docs.etendo.software/latest/assets/drive/1U6xkkgtOgdwovTAP70Fo6JLSbfIf-UOZ.png)

This window shows all the already reserved stock plus other available stock and not receipt Purchase Order Lines that can be used to fulfill the reservation. The available stock is filtered by the on hand warehouses of the reservation's organization and the dimensions that might be set. The Purchase Order lines are also filtered by these dimensions. For each selected line the quantity to reserve has to be set and if the stock is allocated or not. The quantity must be lower than the available quantity considering as well the quantity that might be reserved in other reservations and the sum of all the selected lines must be lower than the quantity desired to be reserved. If the reservation already has some released quantity, the quantity of the released stock must be higher or equal than the released stock

##### Goods Movement

It is allowed to move an item that is reserved from its current storage bin to another one. The button _Goods movement_ shows all the bins where the product is reserved, that is, the stock lines and it  is also possible to edit the quantity to be moved and the new storage bin.

![Stock](https://docs.etendo.software/latest/assets/drive/1F6npvraIMx78-uaccl5Ibmqj8yY46wMX.png)

#### Inventory Amount Update

:material-menu: `Application` > `Warehouse Management` > `Transactions` > `Inventory Amount Update`

##### Overview

Inventory Amount Update window allows the user to change either current inventory amount or current unit cost of products in stock at a given reference date.

Once created and processed, it generates a closing and an opening inventory for the product(s), which can be reviewed in the Inventories tab.

- **Closing inventory** removes product "current" inventory value (at current cost, either "average" or "standard")
- **Opening inventory** adds product "new" inventory value (at current cost, either "average" or "standard")

Whenever an inventory amount update is created on the current date, therefore movement date is the same as transaction process date, all existing transactions remain valued at the existing cost but new ones booked starting from current date, that will be valued at the new cost.

Whenever an inventory amount update is created in the past, those closing/opening inventories will have a movement date in the past and a transaction process date. These inventories will be set as "**Backdated**" transactions by the Costing Background process, therefore the corresponding backdated cost adjustment can be created.

These two inventory transactions, opening/closing inventory can be reviewed in the Transactions tab of the product window and can be posted to the ledger in the Physical Inventory  window.

##### Header

An inventory Amount Update can be created and processed in the header section of the Inventory Amount Update window.

An inventory amount update can be created, managed and processed in the header section of the Inventory Amount Update window.

![Header](https://docs.etendo.software/latest/assets/drive/159RjgB2ff5cOtrsCcE0TxlbT6WyEtVWz.png)

Some fields to note are:

- **Document type**: that is inventory amount update document type
- **Document No.**: that is inventory amount update document sequence
- **Document Date**: that is inventory amount update date.

##### Lines

Once an inventory amount update header has been properly created and saved, inventory amount update lines can be created in this tab.

An inventory amount update can have as many lines as products whose current cost or inventory amount needs to be modified for whatever kind of reason.

When selecting a product and entering a given reference date current inventory amount, on hand qty and current unit cost for the product are automatically filled in.

To complete the line it is necessary to fill in either the "Inventory Amount" or the "Unit Cost".

!!! info
    It is important to remark that product quantity on hand shown in an "Inventory Amount Update" can vary if the "Fix Backdated Transaction" flag is active/not active in the corresponding Costing Rule.

For instance, a receipt of 100 units is booked for a product at the current date, and after that another receipt of 50 units is booked for a product with a movement date in the past. This last one receipt is a "backdated" transaction.

An Inventory Amount Update is launched for the product dated on between, before current date:

- if the "Fix Backdated Transaction" is active, the "Inventory Amount Update" launched for the product, will then consider the "backdated" transactions booked for that product, therefore the stock shown will be 50 units. Backdated transaction "movement date" is considered in this case.
- if the "Fix Backdated Transaction" is not active, the "Inventory Amount Update" launched for the product, will then not consider the "backdated" transactions booked for that product, therefore the stock shown will be 0 units. Backdated transaction "movement date" is not considered in this case but transaction "process date" (current date).

Some fields to note are:

- **Reference Date**: that is the date when inventory amount update needs to be booked/posted to the ledger, therefore it could impact the cost of product transactions dated on a later date.
- **Product**: that is the product whose inventory amount needs to change.
- **Current Inventory Amount**: once product has been selected this field shows product current inventory value at given reference date.
- **Current Unit Cost**: once product has been selected this field shows product current unit cost.
- **On hand qty**: once product has been selected this field shows product on hand quantity at given reference date.
- **Inventory Amount**: this field allows to enter a "new" inventory amount for the product. Once entered "Unit Cost" field is populated accordingly by taking into account On hand quantity field.
- **Unit Cost**: this field allows to enter a "new" unit cost for the product. Once entered, the "Inventory Amount" field is populated accordingly by taking into account On hand quantity field.

![Lines](https://docs.etendo.software/latest/assets/drive/1Y-fYqIyNmSDOIwtEW9bqoKgALlRbyv7M.png)

Once created, an inventory amount update can be processed by using the process button "Process".

That action creates a closing and an opening inventory transaction that can be reviewed in the  inventories tab.

##### Inventories

A closing and an opening inventories are created for every product whose unit cost or inventory value have been modified.

This "read-only" tab contains links to detail information such as:

- **Warehouse**: that is the warehouse where inventory amount update has taken place.
- **Close Inventory**: that is the closing inventory transaction that removes current product inventory at current unit cost.
- **Init Inventory**: that is the opening inventory transaction that adds new product inventory at new unit cost.

![Inventories](https://docs.etendo.software/latest/assets/drive/1Hk2DRSMCFD4FQ5HPkVnIOhbsRioCKeFS.png)

Opening and closing inventory can be reviewed and posted to the ledger in the Physical Inventory  window.

Closing inventory posting creates following accounting entries:

|                         |                          |                          |
| ----------------------- | ------------------------ | ------------------------ |
| Account                 | Debit                    | Credit                   |
| _Warehouse Differences_ | Current Inventory Amount |                          |
| _Product Asset_         |                          | Current Inventory Amount |

Opening inventory posting creates following accounting entries:

|                         |                      |                      |
| ----------------------- | -------------------- | -------------------- |
| Account                 | Debit                | Credit               |
| _Product Asset_         | New Inventory Amount |                      |
| _Warehouse Differences_ |                      | New Inventory Amount |

#### Cost Adjustment

:material-menu: `Application` > `Warehouse Management` > `Transactions` > `Cost Adjustment`

##### Overview

Cost Adjustment window allows the user to review product transaction's cost adjustments caused by changes in purchase prices, landed cost allocation or manual/negative cost corrections.

Once the cost of a "Product Transaction" has been calculated by the costing background process and according to what is configured for the product(s) in the corresponding Costing Rule, it cannot be recalculated or deleted.

However, and under some circumstances, the calculated cost of a product transaction would need to be adjusted, for instance the purchase price of a purchase transaction changes after receiving the product.

If that is the case,  the calculated cost of the receipt would need to be adjusted to the new purchase price.

Cost Adjustments feature is in charge of managing adjustments created on an already calculated transaction's cost.

It is important to remark that this feature takes into account the "costing algorithm" used to calculate costs, therefore it behaves differently depending on:

- If the costing algorithm used is "Average", the cost of a transaction changes and as a consequence of that the cost of the product involved changes.  
  In that case, a cost adjustment transaction is created in this window to reflect that change, cost adjustment transaction that can be posted to the ledger so the inventory value of the product is the same as its accounting value.
- However, if the costing algorithm used is "Standard", the cost of a transaction cannot change and be adjusted, same way the "Standard" cost of the product involved remains the same.  
  In that case, no cost adjustment transaction will be created in this window.

As a consequence of the above "Cost Adjustment" window manage cost adjustments created for products and therefore products transactions valued at "Average" cost algorithm.

There are different types of "cost adjustments sources" which lead to the correct "average" cost of a product.

For instance, receipt transactions that were not booked in the same order than happened or receipt transactions that require to add landed costs to its already calculated cost, all of that will impact and therefore require that the "average" cost of the product changes.

It is important to remark that:

- cost adjustments are cumulative, therefore a product transaction can have more than one adjustment of any type if required to get that the average cost of that product transaction is the correct one.
- there are two types of transactions:
  - those transactions whose costs need to be adjusted as "**source**" of the adjustment, i.e a goods receipt whose cost needs to be adjusted due to a change of the purchase price
  - those transactions whose costs need to be adjusted "**not as source**" but because of adjusting source ones, i.e a goods shipment whose cost needs to be adjusted because the corresponding goods receipt cost changed.

Above implies that, for instance, a "Price Difference Correction" cost adjustment header can have two adjustment lines, one set as "Is Source" = Yes and the other one set as "Is Source" = No.

- beside that, there are two types of adjustments:
  - those set as **"Unit Cost" = "Yes"**, which means that the adjustment is going to change the "Unit Cost" of the transaction being adjusted besides its "Total Cost".  
    That is the case of adjustments such as "Price Difference Correction", “Backdated Transactions" and "Manual Cost Correction" set as "unit cost", as those ones change the "basic" cost of a transaction.
  - those set as **"Unit Cost" = "No"**, which means that the adjustment is not going to change the "Unit Cost" of the transaction being adjusted but just its "Total Cost".  
    That is the case of "extra" costs such as "Landed Cost", or adjustments done to manage the cost under "Negative Stock" scenarios or "Manual Cost Correction" do not set as "unit cost", but as an "extra" cost.

Let us imagine a scenario when there is only one receipt transaction of 1 unit of a product, valued at 10.00 €/unit. In that case receipt costs are the ones below, which can be reviewed in the "Product" window, Transactions tab:

- Trx Orginal Cost: 10.00
- Total Cost : 10.00
- Unit Cost : 10.00

A manual cost correction set as "Unit Cost" = "Yes" is booked for the receipt for an amount of 2.00 €. That correction creates a cost adjustment that changes the cost of the receipt as shown below:

- Trx Orginal Cost: 10.00
- Total Cost : 12.00 (10.00 + 2.00)
- Unit Cost : 12.00 (10.00 + 2.00)

New average Cost of the product = Total Cost / Stock = 12.00 € / 1 unit = 12.00 €/unit

After that purchase price changes from 10.00 €/unit to 12.00 €/unit.

That change in the price is a unit cost adjustment, which creates a 0.00 € adjustment because the unit cost of the transaction is already 12.00.

This implies no change in the average cost of the product, it remains as 12.00 €/unit

However, let us imagine now that the manual cost correction booked for the receipt for an amount of 2.00 € was set as "Unit Cost" = No, that is an extra cost which needs also to be taken into account. That correction changes the cost of the receipt as shown below, unit cost does not change:

- Trx Orginal Cost: 10.00
- Total Cost : 12.00 (10.00 + 2.00)
- Unit Cost : 10.00

After that, purchase price changes from 10.00 €/unit to 12.00 €/unit.

That change in the price creates a cost adjustment in the receipt of 2.00 = 12.00 - 10.00 €, therefore calculated costs of the receipt change:

- Trx Orginal Cost: 10.00
- Total Cost : 14.00 (12.00 + 2.00)
- Unit Cost : 12.00 (10.00 + 2.00)

Now this new scenario, implies a change in the average cost to 14.00 €/unit, this new average cost includes an extra cost of 2.00 €/unit.

As briefly mentioned above, Etendo  supports different sources of cost adjustments with the aim of covering different live scenarios. Those different types of cost adjustments sources are explained in the next section.

##### Header

Cost adjustment documents are automatically created by either the "Costing Background" Process or the "Price Correction Background" process as applicable, depending on the source of the adjustment.

Once automatically created, it can be reviewed in this window.

![Cost adjustment](https://docs.etendo.software/latest/assets/drive/1nLK6s6vSfV3C3rDRIjFq2dVRGCi1S-t4.png)

Some relevant fields to note are:

- **Document Type**: this is the "Cost Adjustment" document type.
- **Reference Date**: this is the date when the cost adjustment is created
- **Source Process**: the options available are:
    - Backdated Transaction
    - Landed Cost
    - Manual Cost Correction
    - Negative Stock Correction
    - Price Difference Correction

All of them are going to be explained in detail in the following sections.

##### Backdated Transaction

The source of this cost adjustment is a product transaction (i.e a goods receipt) that should have been booked on a previous date, but it was not.

As a consequence, the calculated cost of the transactions dated on a date after that given previous date need to be adjusted, same as the calculated "Average" cost of the product.

This cost adjustment source type does not apply to products valued at "Standard" cost.

The "Standard" cost of a product remains as it was defined because the cost of a "Standard" valued product is always the same, regardless of the date when a transaction of that product is booked.

In case of a product valued at "Average" costing algorithm:

- A goods receipt dated on 06/01/2015 (Movement date) is booked dated on 06/01/2015 (Transaction date). This goods receipt once booked implies that the cost of the product (based on the corresponding purchase order price) is 105,00 €/unit.
- A goods shipment dated on 07/01/2015 (Movement Date) is also booked in Etendo dated on 07/01/2015 (Transaction Date). This goods shipment once booked implies that the cost of the product sold is 105,00 €/unit.
- Later on a goods receipt of the same product dated on 02/01/2015 (Movement date) is booked in Etendo dated on 07/01/2015 (Transaction date). Once booked this goods receipt implies that the cost of the product (based on the corresponding purchase order price) is 100.00, starting from 02/01/2015.
- This last receipt with movement date 02/01/2015 is the source of a backdated transaction cost adjustment that adjust the cost of the product sold dated on 07/01/2015 from 105,00 €/unit to 102,50 €/unit, besides that the calculated average cost changes from 105,00 to 102,50 starting from 06/01/2015.

Transactions that should have been booked on a previous date, lead to the creation of "Backdated Transaction" cost adjustments.

!!! info
    A header and line(s) in the Cost Adjustment window are automatically created with the corresponding adjustments.

This adjustment type changes the "Unit Cost" of the product's transactions as well as the "Total Cost" and therefore the "Average" cost of the product.

Backdated transaction cost adjustments are created by:

- either running "**Fix Backdated Transactions**" process in existing costing rules
- or by checking "**Backdated Transactions Fixed**" check-box while creating a new costing rule.

Both ways, it is possible to enter a "Fix Backdated From" date which should not be part of a closed period.

Once **Fix Backdated Transaction** process is enabled in the corresponding costing rule, backdated transaction cost adjustments are automatically calculated by the **Costing background** process if applicable.

##### **Backdated Adjustments Posting**

A backdated cost adjustment can be posted to the ledger in this window.

In our example above, the last receipt with movement date 02/01/2015 is the source of a backdated transaction cost adjustment that adjust the cost of the product sold from 105,00 €/unit to 102,50 €/unit

That adjustment can be posted to the ledger. Posting will look as shown below:

|                      |                   |                   |
| -------------------- | ----------------- | ----------------- |
| Account              | Debit             | Credit            |
| _Product Asset_      | Adjustment amount |                   |
| _Cost of Goods Sold_ |                   | Adjustment amount |

##### **Landed Cost**

The source of this cost adjustment is booking additional costs that need to be distributed and therefore allocated as additional product costs.

Landed cost are costs such as shipping, insurance, customs charges and other costs needed to place the product in the organization's warehouse.

Landed cost adjustments change the calculated cost of receipt transactions by changing its "Total Cost", same way the "Average" cost of the product involved also changes.

The "Unit Cost" of the receipt transaction does not change as this type of adjustment is not a unit cost adjustment but an extra cost.

This cost adjustment source type do not apply to products valued at "Standard" cost, in the sense that:

- whenever a landed cost is added to a product valued at standard cost, no cost adjustment is created but the "Variance" between the "standard" cost defined for the product and its "actual" cost is posted to a "Landed Cost Variance" account, so it can be later on analysed.

For instance:

- a purchase order containing a product is booked. After that the corresponding goods receipt and purchase invoice of the product are booked and posted to the ledger.
- Later on a purchase invoice including additional costs such as transportation cost and custom charges is booked and post to the ledger
- Landed Cost window allows to allocate the transportation costs and custom charges to the goods receipt, landed cost which are also matched to the invoice already booked.

There is no need to run any specific background process or enable any preferences to get a "Landed Cost" cost adjustment.

"Landed Cost" cost adjustments are created after processing the corresponding landed cost document in the Landed Cost window, or after processing landed cost matching.

!!! info
    A header and line(s) in the Cost Adjustment window of this cost adjustment type is automatically created with the corresponding adjustment.

As already mentioned, landed cost adjustment does not change the "Unit Cost" of a product's transactions but its "Total Cost", same way as the "Average" cost of the product. This means that:

- the unit cost of each transaction is the original one (price \* units)
- and the total cost of each transaction includes the adjustments needed to get the desired product average cost.

##### **Landed Cost Adjustments Posting**

Landed cost adjustments can be posted to the ledger in the Landed Cost window, whenever those adjustments have been created for products included in a Goods Receipt transaction.

- In this case, Goods Receipt transaction is the source of the adjustment.

Moreover, landed cost adjustments can also be created for products included in a Goods Shipment transaction.

- In this case, Goods Shipment transaction is not the source of the adjustment but the Goods Receipt.
- In this case landed cost adjustments need to be posted in the **Cost Adjustment** window.

##### **Manual Cost Correction**

The source of this cost adjustment is a manual change of the cost of a specific product transaction.

This adjustment type only applies to product transactions valued at "Average" cost. It does not make sense to manually change the cost of a transaction valued at "Standard" cost.

For instance:

- a goods movement between warehouses needs to be adjusted, therefore "movement from" transaction cost is changed (increased) manually by the end-user
- above change implies that the cost of the "movement to" transaction needs also to be changed (increased), therefore the corresponding "Manual Cost Correction" cost adjustment is created.

There is no need to run any specific background process or enable any preference to get a "Manual Cost Correction" cost adjustment.

"Manual Cost Correction" cost adjustments are created after changing the cost of a product transaction in the Product window, "Transactions" tab, by using "Manual Cost Adjustment" process button.

A header and line(s) in the Cost Adjustment window of this cost adjustment type is automatically created with the corresponding adjustment.

This adjustment type changes the "Total Cost" of the product transaction, however product transaction "Unit Cost" can either be changed or not, depending on what the end-user wants to get.

There is a check-box named "**Unit Cost**" that it shown whenever "**Incremental**" check-box is selected:

- If the user does not select the check-box "**Incremental**" that means booking a new total cost of the transaction which will remain as "**Permanent**". That means it will not be changed anymore.
- If the user does select the check-box "Incremental" that means booking an additional cost to allocate to the total cost of the transaction. Besides, this additional cost can either be part of the unit cost (**Unit Cost check-box = Yes**) of the transaction or not (**Unit Cost check-box = No**). Last case means an extra cost such as a landed cost.

**Manual Cost Correction Adjustment Posting**

This type of adjustment can be posted to the ledger in this window.

In our example above, "movement from" transaction cost is changed (increased) manually by the end-user, therefore the cost of the "movement to" transaction needs also to be changed (increased).

That adjustment can be post to the ledger. Posting will look as shown below:

**"Movement From"** transaction adjustment:

|                                                                                                 |                                                  |                                                |
| ----------------------------------------------------------------------------------------------- | ------------------------------------------------ | ---------------------------------------------- |
| Account                                                                                         | Debit                                            | Credit                                         |
| [_Warehouse Differences_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#defaults) | Adjustment amount of "Movement From" transaction |                                                |
| [_Product Asset_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#accounting)                            |                                                  | Adjustment amount of "Movement To" transaction |

**"Movement To"** transaction adjustment:

|                                                                                                 |                                                |                                                |
| ----------------------------------------------------------------------------------------------- | ---------------------------------------------- | ---------------------------------------------- |
| Account                                                                                         | Debit                                          | Credit                                         |
| [_Product Asset_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#accounting)                            | Adjustment amount of "Movement To" transaction |                                                |
| [_Warehouse Differences_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#defaults) |                                                | Adjustment amount of "Movement To" transaction |

##### **Negative Stock Correction**

The source of this cost adjustment is booking a transaction, i.e a goods shipment, that turns the stock of a product into a negative quantity. This type of correction is only implemented for "Average" costing calculation.

At the time of booking a new receipt of that item, regardless if that receipt turns item stock to a positive/negative/zero value, a negative cost correction adjustment is created and related to that new receipt, to get that the stock remaining of that product is valued at the last purchase price, in the case of "Average" cost calculation.

For instance:

- a purchase order of 100 units is booked at a given purchase price
- after that goods are receipt and the cost of goods is calculated based on the order purchase price
- then a shipment of 100 units is booked
- and another shipment of 5 units is booked afterwards, leading to a negative stock of the product.

A negative stock correction cost adjustment will be created whenever an incoming transaction for the product such as a goods receipt is booked. That adjustment will be allocated to the goods receipt.

This adjustment type does not change the "Unit Cost" of the receipt but its "Total Cost" same way as the "Average" cost of the product involved. This means that:

- the unit cost of each transaction is the original cost (price \* units)
- and the the total cost of each transaction includes the adjustments needed to get the desired average cost.

There are two actions to take to get negative stock correction cost adjustments:

- To configure **Enable Negative Stock Corrections** preference with Value=Y in _Preference_ window
- To schedule **Costing Background process** in _Process Request_ window

##### **Negative Stock Correction Adjustment Posting**

This type of adjustment can be posted to the ledger in this window.

In our example above, an adjustment of this type is created whenever a new incoming transaction such as a goods receipt is booked for the product having a negative stock.

That adjustment can be post to the ledger. Posting will look as shown below in the case of a negative adjustment amount, otherwise in case of a positive adjustment amount:

|                                                                                                 |                   |                   |
| ----------------------------------------------------------------------------------------------- | ----------------- | ----------------- |
| Account                                                                                         | Debit             | Credit            |
| [_Warehouse Differences_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#defaults) | Adjustment amount |                   |
| [_Product Asset_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#accounting)                            |                   | Adjustment amount |

##### **Price Difference Correction**

The source of this cost adjustment is a change in either the purchase price of an order or the purchase price of an invoice after receiving the goods.

Price Difference Correction is launched only for Transactions of Type _Receipt_. Other Transactions, such as Return Material our Outgoing Transactions are not taken into account, since they should not modify the Average Cost due to a Price Correction.

Those goods were received at a price that has changed, therefore the calculated cost of the receipt needs to be adjusted, same as the calculated "Average" cost of the product.

"Standard" cost would remain as it was set.

For instance:

- a purchase order is booked for a product at a given purchase price
- after that the product is receipt and the "Average" cost of the product is calculated based on the corresponding order purchase price.
- a goods shipment of that product is booked, therefore that output transaction gets the calculated "Average" cost of the product.
- then a purchase invoice is received and booked for the product at a higher price than the order purchase price
- a price difference correction cost adjustments needs to be created to adjust the Goods Receipt and then affect the Goods Shipment transaction based on the new calculated Average Cost of the product.

Changes in purchase price leads to the creation of "Price Difference Correction" cost adjustments.

A header and line(s) in the **Cost Adjustment** window of this cost adjustment type is automatically created with the corresponding adjustment.

This adjustment type changes the "Unit Cost" and the "Total Cost" of the transactions, same as the "Average" cost of products.

"Price Difference" correction adjustments can be performed automatically or manually:

- to get that Etendo automatically performs price difference correction cost adjustments, it is necessary to activate and schedule the Price Correction Background Process
- to get that the user can manually perform price difference correction cost adjustments, it is necessary to manually run the "Process Price Difference Adjustment"

As shown in the image below, this process allows to select the Organization for which this process needs to be run, enter a given movement date and select a product or set of products for which price difference correction cost adjustments would need to be created.

![Cost adjustment](https://docs.etendo.software/latest/assets/drive/18dMx0odX-PVVwMCGGtEnkfYNfctDa7o5.png)

Additionally, the Costing Background Process can also create price difference correction cost adjustments, only if:

- the "Enable Automatic Price Difference Corrections property preference is set to "Y"
- and the Costing Background Process is run after booking the corresponding Purchase order, Goods Receipt and Purchase Invoice including the price difference.

##### **Price Difference Correction Adjustment Posting**

This type of adjustment can be posted to the ledger in this window.

In our example above, a change in the purchase order price (increase) implies that both the calculated cost of the "Goods Receipt" and the calculated cost of the "Goods Shipment" need to be adjusted same as the "Average" cost of the product.

That adjustment can be posted to the ledger. Posting will look as shown below :

**Goods Receipt adjustment**

|                                                                                 |                                 |                                 |
| ------------------------------------------------------------------------------- | ------------------------------- | ------------------------------- |
| Account                                                                         | Debit                           | Credit                          |
| [_Product Asset_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#accounting)            | Goods Receipt Adjustment amount |                                 |
| [_Invoice Price Difference_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#accounting) |                                 | Goods Receipt Adjustment amount |

**Goods Shipment adjustment**

|                                                                           |                                  |                                  |
| ------------------------------------------------------------------------- | -------------------------------- | -------------------------------- |
| Account                                                                   | Debit                            | Credit                           |
| [_Cost of Goods Sold_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#accounting) | Goods Shipment Adjustment amount |                                  |
| [_Product Asset_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#accounting)      |                                  | Goods Shipment Adjustment amount |

###### **Line**

A cost adjustment document can have as many adjustment lines as products included in the receipts to which landed cost have been allocated.

There are two types of cost adjustments transactions:

- "**source**", for instance a vendor receipt (V+) whose purchase price has changed
- "**not source**", for instance a customer shipment (C-) whose cost needs to be adjusted because of vendor receipt cost being adjusted.

![Cost adjustment](https://docs.etendo.software/latest/assets/drive/1vta9aBh20mSzCWRvr4jHKjwNMa5QtEyk.png)

Some relevant files to note are:

- **Inventory Transaction**: Transactions available are:
    - Vendor receipt (V+)
    - Customer shipment (C-)
    - Inventor in (I+)
    - Inventory out (I-)
    - Movement from (M-)
    - Movement to (M+)
    - Production (P+)
    - Production (P-)
    - Internal consumption (D-)
    - Internal consumption (D+)
- **Adjustment Amount**: that is the cost adjustment amount.  
  An adjustment amount can also be reviewed in the Product window, "Transaction" tab, "Transaction Cost" tab always related to a "Cost Adjustment Line".
- **Is source**: options available are "Yes" or "No" as a product transaction can be the source of an adjustment or not.
- **Parent Cost Adjustment Line**: In the case of a cost adjustment that is not the source, this field shows the source cost adjustment line.
- **Needs Posting**: options available are "Yes" or "No". Most cost adjustments needs to be posted to the ledger as they mean an increase/decrease of product asset value, however there are other whose cost adjustment is 0,00 that does not need any posting.
- **Unit Cost**:options available are "Yes" or "No".
  - There are cost adjustments such a price difference correction which impact product unit cost
  - There are cost adjustment such as landed cost which does not impact product unit cost.  
    It is important to remark that each Product Transaction has below listed cost:
    - "**Trx Original Cost**", that is the original cost of the product transaction
    - "**Total Cost**", that is the sum of the original cost and all adjustment costs
    - "**Unit Cost**", that is the sum of the original cost and all adjustment of the unit cost, that is the cost which does not include landed cost.
- **Is Backdated Trx**: a cost adjustment can be marked as backdated transaction if applicable.  
  For instance a backdated transaction cost adjustment can have two lines, one that is the backdated transaction as source and another one that is not the source neither a backdated transaction.
- **Is Negative Stock Correction**: a cost adjustment can be marked as negative stock correction if applicable.  
  For instance a backdated transaction cost adjustment can have two lines, one that is the backdated transaction as source and another one that is not the source but a negative stock correction.

###### **Accounting**

This tab provides Cost Adjustment accounting information.

![Cost adjustment](https://docs.etendo.software/latest/assets/drive/1VeXLRgA1XTypzkIYGOloEycvI7i138Pi.png)

Ledger entries shown in this tab are different depending on the source of the adjustment but landed cost posting that it is managed in the Landed Cost window.

Landed cost adjustment lines are always created as "Need Posting" = No.

See below some examples of each cost adjustment type:

**Price correction** cost adjustment caused by a decrease in the purchase price

|                        |                        |                        |
| ---------------------- | ---------------------- | ---------------------- |
| Account                | Debit                  | Credit                 |
| Invoice Price Variance | Cost Adjustment amount |                        |
| Product Asset          |                        | Cost Adjustment amount |

**Price correction** cost adjustment caused by an increase in the purchase price

|                        |                        |                        |
| ---------------------- | ---------------------- | ---------------------- |
| Account                | Debit                  | Credit                 |
| Product Asset          | Cost Adjustment amount |                        |
| Invoice Price Variance |                        | Cost Adjustment amount |

**Backdated Transactions** adjustment on a product's goods receipt transaction.

Product's cost gets decreased.

|                       |                        |                        |
| --------------------- | ---------------------- | ---------------------- |
| Account               | Debit                  | Credit                 |
| Warehouse Differences | Cost Adjustment amount |                        |
| Product Asset         |                        | Cost Adjustment amount |

**Backdated Transactions** adjustment on a product's goods shipment transaction.

Product's cost gets decreased.

|               |                        |                        |
| ------------- | ---------------------- | ---------------------- |
| Account       | Debit                  | Credit                 |
| Product COGS  | Cost Adjustment amount |                        |
| Product Asset |                        | Cost Adjustment amount |

**Negative correction** adjustment which implies an increase of product's cost.

|                       |                        |                        |
| --------------------- | ---------------------- | ---------------------- |
| Account               | Debit                  | Credit                 |
| Product Asset         | Cost Adjustment amount |                        |
| Warehouse Differences |                        | Cost Adjustment amount |

**Manual Cost correction** adjustment caused by a manual increase of product's cost.

|                       |                        |                        |
| --------------------- | ---------------------- | ---------------------- |
| Account               | Debit                  | Credit                 |
| Product Asset         | Cost Adjustment amount |                        |
| Warehouse Differences |                        | Cost Adjustment amount |

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}.

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

#### Referenced Inventory

:material-menu: `Application` > `Warehouse Management` > `Transactions` > `Referenced Inventory`

##### Overview

In this window, it is possible to define the containers or boxes, which includes any kind of object that can contain goods.

Many companies move and store goods grouped in a RollTainer, Case or Box. The boxes may be reusable or maybe disposable and have different sizes and purposes and are suitable for different types of goods.

Referenced Inventory is the functionality that identifies one or multiple storage details (Stock records) by using a "Reference Number".

Referenced Inventory for Core includes the very basic functionality to box/unbox stock.

##### Referenced Inventory

This tab shows any referenced inventory, also known as box, declared into the system regardless if it is empty or has any stock inside.

The user can create new boxes at any time. It is mandatory to define an organization, search key and the referenced inventory type.

It is important to highlight that:

1.  It will not be possible to delete a record if the referenced inventory is linked to any box/unbox transaction.
2.  The search key is unique per client. To bypass this limitation you could declare a different prefix/suffix to the referenced inventory type’s sequence.
3.  The organization limits the stock that can be boxed (only stock declared at this organization or any child organization).

From this window it is possible to link/unlink stock to/from a Referenced Inventory using the Box and Unbox buttons respectively.

##### Box

Shows a P&E with the stock not yet linked to any referenced inventory (it is not possible to box a stock already boxed).

![Box](https://docs.etendo.software/latest/assets/drive/1JQfT41NnGHscmbx1FygnOuvFwxi3co5v.png)

The user can select one or several records and specify the quantity to be boxed. It is also mandatory to declare the New Storage Bin where the boxed stock will be stored.

If the current storage bin of any of the selected records is different from the New Storage Bin, a goods movement will be automatically performed by the system when confirming the action to move the stock.

The box action can be run in different batches at any time, i.e. the user can select any referenced inventory not empty to add more stock.

!!! info
    A specific Referenced Inventory can only be present in one bin, not in multiple bins at the same time. In case you want to add more stock to a not-empty Box, the New Storage Bin selector will ask the user  to select the current referenced inventory bin.

When a stock is boxed, the referenced inventory search key will be automatically appended at the end of the Attribute Set Value surrounded by square brackets **\[\]** (graphical representation of a box). Example: L582\[1000584\]

If the stock does not have an attribute, the referenced inventory will be shown anyway in the Attribute Set Value field to indicate the stock is currently boxed. Example: \[1000584\]

This way, the information about the referenced inventory is clearly visible at any place where it is necessary, like the Stock Report .

##### UnBox

Shows a P&E with the stock currently linked to the selected referenced inventory.

![UnBox](https://docs.etendo.software/latest/assets/drive/1sKmYK_BGCx8XXDXtuXJLcJ4dQ1pTa1-x.png)

The user can select one or several records and specify the quantity to be unboxed (so it is possible to run partial unboxing) and the new storage bin where the stock will be stored after unboxing (by default it will be unboxed to the current location).

!!! note
    In contrast to the boxing process explained before, unboxing different storage bins can be selected for each record.

##### Reservation Management Behavior

When running a boxing/unboxing process, the system will always try to work with not reserved quantities first. Example: if we have 10 units on hand of a product where 2 of them are reserved and we try to box/unbox 1 unit, the system will try to box/unbox first any of the 8 units not reserved.

If the box/unbox process needs to work with already reserved quantities (in the example above because we are boxing/unboxing 9 or 10 units), the system will try to reallocate on the fly any reservation or it will show an error when the reallocation is not possible. The latter might happen, for example, because the reservation is forced to a concrete bin and the box/unbox process tries to move the stock to another bin.

##### Contents

Stock currently linked to this Referenced Inventory.

Please note any boxed stock will have an attribute set value linked to the referenced inventory.

##### Box Transactions

Shows any box transaction executed in the past for this referenced inventory.

This kind of transactions are actually Goods Movements created on the fly when confirming the boxing, where the user can browse to at any time to see the details.

##### UnBox Transactions

Shows any unbox transaction executed in the past for this referenced inventory.

This kind of transactions are actually Goods Movements created on the fly when confirming the unboxing, where the user can browse to at any time to see the details.

---

This work is a derivative of ["Warehouse Management"](http://wiki.openbravo.com/wiki/Warehouse_Management){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Analysis Tools
## Article Path: /User Guide/Etendo Classic/Basic Features/Warehouse Management/Analysis Tools
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/analysis-tools
## Article Content: 
#### Overview

This section describes the windows related to warehouse reports in Etendo. These are:


[:material-file-document-outline: Pareto Product Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/analysis-tools.md#pareto-product-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Material Transaction Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/analysis-tools.md#material-transaction-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Stock Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/analysis-tools.md#stock-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Stock History](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/analysis-tools.md#stock-history){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Valued Stock Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/analysis-tools.md#valued-stock-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Product Movements Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/analysis-tools.md#product-movements-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Product Operations](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/analysis-tools.md#product-operations){ .md-button .md-button--primary } <br>

#### Pareto Product Report

:material-menu: `Application` > `Warehouse Management` > `Analysis Tools` > `Pareto Product Report`

##### **Overview**

**Pareto Product Report** distributes products into three classes (A, B or C) according to the cost value that each product inventory has in the warehouse. Based on this classification the frequency of counting cycle can be decided (e.g. A products are counted weekly, B products monthly and C products yearly).

Following distribution is used: A products represent 80% value of the warehouse, B - 15% and C- 5%.
> 
!!! info
    The classification is based on the cost of the product. That is why it is needed to have a Costing Rule validated and the Material Transaction costs of the product calculated up to date.


##### **Parameters window**

**Currency** field defines currency in which all monetary values (like **Cost**, **Value**) of the report are shown. Field is defaulted to the system currency.

!!! warning
    Please note that **Conversion Rate** to the report **Currency** should be specified for the report to work.

**Update ABC** button fills in **ABC** field (updates value if the record exists or creates new record otherwise) of Org. Specific tab of the **Product** window for the organizations of the report output.

##### **Sample Report Output**

![Material Transaction Report](https://docs.etendo.software/latest/assets/drive/1DpBnQAG8Xyk9rM5xKhQvdKNt8p-bm4tj.png)


Columns to note:

-   **Quantity:** is the current stock of the product (Quantity on Hand) in the warehouse selected.
-   **Value:** that is the sum of all the material transaction costs of the product.
-   **Cost:** this cost is calculated as the ratio between the product value and the product quantity above
-   **Percentage:** that percentage is the ratio between the product value and the Total Value of the warehouse (which is the sum of all report lines).

##### **Persisted information**

Aggregated information calculated for the Valued Stock can be used. Please refer to the  Valued Stock Report documentation for more details about how to generate the aggregated information.

!!! note
    Exactly as for the Valued Stock Report, the Pareto Product Report can also be launched without aggregated data. However, this feature is specially useful in high volume environments when you experience performance issues launching the report.


#### Material Transaction Report

:material-menu: `Application` > `Warehouse Management` > `Analysis Tools` > `Material Transaction Report`

Material Transaction Report lists all documents (outgoing shipments and incoming receipts) grouped by Business Partner and document. For each document number data, product, warehouse, bin and quantity are shown.

##### Window Parameters

Information on this report can be filtered using movement date, business partner, warehouse and project. Reports can be generated on HTML and PDF format.

![Material Transaction Report](https://docs.etendo.software/latest/assets/drive/1B8aETuwl82fGlqe_SQLX3VAFz_2x6Tv2.png)

##### Sample Report Output

![Material Transaction Report](https://docs.etendo.software/latest/assets/drive/1DxL6-LHWr4QxeYT1F1y0SbAT3-szlkGW.png)


#### Stock Report

:material-menu: `Application` > `Warehouse Management` > `Analysis Tools` > `Stock Report`

Stock Report shows a stock level of all products (that have quantity on hand different from zero) and their location (warehouse and storage bin) grouped by product category. For each row product, quantity, unit, attribute, shelves, column, height and warehouse.

##### **Parameters window**

The outcome of this report can be filtered by using movement date, product category, product and warehouse locators.

![Material Transaction Report](https://docs.etendo.software/latest/assets/drive/1OgkmMsGjuADw-Sbqn1tfJ5WkCbq_AGx5.png)

The outcome of this report can be viewed in HTML and PDF format.

**Shelves (x)**, **Column (y)**, **Height (z)** fields correspond to **Row (X)**, **Stack (Y)** and **Level (Z)** of the Storage Bin.

**Sample Report output**

![Material Transaction Report](https://docs.etendo.software/latest/assets/drive/1jjN-TjQjeY-38odbT6xBRYCpACEmMUxz.png)


#### Stock History

:material-menu: `Application` > `Warehouse Management` > `Analysis Tools` > `Stock History`

!!! info
    To be able to include this functionality, the Warehouse Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Warehouse Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=EFDA39668E2E4DF2824FFF0A905E6A95){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Warehouse Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/warehouse-extensions/release-notes.md).
 

This is a read-only window in which the user is able to consult the daily stock. This functionality updates the daily information collected by the process in Background which was previously created for this purpose. 

The Stock History window is filled only by the background process "Create Stock History". It can be programmed from the 'Request Processing' window, where it can be assigned for which role and organization it is executed, and the periodicity with which it is executed.

!!! info
    Check the Technical documentation about Stock History to extend the process to calculate the registers for the daily stock history. 


No data will be displayed in the window until search filters are applied to the window. Once the filters are applied, click the button on the right to complete the process. 

![](https://docs.etendo.software/latest/assets/drive/10C8VIJpu2FJkojmrZ8aKCZMZo0D0OpMJ.png)

The window shows the following fields from which the user is able to filter and get the needed data: 
- Stock date 
- Product
- Attribute set value
- Warehouse
- Storage Bin
- Quantity on hand
- Reserved QtY
- Allocated Quantity
- Quantity in draft transaction
 
![](https://docs.etendo.software/latest/assets/drive/1MhFI0Ii9bhm8EBBK-UalKWK90_-Gkm_G.png)

This functionality includes a process to close the stock and save the historical information.

#### Valued Stock Report

:material-menu: `Application` > `Warehouse Management` > `Analysis Tools` > `Valued Stock Report`

##### **Overview**

Valued Stock Report shows the stock for a particular warehouse as well as the value of the stock.

The cost is calculated as a sum of the cost of each material transaction of the product in the warehouse. The cost of the product transactions is calculated by the Costing Server process.

##### **Parameters Window**

![Material Transaction Report](https://docs.etendo.software/latest/assets/drive/1HGDsUBdSrfe3_Nzk_ojKq3Ck-aGvIAdx.png)



-   **Organization**: This field allows the user to select among  Organizations of type "Legal with Accounting" and "Generic".
-   **Warehouse**: If the selected organization is "Generic", then lists all warehouses that belong to it, else if the organization is "Legal with accounting" then no warehouse is displayed to be selected.
-   **Date**: The report is going to show information up to the selected date.
-   **Consolidated Warehouse**: If checked the information of the stock will be consolidated at Organization Level, otherwise, the information will be broken down by Warehouse.
-   **Product Category**: Allows to show information of only the Product Category selected.
-   **Currency**: Defines currency in which all monetary values (like Cost, Valuation) of the report are shown.

!!! warning
    Please note that Conversion Rate to the report Currency should be specified for the report to work.

##### **Output Window** 

![Material Transaction Report](https://docs.etendo.software/latest/assets/drive/1btCDeLvHaczMWt9lE05E0J8RFjePTZFM.png)


-   **Product**: Name of the Product.
-   **Quantity**: Stock of the Product on the selected date.
-   **Unit** : Unit in which the stock is measured.
-   **Unit Cost**: Cost of each particular unit. Ii is the result of dividing the Valuation between the Stock.
-   **Valuation**: Valuation of the Stock. It is calculated by adding up all the valuations of each transaction that has happened in the Warehouse.
-   **Actual Average/Standard Algorithm Cost**: Current Average/Standard Cost, the latest calculation of it's value.
-   **Actual Average/Standard Algorithm Valuation**: Valuation of the Stock based on the Actual Average/Standard Cost. Ii is the result of multiplying the Stock by the Actual Cost.

##### **Persisted Information**

This step is not necessary in order to launch the Report. However, if there are performance problems, this can help to greatly improve the performance of the Report.

It is possible to aggregate information that allows for faster queries. This information is aggregated for each Closed Accounting Period, that means that accounting periods must be defined and, at least some of them, must be in a *Closed* or *Permanently Closed* Status. 

The information will persist until the first not closed Period. By doing so, it is possible to avoid looping through many records. However, no information will be aggregated after the first closed period and this can result in a non optimal performance of the report if it needs to retrieve plenty of information.

!!! info
    In order to use this functionality it is necessary to schedule the Background Process named *Generate Aggregated Data Background*. This can be done through the *Process Request* Window.

![Material Transaction Report](https://docs.etendo.software/latest/assets/drive/1_mjP-Y6k-QGbCLm8FeIQI08YLJghMAfM.png)

!!! info
    It is recommended to schedule it daily, at a moment when the System does not have plenty of activity. It will aggregate data only when a new Period is Closed or Permanently Closed.


##### **Limitations**

By aggregating the information per each Closed Period, it is not possible to keep the date of each Transaction. So, when the Report is launched for a different Currency, all that information will be converted at the Period's Closing Date. This can result in minor discrepancies with the previous version due to conversions between currencies at different dates.

#### Product Movements Report

:material-menu: `Application` > `Warehouse Management` > `Analysis Tools` > `Product Movements Report`

Product Movements Report shows all receipts, shipments, moves and physical inventories grouped by Transaction Type and Business Partner. For each row, document number, date, description, locators and quantity are shown.

##### Parameters Window

The outcome of this report can be filtered using movement date, product, attribute and business partner.

Additionally, the user can include or exclude these documents:

-   Shipment/Receipt
-   Physical Inventory
-   Inventory Movements
-   and Production.

![Product Movements Report](https://docs.etendo.software/latest/assets/drive/1KCTc1ueZ2Z-w-saDYnPVYx-BUDlYq4Gl.png)

##### Sample Report Output

![Product Movements Report](https://docs.etendo.software/latest/assets/drive/1Vc4maTIIThjJpROn9ES_qlzWXXupl7DU.png)

#### Product Operations

:material-menu: `Application` > `Warehouse Management` > `Analysis Tools` > `Product Operations`

!!! info
    To be able to include this functionality, the Warehouse Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Warehouse Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=EFDA39668E2E4DF2824FFF0A905E6A95){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Warehouse Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/warehouse-extensions/release-notes.md).


This functionality **centralizes of all the transactions** associated with the product selected allowing the visualization of every movement and actions such as goods shipment/receip line, tax original cost, unit cost, storage bin and many other related actions to the products. 

This centralization facilitates the analysis and a complete understanding of the product operation performance.

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/warehouse-management/product-operations-0.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Setup
## Article Path: /User Guide/Etendo Classic/Basic Features/Warehouse Management/Setup
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup
## Article Content: 
#### Overview

This section describes the steps that need to be performed to configure the warehouse management sections in Etendo. The corresponding windows are:

[:material-file-document-outline:Process Price Difference Adjustment](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#process-price-difference-adjustment){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Warehouse and Storage Bins](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#warehouse-and-storage-bins){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Shipping Company](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#shipping-company){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Freight Category](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#freight-category){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Costing Rules](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#costing-rules){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Costing Algorithm](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#costing-algorithm){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Landed Cost Type](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#landed-cost-type){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Warehouse Rules](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#warehouse-rules){ .md-button .md-button--primary } <br>

[:material-file-document-outline:Referenced Inventory Type](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#referenced-inventory-type){ .md-button .md-button--primary } <br>

[:material-file-document-outline:EAN 128 Type](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#ean-128-type){ .md-button .md-button--primary } <br>

#### Process Price Difference Adjustment

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Process Price Difference Adjustment`

Price difference adjustments can be performed "automatically" by scheduling the "Price Correction Background Process" or manually for a given product or set of products by running this process.

#### Warehouse and Storage Bins

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Warehouse and Storage Bins`

##### Overview

The user can create warehouses and organize them using storage bins.

**Warehouse** represents the physical location of the stock in the application, and it is divided into **Storage Bins** in order to define a more exact location of goods inside the warehouse.

This window allows the user to create and set up warehouses and get information about goods available in the warehouse as well as  information related to transactions.

##### Warehouse

The user can create warehouses for their organizations.

It is important to have a previous overview before creating warehouses. **Warehouse** tab contains essential details of the warehouse, meaningful ones are **Name** and **Location / Address.**

![Warehouse](https://docs.etendo.software/latest/assets/drive/1vxTgfKhjgIIhpZbIFp7FC8y1X9mJOcrE.png)

Fields to note:

-   **Search Key:** It is important to define a proper search key to warehouses so they can be identified easily later from other windows and reports.
-   **Returned Bin:** Default value for the Return Material Receipt Lines **Storage Bin** field to which returned from customer products are placed.
-   **Warehouse Rule:** Definition of a Warehouse Rule to be applied when getting stock from the warehouse.

##### Storage Bin

The user can create storage bins for a selected warehouse.

It defines **Storage Bin** position in the warehouse: **Row (X)**, **Stack (Y)** and **Level (Z)** fields and other parameters.

![Storage Bin](https://docs.etendo.software/latest/assets/drive/1AN5LR3kYTm3OhGshk_DUgJD75I1S5AxT.png)

Other fields to note:

-   **Relative priority:** in terms of retrieving and taking out stock. Normal sequence of products shipment from the warehouse is **first in first out** (FIFO), but in this field a priority related to storage bins with the same product is indicated (0 = highest priority). The field is used by automatic processes that need to determine which storage bin to use, for example Create Shipments from Orders. It also defines sorting of storage bins in the Locator (Storage Bin) Selector.
-   **Default:** when selected, this storage bin appears by default in documents.
-   **Barcode:** There is no logic behind this field. It has been created in order to be used/implemented by other modules such as **Etendo Mobile Application.**
-   **Inventory Status:** It is the current Inventory Status of the selected Storage Bin. It can be changed by clicking on *Change Status* button. 
For more information, visit [Inventory Status](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/inventory-status.md).

##### Product Transactions

The user can view all products transactions related to the selected warehouse and the history of transactions (materials receipt, shipment, used in production, etc.) that influence selected storage bin.

The content of this tab is the same as of the Goods transaction window.

##### Bin Contents

The user can view the stored products of a selected storage bin.

**Bin Contents** read-only tab lists products stored in a particular storage bin.

![Bin Contents](https://docs.etendo.software/latest/assets/drive/1g3JvIz3nAMp_BxJLc13QyIFIRRRLfG_x.png)

Fields to note:

-   **Attribute Set Value:** This field is displayed if the product in the line has attributes (color, size, serial number or several of them together, etc).
-   **Last Inventory Count Date**: The last date this product was checked during Physical Inventory Count process.
-   **Quantity on Hand:** Current stock of the product.
-   **Quantity in Draft Transactions:** Product quantity that is in warehouse transactions (like Goods Receipt, Goods Shipment, Physical Inventory, Goods Movements) in Draft status.

##### Accounting

The user can create and edit G/L accounts to be used in transactions including a selected warehouse.

This tab specifies the Warehouse Differences account for each organization's general ledger configuration.

It is automatically populated when a new warehouse is created as it is taken from the corresponding account of the Defaults tab of the corresponding general ledger configuration.

#### Shipping Company

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Shipping Company`

The user can create shipping companies and define freight costs to be used in product logistics.

Shippers to be used in other application transactions can also be created.

##### Freight

The user can define freights to be used for a specified shipper.

#### Freight Category

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Freight Category`

The user can define and create freight categories to be used by shippers.

#### Costing Rules

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Costing Rules`

##### Overview

A costing rule can be applied during cost calculation. Each costing rule requires a costing algorithm and a valid from date to properly calculate the cost of material's transactions. The "Warehouse" can be configured as a dimension to take into account while calculating costs.

Costing rules can only be created for legal entities, that is either "legal with accounting" organizations or "legal without accounting" organizations.

Product transactions costs can be calculated for both legal entities types, however only "legal with accounting" organizations support "perpetual" inventory posting as "legal without accounting" organizations do not support any type of posting.

!!! note
    A costing rule can be validated if a "Currency" is configured for the legal entity in the organization window, therefore costs are calculated in that given currency.

A valid costing rule once created and validated for a legal entity organization will automatically be assigned to the products of that organization, therefore it can be reviewed in the Costing Rule tab of "Product" window.

Costing rules allow the user to define whether backdated transactions booked for products on a later date need to be adjusted therefore corresponding "backdated transaction" cost adjustments are also created and booked to get the correct cost of those products.

!!! warning
    "Costing Rules" is a feature implemented by the new Costing Engine, therefore a costing rule can be created and validated within an Etendo instance managing costs only if it has been migrated to the new "Costing Engine".


Etendo recommends to migrate instances using the "legacy" costing engine to the new costing engine.

In order to create and validate a "Costing Rule", the user has to take into account that:

-   First costing rule created does not allow entering any date in the field "Starting Date", which means that all existing product transactions are going to be cost calculated.
    -   A blank date in the field "Starting Date" implies also a blank date in the field "Fix Backdated From" date unless a different date is entered in this field. "Fix Backdated From" date can be same or later than "Starting Date".
    -   Etendo will show an error in case there are product transactions whose costs need to be calculated with a movement date on a "Closed" period. In those cases, it will not be possible to post any cost transaction to the ledger unless the corresponding period is open for legal with accounting entities.
-   First costing rule created allows also specifying a date in the field "Starting Date", i.e. 01-01-2022:
    -   In that case, all transactions with a transaction process date prior to that date will also be cost calculated at a zero cost.
    -   All transactions with a transaction process date on January 1st, 2022 and later on are going to be cost calculated at the corresponding cost.
-   Second costing rule does not allow entering a "Starting Date" as current date is taken by default, therefore first costing rule ends when second costing rule starts and so on.
    -   Same applies to "Fix Backdated From" date defaulted to current date unless a specific date later than "current" date is entered.

###### **Costing Rule**

The costing rule window allows the user to define and validate costing rules.

![Costing Rule](https://docs.etendo.software/latest/assets/drive/1MxTiOhHzaaxhZQlKOMkF9jA6DKEbD-b5.png)

As shown in the image above, a "Costing Rule" can be defined and assigned to an organization for which the cost of the transactions need to be calculated.

There can only be one rule valid at a time for an organization which besides needs to be a "Legal Entity" organization type. The valid time period of the costing rule is set by the Starting Date entered.

!!! note
    Once assigned, the costing rule applies to every product transaction recorded on the *Legal Entity* and all its children.

The main property to set in a costing rule is the Costing Algorithm to used while calculating costs.

The Standard and the Average algorithms are available by default. Additional algorithms such as FIFO, LIFO can be implemented by extension modules.

Moreover, costs are calculated at organization level by default, however it is also possible to have the costs calculated for each Warehouse's organization.

This can be achieved by using the Warehouse Dimension flag of the costing rule.

Costing rules need to be validated to start using them. That is done by using the button "Validate Costing Rule".

!!! warning
    Once a Costing Rule is validated, it is not possible to modify or delete it.

If a costing rule needs to be changed, the user needs to create a new costing rule with the new setup required.

Let us imagine that an organization requires a new costing algorithm to be used for cost calculation. In that case, a new costing rule needs to be created.

The new rule overwrites the existing one, starting from a new and later "Starting Date".

In this case:

-   it is necessary to close the existing costing rule, that means to close the inventory valuated at the "old" rule
-   and to initialize the inventory which will be valuated at the "new" costing rule starting from a given date

The **closing** and **initialization** inventory balances are managed as Physical Inventories in the new costing engine.

Two physical inventories are created for each organization and warehouse the costing rule applies to:

-   the **closing** physical inventory empties the stock of products, therefore the Quantity Count is set to 0.  
    The cost of the products is the one calculated using the costing rule configured so far, regardless it is not shown in the physical inventory.
-   The **opening** inventory fills in again the stock, therefore the Quantity Count is once again set to the Quantity on-hand.  
    The cost of the products is shown and it is the one calculated using the costing rule configured so far.  
    Note that the cost of the new transactions of those products will be calculated by using the new costing rule.

The **costing rule validation** process does several checks:

-   for instances managing cost which have not been migrated to the new costing engine will not be able to validate costing rules
-   for instances do not managing cost do not need to migrate therefore will be able to create and validate costing rules
-   and finally, for instance already managing cost under the new costing engine infrastructure:
    -   in the case of products included in transactions which were cost calculated using a rule, if a new rule is configured all their transactions need to be calculated first according to that previous rule.
    -   in the case of products included in transactions which were not cost calculated by any rule, if a new rule is configured all their transactions must not be cost calculated.

####### **Fix Backdated Transactions**

As already described, a costing rule can also define whether backdated transactions booked for a product need to be fixed therefore the corresponding backdated transaction cost adjustment are created and booked for that product in order to get the correct cost of the product.

To make this work, one of the following two actions can be taken:

1.  use an existing and validated Costing Rule.  
    This way fix backdated transactions feature gets activated by using the process button "Fix Backdated Transactions".  
    This option allows entering a "Fix Backdated From" date as starting date, before running the process.

![Fix Backdated Transactions](https://docs.etendo.software/latest/assets/drive/1dSn2VWGuwWybweNlYEgdtUImlXA8UihG.png)
 

2\. create and validate a new Costing Rule.  
This way fix backdated transactions feature gets activated by checking Backdated Transactions Fixed check-box and filling in a Fix Backdated From date before validating the costing rule.

Both ways:

-   "Starting date" of the costing rule will be set as "Fix Backdated From" date whenever the end-user does not enter a "Fix Backdated From" date.
-   "Fix Backdated From" date needs to be a valid date within an open period.

###### **Initialization**

The initialization tab is a read-only tab which allows to review the "Closing" / "Opening" physical inventory created to validate a costing rule. Every time that a costing rule is validated a new record is created for each Organization and Warehouse. This record contains links to the physical inventories created.

#### Costing Algorithm

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Costing Algorithm`

##### Overview

A costing algorithm defines the method to use to calculate the cost of the transactions.

Etendo delivers the Standard and the Average costing algorithms as part of the new Costing Engine.

Each costing algorithm needs to contain and implement all what is required to calculate the costs and store them.

##### Header 

The main feature of a costing algorithm is the java class which includes all what is required to implement it.

The costing algorithms need to be loaded through a "System" dataset therefore can be available to every Client of the Etendo instance.

The costing algorithms can then be listed in this window once the corresponding system dataset has been applied.

It is recommended to apply this type of system datasets to the (\* organization) therefore are available for every organization of the Client.

If no record is shown in this window please contact your "System Administrator" to ensure that the "System" datasets have been properly applied by using the following "ant" command: *ant apply.module -DforceRefData=true*

#### Landed Cost Type

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Landed Cost Type`

##### Overview

Landed Cost Types window allows the user to define different types of Landed Costs that can be assigned to Goods Receipts and therefore allocated to the products included in the receipts.

Landed cost is the total cost of a landed shipment including purchase price, freight, insurance, custom duties and other costs up to the port of destination.

Etendo handles landed costs not as part of the "unit cost" of a product but as a part of its total cost.

##### Header

Landed Cost Types can be defined either as a "Product" or as an "Account" (G/L Item). Besides that a distribution algorithm can be defined to configure the way landed costs are going to be allocated to products.

Some fields to note are:

-   **Name**: that is the name of the landed cost type, for instance "Insurance", "Freight", "Duties" or "Taxes".
-   **Landed Cost Distribution Algorithm**: that is the algorithm to be used to distribute or allocate Landed Costs among all the receipt Lines related to that landed costs.

Etendo delivers a "Landed Cost Distribution Algorithm" that is "Distribution by Amount" as part of the costing adjustment feature.

This algorithm distributes landed costs to receipt lines proportionally by receipt line amount.

The main feature of a landed cost distribution algorithm is the java class which includes all what's required to implement it.

Landed cost distribution algorithm needs to be loaded through a "System" dataset therefore can be available to every Client of the Etendo instance.

Once applied, "Distribution by Amount" costing algorithm is listed in this window.

It is recommended to apply this type of system datasets to the (\* organization) therefore are available for every organization of the Client.

If no record is shown in this window please contact your "System Administrator" to ensure that the "System" datasets have been properly applied by using the following "ant" command: ant apply.module -DforceRefData=true

A landed cost type can either be created as an "**Account**" or as a "**Product**".

-   "**Account**" landed cost types requires a GL Item to be created, for instances "Duties".
    -   G/L Item needs to be configured as "Enabled in Financial Invoices" and related to a tax category, therefore this type of landed costs can be booked through a purchase financial invoice.
    -   "Expense" type ledger account used while posting a purchase financial invoice including a landed cost of this type are the ones setup in the Accounting tab of the G/L Item.
-   "**Product**" landed cost types requires a Product to be created, for instance "Freight", therefore this type of landed costs can be booked through a purchase invoice.
    -   "Expense" type ledger account used while posting purchase invoice including a landed cost of this type are the ones setup in the Accounting tab of the Product.

![Landed Cost Type](https://docs.etendo.software/latest/assets/drive/1RtueiqPAlE2jmnhvOF5o4nkkwutJL1e6.png)

#### Warehouse Rules

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Warehouse Rules`

##### Overview

Warehouse rules window allows the user to review the warehouse rules available.

Warehouse rules are used to restrict the stock available in the warehouse.

The rules are applied when the stock is retrieved automatically by processes like good shipment generation.

##### Rule

New warehouse rules can only be applied by extension modules which must include a dataset with the definition of the rule and a procedure that implements it.

Etendo ships three different rules by default:

-   **Unique Attribute**: All the stock proposed to be used must be of the same attribute set value. It returns the first attribute set value that is found with enough quantity to fulfill the requirement. If there is not any attribute set value with enough stock no stock is proposed. This is an excluding rule.
-   **Unique Storage Bin**: All the stock proposed must come from the same storage bin. It returns the stock from the first storage bin found with enough quantity. If there is no storage bin with enough quantity then the stock is obtained from any storage bin. This is a preference rule and not a excluding rule
-   and **Default Warehouse Rule**: The default rule does not restrict anything and all the available stock from the on hand warehouses is returned. This rule can be used in Sales Orders whenever it is desired to overwrite a rule defined in the warehouse to not apply any rule.

#### Referenced Inventory Type

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Referenced Inventory Type`

This section defines different types of containers or boxes, which include any kind of object that can contain goods.

**Referenced Inventory Type** window fields

-   **Organization** : Organizational entity within client
-   **Name** : A non-unique identifier for a record/document often used as a search tool.
-   **Shared** : Shared or Unique References
-   **Sequence** : The order of records in a specified document.
-   **Description** : A space to write additional related information.
-   **Active** : A flag indicating whether this record is available for use or deactivated.
-   **Referenced Inventory Type**
-   **Client** : Client for this installation.

#### EAN 128 Type Window

:material-menu: `Application` > `Warehouse Management` > `Setup` > `EAN 128 Type`

In this window you can add different types of barcodes. They store information about the product in this code, either: Date, Product, Physical Inventory Line, and when you scanned, you can obtain this information from the barcode.

![EAN128 Type Window](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/warehouse-management/EAN128Type.png)

##### Header

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/warehouse-management/EAN128Header.png)

- **EAN 128 Type** header fields:

- **Module** : Module to export the data.

- **Organization** : Organizational entity within client.

- **Name** : A non-unique identifier for a record/document often used as a search tool.

- **Description** : A description describing the usefulness of this new type is placed here.

- **Default** : When selected, this EAN 128 Type will appears by default.

- **Active** : A flag indicating whether this record is available for use or deactivated.

##### Lines

In the lines you can add a record referring to the parent already created. Here you will create a data that will be received when scanning a barcode.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/warehouse-management/EAN128Lines.png)

- **EAN 128 Type** lines fields:

- **Module** : Module to export the data.

- **Organization** : Organizational entity within client.

- **Active** : A flag indicating whether this record is available for use or deactivated.

- **Content** : Name of the line content.

- **Al** : Application identifier, that refers to the extra numbers in the code.

- **Content Length** : Longitude of the ean type content.

- **Data Type** : Type of the EAN 128 type data.

- **Fixed Length** : This check is set if the code only contains the data or not.

- **Lot** : indicator that determines if the EAN code corresponds to a "lot" or "lot number".

- **Serial No.** : A unique number of products.

- **Expiration Date** : Determinants if is an expiration date.

- **Sequence Number** : The order of records in a specified document. The Sequence indicates the order of records.

- **Attribute**: An attribute to define an item.

- **Entity**: The group the scanned item refers to.

- **Entity Field** : Property of the entity that the value is obtained. Refears the HQL field of the entity.

##### Example

For example we will see a record created here:

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/warehouse-management/EANLineExample.png)

- **Content** : The name of this new type that is being created will be added here.

- **Al** : AI gives a number of decimal places in the following value. The represented value is the following integer divided by 10X. For example, a net weight of 22.7 kg could be coded as 3101 000227, 3102 002270, 3103 022700, or 3104 227000. Registered AI should be 310X.

- **Content Length** :This will be the length of the code, depending on what it will be used for, it can be longer or shorter.

- **Data Type** : This refers to the type of data to be stored in the barcode. These can be: Date, String, Integer or Decimal.

- **Fixed Length** : This check leaves only the relevant information in the scanned code.

- **Lot** : the lot attribute appears to be a flag or indicator that determines whether the current content extracted from the EAN code corresponds to a "lot" or "lot number".

- **Serial No.** : A unique number, this represents a serial number.

- **Expiration Date** : This field defines that the value of the barcode is an expiration date.

- **Sequence Number** : This field helps keep track of the sequence number for each entry. If there are multiple entries with the same entityFieldName, the code uses the sequence number to determine which has the most recent number and, based on that, decides whether or not to update the content stored in the object.

- **Entity**: in this field you can assign the entity to which this value corresponds. it has 5 options:


- **Attribute**: when this option is selected, the "Attribute" field will appear on the screen. If you do not have any created, you can go to this window and create it. An attribute is a characteristic that can be added to the scanned value, to have a better reference to it.
    * **Order Line**.
    * **Physical Inventory Line.**
    * **Product Line.**
    * **Shipment/Receipt Line.**


These last 4 options show the Entity Field therefore by selecting one of these 4 options. 

- **Entity Field**: In this selector you can choose the specific field to the entity field that it references.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: ✨Getting Started
## Article Path: /User Guide/Etendo Classic/Basic Features/Production Management/✨Getting Started
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/production-management/getting-started
## Article Content: 

#### Overview

<iframe width="560" height="315" src="https://www.youtube.com/embed/LujFoXYv-XA?si=i8cKV41eHUdipMHh" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

The Production Management module allows managing the standard productive process: production plan, work requirement, end products report and its direct and indirect costs. It is also possible to manage quality control and machine maintenance in production.

#### Production Management

The main documents to manage the production process are:

- the Process Plan
- the Work Requirement
- the Work Effort

![](https://docs.etendo.software/latest/assets/drive/1lCJc82jrHhfKt3KS2Eg9SS0aoPpYMsD7.png)

###### **Configuration**

Apart from the setup screens in the Production module, additional setups are required.

For Production, there are different products that are set up:

- Raw material used in production
  - the Production checkbox is selected to indicate that the product is used for production
  - the process plan is selected
  - the default storage bin that is used for P- raw materials is defined in the [_Manufacturing_](https://docs.etendo.software/latest/master-data-management/master-data.md#product) tab.
- Finished products manufactured in production
  - the Production checkbox is selected to indicate the product is manufactured in production
  - the process plan is selected
  - the default storage bin that is used for the product is defined in the [_Manufacturing_](https://docs.etendo.software/latest/master-data-management/master-data.md#product) tab
- based on [cost calculations](transactions.md#calculate-standard-costs), a "theoretical" standard cost can be determined for the finished product
- a safety stock level is determined and entered for the product

Any semi finished products are created directly in the process plan by copying the information of a raw material product used in the operation. Once created, the default storage bin is defined in the [_Manufacturing_](https://docs.etendo.software/latest/master-data-management/master-data.md#product) tab.

!!! info
    For more information about the configuration of products, please refer to the [_Product_](https://docs.etendo.software/latest/master-data-management/master-data.md#product) section.

Also, Business Partners are configured for production:

In the Employee tab, any employees that are involved in the production process have the operator checkbox selected.

Likewise, the [_Salary category_](https://docs.etendo.software/latest/master-data-management/master-data.md#salary-category) configured for employees is very important since they are included in the final cost calculations.

!!! info
    For more information about the configuration of business partners, please refer to the [_Business Partner_](https://docs.etendo.software/latest/master-data-management/master-data.md#business-partner) section.

Work Efforts can be posted to the [_General Ledger Journal_](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#gl-journal). In order to facilitate the posting, the **MaterialMgmtProductionTransaction** table is activated in the [_Active Tables_](https://docs.etendo.software/latest/financial-management/accounting/setup.md#glconfig) tab of the General Ledger configuration.

###### **Execution**

Sales staff enters Sales Order for the product with the quantity required and the date by when it needs to be delivered. If the product is not in stock, it needs to be produced.

Also, if the stock level is below the safety stock level, products have to be produced.

The information about the demand from sales orders and safety stock is handled in 2 ways:

- automatically in MRP
- manually by a production manager

Ideally, the information is handled by MRP. If not, a production manager reviews if production of the product is required by reviewing the total demand:

- the outstanding sales orders
- the safety stock level

and compare it with the total supply:

- the stock level
- scheduled Work Requirements

If the demand is higher than the supply, or the dates of scheduled Work Requirements are not matching the dates of the outstanding sales orders, the product needs to be produced and a production manager executes:

- review of the stock of the raw material. If needed, the raw material will be requested and used in the [_procurement management_](https://docs.etendo.software/latest/procurement-management/transactions.md) process.
- entry of the Work Requirement for the required quantity with the required quantity and the planned date
- generate Work Efforts from the Work Requirement.

The staff responsible for executing the production can see on the Production Run Status Report what production has to be executed.

At the end of each shift, the production managers enter the information of what is produced in the [_Production Run_](transactions.md#production-run_1) screen.

#### Relationship with other areas

Production Management interacts with the following modules:

- [_Procurement Management_](https://docs.etendo.software/latest/procurement-management/getting-started.md): raw material required for use in production is bought using the Procure to Pay process
- [_Sales Management_](https://docs.etendo.software/latest/sales-management/getting-started.md): demand for the products that are produced are generated through the Order to Cash process
- [_Warehouse Management_](https://docs.etendo.software/latest/warehouse-management/getting-started.md):
    - raw material is taken from the warehouse to be used in production
    - end products that come out of production are put into stock
- [_MRP_](https://docs.etendo.software/latest/material-requirement-planning/getting-started.md): Work Requirements can be a result of MRP
- [_Financial Management_](https://docs.etendo.software/latest/financial-management/getting-started.md): Cost related to Production is calculated for finance.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Transactions
## Article Path: /User Guide/Etendo Classic/Basic Features/Production Management/Transactions
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/production-management/transactions
## Article Content: 
#### Work Requirement

:material-menu: `Application` > `Production Management` > `Transactions` > `Work Requirement`

##### Overview

In this window, the user is able to create and manage an order for a [_Process Plan_](setup.md#process-plan) to be executed a certain number of times to satisfy the production requirements.

!!! warning
    Important: Before creating a work requirement, it is necessary to have a Process Plan defined.

A work requirement is a document indicating what has to be produced and by what date. The work requirement is created based on a process plan. The operations with the related details are populated in the work requirement. Once the operations are populated, the information can be overwritten if needed.

A work requirement can be created in two ways:

- manually in the screen
- automatically as an outcome of the manufacturing plan in MRP.

##### **Header**

Here, it is possible to create production orders by choosing dates and the previously defined work requirement model.

![](https://docs.etendo.software/latest/assets/drive/uQ0cCZZcOZ0js49Mxwbyb-55Gpvl3P_G92Uqjcar8wwUJjMJ0IMJnxhzBNfsfEewvjDvOmWbuRZBp_gbg8sI8M04f6JZwNxoojOqXX1uKZjNYsprjBmAAP-bPKAl7AY9-YBip2AvbrJ4YGOWFp2hjoU.png)

**Organization**: organization in which the production will be executed.

**Document Type**: used for easy filtering, for example separate production department names can be set up as document types.

**Document No.**: number of the work requirement.

**Process Plan**: name of the process plan that is used for this production.

**Quantity**: number of batches to be produced. The field is automatically populated based on the entered process quantity and conversion rate.

**WR Creation Date**: the date the document is created. This date is used as a reference to define the corresponding process plan version.

**Starting Date**: date that the production is planned to start

**Ending Date**: date that the production is planned to end

**Conversion Rate**: batch size for production

**Include Phases when inserting checkbox**: when the checkbox is selected: in the Work Requirement, when the information from the process plan is copied, the operations and the products are included. The setup is also in the process plan, but that set up can be overwritten in this screen if needed.

**Process Quantity**: total quantity to be produced

**Process Unit**: the product to be produced

**Estimated Time**: information of the estimated execution time, that is populated when the work requirement is processed. The calculation is: estimated time taken from the process plan x process quantity on the work requirement.

**Run Time**: populated information of the real execution time, taken from the work effort.

**Process Work Requirement button**: to insert the information from the process plan in the work requirement

**Create Work Effort button**: to create work related to the work requirement once the work requirement is processed. Work efforts related to all operations are created at once, so depending on the amount of operations, one or more work efforts are created. If the create standards checkbox is selected in the operation, the create standards process is executed also, to insert the product information in the work effort. In all cases, the processing of the work effort is executed manually.

!!! note
    The Create Standards process will only complete successfully if there is sufficient stock for the used products (P-) of the operation. If there is no sufficient stock, not only will the Create Standard process fail, but also no Work Effort is created.When there is sufficient stock, the Create Standards process is executed successfully and by default the Completed Quantity in the Production Run tab is set to the full quantity on the operation.

##### **Operation**

In this tab, the user can add or edit operations and activities to be performed for the related work requirement.

After processing the Work Requirement, the information in the operation tab is populated from the Process Plan. The main tab of the Work Requirement is showing that the Work Requirement is processed and the Estimated Time is showing the total of estimated times of all operations.

![](https://docs.etendo.software/latest/assets/drive/N6jCi7z3kPJFRjTaGh1Zwl2AIPqDhVFRjAP-AIcQGcJvpNoNSodF59YXkkaqItTPcDChIEY3UEtldpAeYepSxijP576q9RhfctGFSVZ10SqTiJ70mp4nN4cu919QNA2-s6HrrpEUDCScHiOfoObefwo.png)

The fields in these two tabs are mostly taken from the Process Plan, but can be overwritten in the Work Requirement. For a description of these fields, please see the [Process Plan](setup.md#process-plan) section.

The **Starting Date** and **Ending Date** of the operations are defaulting from the main tab of the Work Requirement, but can be overwritten.

The **Estimated Time** on the operation is calculated using the formula: estimated time of the operation taken from the process plan x quantity on the operation.

The **Run Time information** is populated based on total actual hours populated from the Work Effort for the operation.

**Close Phase**: With this process, the work requirement phase is closed. If all the phases are closed the work requirement will also be closed.

##### **Product**

In this tab, it is possible to add or edit I/O products to be used for the selected operation of the work requirement.

The information in the Product tab is populated from the information in the I/O Products tab of the Process Plan, upon processing of the Work Requirement.

![](https://docs.etendo.software/latest/assets/drive/v34LYr8HTiICG-MCBVPKhxHFVxGCV-MlnHJPodY19SGOjtHX2QkbdJZk-s0JU6vntb5nHV_axLiVVZ05FEuuuvrNNVDGjumOD5YMs-ephN693XbGD0d1l2cKGBPcPnKyhwSLK_tc0uYZNOxiiUgLWY4.png)

- **Movement Quantity**: value populated from the Quantity field in the I/O Products tab of the Process plan.

!!! info
    For a description of the rest of the fields, please refer to the [Process Plan](setup.md#process-plan).

#### Work Effort

:material-menu: `Application` > `Production Management` > `Transactions` > `Work Effort`

##### Overview

In this window, the use can edit precisely what has been produced from a selected product order.

The work effort records the work executed by employees during a production shift. The document is used for the following purposes:

- to calculate the real cost related to the production of a product.
- to keep track of the remaining effort on work requirements.

##### **Work Effort**

Here, it is possible to create a report for the completed work requirement for a desired date and time.

![](https://docs.etendo.software/latest/assets/drive/ejgAV4yI6GlnDlpw3vEvTT8yPma9TU_bPgqcPZFtdaX5tVCUetfOsDmuofJEgqQWcbIPtJzBdbt71hKzTWEAY-jbK14BTXmSA5VG1D9pV4ZNsODaIa_kQIR4K2_kED0dvtSE158MnsvF_xkvgKALIrM.png)

- The Movement Date, Starting Time and Ending Time indicate on which date and during which shift the production took place.
- The Create Standards button (displayed in the "Production Run" tab) is used to execute the process that loads all the P- and P+ information as well as global used products, machines, salary categories, indirect cost, toolsets. When the standards are created, also stock of all P- products is checked and an error appears if any products do not have stock. For the Create Standards process to complete successfully, the Completed Quantity has to be greater than zero.
- Once the standards are created and all the correct information concerning the production is entered, the work effort is validated by clicking the Validate Work Effort button. At this point, the stock information is updated. For P-, the stock decreases and, for P+, it increases.
- Optionally, the Work Effort can be posted to the general ledger journal once the [configuration](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/production-management/getting-started.md#configuration) is added. If done, information related to the cost of the raw material and produced products is posted.

##### **Employee**

Here, it is possible to add employees that took part in the completion of a related work requirement.

Any business partners that are set up as operator in the Employee tab of the Business Partner screen, can be selected as employee that worked on the production of the product.

![](https://docs.etendo.software/latest/assets/drive/7h69ee196GkDtEwIegH-w_-DnbqHT9gs0_Ne9r4dTQdX3mybqUjtEZI2D1EaiMlF5Lc-us7mZ3ZBAbb6RoseTdfHnbkr_c0RRFgpn7Drsxjr-qWHBGxYMRwVto7mzXbLoc5l7Ad6JyzJRb0z272fkEE.png)

##### **Incidence**

Here, it is possible to add work incidences that might have occurred during the completion of a related work requirement.

This tab is used to register any incidence that occurs during the production run, the amount of downtime that it caused, and a description.

![](https://docs.etendo.software/latest/assets/drive/dKafnyApuWpd-qZHvxzBhp3qmQ5uzfKQGgSIhMgObnVESUc-Pc4AX8oI-6fP4Urc_PeZFpuHhhYbW9gO-VlVGKxrf2BaYeRo-NO1mdWOfNpnVwolYSBS42OMCAs35-FWyANjlf9toOYLexsnWBmL_1k.png)

##### **Global Use**

Here, it is possible to add global use of products used for completion of a related work requirement.

In this tab, any products that are not specified in the process plan but are used in production are entered. For example, packaging material:

![](https://docs.etendo.software/latest/assets/drive/EgHIDMDxXAnH_Uu6xKmHcyI1jVk2ARDkz41OflXTBIN2jae9K5r7NkMG-qr5CrQDoUf2GEbrjVgq_HQ-mC9JCIeMwp4OiPT3-97Fll08BwnO5Zli4G60lB-4sy2pInhsgbFmulxo3tOpsXkMV9WLZ8I.png)

##### **Production Run**

Here, it is possible to add progress details of the specified work requirements.

The information related to the executed operation is entered in this tab:

![](https://docs.etendo.software/latest/assets/drive/A5CChqOgLunuEMkNM6nQ3nimEEazTpqi6chLsz1W2pX-WKkASGAu0oelnLboU9-6Pf5FgM5cDm1uBTXNGinyr2hJUN1H_VhYh4JPFAywA1uLdKcvZnpIHtAhRCsaGDPY-7a8xvRHJyco9MnzYP05RS8.png)

- **Required Quantity**: required quantity of the operation. Populated information when the work requirement phase is selected.
- **Completed Quantity:** the quantity of units produced.
- **Starting Time**: actual start time of the production run
- **Ending Time**: actual end time of the production run
- **Rejected Quantity**: information only field of any rejected quantities during production of the operation.
- **Cost Center Use**: the actual use of the cost center for this operation
- **Outsourced checkbox**: indication of the operation being executed by a third party
- **Close Phase checkbox**: selected if a partial quantity was built, but the operation needs to be closed indicating that the remaining quantity will not be built.

##### **Toolset**

Here, it is possible to add or edit toolsets used to complete a specific part of a work requirement.

The information in this tab is populated automatically when the create standards process is executed. The information is taken from toolset information in the activity screen. The toolset uses is populated based on the utilization coefficient in the activity screen multiplied by the completed quantity on the work effort. The information that is populated can be updated with the actual information of the toolsets used during production, before validating the work effort.

![](https://docs.etendo.software/latest/assets/drive/NEF9g-7ajQYdxyTWt2HW_Fg4F1Vj-GU6uOvxgXWHMcPdpgkVrIwsqS2V8hFwp1PLcB9yq8WT5SWKlvLd8vr1Yp3ciSK19pxp6MH08H7GApC5qLrHYngl_B-h9nwp9vEbuJIWsSXVSWi_GRcYa3QmI_8.png)

##### **Product**

Here, it is possible to add and edit I/O products related to a completed part of a work requirement.

The information is populated automatically when the create standards process is executed, based on the work requirement phase information and the completed quantity on the work effort. The information that is populated can be updated with the actual product information before validating the work effort.

![](https://docs.etendo.software/latest/assets/drive/lbrPJfhjehblSoh-nP0ekL0Ex2vdgpcdYfb5On2Yf_u-GJSI6xfO2Xc3LIjgQVDzcoz7M2IorKsq-RTOlxfAkVbl4kcmQFKP4nmWm2-KUizzQFui2_6NCIUBx9evz0nJEZaemkGoWfi4brQ4T0fszq0.png)

!!! info
    For details about the fields, please refer to the [_Process Plan_](setup.md#process-plan) section.

##### **Salary Category / Employee**

Here, the user can add or edit salary category workers that took part in a work requirement.

!!! info
    The information in this tab is populated automatically when the create standards process is executed, taking the employee information on the process plan into account. The information that is populated can be updated with the actual information of the employee effort during production before validating the work effort.

![](https://docs.etendo.software/latest/assets/drive/KVrf-Pn7jX-2OpevFjDXIoxSLlYh8WHUJCUpeE3IsCdMoJJxVvHlhZYYf--EeQVX_DUs1Rt0ZkP7qVVDVWsc0POFyFhqlHI8r4PzKpBHfz58dolmqurRcDgrPjJLDjTUhoeqozVl20oA60gihkiybQk.png)

- **Salary Category**: information taken from the cost center setup. The populated information can be updated, for example, to enter another line for additional employees with different salary categories.
- **Business Partner**: the name of the employee that executed the production.
- **Quantity**: the number of employees of this salary category that executed the production. In the cost center set up, the number of employees of a concrete salary category that are related to the cost center is defined. The value can be overwritten here to reflect a different number of employees.
- **Estimated Cost**: the cost calculated when the production costs are calculated, which takes into account the cost center use time.
- **Runtime**:the time dedicated per employee to the production.

##### **Indirect Cost**

Here, it is possible to add and edit indirect costs related to a specified completed part of a work requirement.

!!! info
    The information in this tab is populated automatically when the create standards process is executed, based on the indirect cost entered on the process plan. The information that is populated can be updated with the actual information of any indirect cost related to the production, before validating the work effort.

![](https://docs.etendo.software/latest/assets/drive/iuv3Te0GxcXZs0VXdS0MxCRy47S_PK0fFyxD7HQy6fTzO9M4hhDZEH2P62zTHl8GvZ5wYNjgWvd0c8S9y_bSbcvi65EHPFSe6vXhdG1Q3QFEYTwYgqqaE27FjVMSd8L0P-poFkey1ACplVzR7mC-EZI.png)

##### **Machine**

Here, it is possible to add and edit resources used to complete a specified part of a work requirement.

!!! info
    The information in this tab is populated automatically when the create standards process is executed, based on the machine information entered on the process plan. The information that is populated can be updated with the actual information of machines used during the production, before validating the work effort.

![](https://docs.etendo.software/latest/assets/drive/du83cQoKoqRc-ivEUqD32zUTyQ0Z0bA1o903Kduu64hqqoUe_qjtPfSHnb35g_YeAZVgtuPqqRWslEIhTA_cwW2-mNlFoP-Ov6-VE2fi6GkVTj6oAkqwZLdwBufrWj2YtkQO_WnF2aRnO-Vl1ri0YzI.png)

##### **Outsourced**

Here, it is possible to add invoices corresponding to the outsourced part of a completed work requirement.

!!! info
    Any outsourced cost for the production is entered manually in this tab based on purchase invoices received from the company that executed the outsourced work.

![](https://docs.etendo.software/latest/assets/drive/t18fChED8nHdZ7FgYDp8bSVGdDEdEnuq-VazT0WhJB5kkkanRMM5GUl9HPpxbnDM9wcEPcYmExxIvye2yw-5nZbHxQHkM39lEe9CIiYyDl3zBl6Vxm-DlQ0KoF11bZjvEhY_RpwxbHatzjZpftkhBUU.png)


##### How to Reactivate Work Efforts

!!! info
    To be able to include this functionality, the Production Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Production Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=7C68641225CE46A6BF8A39993CC8E1E5){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Production Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/production-extensions/release-notes.md). 

This functionality is useful when the user needs to reactivate a work effort.

From the Work Effort window, the user is able to reactivate a previously generated effort just by selecting the corresponding record and clicking the Reactivate button.

Once the effort is successfully reactivated, the state of the document changes to Not processed as it can be observed in the status bar.

![](https://docs.etendo.software/latest/assets/drive/j7x8yhwYGogcMN0tOknI1k6U0hlr0QXVGKW8AWvJe98_IPTIz8_WVYfDMOSVV5S80kFMEcJn2lbsGR-rApAobtnK2_miTFCFQpmi_BAv2DtzH6w9EOaBVY_8Z_feQQbcThY5scJYoVxUO3dQlwdAQtEKbOhAfcqTwLnIhJqFTSE5mrIzBaJxL2sc5v1AKw.png)

!!! info
    Note: It is not possible to reactivate documents that include transactions with quantities exceeding the existing stock quantity for a certain product in a certain storage bin. The only exception is when the configuration of the storage bin allows Over Issue. For more information, visit [Storage Bin](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/setup.md#storage-bin).

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [Bulk Posting](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md) in the Financial Extensions Bundle Documentation.

#### Production Run

:material-menu: `Application` > `Production Management` > `Transactions` > `Production Run`

##### Overview

Here, the user can edit precisely what has been produced from a selected product order.

The Production Run screen displays the work efforts that are not validated. The listed work efforts are either created from the Work Requirement screen or directly in the Work Effort screen. The screen gives an overview to production workers of the production tasks that are scheduled to be executed.

##### **Production Run**

In this window, it is possible to add progress details of the specified work requirements.

The screens are identical to the Work Effort, with the exception that the work effort main tab is not displayed, but directly the information in the Production Run tab. This way, the screen gives an easy-to-read overview of the planned production runs. The Incidence information is a tab on the Production Run. The Production Run number is corresponding to the Work Effort number.

![](https://docs.etendo.software/latest/assets/drive/uYe5s0l6N_2p3yNcZZ9CmoCm8hsv0r5shLWAk5i1KoNMrWrBiKRKPwN6mIpKQFQXV3NCKYFKawIlL8Q05zcR-ZXe6xfoS-XklUbGLlp6azvuHga8Horfg6qSCS-08Ifbp6YcFiEL0paI4h8HbFRIQr4.png)

!!! info
    For details on the fields, please refer to the [Work Effort Production Run](#production-run) section.

!!! warning
    Deleting a production run is done in the corresponding Work Effort, not in this screen.

##### **Incidence**

In this tab, it is possible to add work incidences that might have occurred during the completion of a related work requirement.

![](https://docs.etendo.software/latest/assets/drive/9Vj5p-rT0DvWXljBKw7z6R3MMWhh8Lkp6sI851WEGEaaIQyt-mzLltdRl3JUrkmXY9yvOqK24T13IHxKfz5bbGDVcDH9whF61Qy0H5AyciX2dMe59W7If7CxHVXUpnTrNAR1QY5TDTJ9yg44JxlF7-4.png)

!!! info
    Please, refer to the [Work Effort Incidence](#incidence) section for details.

##### **Toolset**

Here, it is possible to add or edit toolsets used to complete a specified part of a work requirement.

![](https://docs.etendo.software/latest/assets/drive/Q5p4iUveKtYise9CCTg7VmF0jvVXwKsxdEU3sMWQmljUxumVGVlIW8wGmQYYN28J77yvNUZ-Ny_tv0_rOn-9ZvYr6UhpuNytC47pr3_1Bj5bOQA0cX6vloW_hGFjMMykVAW4w8aiX0gwFt7wrY9r0RY.png)

!!! info
    Please, refer to the [Work Effort Toolset](#toolset) section for details.

##### **Product**

Here, it is possible to add and edit I/O products related to a completed part of a work requirement.

![](https://docs.etendo.software/latest/assets/drive/Gc6Uzzq-t4k22Uz5oDXh7fjTl_tGK424VU_jcwMiiAoD8Vr7M6mNZm3juSgCK8jFlSU4GXsrKST3R97seVusNoQeu1zCIMQJwUxLpY5sXhkqy2-rVAfTYwGQtuqadeyHg-2kaeK78SsHcMb_T-zZeZw.png)

!!! info
    Please, refer to the [Work Effort Product](#product_1) section for details.

##### **Salary Category / Employee**

Here, it is possible to add or edit salary category workers that took part in a work requirement.

![](https://docs.etendo.software/latest/assets/drive/k-se48cgS1yUpNHPL_i9PB0n3p4hQfdag3_cuAz4tWcA-KuIB6p8pqN_fgdU-B2JTYqT9sNBTdspSOCj-dcz9eYvJtYtB8smHudxN5aFssaeOVrk99WwJ0JlMxcJd8kysbVvSdsktJ4uaU2bWu3tmOg.png)

!!! info
    Please, refer to the [Work Effort Salary Category/Employee](#salary-category--employee) section for details.

##### **Indirect Cost**

Here, it is possible to add and edit indirect costs related to a specified completed part of a work requirement.

![](https://docs.etendo.software/latest/assets/drive/IcPzMtAZbsDiPx4Btb7ixAEzC5olQai3DJ2y_airaujavIcaVDlnQgFj0nAz96QAX2KPy7OfdWkuX_uI6KvBeilA2UqBGfb2g5IFyVKEZokS-xWcRYDkHtf5mEH0nMiCZNd798T7xCOeSZMR1VJzlJ4.png)

!!! info
    Please, refer to the [Work Effort Indirect Cost](#indirect-cost) section for details.

##### **Machine**

Here, it is possible to add and edit resources used to complete a specified part of a work requirement.

![](https://docs.etendo.software/latest/assets/drive/6iUU--CNzMyPMA1sgX1ICpnnlXuYIdUFTy6uEZbWis0reuAH73_FD8lijEgN-97XBXhviIve9PbfvMtS6d5Ec1UH5vo1E2fsAHMou4GG6hUw5JhP2rSCbhcKuMnRmi1UGobBO4xHLxALmpJqTY7pDqE.png)

!!! info
    Please, refer to the [Work Effort Machine](#machine) section for details.

##### **Outsourced**

Here, it is possible to add invoices corresponding to the outsourced part of a completed work requirement.

![](https://docs.etendo.software/latest/assets/drive/IJs1mYGVcDg0ktrAk3FK7dFOn9f-vC7Sag9Vpj8NUkRF-29hh0Zub78jma19Hy9AHnzFxmlDncIQK9G-C9fNpR8evDlI306Zki5wBcRpMRATp7dD2iTf9kjGJaCjfby7qjQqyHdhV_yzQcRY6z4ysN0.png)

!!! info
    Please, refer to the [Work Effort Outsourced](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/production-management/transactions.md#outsourced) section for details.

#### Quality Control Report

:material-menu: `Application` > `Production Management` > `Transactions` > `Quality Control Report`

##### Overview

In this window, it is possible to create and edit measurements and report findings at predefined checkpoints. The goal is to ensure output quality during production.

For the production cycle, a Quality Control Point can be set up, in order to execute a check related to the production process. For example, checks on machinery or tools that are used in production.

The execution of the checks is documented in the Quality Control Report.

##### **Date and Shift**

Here, it is possible to create measurements and insert gathered values or a specific date and shift.

The date and shift during which a particular quality control point is documented, as well as the time when the check took place. Also, a contact name is entered:

![](https://docs.etendo.software/latest/assets/drive/AXduTqsMvEKpdg4y7gc6rhi91JPwt2Cq4iO6ymUhcF_hsfFaHkSwV4DhN8xLjzgAPSYdVd5UWEbj6gorXKI3L7EU-tTjr_W1-bjGUPcaWg_TWMgctRI98LOzLhFANWnVT3bw4Q1NEhwKDQu9LPO7Ays.png)

The Create CCP button is used to automatically populate the information in the Check Point Set and Time tabs about the check(s) that are configured to take place during the selected shift.

![](https://docs.etendo.software/latest/assets/drive/g9Qs9AbBjSGJ48NOvAAaOLdqPlZItdZXUcQ5lWi6BOLYjbZw0cnsxuFw5veceYk01kDtrHtpQ1PS8Hwy4Eu6wQba-F-5Gpdt6cfpc2DuxZLVDTfQ6tsXsxjQXrm-0qGQrQiJ-YbVug5uWhNEEzQL87g.png)

Once the action above has been executed, the Edit CCP Measured Values button appears. When clicked, a popup appears in which the value of the check is entered:

![](https://docs.etendo.software/latest/assets/drive/lGjS_zMdUlNNVj4bkukepsGQaaAzl4l3K1eXK95Xj6RWbO7APL8z-H7wp_7KMEIFrlpDD5xSPmveCbgaG6Jg6uSNeUF0w88hd8O0mUJ5qERvwlme0Yx24rSDYT4wuH-t92Zc6bMYvDdSJS05UuIWxs8.png)

After entering the value and clicking the OK button, the entered value appears in the Values tab.

Once the value has been entered this way, the Input Time Measurement button appear. When clicked, a popup appears to process the information entered in the time tab:

![](https://docs.etendo.software/latest/assets/drive/jiWhuZFWP4dsSXIO-yc2gszXEB1MQL5OEDrusT5w3bWdzPWM9jiKqNx6p4ZF-P8QjMwvdZ1jvUuY2jH3DgDHDgNQ-qLdegHy53DpHg9e2-hiPYlWTxjUsZY-V1fmGyZoZNW7NssxKOpcvcR_0-Zmgo0.png)

##### **Check Point Set**

In this tab, it is possible to create and edit checkpoints for the related measurement.

The information is populated with any checks that take place during the shift.

![](https://docs.etendo.software/latest/assets/drive/JL6RUh2Ew7-xaa-NsuOmFl0xyOE6u83pxeb62axr9rVadjxfmeJbvKCpxfFiDINvJItbszYw7QsNfdNN-aOqRGWz9yNoUcj9LD0jbG_NO27LrPrYCjtVkpz4R0Z4irN-oyfbYIfEn4b-8bmLyHy6WR4.png)

###### **Time**

Here, it is possible to create and edit times for related checkpoints.

The information is automatically populated when the CCP button is clicked: the time that appears is the shift start date that is configured in the [Quality Control Point Shift](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/production-management/setup.md#shift) information. When populated automatically, the status is processed.

In the case that the information is entered manually, the information is processed by clicking the Input Time Measurement button.

![](https://docs.etendo.software/latest/assets/drive/3hziy8dLROOJxGjjQhkXtZaIyzJFS9XqcjzQaubPpXZeumnO9UGEllR1pRPqPCeyNgXDT5hLc_UfJGSExFBWwGH0LECB3IUbo4LZd26Hob071Eyow-o8pQyUYlR04QkVEX2pnjjwBcYYlX6FL5XxioI.png)

###### **Values**

Here, it is possible to create and edit values for a related measurement.

!!! info
    The information in this tab is automatically populated when the button of the Edit CCP Measured Values is clicked and a value is entered in the pop up screen. Alternatively, a value of what was measured during the check can be entered manually.

![](https://docs.etendo.software/latest/assets/drive/4jyrm2KoM2sC0Zy5FmPXb0aEli0iR6pDWelkPfreobeFGrrnuf6aZfZY8WtXIdr9WaHQBC-sVYPwhTBS6JH9dZOAC7LAN3QXHCv9NtMuovd0OyFe1C1LfKlb-Bb-UB0fZMrbLBeR6fa5fAeP0aL1x2U.png)

#### Periodic Quality Control Data

:material-menu: `Application` > `Production Management` > `Transactions` > `Periodic Quality Control Data`

##### Overview

In this window, the user can create and edit data collection and measurements related to quality control. This is done at predefined checkpoints for a manufactured product.

!!! info
    The results of the executed Periodic Quality Control is documented in this screen.

##### **Periodic Quality Control Data window**

It is possible to create measurements at a predefined checkpoint for produced products.

All relevant general information about the executed quality control is entered in this screen, such as which check was executed when and for which product:

![](https://docs.etendo.software/latest/assets/drive/VfilQBFh6Pl64kSKf_-p4e0sLGM73szKJy2qMCt7hcWPScFVz_K3jfqXfnqlAm_nAFN4u0XdQKuffM5kerObcgKqzaTVa9biz7IksSksW3oE3vKYX-ISF58oIH35EHKIETVpuf_qb5pot_P3SctW1qo.png)

After the main tab information is filled out, the Run Periodic Control button is clicked to populate information in the Result tab.

###### **Result**

In this tab, it is possible to create and edit quality tests for a specified checkpoint, and add test results of the performed tests.

!!! info
    All information is this tab is automatically populated by the Run Periodic Control process, except for the Test Result field, which is entered manually.

![](https://docs.etendo.software/latest/assets/drive/FqKAJrtkNbhmdc2OFOewWY9baewuUgIOxR7lS6vGBYJdl16KDkPYcUN8ulfBlBXGngl0FJNLEp9G17kVOoZcvql6tmUvr1aA-qKvAqPILie_SeeHL1vmonRIoVjSYqoqK1PB9OYLO9c9uTsd9aVm0qE.png)

#### Internal Consumption

:material-menu: `Application` > `Production Management` > `Transactions` > `Internal Consumption`

##### Overview

In this window, it is possible to define products which are only to be used inside the company.

The Internal Consumption screen is used to administer any products that are used during the execution of maintenance tasks. When processed, the stock is reduced. The products are purchased through the [procurement process](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/getting-started.md). The products are set up as a regular item, without the Production checkbox being selected, since they are not part of the production process.

##### **Header**

Here, it is possible to create products which are to be used inside the organization, and not sold to customers.

![](https://docs.etendo.software/latest/assets/drive/KIpOaB03M-1zAUmqLNzfu9ARrAWOZeHIQouUQYlDgkJb_inQARRCvSMFnCxiwEt-K_1XqOQUXFqiBA26Ca1dZWT6kirj7AbOvbDtThM1xH3Lj84yR1JdjPkhtelIaa4HGoIRr_1Karc9QwCzzeslEXE.png)

The name is a selectable value in the task tab of the [Maintenance Order](#maintenance-order).

!!! info
    Optionally, the Internal Consumption can be posted to the general ledger journal once the configuration is added. If done, information related to the cost of the product is posted.

##### **Lines**

Here, it is possible to add internal consumption lines. Each line corresponds to one product.

The information of the product, its location in the warehouse and the quantity used during the maintenance task is entered. When clicking the Process Internal Consumption, the stock level is decreased with the selected movement quantity.

![](https://docs.etendo.software/latest/assets/drive/0-R3JjQCmz0L-hVct2jtU1rrVJz-zAcjxHU--akKhVCaRmtjxfFZzJjJVxF30mdfYGCJoAhtdJASRKHtq2DfnMfWQE90TY2VQJ_0lp-4yb6Q6wpz_pdJOJHvu30XfnL6dBhW7BHNZ5vn5Igeg6HSIx8.png)

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [Bulk Posting](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md) in the Financial Extensions Bundle Documentation.

#### Maintenance Order

:material-menu: `Application` > `Production Management` > `Transactions` > `Maintenance Order`

##### Overview

In this window, it is possible to create and edit the results of a scheduled maintenance order.

This document is used to register the execution and results of maintenance tasks. Any tasks that are confirmed in the [maintenance plan](#maintenance-plan) are selectable in this screen.

##### **Order**

Here, it is possible to add previously scheduled maintenance for a specific date and report observations.

In the main section of the document, the date and shift during which the tasks were executed is selected.

![](https://docs.etendo.software/latest/assets/drive/7J_RMrdg69_k9JI8v239krFRe_1mcIhvGmWL4P2EhN4vKyiE98FNe5eDau4xbyzz9KUuWO6nBUWdwk4F1SZ9QMs2f4neaZa9ubZDp-zAE27q_X4IzxrQwTlecgnYd_Eh2gis498mI53jQrgsW16lVok.png)

- the Insert Maintenances button is clicked to populate the information in the Task tab. In the following case, no scheduled maintenances are found.

![](https://docs.etendo.software/latest/assets/drive/JwhbYeUF4gmYRZiwiXMbxwtX78WAWD2kbKqzeTa88X3NxXiM3rbE4aY1Jpc_05NO5y97SoqpWL0p5QM6ad-TZCwVoDg8HaT816mLbQDaaltM6cp5C1RHZ7r4YvjhZWpwDF1XYAB2ciL-Nu8dUlJ19U4.png)

- **OK checkbox**: to indicate that the maintenance ended successfully. In the task tab, this results in the Result checkbox showing as selected.
- **Time**: time in hours to execute the maintenance.
- **Observations**: the results of the maintenance task are entered here.

###### **Worker**

In this tab, it is possible to add or edit workers that took part in a specified maintenance part.

The employee that executed the maintenance task is entered in this tab. As per the information in the set up section, all employees that have the operator checkbox selected appear in the value list of the business partner field in this screen.

![](https://docs.etendo.software/latest/assets/drive/_ixGkV3uChoxlpefdf6jl-sGeUxGX0J3_rmlW4GN1HW6-cnTy-c8BL-SlMnvhoTb9SrO9Nf1VzSY9EgrWewlmBNK9dLoelWB3qBmP73kpEQeL9zbRljxqy3PshYgNVVRmUaGC208Ly7HtTtOWOivGAs.png)

##### **Task**

In this tab, it is possible to edit maintenance tasks of a specified order.

!!! info
    Most of the information in this tab is automatically populated by clicking the Insert Maintenances button, apart from the **Internal Consumption** field. Only the **Internal Consumption** field and the **Comments** field are updatable. In this screen, any products that were used for the execution of the maintenance tasks are entered in the Internal Consumption field. For more information, please refer to the [Internal Consumption](#internal-consumption) section.

![](https://docs.etendo.software/latest/assets/drive/TW1-CvgYU9cXZM8ywo45abWaFYebU1wQqjnpzyxRZIEFVp6Sk6rlkraqcuqiece_oSL_phqMNTpPQadoBswcjCT8eQe8rO8fx-8lU-rRHbd67thf74vGFgtht2bbw1_teYi2cLAneOydEiCFDg4Hmss.png)

- **Result checkbox**: indication that the maintenance task is executed successfully. If the result is not successful, the task is still considered completed. For any follow up actions, a new maintenance plan is created.

#### Insert Maintenances

:material-menu: `Application` > `Production Management` > `Transactions` > `Insert Maintenances`

##### Overview

The insert maintenances process executes population of the scheduled maintenance tasks to the [Maintenance Plan](#maintenance-plan) based on the maintenance information in the machine category and/or machine screen.

The creation of the maintenance plan is based on a date range that is entered upon launching the process.

![](https://docs.etendo.software/latest/assets/drive/eysNqSiPXml7NzZWE6qc7Nxv5ndjJ23QY7wfGJOdQk15Bape9nMC2VzAgoXVsCqzgrNbjt88Y49Jt_l2-gTOfRJQWpne5dFblNZdTy271PHt3zMHSEUTMZ-CskKAhe9I8AFJnNrtOmh2lnJdsXyAo88.png)

#### Maintenance Plan

:material-menu: `Application` > `Production Management` > `Transactions` > `Maintenance Plan`

##### Overview

Here, it is possible to add and edit predefined maintenance plans.

The Maintenance Plan information is created in 2 possible ways:

- populated automatically by the insert maintenances process
- manually: for example, to enter data when a machine breaks down and needs corrective maintenance.

Any maintenance tasks that have a [Maintenance Order](#maintenance-order) linked, are hidden by a default filter that is applied to the screen.

##### **Maintenance**

Here, it is possible to create and edit maintenance tasks for a specific date.

The Maintenance Plan gives an overview of all the maintenance tasks for a certain time period that are entered by the insert maintenances process or manually. Regardless of how the records were created, the information can be updated to change dates or add comments.

Once the maintenance task is correctly reflected, the confirmation checkbox is selected.

![](https://docs.etendo.software/latest/assets/drive/t7AGwwCGujuokaQuwH_fJLSj6w1v-0cm5e5GK0kOCXhyv57GXxfWlTs2TzK-hh__GP-gAU6FCSglWGH1A_DNJ1IJ0Uq9iEJTAtT_pEQX_z34ctnjHAEKk1Y_R4B7vPKJ8jEPKKfU7y26hHm3LKPDTgE.png)

#### Calculate Standard Costs

:material-menu: `Application` > `Production Management` > `Transactions` > `Calculate Standard Costs`

##### Overview

The Calculate Standard Costs process is run to generate the standard (= theoretical) cost of manufactured products.

Cost information is set up in several screens:

- in the [Process Plan](setup.md#process-plan), the use of the [Cost center](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#cost-center) is defined
- in the cost center, the following cost is defined:
  - **Employee information**: salary category information as well as the quantity used per hour for the cost center. Based on these, the cost of the employee is calculated. The salary category cost is entered in the [Salary Category](#salary-category--employee) screen.
  - **Machine information**: the machine and usage information is entered in the cost center screen. The machine cost is entered in the [Machine](setup.md#machine_1) screen.
  - **Indirect cost information**: all indirect cost items related to a cost center are list. The indirect cost is entered in the [Indirect Cost](setup.md#indirect-cost_2) screen.
- in the process plan, the quantities and cost of the materials used in the production process are defined.

For raw material, the price list information is used for the cost of the P-. The purchase price list that is used for the raw material cost is marked as default.

The cost information that is calculated for a product P+ is used when that product is a P- for another operation**.**

The formula that is used by the process is the following:

(Cost of Cost Center + Cost Employees + Cost Machines + Indirect Costs) + (Quantity P- x Cost P-) = the cost per unit.

When the costs of the cost center, machines, employees and indirect costs are calculated, they are multiplied by different values depending on their unit of measure:

- If per Hour is used, the cost is multiplied by the Use of the cost center in the Process Plan
- If per Unit is used, the cost is multiplied by the sum of the quantities of the P+'s of the sequence.
- If per Kilogram is used, the cost is multiplied by the sum of the weight of all the P+'s of the sequence.

For Indirect costs, the additional unit of measure percentage is available. This adds the defined percentage to the total cost calculated (cost center, employee, machine, indirect costs and P- products). For example, if defined as 1.15, an additional 15% is added to the cost.

!!! info
        For the Indirect Cost to be included correctly, the following configuration is important in the [Indirect Cost](setup.md#indirect-cost_2) screen:<br>
            -select Cost Type = Production,<br>
            -a date range that includes the date of the standard cost calculation in the Value tab.<br>
        This way, the standard cost for each operation is calculated.

![](https://docs.etendo.software/latest/assets/drive/tbl7rEZD5KfBpyiysFXuwOq3v7iaGF2IvjdC7si9PCqrkPxA2GUfVF0vy0uNFVcwY_XMaJ6lTMCENUfE_S51YX3bqX2YT7-J-yENd8-wq0McDEPeiQJRyLM4LeBCplhwbNEVMCzY31jvIwY3MHrvFuU.png)

The outcome of the calculation appears in the tabs of the Process Plan:

In the Employee, Machine and Indirect Cost tabs, the result of the costs are automatically populated.

---

This work is a derivative of ["Production Management"](http://wiki.openbravo.com/wiki/Production_Management){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Setup
## Article Path: /User Guide/Etendo Classic/Basic Features/Production Management/Setup
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/production-management/setup
## Article Content: 
#### Overview

This section describes the screens that are necessary to set up the components used in the production process in Etendo. The corresponding windows are:

[:material-file-document-outline: Section](#section){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Work Center](#work-center){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Process Plan](#process-plan){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Activity](#activity_1){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Toolset](#toolset_2){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Machine Category](#machine-category){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Machine](#machine_1){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Manufacturing Cost Center](#manufacturing-cost-center){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Indirect Cost](#indirect-cost_2){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Periodic Quality Control](#periodic-quality-control){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Quality Control Point](#quality-control-point){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Work Incidence](#work-incidence){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Maintenance Task](#maintenance-task){ .md-button .md-button--primary } <br>


#### Section

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Section`

##### Overview

In this window, the user can edit the production area by dividing them into multiple sections.

A manufacturing area can be split up in different sections in order to identify where the physical location is where a certain activity will take place. For instance, the Main Floor.

##### Section

Here, the user can create a production plant section to assign work centers to it.

![](https://docs.etendo.software/latest/assets/drive/RPLgpPfChtqTHtSSZKE-p-j_Twgj_DyTnisFz2drbYBi0HUB_prEFVWw9nVDBaTr2IkghDI7f3CB3nzuZS8snebUJUGKnNaJ5GQovZccN1w12DNe1o49QYVl-UlqjkQnC4wNBAUAzJfDwGmDvaIc3X30IOfbOvr--kw_G7dgYmJRfahvxh1dwNlu2fBKMw.png)

#### Work Center

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Work Center`

##### Overview

In this window, the user can create and add machines to be used in a work center.

The work center is a logical grouping of machines, processes or tool sets in a certain section of the production area.

##### Work Center

Here, the user can create work centers.

![](https://docs.etendo.software/latest/assets/drive/9kT0_TaTjh0Il0zr3-KHyDDh8FggpeVL-MkcOKw358VyWFnUHA7legzkMZnoybxUkuZLQgQlWsnKavMfBrHlEZaEMVHC07lRq_k5hGGKLpvb-4Cyd6Xn8D3eGf9mpbbF4d_2bThFQ9ovAOuZwL6uY78V4Hsxd75EDR7RCSzVlzyv9NiRRGkllRjDdcNKsA.png)

-   **Section**: to indicate where the work center is situated.

###### **Machine Station**

In this tab, the user can add machines to be used in a selected work center.

Here, all machines that are related to the work center are entered.

![](https://docs.etendo.software/latest/assets/drive/1bH2Nkpkjs2grvEa02A9sh0f9URwCciXD.png)

###### **Activity**

In this tab, the user can view the activity related to a selected work center.

Here, all activities that are referencing the work center are populated automatically.

![](https://docs.etendo.software/latest/assets/drive/22v5AKPwbBl1d5oJrrZ71qmt5Y3Vz4_d4IBU9MGKOa-AbT7Ag-53BAF2tLS0SbJT-fwq3qYWWi_9MfuHOZ3jZtvNIcCQ6HPydkjbnMvC7hSnb42_nz3hQX3FPSy7iIKKfh9l0i4iGVQLNDOz3A3QPycF0IGplEUnpsErwWqCHUG8T1QoJjDtcOUjXyutrQ.png)

###### **Toolset**

Here, the user can view the toolsets of a selected process.

With the population of the activity information in the activity tab, all toolsets related to these activities are populated in this tab.

#### Process Plan

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Process Plan`

##### Overview

Define the steps and processes to be completed for an intermediate or finished good, taking into account available resources.

##### Process Plan

In this window, the user can create production process models.

A key document in production management is the Process Plan. Each product that is produced has a process plan to define the exact operations and the input and output for each operation. Based on the effective use of raw material and machines a batch size (conversion rate) is used for the production of each product.

![](https://docs.etendo.software/latest/assets/drive/SoQoernKAnjjfeWdWvMCT5ppg9eINn51RV6dvywJdU-hyUuKavPjL3wE0lYBWteLV48-SwjWe7mREMd1onCUE2eukMZarQRfSo4elEvSu6Rdq6AHQdgPNsONTvAkfePWXdYG8aEViMa8aoLSH7Rn6HgZaQtbTIa5P6jVTl3eqUQ6fHdwTJo1rtSBpSkLWA.png)

-   **Organization**: organization of the process plan
-   **Search Key**: abbreviation or full name used to easily filter the record
-   **Name**: name of the process plan
-   **Description**: note field
-   **Process Unit**: the outcome of the production process
-   **Conversion rate**: batch size of the produced product
-   **Include Phases when inserting** checkbox: when the checkbox is selected: in the Work Requirement, when the information from the process plan is copied, the operations and the products are included
-   **Copy version** button: to copy the content of another version of the same process plan

###### **Version**

In this tab, the user can create process plans valid for a specified time period.

Changes may be needed for a process plan. To make sure the history of all changes is kept, different versions of the process plan are created. The copy version button is used to duplicate existing versions of the same process plan for re-use. The copied version is updated with the required changes.

![](https://docs.etendo.software/latest/assets/drive/CJtP2PkMv41D-RrZO788OdbcHe5EUkBoHKYLCl2zoRBgg_dHtBmuSwu31WIM3fhdl2OHlCObrOiC34OGml4AVTO6j1BGdAkzk1_T2LA0bXerUztf4VBKI_E-UqN9qhVKrz-pdjgRCgQe9qjQY2TKUtiAJbs9IkPaCTkv04PiCcHCRIwLf54ttM_LdjSYlQ.png)

Each version has a starting date and an ending date.

The estimated time field is populated with the value of the accumulation of the estimated time of all the operations in the process plan. The information is updated by the application each time an estimated time is entered and saved on an operation.

###### **Operation**

In this tab, the user can add processes to be performed for a specified process plan.

Each stage of the production process is defined as an operation.

![](https://docs.etendo.software/latest/assets/drive/AhtU7kSrp3UVkGNl6yKEeJLSjGac23Z0NENhjN8T5LCKeYsyt3brjGxnnX-CxMAPP8MkVxE7_CGEmtw08NHw7S9K6l-lUU0kXtSxPFYxqH_SK-AcWqPm47r-IxsDOx9Ht7oEm2Ug2TpgsSIEjqCYy9B1o6SORH2pXawRLRat807h3MMaoVTzAQgf7PUiIQ.png)

**Name**: name of the operation

**Activity**: activity that is executed during the operation

**Estimated Time**: information entered by the user to indicate what the estimated time in hours is to execute the operation.

**Cost Center Use Time**: estimation of how long the cost center will be used during the operation

**Preparation Time**: time indication of any preparations needed for the operations

**Description**: note field

**Multiplier**: indication of how many times the operation has to be executed in one production run

**Empty cells are zero checkbox**: selection has the result that when the Work Requirement inserts the process plan information, the quantities on the products are left zero, so they can be entered manually.

**Global use checkbox**: when selected, the application populates the product in the global use tab of the Work Effort when the create standards process is executed. When the work effort is validated, the application divides the entries in the global use tab between all production runs that use this product. It is inserted as an additional P- in order to be included in costs calculations.

**Outsourced checkbox**: indication of the operation being executed by a third party

**Create Standards checkbox**: the process plan is used to automatically generate information about operations and products in a work requirement. From the work requirement, work efforts can be created to document the work executed in production. In order to know what products were involved in the work effort, the create standards process is executed on the work effort. When the Create Standards checkbox is selected, at the moment that work efforts are created from the work requirement, also the create standard process is executed. By default, the checkbox is not selected.

!!! info
    The Create Standards process is only completed successfully if there is sufficient stock for the used products (P-) of the operation. The stock has to be in a warehouse that is related to the organization of the Work Requirement.


###### **I/O Products**

In this tab, the user can define input and output products taking part in a specified process.

For each operation, the products that are used (P-) and the products that are produced (P+) are defined.

The fields that are displayed depend on the selected Product Type.

![](https://docs.etendo.software/latest/assets/drive/4TOi0DqD55dV0B27ddGjyNYaC00CXVAzCi6GPQf6JnnGFrZ_fFfCGPab01FRv5d6l8Bs-ymXBhTPlZ9V5gKwB5O5EhkamKLVkhrWFAuv1X1BokbjEWDGMYUrn_oFoAruY0v8UEx2NvvJsS-BW8SsKSPs_UdY9FjCKdibhClHq5eDVoxqBXXZVm4_Fivx7A.png)

**Product**: product used in the operation. Only products that have the production checkbox selected in the product screen, appear in the list of products

**Product Type**: indication of whether the product is used (P-) or produced (P+) during the operation

**Quantity**: quantity of the product

**UOM**: unit of measure of the product

**Unique attribute set consumption checkbox**: field that only appears for product used (P-). When selected, the application will select stock with the same attribute only. For example, if the product has different lot numbers, all stock that is used during the operations will be taken from the same lot

**Component Cost**: field that only appears on produced (P+) components. The input is a factor used to distribute the cost when an Operation has more than one P+ product. Example:

An operation consumes 10 (P-) A and produces 5 (P+) B and 10 (P+) C.

The cost process calculates a total cost of 15USD for the operation (including cost center related costs). That cost has to be distributed between P+ B and P+ C. If both B and C have a Component Cost of 1 the cost will be equally distributed between B and C. Resulting in a cost of 7.5USD/5 = 1.5USD/unit of B and 7.5USD/10 = 0.75$/unit of C.

If B has a Component Cost of 1 and C of 2, the cost assigned to C has to be twice the cost of B. 5USD are assigned to B and 10USD to C resulting in a cost of 5USD/5 = 1USD/unit of B and 10USD/10 = 1USD/unit of C.

The way to calculate the particular factor of any P+ is to divide the component cost of the particular P+ by the sum of the Component Costs (CC) of all the P+ products.

**Decrease**: information only field

**Rejected**: information only field

**Division group quantity**: field that only appears on produced (P+) components. The value entered is the quantity that is produced with the same attribute value. For example if the attribute is lot number or serial number, the number entered in this field indicates how many products will get the same lot number or serial number during production. During production, the following attributes are automatically assigned to products in production:

-   expiration date
-   serial number
-   lot number

**Create Product copy button**: as indicated in the product configuration, semi finished products can be created by copying the product that is used to produce this particular semi finished product. This functionality can also be used to create other raw material products, in which case the selected Production Type is product used (P-). When copying the information, the search key and name are suggested in the format \[original product\]\[operation name\]\[operation line number\], but can be overwritten with a different value. Any attributes related to the original product can be copied also.

!!! info
    Any changes to the automatically created product, such as unit of measure or cost type, can be updated in the Product screen.


###### **Copy From Attribute**

In this tab, the user can define the relation between attributes to be copied.

The Copy From Attribute tab is used for products of the production type P+. The tab is used to enter the different attributes to be inherited from different P-'s, that are used to produce the P+. This means that only P-'s used in this operation can be selected to be copied from. In the case that the P+ is created by copying a product, if the attributes were copied during the creation, the system populates the information in this tab:

![](https://docs.etendo.software/latest/assets/drive/PNTiBnu9oIhiM7115vTcZPRxrGEw_8EGr_b6qAu1wU08yDLbklTPWMpN14N_9mLOOpsxOoRQRD-N4SLvu4bbutwzXa2dz7wXbZnb9s-mY0nBHGWmh_5jX0ZWeQ2R04wxsLt8D493KuBV6iSvPdfUJNeT5GWSkXc0BGVjIG4gz3kPeiSi2I-7T_dIyTZi9A.png)

-   **Is special attribute checkbox**: used for special attributes, which are **lot, serial number and expiration date**. When not selected, a regular attribute is selected to be copied.

!!! info
    When attributes are copied over to a different product, the product that the attribute is copied to has to be configured with that attribute also.


###### **Employee**

In this tab, the user can define the employees that can perform a specified process.

The process to generate standard cost (theoretical) populates the cost information in the Employee, Machine and Indirect Cost tabs. For details, please refer to the [Calculate Standard Costs](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/production-management/transactions.md#calculate-standard-costs) section. The information is needed for the theoretical cost calculation of the P+.

![](https://docs.etendo.software/latest/assets/drive/_TM91ctLLzY-kvMDwkeAXnsjXaTTWLmu6O6lpbdvHkVppxgcJxxTgczX8WTkoREEEM2rtbilAmnP77WAuzezDQkrZw7V94pweP9L1TFnXsc3xP6ljzT-Z6UIAAKqvh_Ga6ZrcViJNhB2SD0HE5bk2Z5WKOFqgl_YQ1epU93daoZFpzUbQTtG3CO7NaqdYA.png)

###### **Machine**

In this tab, the user can define machines that are used for a specific process. In the example, there is no machine defined.

The process to generate standard cost (theoretical) populates the cost information in the Employee, Machine and Indirect Cost tabs. For details, please refer to the [Calculate Standard Costs](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/production-management/transactions.md#calculate-standard-costs) section. The information is needed for the theoretical cost calculation of the P+.

![](https://docs.etendo.software/latest/assets/drive/5YE-jABPzRHKUP12eBMB7MbOIqTUNgzHxd2ME1FqiNLuUzfTA9vwH-4oVqSBWT-6HSlsrp-m8V0Dq8ZwlhnCbCYnXdhljrOy2h4JGGkjAD7gobebyea6R2BhH-dusTBknb5gdSKNkithzk5BETzXNA_1bKqO8TWDH-YgtLpZXaQA4ztz09WrHJlTn_xCwQ.png)

###### **Indirect Cost**

In this tab, the user can define indirect costs related to a specified process.

The process to generate standard cost (theoretical) populates the cost information in the Employee, Machine and Indirect Cost tabs. For details, please refer to the [Calculate Standard Costs](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/production-management/transactions.md#calculate-standard-costs) section. The information is needed for the theoretical cost calculation of the P+.

![](https://docs.etendo.software/latest/assets/drive/DN4ZfyHumPHB6J5C5N3CtmU6prJP2FSSwd2ppRQnHjdlP-yDPHMS439-Uz75x9_2rfEYJPxBClFSzJi0Oe6kC9pdP-Vlx1Az0paKbEJ9OrAiY7RFVgpTO1cNACgoMsHMrn_GfNMEYmxkjrnuEqcn64owZmB1ePyOd1YZ0PYEkcENwtiALXsjAoEls1z6Mw.png)

#### Activity

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Activity`

##### Overview

In this window, the user can define activities (processes) to be performed as part of a process plan and their characteristics.

An activity is a certain work that is executed during the production process. For example in the clothing industry, examples of activities for the production of shirts could be cutting of fabrics, dying of fabrics, sewing of the shirts.

##### Activity

The user can create activities to be used in the production process.

Each operation in the production process has one or more activities associated with it. Each activity can be associated with a **Cost Center** and a **Work Center**.

![](https://docs.etendo.software/latest/assets/drive/KUuPDhaz07lXWvfhcafYZPafKqLjL5nCdUmBcmA2iURz3XESYO_lqvASNfXvNEPSCXjQFmUV-zx8cdls_cQHqJIYP95qtrWnX3wbQxCZ0t3E8RDHFdRf2WbgN1kBn1D3nTck54mg0SSDHwohv9KBVXS1dzTTS8EDWV-xQGJkA55c7liV_OhhBsZwMfV6Eg.png)

###### **Toolset**

In this tab, the user can add toolsets to be used for completion of a specified process.

![](https://docs.etendo.software/latest/assets/drive/sNB2hJZZvIAutTbmSJVqV4dMPHIagxi4gPOd7nJg3DB0msSdRYzrwJxzbwbe_yrh81KmHur8YJn3ISvRPjrXdkjIwMBYduIhuQXAIdaC0yVgxmw8jtx-wiP7hmy3eDLjjFGw3KBcRdhafb_IORvbIc4POKa6YJUc2Tn_DAlspqu7RYAQnLE8sY8RxvkwUA.png)

-   **Utilization Coefficient**: the number of times the tool is used during the activity.

#### Toolset

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Toolset`

##### Overview

In this tab, the user can define tools and groups of tools to be used in the production process.

Apart from machines that are used for production, there are also tools that are used and need to be set up. All tools that are used in production are included in the activity setup.

##### Toolset Type

Here, the user can create toolset types to group toolsets with similar characteristics.

![](https://docs.etendo.software/latest/assets/drive/HrCmVvSuOa8IDZbYUKWGdTadezaJ0Q6PaSAu2JugCEYmtJxxQbTcO4JI38iaz6fYtrlvypz5LpC3a6iqnt2O0OPsSuYJRrVnT8TqPm4R8fdNl3_vTLmQrM-qmU_JunZsT4r31yyw_Fkx1DeHVnWNMiaUUqrMt2z74ym8GS7ItE1QUziDfPD1hNcHUPQ2qQ.png)

-   **Lifespan**: number of years that the tool can be used

###### Toolset

Here, the user can define structural trees to be used in the application.

![](https://docs.etendo.software/latest/assets/drive/HO6w093yOjDP15lexKVbmuTTHUfZNJYlsLSZWB2TN2AcHcblN1WijsvCvRutiEgq4afa96qBDWMETVQ2B2g8fLHDWCUx8wMtj1IuNrmT6nZgBvIvTDbtFc3-S-lzsvUuN-1qXM7sObAAl18nKPWbypHzi0TFIDYl9XXyJVlHFkBn6rV849dTJC1J983Vmg.png)

-   **Storage bin**: warehouse location where the tool is stored
-   **Discarded checkbox**: indication that the tool is no longer used. The field is entered manually and does not generate any transaction in the application.
-   **Utilization**: when activities are entered, the associated toolsets are entered. This results in an automatic count of how many times the tools are used in production, based on validated work efforts.

#### Machine Category

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Machine Category`

##### Overview

In this window, the user can create machine categories based on desired characteristics.

A logical grouping of machines that can be used to categorize the different machines that are used during a production process.

##### Machine Category

Here, the user can define machine categories to group machines with similar characteristics.

![](https://docs.etendo.software/latest/assets/drive/rEcxGOkgMa3wUSoersWWLvaHUb_M9Wl3U1PApaqZ9GEQl5uvhfyYvavszcsnAjbrHhGH2pNkOGyWpFbwpHgaSu_UwBl1X464sCzd73qwLr_FkUtz8sqp0AyLORzp2oC1Mnsjycv287kGjSEktGZUdEhbROO9BtSDeFsXT6ashkHOVk-jrDF75Y06gPlJMg.png)

###### Maintenance

Here, the user can define maintenance categories needed for a specified machine category.

Once the maintenance task(s) is set up, it can be added to the machine category. By selecting the Insert in Machines checkbox, the maintenance plans are populated for all the machines that are related to the machine category when the Insert Maintenances process is executed. When the checkbox is not selected, a single maintenance plan for the machine category is created.

!!! info
    By selecting the checkbox, the maintenance plans for the machines are created, but the maintenance information is not added to the maintenance tab of each machine. That tab is used to document any maintenance that is not related to the machine category, but only to that particular machine.


![](https://docs.etendo.software/latest/assets/drive/ke6Z95f4HeYXA5phy_KxDMbkLEAhclGG2-fEShFLUlWjj3a98P-QKsYxKqDHe_n3K2bGdJk-fladhmPXNl3qzhwurbBMvnexUzcjWH4CsQgVSf_FnOXOm_Ifc6KGz2UfV89zk1w9_lpkA-S6DXrT2IG9qzYmgeCLKseH4Vp1wKruQUL-MvYcGbxfoTkLBQ.png)

-   **Maintenance Type**: to indicate the nature of the maintenance:
    -   preventive
    -   corrective
    -   corrective(urgent)
-   **planned time**: to indicate how long it takes to execute the maintenance task.

###### **Periodicity**

The user can add interval timings to schedule and complete a specified maintenance.

This tab is to define with which frequency and during which shift the maintenance is scheduled to take place:

![](https://docs.etendo.software/latest/assets/drive/ntnSc6brnLCQjI7dffbc-KG62fVKENB05ZQb8slRZjmm5ZFtuFUt2bEpVgZLsMEgLsifGV5shB8IYLrzECN8hZqh0cWEoCGjuZT9DCoIHVnmcF0ZmgPlIiCk6ERgyI2dOTvVkLCqMc1fcLZE9iRQ3k7uF8MQh37UFIHK3n94xK_LkFUa2HDVghKgvXE2nQ.png)

**Periodicity Type**:

-   **Daily**
-   **Bi-monthly**: the Starting Day field appears to define when the first maintenance is scheduled
-   **Half-yearly**: the Starting Day field appears to define when the first maintenance is scheduled
-   **Monthly**: the Day of the Month field appears to define which day of the month the maintenance is scheduled
-   **Quarterly**: the Starting Day field appears to define when the first maintenance is scheduled
-   **Weekly**: the Weekday field appears to define which day of the week the maintenance is schedule

#### Machine

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Machine`

##### Overview

In this window, the user can create machines to be used in production.

In this screen, all the different machines used in production are set up.

##### Machine

Here, the user can add machines to be used in production processes.

![](https://docs.etendo.software/latest/assets/drive/wd8ce956Lrn6xooVITMkJ4qHGyOvnTRyKnYWRuDqYh4sPKgWPGNvklWocKTbNrluYBunJLg7QxXZWmbC7y2nYBDv5qoHUuyQUVi51-HZpJj64QL9bBAZFuV8N7eFLcONWI19leaeirTE2_yKHKaeTqpw90hg6eCfN_zoN5utQCbuFLQZTmmFNLpAaczNog.png)

-   **Machine Category**: which grouping of machines this particular machine belongs to
-   **Purchase Year**: the date of purchase of the machine
-   **Lifespan**: the estimated time that the machine can be used for the production process

###### **Cost**

In this tab, the user can set the full cost of a related machine.

In the Cost tab, all cost and amortization information is entered:

![](https://docs.etendo.software/latest/assets/drive/huurjDiCAay4k2S3bSbZesFm1RCaCrJdIddhZcmZM77t3kW3o6x0EPJwDVJS4gj2UD3PxQCOmGl3ay7cowJWJN2aDaIT7bnYnJv9SQ_Pk70ZhxQW_r0gYfmntV4LeEMlI3a4qdU4XJmIGys-kGPvPG15sXeWtT-0Rz2lSRqDA9AE-XTLxBh7zABIFfT1dQ.png)

-   **Valid from Date**: start date for the amortization
-   **Purchase Amount**: the amount that is paid for the machine
-   **Cost**: cost per UOM automatically populated after the above information about the machine is filled out, based on the calculation: Value/Year / UOM Annual Cost.
-   **Cost UOM**: indication of how the cost should be calculated, per hour, per produced units, etc.
-   **Toolset Amount**: extra amount for the machine, for example for components
-   **Amortization**: number of years in which the amortization for the machine will take place
-   **Value/Year**: amortization amount per year, based on the calculation: (Purchase Amount + Toolset Amount) / Amortization. The value is populated when the amount of year of amortization is entered.
-   **Work Days/Year**: amount of days per year that the machine is used
-   **Work Hours/Day**: number of hours per day that the machine is used
-   **Idle Time/Year**: number of hours that the machine is not working in a year, for example because it is in maintenance.
-   **UOM Annual Cost**: Populated field based on the calculation: (Work Days/Year x Work Hours/Day) - Idle Time/Year.

###### **Maintenance**

In this tab, the user can define maintenance types needed for a specific machine.

Any maintenance information required for the machine is entered in this tab.

![](https://docs.etendo.software/latest/assets/drive/yrca7TQbz4xNJuoBRpQKf6xH2fBE4CSWRsP722qbEF4Pc9AV0bIW43hEeNs_iNu4RGKZ-5gzUcOTFGvkfYSQCVoX47kJmtAI2UNagwFNutSVpiTxtf_xgIsnz_oZsEkP0FvY_xgAWFy1HSslEH3WNmdhV-6VBv9aCtLctW2buWcM446G9PpDYRJDje4tuw.png)

-   **Maintenance Type**: to indicate the nature of the maintenance:
    -   preventive
    -   corrective
    -   corrective (urgent)
-   **Planned time**: to indicate how long it takes to execute the maintenance task.

###### **Periodicity**

In this tab, the user can add timing intervals to schedule and complete a specified maintenance.

This tab is to define with which frequency and during which shift the maintenance is scheduled to take place:

![](https://docs.etendo.software/latest/assets/drive/G05uie6h3FKL5oGPKOnsQuoYMARyBXR5qdsrS_Vuf9Ela_xNlIfmtea5atMKmvVT1e0kaxZcKqxVxYKNc_Lrm0hYZGeKWEKDtPQoMnS6L5-ESVxf0pwQVg8ST7EsFQ5cqvWQo72cd9Grz3jEa6iuxnihKSgZ8IMWsvBlBUAOtffHLbktjA_iJpTCz04hAw.png)

-   **Periodicity Type**:  
      
    -   **Daily**
    -   **Bi-monthly**: the Starting Day field appears to define when the first maintenance is scheduled
    -   **Half-yearly**: the Starting Day field appears to define when the first maintenance is scheduled
    -   **Monthly**: the Day of the Month field appears to define which day of the month the maintenance is scheduled
    -   **Quarterly**: the Starting Day field appears to define when the first maintenance is scheduled
    -   **Weekly**: the Weekday field appears to define which day of the week the maintenance is scheduled

#### Manufacturing Cost Center

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Manufacturing Cost Center`

##### **Overview**

The user can create and edit cost centers related to production to sum up charges associated with a specific transaction.

All operations in the production process consists of activities. These activities have a cost center defined and how much time of that cost center is used. Each cost center has the employees that are part of the cost center defined, as well as the machines used in the cost center and the indirect costs such as electricity, etc. Based on these components, a cost per hour related to the cost center can be defined. Based on the use of the cost center during production, a cost per produced unit is added to the total cost of the unit.

In order to set up the cost center, the following information has to be set up first:

-   Salary categories and related cost for the employees that are related to the cost center
-   All machines that are related to the cost center
-   All indirect cost components are defined

##### **Manufacturing Cost Center**

The user can create cost centers to be used in production processes.

In the main tab of the form, the name of the cost center is defined:

![](https://docs.etendo.software/latest/assets/drive/YxIFKH2NGTKSJyZcrImt3kWbHRIolF2vEukAS0NEi07x5-aYaE93G1XBXFQBou2P2NYe7QQ8TUgoBLY5ioACdhz3_I61RoLJJoYRThLHRjZMWzfuiVsyHBhEpn4CUy7wkfy-NaRxWrQSxpt_CkC58ddeTIZ6MpVdg9OI-a3favwpD6BVqQhEjlx0Z9080g.png)

-   **Calculated checkbox**: when selected, a different value from 0 will be populated in the Production Run tab of the Work Effort window, regarding the 'By Default' checkbox value. When not selected, use time of the cost center in the Production Run tab of the Work Effort window will be 0.
-   **By Default checkbox**: when selected, upon calculating the production cost, the cost center use time defined in Work Requirement will be populated in the Production Run tab of the Work Effort window. When not selected, upon calculating the production cost, the start and end time of the work effort is taken into account to determine the use time of the cost center.

###### **Version**

In this tab, the user can create cost center versions to be used with specified time periods.

For the cost center, there is version control, so historic data can be reviewed.

![](https://docs.etendo.software/latest/assets/drive/FH3MEzZh7XgdjTIq3NtihUtPIAwdmfej1DWN6Z8yyuLPqEhQiO4_44Z_l9dBAu5DqT_Kq93Y_fm9LEFVcbSmlo0jEBqomEV2M1jG-27dJeTBkig1E2UKlNeZu-9BnCTa8EwkW3PsiExAzbt9x7e7WWHmOoH8IWO3wMeWG-N2vp9aLiiauqxek1wlXqeEKw.png)

-   **Cost**: based on the cost of employees, machines and indirect cost, a cost for the cost center is entered.
-   **Cost UOM**: unit of measure of the entered cost: per produced units, per Hour of production, per kg (of produced products), percentage (of the produced units)

###### **Employee**

In the Employee tab, the user can add employees to a specific cost center version.

In this tab, the information about how many employees per hours of a certain salary category are assigned to the cost center is entered:

![](https://docs.etendo.software/latest/assets/drive/zcImneCBx5NRmrwUf5jJ940fp7Atqe-rCzJZAOZDjivbQEr2m9dnvMPbhPBrN60QU5jruVC205rh7pFxT-Y5JOE59Z35Q4ChoVunJYFofx8dOyDzGrQ963tHuDuHSFBB6kBn6kx_pa2ccnDY5UCpFqcJJoA1onTKNwcJMu9wM4XzN71n054aTQCM8-DRTg.png)

The information in this tab populates the default information in the Salary Category/Employee tab of the Work Effort.

!!! info
    The split checkbox is used when there are multiple lines for employees. For example, if there are 5 lines for production workers with a quantity of 1, if the split checkbox is not selected the Work Effort will display one line for production worker with a quantity of 5. When the split checkbox is selected, five separate lines for production worker with quantity 1 per line is displayed in the Work Effort.


###### **Machine**

In the Machine tab, the user can add resources to a specific cost center version.

In this tab, all machines related to the cost center are entered with an indication of how many times the machines are used (Usage Coefficient) during the production process:

![](https://docs.etendo.software/latest/assets/drive/8djLPKLuMgD9aFBhFAqzG7oSx1EmD_TfN8cNLe_m1qb01N6eL4W6vEHeIVDl-SbHoPDUHtRQjmT3BgaBi-lTmdE3zkN_Go4JHyua2_DaLCQPDfAwCHb5-M3X-6zdYE8s2lLxmKVFLKEW7jqmVBFLxO0QIq-3_EoK8QP1yrXq81zJxScZIFnMkIJFJXUZeg.png)

###### **Indirect Cost**

Here, it is possible to add indirect costs to a specific cost center version.

Any indirect cost for the cost center is entered in this tab:

![](https://docs.etendo.software/latest/assets/drive/KtAOPYF3BSUihGoNd9Un4bVufHTBsyaTx3AugEPdWcwTUgTofzYBnlopAFnnMGeJMNj-fQpTtRMHQ0ni5HLSzqkd8l2C-jhiEUyyoqVvegwbKhez4ZUT_zT4bLmy-TZaVWBcQZMIBMWZx5dhr6choXCpAndJONkXcP4RPj8iWUU4IDq47_VfPhqBwcIBkQ.png)

#### Indirect Cost

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Indirect Cost`

##### Overview

In this window, it is possible to create and edit indirect costs to be used in production.

Indirect cost are cost related to produced products that are not directly related to a specific production run, but are included in the cost calculation of these produced products. Examples are electricity cost, cost of packaging material, marketing cost, etc.

##### Indirect Cost

Here, the user can create a new indirect cost.

In the main screen, the name of the indirect cost is entered:

![](https://docs.etendo.software/latest/assets/drive/1D_53MJ6fnym8hHohasibeJStTVJvzYS3ADvUa95MnmK0PMffbdAopplXhMBdB4u3yLyEe4heRCy7fMqICbkCs4yxc2Ixxv_D3liJX0I3kPNZRAA8k8yVFjPJ1PYKgT0szrHe2jbmqKwspCVppzvdrZKjL6dJOVlVMz_PVLTGIlFFazVBtQ0A1TsK_Tkag.png)

###### Value

Here, the user can create and edit values for this indirect cost.

In this tab, the indirect cost for a certain time frame is entered in the Total field. Since the cost UOM is per produced units, the cost is calculated when clicking the Calculate Indirect Cost button by dividing the total cost by the number of units on all work efforts in the defined time frame.

![](https://docs.etendo.software/latest/assets/drive/3ZvwogqECAmP8Ybk5L7gowmaSD-jUsYYxA9Nhs96BO2hQkDDGtoMBKwc_OnUeO06o3wQtRgZRef19H_fgePUvPmluD_u3pC1SXSj8FnTZUJMd03-mn3AJgel0G2u4LNWX8OJx6aJpSZeLVId224jUsoT5C9ig5rJAfUXdWEnOOoj2dw4FtLCAaHtYLrwAg.png)

#### Periodic Quality Control

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Periodic Quality Control`

##### Overview

In this window, it is possible to define checkpoints to be used for quality control of a produced product.

The periodic Quality Control is set up to ensure the quality of the end product of the production process. For example, a check to see if the size is correct, the color is correct or if all specifications of the product are correct.

##### Periodic Quality Control

Here, the user can create checkpoints to be used for quality control of produced products.

Another example is to see if for a product the label is in the correct language:

![](https://docs.etendo.software/latest/assets/drive/So4hmpqJcMDYp6sS7anMaZZQT36Tbx3IO5xDusq6biLJmR4RiLtWoq1iNbJn6ulou-DszbIHV3F8JWPQWlWHFz2Gs7XejPWw2YRzrIfSDMcSqH7aqBNzczm51EXr4gBSxPJy1BL8VwdHrUZ12zeR8wHxWGnvjRHCT1Kuoa33EKE3TdRm0bZm_R03Vwynhw.png)

###### **Check Point**

Here, the user can add quality tests to be taken for a specified checkpoint.

![](https://docs.etendo.software/latest/assets/drive/zy0c871WIFJMLRXf0N8yriKdT1jxzUzll4l0UB8xSJTiYqRpKAfw06Gn4dD1VAmhyl2daZC-4G6pHZq_YIL-3uBl_YBUYeuJNC_vP8ZBD8acLtp8nwY50QsWPEvRerdHuxX1qULDbHobtLdOvoGjsPwbXbtMNUresOtv5143pINqITQNMHyMvDSrhvUuoA.png)

-   **Waiting Period**: time (in days) that the execution of the quality control will take.

#### Quality Control Point

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Quality Control Point`

##### Overview

In this window, it is possible to define quality control check points to be used for testing the product quality at any point in the production process.

Quality Control Point is a point or stage of manufacturing where it is essential to control (reduce or eliminate) a risk to avoid downtime.

For example, checking the temperature of oil every three hours. It is possible to set the frequency and list required tasks and accountable personnel.

##### Check Point Set

Here, it is possible to create check point sets and define tests frequencies.

![](https://docs.etendo.software/latest/assets/drive/UJHDhsHZ54dwEngq5D3ucCuCwcFxY_I0CFBOTFJ01ViFlDA6wf4b99RujQpxP62gtiy0MSHbvaOe6lTfR16l-XJd_mVM6GC6oZvgph8hJCn8UUvXXrD6UPYCR0bwYxAgPHSo9Op02HQNYT50aPBWA4oIpbUesG8iGLB--mRx8gyoI_YU-OcTnVLSQrkTpQ.png)

-   **Frequency**: the number of hours between checks.

###### **Check Point**

Here, it is possible to create check points for a related set.

![](https://docs.etendo.software/latest/assets/drive/EJ_Vv0p8rctO3X7x-DkIevZLQEMUEkRuEWvoZjJWcHGproYysfMZG5MXEmESrHt_2kh-8MgwTw-JaZyt-3XHku_1PgHlR7n9lCVtYUkzq_f3EUPL4DkvY9Dyc2332yQj9gYZt8qnJaeP8kefuef5Iyml-xTopHstX5cBbaUC9CLOHw4D4LcIMyYLlQof9A.png)

-   **Name**: the name of the exact control that is defined.
-   **Number of Measurements**: the number of times this concrete control has to be executed. For example the number of times temperature needs to be measured.
-   **Value**: the type of value of the outcome of the check that is executed.
-   **Critical checkbox**: information only field to indicate a check is critical.

###### **Shift**

In this tab, the user can define shifts when the tests for a related group will be performed.

The information in this tab is used for the automatic population of check point set information when the results are reported in the Quality Control Report. In the main section of the report, the shift is selected.

!!! info
    The starting date in this set up is used for the automatic population of the time information of the Quality Control Report.


![](https://docs.etendo.software/latest/assets/drive/ewW9UA2U6qRvc28DBVo6wXaEzOFf6YrrXFawd_yTdFOCGxxeEb9TFeSFWoI6hiuoE3CYvRCYye4pzrh_PxzwlI2zOUNyAKLLatz8Lpm8wzuZZY70A-xvVfakn1dvBMh_hGmkCNGEP8vw70svo76qrT8T4H-R4xQjjbCIKbBpmaDuJeuIXZr0eDfMIUmgjg.png)

#### Work Incidence

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Work Incidence`

##### Overview

In this window, it is possible to define types of work incidences that may occur during production.

Standard work incidences are set up for later reference in the work effort. A possible work incidence is that a machine component breaks and needs to be replaced or some other unplanned machine outage.

!!! warning
    If machine maintenance is managed in an external system, go to the [Internal Consumption](transactions.md#internal-consumption) window to keep the spare parts stock updated in Etendo, even when another software is used.  

 
##### Work Incidence

Here, the user can create work incidence types that may occur during production.

![](https://docs.etendo.software/latest/assets/drive/QQIXXAkFW0bSMp00E9wNhrLHJARz1U1uu3MrPmufZsjvDezpjwZHkSJmgbIfK8V1v94uCWmI3n8ob3flxjdYkZgGjATgKA0s5zDoKtlbYZNLFYgvRRBEz3_nYShqqSk61Ho8fRJSMN9uG-m4s2HF07_Li6v6OJ5FzoV0_r6AlLtDdZQYb6WnTVfolQrrrg.png)

-   **Work Incidence Downtime**: the total work incidence downtime. This information is not taken into account for any cost calculation, so it is up to the user to decide the unit of measure of the field (seconds, minutes, hours, etc.)

#### Maintenance Task

:material-menu: `Application` > `Warehouse Management` > `Setup` > `Maintenance Task`

##### Overview

In this window, it is possible to define a scheduled maintenance task to be completed during the production process.

Maintenance tasks can be created to be executed to the machines in Production.

!!! warning
    If machine maintenance is managed in an external system, go to the [Internal Consumption](transactions.md#internal-consumption) window to keep the spare parts stock updated in Etendo, even when another software is used.  

The maintenance process is as following:

-   The created maintenance tasks are added either to the machine category, with the possibility to apply that tasks to all machines belonging to that machine category, or directly to the machine.
-   Run the insert maintenance process.
-   Review the Maintenance Plan and select the confirmation checkbox for all maintenance tasks that need to be executed.
-   If applicable, all consumptions of products used during the execution of the maintenance task is entered in the Internal Consumption screen.
-   The execution of maintenance tasks is registered in the Maintenance Order screen. Once added in this screen, the maintenance task no longer appears on the Maintenance Plan.

##### Maintenance Task

Here, the user can define general maintenance tasks to be used in production.

All maintenance tasks that are scheduled for the machines in production are entered in this screen:

![](https://docs.etendo.software/latest/assets/drive/YtlJL911EsQf5c-i8qMbFGpGQQFQHr1qO_V-VuJ1MByU4_t0QH3qhOFPgsZWLSareLUEaU7DvfLB8wHCb_ftn4_eDL28TUcbiGExcqGb6fYropD0oB6PVqqrn5jtPdZ7uSeiCA3AS8FUbkiVADrH9Q29ErN4lAKd-cHGjIzocw0nku0vkHPF60nbyKKZPg.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: ✨ Getting Started
## Article Path: /User Guide/Etendo Classic/Basic Features/Material Requirement Planning/✨ Getting Started
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/material-requirement-planning/getting-started
## Article Content: 

#### Overview

<iframe width="560" height="315" src="https://www.youtube.com/embed/2fGUSzo2ACI?si=h1BqAWPYXf6S1Pnj" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

In Material Requirement Planning the application is used to *automatically review the demand and display suggestions concerning required supply*. In the *Manufacturing Plan*, the application suggests required *Work Requirements* and *Requisitions*. In the *Purchasing Plan*, the application suggests required *Purchase Orders*.

#### Material Requirement Planning

The Material Requirement Planning consists of two plans:

- Manufacturing Plan: plan to display calculations related to products that go through Production. The suggested documents to be created in this plan are the [Work Requirement](https://docs.etendo.software/latest/production-management/transactions.md#work-requirement) and the [Requisition](https://docs.etendo.software/latest/procurement-management/transactions.md#requisition).
- Purchasing Plan: plan to display calculations related to products that are procured. The suggested document to be created in this plan is the [Purchase Order](https://docs.etendo.software/latest/procurement-management/transactions.md#purchase-order).

**Planning Methods** are entered to define what supply components are taken into account with the calculations of these plans.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/material-requirement-planning/mrp0.png)

##### **Configuration**

!!!info
    Apart from the set up screens in the MRP module that are configured, additional set ups are required.
    For the products that are planned in the *Manufacturing Plan*, the following configurations are required:

- the [Process plan](https://docs.etendo.software/latest/production-management/setup.md#process-plan)  is set up for the product.
- the *production checkbox* and the Process Plan name are selected in the [Product](https://docs.etendo.software/latest/master-data-management/master-data.md#product) screen.
The [Manufacturing](https://docs.etendo.software/latest/master-data-management/master-data.md#manufacturing) tab in the Product screen is filled out with the information required for MRP to make the calculations for the Manufacturing plan.

For the products that are planned in the *Purchasing Plan*, the following configurations are required:

- the purchase checkbox is selected in the [Product](https://docs.etendo.software/latest/master-data-management/master-data.md#product) screen.
- the [price](https://docs.etendo.software/latest/master-data-management/master-data.md#price) of the product is defined for the price list of the vendor that is entered in the Purchasing tab.
- the [Purchasing](https://docs.etendo.software/latest/master-data-management/master-data.md#purchasing)  tab in the Product screen is filled out with the information required for MRP to make the calculations for the Purchasing Plan.
- the vendor that is reflected as the Business Partner in the above mentioned Purchasing tab is filled out in the Business Partner screen:


    - [Vendor/Creditor](https://docs.etendo.software/latest/master-data-management/master-data.md#vendorcreditor) tab with at least the following fields filled out:
        - Purchase Price List
        - PO Payment Method
        - PO Payment Terms
    - [Location/Address](https://docs.etendo.software/latest/master-data-management/master-data.md#locationaddress) tab

- The [Manufacturing](https://docs.etendo.software/latest/master-data-management/master-data.md#manufacturing) tab in the Product screen is filled out with the *Planning Method* and *Planner* information.

##### **Execution** 

The material planner enters a Manufacturing Plan for a product for a certain time period and processes the plan.

In the created overview the *material planner reviews and analyzes* the lines. Based on the information that is processed by MRP, the plan suggests *Work Requirements* and *Requisitions* for certain quantities and certain dates.

- If required, adjustments to the set ups for example the planning method, are done. The lines of the plan are recalculated by clicking the *Recalculate Dates/Quantities* button.
- If required, manual changes to the created lines with regards to quantities and dates are made.
- Once the plan is correct, any suggested requisitions are created by clicking the *Generate Material Requisitions* button and any suggested Work Requirements are created by clicking the *Generate Work Requirements* button.
- The material planner completes the created requisition(s) and processes the created Work Requirement(s).


The material planner then enters a Purchasing Plan for a product for a certain time period and processes the plan.
In the created overview the material planner reviews and analyzes the lines. Based on the information that is processed by MRP, the plan suggests *Purchase Orders* for certain quantities and certain dates.

- If required, adjustments to the set ups for example the planning method, are done. The lines of the plan are deleted and the plan is reprocessed.
- If required, manual changes to the created lines with regards to quantities and dates are made.
- Once the plan is correct, any suggested purchase orders are created by clicking the *Create Purchase Orders* button.
- The material planner completes the created purchase order.

#### Relationship with other areas

The MRP interacts with the following modules:

- [Procurement Management](https://docs.etendo.software/latest/procurement-management/getting-started.md):
    - [Requisitions](https://docs.etendo.software/latest/procurement-management/transactions.md#requisition) are created from the Manufacturing Plan
    - [Purchase Orders](https://docs.etendo.software/latest/procurement-management/transactions.md#purchase-order) are created from the Purchasing Plan
- [Sales Management](https://docs.etendo.software/latest/sales-management/getting-started.md):
    - [Sales Orders](https://docs.etendo.software/latest/sales-management/transactions.md#sales-order) are optionally taken into account in the calculations of both plans
- [Warehouse Management](https://docs.etendo.software/latest/warehouse-management/getting-started.md):
    - [Stock levels](https://docs.etendo.software/latest/warehouse-management/analysis-tools.md#stock-report) are automatically taken into account in the calculations of both plans
- [Production Management](https://docs.etendo.software/latest/production-management/getting-started.md):
    - the [Process Plan](https://docs.etendo.software/latest/production-management/setup.md#process-plan) is used for the calculation of the Manufacturing Plan
    - [Work Requirements](https://docs.etendo.software/latest/production-management/transactions.md#work-requirement) are created from the Manufacturing Plan

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Transactions
## Article Path: /User Guide/Etendo Classic/Basic Features/Material Requirement Planning/Transactions
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/material-requirement-planning/transactions
## Article Content: 
#### Overview

Material Requirement Planning (MRP) deals with all activities related to the planning of a manufacturing and suggestions for the required supply. 

#### Manufacturing Plan

:material-menu: `Application` > `Material Requirement Planning` > `Transactions` > `Manufacturing Plan`

##### Overview

Create a comprehensive work requirement in order to request materials over a specified time period.

The Manufacturing Plan suggests work requirements and requisitions that need to be created and, just by clicking a button, these documents are created automatically.

In the main section of the document the information of what needs to be planned and for which time period is entered. The Process Manufacturing Plan button creates the lines in the plan with information of supply and demand:

-   current stock level (supply)
-   pending work requirements (supply)
-   booked Sales Orders without a goods shipment (demand)
-   safety stock (demand)
-   sales forecast (demand)

The information that is listed depends on the planning method used for the product.

The MRP process balances the demand with the supply, taking into account the dates of both and based on this information, it suggests work requirements and requisitions to be created. The generated lines can be updated manually. Also, changes to demand and supply can be made and the plan recalculated to see a new plan.

The Manufacturing Plan shows the demand for raw material that is required for the suggested work requirements, and suggests requisitions without reviewing the supply and demand for the raw material. Once the requisitions are completed by the planner, they are entered to the Purchasing Plan to calculate if any purchase orders need to be placed.

Once the plan is as desired, by clicking different buttons the work requirements and requisitions are created automatically.

##### Header

Create and edit a manufacturing plan.

![](https://docs.etendo.software/latest/assets/drive/v9Sv8GL701vVFES6XW-SbEO5ljGyfu6j-Tl7IfLaMNWcbU0TuaVJkkDYd3yr1-CwUJoLt-5rCn58GJKJ2iuUsGwVqbxM5KxM2o0ovovjTbtMqXfuuWFKhs6xImMsFRJ89br7qa22FTV-Y_i6obYI7lA.png)

-   Document Date: date the manufacturing plan is entered
-   Name: name of the manufacturing plan
-   Time Horizon: the number of days that are being taken into account for the calculation of the manufacturing plan
-   Safety Lead Time: number of days that are added to the offset for the calculation of the planned order date of the suggested work requirements and requisitions. For example, the manufacturing lead time is used to indicate how long it will take for a product between being produced and arriving in the warehouse, and the safety lead time is added on for any time that it takes to put the product into stock (due to quality check or other internal processes).
-   Planner: filter to select only products managed by a certain planner, as configured in the [Product](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#product) tab in the Master Data Management section.
-   Business Partner: filter to only select products ordered by a certain customer
-   Business Partner Category: filter to only select business partners of a certain business partner category.
-   Product: filter to select only a certain product
-   Product Category: filter to select only products related to a certain product category

!!! info
    Once the information is added in the main section, the lines can be created. If necessary, changes are made to set ups by clicking the Recalculate Dates/Quantities button.


##### Lines

Add products to be included in your plan. Each product is shown on its own line.

!!! info
    Only products that are set up with the Production checkbox and Process Plan selected in the product are executed by the MRP process.


Depending on the product, different transaction types may appear in the lines. All supply transactions have a positive quantity, all demand transactions have a negative quantity.

-   Stock: by default appearing for the product
-   Sales Forecast: the information appears if:
    -   forecast is set up in the sales forecast screen
    -   the forecast is defined in the planning method
    -   the planned method is linked to the product
-   Minimum Stock: by default appearing for the product if set up in the Safety Stock field in the product.
-   Pending Sales Order: the information appears if:
    -   pending sales order is defined in the planning method
    -   the planned method is linked to the product
    -   there are booked sales orders without a related goods shipment for the product
-   Suggested Work Requirement: advice generated by MRP to create a purchase order.
    -   the required quantity is the quantity that is the outcome of the balance of all supply and all demand
    -   the Quantity is the quantity to appear on the work requirement(s) that is created. Based on the set ups in the product the quantity can differ from the required quantity, for example due to min. quantity for production, quantity type, etc.
    -   the Planned Order Date is the date that the Work Requirement needs to be created and processed. This is an offset of the dates in wich the demand is required with the manufacturing lead time set up in the product and the safety lead time in the set up in the main section of this plan. If the demand is required within the timeframe of the lead times, the date is reflected as past due to indicate that in order to get the product on time, an action should have been taken already and it indicates exactly how overdue the action is.
-   Suggested Material Requirement: advice generated by MRP to create requisitions for the raw material that is required to be used in the suggested work requirements. The correct raw material information is generated if the information in the Process Plan is correct.
    -   the Planned Order Date is the date that the Requisition needs to be created and completed. These dates equal the planned order dates of the suggested work requirements.
    -   the Quantity appears on the requisition that is created. The quantity is based on the one that is on the suggested work requirement combined with the component use as defined in the Process Plan. 

![](https://docs.etendo.software/latest/assets/drive/CybK3PMQnVZL8ddGSu6_bdNgiobsrqsoAozZxR5FPMmOdjckNdwlealsSm6vcAuBS3IaeDbIcClhX5-Ij3iD9PWJXOrdj7od_ZCbX3E7TusOUjlwnE063XfjJyu4rtb3czv-XBFhu1uRLomlQFYxNlo.png)

!!! info
    By clicking the Generate Work Requirements button, the work requirements are created automatically. The documents need to be processed please see the [Work Requirement](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/production-management/transactions.md#work-requirement) section in the Production Management section for details.


!!! info
    By clicking the Generate Material Requisitions button, the requisitions are created in draft automatically. The documents need to be completed, please see the [Requisition](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#requisition) section in the Procurement Management section for details.


The requisitions can be selected as input in the planning method of the Purchasing Plan to be included in the calculations of that plan, in order to calculate if Purchase Orders need to be created.

Once the documents are created automatically, the numbers of the documents appear in the Work Requirement and the Requisition Line columns of the lines. The created purchase order is in draft status and needs to be booked. 

!!! info
    For more information please check the [_Purchase Order_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#purchase-order) section.


#### Purchasing Plan

:material-menu: `Application` > `Material Requirement Planning` > `Transactions` > `Purchasing Plan`

##### Overview 

Create a comprehensive and organized plan to request purchases over a specified time period.

The Purchasing Plan suggests purchase orders that need to be created and, just by clicking a button, these purchases are created automatically.

In the main section of the document the information of what needs to be planned and for which time period is entered. The Process Purchase Plan button creates the lines in the plan with information of supply and demand. 


-   current stock level (supply)
-   booked Purchase Orders without a goods receipt (supply)
-   booked Sales Orders without a goods shipment (demand)
-   completed requisitions (demand)
-   safety stock (demand)
-   sales forecast (demand)

The information that is listed depends on the planning method used for the product.

The MRP process balances the demand with the supply, taking into account the dates of both and based on this information, it suggests purchase orders to be created. The generated lines can be updated manually. Also, changes to demand and supply can be made, the current lines deleted and the plan reprocessed to see a new situation.

Once the plan is as desired, by clicking a button purchase orders are created automatically.

##### Header

Create and edit a purchase plan.

![](https://docs.etendo.software/latest/assets/drive/fy3zYkHMfzPgZxxa622JLdEWaPYWTr4ne_HXdC1DuijCQ7S9EbM7rQteyyZ8m7b_J0XJdflUydjIUtGMZsR6eUGmWTWqx1jnSE0POhkjyczK5QqR6KaL7cgZ3TQfCzqENhDOZb-8MOt_VsGJYePimz4.png)

-   Document Date: date the purchasing plan is entered
-   Name: name of the purchasing plan
-   Time Horizon: the number of days that are taking into account for the calculation of the purchasing plan
-   Safety Lead Time: number of days that are added to the offset for the calculation of the planned order date of the suggested purchase order. For example, the purchasing lead time is used to indicate how long it will take for a product between being ordered and arriving in the warehouse, and the safety lead time is added on for any time that it takes to put the product into stock (due to quality check or other internal processes).
-   Planner: filter to select only products managed by a certain planner, as configured in the [Product](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#product) tab in the Master Data Management section.
-   Vendor: filter to select only products for a certain vendor as configured in the Purchasing tab of the product.
-   Product: filter to select only a certain product
-   Product Category: filter to select only products related to a certain product category
-   Business Partner: filter to only select products ordered by a certain customer
-   Business Partner Category: filter to only select business partners of a certain business partner category.
-   Process Purchase Plan button: once the information is added in the main section, the lines are created by the Process Purchase Plan button. If necessary, the lines are deleted, changes are made to set ups and new lines are created by clicking the Process Purchase Plan button again.
-   Create purchase order: Generates the corresponding purchase orders
-   Create reservations: This button is only visible when Stock reservations feature is enabled. It reserves stock for the sales orders that are not reserved, if there is stock, and for the ones that cannot be reserved because there is not stock it creates the corresponding purchase orders and link to the sales order

##### Lines

Add products to be included in your plan. Each product is shown on its own line.

!!! info
    Only products that are set up with the Purchase checkbox selected in the product are executed by the MRP process.


Depending on the product, different transaction types may appear in the lines. All supply transactions have a positive quantity, all demand transactions have a negative quantity.

-   Stock: by default appearing for the product
-   Sales Forecast: the information appears if:
    -   forecast is set up in the sales forecast screen
    -   the forecast is defined in the planning method
    -   the planned method is linked to the product
-   Minimum Stock: by default appearing for the product if set up in the Safety Stock field in the product. 
-   Pending Purchase Order: the information appears if:
    -   pending purchase order is defined in the planning method
    -   the planned method is linked to the product
    -   there are booked purchase orders without a related goods receipt for the product
-   Pending Sales Order: the information appears if:
    -   pending sales order is defined in the planning method
    -   the planned method is linked to the product
    -   there are booked sales orders without a related goods shipment for the product
-   Suggested Purchase Order: advice generated by MRP to create a purchase order.
    -   the required quantity is the quantity that is the outcome of the balance of all supply and all demand
    -   the Quantity is the quantity to appear on the purchase order(s) that is created. Based on the set ups in the Product the quantity can differ from the required quantity, for example due to minimum order quantity, quantity type, etc.
    -   the Planned Order Date is the date that the Purchase Order needs to be booked. This is an offset of the dates in which the demand is required with the purchasing lead time set up in the product and the safety lead time in the setup in the main section of this plan. If the demand is required within the timeframe of the lead times, the date is reflected as past due to indicate that in order to get the product on time, an action should have been taken already and it indicates exactly how overdue the action is.

![](https://docs.etendo.software/latest/assets/drive/w4GSGwyp0V_SmTDWGcL2hTngg6mG4-w6bnc1O7_5-gBRsMFQ4zI2xrh_b1gFyd8FhFeSniYQ4FCm32-BFR5Xd3NYJCtxuRAevOCHkd6aMn5FI7MPlBxT0ktDYMNPq0zIdqL3UkIBsk6Dq84nFjyGtMY.png)

By clicking the Create Purchase Orders button, the purchase order is created, provided that all setups were correctly entered:

-   the vendor information is complete
-   the product is set up with the required information in the purchasing tab
-   the price for the vendor is entered in the product

Once the purchase order is created automatically, the number of the document appears in the Order Line column of the line. The created purchase order is in draft status and needs to be booked. 

!!! info
    For more information, please check the [Purchase Order](https://docs.etendo.software/latest/procurement-management/transactions.md#purchase-order) section.


#### MRP Forecast

:material-menu: `Application` > `Material Requirement Planning` > `Transactions` > `MRP Forecast`

##### Overview

Create and edit MRP forecasts over a specified time period in order to help plan necessary purchases.

A forecast of demand for a certain customer is entered so that it can be included in the planning method and therefore in the calculations of Manufacturing Plan and the Purchasing Plan. A forecast is based on expectations of future demand, not on existing data. Therefore, once the actual information is entered in the application in a Sales Order, the forecast has to be deleted to avoid duplications.

##### Header

Create a MRP forecast.

![](https://docs.etendo.software/latest/assets/drive/lA5q7zm1pYwF2yzFNLc_yIf7a4FNScC0giQ2MKnA5kEMz_eg6XXkvgCyDSu05jBo0N-CoH7-9VfTLaJ-wI0KmDSWLGtrcwPMw2nQMrIcbOrbBzI7A9SzYeiKD2Ep7ZSgYLPWEK_klyPNFH4d6VRu38A.png)

-   Document Date: date the forecast is entered.
-   Business Partner: the customer for whom the demand is expected. This applies to forecast both in the Manufacturing Plan and the Purchasing Plan.

##### Lines

Add products to be included in your MRP forecast. Each product is added by creating a line.

![](https://docs.etendo.software/latest/assets/drive/UC2IX8-3_QdWSgE-8FTMibabemse30bN2A1p1pzXreGFH8s-N4Irs8Qe6MB139B0XUSub0p2QJZu5nnE30aDgagISEpbk1ygomDybVXyYUYwSAujXvUvt4wQ1LLM4YLUZtFJvFfRjfVgYQZpWNhG2zA.png)

-   Planned Date: the date that is taken into account for the demand on the Manufacturing Plan and Purchasing Plan as Planned Order Date.
-   Product: the product that is planned on a Manufacturing Plan or Purchasing Plan.
-   Quantity: the amount of the product that is required by the planned date.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Setup
## Article Path: /User Guide/Etendo Classic/Basic Features/Material Requirement Planning/Setup
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/material-requirement-planning/setup
## Article Content: 
#### Overview

In order to initiate the Material Requirement Planning (MRP) process, the Planning Method and the Planner sections must be configured: 

!!! info
    For this, Aaditional setups are required. Check the information in the [Overview section of MRP module](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/material-requirement-planning/transactions.md). 


#### Planning Method

:material-menu: `Application` > `Material Requirement Planning` > `Setup` > `Planning Method`

##### Overview

Define how transaction types will be dealt with in the application.

A Planning Method is used to define the **optional components of supply and demand and their percentage to be taken into account** during the execution of the MRP process creating the **Manufacturing Plan** and **Purchasing Plan**. Each product that is planned in either the Manufacturing plan or the Purchasing Plan has a Planning Method defined in the product setup.

By **default**, MRP takes **stock** and **safety stock** into account when creating the plans, but the following transactions are optional and are configured in the Planning Method:

-   **Material Requirement**: demand for the product on requisitions in completed status. 
!!! info
    For more details, see the [_Requisition_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#requisition) section.

- **Sales Forecast**: prevision of future demand for the product. 
!!! info
    For more details, see the [_Sales Forecast_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/material-requirement-planning/transactions.md#mrp-forecast) section.

-   **Pending Sales Order**: demand for the product on sales orders in booked status that are not shipped yet. 
!!! info
    For more details, see the [_Sales Order_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#sales-order) section.

-   **Pending Work Requirement**: supply for the product on a processed work requirement. 
!!! info
    For more details, see the [_Work Requirement_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/production-management/transactions.md#work-requirement) section.

-   **Pending Purchase Order**: supply for the product on a booked purchase order that is not received yet. 
!!! info
    For more details, see the [_Purchase Order_](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#purchase-order) section.


##### Header

Use the header to create a planning method.

In this tab, the organization and the **name of the planning method** is entered. A general planning method can be entered to include all components of the optional demand and supply, because any components that are not applicable for a certain product will just not appear in the plan, while any components that are left out by mistake result in incorrect and incomplete calculations of the plan.

![](https://docs.etendo.software/latest/assets/drive/r-sIhmWnmoYNZsemrEKq3Il7LQsg1iDrcrq5K3H2HprddfyVZa7wiE5nmb6uaDHTpzSWHiHnvCetwhHQ_RBq1NJP3cIv17F96ZxBnqmyeWowc_zmB432U68KEEtdZbheLdRHdx9w00xaewhcEybYe4E.png)

##### Lines

Add transactions to be included in your plan. Each transaction is shown on its own line.

In this tab, the applicable transactions are entered on separate lines. For each transaction type, it is possible to define whether transactions are considered for the whole **time horizon** on the Manufacturing plan and Purchasing Plan or just a part:

-   **days from start**: the number of days from the beginning of the time horizon to the start of the transaction time frame being considered.
-   **days to end**: the number of days from the beginning of the time horizon to the end of the transaction time frame being considered.

Also, a percentage of the quantity to be considered by MRP is configured with the **Weighting**. If a sales forecast for 100 units is entered with a weighing of 0.9, only 90 units are reflected in the Manufacturing plan or Purchasing plan. Likewise, a value above 1 can be entered to include a higher number in the plans.

![](https://docs.etendo.software/latest/assets/drive/r3xp-vXHNSPnrw9FA7ashqCDRgL0s5LE9i_8sNTRssgBQiOX5bDavCyyxMCmCXIUKzvbPdxvrp6wkfXKLFftUwcqNn3u57H56hpHgKp4z0YkfjBobN-fV1M_gGf09M7MyrjutIBaZzR40_IdhQn8fb0.png)

#### Planner

:material-menu: `Application` > `Material Requirement Planning` > `Setup` > `Planner`

##### Overview

Define the entity in charge of managing the purchase or production of specific products.

An **optional filter on both the Manufacturing Plan and the Purchasing Plan** is the planner. The information that is entered in this screen has no relation with the Business Partner set up. After the planner is created, the planner information is entered in the [Product](https://docs.etendo.software/latest/master-data-management/master-data.md#product) tab in the Master Data Management section.

##### Planner

Define the planner in charge of managing the purchase or production of specific products.

![](https://docs.etendo.software/latest/assets/drive/2IK-YKaAHZYtnh4V1r_P9QgY4oU3-wDlu73TD8YZffxiibZ-JWkhjD_fCnJLzntBSgBhJSLbMx3IOsYOPFoDahYodIPGEq1P8LytGAg9aCEylB2iknxNfhnwCH8MgxgF1F6CYXVQxBPfF7KuArrucc4.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: ✨ Getting Started
## Article Path: /User Guide/Etendo Classic/Basic Features/Sales Management/✨ Getting Started
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/getting-started
## Article Content: 

#### Overview

<iframe width="720" height="480"  src="https://www.youtube.com/embed/JxTGQIJ9JqQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>


Sales Management deals with all activities related to the customer sales process and corresponding reporting.

This application area of Etendo covers Order to Shipment and Invoicing parts of [Order to Cash](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/getting-started.md#order-to-cash-business-flow) business flow and [Customer Returns](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/getting-started.md#customer-returns-business-flow) business process. 

!!! Info
    For Payments Management of Order to Cash see the [Financial Management](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/getting-started.md) application area.

#### Order to Cash Business Flow

*Order to Cash* workflow manages the life-cycle of a sales process.

Due to its complexity and different roles involved, it is convenient to split Order to Cash down into two main sub-processes:

1. *Order to Shipment* process starts when a customer requests a quotation or orders goods to the moment the warehouse staff ships the merchandise.

    ![ord-to-ship-bus-pro](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/sales-management/getting-started/ord-to-ship-bus-pro.png)

2. *Customer Invoice to Cash* continues the previous sub-process by invoicing customer deliveries and closes it by receiving payments from buyers.

![cust-inv-bus-proc](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/sales-management/getting-started/cust-inv-bus-proc.png)

##### Configuration

The following setup needs to be done before performing the process:

- Sales Products.
- Price configuration.
- Business Partners (Customers).
- Sales Quotation document type configuration.

Sales products need to be configured prior to any sale in the application.
Each product that is being sold needs to have a *price* in the sales price list in order to be selectable in any transactional document like a sales order or a sales invoice.
Same way, each product that is being sold needs to be defined in a *unit of measure* ("UOM"), and in an *alternative unit of measure* (AUM) if required.

!!! Info
    For more information, visit [Product Setup](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/product-setup.md), [Product](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#product) and [Pricing](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/pricing.md). 

Business Partners (customers) need to be configured prior any sales can automatically turn into a sales quotation or sales order. 

!!! Info
    For more information, visit [Business Partner Setup](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/business-partner-setup.md) and [Business Partner](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#business-partner).

Above configuration is one part of the overall business setup flow within the Master Data Management setup.

Finally, the Quotation [document type](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#document-type) requires a sales order document type (i.e. Standard Order) to be defined as Document Type for Order to allow the conversion of a sales quotation into a sales order.

!!!Note
    It is not required to perform any additional setup for the Sales Management application area if Food & Beverage (F&B) sample client shipped with Etendo by default is going to be used to explore it. The sample data set already contains the roles, warehouses, business partners, products and prices pre-configured.

##### Execution

In Sales Management the Order to Cash business process is executed as follows.

Customers can ask directly for a Sales Order or request a Quotation. If the Business Partner asks for a quotation, the sales staff:

- Creates a new document in the [Sales Quotation](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md) window and looks up the customer name in the Business Partner field. If the Business Partner does not exist, it is entered in the application with the [Business Partner](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#business-partner) window.
- Then Sales staff fills the [Sales Quotation](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md) window. The transaction document is set to Quotation by default. And continues by adding for each product a line with the product, quantity and if needed its attribute (size and/or color and/or serial number, etc.).
- Once the quotation is ready, it is booked. The Document Status of the quotation changes to Under Evaluation. The Quotation can be printed and sent to the Business Partner by email.
- When the Quotation is accepted by the Business Partner a sales order can be created based on this quotation. When this is done the status of the quotation changes to *Closed - Order* created and the Sales Order can be printed and sent to the Business Partner by email as a confirmation.

If the Business Partner places an order directly, the sales staff:

- Creates it with the same [Sales Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#sales-order) window setting the Transaction Document to the desired type of Order (*Standard Order, Warehouse Order*). Lines are filled as in the case of the Quotation. Once the Sales Order is ready, it is processed by pressing on the Book button.
- When the Sales Order is processed, it reserves the material for its shipment.
- To review past sales of the Business Partner Sales staff uses [Sales Dimensional Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/analysis-tools.md#sales-dimensional-report).

Warehouse staff:

- Looks for orders pending for preparation in the [Create Shipments from Orders](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#create-shipments-from-orders) window or with the help of [Orders Awaiting Delivery Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/analysis-tools.md#orders-awaiting-delivery-report).
- The Warehouse staff can create a Shipment in 2 ways:

With the [Create Shipments from Orders](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#create-shipments-from-orders) window. It creates a shipment completed for the selected Sales Orders.

With the [Goods Shipment](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#goods-shipment) window in which the Warehouse staff creates the shipment in a manual way.

- Completed shipment updates stock information (product levels go down) and can be posted to create the accounting entries of the shipment.
- [Shipments Dimensional Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/analysis-tools.md#shipments-dimensional-report) is used to review past shipments to the Business Partner.

Finance staff can generate invoices in different ways:

- With the [Generate Invoices](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#generate-invoices) window, in which it generates invoices in bulk for all pending to be invoiced (based on their invoicing rules) Sales Orders.
- With the [Create Invoices from Orders](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#create-invoices-from-orders) window. It shows Orders pending to be invoiced and creates invoices for the selected Sales Orders.
- With the [Sales Invoice](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#sales-invoice) window in which the Finance staff creates the invoice in a manual way.
- Processed Sales Invoice creates the Payment Plan of the invoice, the Tax of the invoice and can be posted to create the accounting entries of the invoice. Afterwards, the [payment plan](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#payment) can be modified.
- [Orders Awaiting Invoice Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/analysis-tools.md#orders-awaiting-invoice-report) helps Finance staff to plan and verify invoicing of the Business Partners.
- Finance staff is able to review past customer invoicing information in the [Sales Invoice Dimensional Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/analysis-tools.md#sales-invoice-dimensional-report).


Sales revenues expenses can be recognized in different ways:

- In most cases companies would want to recognize revenues as soon as an invoice is completed. For instance a food and beverage distributor selling beverages would want to recognize the revenue as soon as the goods leaves the warehouse.
In Etendo, in this situation, revenue is generated as part of the accounting of the sales invoice corresponding to the transaction.
- Under some circumstances, however, it is required to defer the revenue recognition. For instance, a food and beverage distributor selling and invoicing a product that they will only be able to deliver to their customers in 3 months needs to defer revenue recognition till the delivery.

In Etendo, in this situation, the revenue can be deferred until a given starting period and within a given number of periods by entering a revenue deferred plan in the [sales invoice lines](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#lines-5).

!!!info
    For a full description of this functionality visit [How to manage deferred revenue and expenses](https://docs.etendo.software/latest/user-guide/etendo-classic/how-to-guides/how-to-manage-deferred-revenue-and-expenses.md) article.


Credit limit for business partner

- Each [Business Partner](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#business-partner) can be set up with a Credit Line Limit. When customer balance (amount that is outstanding for payment for the customer) is higher than the credit line limit a corresponding information message is shown when a business partner is selected during the creation of a sales order, sales invoice or goods shipment. This way Etendo assists in risk analysis while placing customer orders or executing other steps in the Order to Cash business flow.


Finally, the finance staff is in charge of recording and managing the customer payments:

- When a payment is received against an invoice it can be recorded in the Sales Invoice window by using the Add Payment button. It is also possible to receive a prepayment for the Sales Order. 
For more information about payment management documentation visit the [Financial Management](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/getting-started.md) and in the [How to manage prepaid invoices in receivables](https://docs.etendo.software/latest/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables.md).


#### Customer Returns Business Flow

Customer Returns workflow manages the business processes for returning items back from customers either for credit

![cust-ret-cr-business-process](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/sales-management/getting-started/cust-ret-cr-business-process.png)

or for replacement.

![cus-ret-replace-business-process](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/sales-management/getting-started/cus-ret-replace-business-process.png)

##### Configuration

The following configuration options are available in this process:

- [Return reasons](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/business-partner-setup.md#return-reasons)
- [Condition of the goods](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/setup.md#condition-of-the-goods)
- Accounts for [Cost of Goods Sold](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#accounting) (COGS) for returns and [Revenue for returns](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#accounting)

##### Execution

In Sales Management the Customer Returns business process is executed as follows.
Customers can request a [return material](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/business-partner-setup.md#return-reasons) for whatever reason.
Sales staff:

- Creates a new document in the [Return from Customer](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#return-from-customer) window and looks for the customer name in the Business Partner field.
- And continues by adding lines clicking the button [Pick/Edit lines](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#lines-3).
Picks Goods shipment lines and edits the quantity the customer wants to return, price and return reasons.
- Once the Return Material document is accepted, process it by clicking the button Book. The status of the document changes from Draft to Booked.

Warehouse staff:

- Creates a new document in the [Return Material Receipt](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#return-material-receipt) window and looks for the vendor name in the Business Partner field.
- And continues by adding lines clicking the button [Pick/Edit lines](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#lines-4).
Picks lines created in the Return from Customer window.
If needed, edit the quantity received and its location (storage bin).
- Once the document is ready, process it by clicking the button Complete. The status of the document changes from Draft to Completed
- Completed receipt updates stock information (product levels go up).

Finance staff:
To invoice these documents can do it from several windows / processes:

- With [Return from Customer](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#return-from-customer) window where a new button Create Credit might appear or not based on the original sales order. If the order is already invoiced then it will be present, if not - it won't. Using this button it is possible to invoice the return order following the standard process, that is, depending on the invoice terms.
- With the same [Create Credit](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#return-from-customer) button it is also possible to create an invoice and leave it as credit to be used later.
- Using [Generate Invoices](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#generate-invoices) process: if the invoice terms is Customer Schedule After Delivery and both sales orders and RMAs exist the process groups all of them in one standard Sales Invoice (not in a [Return Material Sales Invoices](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#document-type)).
- With the [Sales Invoice](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#sales-invoice) window by picking lines and either grouping them from standard sales orders and return orders or by creating individual [Return Material Sales Invoices](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#document-type) only from return orders.
- With the [Sales Invoice](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#sales-invoice) window creating a Return Material Sales Invoice making sure that the amount of the Invoice is negative.


#### Relationship with other application areas

Sales Management has a connection with other application areas:

- [Warehouse Management](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/getting-started.md) as shipment changes stock quantity and its value.
- [Financial Management](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/getting-started.md) in terms of managing payments.
- [Material Requirement Planning](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/material-requirement-planning/getting-started.md) (MRP) because pending sales orders are one of the inputs for the production process.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Transactions
## Article Path: /User Guide/Etendo Classic/Basic Features/Sales Management/Transactions
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions
## Article Content: 
#### Overview

Sales Management deals with all activities related to the customer sales process and corresponding reporting.

#### Sales Quotation

:material-menu: `Application` > `Sales Management` > `Transactions` > `Sales Quotation`

A Quotation is not a sales order document type but a different document type named "Quotation" linked to a specific document sequence.

In order to be able to create a sales order from a sales quotation, the quotation document type needs to be properly configured. That means that it requires a document type (i.e. Standard Order) to be defined in the field "Document Type for Order".

The overall flow is the following:

- Create a sales quotation.
- Create a sales order from the sales quotation or reject the quotation.

![Actions and statuses in quotations](https://docs.etendo.software/latest/assets/drive/1Ebptd-ihEnTZ0PicQvT4HmTHI0bAu52y.png)

1\. Actions in quotations:

- **Book**: This action allows the user to process the quotation.
- **Reactivate**: This action allows the user to add, remove or modify a quotation line/s.
- **Create a sales order**: This action converts the quotation into a sales order.
- **Reject**: This action cancels/rejects the quotation

2\. Statuses of the quotation:

- **Draft**: Enter, remove and modify lines is allowed in this status. This status is reached after clicking New or reactivating the document.
- **Under evaluation**: After booking the quotation. In this status the document cannot be changed. Further actions are:  
    - **Reactivate**  
    - **Create a sales order**  
    - **Reject the quotation**
- **Closed** - Order created: After creating the sales order the document turns into this status. No further actions are allowed.

!!! info
    One quotation, one sales order. Several sales orders cannot be created from the same quotation.

- **Closed - Rejected**: When the quotation is finally not accepted by the customer. It is mandatory to enter a reject reason. No further actions are allowed.

##### Header

The user can create a sales quotation and process it when ready.

![Sales quotations header](https://docs.etendo.software/latest/assets/drive/1mGI2PwGXX8NokA5eSauNdO3hpyCM1lH9.png)

The header lists the main terms and conditions related to the customer quotation that are used in the heading of its printed copy and further in its order, shipment and invoicing process.  
In the majority of cases, the main and the only field needed to create a new quotation is the Business Partner field. All other fields are automatically populated based on the selected Business Partner, logged in User preferences and other system default parameters.

Some other fields to note are:

**Valid Until:** This field provides information about the deadline of the validity of the quotation.  
**Reject Reason:** This field informs about the reason why a quotation has been rejected by a customer. It is mandatory when rejecting a quotation.

**Things to consider:**

A new button Create Order appears when the status is Under Evaluation. When pressing the button, a sales order is created based on the quotation.

!!! info
    Taxes are always recalculated based on the transaction date (Date you execute the button).

The status of the newly created sales order is Booked. It is possible to change the "Invoice Terms" of the sales order as well as to "Reactivate" it if the sales order needs to be modified.

Prior to create a sales order, the system shows a flag named Firm Quote which is marked as default:

![Firmquote](https://docs.etendo.software/latest/assets/drive/1zRP6rz_UJ-8Y9tdp9l6XCHP_QU7DrN9B.png)

- If selected, it establishes a commitment with the customer for the supply of a given quantity of goods at a quoted price, therefore the sales order will be identical as the quote.
- If not selected, a change in the price list later on will modify the quoted prices, same way in the sales order. Discounts and Promotions will also be recalculated applying the new ones based on the transaction date (the Date the button is executed).

##### Lines

Add products to be included in your sales quotation. Each product can be added by creating a new line.  
Lines tab lists each product to be quoted and its characteristics.  
Book button completes the sales quotation when all the products are entered.

###### Line Tax

This tab shows the taxes related to the quotation line.  
Line Tax read-only tab details tax information for each line of a sales order based on its Tax field which is automatically pre-filled according to the Taxes Setup.

###### Basic Discounts

This sales quotation tab lists information about the discounts automatically applied and/or manually entered for the document.

###### Tax

The user can edit the taxes applied to the quotation.  
It summarizes tax related information for the whole sales quotation. Contains as many records as tax rates used in the quotation.

##### **Advanced Sales Quotation**

!!! info
    To be able to include this functionality, the Sales Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Sales Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=22CF01FC620140A6AA92CF550EB8DA36){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Sales Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/sales-extensions/release-notes.md).

Through this window, the user can generate sales quotations and create the corresponding orders from those quotations.

###### Header

The main header numerates the terms and conditions related with the sales quotation which are used in the printed copy header and, later on, in its order, goods receipt and invoice process.

![](https://docs.etendo.software/latest/assets/drive/1S8cwq-7SwxMd-0JDD6uzDfTDtSOGn_8b.png)

The main tab lists the main terms and conditions related to the sales quotation that are used in the header of the hard copy and later in the order, packing slip and invoicing process.
In this section, the fields to fill in are the following:

- Transaction document: this will be the specific document type to use. In this case, it is called "Quotation".
- Document No: quotation identification number is generated automatically.
- Quotation date: the date of the quotation. By default, it will be the current date.
- Business partner: the client to whom the quotation is being made will be selected.
- Partner address: in the drop-down list, select those customer addresses that have the "Shipping address" option checked.
- Price list: select among all the available sales rates. By default, it brings the rate configured for that business partner in its master.
- Link Order (Check box): if this check is checked, when executing the "Change customer, rate and currency" process, the "Origin Order" field of the new quotation is created modifying the previous one. It will be set with the number of the original quotation, i.e. the one being modified, which will be in "Closed-rejected" status. In turn, a record will be generated in the History tab of this last (original) quotation, each time there are modifications related to it.
- Quantity/Time Unit: the validity date of the quotation is defined based on a period of time: 10 days, 1 week, 2 months, etc.
- Valid Until: expiration date of the quotation stipulated according to the Quantity and Time Unit fields.
- Delivery time/Unit of Measure of Delivery Time: the delivery date is defined from a period of time. For example: 3 weeks.
- Payment method: filled by default with the payment method associated to the selected business partner with the possibility to be edited.
- Payment terms: filled by default with the payment method associated with the selected business partner with the possibility to be edited.
- Warehouse: the warehouse from which the products to be delivered to the customer will be shipped.
- Reject reason: this is a drop-down menu where a rejection reason can be selected in case the quotation is rejected. The different rejection reasons will be defined by the user.
- Sales representative: you can select from a drop-down list the employee who is making the quotation to the customer. It must be configured as a business partner with the check "Employee" and "Is sales representative".
- Origin order: when the "Change customer, rate and currency" button is executed and the "Link order" check is checked, the new quotation created is set in this field, modifying the previous one, with the number of the original quotation, that is, the one being modified; which will be in "Closed-rejected" status.
- Description: This is a space to write additional related information.

###### Status bar

This bar shows the following information:

- The possible document statuses for a quotation will be:

**Draft**: allows entering, delete and modify lines in this status. This status is reached after clicking on the new button or when reactivating the document.<br>
**Under evaluation**: this status is reached after registering the quotation. At this stage, the document cannot be modified.<br>
**Closed - Order created**: after creating the sales order, the document reaches this status. Once reached, no further actions are allowed.<br>
**Closed - Rejected**: this status appears in case the quotation is rejected by the customer. It is mandatory to enter a reason for rejection.
Once this status is reached, no further actions are allowed. <br>

- Total gross amount: indicates the final monetary amount of the quotation, including taxes.
- Total net amount: indicates the final monetary amount of the quotation, excluding taxes.
- Currency: shall indicate in which currency the quotation is defined. This field is filled in according to the selected tariff.

###### Lines tab

Once the header is completed, the lines must be added.

**Basic discounts** <br>
-Basic discount: this is the percentage reduction applied to the list price.<br>
-Cascade: this is any additional discount based on the total remaining after applying previous discounts.
Active: this is a check that indicates whether this record is available for use or disabled.<br>

**Tax** <br>
This tab summarizes the information related to the taxes involved in the quotation.
It contains as many records as there are tax categories involved in the quotation.

- Line number: indicates the position of the line in the document.<br>
- Tax: indicates the tax rate that is applicable to a given product.<br>
- Taxable amount: indicates the amount on which the tax will be calculated.<br>
- Tax amount: indicates the amount of tax resulting from the Tax and Taxable amount fields.<br>

**History tab**
When the "Change customer, rate and currency" button is clicked on a quotation and the "Link order" check is checked, a record is created in this tab with the data of the new quotation created and, in turn, one for each of the successive modifications to the original quotation.

The information shown in each record is as follows:

- Document number of the new quotation.
- Date of quotation.
- Original amount of the quotation.

![](https://docs.etendo.software/latest/assets/drive/1XoFvD98AeaJDehEjw0rJtqNyzo8GaeeW.png)

**Actions**<br>

- Register: this action allows the user to generate the budget.<br>
- Reactivate: this action allows the user to add, remove or modify one or more lines of the quotation.<br>
- Create a sales order: this action converts the quotation into a sales order. To do so, the document type of the quotation must be configured correctly. This means that it requires a document type (i.e. standard order) to be defined in the "Order document type" field. This button appears when the status of the quotation is "In evaluation".<br>

The status of the newly created sales order will be "Registered". In this instance, it is possible to change the "Billing Terms" as well as "Reactivate" it if it needs to be modified.

!!! info
    Only one sales order can be created for the same quotation.

- Reject: this action allows to cancel or reject the quotation. A reason for rejection is mandatory for this action.

Etendo also allows generating partial sales orders either for the lines the user needs to convert, or for the amount of the product needed to convert. Apply this functionality by selecting the necessary line/s and by editing the product amount in the Amount to generate tab.

![](https://docs.etendo.software/latest/assets/drive/1epl5s-9vyWosFF7SwSlkvIccNRQtUOA3.png)

![](https://docs.etendo.software/latest/assets/drive/1xnqd0rhg4x4qkkafts9k15cIH2Ta2QxP.png)

![](https://docs.etendo.software/latest/assets/drive/1iXJD_abYYG0cdIPP2CASxhkFIKx3IuGh.png)

The budget will be kept available to generate future orders with the remaining amount. To create an order with the remaining amount, follow the same procedure from the Sales Quotation window.

![](https://docs.etendo.software/latest/assets/drive/172BWCl-99Q1DuAUL9gIlB0PjVnP2irou.png)

![](https://docs.etendo.software/latest/assets/drive/1O0s-75pITf1xHcBXYQnYS0TxiRXvRPxx.png)

**Change customer, rate and currency button**

This process allows changes to be made to the business partner, rate and/or currency of the document, whether the document is in draft or registered. One or several variables can be modified at the same time.
If the business partner is changed, the tax will be updated in the lines (If necessary).

In the pop-up window opened when this process is executed, the user will see the “do not apply conversion rate” check. If changing the quotation currency is intended, with the conversion to the official exchange rate included, the box must be unchecked when selecting the Currency option. Otherwise, the box must be checked in order for the system to show the quotation amount in the intended currency, defining prices in accordance with the price list configured by default in such currency.

!!! info
    Once executed, the quotation will be closed and a new one will be created with the changes made in the state “under evaluation”. In the quotation closed, a default rejection reason is set and if there is none, the first one found is set.

![](https://docs.etendo.software/latest/assets/drive/1iid--FWuwlYd-vW3S6kQ6zlIftnNgXlP.png)

**Adjust button**<br>

This process allows the user to adjust the price of one or more budget lines, either by applying discount or surcharge through an adjustment factor.

!!! info
    This can only be executed while the document is in draft status.

![](https://docs.etendo.software/latest/assets/drive/1AI28ZDh33qlFigapI41CdMpg6Eeb3bGN.png)

##### Bulk Completion

!!! info
    To be able to include this functionality, the Essentials Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Essentials Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=39AC2D9F72124AC7A1D0A3D005293C9E){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Essential Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/essentials-extensions/release-notes.md).

The Bulk Completion functionality allows the user to complete, reactivate or close multiple records by selecting them and clicking the **Bulk Completion** button. This makes records management easier and more efficient, reducing the time spent processing individual records.

!!! info
    For more information, visit [the Bulk Completion module user guide](https://docs.etendo.software/latest/optional-features/bundles/essentials-extensions/bulk-completion.md).

#### Sales Order

:material-menu: `Application` > `Sales Management` > `Transactions` > `Sales Order`

A sales order is a document that specifies products and/or services ordered by a specific business partner (customer), as well as the price and terms and conditions.  

The Sales Order window allows the user to register sales related documents with different purposes which is regulated by the Transaction Document field. Depending on the chosen value, the consequences when booking the sales order are different. These are the types of sales order documents that are available:

**Standard Order:** When the transaction document is standard upon booking of the document, there are no additional documents created. Goods shipment and sales invoice still have to be created.

![Sales Order.png](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/sales-management/transactions/sales-order.png)


**Warehouse Order:** A warehouse order is used for the situation where the good shipment takes place at the time that the sales order is booked (for example, the customer is taking goods right away directly from the warehouse). This also means that both Documents have the same Order/Delivery dates.

![Warehouse order document.png](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/sales-management/transactions/warehouse-order.png)

##### Header

The sales order header allows the user to create a sales order and process it when ready.  
This header lists the main terms and conditions related to the customer order that are used in the heading of its printed copy and further in its shipment and invoicing process.

![Sales order header lines](https://docs.etendo.software/latest/assets/drive/1YzfkXDdYYV0VsKh_Pf9EuVeFzOhGUSjy.png)

It is possible to create new Standard Sales Order, Warehouse and POS Orders as a conversion from an existing Sales Quotation.

While creating a new sales order in this window:

!!! info
    In the majority of cases, the main and the only field needed to create a new sales transaction document is the Business Partner field. All other fields are automatically populated based on the selected Business Partner, logged in User preferences and other system default parameters.

Some other fields to note are:

**Scheduled Delivery Date:** indicates the date that the order should be shipped to the customer. Defaulted to the current date.  
**Warehouse:** indicates from which warehouse an order must be shipped. Defaulted to the session value from the top navigation User Preferences menu.  
**Delivery Status:** indicates in % how much quantity has been delivered.  
**Invoice Status:** indicates in % how much quantity has been invoiced.  
**Reservation Status:** defines whether the sales order is fully reserved (all lines fully reserved) or partially reserved.

!!! info
    Reservations are disabled by default. To be able to use them please insert a new Preference using property Enable Stock Reservations with value Y. For more information, see the [Stock Reservations](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#stock-reservations) section.

**Payment Status:** indicates in % how much of the total of the order has been paid.

Below fields are defaulted according to the Customer and Location tabs of the Business Partner window.

**Payment Method**: indicates how an order (and invoice) should be paid.

**Payment Terms**: defines when a sales invoice generated from this order needs to be paid.

**Invoice Terms**: defines how a Business Partner is invoiced and the frequency of invoicing. It is used by automated processes: Generate Invoices and Create Invoices from Orders and by Create Lines From button in the Sales Invoice.

**Different Invoice Terms are:**

**After Delivery:** Products of the sales order are invoiced as soon as they are shipped, for example, if there is partial shipment of the order it is invoiced. In this case several sales invoices might be created for one sales order corresponding to all goods shipped before each invoicing run.  
**After order Delivered:** The invoice will be generated after all products on the sales order have been shipped, so one order - one invoice.  
**Customer Schedule After Delivery:** Instead of sending out invoices each time any sales order product gets delivered, one invoice is created that is combining the different deliveries for a certain customer according to the defined schedule (weekly or monthly on a particular day).  
**Do Not Invoice:** No invoice is generated automatically. Normally used when there is some external event that triggers creation of the invoice (for example, the VIP customer tells that it is okay to do so).  
**Immediate:** The invoice is generated with the next run of the automated generation of invoices regardless of whether any shipment of ordered products took place or not.
**Sales Representative**: Sales person responsible for the customer in the order. It is normally used to reflect the person who booked the order.
**Invoice Address**: Address that is used upon generating an invoice.
**Delivery Location**: Address that is used when generating a shipment. If it is not specified, the Partner Address field is used.

**There are 3 ways of entering lines into a sales order:**

- Copying selected products from a history of products ordered by this customer using the Copy Lines button.
- Copying all products from the chosen orders selected in the history of all orders for different business partners using the Copy from Orders button.
- Manually, line by line, in the Lines tab.

![Enter lines in a Sales order](https://docs.etendo.software/latest/assets/drive/1Bq1FwcWOeR06AAL0mzBPd6S7ooG4InmF.png)

**Sales order prepayment**  
Once a sales order is booked, it is possible to prepay an order by using the process button "Add Payment".

Same as described for Sales Invoice Payment, "Add Payment" window allows to fully or partially prepay the order created more than once, and even pay other orders and/or invoices at the same time.

![Sales order prepayment](https://docs.etendo.software/latest/assets/drive/1BnzwqpcKn8kECP1Ce2jhl8ctZHGTVAB0.png)

It is also possible to add any type of expense related to the payment of that order as a G/L item and even use available credit previously generated for the customer.

![GL Item](https://docs.etendo.software/latest/assets/drive/1N4z10sAm_RRtVotpa28cRSwQ4wpuABO-.png)

Once all of the above is properly fulfilled, the payment can be processed and deposited from the financial account.

!!! warning
    It is important to notice that the sales invoice created from the order will inherit the payment done for the order.

###### Sales Order Cancel and Replace Process

Sales order cancel and replace is an advanced feature hidden by default, which can be enabled through a preference named "Enable Cancel and Replace”.

Once enabled, a new process button named "Cancel and Replace" is displayed only for booked sales orders.

Cancel and Replace feature allows to close a booked sales order and to replace it by a "copy" of it in "Temporal" status, so it can be modified.

**For instance:**

- "Payment Terms", "Order Date" and some other fields can be changed if required
- and, at "Lines" tab level, it is possible to add new order lines. It is also possible to modify or remove existing lines which do not have ordered quantities already shipped/delivered.

Once a temporary new order has been changed, it is possible to confirm the changes by clicking the "Confirm Cancel and Replace" process button.

Sales order cancel and replace process ends with three documents:

- The **Original Order** (or replaced order) in status "Closed".  
  This order is the order cancelled and replaced by a new one. No further action can be executed on this order.
- A **New Order** (or replacement order) in status "Booked".  
  This order is a copy of the original order, created to replace the original one by including the changes required.
- And an **Inverse Order** in status "Closed".  
  This order cancels the original one, therefore it is a copy of it but with the opposite sign. No further action can be executed on this order.

Replacement order document number is the replaced order document number and a suffix that is the number of times the order has been cancelled and replaced.

In case the number of times is only one, the replacement order document number is \[Replaced/Original order document number-1\].

It is also possible to cancel and replace a replacement order. In that case, the new replacement order document number is \[Replaced/Original order document number-2\].

Same way, inverse order document number is replaced with order document number and a suffix, that is _R_.

There are some flags and fields located under the "More Information" section, at sales order level, that have information about the relations between the different orders involved in the cancel and replace process.

The **Replaced (original) Order** has the below listed flag and field:

- **IsCanceled**, this is the flag that indicates that the original order has been cancelled.
- **Replacement Order**, this field stores the document number of the order that replaces the original order cancelled.

The **Replacement (new) Order** has the below listed fields:

- **Replaced Order**, this field stores the document number of the order replaced, that is the original order.

The **Inverse Order** has the below listed fields:

IsCanceled, this is the flag that indicates that this is as well, a canceled order.

**Canceled Order**, this field stores the document number of the original order canceled by the inverse order.

###### Remittance

!!! info
    To be able to include this functionality, the Remittance module of the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Remittance module provides the header of the Sales Order with a new field: “Bank account”.

![bank_account_4.png](https://docs.etendo.software/latest/assets/legacy/bank_account_4.png)

This field defines the corresponding bank account for transactions. Each business partner can have more than one bank account and, in this field, the user can select which of them to use.

###### Advanced Bank Account Management

!!! info
    To be able to include this functionality, the Advanced Bank Account Management module of the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

This module adds a new section to the header of the Sales Order window: Advanced Bank Account Management. In this section, the user can find the Bank Account field which is automatically filled with the bank account related to the adress or business partner of the order.

!!! info
    For more information, visit the [Advanced Bank Account Management user guide](https://docs.etendo.software/latest/optional-features/bundles/financial-extensions/advanced-bank-account-management.md).

##### Lines

Lines tab allows the user to add the products to be included in your sales order. Each product is added by creating a line. Lines tab lists each product ordered and its characteristics.

![Sales order lines](https://docs.etendo.software/latest/assets/drive/14rZJriNxaHIaBACYjwi-4I0rUGuCSCpD.png)

Fields to note:

- **Ordered quantity**, or **Operative Quantity** if the product has an alternative unit of measure (AUM) configured. This is the quantity needed of the product/item.
- Product's **UOM**, or product's **Alternative UOM** depending on product configuration in regards to unit of measure.
- **Attribute Set Value:** this field is displayed if the product in the line has attributes (color, size, serial number or several of them together, etc).
- **Discount:** it indicates the discount applied as a percentage of the List Price.
- **Invoiced Quantity** and **Delivered Quantity:** these are shown on the Status Bar when the line with a product is saved and gets updated when an invoice or shipment related to this line is issued.
- **Warehouse Rule:** Definition of a Warehouse Rule to be applied when the goods shipment is automatically generated. This rule overwrites any one defined in the _warehouse_. If no warehouse rule is defined in the sales order, the rule defined in _warehouse_ is applied.

**Explode** button is shown when selecting a line with a non-stockable BOM product and the product has not already been exploded. When exploding a product, the bill of materials components that the selected product consists of are shown in the order. Once you have exploded it, you cannot comprime it. You should delete all the lines (first bill of materials components and then the BOM product), and insert again the non-stockable BOM product.

**Book** button completes the sales order when all the products are entered. If there are non-stockable BOM products and they have not been exploded, the Book process will explode them.

**Close** button actions closes an order, which implies that :

- no further actions can happen but to prepay that order if applicable, if a **fully delivered** sales order is closed
- ordered quantity changes to delivered quantity and no further actions can happen but to prepay that order, if a **partially delivered** sales order is closed
- ordered quantity changes to 0 and no further actions can happen, if a **not delivered** sales order is closed

###### **Stock Reservations**

Sales Order lines can be reserved when the sales order is booked and is pending to deliver.

Fields to be noted:

- **Stock Reservation**: Defines if it is desired to automatically reserve the sales order line when it is booked. Available values are:
    -  _Manual_: No reservation needs to be generated automatically. So when the order is booked you manually create the reservation
    -  _Automatic_: The reservation is automatically created and processed, reserving the available stock. This option reserves stock from any of the available warehouses belonging to the organization of the created sales order, not only from the warehouse defined in the order header.
    -  _Automatic - Only default warehouse_: The reservation is limited only to the warehouse specified in the header of the order. This allows optimizing inventory allocation and ensuring that products are allocated according to the warehouse preferences defined in each transaction.

        !!!info
            This last option is only available if the [Automated Warehouse Reservation](https://docs.etendo.software/latest/optional-features/bundles/warehouse-extensions/overview.md#automated-warehouse-reservation) module is installed, part of the Warehouse Extensions Bundle. To do that, follow the instructions from the marketplace: [Warehouse Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=EFDA39668E2E4DF2824FFF0A905E6A95){target="_blank"}.


- **Reservation Status**: Defines whether the line is _Fully Reserved_ or _Partially Reserved_ or _Not Reserved_.

**Manage Reservation: Pick and Execute**

Using the _Manage Reservation_ button is possible to open a _Pick and Execute_ window to create and modify reservation for the Sales Order Line. The grid shows all the available stock that can be delivered and the pending to receive purchase orders.

In the grid, it is possible to select and set the desired quantity on any available stock. There are validations to avoid setting quantities higher than the available for the specific stock or than the ordered quantity. The _Done_ button will create and process a reservation if none exists with the selected options, note that if the reservation does not exist and the _Done_ button is pressed without selecting any stock or selecting a quantity below the ordered quantity, when the reservation is processed the system will reserve the remaining quantity with the available stock. If a reservation already exists, the reserved stock will appear automatically selected and the _Done_ button will update the reservation with the changes done. It is also possible to flag a stock as allocated.

!!! warning
    When the selected Product has the flag Variable Quantity set as true, it is possible to Reserve more Quantity than the Quantity ordered. But be careful, when a Shipment is generated against this Order Line and it is Completed (with the same Quantity or more than in the Order Line), the Reservation will be closed and the Reserved Quantity will be set as the same amount as the Order Quantity to prevent further inconsistency problems. So, it is possible to Reserve more Quantity than Ordered when a Product is set as Variable Quantity, but the Reservation will be set as the original Ordered Quantity when a Shipment is made.

###### **Line Tax**

For each sales order line, Etendo automatically populates the line tax related information in this tab.

**Line Tax** read-only tab details tax information for each line of a sales order based on its Tax field which is automatically pre-filled according to the Taxes Setup.

###### **Reserved Stock**

Relation of reserved stock and pre-reserved purchase orders related to the Sales Order Line.

For each reserved Sales Order line, it is possible to review the reserved stock. The quantity, storage bin and attribute set value are shown when it applies. If there is part of the sales order preserved, the purchase order line will also be shown. When a pre-reservation is converted to a reserve, it will still have the original Purchase Order Line, but the later will also have a Storage Bin defined. All pre-reservations have the Storage Bin blank.

###### **Related Products**

In this table, the Order Lines related to an Order Line of 'Service' type are added.

This tab will only be displayed for those lines with a Linked to Product service. It will display the related product lines of a service. The grid has the same fields that the Pick & Edit uses to add the lines. This tab is not editable.

In order to relate product lines to service lines, there is a Select Order Line button. This button will be displayed when a line with a Linked to Product service is selected.

By clicking the button, it displays a Pick & Edit showing records of the same order of products that could be related to the service. By default, it shows records of the same order, but when removing the filter expression, it shows records of already booked orders that could also be related to the Service.

For each line selected in this tab, a new relation is created between the service and the selected product line. If a relation already exists, it will appear as selected in the grid. To delete the relation just unselect the desired record. Some requirements have to be satisfied in order to be able to create a relation:

- The service needs to have a price on the price list.
- If the service is marked as **Is Price Rule Based**:
  - To have a valid Price Rule Version.
  - To have correct Price Rule Ranges, if it is the case.
- If the selected line belongs to an already completed Sales Order, the service has to be marked as **Allow Deferred Sale**.

If these conditions are not satisfied, the selected line will be unselected, not permitting to be selected to relate to the service.

Fields of the Pick & Edit:

- **Document No**: Document number of the order that belongs to the order line.
- **Order Date**: Order date of the order.
- **Line No**: Line number of the selected order line.
- **Product**: Related product.
- **Attribute Set Value**: Attribute Set Value of the product.
- **Amount**: Line Amount to be related.
- **Discount Amount**: Amount of discounts applied to the line. This amount will be used to calculate the service amount, depending on the value in the “After Discounts” field in Service Price Rules (if applied).
- **Ordered Quantity**: Quantity of the product in the Sales Order Line.
- **Related Quantity**: Quantity to be related to the Service. This field is editable, it is possible to relate less quantity than the original ordered quantity, never more. If more is assigned an error will appear. When a record is selected it automatically sets the Ordered Quantity in this field.
- **Returned Qty Other RM**: It does not apply in this workflow (Only for returns window).

Totals section:

- **Summed Line Amount**: Sum of the selected line amounts.
- **Summed Discounts Amount**: Sum of the selected line discount amounts.
- **Summed Service Amount**: Price of the service based on selected lines in the grid. This amount will be added to the total amount of the service line when creating the relations.

###### **Modify Tax**

If the service is configured to modify tax, new taxes are applied automatically during the operation so, after linking the configured service to a product, the new taxes configuration will be applied.

It is not recommended to modify the tax manually afterwards, as the system can create inconsistencies. However, it is possible to remove the service product and then the Tax reverts back to its original value.

###### **Related Services**

In this table, the 'Service' type product Order Lines related to an Order Line are displayed.

This tab is only displayed for those lines with products related to services. It displays the related services. The grid has the same fields that the Pick & Edit uses to add the lines. This tab is not editable.

###### **Basic Discounts**

This section lists information about discounts automatically applied based on the customer configuration and / or manually entered for the sales order.

###### **Tax**

The user can edit taxes applied to their order. It summarizes tax related information for the whole sales order. It contains as many records as tax rates used in the order.

###### **Payment Plan**

This section shows the total amount expected to be collected upon order booking, as well as the amount/s pre-paid or paid against the invoice/s for the order.

It shows the total payment amount expected for the order and its fulfillment. This tab is read-only and is populated after processing the document.

###### **Payment Details**

Displays the details of the payments (pre-payments or regular payments) received for the order or for the invoice/s of the order.

###### **Replacement Orders**

Set of orders replacing a canceled order.

##### How to Reactivate a Closed Sales Order

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

Etendo allows the user to reactivate closed sales orders by selecting the needed one/s and clicking the Undo Close button.

![](https://docs.etendo.software/latest/assets/drive/14S-_sqqQcDlJqhtFt_L9GVSZ6U-jH4Yo.png)

Once the process is finished, the sales order status turns to _booked_.

!!! info
    Check the Technical documentation about Advanced Financial Docs Processing to extend the process.

##### Payment Removal

The aim of this functionality is to delete and reactivate payments in an agile and easy way. Also, it allows eliminating and reactivating bank transactions and reconciliations.

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

From this window, it is possible to remove payments associated with a sales order by selecting the corresponding document and then clicking on the Remove Payment button. If there is an invoice associated with the order, the relationship of this invoice to the payment in question will also be removed (Sales Invoice window > Payment Plan tab).

If the payment is included in the financial account, i.e., if it is in Deposited/Withdrawn not cleared status, the transaction in it will also be deleted (Financial account window > Transaction tab).

If the payment is reconciled through an automatic method, then in addition to the transaction in the financial account, the line of the bank statement to which it was linked (Financial Account window > Imported Bank Statements) and the corresponding line of the bank reconciliation (Financial Account > Reconciliations) will be deleted.

!!! info
    If the payment is posted, the accounting entry is deleted too.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/sales-management/transactions/PRpic1.png)

##### Intercompany

In case the user has to create orders or invoices among two or more organizations that are different but belong to the same client, this functionality allows automatically generating the corresponding inverse document.

!!! info
    For more information, visit [the Intercompany module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/overview.md#intercompany).

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

##### Bulk Completion

!!! info
    To be able to include this functionality, the Essentials Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Essentials Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=39AC2D9F72124AC7A1D0A3D005293C9E){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Essential Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/essentials-extensions/release-notes.md).

The Bulk Completion functionality allows the user to complete, reactivate or close multiple records by selecting them and clicking the **Bulk Completion** button. This makes records management easier and more efficient, reducing the time spent processing individual records.

!!! info
    For more information, visit [the Bulk Completion module user guide](https://docs.etendo.software/latest/optional-features/bundles/essentials-extensions/bulk-completion.md).

#### Goods Shipment

:material-menu: `Application` > `Sales Management` > `Transactions` > `Goods Shipment`

In this section, you can create and manage goods shipments to your customers. A Goods Shipment is a document registering the specifics of items sent to a customer.

This window allows the user to browse information about all Goods Shipments registered in the system and manually create new shipment documents. It is useful if execution of some scenario is required that is not supported by automatic shipments generation process (for example, partial shipment of the order or grouping of several orders and / or invoices in one shipment). For automatic creation use Create Shipments from Orders.

As described in the Costing Server article, the cost of a "Goods Shipment" is calculated as any other output transaction depending on the Costing Algorithm used.

The calculated cost of a "Goods Shipment" is used while posting it to the ledger.

##### **Header**

The user can create and process a shipment.

![Good shipments creation](https://docs.etendo.software/latest/assets/drive/1dIvnkhJxhRrVVO7sceBpifLN1EYTbhsP.png)

The Header lists main terms and conditions related to the customer delivery that apply to all products (Lines) included in it.

In the majority of cases, the main and the only field needed to create a new Goods Shipment is the Business Partner field. All other fields are automatically populated based on the selected Business Partner, logged in User preferences and other system default parameters.

Some other fields to note:

- **Warehouse:** The warehouse from where the goods are shipped. Defaulted to the session value from the top navigation.
- **Movement Date:** The date the goods physically ship out of the warehouse. Defaulted to the current date.
- **Delivery Location:** Address that will be used when generating a shipment. If it is not specified, a Partner Address field will be used. Defaulted according to the Customer and Location tabs of the Business Partner window.
- **Accounting Date:** Date to be used in the posting record of the Goods Shipment to the general ledger.
- **Sales Order:** Reference to an order that is being shipped. If Goods Shipment includes products from several Sales Orders fields are left empty (still trace-ability is present at Lines level).
- **Invoice Status:** indicates in % how much quantity has been invoiced.
  If we create two or more lines in goods shipment related to a sales invoice line, only one of those goods shipment lines will show "Invoice Status" 100% and the rest will show "Invoice Status" 0%.

There are 2 ways of entering lines into the sales order:

1.  Selecting products from pending to be shipped orders or invoices and specifying Storage Bin (Warehouse field) from where it should be shipped using the Create Lines From button. This option can be used several times to group several orders and / or invoices in one shipment. This is the most common approach.
2.  Manually, line by line. It is used if the underlying document (Sales Order or Invoice) does not exist in the system prior shipment takes place.

![Goods shipment lines](https://docs.etendo.software/latest/assets/drive/1gksOh0asH-Vye9WoBJa2q04TUyDh-aUC.png)

##### **Lines**

The user can add or see products included in their shipment. Each product is shown on its own line. Lines list each product to be delivered and its characteristics.

Fields to note:

- **Attribute Set Value:** This field is displayed if the product to be shipped in the line has attributes (color, size, serial number or several of them together etc).
- **Storage Bin:** From where the product is taken for shipment. Populated automatically based on the Product field which includes storage bin as the part of its selector.
- **Sales Order Line:** Reference to the sales order line that is being shipped.

**Explode** button is shown when selecting a line with a non-stockable BOM product and the product has not already been exploded. When exploding a product, the bill of materials components that the selected product consists of are shown in the shipment. Once you have exploded it, you cannot comprime it. You should delete all the lines (first bill of materials components and then the BOM product), and insert again the non-stockable BOM product.

**Complete** button finishes shipment of the products to the customer and stock information gets updated accordingly (product levels go down).

###### **Accounting**

Accounting information related to the material shipment.

A "Goods Shipment" can be posted if the "MaterialMgmtShipmentInOut" table is set to Active for accounting in the Active Tables tab of the organization's general ledger configuration.

**Goods Shipment** posting creates the following accounting entries.

Posting record date: Accounting Date.

|                                   |                           |                           |                             |
| --------------------------------- | ------------------------- | ------------------------- | --------------------------- |
| Account                           | Debit                     | Credit                    | Comment                     |
| Product COGS (Cost of Goods Sold) | Shipment Line Cost Amount |                           | One per Goods Shipment Line |
| Product Asset                     |                           | Shipment Line Cost Amount | One per Goods Shipment Line |

Posting a _Goods Shipment_ requires the user to calculate the cost of the product/s contained in it.

In the case of a goods shipment that is the average or the standard cost calculated depending on the Costing Algorithm used.

Moreover:

- The "Legal Entity" organization needs to have a validated Costing Rule configured
- and the Costing Background Process needs to be scheduled for the Client, therefore it can search and then allow that the Costing Server process calculates the cost of the transactions.

Once the cost has been calculated, the Goods Shipment can be posted to the ledger.

###### **Automatic Invoice from Goods Shipment**

When completing a goods shipment, the confirmation popup shows  a checkbox called _Invoice if possible_. If checked, the UI allows the user to enter a valid Price List, Invoice Date and whether to complete the newly created sales invoice or to leave it as draft.

![Automatic invoice from goods shipment](https://docs.etendo.software/latest/assets/drive/10fOmotum_TzbMXcsEfiX7w89dAmgWGpk.png)

The lines not linked to a sales order will always be automatically invoiced. For the lines linked to a sales order, their respective invoice terms will be taken into account, thus generating the invoice lines only for the valid order lines. In both cases, only the non-invoice-yet quantity will be invoiced.

Besides, the window shows a new button **Generate Invoice from Shipment** which allows the user to invoice the goods shipment at any time as long as the goods shipment is not fully invoiced yet. The Invoice Date, Price List and Process Invoice fields are also provided in this process following the same logic explained above.

##### How to Reactivate Goods Shipments

!!! info
    To be able to include this functionality, the Warehouse Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Warehouse Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=EFDA39668E2E4DF2824FFF0A905E6A95){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Warehouse Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/warehouse-extensions/release-notes.md).

From the Goods Shipment window, it is possible to reactivate a previously generated movement just by selecting the corresponding document and clicking the Reactivate button.

Once the shipment is successfully reactivated, the state of the document changes to Draft as it can be observed in the status bar.

![](https://docs.etendo.software/latest/assets/drive/1Ldt_3_sf1I-i3eJxxcsU-VT36TooiagO.png)

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

##### Bulk Completion

!!! info
    To be able to include this functionality, the Essentials Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Essentials Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=39AC2D9F72124AC7A1D0A3D005293C9E){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Essential Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/essentials-extensions/release-notes.md).

The Bulk Completion functionality allows the user to complete, reactivate or close multiple records by selecting them and clicking the **Bulk Completion** button. This makes records management easier and more efficient, reducing the time spent processing individual records.

!!! info
    For more information, visit [the Bulk Completion module user guide](https://docs.etendo.software/latest/optional-features/bundles/essentials-extensions/bulk-completion.md).

#### Return from Customer

:material-menu: `Application` > `Sales Management` > `Transactions` > `Return from Customer`

##### **Header**

The user can create a sales order and process it when ready.

![Return from customer header](https://docs.etendo.software/latest/assets/drive/1d5KfWff5kX53_F_hC_crAGPoIMUaj9sV.png)

Once the Return document is accepted you can process it by clicking the button **Book**. Following the standard, the document changes from _Draft_ to _Booked._

Only _Booked_ documents can be receipt.

!!! warning
    Notice the button **Pick/Edit lines** disappears when the Return to customer document is in status _Booked._

![Pick/edit lines](https://docs.etendo.software/latest/assets/drive/1jTtMk3mx1PnV_e2KcSI9H10cz1Z5HaRA.png)

**Things to consider:**

- **Delivery Status**: indicates in % how much quantity has been delivered.
- **Invoice Status**: indicates in % how much quantity has been invoiced.
- A new button **Create credit** might appear or not based on the original sales order. If the order is already invoiced then it will be present, if not, it will not.  
  Through this button, you are able to invoice the return order following the standards, that is, depending on the invoice terms.
- Using this button you can also create an invoice and leave it as credit to be used later. The way to do so is:
  - There is a new execution process named _Leave as credit_. You can configure a new payment method with this process.
  - If the payment method used in the Return material order has this execution process, a _Reverse sales invoice_ is created but leaving it as credit so the credit can be later settled with another invoice.
- The button **Create credit** is no longer shown once the document is fully invoiced.
- Besides the **Create credit** button you can follow the standards (Invoice terms) to invoice these documents. All scenarios are covered:
  - Process Generate Invoices: If the invoice terms is _Customer Schedule After Delivery_ and you have sales orders and RMAs the process will group all in one standard Sales Invoice and not in a _Reversal Sales Invoice_.
  - You can also use the Sales Invoice window to pick lines and either gather lines from standard sales order and return orders lines or create individual _Reversal Sales Invoice_ for return orders.
  - You can also create a _Return Material Sales Invoice_ through the Sales Invoice window and leave it as credit and later on use it. Keep in mind that this Invoice should be created with negative amounts.

##### **Lines**

The user can add products to be included in their sales order. Each product is added by creating a line.

The Lines tab is not editable, since the returned lines always come from shipment lines, to avoid:

- To see positive values while negative in the DB.
- To enter lines that are not linked to the original shipment line.
- To edit attributes, products and so, having the products or attributes different from the shipment line.

To enter lines that come from a goods shipment, you need to click the button “Pick/Edit Lines”

**Things to consider:**

  - The only editable fields are:
    - **Returned**: Quantity you wish to return. When selecting the row, the quantity is not set by default since the system cannot know how many items are being returned.
    - **Net Unit Price**: Price of the original sales order.
    - **Return reason:** The reason why you return the item.
    - **Returned UOM**, only in case alternative unit of measure (AUM) preference is enabled.  
      In that case, the product's "primary" AUM for the sales flow is shown if any, otherwise the product's UOM is shown. The user can always change it to product's UOM.
- You can define the Return Reason at header level. In this case when picking a line it inherits what selected in the header but you can modify it as you wish.
- Only Goods shipment documents that have not been still returned can be picked. In case a goods shipment line has been fully returned, it won't be shown.
- When a goods shipment line has been partially returned, the rest can still be returned. What you have already returned for that line is shown in the field Return Qty other RM.

**Validations:**

- You are not allowed to return more quantity than the **Ship/Receipt Qty**. In case you do it a message is shown.
- Notice that this validation takes into account the **Return Qty other RM** field.

A restriction has been added in Pick/Edit Lines in order to prevent adding non “Returnable” service lines to Return From Customer documents.

To enter lines that do not come from any document present in the system,  you need click the “Insert Orphan Line” button.

!!! tip
    Since this flow is not common, the button is hidden by default. In order to display it, it is necessary to configure a preference named **RM Allow Orphan Line**. To do so, go to the preference window and select it from the list. The value must be _Y_. Then log out and log in.

**Things to consider:**

- **Product**: It is mandatory.
- **Returned**: The quantity returned.
- **Net Unit Price**: It can be left blank. In that case the system calculates the price based on the price list defined in the header of the document.
- **Tax**: It can be left blank. In that case the system will calculate the tax.
- **Return reason**: The reason why the good was returned.

This flow (Insert orphan line) does not support products with attributes

!!! info
    To edit a line you need to click again the **Pick/Edit Lines** button and the line appears selected and then you can modify any of the editable fields.

!!! info
    To delete a line you need to unmark the line and then click Done.

###### **Line Tax**

Taxes related to the order line.

###### **Related Products**

In this table, the Order Lines related to an Order Line of 'Service' type are added.

It has been added the possibility to select the service related to which original product lines is desired to be returned. In order to do it, the new button “Select Order Line” has been added in Return From Customer Line tab. This button is  displayed when a line with a Service ‘Linked to Product’ is selected.

The tab is similar to the one implemented in the Sales Order Line window. The only difference is that the relations are created with negative values (amount, quantity), but the window has been adapted to see those values in positive (in the database, they are negative).

The grid implemented in this Pick&Edit is the same as used in the Sales Order Line window, with a few differences:

- **Related Quantity**: Quantity to be related to the Service. This field is editable, it is possible to relate less quantity than the original ordered quantity, never more. An error appears if more quantity is assigned. This field takes into account Returned Qty Other RM field, so it never allows to return more than ordered taking into account qty returned on other return documents. When a record is selected, it automatically sets 0 in this field.
- **Returned Qty Other RM**: It displays the returned qty of the line on other different return documents.
- **Deferred Sales**: They do not apply in this window because returns are being made, not sales.

###### **Basic Discounts**

It shows the discount applied to the original invoice of the returned product.

###### **Tax**

The user can edit taxes applied to the order.

##### Bulk Completion

!!! info
    To be able to include this functionality, the Essentials Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Essentials Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=39AC2D9F72124AC7A1D0A3D005293C9E){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Essential Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/essentials-extensions/release-notes.md).

The Bulk Completion functionality allows the user to complete, reactivate or close multiple records by selecting them and clicking the **Bulk Completion** button. This makes records management easier and more efficient, reducing the time spent processing individual records.

!!! info
    For more information, visit [the Bulk Completion module user guide](https://docs.etendo.software/latest/optional-features/bundles/essentials-extensions/bulk-completion.md).

#### Return Material Receipt

:material-menu: `Application` > `Sales Management` > `Transactions` > `Return Material Receipt`

In this window, the user receives the material that has been returned from the customer.

##### **Header**

The user can create and process a return material receipt.

![Return material receipt header](https://docs.etendo.software/latest/assets/drive/1RFybl7rWjhc3_RmUza0dIbmR7kcpyuJo.png)

Once the document is ready you can process it by clicking the button **Complete**. Following the standard, the document changes from _Draft_ to _Completed._

The field **Invoice Status**: indicates in % how much quantity has been invoiced.

!!! warning
    Notice the button **Pick/Edit lines** disappears when the document is in status _Completed._

##### **Lines**

The user can add or see products which are included in the receipt. Each product is shown in its own line.

The Lines tab is not editable, since the lines always come from **Return from Customer** lines, to avoid:

- To see positive values while negative in the DB
- To enter lines that are not linked to return lines
- To edit attributes, products and so, having the products or attributes different from the return line

To enter new lines, the user needs to click the button “Pick/Edit Lines”

![Return material receipt - Lines](https://docs.etendo.software/latest/assets/drive/11Lihjkh1OeoX08nlz39SCLW3QhC_CCHz.png)

**Things to consider:**

- The only editable fields are:
  - **Receiving**: Quantity you are receiving in the warehouse. This value is set by default with the pending quantity when you select the row.
  - **Storage bin**: This value is set by default with the return bin configured in the warehouse.
  - **Condition of the goods**: The user can define it at header level. In this case, when picking a line, it inherits what is selected in the header but the conditions can be modified.
  - **Returned UOM**, only in case an alternative unit of measure (AUM) preference is enabled.  
    In that case, the product's "primary" AUM for the sales flow is shown if any, otherwise the product's UOM is shown. The user can always change it to the product's UOM.

**Validations**

- The user is not allowed to receive more quantity than the **Pending** quantity. In case they do it, a message is shown.

!!! info
    To edit a line, it is necessary to click again the **Pick/Edit Lines** button and the line appears selected. Then, the user can modify any of the editable fields.

!!! info
    To delete a line, the user needs to unmark the line and then click Done.

**Accounting**

**Return Material Receipt** posting creates following accounting entries.

Posting record date: **Accounting Date**.

|                                                                             |                                  |                                  |                                      |
| --------------------------------------------------------------------------- | -------------------------------- | -------------------------------- | ------------------------------------ |
| Account                                                                     | Debit                            | Credit                           | Comment                              |
| Product COGS Return (Cost of Goods Returned) or if not defined Product COGS |                                  | Product Cost x Movement Quantity | One per Return Material Receipt Line |
| Product Asset                                                               | Product Cost x Movement Quantity |                                  | One per Return Material Receipt Line |

####### **Configuration**

- Activate **MaterialMgmtShipmentInOut** table in the Active Tables tab of **General Ledger Configuration** screen.

###### **Accounting**

Accounting information related to the return material receipt.

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

#### Create Shipments from Orders

:material-menu: `Application` > `Sales Management` > `Transactions` > `Create Shipments from Orders`

Create Shipments from Orders allows the user to see Sales Orders pending to be shipped and automatically generate Goods Shipments based on them.

![Create shipments from orders](https://docs.etendo.software/latest/assets/drive/1wtJV_ZpJ4eAlSCNqf69SOvq52h6dfAZV.png)

All Sales Orders of the _Standard Order_ type and in a status _Booked_ are treated as meeting the criteria to be shipped.

Goods Shipment can be generated for one or more Sales Orders or for all the Sales Orders that are pending to be shipped. Filters are available to narrow down the shown results.

One Goods Shipment is created for one selected Sales Order but for the whole order (for all its lines). Partial shipment is not possible through this window  (use Goods Shipments instead).

!!! info
    Note the **Relative Priority** field in the Storage Bin tab of the Warehouse and Storage Bins window that is used to determine which storage bin to use in the generated Goods Shipments Lines. The warehouse to use is inherited from the originated Sales Order.

##### **Form**

Fields to note:

- **From Date** and **To Date:** specify Order Date field ranges for filtering.
- **Lines Amt:** Total net amount of the sales order (of all its lines).
- **Pending Delivery:** The net amount still pending to be delivered for the specific order (for example, when there was a partial delivery before).

Select the order(s) you want to ship and click the Process button to generate the underlying Goods Shipment document(s). Process execution message displays sales order number(s) and corresponding shipment number(s) that was just created.

#### Sales Invoice

:material-menu: `Application` > `Sales Management` > `Transactions` > `Sales Invoice`

Sales Invoice is an itemized statement of goods or services provided to a business partner. It indicates the quantity and price of each product delivered.

The Sales invoice window allows the user to issue and manage customer's invoices. It also allows the user to browse information about all sales invoices registered in the system and manually create new invoice documents. It is useful if execution of some specific scenario is required that is not managed by automatic invoice generation processes like Generate Invoices or Create Invoices from Orders.

The sales revenues can be recognized as soon as the sales invoice is accounted for, however if a revenue deferred plan is configured it is possible to defer the revenue recognition as required.

##### **Header**

Customer invoices can be registered, booked and managed in the header section of the sales invoice window.

**Header** lists main terms and conditions related to the sales invoice that will be used in the heading of its printed copy and further in its collection process.

![Sales invoice header](https://docs.etendo.software/latest/assets/drive/1-51np9T_CKeVAuAlTaRQn8UdUKz2JArH.png)

In the majority of cases, the main and the only field needed to create a new sales invoice document is the **Business Partner** field. All other fields are automatically populated based on the selected Business Partner, logged-in User preferences and other system default parameters.

Some other fields to note are:

- **Transaction document** defaulted as "AR Invoice" or Sales Invoice document type, which can be manually changed to either "AR Credit Memo" or "Reversed Sales Invoice".
  - "AR Credit Memo" and "Reversed Sales Invoice" document types can be considered credit sales invoices, the difference between them is that:
    - "AR Credit Memo" type must contain either an "Invoiced Quantity" > 0 or "line Net Amounts" >0.  
      The above implies that invoices set as "credit memo" should not be related to "Orders" or "Shipments".
    - "Reversed Sales Invoice" type must contain either an "Invoiced Quantity" <0 or "line Net Amounts" < 0.  
      These are the invoice types that can be related to return "Orders" or "Shipments".
- **Invoice Date:** The date the invoice is issued. It is used to calculate when the payment of the invoice is due. Defaulted to the current date.
- **Accounting Date:** Date to be used in the posting record of the Sales Invoice to the general ledger. Defaulted to the Invoice Date field.
- **Payment Method:** indicates how an invoice should be paid. Defaulted according to the Customer tab of the Business Partner window.
- **Payment Terms:** defines when a sales invoice needs to be paid. Defaulted according to the Customer tab of the Business Partner window.
- **Sales Order:** Reference to an order that is being invoiced. If Sales Invoice includes products from several Sales Orders field is left empty (still trace-ability is present at Lines level)

There are 3 ways of entering lines into the sales invoice, two from the invoice header and the last one from the Lines tab:

1.  Selecting products from pending to be invoiced orders or shipments (meeting **Invoice Term** criteria of the **Sales Order**) using the **Create Lines From Order** and **Create Lines From Shipment** buttons. These options can be used several times to group several orders and / or shipments in one invoice. This is the most common approach. It is only possible to create lines from Documents that share the same Currency and business partner.
2.  Copying **all** products from the chosen invoice selected in the **history of all invoices** for different business partners using the **Copy Lines** button.
3.  Manually, line by line in the Lines tab. This option is used if the underlying document (Sales Order or Shipment) does not exist in the system prior invoicing takes place.

The **Complete** button finishes the creation of the invoice document with the fulfillment of the Payment Plan tab and the **Payment Monitor** section in the Header. If there are non-stockable BOM products in the lines and they have not been exploded, the Complete button will explode them automatically.

Once completed a sales invoice can be:

- **posted** to the ledger by using the button Post
- **voided** by using the button Reactivate
- **paid** by using the button Add Payment.

###### Remittance

!!! info
    To be able to include this functionality, the Remittance module of the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Remittance module provides the header of the Sales Invoice with a new field: “Bank account”.

![bank_account_2.png](https://docs.etendo.software/latest/assets/legacy/bank_account_2.png)

This field defines the corresponding bank account for transactions. Each business partner can have more than one bank account and, in this field, the user can select which of them to use.

!!! note
    **Important**:
    When using the option “Create lines from orders”, if all orders have the same bank account, the invoice uses that bank account. If not, it uses the default one.

###### Advanced Bank Account Management

!!! info
    To be able to include this functionality, the Advanced Bank Account Management module of the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

This module adds a new section to the header of the Sales Invoice window: Advanced Bank Account Management. In this section, the user can find the Bank Account field which is automatically filled with the bank account related to the adress or business partner of the invoice.

!!! info
    For more information, visit the [Advanced Bank Account Management user guide](https://docs.etendo.software/latest/optional-features/bundles/financial-extensions/advanced-bank-account-management.md).


##### **Lines**

**Lines** lists each product to be delivered and its characteristics.

Once the sales invoice header has been properly filled in and saved, each sales invoice line can be registered in this tab one by one.

![Sales invoice lines](https://docs.etendo.software/latest/assets/drive/12b9z3VPpvude4CJ8QhoDoW9V7k00KkL7.png)

Fields to note:

- **Attribute Set Value:** field is displayed if the product in the line has attributes (color, size, serial number or several of them together etc).
- **Sales Order Line** and **Goods Shipment Line:** references to the sales order and goods shipment line that is being invoiced.
- **Financial Invoice line:** is selected when the invoice line is not a product but an account not set up as a product but as a G/L item, or an asset not set up as a product. When selected, the product field disappears from the screen and an account field appears that will be related to the sales invoice line.

As already mentioned, sales revenue can be deferred therefore they are not recognized at the sales accounting date but within a given number of accounting periods.

When a sales invoice line is created, it is possible to define at line level whether the line is going to cause the revenue to be deferred or not. The relevant fields are:

- **Deferred Revenue**: When this flag is checked, the Revenue Plan field group becomes visible, allowing users to configure the next three fields.
  - **Revenue Plan Type**: This field specifies the frequency of the revenue distribution which currently is "monthly".
  - **Period Number**: This field specifies the duration of a revenue plan.  
    For instance, if a company sells and invoices a product that will only be available to be delivered to their customers in 3 months, they would like to recognize the revenue all at once but in 3 months.  
    In this situation the period number to enter would be 1.
  - **Starting Period**: The first open period in which the revenue is going to be recognized.  
    In our example, the starting period to enter would be the one corresponding to 3 accounting periods after accounting the sales invoice.

These fields can be defaulted if configured for the product.

If a revenue plan is configured, that implies a specific sales invoice accounting.

**Explode** button is shown when selecting a line with a non-stockable BOM product and the product is not already exploded. When exploding a product, the bill of materials components that the selected product consists of are shown in the invoice. Once you have exploded it, you cannot comprime it. You should delete all the lines (first bill of materials components and then the BOM product), and insert again the non-stockable BOM product.

###### **Line Tax**

Line tax information is automatically populated for each sales invoice line upon completion of the invoice.

**Line Tax** read-only tab details tax information for each line of a sales invoice based on its Tax field which is automatically pre-filled according to the Taxes Setup.

###### **Tax**

This section summarizes tax related information for the whole sales invoice. It contains as many records as tax rates used in the invoice.

###### **Basic Discounts**

This tab lists information about the discounts automatically applied based on the customer configuration and / or manually entered for the sales invoice.

###### **Payment Plan**

The payment plan tab lists the scheduled payments expected against the invoice.

The payment plan of a non paid invoice can be changed:

- the payment "**expected date**" can be directly changed if required in this tab
- the payment "**expected date**", the "**payment method**" and the **"outstanding amount to be paid",** among others can be changed if required by using the Editable Payment Plan advanced feature.

###### **Payment Details**

This tab displays the details of the payments made against the invoice.

###### **Reversed Invoices**

This tabs allows the user to select the invoices (if any) being reversed by the invoice being created. When the user voids an existing invoice, the reverse invoice is automatically created by Etendo and linked to the original invoice being reversed. In case of creating a Reverse Sales Invoice which partially voids an existing invoice/s, the user must manually select the invoice/s being reversed in this tab.

###### **Exchange Rates**

The exchange rate tab allows the user to enter an exchange rate between the organization's general ledger currency and the currency of the customer's invoice to be used while posting the invoice to the ledger.

Etendo allows the user to manage different currencies within an organization or business unit.

Nowadays, it is very common for the organizations located in a country to make business with third parties located abroad, and even more, it could also happen that an organization needs to post the transactions to general ledgers configured in different currencies.

Above described business scenario, implies the need of managing exchange rates between the organization's general ledger/s currency and the customer's invoice currency to be used while posting the customer's invoice to the ledger/s.

This tab allows the user to enter:

- either an exchange rate between the organization's general ledger/s currency and the customer's invoice currency
- or the total foreign invoice amount/s, therefore Etendo can calculate the corresponding exchange rates.

Additionally, Etendo has a "central" repository of exchange rates which are used in case there is not an exchange rate defined at document level.

###### **Payment**

Payments can be received against a sales invoice by using the **Add Payment** button which opens the **Add Payment window.**

![Payments](https://docs.etendo.software/latest/assets/drive/1VElsFedveUr6Wfn-e9M7Fvf7PTcl8rL8.png)

All fields of the Add Payment window are automatically populated from the Invoice. The "Transaction Type" field is also defaulted to "Invoices".

The "Expected Payment", the "Actual Payment" and the "Amount" fields get the same value which is the grand total of the invoice (Total Gross Amount).

Other important fields to note are:

- **Received From**: It is the Payee of the invoice. Defaulted to the Business Partner from the Invoice.
- **Deposit to**: It is the financial account to which the amount is going to be deposited.
- **Payment Date**: It is the date of the payment event. It is used in the posting record of the Payment to the general ledger. Defaulted to the Invoice Date field.

####### **Adding Order/Invoice**

If the "Add Payment" window is opened from a "Sales Invoice", all invoice scheduled payments are selected by default if there are more than one.

Besides that the "Expected Payment" amount and the "Actual Payment" amount are set as equal as the (Invoice) "Amount", and the "Transaction Type" field is set to "Invoices".

The reason for the above is that Etendo understands that the invoice is going to be fully paid, but obviously that could not be the case. Therefore the most common field to change is the Actual Payment received from the customer:

- In case the "Actual Payment In" amount is bigger than the grand total of the invoice selected, then it will be spread between the next documents pending to be paid till the whole amount is consumed.  
  If there are no documents pending to be paid the system offers the options to:
  - "Leave the credit to be used later" which means that there will be available credit for the customer.
  - or "Refund the amount to the customer" which means that a refund payment is created besides the invoice payment in the Payment In window.  
    A refunded payment has a negative amount which means the creation of a withdrawal transaction in the financial account instead of a deposit.
- In case the "Actual Payment In" amount is less than the grand total of the invoice selected, then the system offers the options to be managed in the order/invoice grid.
  - Write of the difference (by just checking the field Writeoff) which implies that:
    - the customer's invoice is set as fully paid.
    - The invoice posting to the ledger settles the total customer receivable amount.
    - While the payment posting to the ledger uses the Write-off account to post the amount written-off.
  - "Leave the amount as an underpayment" (if the field Writeoff is not checked) which implies that the remaining amount will be paid later on by the customer in a new payment.

####### **Adding G/L items**

GL Items section allows the user to enter any type of expense related to the payment but not included in the invoice, by clicking on \[Add New\] .

First thing to do is to select the G/L item for the expense and then enter the expense amount in the field "Received In" as shown in the image below:

Once done,

- the invoice posting to the ledger settles the total customer receivable amount,
- while the payment posting to the ledger uses besides the G/L item account to post the paid expense amount.

####### Reviewing the totals and processing the payment

As already mentioned, "Totals" section allows to review:

- the total amount to be paid on G/L items,
- the total amount to be paid on Invoices and/or Orders,
- the grand total,
- and the difference between the "Actual Payment" and the "Expected Payment" (only in the case of overpayment)

Also, "Totals" section allows the user to process a payment by selecting an option in the field "Action Regarding Document".

- _Process Received Payment(s):_ The Payment is processed.
- _Process Received Payment(s) and Deposit:_ The Payment is processed and the payment amount is deposited in the Financial Account.

The number of options above depends on the setup of the payment method:

- If _Automatic Deposit_ option had already been selected within the payment method for Payment, only the option _Process Received Payment(s) and Deposit_ is shown. However,
- if the _Automatic Deposit_ option had not been selected, both actions are offered giving the user an option to choose whether they want the deposit to be executed as well or not.

Finally, any of these actions updates the Payment Monitor section of the Invoice Header. The Paid amount is also reflected in the Payment Plan tab of the Sales Invoice (and the Sales Order if it exists). Details of the payment can be found in the Payment Details tab.

####### **Credit Payment**

Whenever there is available credit for a customer, a new window is automatically opened upon completion of a new customer's sales invoice in order to allow the user to either select the credit available to pay that new invoice or not.

- If the available credit is used:
  - the payment status of the invoice changes to Payment Complete = Yes,
  - a literal such as "Invoice paid using credit:Payment Nº (Credit Payment)" is automatically populated in the description field of the invoice,
  - a new payment is automatically created in the Payment In window. This payment clearly states the invoice paid in the "Description" field and the credit payment used is shown in the Used Credit Source tab of the payment out.
- If the available credit is not used:
  - nothing happens, the new invoice is still not paid and the available credit amount remains the same.

Moreover, it is also possible to use the available credit generated for that particular customer later on while "Adding a Payment" for that customer.

If that is the case, a new section is shown in the "Add Payment" window, that is "Credit to Use" section.

"Credit to Use" section shows all credit payments created for a given customer (if more than one), therefore it is possible to select one or more, and even change the credit amount to be used for the payment, in the field "Payment Amount".

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/sales-management/transactions/newcredittouse.png)

Once the payment is processed, a new payment is created in the Payment In window. That payment states at the very top the "Used Credit" amount.

####### **Payments in multiple currencies**

Etendo allows the user to receive payments in a different currency than the financial account currency.

To do this, the payment method assigned to the financial account used to receive the payment needs to be configured to allow it, that implies to select the check-box "Receive Payments in Multiple Currencies".

!!! example

    Let's take for instance an organization such as "F&B US Inc".

    This organization is located in USA, therefore it is likely that the organization's general ledger currency as well as the financial account currency is set as USD.

    F&B US Inc makes business with a customer located abroad. This customer requires to pay the invoice/s issued to it in EUR currency. This means that:

    - F&B US Inc organization needs to issue the customer's invoice in EUR same as the payment received from the customer.

    If the customer's payment is registered in the "Add Payment" window shown from this "Sales Invoice" window, Etendo allows the user to enter an exchange rate, therefore the "Actual Converted" amount to be paid in EUR can be changed if required.

###### **Accounting**

Accounting information related to the sales invoice.

A sales invoice can be posted to the ledger when required at a given "Accounting Date" by using the button "Post".

Sales Invoice posting creates the following accounting entries:

Posting record date: Accounting Date.

|                              |                        |                     |                                               |
| ---------------------------- | ---------------------- | ------------------- | --------------------------------------------- |
| Account                  | Debit              | Credit          | Comment                                   |
| Customer Receivable      | Total Gross Amount |                     | One per Payment Plan Line (TB verified)   |
| Discount Product Revenue | Discount Amount    |                     | One per Invoice Line (if discount exists) |
| Product Revenue          |                        | Line Net Amount | One per Invoice Line                      |
| Tax Due                  |                        | Tax Amount      | One per Tax Line                         |

Same way, a Sales Invoice including a sales invoice line with a revenue plan configured creates the following accounting entries.

For instance, a food and beverage distributor selling and invoicing a product that will only be able to deliver to their customers in 3 months would want to defer the revenue recognition till the delivery.

Posting record date: Accounting Date:

|                              |                        |                     |             |
| ---------------------------- | ---------------------- | ------------------- | ----------- |
| Account                  | Debit              | Credit          | Comment |
| Customer Receivables     | Total Gross Amount |                     |             |
| Product Deferred Revenue |                        | Line Net Amount |             |
| Tax Due                  |                        | Tax Amount      |             |

Posting record date: Accounting Date + 3 months:

|                              |                     |                     |
| ---------------------------- | ------------------- | ------------------- |
| Account                  | Debit           | Credit          |
| Product Deferred Revenue | Line Net Amount |                     |
| Product Revenue          |                     | Line Net Amount |

Return Material Sales Invoice posting creates the following accounting entries.

!!! note

     Notice that this Invoice should be created with negative amounts.

Posting record date: Accounting Date.

|                                                              |                     |                        |                                             |
| ------------------------------------------------------------ | ------------------- | ---------------------- | ------------------------------------------- |
| Account                                                  | Debit           | Credit             | Comment                                 |
| Customer Receivable                                      |                     | Total Gross Amount | One per Payment Plan Line (TB verified) |
| Product Revenue Return or if not defined Product Revenue | Line Net Amount |                        | One per Invoice Line                    |
| Tax Due                                                  | Tax Amount      |                        | One per Tax Line.                       |

###### **Voiding**

It is possible to totally void a sales invoice by using the header button "Reactivate" and then the action "Void", this action implies:

- Etendo automatically generates a new reversed document in the "Sales Invoice" window, and informs about the reversed document number created. This new reversed document is created as described below:
  - The "transaction document" used by Etendo is "Reversed Sales Invoice".
  - This document is exactly the same as the original one being reversed but the invoiced quantity is negative.
  - You can change both the "Invoice Date" and the "Accounting Date" of the reversed document prior to get it posted.
  - The "Reversed Invoices" tab lists the original invoice being reversed as now both of them are linked.

The reversed document posting creates the following accounting entries:

|                      |                 |                    |                                          |
| -------------------- | --------------- | ------------------ | ---------------------------------------- |
| Account              | Debit           | Credit             | Comments                                 |
| Product Revenue      | Line Net Amount |                    | One per invoice line                     |
| Tax Due              | Tax Amount      |                    | One per tax line.                        |
| Customer Receivables |                 | Total Gross Amount | One per invoice                          |
| Discount Revenue     |                 | Discount Amount    | One per Invoice Line (if discount exits) |

It is also possible to partially void a customer's invoice by:

- manually creating any of the available reversed sales documents, in the "Sales Invoice" window:
  - "AR Credit Memo" or
  - "Reversed Sales Invoice"
- which must be manually linked to the invoice/s being reversed in the "Reversed Invoices tab".

The "AR Credit Memo" posting looks the same as the "Reversed Purchase Invoice" posting.

The main difference between those two purchase reversed document types is:

- AR Credit Memo invoiced quantity is a positive quantity
- and Reversed Sales Invoice quantity is a negative quantity.

We strongly recommend the user to use the "Reversed Sales Invoice" document type while partially voiding customer's invoices.

##### How to Reactivate a Voided Sales Invoice

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

Etendo allows the user to reactivate voided sales invoices by selecting the needed one/s and clicking the **Unvoid** button.

![](https://docs.etendo.software/latest/assets/drive/1ylCS2UH_L4XkR02QV8XLqI1rduhcpfIe.png)

Once the process is finished, the sales invoice status turns to Complete.

!!! warning "Important"
    
    - In the case of the standard version of the module, it is necessary for the user to also unvoid the corresponding reversed invoice.
    - Remember that this reactivation process affects the accounting, since, if the original information is not manually removed from the reactivated document, the accounting information will be doubled.


!!! info
    Check the Technical documentation about Advanced Financial Docs Processing to extend the process.

##### Payment Removal

The aim of this functionality is to delete and reactivate payments in an agile and easy way. Also, it allows eliminating and reactivating bank transactions and reconciliations.

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

From this window, it is possible to delete payments associated with a sales invoice by selecting the corresponding document and then clicking on the Remove Payment button. If there is an order associated with the invoice, the relationship of this order to the payment in question will also be deleted (Sales Order window > Payment Plan tab).

If the payment is included in the financial account, i.e., if it is in Deposited/Withdrawn not cleared status, the transaction in it will also be deleted (Financial account window > Transaction tab).

If the payment is reconciled through an automatic method, then in addition to the transaction in the financial account, the line of the bank statement to which it was linked (Financial Account window > Imported Bank Statements) and the corresponding line of the bank reconciliation (Financial Account > Reconciliations) will be deleted.

!!! info
    If the payment is posted, the accounting entry is deleted too.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/sales-management/transactions/PRpic3.png)

##### Intercompany

In case the user has to create orders or invoices among two or more organizations that are different but belong to the same client, this functionality allows automatically generating the corresponding inverse document.

!!! info
    For more information, visit [the Intercompany module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/overview.md#intercompany).

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

##### Advanced Rappels

!!! info
    To be able to include this functionality, the Advanced Rappels module of the Sales Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Sales Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=22CF01FC620140A6AA92CF550EB8DA36){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Sales Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/sales-extensions/release-notes.md).

When using this functionality, in the Sales Invoice window, the user can find the sales invoices corresponding to the created rappels.

![sales_invoice.png](https://docs.etendo.software/latest/assets/legacy/sales_invoice.png)

These sales invoices have a negative amount that represents the discount of the rappel, can include a prefix in its code to distinguish them from the rest and their status is “draft”.

!!! info
    For more information, visit [Advanced Rappels](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#advanced-rappels).

##### Bulk Completion

!!! info
    To be able to include this functionality, the Essentials Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Essentials Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=39AC2D9F72124AC7A1D0A3D005293C9E){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Essential Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/essentials-extensions/release-notes.md).

The Bulk Completion functionality allows the user to complete, reactivate or close multiple records by selecting them and clicking the **Bulk Completion** button. This makes records management easier and more efficient, reducing the time spent processing individual records.

!!! info
    For more information, visit [the Bulk Completion module user guide](https://docs.etendo.software/latest/optional-features/bundles/essentials-extensions/bulk-completion.md).

#### Create Invoices from Orders

:material-menu: `Application` > `Sales Management` > `Transactions` > `Create Invoices from Orders`

Create Invoices from Orders allows the user to see the Sales Orders pending to be invoiced and it automatically generates the corresponding Sales Invoices based on them.

A "Sales Invoice" can be generated for one or more "Sales Orders" or for all "Sales Orders" that are pending to be invoiced.

![Create invoices from orders](https://docs.etendo.software/latest/assets/drive/1J4B0wWAqAz5lHmjwKB13zjCjqd9_LaEp.png)

Filters such as the "Business Partner" or the "Organization" are available to narrow down the shown results.

Overall this form shows:

- "Sales Orders" having an "Immediate" Invoice Term, without the need of having a Goods Shipment related.
- "Sales Orders" having an "After Delivery" Invoice Term, whenever there is a Goods Shipment related to at least some products contained in Sales Order that have been already delivered.
- "Sales Orders" having an "After Order Delivery" Invoice Term, whenever there is a Goods Shipment/s related to all the products contained in Sales Order, that have been already delivered.
- "Sales Orders" having a "Customer Schedule After Delivery" Invoice Term, whenever there is a Goods Shipment/s according to the defined schedule agreed with the customer.

Same way this form does not show for invoice "Sales Orders" having a "Do not invoice" Invoice Term, as those sales orders are not supposed to be invoices for whatever kind of reason.

For all Invoice Term but _Customer Schedule After Delivery_ one Sales Invoice is created for all Goods Shipment sent to the customer at the same date which are related to one Sales Order.

If there are several Goods Shipment that take place on different dates - several Sales Invoices are generated for each Goods Shipment date. If there are no Goods Shipments, a Sales Invoice is created for a full Sales Order.

If the Invoice Term is _Customer Schedule After Delivery_ then a sales invoice is created grouping deliveries from different orders for the same customer.

Invoice Date for the generated Sales Invoices (and so the Accounting Date field that is used in the posting record of the invoice to the general ledger) is taken first from Invoice Date field. If this field is not populated, it is inherited from the Movement Date field of the Goods Shipment related to the Sales Order. If there are no Goods Shipments, then the Order Date field from the original Sales Order is used as Invoice Date.

Finally, it is important to notice that this process also uses the values specified at product level for deferring the sales revenue of the corresponding sales invoice lines.

##### **Form**

Fields to note:

- **From Date** and **To Date:** specify **Order Date** field ranges for filtering.
- **Total Lines:** total net amount of the sales order (of all its lines).
- **Invoiced:** already invoiced net amount for the sales order.
- **Ready to Invoice:** the net amount pending (according to Invoice Term criteria) to be invoiced for the specific order.

Select the order(s) you want to invoice and click the **Process** button to generate corresponding Sales Invoice document(s). Process execution message displays sales order number(s) and corresponding invoice number(s) that was just created.

#### Generate Invoices

:material-menu: `Application` > `Sales Management` > `Transactions` > `Generate Invoices`

Generate Invoices executes automatic bulk generation of Sales Invoices for all Sales Orders pending to be invoiced that belong to the selected Organization or, if the Include Child Organizations checkbox is checked, to the selected Organization and its children. The Invoices generated are going to be created against the selected Organization.

Main criteria for this process is a Sales Order Invoice Term field. For example, if Invoice Term is _After Order Delivered_ then an invoice will be generated only if all products of this sales order have been already shipped. If Invoice Term is _Customer Schedule After Delivery_ certain customer schedule is checked.

All the Documents created are going to be Invoiced against the Organization set in the Invoice Organization Parameter.

![Generate invoices](https://docs.etendo.software/latest/assets/drive/1wZBTbAZKVzWQjSWmFk-9YPcPlbUvcDMv.png)

Filters are available to narrow down the inputs for the generation process:

**Invoice Organization:**The Organization against which the Invoices are going to be created.

**Sales Order:** leave blank to consider all sales orders or select a specific one to generate an invoice for. Note that only pending orders are included inside this drop-down.

**Date Invoice To:** only sales orders with **Order Date** field up to this date are included in generation process.

**Business Partner:** If none is selected, all business partners with pending invoicing are considered. If a specific customer is selected here, only sales orders to that business partner are considered for automatic invoicing. The business partners that are available to select must have orders with invoice rule 'After delivery' or 'Customer Schedule After Delivery'.

**Include Child Org:** a flag indicating whether the child organizations of the Organization field value are going to be taken into account when generating invoices or not. When Include Child Org is checked and the invoice Rule is 'Customer Schedule After Delivery', the invoices will group the child organization.

!!! info
    Note that the Invoice Organization filter is also used to set the Organization of the Invoices that are going to be created. This is important while generating Invoices for Child Organizations, because all of them are going to be created against the parent Organization.

For all Invoice Terms but _Customer Schedule After Delivery_ one Sales Invoice is created for all Goods Shipment sent to the customer at the same date which are related to one Sales Order that meets Generate Invoices process criteria. If there are several Goods Shipments that take place on different dates - several Sales Invoices are generated for each Goods Shipment date. If Goods Shipment does not exist one Sales Invoice is created for one full Sales Order that meets Generate Invoices process criteria. If the Invoice Term is _Customer Schedule After Delivery_ then only one sales invoice is created grouping deliveries from different orders for the same customer.

Finally, it is important to remark that the Generate invoices process also uses the values specified at product level for deferring the sales revenue of corresponding sales invoice lines.

##### **Form**

An important field to note is **Invoice Date**. If specified, this date is transferred as the Invoice Date to the generated Sales Invoices (and so to Accounting Date field that is used in the posting record of the invoice to the general ledger). If not defined then Movement Date field from the Goods Shipment related to the original Sales Order is set as Invoice Date. If Goods Shipment does not exist then the Order Date field from the original Sales Order is used as Invoice Date.

**OK** button launches the process and all orders pending to be invoiced that match the filters are automatically invoiced.

When the process is finished, a message is shown with the total number of created invoices and their document numbers.

#### Commission Payment

:material-menu: `Application` > `Sales Management` > `Transactions` > `Commission Payment`

In this section, the user can create commissions and create corresponding invoices.

This window is not editable since "commission" records are calculated in the Commission window, however this window allows to create an invoice for the commissions previously calculated.

This window needs to be read as follows:

- The **header** shows the commission document, the starting date and total net amount. In case an invoice is created then both documents are linked to each other later on.
- The **amounts** tab groups the result of all lines taken into to calculate this amount. Therefore, for each line defined in the commission  window the user has one entry in this tab.
- The **Details** tab shows all the Order lines/Invoice lines taking into account to calculate the amount.

##### **Header**

The user can create and edit a new commission payment.

![Commision payment header](https://docs.etendo.software/latest/assets/drive/16ukK8L3jTWiFdQ1AAOr3snAb4kTNwR0G.png)

A purchase invoice can be created from here in case it is required for paying the sales representative, by using the process button "Create Invoice".

- **Commission** field indicates which is the defined commission and therefore the conditions used to calculate the commission amount.
- **Starting date** as the date used when running the process, for instance an starting date of 1st of March with a Monthly frequency implies to take orders/invoices created and booked in March.
- **Total amount** field shows the commission amount after applying the configured conditions. Commission amount is calculated based on amounts excluding taxes.
- **Invoice** field shows the invoice created if any.

###### **Amounts**

The user can edit individual sales order lines that yielded a selected commission.

**Amounts** tab shows the amount calculated per each line defined in the commission  window.

![Commision payment amount tab](https://docs.etendo.software/latest/assets/drive/1RKBEy3nS7XSzgh1ST4gl4n7-DBSsXGon.png)

For example if the commission has two lines:

- First line:
  - Product category: Alcoholic
  - Multiplier amount: 0.20
- Second line:
  - Product category: Bio
  - Subtract amount: 12000
  - Multiplier amount: 0.10

Then two lines would appear in this tab.

Fields to note:

- **Commission line**: The line used to calculate the amount.
- **Amount**: The result of the commission.
- **Converted Amount**: The total amount without applying the conditions of the commission line in the corresponding currency.
- **Actual quantity**: The total quantity. When UOM is different among products this info is not relevant.

###### **Details**

Create and edit the calculation and invoicing of sales commission.

**Details** tab shows all the sales/invoice lines took into account to calculate the corresponding commission line.

Fields to note:

- **Reference**: Document number
- **Sales Order Line**: Link to the order line took to calculate the commission
- **Sales Invoice Line**: Link to the invoice line took to calculate the commission
- **Comments**: Name of the product
- **Actual Amount**: Net amount of the line in the currency of the Order/Invoice document
- **Currency**: Currency of the commission. Remember that currency is defined in the commission window
- **Converted Amount**: Amount in the currency of the commission
- **Actual Quantity**: Quantity ordered in the order/invoice line
- **Is Cost Calculated**: This field's default value is 'YES'. It is only taken into account when the commission is calculated based on the margin. When this flag is not marked the cost of the transaction is not calculated. That means it hasn't been possible to calculate its margin. This flag must be marked in all the details in order to be able to generate the invoice of the commission.

---

This work is a derivative of [Sales Management](http://wiki.openbravo.com/wiki/Sales_Management){target="_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="_blank"} by [Etendo](https://etendo.software){target="_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Analysis Tools
## Article Path: /User Guide/Etendo Classic/Basic Features/Sales Management/Analysis Tools
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/analysis-tools
## Article Content: 
#### Overview


This section describes the windows related to sales reports in Etendo. These are:

[:material-file-document-outline: Sales Dimensional Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/analysis-tools.md#sales-dimensional-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Shipments Dimensional Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/analysis-tools.md#shipments-dimensional-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Discount Invoice Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/analysis-tools.md#discount-invoice-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Stock for Open Orders](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/analysis-tools.md#stock-for-open-orders){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Orders Awaiting Invoice Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/analysis-tools.md#orders-awaiting-invoice-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Orders Awaiting Delivery Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/analysis-tools.md#orders-awaiting-delivery-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Sales Invoice Dimensional Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/analysis-tools.md#sales-invoice-dimensional-report){ .md-button .md-button--primary } <br>


#### Sales Dimensional Report

:material-menu: `Application` > `Sales Management` > `Analysis Tools` > `Sales Dimensional Report`

##### Overview

This is a dimensional type of report that shows information mainly about the "Total Net Amount" of registered sales orders (Sales Orders in a status *Booked* or *Closed*) during a selected period of time.

This report can display best-selling products and top customers and answer many other questions related to the company's sales booking activity.

##### Parameters Window

![Sales Dimensional Report](https://docs.etendo.software/latest/assets/drive/1hUSiwTVhtzym77PrGRYXNcTx4jRqX3Ur.png)

Fields to note:

-   **Warehouse:** It narrows down results for a particular warehouse from where an order is shipped (**Warehouse** filed in the Sales Order).
-   **Commercial Document:** allows the user to filter results by **Sales Representative** field from the **Sales Order** window, which normally reflects the person who booked the order.
-   **Commercial File:** allows the user to filter results by **Sales Representative** field from the **Customer** tab of the **Business Partner** window, which normally contains the person responsible for this customer (for example, account manager).
!!! info
    In the majority of cases, filtering by the fields mentioned above gives the same results. They could differ if a customer has one main responsible person, but different sales team members can book orders. Or if a customer is moved from one sales representative to another. The new sales representatives might want to use the second filter to see the activities of all their customers (regardless of who closed the deal) while the old sales representatives might want to use the first filter to see the orders they closed, regardless of who manages the customer at present.


##### Sample Report Output

![Sample Report Output](https://docs.etendo.software/latest/assets/drive/1ZYCoYa83A96xOFcOfd6-qIFTr81ymJ2S.png)

Information to note:

-   **Amount:** is the **net** amount from the Sales Order converted to the report **Currency**.
-   **Weight:** of the sold product if specified in the **Product** window.

#### Shipments Dimensional Report

:material-menu: `Application` > `Sales Management` > `Analysis Tools` > `Shipments Dimensional Report`

##### Overview

This report shows information about goods shipped to the customers (Goods Shipments in a status Completed or Voided) during a selected period of time. It is a dimensional type of report.

##### Parameters Window

There is no specific field to note, but just the dimensional primary and secondary filters which can be used to narrow down the information to be displayed.

![Shipments Dimensional Report](https://docs.etendo.software/latest/assets/drive/1A3OFI-84W20Lz_6zBXcFraHkHMOhWZKN.png)

The outcome of this report can be viewed in HTML format, XLS format, and PDF format.

##### Sample Report Output

Some information to note:

-   **Amount:** is the **net** amount (cost of the goods for customers) shipped to them converted to the report **Currency**. This amount is retrieved from the Sales Order that corresponds to the Goods Shipment. If a Goods Shipment is not linked to any Sales Order, this field will be empty.
-   **Weight:** of the shipped product, if specified in the Product window.

![Sample Report Output](https://docs.etendo.software/latest/assets/drive/1TD2GMryWaNAeWDcX10o7t7qmMdkpZ6Jx.png)

#### Discount Invoice Report

:material-menu: `Application` > `Sales Management` > `Analysis Tools` > `Discount Invoice Report`

##### Overview

This report shows information about registered sales invoices (Sales Invoices in a status Completed or Voided) during a selected period of time, grouping the information by Business Partner and Product.

The report displays information about the average price by product, the net price and the discount applied in each product.

##### Parameters Window

![Discount Invoice Report](https://docs.etendo.software/latest/assets/drive/1ghqLTYaD2stIcN7FmRjo8EIxsP7CP1Jy.png)

Fields to note:

-   **From Date:** allows filtering results by **Invoice Date** field from the Sales Invoice window. It is mandatory and the result report will show information about sales invoices with a date invoice bigger than the parameter.
-   **To Date:** allows filtering results by **Invoice Date** field from the sales invoices window. It is also mandatory, and the result report will show information about sales invoices with a date invoice less than the parameter.
-   **Currency:** the amounts will be shown in the selected currency. For invoices in other currency, the amount will be converted to the selected currency, taking into account the conversion rate for the invoice date.
-   **Business Partner:** allows filtering results by **Business Partner**. The result report will only show information about sales invoices of the selected Business Partners. It is not a mandatory parameter, so if no Business Partner is selected, the sales invoices will not be filtered by that field.
-   **Show only Discounted:** if checked, only articles with discount will be shown.

##### Sample Report Output

![](https://docs.etendo.software/latest/assets/drive/1ycGDW3jPjlFaRlhOW4CxRZ4cxFfdW0iP.png)

For the example in the above image, according to the filters, the result will show information about sales invoices for the business partner “Alimentos y Supermercados, S.A.” from the date “01-06-2021” to the date “01-01-2022”. The amounts will be in USD.


Columns to note:

-   **Quantity:** is the total quantity sold for each product and business partner.
-   **Avg. Pr:** is the average price for one product and business partner without taking into account discounts.
-   **Amt:** is the Avg. Pr. multiplied by the quantity.
-   **Avg. Net Pr.:** is the real average price for one product and business partner, taking into account discounts.
-   **Real amount:** the real amount sold for one product and business partner without taxes.
-   **Discount (%):** is the discount applied for the product and business partner.

In the image below, the same report is shown, but having checked the filter “Show only Discounted”. In comparison to the previous report, this report shows only those lines in which the discount is not equal to zero.

![](https://docs.etendo.software/latest/assets/drive/1Z36B4O0Ih4xnuLhT_HYRHJfP0QlZDeiG.png)


#### Stock for Open Orders

:material-menu: `Application` > `Sales Management` > `Analysis Tools` > `Stock for Open Orders`

##### Overview

This section shows the lines of the pending orders with the actual stock of each product.


#### Orders Awaiting Invoice Report

:material-menu: `Application` > `Sales Management` > `Analysis Tools` > `Orders Awaiting Invoice Report`

##### Overview

**Orders Awaiting Invoice Report** shows the information about the Sales Orders that are not fully invoiced yet.

Only Sales Orders with *Do Not Invoice* Invoice Term are not displayed in the report, but all other orders are present in the output, independently if the Invoice Term condition is met or not. For example, if **Invoice Term** is "After Delivery" and products are not shipped yet, Sales Order is displayed.

![Orders Awaiting Invoice Report](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/sales-management/analysis-tools/orders-awaiting-invoice-report.png)

##### Parameters Window

![Orders Awaiting Invoice](https://docs.etendo.software/latest/assets/drive/1m5K-52iabxWTBcYXnuBxhisNKIiOPhlP.png)

All filters refer to corresponding fields of the **Sales Order**.

All monetary values (like **Amount**, **Price**, **Base**) in the report are displayed in two currencies. The first one is the Sales Order currency, and the second one is regulated by the Currency parameter field (defaulted to the system currency). 

!!! warning
    Please note that Conversion Rate to the report Currency should be specified for the report to work.

##### Sample Report Output

![Sample Report Output](https://docs.etendo.software/latest/assets/drive/1OTwoN7NttxZipv10smwuOv6ET_2OtddS.png)

!!! info
    Please note that the report gives information about sales orders and products included in it without reflecting the information of already delivered and invoiced quantities.


#### Orders Awaiting Delivery Report

:material-menu: `Application` > `Sales Management` > `Analysis Tools` > `Orders Awaiting Delivery Report`

##### Overview

**Orders Awaiting Delivery Report** shows the information about the Sales Orders that are awaiting (pending) to be delivered (shipped).

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/sales-management/analysis-tools/orders-awaiting-delivery-report-18.png)


##### Parameters Window

![Orders Awaiting Delivery](https://docs.etendo.software/latest/assets/drive/1hbLnfh3onAAqN6yKjgUh2VCPlgDrG8XK.png)

All filters refer to corresponding fields of the Sales Order.

##### Sample Report Output

![Sample Report Output](https://docs.etendo.software/latest/assets/drive/1Liay4G2dIvO513rwpadunx-v0ud0rs87.png)


#### Sales Invoice Dimensional Report

:material-menu: `Application` > `Sales Management` > `Analysis Tools` > `Sales Invoice Dimensional Report`

##### Overview

This is a dimensional type of report that shows information about registered sales invoices (Sales Invoices in a status *Completed* or *Voided*) during a selected period of time.

This report can display ratings of products and top customers based on the sales revenue, show profit and margin of sales and answer many other questions related to the company´s sales invoicing activity.

##### Parameters Window

![Sales Invoice Dimensional](https://docs.etendo.software/latest/assets/drive/1u4QnUnLSo4PvVzeduFYZDQgs3FKZwJMG.png)

Fields to note:

-   **Commercial Document:** allows the user to filter results by Sales Representative field from the Sales Invoice window, which is normally inherited from Sales Order.
-   **Commercial File:** allows the user to filter results by Sales Representative field from the Customer tab of the Business Partner window, which normally contains the person responsible for this customer (for example, account manager).

!!! info
    In the majority of cases, filtering by the fields mentioned above gives the same results. They could differ if a customer has one main responsible person, but different sales team members can book orders. Or if a customer is moved from one sales representative to another. The new sales representatives might want to use the second filter to see the activities of all their customers (regardless of who closed the deal) while the old sales representatives might want to use the first filter to see the orders they closed, regardless of who manages the customer at present.

-   **Project:** allows the user to show invoicing information for a particular project.
-   **Product Type:** filter that displays results for selected Product Types.

##### Sample Report Output

![Sample Report Output](https://docs.etendo.software/latest/assets/drive/19rJehYODpxaL4CHLStphythhzfSAswSq.png)

Columns to note:

-   **Currency column, ex. (EUR-€):** percentage of the particular row **Amount** in the report **Total Amount**. All rows should sum up to 100%.
-   **Amount:** is the **net** amount from the Sales Invoice converted to the report **Currency**.
-   **Cost:** cost of the goods sold (as per the corresponding cost of the product).
    -   There could be product transactions whose cost has not yet been calculated yet, therefore the cost of that transactions is estimated as a "proportional" cost based on the known transaction's cost.
        -   In this case, the estimated cost is shown in red color.
-   **Profit:** is the difference between **Amount** and **Cost**.
-   **M.%:** sales margin as a ratio of **Profit** to **Amount**.
-   **Weight:** of the invoiced product if specified in the **Product** window.

**How the estimated cost is calculated:**

In case there is not a calculated cost for some of the retrieved records, it is necessary to estimate it. In order to do so, a generic Unitary Cost for the records with calculated cost is retrieved and, using it, the estimation is performed. The formula works in the following way:

Example: If there is a Product with an Invoice Line of 100€ and it has a calculated cost of 30€, for a line of 200€, the estimated cost should be 60€.

200€ line net amount \* (30€ calculated cost/100€ transactions with calculated cost) = 60€. (30€ calculated cost/100€ transactions with calculated cost) is the Unitary Cost.

In a generic scenario, that is not dependent on any dimension like Product:

**Estimated Cost = Total Line Net Amount \* (Total Calculated Cost/Total Line Net Amount of Transactions with Calculated Cost)**. Being (Total Calculated Cost/Total Line Net Amount of Transactions with Calculated Cost) the Unitary Cost

This means that the estimation is dependent on the retrieved records. The more records there are and the more grouped they are, the more precise the estimation will be. If the report is split by different dimensions, the estimations can be different and, therefore, the totals can have a minor variation.

There is also possibility to export this report to a PDF or a XLS file:

![Buttons](https://docs.etendo.software/latest/assets/drive/1SM0X-gfBBOlwyaKionNpxbUc_IVgK2L9.png)

PDF format shows the same fields explained before, but in XLS format new fields are added related to selected invoice:

-   **Organization**
-   **Business Partner Group**
-   **Business Partner**
-   **Document No.**
-   **Invoice Date**
-   **Product Category**
-   **Product**
-   **Product Search Key**
-   **Unit Price**
-   **Sales Representative**
-   **Project**
-   **Ship to Address**

At the top of the report, the secondary filters are now shown.

Also, this report now shows the total of cost, profit, margin-% and quantity.

At the end of the report, there is a new table showing the number of documents per document type.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Setup
## Article Path: /User Guide/Etendo Classic/Basic Features/Sales Management/Setup
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/setup
## Article Content: 
#### Overview

This section describes the different windows that are necessary to set up the sales process in Etendo. These are:

[:material-file-document-outline:Condition of the Goods](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/setup.md#condition-of-the-goods){ .md-button .md-button--primary } <br>

[:material-file-document-outline:Sales Region](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/setup.md#sales-region){ .md-button .md-button--primary } <br>

[:material-file-document-outline:Commission](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/setup.md#commission){ .md-button .md-button--primary } <br>

[:material-file-document-outline:Channel](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/setup.md#channel){ .md-button .md-button--primary } <br>

[:material-file-document-outline:Sales Campaign](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/setup.md#sales-campaign){ .md-button .md-button--primary } <br>

[:material-file-document-outline:Reject Reason](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/setup.md#reject-reason){ .md-button .md-button--primary } <br>


#### Condition of the goods

:material-menu: `Application` > `Sales Management` > `Setup` > `Condition of the goods`

In this window, the user defines in which status the goods come from the customer. These values are used in the **Return Material Receipt** window.

![Condition of the goods](https://docs.etendo.software/latest/assets/drive/12vgLwH05GA2eHFM0hO6gh-oMJB8wQnae.png)

#### Sales Region

:material-menu: `Application` > `Sales Management` > `Setup` > `Sales Region`

In this section, the user can create sales regions to be used in sales operations and define a sales region to be used in the sales process.

![Sales region](https://docs.etendo.software/latest/assets/drive/1vcGKHAFpkqZTXMU1upjaphEvhkU3Gw2F.png)

#### Commission

:material-menu: `Application` > `Sales Management` > `Setup` > `Commission`

The user can define how and when commissions are going to be calculated and to whom they are going to be paid.

Commissions can be calculated based on two documents: Sales Orders and Sales Invoices. In both documents the sales representative should be selected, as commissions can be calculated per sales representative. Once the commission amount is calculated, a purchase invoice can be created, the business partner of that purchase invoice is the sales representative defined for that commission.

Prior to use commissions, some configurations need to be done:

-   Create a sales representative. The way to do that is:
    -   first create an Etendo user, as the sales representative can be an Etendo user who logs in in Etendo and issues sales orders/invoices.
    -   then create a Business Partner. It is required to create a business partner because the sales representative could be someone who is going to issue an invoice in order to get the commissions paid.  If that is the case,  that business partner should be marked as "Vendor" in the Vendor tab and have a "PO Payment Method", a "PO Payment Term" and a "Purchase Pricelist" defined for it.  
        Besides, it is required to mark the Business Partner as "Sales Representative" in the Employee tab.
    -   and finally link them both. The way to do that is:
        -   to select the business partner just created in the field "Business Partner" of the user window. That field can be found under the section "*More Information*".
-   Create a product and get it part of a Price List without pricing information, in case a purchase invoice is required to be created in order to get the commissions invoiced.

The overall flow is:

-   Define the commission in the Commission window.
-   Create the Sales Orders and Sales Invoices linked to a sales representative.
-   Generate the commission in the Commission window for a given sales representative by using the process button "Generate Commission".
-   and then create an invoice if required by using the process button "Create Invoice". 

###### Header (within Commission) 

The user can define a sales commission to be used in the sales process.

Header lists main terms that will be used to calculate the commission:

-   Business partner / Sales representative: Used to create a purchase invoice or used to calculate the commission
-   Frequency: The process takes the orders/invoices that fits the corresponding period.
-   Invoice product: If an invoice is required, the new invoice will have this product
-   Basis Document: Whether the commission is calculated based on invoices or orders
-   Last Run Date: Last date when the process Generate Commission was performed
-   Basis Status: Whether the commission is calculated based on all documents or fully paid documents
-   Basis Amount: Whether the commission is calculated based on net amount or margin.
-   List details: See the result of the commission grouped or line by line. When the commission is calculated based on margin the list details is always checked
-   Cascade: Able to manage complex commissions (exclude some invoice/order lines, apply different multiplier quantity/amount for some invoice/order lines...). When this field is checked the result of the commission is grouped on line by line.

![Commission's header](https://docs.etendo.software/latest/assets/drive/11LiWjvIEjdQ143R2q6TUmJyJ2HRbtqpD.png)

There are two buttons:

-   Copy Lines: Allows to copy the configuration of other commissions
-   Generate Commission: Based on the header and lines, the commission is generated. For example, if Monthly frequency is defined and the starting date is 01/03/2012 only orders/invoices of March will be taken into account

###### Lines

The user can edit the selected commission amount.

Lines tab allows the user to define in deep the conditions of the commission:

-   Exclude: If the Cascade box is checked, marked order/invoices lines that satisfied the commission line conditions will not take into account to calculate the commission. This flag will only be visible when in the header Cascade flag is checked.
-   Based on Sales Rep.: If the flag is marked, only orders/invoices that have the same sales representative as in the header are taken into account to calculate the commission.
-   Business partner category: Only orders/invoices with business partners that belong to that category are taken into account to calculate the commission.
-   Business partner: Only orders/invoices with that business partner are taken into account to calculate the commission.
-   Product category: Only orders/invoices with products that belong to that category are taken into account to calculate the commission.
-   Product: Only orders/invoices with that product are taken into account to calculate the commission.
-   Subtract Quantity: The total quantity calculated based on the above criteria is subtracted by this quantity therefore from this number begins to calculate the commission.
-   Multiplier Quantity: Price multiplying the result of the above quantity.

Finally, the result of the commission will be the combination of these three lines.

![Commission's pop up](https://docs.etendo.software/latest/assets/drive/1GZ90ujr5lfIIci69XYa8q-tMA7nb76_f.png)

#### Channel

:material-menu: `Application` > `Sales Management` > `Setup` > `Channel`

In this section, the user can create specific sales channels to be used in sales operations and define a sales channel to be used in the sales process.

![Channel window](https://docs.etendo.software/latest/assets/drive/1BFtERRlthvXGBH9eadge2BdYwXJTqm4Z.png)

#### Sales Campaign

:material-menu: `Application` > `Sales Management` > `Setup` > `Sales Campaign`

In this section, the user can create specific sales campaigns to be used in sales operations and define a sales campaign to be used in the sales process.

![Sales campaign window](https://docs.etendo.software/latest/assets/drive/1SwdM8FP349N8HNZhQF546HuE6rIzvoak.png)


#### Reject Reason

:material-menu: `Application` > `Sales Management` > `Setup` > `Reject Reason`

In this window, the user defines the reasons to reject quotations. These values are used in the **Sales Quotation** window.

![Reject reason window](https://docs.etendo.software/latest/assets/drive/1zSNCUs2uojZGChPlX77p57T5i3J5vwaD.png)

---
This work is a derivative of [Sales Management](http://wiki.openbravo.com/wiki/Sales_Management) by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo), used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/). This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/) by [Etendo](https://etendo.software).
==ARTICLE_END==
==ARTICLE_START==
# Article Title: ✨ Getting Started
## Article Path: /User Guide/Etendo Classic/Basic Features/Financial Management/✨ Getting Started
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/getting-started
## Article Content: 

#### Overview

Etendo automatically generates an accounting representation of all the transactions within the enterprise that have an economic relevance.

Accounting is the system of tracking the assets, the debts, the income and the expenses of a business.
In Etendo, most of the accounting entries are automatically created while posting [documents](https://docs.etendo.software/latest/financial-management/accounting/setup.md#document-type). 

- [Goods Receipts](https://docs.etendo.software/latest/procurement-management/transactions.md#goods-receipts) and [Purchase Invoices](https://docs.etendo.software/latest/procurement-management/transactions.md#purchase-invoice) in the [Procurement Management](https://docs.etendo.software/latest/procurement-management/getting-started.md) business area
- [Goods Shipments](https://docs.etendo.software/latest/sales-management/transactions.md#goods-shipment) and [Sales Invoices](https://docs.etendo.software/latest/sales-management/transactions.md#sales-invoice) in the [Sales Management](https://docs.etendo.software/latest/sales-management/getting-started.md) business area.

Accounting entries not directly related to [documents](https://docs.etendo.software/latest/financial-management/accounting/setup.md#document-type) managed within a given application area can be created and posted in a [G/L Journal](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#gl-journal). For instance a provision for stock depreciation accounting entry.

There are three ways of accounting in Etendo:

- To manually post each document by using the process button *Post*.
The process button *Post* can be found in the window used to create a given document. For instance a purchase invoice is created and therefore could be posted in the [Purchase Invoice window](https://docs.etendo.software/latest/procurement-management/transactions.md#purchase-invoice). This button is shown for accounting users if the Attribute *ShowAcct* is visible for them. This configuration is enabled through a [Preference](https://docs.etendo.software/latest/general-setup/application.md#preference).

- To manually post all the documents/transactions related to a given database table for instance the table *Invoices*, by using the process [GL posting by DB Tables](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#gl-posting-by-db-tables)

- or to automatically post accounting transactions of any type by scheduling the *Accounting Server Process* in the [Process Request](https://docs.etendo.software/latest/general-setup/process-scheduling.md#process-request) window.

Accounting activities such as:

- creating and opening of the accounting periods
- entering and posting accounting transactions
- managing payables and receivables accounts as well as the asset depreciation
- reviewing and submitting financial and tax reports to the official authorities
- and closing the accounting year

are performed within the Financial Management application area.

Finally Etendo has an *integrated accounting system* that combines general accounting and analytical accounting:

- *General accounting* aims to primary exploit dimensions such as *Account* (or *Subaccount* in Etendo terms)
- *Analytical accounting* aims to exploit other dimensions such as *Cost Center* or *Campaign* to get a slightly different but also rich financial information.

In other words, Etendo allows to post transactions to the ledger which can include different dimensions:

- Those dimensions can be centrally maintained in the [Client](https://docs.etendo.software/latest/general-setup/client.md) therefore are available to all the organizations within that Client.
Moreover Organizations of that Client can also have additional dimensions configured separately in its [General Ledger Configuration](https://docs.etendo.software/latest/financial-management/accounting/setup.md##glconfig).

Those dimensions are then available just for that Organization.

- On the other hand, those dimensions can not be centrally maintained in the [Client](https://docs.etendo.software/latest/general-setup/client.md) but independently maintained in the [Organization's General Ledger Configuration](https://docs.etendo.software/latest/financial-management/accounting/setup.md#dimension).

This application area covers the [Period End Close to Financial Report](https://docs.etendo.software/latest/financial-management/getting-started.md#period-end-close-to-financial-report) business flow and the [Payables and Receivables Management](https://docs.etendo.software/latest/financial-management/getting-started.md#payables-and-receivables-management) business flow.

#### Payables and Receivables Management

<iframe width="560" height="315" src="https://www.youtube.com/embed/DmeLeQkg-cg?si=See53a-gprwcumPw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

Payables and Receivables Management addresses customer collections and supplier payments as well as other payments not related to invoices but to orders (prepayments) or G/L Items.

![payment-workflow.png](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/payment-workflow.png)

##### Configuration

The following setup needs to be done before performing the process:

- [Payables and Receivables Document Types](https://docs.etendo.software/latest/financial-management/accounting/setup.md#document-type).
- [Payment Methods](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#payment-method).
- [Financial Accounts](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#financial-account).
- [Business Partners](https://docs.etendo.software/latest/master-data-management/master-data.md#business-partner) to use above configured Payment Methods and Financial Accounts.

!!!note
    It is not required to perform any additional setup for the Payables and Receivables Management business process if Food & Beverage (F&B) sample client shipped with Etendo by default is going to be used to explore it. The sample data set already contains the roles, warehouses, business partners, products and prices pre-configured.

##### Execution

Overall the *Payables and Receivables Management* business process can be split into the following steps:

- the creation of the orders and invoices to be paid
- the creation of payments do not related to orders/invoices
- the review of the status of the pending payments
- the receipt of the payments made by the customers
- the payment of the supplier's invoices
- the recording of the financial account transactions
- and the reconciliation of the financial account transactions

###### Creation of the orders/invoices to be paid

In the [Procure to Pay](https://docs.etendo.software/latest/procurement-management/getting-started.md#procure-to-pay-business-flow) and [Order to Cash](https://docs.etendo.software/latest/procurement-management/getting-started.md#procure-to-pay-business-flow) business process we have seen how the orders and invoices have been generated.

Every time that a Purchase or Sales Order is booked or a Purchase or Sales Invoice is completed a Payment Plan is created for that Order / Invoice.

A payment plan contains the payment amount/s expected for the document and its fulfillment. At the same time the invoice  Payment Monitor section gets activated that allows tracking the invoice payment status directly from the invoice window.

!!!note
    The Payment Monitor section allows to track the purchase & sales invoice payment status directly from the invoice window. In this section it is possible to know whether an invoice is fully paid or not. If the invoice has not been fully paid then the Payment Monitor informs the user how much has been received, how much is pending, the due date of the next payment and the amount that is expected to be received on that date. The status is updated automatically when any payment action happens and by a background process. The date when the payment status was last time calculated is displayed in the form. Grid filtering allows to filter invoices based on fully paid or not criteria.

###### Creation of payments do not related to orders/invoices

In the [Period End Close to Financial Report](https://docs.etendo.software/latest/financial-management/getting-started.md#period-end-close-to-financial-report) business process we have seen how a payment can be made or received by using a [GL Journal](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#gl-journal) therefore it is not related to an order/invoice but to a G/L Item.

A G/L Item payment created in a G/L Journals implies:

- the creation of a [Payment Made](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#payment-out) if the payment information is entered in the *Credit* line of the G/L Journal.

The status of this payment would either be *Payment Made* or *Awaiting Execution* or *Withdrawn not Cleared* depending on the [configuration](https://docs.etendo.software/latest/financial-management/receivables-and-payables/setup.md#payment-method-configuration) of the payment method used and linked to the financial account where the money is taken from.

- Or the creation of a [Payment Received](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#payment-in) if the payment information is entered in the *Debit* line of the G/L Journal.

The status of this payment would either be *Payment Received* or *Awaiting Execution* or *Deposited not Cleared* depending on the [configuration](https://docs.etendo.software/latest/financial-management/receivables-and-payables/setup.md#payment-in-configuration) of the payment method used and linked to the financial account where the money is going to be deposited in.

###### Review of the status of the pending payments

On a periodic basis the Finance Staff reviews the status of the payments pending to be collected / to be paid by looking:

- At the [Payment Report](https://docs.etendo.software/latest/financial-management/receivables-and-payables/analysis-tools.md#payment-report) and filtering by the status Awaiting Payment which means that no payment has been either received or made against the order or invoice yet.

     Overdue check-box allows to narrow down the search and to show only overdue payments.
     Payment Type displays Receivables, Payables or both.

- In addition to this Sales and Purchase Invoice windows in grid view are available to search open invoices by setting Payment Complete field to No.

###### Receipt of the customer's payments

When a Payment is Received the Finance staff can register it in different ways:

- In the [Payment In](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#payment-in) window by selecting the Sales Invoices and/or Orders payment is received against.

!!!note
    Many businesses do not wish to extend credit to specific customers and may therefore have a payment term that requires payment against an order. In effect this is a prepayment of an invoice. Later when an invoice is created from an order that already has a payment received against it the invoice automatically inherits the payment received against the order.

- Using the [Add Payment button](https://docs.etendo.software/latest/sales-management/transactions.md#lines_5) directly within the corresponding Sales Invoice. It can be when the user has received a single payment for a particular invoice and prefers to browse for that invoice in order to allocate the payment to it.

- It is also possible to automate receiving of a payment on completion of a Sales Invoice through the configuration of the [Payment Method](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#payment-method).

If collection does not happen on time:

- The Expected Date of the [Payment Plan](https://docs.etendo.software/latest/sales-management/transactions.md#payment-plan_1) can be modified, preventing the debt from being overdue.

- The Amount due of the Payment Plan can be:
     split in two or more amounts due at a later expected date.
    or grouped in just one amount due at a later expected date.

- The outstanding balance for a customer can be totally or partially written off.


###### Payment of the supplier's invoices

There are 3 ways to pay vendor bills:

- Using the Payment Proposal process. This process supports the automatic payment of a large number of invoices based on the due dates of the lines of the Payment Plan associated with the open Purchase Invoices. The finance staff can request a proposal of all invoices to be paid based on a number of criteria, review that proposal, and then automatically make the payment.

- In the Payment Out window by selecting the Purchase Invoices and/or Orders payment is made against.

!!!note
    Many businesses do not have credit extended to them and may therefore be required to make a payment against a purchase order. In effect this is a prepayment of a purchase invoice. Later when an invoice is created from an order that already has a payment made against it the invoice automatically inherits the payment made against the order.
  
  

- Using the Add Payment button directly within the corresponding Purchase Invoice. It can be when the user needs to make a single payment for a particular invoice and prefers to browse for that invoice in order to allocate the payment to it.

- It is also possible to automate making of a payment on completion of a Purchase Invoice through the configuration of the Payment Method.

###### Recording of the financial account transactions

Finance Staff records Withdrawals and Deposits as transactions in the [Financial Account](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#financial-account) window by pressing the Add Transaction button and selecting either the received or made payments.
This step in the process can also be completely automated through the configuration of the [Payment Method](https://docs.etendo.software/latest/financial-management/receivables-and-payables/setup.md#payment-method-configuration) so that the payments are automatically withdrawn or deposited when they are completed.

###### Reconciliation of the financial account transactions

Finance Staff receives a bank statement (a paper or electronic bank statement) and reconciles the transactions in the Financial Account marked as Deposited / Withdrawn not Cleared with the actual transactions on the bank statement. This process can be done

- Manually (one by one reconciling the transactions in the Etendo Financial Account with the bank statement lines) by using the Reconcile button of the Financial Account window.

- Automatically by Importing Statement first and then Matching Statement using a matching algorithm.

Additionally, any transactions (receipts and payments) shown on the bank statement and not reflected in the Financial Account should also be entered into Etendo to get them reconciled.

Finally Finance Staff prints the Reconciliation reports (Reconciliation Details, Reconciliations Summary) that explain any difference in the end balance shown for the Financial Account in Etendo and the end balance shown on the bank statement.

#### Accounting
##### Period End Close to Financial Report

<iframe width="560" height="315" src="https://www.youtube.com/embed/8WAyKf16HmY?si=lHqZ4KLHM-9siwQ8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

*Period End Close to Financial Report* business flow manages the open and close of periods.

![periodendclose-tofinancialreport.png](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/periodendclose-tofinancial-report.png)

###### Configuration

This section details the basic and not that basic accounting configuration needed prior to the execution of the *Period End Close to Financial Report* business flow.

###### Basic Configuration

There are three Etendo accounting concepts which need to be explained before describing the basic accounting configuration:

- [Fiscal Calendar](https://docs.etendo.software/latest/financial-management/accounting/setup.md#fiscal-calendar)

A fiscal calendar in Etendo is the year and the periods, normally months, when financial transactions and journal entries are posted to the ledger.

- [Account Tree](https://docs.etendo.software/latest/financial-management/accounting/setup.md#account-tree)

An account tree is the way Etendo captures the *Chart of Accounts* (CoA) of an Organization.

The Chart of Accounts is a list of all the accounts used in an organization's general ledger.

Accounts such as balance sheet accounts (assets, liabilities and owner's equity) and income statement accounts (revenues, expenses, gains and losses).

!!!Note 
    It is important to remark that in Etendo , the financial reports such as the Balance Sheet and the Income Statement are produced based upon the Chart of Accounts structure.

- [General Ledger configuration](https://docs.etendo.software/latest/financial-management/accounting/setup.md#glconfig)

The general ledger configuration captures the accounting rules to use while posting the organization's financial transactions to the ledger. Accounting rules such as the *Currency* and the *Chart of Accounts* among others.

Having said that, the accounting configuration detailed in this section is the one required for *legal entities with accounting*, including the business units, because these organization types are the only ones which can have assigned:

- a Chart of Accounts
- a General Ledger configuration
- and a Fiscal Calendar

Obviously these organization types allow posting transactions to the ledger.
Rest of the Organization types behave as explained in the [Initial Organization Setup](https://docs.etendo.software/latest/general-setup/enterprise-model.md#initial-organization-setup) and in the [Organization](https://docs.etendo.software/latest/general-setup/enterprise-model.md#organization) section.

Very briefly:

- *Legal without accounting* organizations do not require accounting therefore do not require any basic nor advanced accounting configuration.
- *Generic* organizations however can have their own General Ledger configuration and Chart of Accounts but the accounting periods can not be opened and closed independently at its level.
This type of organization inherits the Fiscal Calendar of the *legal with accounting* organization they belong to.
- and finally *Organization* ones can have as well a general ledger configuration and a Chart of Accounts but with the aim of being shared among all the organizations underneath.
This organization type can not have a fiscal calendar assigned and besides the transactions within it are not allowed.

Additionally, some countries such as Spain or France require that a specific *Chart of Accounts* is used in the statutory books, therefore the authorities can see the same list of accounts and the same level of detail in the Income statement and in the Balance Sheet.

On the other hand, there are countries such as the USA where a specific *Chart of Accounts* is not required.

For those cases Etendo provides a Generic Chart of Accounts module which includes a sample Chart of Accounts which can be modified as required.
It is recommended to start from a sample chart of accounts like the generic one and evolve it for the organization's needs rather than starting from scratch.

In-country taxes setup is another key element of the basic accounting configuration.
There can be Localization Packs which include the setup of the taxes for the country while there can be others which do not include the setup of the taxes for the country.
The Generic CoA module does not include any taxes setup.


###### Execution 

Overall the Period End Close to Financial Report business flow can be split into the following steps once the accounting period has been opened:

- the opening of the accounting
- the review of the accounting transactions
- the creation of accounting transactions and G/L item payments
- the printing of the Trial Balance
- the adjustments required prior to the income calculation
- the adjustments require prior to the closing of the accounting year
- the printing of the preliminary Income Statement and Balance Sheet
- the closing of the accounting year
- and the printing of the final Income Statement and Balance Sheet

####### Opening of the accounting

This very first step implies to initialize the balance of the ledger accounts and the financial accounts or banks. The way to do that in Etendo is:

- The ledger accounts balance can be initialized by using a [G/L Journal](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#gl-journal) set as *Opening*, therefore that ledger entry is set as the *Opening Ledger Entry*.
A journal line can be created for each account and its opening balance, once done the G/L Journal will validate that the Total Debit of all the entries equals to the Total Credit.
- The financial accounts balance can be initialized in the [Financial Account](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#financial-account) window, in the *Initial Balance* field, therefore the corresponding financial account/s or banks need to be previously created.


####### Review of the accounting transactions

As already mentioned in Etendo most of the accounting entries are automatically created while posting documents such as a purchase invoice or a sales invoice.
For instance the accounting of a purchase invoice will take:

- the expense account setup for the product being purchased in the [Accounting](https://docs.etendo.software/latest/master-data-management/master-data.md#accounting) tab of the *Product* window
- the vendor liability account setup for the vendor in the [Vendor Accounting](https://docs.etendo.software/latest/master-data-management/master-data.md#vendor-accounting) tab of the *Business Partner* window
- and the tax credit account setup in the [Accounting](https://docs.etendo.software/latest/financial-management/accounting/setup.md#accounting_1) tab of the *Tax Rate* window.

Etendo allows reviewing and correcting if needed the accounting entries of transactional documents such as the invoices.
Same way Etendo allows unposting wrongly posted transactional documents one by one to get them corrected and properly posted once more.


Additionally, the [Accounting Transactions Details](https://docs.etendo.software/latest/financial-management/accounting/analysis-tools.md#accounting-transaction-details) report shows all the transactions posted in the ledger with all the details and the [Not Posted Transactions](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#not-posted-transaction-report) report shows the transactions which need to be accounted for but have not been accounted yet.

Finally Etendo allows to massively fix accounting errors if any, for instance a vendor liability account wrongly assigned to a vendor or to a set of vendors.
The way to do that is:

- run the [Reset Accounting](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#reset-accounting) process for the table being affected for instance the *C_Invoice* table (Purchase Invoice and Sales Invoice table).
- correct the accounting configuration
- get the transactions posted once again by using the [GL Posting by DB Tables](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#gl-posting-by-db-tables) feature.
This feature performs a massive posting of all the accounting or just the accounting of a table for instance the *C_Invoice* table (Purchase Invoice and Sales Invoice table).

####### Creation of accounting transactions and G/L item payments

As already mentioned, accounting entries not related to documents managed within a given application area can be created and posted to the ledger by using a [G/L Journal](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#gl-journal).
A G/L Journal can also be used to make and/or receive payments do not related to orders/invoices but to G/L items.
G/L items payments are also managed within the [Payables and Receivables management](https://docs.etendo.software/latest/financial-management/getting-started.md#payables-and-receivables-management) area.

####### Printing of the Trial Balance to check that Debit=Credit

The [Trial Balance](https://docs.etendo.software/latest/financial-management/accounting/analysis-tools.md#trial-balance) is a list indicating the balances of every single general ledger account at a given point in time.

The purpose of the trial balance is to check that debits are equal to credits. If debits do not equal credits that means that an erroneous journal entry must have been posted.

Etendo does not allow posting journal entries which do not balance. A G/L Journal can only be posted if Debit equals Credit, however there could be situations where while posting an invoice rounding differences drive that debit does not exactly equal credit. 

In these situations the difference is posted in a specific suspense account. [Suspense](https://docs.etendo.software/latest/financial-management/accounting/setup.md#general-accounts) accounts are configured in the General Ledger configuration.

####### Adjustments required prior to the income calculation

An organization's income statement shows the organization's financial performance over a period of time (usually one year) as the difference between:

- the organization's revenue
- and the organization's expenses

In order to get an accurate income calculation, there are some adjustments required to be done first:

- the organization needs to *review the revenues and the expenses* to be sure that the ones accounted within the period which are going to be closed are the ones which should be accounted regardless whether they are paid or not. This kind of adjustment is not required if the organization follows the accrual method of accounting that is Etendo method of accounting.
Under the accrual method of accounting, revenue is recorded as soon as services are provided or goods are delivered and therefore invoiced, regardless of when cash is received.
Similarly, expenses are recognized as soon as the company receives goods or services and therefore gets invoiced, regardless of when it actually pays for them.

- the organization needs to calculate the *Cost of Goods Sold* (CoGS). The CoGS is the amount that the company paid for the goods that it sold over the course of the period. This calculation depends on the method of keeping track of inventory. There are two primary methods, the perpetual method and the periodic method:

   the perpetual method is used by any business that keeps real-time information on inventory levels and that tracks inventory on an item-by-item basis.
   This method allows very accurate recordkeeping as to the Cost of Goods Sold which is the sum of the cost of all the items sold over the period.

   The periodic method is used by any business that counts inventory at regular intervals.
   When using this method Cost of Goods Sold is calculated using the following equation:
   (Beginning Inventory + Inventory purchases - Ending Inventory = Cost of Goods Sold)
   Besides if a business is dealing with changing per-unit inventory costs, a specific method of calculating the CoGS needs to be used, that could either be FIFO, LIFO or Average Cost.

Finally an income statement can separate *Operating Expenses* such as salaries and rent from *Non-Operating Expenses* such as a lawsuit.

Operating Expenses are the expenses related to the normal operation of the business and are likely to be incurred in future periods as well.

This way allows the calculation of the *Operating Income* as the difference between the *Gross Profit* and the *Total Operating Expenses*.

####### Adjustments required prior to the closing of the accounting year

Other adjustments required can be:

- Long term amounts must be reclassified to short term amounts. The long term amount reclassified to short term amount is the amount due in the next year.
This process is usually done for long term doubts for instance. In Etendo this kind of transaction can be manually created by using a [GL Journal](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#gl-journal).
- Taxes such as the VAT needs to be settled periodically.
It is important to remark that VAT accounts balance has to be equal to 0 in the last period of the year, as either the organization has to pay to the tax authorities or the other way around.
- Assets depreciation needs to be properly accounted within the period being closed as this adjustment will affect:

   the income statement as depreciation is an expense
   and the debit side of the balance sheet as assets will be decreased by the depreciation amount of the period.

####### The printing of the preliminary Income Statement and Balance Sheet

Once configured, Etendo allows getting and printing the Income Statement and the Balance Sheet whenever it is required as the structure of these reports is based on the chart of accounts tree.

It is very useful to print these financial reports prior to the closing of the year as it allows getting a sense of whether there are some missing adjustments required to be done prior to the closing of the year or not.

During the accounting cycle there are other reports which can also be printed:

- the [General Ledger Report](https://docs.etendo.software/latest/financial-management/accounting/analysis-tools.md#general-ledger-report) list all the debits entries and all the credits entries of every T-Account within a given period of time
- the [Journal Entries Report](https://docs.etendo.software/latest/financial-management/accounting/analysis-tools.md#journal-entries-report) lists in a chronological order every journal entry posted in the ledger.

####### The closing of the fiscal year

Etendo allows to perform below detailed checks prior to the closing of the fiscal year:

- Run the [Not Posted Transaction](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#not-posted-transaction-report) report to verify that there are no transactions and/or documents in status *Complete* not posted yet.
- Check that there are no documents still having a *Draft* status, specially those which require to be [accounted](https://docs.etendo.software/latest/financial-management/accounting/setup.md#active-tables).
- Unscheduled the [Accounting Server Process](https://docs.etendo.software/latest/general-setup/process-scheduling.md#process-request) therefore an stable scene can be assured.
- Check the [Financial Account/s](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#financial-account) current balance in Etendo and compare it with the information provided by the banks. It is possible to adjust financial account balance by using G/L Items or [how to transfer funds between financial accounts](https://docs.etendo.software/latest/how-to-guides/how-to-transfer-funds-between-financial-accounts.md).

Before running the close year process the accounting periods can be [closed](https://docs.etendo.software/latest/financial-management/accounting/setup.md#openclose-period-control) not to allow any further posting within those periods, but the *13th period*.
The *13th period* is an *adjustment period* which can be used to post the adjustments required to the ledger through [G/L Journals](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#gl-journal) prior to closing the year.

The *Close Year* process can be executed from the [End Year Close](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#end-year-close) window.

The end-year close process can be executed for *Legal with Accounting* organization types as that organization's type has a *Fiscal Calendar* and *General Ledger* configured.

There is a check-box in the [General Accounts](https://docs.etendo.software/latest/financial-management/accounting/setup.md#general-accounts) tab of the *General Ledger Configuration* window which shows how the end-year closing outcome is going to be for the organizations' General Ledger.
That check-box is named *Reverse Permanent Account Balances*. 

- If it is checked the closing of the year process includes an entry to reverse the balance sheet accounts besides the P&L closing entry.
- If it does not check the closing of the year process includes just the P&L closing entry.

Etendo uses the adjustment period (i.e. December 31st) for accounting the closing transactions if any, and the next period's first date (i.e. January 1st) for accounting the opening transactions if any.

!!!info
    For more information, visit the [End Year Close](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#end-year-close) window.



####### The printing of the final Income Statement and Balance Sheet

Once a year has been closed every financial report contains the corresponding closing and opening transactions:

- the [Balance Sheet](https://docs.etendo.software/latest/financial-management/accounting/analysis-tools.md#balance-sheet-and-pl-structure) will show the financial situation of the organization as of the end of the closed accounting period.
Etendo allows to get a two columns balance sheet:
          One column shows the balances as of the end of the most recent accounting period
          and the other column shows the balances as of the prior period end.

This balance allows seeing how the financial position of the organization has changed over time.

- the [Income Statement](https://docs.etendo.software/latest/financial-management/accounting/analysis-tools.md#balance-sheet-and-pl-structure) will show the organization performance over the year closed

And besides: 

- the [General ledger Journal](https://docs.etendo.software/latest/financial-management/accounting/analysis-tools.md#general-ledger-report) allows to show for a given accounting period below entries posted by the Close Year process:
    the opening balance entry
    the closing balance entry
    and the P&L closing entry


#### Assets 
##### Asset Acquisition to Dispose

<iframe width="560" height="315" src="https://www.youtube.com/embed/_PhqumhZr8U?si=KKUCdccNMHP6f0SV" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

Manages global assets life cycle from acquisition to disposition, including depreciation and other write-downs.

![asset-acq-disp-business-process.png](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/asset-acq-disp-business-process.png)



#### Relationship with other areas

Financial Management has a connection with other application areas, as there are documents or transactions in those areas which can be posted and therefore be part of a ledger journal to be finally managed within the Financial Management application area.

- [Procurement Management](https://docs.etendo.software/latest/procurement-management/getting-started.md) as Purchase Invoices are posted there and Goods Shipments as well as Supplier's Payments or Payments Out can be posted there.
- [Sales Management](https://docs.etendo.software/latest/sales-management/getting-started.md) as Sales Invoices are posted there and Goods Shipment as well as customers's Payments or Payments In can be posted there.
- [Warehouse Management](https://docs.etendo.software/latest/warehouse-management/getting-started.md) as Physical Inventory is posted there.
- Production Management as for the processing of the Work Effort raw materials are consumed and posted there at cost price as well as Products manufactured.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Transactions
## Article Path: /User Guide/Etendo Classic/Basic Features/Financial Management/Receivables and Payables/Transactions
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions
## Article Content: 
#### Overview

Financial Management functional documentation provides a detailed description of all windows of the Financial Management application area.

#### Purchase Invoice Payment Plan

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Transactions` > `Purchase Invoice Payment Plan`

##### Overview

The purchase invoice payment plan window displays all the purchase invoice payment plans which are not fully paid.

This window offers another possibility of managing the same information found in the Payment Plan tab of the Purchase Invoice window for a given invoice.

The advantage of this window is that it offers a more immediate view of all the purchase invoice payment plans which still have an outstanding amount to be paid.

###### Payment Plan

Purchase invoice payment plan information is shown grouped in two sections.

**Invoice** section shows the information detailed below:

- **Invoice**. There is a link to the Purchase Invoice.
- **Document No.**. This is the Document Number of the Invoice.
- **Business Partner**. This is the Business Partner against whom the Invoice is issued.
- **Invoice Date**. That is the Creation date of the Invoice.
- **Total Gross Amount**. This is the Total amount of the Invoice.
- **Outstanding Amount**. This is the Outstanding amount of this Payment Plan.
- **Currency**. That is the Currency of the Invoice.

**Payment Plan** section shows the information detailed below:

- **Payment Method**. This is the payment method of the purchase invoice.
- **Due Date**. This is the original "Due Date" agreed with the vendor. This date is used as the "Reference Date" in some Financial Reports.
- **Expected Date**. This is the Date when the payment is expected to be made. When the Payment Plan is created, this date is the same date as the "Due Date", but it can be changed afterwards.  
  This date reflects a revision of the original Payment Plan in which the "Due Date" has changed.  
  This date is used as the "Reference Date" in some Reports, such as the Payment Report.

!!! info
    This field is the only one that can be changed in this window. If changed, that change will be also reflected in the payment plan tab of the corresponding purchase invoice.

- **Days Overdue**. This is the number of days from the expected date until the current day.

#### Payment Out

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Transactions` > `Payment Out`

##### Overview

Supplier's payments and prepayments can be made and managed in the payment out window. G/L item payments not related to orders/invoices can also be managed in this window.

Payments can be made against different types of documents:

- Purchase Orders, in effect this is a _prepayment_.  
  Later on, when an invoice is created from the order that already has a payment received against it, the invoice automatically inherits the payment received against the order.
- Purchase Invoices, in effect this is a payment of a vendor invoice.  
  Payments prior to the accounting date of the invoice are also considered a _prepayment_.
- And G/L Items, in effect this is a payment of any other expense to a vendor, for instance a fine or other types of fee not included in an invoice.  
  This type of payments can be created in this window by adding the corresponding G/L Item as well as the "Paid Out" amount, or can be automatically populated as a GL item if created as a GL Item payment in a G/L Journal.  
  Regardless the way they are created, both cases are managed in the same way depending on the Payment Method used.

Payments can be created **to pay to** a **single vendor** or **to pay to** several **vendors** at the same time.

At the end of the process a "**Payment Out**" transaction will imply the creation of a "**Withdrawal**" transaction in the corresponding Financial Account.

The creation of the withdrawal transaction in the financial account can be done:

- manually by using the Add Transaction process of the financial account.
- or automatically, if the payment method used is configured to do so, that implies the selection of the checkbox "Automatic Withdrawal".

##### Header

The Payment Out window allows the user to make and manage supplier's payments done to settle different types of documents such as orders and invoices. This window also allows the user to manage the supplier's payments already made in the purchase invoice window, the same way as the G/L item payments made in a G/L Journal.

![](https://docs.etendo.software/latest/assets/drive/1Ie6b5QE33TRiAtdGr4PGVCtT5VvH0nD8.png)

There are just a few mandatory fields to fill in while making a payment in this window:

- the **Organization** which is paying
- the **Payment Number** which follows the corresponding document sequence.
- the **Payment Method** to use for making the payment. There is a check-box in the "Add Payment" window which later on allows to select documents linked to alternative payment methods
- and the **Financial Account** from where the money is going to be taken in the field "**Paying From**".

Other relevant fields to note are:

- **Paying To** field, that is, the vendor we are making a payment to, it does not need to be entered upon creating a new record.
  - If a vendor is not selected, it implies the creation of a payment to pay different documents of different vendors.
  - If a vendor is selected, it implies the creation of a payment to pay different documents of the same vendor. In this case, the value of the fields "Payment Method" and "Paying From" change if the vendor has assigned a specific payment method and financial account to be used while paying its bills.
- **Reference No.**, this field is used to reflect the number associated with the payment in the Vendor documentation system, if any.
- **Currency**. It is possible to select a different currency than the financial account currency while making a payment. In order to do this, the payment method used and assigned to the financial account of the payment needs to be configured to make payments in multiple currencies.

###### Add Payment Window

The **Add Details** button opens the **Add Payment** window, where outstanding documents to be paid can be selected.

![](https://docs.etendo.software/latest/assets/drive/1tsg4HMq519UXdo9UqGhV9-wOpqMPJRpy.png)

The **Add Payment** window is already explained in the Purchase Invoice payment article.

###### Payment of Several Document Types from Different Vendors

If no vendor has been selected in the field "Paying To", it is possible to pay different transaction types of different vendors by just selecting them.

!!! info
    Etendo allows the user to filter once more by a given business partner if it was not entered in the "Paying To" field by mistake.

The "Actual Payment Out" field will then show the sum up value of all the transactions being selected to be paid.

![](https://docs.etendo.software/latest/assets/drive/136-nlDAc31ndG9ibEJoUZk2oUgdZJNcS.png)

Once the payment is processed, the lines tab lists all the orders and invoices and even G/L items included in the payment, same as the "**Description**" field of the payment header.

###### Reactivating a payment

An already processed payment with status "Payment Made" or "Awaiting Execution" can be **Reactivated**. This option allows users to edit wrong payment data or to delete a wrongly created payment.

"Reactivate" button allows the user to do what is explained above as two different actions can be selected:

- **Reactivate**: This option reactivates the payment, keeping the payment lines.  
  Once the payment is reactivated, the user can easily modify the payment information by using the button "Add Details" and process it once again.
- **Reactivate and Delete lines**: This option reactivates the payment and removes all the payment lines.  
  This option is the one to use if the payment was wrongly created and therefore needs to be removed completely.  
  Once the payment is reactivated, the user can delete the payment header without the need of deleting the payment lines first.

An already processed and withdrawn payment with status "Withdrawn not Cleared" can be as well "**Reactivated**" as described above, but once the corresponding withdrawal transaction has been deleted from the financial account.

###### Posting a payment

A payment made and processed from the Payment Out window can be posted if the payment method used while creating the payment allows the user to do so once assigned to the financial account through which the payment is made. If that is not the case, Etendo shows a warning: "Document disabled for accounting".

A payment made posting looks like:

|                                                           |                |                |
| --------------------------------------------------------- | -------------- | -------------- |
| Account                                                   | Debit          | Credit         |
| Vendor Liability                                          | Payment amount |                |
| Upon Payment Use the "In Transit Payment OUT Account" i.e |                | Payment amount |

###### Voiding a payment

An already processed payment with status "Awaiting Execution" can be "**Voided**". The process button "Reactivate" allows the user to do that but only for payments in status "Awaiting Execution".

!!! info
    _Remember that a payment can get an awaiting execution status if the payment method used and assigned to the financial account is set up to have an automatic "Execution Type" and also the checkbox "Deferred" is selected._

Void action sets the payment line/s as "**Canceled**" which means that the document (order or invoice) is actually not paid therefore, a new payment can be created or added.

###### Credit payments

The field "**Generated Credit**" which can be found in the "Payment Out" header, allows the user to generate credit (or a credit payment in Etendo terms) for a business partner by just entering the credit amount in that field.

It is not possible to generate credit on a payment which is not related to a single vendor or creditor, therefore, the generated credit feature requires the user to select a business partner in the field "Paying To".

The creation of a credit payment requires not to select any document to pay in the **"Add Payment" window** which is shown after pressing the process button "**Add Details**", but to leave the credit amount to be used later.

![](https://docs.etendo.software/latest/assets/drive/1J2H_kxh0hRWO5fHEllfFKXZ1oTDQFqPn.png)

A credit payment is created after processing. This credit payment specifies the amount left as credit in the "Description" field of the credit payment header.

Later on, the available credit generated for that vendor can be used to pay the vendor:

- in the "**Add Payment**" window once a new Payment Out is created for that vendor by just selecting the credit in the section "Credit to Use".

![](https://docs.etendo.software/latest/assets/drive/18mZnJqpLFZa55nXSpoC-qSAFbS1TKg5l.png)

- or in the "**Select Credit Payments**" window which is **automatically shown** upon completion of a new vendor’s invoice.

!!! info
    In both cases, the "Description" field of the credit payment header will also specify the transactions/documents where the credit was used.

The Use Credit Source tab of the payment out window shows the credit payment used to pay a vendor's document (order, invoice or G/L item) payment.

###### Payments in multiple currencies

Etendo allows the user to make payments in a different currency than the financial account currency.

To use this option, the payment method assigned to the financial account used to make the payment needs to be configured to allow so, that implies to select the check-box "Make Payments in Multiple Currencies".

###### Prepayments exceeding the invoice amount to pay

Etendo allows to prepay by adding payments to the orders. The purchase invoice created from the order will inherit the payment done for the order.

When the actual prepaid amount exceeds the invoice amount to pay, the purchase invoice remains as **"Payment Complete" = "No"** until

- either a "negative" payment out is created to reflect that the supplier is paying back to the organization the difference, so final payment balance equals the purchase invoice amount
- or a credit payment is created to be later on used while paying another invoice to the same supplier.  
  This credit payment needs to be created as a new payment out related to the purchase prepaid invoice, that way the prepaid invoice is set as **"Payment Complete" = "Yes"**.

##### Lines

Lines tab contains a list of the documents to be paid or already paid by the payment.

###### Execution history

The execution history tab shows information about the history of the payment execution attempts.

For some payment types, some additional steps are needed. For example, a payment with a check that needs to be filled in with a check number.

In that case, the payment method linked to the payment needs to be configured to require an "Automatic" **Execution Type** process.

All of the above implies an additional step to take in the Payment Out window, which is to execute the payment by using the process button "**Execute Payment**".

This process button is only shown in case of payment/s linked to an automation execution process for which the check-box "**Deferred**" is selected.

If the checkbox "Deferred" is not selected, the additional step is still required, but it will be automatically executed without any end-user action.

The Execution History tab is a read-only tab which shows information about the execution of the payment such as the execution date, just once the payment has been executed.

![](https://docs.etendo.software/latest/assets/drive/1o3dY5UJs0fh3LC5ry7249VZ2DZGwE3BQ.png)

###### Exchange rates

The exchange rate tab allows the user to enter an exchange rate between the organization's general ledger currency and the currency of the payment made to be used while posting the payment to the ledger.

###### Used credit source

A credit payment can be used to settle more than one document payment. This table tracks the documents where a credit payment has been used.

The creation of a "Credit" payment is already explained in the Credit Payments section of this article, same as how a "Credit" payment or available credit can be used later on to pay a vendor.

This read-only tab shows the credit payment used to pay a vendor document (order, invoice or G/L item) payment.

![](https://docs.etendo.software/latest/assets/drive/1ZRyS-NTJD17sB_CAQbG9-XYa1-a0N3fq.png)

##### Payment Removal

The aim of this functionality is to delete and reactivate payments in an agile and easy way. Also, it allows eliminating and reactivating bank transactions and reconciliations.

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

From this window, it is possible to delete payments by selecting the corresponding record and then clicking on the Remove Payment button.
On the other hand, it is possible to reactivate payments from the same window with the "Advanced Reactivation" button. This functionality allows the user to reactivate the payment without deleting manually its associated transactions, which is necessary if using the core button "Reactivate". This will return the payment to “Awaiting Payment” status and new payment details can be added.

In both cases:

- If the payment is included in the financial account, i.e., if it is in Deposited/Withdrawn not cleared status, the transaction in it will also be deleted (Financial Account window > Transaction tab).

- If the payment is reconciled through an automatic method, then in addition to the transaction in the financial account, the line of the bank statement to which it was linked (Financial Account window > Imported Bank Statements) and the corresponding line of the bank reconciliation (Financial Account > Reconciliations) will be deleted.

!!! info
    If the payment is posted, the accounting entry will be deleted.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions/PRpic6.png)

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

##### Advanced Business Partner Settlement

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

  
From the **Payment Out** window, it is possible to create a settlement by clicking on the **Add Details** button.
In the pop-up window, Etendo shows a list of invoices to be settled each one with its corresponding invoice number, here the user is able to select the corresponding invoice or invoices to net. The **Actual Payment amount** to pay is set, then select the invoice/s to create a settlement and define the corresponding amount to be paid from the/each invoice.

![](https://docs.etendo.software/latest/assets/drive/1VXTbJvoG4le_x7dTVC9lqV3puMIqwh-N.png)

From the **Invoice From Compensation** tab, select the sales invoice/s that will be used to pay and set the needed amount from the invoice/s to be netted.

Below that, in the **Totals** tab, Etendo shows the total reference amounts to be netted.

![](https://docs.etendo.software/latest/assets/drive/1T-gLPqseFzIa5If1LX93VlhdYIaOz4-5.png)

After clicking the button Done, the system nets the invoices and credits for the corresponding business partner and creates a settlement record.

![](https://docs.etendo.software/latest/assets/drive/11XJzDLx3VkjhY3Q57pxpyrOGdvrRbXXz.png)

The settlement record is registered in the **Business Partner Settlement** window where the lines for the invoice/s (sales and purchase) used to net will be shown.

![](https://docs.etendo.software/latest/assets/drive/1LQMshrKSSifD2OpQ0Yjmfc3jPfxYQ2S3.png)

!!! info
    For more information, visit [the Business Partner Settlement module user guide](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#business-partner-settlement).
  
##### Advanced Bank Account Management

!!! info
    To be able to include this functionality, the Advanced Bank Account Management module of the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

This module includes the Bank account column to the Add details pop-up window to be able to filter possible payments by bank account.

!!! info
    For more information, visit the [Advanced Bank Account Management user guide](https://docs.etendo.software/latest/optional-features/bundles/financial-extensions/advanced-bank-account-management.md).

#### Payment Proposal

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Transactions` > `Payment Proposal`

##### Overview

The payment proposal is a tool that helps the user to make payments by selecting the documents related to a given payment method or scheduled to be paid before a given due date. The system proposes what should be paid based on the selection criteria provided by the user.

The steps to follow are:

- _Enter_ the selection criteria, that could be:
  - to enter a given business partner whose invoices we want to pay
  - to enter a given payment method, for instance "Wire Transfer" if we want to generate at once all the wire transfer of the month
  - or to enter a given date in the field "Incl.documents up to this date" if we want to pay all the invoices having a due date before that date
  - etc
- _Run_ the process "**Select Expected Payments**".  
  This process selects the scheduled payment events of the orders/invoices, that match the selection criteria entered and makes a payment proposal.
- _Select_ those documents (orders and/or invoices) of the proposal that the organizations wants to pay.
- _Submit_ the proposal.  
  This action populates the Lines tab of the payment proposal window.
- _Run_ the process "**Generate Payments**".  
  This process generates the payment or payments by having into account that:
  - a payment can group separate orders/invoices to be paid for the same vendor into one payment
  - or group separate orders/invoices to be paid regardless the vendor into one payment.

###### **Header**

The payment proposal window allows the user to enter a set of selection criteria that help the user to make payments massively.

![Payment Proposal Header](https://docs.etendo.software/latest/assets/drive/1DmluEWtuTWzy0oATmdcPRgODYgZlSz5Z.png)

The fields to note are:

- **Business Partner:** if a business partner is entered only the documents due to that business partner will be proposed.
- **Payment Method:** if a payment method is entered, only the documents having that payment method assigned will be proposed, however pending invoices or orders linked to different payment methods can also be selected by clearing the implicit filters applied (by clicking the funnel icon.).
- **Paying From:** it is possible to select the Financial Account which has the above payment method configured from where we need to extract money.
- **Currency**: it is possible to select a currency if the payment method selected is configured to allow making payments in multiple currencies. If that is the case, a field is shown which allows the user to enter the "Exchange Rate" between the document's currency and the financial account's currency.
- **Incl. documents up to this date:** This field allows the user to enter a date, therefore the documents of the proposal will have a due date on or before the given date.

The **Select Expected Payments** header button displays the documents that match the selection criteria entered above.

!!! info
    Notice that the data shown in the grid is filtered using the previous criteria (implicit filter). In order to see pending invoices or orders of a different Payment Method for instance, it is necessary to clear the filters by clicking the funnel icon.

![Select Expected Payments](https://docs.etendo.software/latest/assets/drive/1DmluEWtuTWzy0oATmdcPRgODYgZlSz5Z.png)

Besides, the "Select Expected Payments" window allows the user to:

- enter a "**Supplier Reference**", if any
- modify the "**Payment**" amount if the amount to pay is less than the outstanding amount
- and select the "**Write-off**" checkbox to write off the difference between the outstanding amount and the payment amount entered per each document/raw selected.

The "**Submit**" button finishes the process and gets that the selection is populated in the Lines tab.

Finally, the **Generate Payments** header button allows the user to take two actions:

- either to **group separate payments for the same vendor into one payment**,  
  this option allows the user to group pending orders/invoice of the same vendor to be paid in one payment transaction.
- or **group all orders/invoices into one payment**,  
  this option allows the user to group pending orders/invoice to be paid in one payment transaction, regardless the vendor.

Once executed:

- A system message displays the created payment's number/s.
- The payment summary information is reflected in the Status Bar of the Payment Proposal window.
- The Payment Out Plan and the Payment Monitor information of all the documents involved is updated.
- Finally, the Payment Status changes to _Awaiting Execution_ when an _Automatic_ Execution Type is defined or to _Payment Made_ if the execution is _Manual_. If there is an execution process defined, it can be run by clicking the Execute Payment button.

###### **Lines**

The lines tab shows the transactions (orders and/or invoices) included in the payment proposal.

![Payment Proposal Lines](https://docs.etendo.software/latest/assets/drive/1DmluEWtuTWzy0oATmdcPRgODYgZlSz5Z.png)

A payment proposal can be "**Reactivated**" that means that the payment/s created are deleted and therefore removed from the Payment Out window.

#### Sales Invoice Payment Plan

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Transactions` > `Sales Invoice Payment Plan`

##### Overview

The sales invoice payment plan window displays all the sales invoice payment plans which are not fully paid.

The window offers another possibility of managing the same information which can be found in the Payment Plan tab of the Sales Invoice window for a given invoice.

The advantage of this window is that it offers a more immediate view of all the sales invoice payment plans which still have an outstanding amount to be paid.

###### **Payment Plan**

Sales invoice payment plan information is shown grouped in two sections.

**Invoice** section shows information detailed below:

- **Invoice**. There is a link to the Sales Invoice
- **Document No.**. This is the Document Number of the Invoice.
- **Business Partner**. This is the Business Partner against whom the Invoice is issued.
- **Invoice Date**. That is the creation date of the Invoice.
- **Total Gross Amount**. This is the Total amount of the Invoice.
- **Outstanding Amount**. This is the Outstanding amount of this Payment Plan.
- **Currency**. That is the Currency of the Invoice.

**Payment Plan** section shows below detailed information:

- **Payment Method**. This is the payment method of the sales invoice.
- **Due Date**. This is the original "Due Date" agreed with the customer. This date is used as the "Reference Date" in some Financial Reports such as the \[\[Projects:Payment_Aging_Balance/User_Documentation|Receivables Aging Inquiry.
- **Expected Date**. This is the Date when the payment is expected to be collected. When the Payment Plan is created, it is the same date as the "Due Date", but it can be changed afterwards.  
  This date reflects a revision of the original Payment Plan in which the "Due Date" has changed.  
  This date is used as the "Reference Date” in some Reports, such as the Payment Report.  
  Moreover, this field is the only one which can be changed in this window. If changed, that change will be also reflected in the payment plan tab of the corresponding purchase invoice.

**Days Overdue**

This is the number of days from the expected date until the current day.

#### Payment In

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Transactions` > `Payment In`

##### Overview

Customer's payments and prepayments received can be recorded and managed in the Payment In window. Besides, G/L item payments not related to orders/invoices can also be managed in this window.

Customer's payments can be received against:

- Sales Orders, in effect this is a _prepayment_.  
  Later on, when an invoice is created from the order that already has a payment received against it, the invoice automatically inherits the payment received against the order.
- Sales Invoices, in effect this is an invoice payment received from a customer.  
  Payments prior to the accounting date of the invoice are also considered a _prepayment_.
- And a G/L Items, in effect this is a payment of any other revenue received from a customer, for instance a fine.  
  This type of payments can be created in this window when selecting the G/L Item "Transaction Type" or can be automatically populated as a payment in this window if created in a G/L Journal.  
  Regardless the way they are created, both cases are managed in the same way depending on the Payment Method used.

!!! info
    Etendo allows the user to register payments received from a single customer or to register payments received from several customers at the same time.

At the end of the process, a "Payment In" transaction will imply the creation of a "Deposit" transaction in the corresponding Financial Account.

The creation of the deposit transaction in the financial account can be done:

- manually by using the Add Transaction process of the financial account.
- or automatically if the payment method used is configured to do so, that implies the selection of the check-box "Automatic Deposit".

##### Header

The Payment In window allows the user to record and manage customer's payments received against different types of documents issued by the organization, such as orders and invoices. This window also allows the user to manage the customer's payments already recorded in the sales invoice window, in the same way as the G/L item payments received in a G/L Journal.

![](https://docs.etendo.software/latest/assets/drive/1fpeZSZHjXcKDr4wXaXJWREQHqKdD_B1c.png)

There are just a few mandatory fields to fill in while recording a payment in this window:

- the **Organization** which is receiving the payment
- the **Payment Number** which follows the corresponding document sequence
- the **Payment Method** used for receiving the payment. There is a check-box in the "Add Payment" window which later on allows the user to select documents linked to alternative payment methods
- and the **Financial Account** where the money is going to be deposited to.

Other relevant fields to note are:

- the **Amount** received. It does not need to be entered upon creating a new record.
- the **Received From** field shows the customer the user is receiving the payment from. It does not need to be entered upon creating a new record.
  - **If a customer is not selected,** it implies the creation of a payment which can collect the payment of different documents related to different customers.
  - **If a customer is selected,** it implies the creation of a payment which can collect the payment of different documents of the same customer. In this case, the value of the fields "Payment Method" and "Deposit To" change if the customer has assigned a specific payment method and financial account to be used while collecting its bills.
- **Reference No.**, this field is used to reflect the number printed on the payment justification document received from the customer.
- and the **Currency**. It is possible to select a different currency from the financial account currency while receiving a payment. In order to do so, the payment method used and assigned to the financial account of the payment needs to be configured to receive payments in multiple currencies.

###### Add payment window

The **Add Details** button opens the **Add Payment** window, where the documents being paid can be selected.

![](https://docs.etendo.software/latest/assets/drive/1xlIbwx_2b4aA_LHx9ud0-vHDkCSc-a36.png)

!!! info
    The "Add Payment" window is already explained in the [Sales Invoice Payment article](https://docs.etendo.software/latest/sales-management/transactions.md#payment).

###### Payment of several document types from different customers

If no customer has been selected in the field "Received From", it is possible to record the payment of different customers at the same time by just selecting the transactions to be paid.

!!! info
    Note that Etendo allows the user to filter once more by a given business partner if it was not entered in the "Received From" field by mistake. When this happens, payments must be done by executing them with the exact amount.

The **Actual Payment** amount entered is automatically spread among the pending debts (invoices or orders pending to be paid). It is possible to avoid this automatic distribution by setting the Preference _Add Payment: Automatically distribute amounts_ to 'N'

![](https://docs.etendo.software/latest/assets/drive/1mt_1DYKUPLmroqfwaT8dTs-QjPhH8wQp.png)

The user can check or uncheck the transactions as required, and can also modify the amounts shown in the "Amount" field.

It is important to note that:

- In this scenario, it is not possible to generate credit or refund a remaining amount to the customer because both actions need to be related to one single customer.  
  Therefore, if the amount paid and reflected in the actual payment field is higher than the sum of the invoice's grand total amount selected, an error message is shown saying that "There is an amount difference without any action selected".  
  In that case, either the actual payment amount needs to be decreased or another order/invoice to be paid needs to be selected.
- If the Actual Payment is less than the Expected Payment, the amount remaining can be left as:
  - an **underpayment**, that means registering a partial payment where the remaining debt will be paid afterwards by registering a new payment in
  - or can be **written off**, if that is selected, it means registering a partial payment where the remaining debt is not going to be paid, in this last case:
    - the customer's invoice is set as fully paid
    - the invoice posting to the ledger settles the total customer receivable amount
    - while the payment posting to ledger uses the account Write-off amounts to post the amount written-off.

###### Processing a payment

There are two options available while **processing** a payment received created in this window:

- Process Received Payment(s)
- or Process Received Payment(s) and deposit.

Both options above process the received payment in, but the second one also creates the corresponding "Deposit" transaction in the Financial Account used.

This last option is the only one shown if the payment method used and assigned to the financial account where the money is going to be deposited to is configured as "Automatic Deposit" = Yes.

Besides:

- A system message displays the created payment's number
- Payment summary information is reflected in the **Status Bar** of the **Payment In** window.
- The **Description** field is updated with paid Invoice and Order numbers and the amount left as credit
- Payment detail records are introduced in the **Lines** tab.
- This process also updates the **Payment In Plan** and **Payment Monitor** information of all the documents involved.
- The **Payment Status** changes to _Awaiting Execution_ when an _Automatic_ **Execution Type** is defined or to _Payment Received_ if the execution is _Manual_.  
  If there is an execution process defined, it can be run by clicking the "**Execute Payment**" button. The information will appear in the Execution History tab.

Note that there is no need to process:

- customer's payments received in the Sales Invoice window as those are already processed in there
- or G/L item's payments received in the G/L Journal window as those imply the automatic processing of the payment received.

###### Reactivating a payment

An already processed payment with status "Payment Received" or "Awaiting Execution" can be Reactivated. This option allows the user to edit wrong payment data or to delete a wrongly created payment.

"Reactivate" button allows the user to do what is explained above, as two different actions can be selected:

- **Reactivate**: This option reactivates the payment, keeping the payment lines.  
  Once the payment is reactivated this way, the user can easily modify the payment information by using the button "Add Details" and process it once again.
- **Reactivate and Delete lines**: This option reactivates the payment and removes all the payment lines.  
  This option is the one to use if the payment was wrongly created, therefore it has to be removed completely.  
  Once the payment is reactivated this way, the user can delete the payment header without the need of deleting the payment lines first.

An already processed and deposited payment with status "Deposited not Cleared" can be as well "Reactivated" as described above, but once the corresponding deposit transaction has been deleted from the financial account.

###### Posting a payment

A payment received and processed in the Payment In window can be posted if the payment method used while creating the payment allows the user to do so once assigned to the financial account through which the payment is received. If that is not the case, Etendo shows a warning : "Document disabled for accounting".

A payment received posting looks like:

|                                                           |                |                |
| --------------------------------------------------------- | -------------- | -------------- |
| Account                                                   | Debit          | Credit         |
| Upon Receipt Use the "In Transit Payment IN Account" i.e. | Payment amount |                |
| Customer Receivables                                      |                | Payment amount |

The posting will be different when the amount comes partially or totally from a debt classified as doubtful.

###### Voiding a payment

An already processed payment with status "Awaiting Execution" can be "**Voided**". The process button "Reactivate" allows the user to do that but only for payments in status "Awaiting Execution".

!!! info
    _Remember that a payment can get an awaiting execution status if the payment method used and assigned to the financial account is set up to have an automatic "Execution Type" and also the checkbox "Deferred" is selected._

Void action sets the payment line/s as "**Canceled**" which means that the document (order or invoice) is actually not paid therefore, a new payment can be created or added.

###### Credit payments

It is not possible to generate credit on a payment which is not related to a single customer, therefore generated credit feature requires:

- to select a business partner (or customer) in the field "**Received From**" of the **Payment In** window.
- and enter the amount to be left as credit in the field "**Amount**" of the **Payment In** window.

The creation of a credit payment requires not to select any document to pay in the "Add Payment" window which is shown after pressing the process button "Add Details", but to leave the amount to be used later.

![](https://docs.etendo.software/latest/assets/drive/1SK4SF6ntwYbSpP5JZMwZNObD5ceJ1I1q.png)

A credit payment is going to be available for the customer after processing a payment as above.

This credit payment specifies the generated credit amount in the "Description" field of the credit payment header.

Later on, the available credit generated for that customer can be used for further payments:

- in the "Add Payment" window, once a new payment is created for that customer in the payment in window by just selecting a line and setting the amount in **credit to use grid.**

![](https://docs.etendo.software/latest/assets/drive/15yfpM_16EYf7RNcNfI5IJTHrg8Xd-1lx.png)

- or in the "Select Credit Payments" window which is automatically shown upon completion of a new customer's invoice.

Then, the "Description" field of the credit payment header will also specify the transactions/documents where the credit was used.

The Use Credit Source tab of the payment in window shows the credit payment used to pay a customer's document (order, invoice or G/L item) payment.

###### Payments in multiple currencies

Etendo allows the user to receive payments in a different currency than the financial account currency.

In order to do so, the payment method assigned to the financial account used to receive the payment needs to be configured to allow so, that implies to select the check-box "Receive Payments in Multiple Currencies".

###### Prepayments exceeding the invoice amount to pay

Etendo allows the user to prepay by adding payments to the orders. The sales invoice created from the order will inherit the payment done for the order.

It can happen that the actual prepaid amount exceeds the invoice amount to pay, therefore the sales invoice remains as "Payment Complete" = "No" until

- either a "negative" payment in is created to reflect that the organization is paying back to the customer the difference, so final payment balance equals the sales invoice amount
- or a credit payment is created to be later on used while booking the payment of another sales invoice from the same customer.  
  This credit payment needs to be created as a new payment in for a 0.00 amount and related to the sales prepaid invoice, that way the prepaid invoice is set as "Payment Complete" = "Yes".

##### Lines

The lines tab contains a list of the documents paid by the payment.

###### Execution history

The execution history tab shows information about the history of the payment execution attempts.

For some payment types, some additional steps are needed. For example, a received payment with a check that needs to be filled in with the customer's check number.

In that case, the payment method linked to the payment needs to be configured to require an "Automatic" **Execution Type** process.

All of the above implies an additional step to take in the Payment In window, which is to execute the payment by using the process button "**Execute Payment**".

This process button is only shown in case of payment/s linked to an automation execution process for which the check-box "**Deferred**" is selected.

If the checkbox "Deferred" is not selected, the additional step is still required, but it will be automatically executed without any end-user action.

The Execution History tab is a read-only tab which shows information about the execution of the payment such as the execution date, obviously once the payment has been executed.

![](https://docs.etendo.software/latest/assets/drive/1iYYhQ7YfTWNOlhN5amCRAUoKV297gvq7.png)

###### Exchange rates

The exchange rate tab allows the user to enter an exchange rate between the organization's general ledger currency and the currency of the payment received to be used while posting the payment to the ledger.

###### Used credit source

A credit payment can be used to settle more than one document payment. This table tracks the documents where a credit payment has been used.

The creation of a "Credit" payment is already explained in the Credit Payments section of this article, same as how a "Credit" payment or available customer's credit will appear on future customer's payments.

This read-only tab shows the credit payment used to pay a customer's document (order, invoice or G/L item) payment.

![](https://docs.etendo.software/latest/assets/drive/1OazvwkBhV5J6jSKEJwYlyyK5PfyYrnQr.png)

##### Payment Removal

The aim of this functionality is to delete and reactivate payments in an agile and easy way. Also, it allows eliminating and reactivating bank transactions and reconciliations.

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

From this window, it is possible to delete payments by selecting the corresponding record and then clicking on the Remove Payment button.
On the other hand, it is possible to reactivate payments from the same window with the "Advanced Reactivation" button. This functionality allows the user to reactivate the payment without deleting manually its associated transactions, which is necessary if using the core button "Reactivate". This will return the payment to “Awaiting Payment” status and new payment details can be added.

In both cases:

- If the payment is included in the financial account, i.e., if it is in Deposited/Withdrawn not cleared status, the transaction in it will also be deleted (Financial account window > Transaction tab).

- If the payment is reconciled through an automatic method, then in addition to the transaction in the financial account, the line of the bank statement to which it was linked (Financial Account window > Imported Bank Statements) and the corresponding line of the bank reconciliation (Financial Account > Reconciliations) will be deleted.

!!! info
    If the payment is posted, the accounting entry will be deleted.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions/PRpic5.png)

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

##### Advanced Business Partner Settlement

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}.For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

From the **Payment In** window, it is possible to create a settlement by clicking on the **Add Details** button. In the pop-up window, Etendo shows a list of invoices to be settled each one with its corresponding invoice number, here the user is able to select the corresponding invoice or invoices to net. First, set the **Actual Payment amount** to be paid and then, select the invoice/s to create a settlement and define the corresponding amount to be paid from the/each invoice.

![](https://docs.etendo.software/latest/assets/drive/14Hd8Odyebc7szAzDDE-i6QimctGQGmAZ.png)

From the **Invoice From Compensation tab**, select the purchase invoice/s that will be used to pay and set the needed amount from the invoice/s to be netted.

Below that, in the **Totals** tab, Etendo shows the total reference amounts to be netted.

![](https://docs.etendo.software/latest/assets/drive/18JZjM6yNh6hBTBbFDk-130_eYzTmI2As.png)

After clicking the button Done, the system nets the invoices and credits for the corresponding business partner and creates a settlement record.

![](https://docs.etendo.software/latest/assets/drive/1f8SDqKDjiTO59I2Hxzlb3XosxMHDsQFQ.png)

The settlement record is registered in the **Business Partner Settlement** window where the lines for the invoice/s (sales and purchase) used to net will be shown.

![](https://docs.etendo.software/latest/assets/drive/1hLhHQMEICTtf2nc-QF6lrolaOOnwIabv.png)

!!! info
    For more information, visit [the Business Partner Settlement module user guide](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#business-partner-settlement).

##### Advanced Bank Account Management

!!! info
    To be able to include this functionality, the Advanced Bank Account Management module of the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

This module includes the Bank account column to the Add details pop-up window to be able to filter possible payments by bank account.

!!! info
    For more information, visit the [Advanced Bank Account Management user guide](https://docs.etendo.software/latest/optional-features/bundles/financial-extensions/advanced-bank-account-management.md).

#### Financial Account

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Transactions` > `Financial Account`

##### Overview

A Financial Account represents an account at a financial institution such as a bank account, a credit card issuer, an electronic payment service, as well as a cash or petty cash register.

Etendo allows the user to create as many Financial Accounts as required by the organization in the financial account window which therefore is used to record monetary transactions such as invoice payments, bank fees, credit card charges, etc.

Payment obligations and amounts due from customers are created in the Purchase and Sales invoice windows. Collections from customers and payments to suppliers for these invoices, however, are normally recorded in the Financial Account window or in the Payment In and Payment Out windows.

!!! warning
    It is very important to properly define every parameter of each Financial Account. During your Financial Account setup process, you will need information like: the bank account information, the payment methods allowed, the bank account currency/ies, the accounting information, etc.

###### **Account**

The financial account window contains essential information such as the bank account number and allows the user to perform a set of processes such as to add deposit or withdrawal transactions to the financial account or to import and match a bank statement file.

![Account](https://docs.etendo.software/latest/assets/drive/1G1flRQCPZ_77ab9ntPfNwRfU9TwaaJDf.png)

The **essential financial account information** to be filled in the top section of the financial account window is:

- The **Name** and a **Description** of the account.
- The **Currency** of the account.
- The account **Type:** There are two account types: **Bank** and **Cash**.  
  Depending on the type selected, the required information to enter changes. There is no need to fill in the bank account information if the account type selected is "Cash".  
  It is possible to define additional account types by extending the **List** _Financial Account Type_.
- Whether this is the **Default** account to be used in transactions or not. When invoices, orders and other documents including a Financial Account are created, this will be the one shown by default.
- The **Business Partner** associated to this bank account. For example, the Financial Institution holding the account. This information is used for accounting purposes. Location address related to the business partner is just visual information, loaded when the business partner is selected.
- The **Initial Balance:** In most cases, the business is already up and running at the time Etendo is implemented. This field allows the user to initialize the initial balance of each Financial Account by providing the real balance of the cash / bank account as it was on a date of the last reconciliation. Later on, this field value is used as a **Starting / Beginning Balance** in the first reconciliation of this Financial Account in Etendo. This field is only editable when creating the Financial Account.
- The **Current Balance:** is the balance of the Financial Account as per Etendo records. It is calculated as the sum of the **Initial Balance** and every Financial Account transaction. This field is placed in the Status Bar.
- The **Matching Algorithm** to be used during the reconciliation process.
  - If **no matching algorithm** is selected in that field, it is not possible to import and then match a bank statement file but to Reconcile the account transactions.
  - If a matching algorithm such as the **Standard** matching algorithm is selected that allows the user to use the Import Statement process. This process allows the user to import data from a file to the Imported Bank Statements tab, and then use the Match Statement process to match the account transactions with the imported bank statement lines. This matching algorithm supports "G/L item transactions" recognition.
  - There is another algorithm delivered as a module named Advanced Matching Algorithm. This module allows Imported Bank Statement lines to be matched not only with the existing financial account transactions but also with payments, invoices or orders. If no transaction document of that type is found, it registers a credit payment for the Business Partners to be used later on. This matching algorithm supports the automatic creation of payments and financial account transactions (deposits and withdrawals), including the creation of "G/L item transactions".
- The **Funds Transfer Enabled** is used to enable/show funds transfer button process. By default, every financial account is set as enabled.

The next section **Bank Account** is visible only for accounts of the type **Bank** and are used to specify the bank account number. This section includes information such as:

- The **Generic Account No** - a generic account number to identify the bank account can be introduced here. This field must be mandatory set in case either the _Use Generic Accoun No._ or _Use SWIFT + Generic Account No._ is selected at the "**Bank Account Format**" field.
- The **IBAN** - The International Bank Account Number (IBAN) is an international standard for numbering bank accounts.  
  The IBAN consists of a two letter ISO 3166-1 country code, followed by two check digits, and up to thirty alphanumeric characters for the domestic bank account number, called the BBAN (Basic Bank Account Number). This field must be mandatory set in case the _Use IBAN_ option is selected at the "**Bank Account Format**" field. The IBAN code will be automatically validated when inserting/updating the record, taking into account the rules for the country bank defined.
- The **SWIFT Code** - Corresponds to the ISO 9362 international bank code identifier. It must be mandatory set in case the _Use SWIFT + Generic Account No._ option is selected at the "**Bank Account Format**" field.
- **Country** - you can select a country from the list to specify if the bank account is a domestic bank account or a foreign bank account.
- **Bank Account Format** - List that contains all the possible values for generating the Displayed Account Number, which will be later on used by other reports or processes to get the account identifier. Possible values are:
  - _Use Generic Account No._
  - _Use IBAN_
  - or _Use SWIFT + Generic Account No._

!!! info
    _Note that other options can be added by other modules that extend the supported Bank Account Format_.

**More information** section can include information such as:

- The **Type Write-off Limit** field, which allows the user to define different type of write-off limits for a financial account.   
  This field is displayed when the "Write-off limit" property value is set to "Y" in the Preference window.
  - The only option currently available is "Amount"
- And the **Write-off Limit** Value for the Write-off limit in a payment. When the type selected is Amount, the value holds the amount on financial account currency.  
  This field is displayed when the "Write-off limit" property value is set to "Y" in the Preference window.

Let's take for instance the setup of a "Write-off Limit" amount of 1,00 $ for a given financial account.

While registering a customer's payment in the Add Payment window, the system will not allow the user to write off an amount above the write-off limit amount defined.

The same applies to supplier's payments created by using the Add Payment window or the Payment Proposal feature.

The financial account window allows the user to perform the actions listed below:

####### **Transaction Tab**

The transactions of a financial account can be of two types:

- **Deposit** transactions in the case of receiving whatever document type (invoice, order, G/L item or fee) payment in
- or **Withdrawal** transactions in the case of making a payment out of whatever document type (invoice, order, G/L item or fee)

Those two transaction types can be created in three ways:

- **automatically**, if the payment method used to pay a document (and assigned to a given financial account) is configured to get that:
  - the supplier's payments once processed in the Payment Out window are automatically withdrawn from the financial account
  - the customer's payments once processed in the Payment In window are automatically deposited in the financial account.
  - or the "G/L Item Payments" once created in a G/L Journal are automatically either deposited to/withdrawn from the financial account.
- **in a batch**, by adding several payments as transactions through the Add Multiple Payments process window

or **manually**, by creating a new record in the transaction tab of the financial account window.

![Transaction tab](https://docs.etendo.software/latest/assets/drive/1zirkJ20dd1aVDIxtvwQeYybbNxP_tXiI.png)

- Fields to note in transaction tab:
  - **Transaction Type:** The Transaction Type indicates the type of transaction to be submitted. The transaction tab also allows the user to create a "Deposit" or a "Withdrawal" transactions based on a "G/L Item" transaction type or on a "Payment".
    - Bank fee
    - BP Deposit
    - BP Withdrawal
  - **Transaction Date:** The Transaction Date field defines the date of the transaction being processed.
  - **Accounting Date:** The date this transaction is recorded for in the general ledger.
  - **Payment:** Payment selector
  - **G/L Item:** General ledger item selector
  - **Currency:** Indicates the currency to be used when processing this document
  - **Deposit Amount:** amount in the case of receiving a payment
  - **Withdrawal Amount:** amount in the case of make a payment
  - **Accounting Dimensions**

If creating a "Bank Fee" is necessary, select "Bank Fee" in "Transaction Type" combo, enter a transaction and accounting date and the amount either received in or paid out.

Then save and process the transaction.

![Bank fee](https://docs.etendo.software/latest/assets/drive/1hhSs7pd6WDlXjs26eC2SDsJ8vfo5kh7r.png)

To create a new G/L item transaction, select "BP Deposit" or "BP Withdrawal" in transaction type and select the "**G/L Item**" in the G/L item combo, enter a transaction and accounting date, select a G/L Item, enter the amount either **received in** or **paid out** and save and process the transaction.

![GL Item](https://docs.etendo.software/latest/assets/drive/1C72EAORDre8_Eh44Fv-dwNc_bOlO209D.png)

If the user needs to create a new payment transaction, it is allowed to select a created payment or create a new payment from the payment selector.

- If the payment is created, the user should choose the payment in the payment selector.

![Payment selector](https://docs.etendo.software/latest/assets/drive/1kLQZA0e7fHQtD4ZBSby4h-glL5R4DOAH.png)

Description and amount fields in the transaction tab will be automatically filled and to complete the transaction it is necessary to save and process.

If creating a payment deposit transaction is necessary, the user should click '+' button' in the payment selector and an add payment popup will be opened. "**Received In**" needs to be selected in the field "Document".  
This window allows to:

- select already created and processed payments
  - use the field "Received From" to narrow down the searching of documents to pay
- use the business partner's "Available Credit" if any, selecting the credit in credit grid
- enter the "Actual Payment" amount received
- enter a "Payment Date"
- select the "Transaction Type" to pay
- use some other filters such as the Order or Invoice "Document No." or the "Amount From/To"
- and finally to enter a "G/L Item Payment" if needed, by adding "GL Items" in a GL item grid.  
  Last step is to process the just created payment and get it deposited in the financial account.

![Payment deposit transaction](https://docs.etendo.software/latest/assets/drive/1j47oaWj1O4_LLGPha7guEuKBccB3Rn0h.png)

If creating a **payment withdrawal transaction** is necessary, the user should click '+' button' in the payment selector and an add payment popup will be opened. In the add payment popup, the option "**Paid Out**" needs to be selected in the field "Document". This window allows the user to:

- select already created and processed payments
- use the field "To Be Paid To" in order to narrow down the searching of documents to pay
- use the business partner's "Available Credit" if any, selecting the credit in credit grid
- enter a "Payment Date"
- select the "Transaction Type" to pay
- use some other filters such as the Order or Invoice "Document No." or the "Amount From/To"
- and finally to enter a "G/L Item Payment" if needed, by adding "GL Items" in a GL item grid.  
  Last step is to process the just created payment and get it deposited in the financial account.

![Payment withdrawal](https://docs.etendo.software/latest/assets/drive/1DbaEJtPopUAIr5_S_L8g3mVOk3TQlqOT.png)

Payment selector has applied an explicit filter (current financial account)

![Payment filtered](https://docs.etendo.software/latest/assets/drive/1DWBNx-RWSxny0gHyXIU2D-0cuKyKY5iA.png)

It is possible to add payments for alternative financial accounts by clicking the funnel icon to clear the filters.

![Payment without filter](https://docs.etendo.software/latest/assets/drive/1dtzHFshO4AwVVl5S6FPHiHp9YqHgs4Hy.png)

####### **Add Multiple Payments**

The "Add Multiple Payments" process button allows the user to create and process financial account transactions by selecting several payments at the same time.

The payments shown for selection are the ones having a payment status equal to "Payment Made" or "Payment Received", therefore payments having an "Awaiting Execution" payment status for instance will not be shown for selection.

By default, the payments shown are the ones originally defined for this financial account. However, the user can remove this filter to show and select payments from other financial accounts.

![Add multiple payments](https://docs.etendo.software/latest/assets/drive/1WDuGJ8r3aCcAzVGC1bFj1pc87CkaEJxG.png)

Only actions to take are entering a "Transaction Date" and selecting as many payments as required at once.

Payments selected are then listed as either:

- "**BP Deposit**" transactions, in the case of "Payments Received"
- or "**BP Withdrawal**" transactions, in the case of "Payments Made"

in the "Transaction" tab of the Financial Account.

All those new transactions are created as already "processed", therefore can either be "reactivated" if required or finally "post" to the ledger if applicable.

####### **Reconcile**

The header process button "**Reconcile**" is shown for those financial accounts which do not have a matching algorithm assigned.

That button opens the "Reconciliation" window.

The reconciliation window has three main parts:

- the top section which includes overall information such as the financial account being reconciled, the date of the statement to reconcile, the beginning balance (or financial account "Initial Balance") and the ending balance as a result of the reconciliation. The ending balance is the last reconciliation balance of the financial account.
- the middle section which includes a list of the transactions pending to be reconciled, therefore marked as "Cleared" "No" in the financial account, transaction tab.
- and the bottom section which includes overall balance information as well as three process buttons "Save", "Reconcile" and "Cancel".

The "Beginning Balance" + the amounts "Received In" - the amounts "Paid Out" need to be equal to the "Ending Balance".

You can either enter the ending balance or what the statement says and then select the transactions paid out/received in or the other way around.

!!! info
    It is possible to create a "G/L item" transaction in case there are some minor differences between what the statements say and the recorded transactions pending to be reconciled.

![Reconciliation window](https://docs.etendo.software/latest/assets/drive/1N1L6_XETrXBZnbUB3YwVD_RJvVmd0G6V.png)

The "**Save**" process button saves a "**Draft**" of the reconciliation in the Reconciliations tab of the financial account and marks the transaction/s selected as "Cleared" as also "Cleared" in the financial account, transaction tab.

It is always possible to reopen a saved reconciliation and modify whatever it is needed.

!!! info
    Note that there can only be one reconciliation in draft status in a financial account.

The "**Reconcile**" process button reconciles the transactions marked as cleared, therefore the reconciliation is processed and its status changes to "Completed".

Finally, the "**Cancel**" process button just closes the reconciliation window and removes the ending balance entered, if any.

####### **Import Statement**

The header process button **Import Statement** is shown for those financial accounts which have a matching algorithm assigned. This process button allows the user to import a bank statement which therefore is saved in the Imported Bank Statements tab of the financial account, and in the Bank Statement Lines sub-tab.

!!! info
    Etendo currently delivers the **Standard** matching algorithm. The behavior of the standard matching algorithm is explained in the next section "Match Statement".

!!! info
    Etendo allows the user to import a bank statement if an Import Bank File Format module has been previously installed. 


Etendo currently delivers below listed import bank file modules:

- OFX Bank Statement Format
- CSV Generic Bank Statement Importer
- WePay CSV Importer
- and the Spanish one Cuaderno 43

Depending on the module installed for this purpose, it will be possible to import bank statement files in OFX format or CSV format among others.

The "Import Statement" process button opens the "Import Bank File" window.

![Import Statement](https://docs.etendo.software/latest/assets/drive/127lBLYWqTXTFWRW2bCr3BJ3M3RasGZ5W.png)


This window allows to:

- select a **bank statement file**
- and select the **file format** of the selected bank statement file to import.

####### **Get Bank Statement**

!!!info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes/).

Instead of manually import the bank statements, Etendo allows you to synchronize the bank accounts with the financial accounts in order to **automatically download bank statements**. 

This functionality facilitates a **faster and safer integration** between the financial accounts' and bank statements' information to accelerate the process of generating bank statements. 

!!! info
    For more information about bank integration to automatically import bank statements visit [Bank Integration PSD2](https://docs.etendo.software/latest/optional-features/bundles/financial-extensions/psd2-bank-integration.md).

####### **Match Statement**

Once a bank statement file has been imported, the button "Match Statement" opens a new window where the imported bank statement lines and the existing financial transactions are displayed. By default, there is an implicit filter which hides the bank statement lines that are already matched.

![Match Statement](https://docs.etendo.software/latest/assets/drive/1TBIUGHObHsHlBtGTmHZE_HHg3mK8PtuK.png)

Before opening the window, a pop up is shown, asking whether the algorithm should run against unmatched bank statement lines or not. If so, the algorithm will try to find a match for all the unmatched bank statement lines. If not, the matching window will open and the user should do the matches manually.

![Example 2](https://docs.etendo.software/latest/assets/drive/1GimSn37f-WQGok4aqb0NWFwDg4Xri2ZM.png)

This window has two column groups divided by the Match column.

- **Imported Bank Statement Lines** on the left side. This section list the bank statement deposits and the payments
  - **Date:** that is the date of the movement made in the bank account.
  - **Business Partner:** that is the business partner reported into the bank statement line.
  - **Reference No.:** that is the reference of the bank statement, if any.
  - **Amount:** that is the amount reported into the bank statement line, subtracting the Amount OUT from the Amount IN
- **Transaction in Etendo** on the right side. This section lists the financial account transactions which match the bank statement lines:
  - **Match:** it provides 3 buttons to operate with the bank statement lines (explained later on). Besides, the column can be used to filter by the matching status (Yes to show cleared lines, No to show not cleared lines).
  - **Affinity:** when the matching is automatically done by the Matching Algorithm, this field shows the affinity level of the match. If the user manually associates a transaction, this field is empty. The affinity is higher when the matching criteria are the same in both, the financial account transaction and the bank statement line.
  - **Matching Type:** the type of matching
  - **Transaction Date:** that is the date when the transaction was created in the financial account.
  - **Transaction Business Partner:** that is the business partner of the transaction.
  - **Transaction Amount:** that is the amount of the transaction, subtraction the Withdrawal Amount from the Deposit Amount

As already mentioned, the matching algorithm available is the "Standard matching algorithm".

The Standard matching algorithm can be configured to match by different set of criteria:

- **Match BP Name:** This option makes the matching strong if the business partner name of the bank statement line and the business partner of the transaction matches.
- **Match Transaction Date:** This option makes the matching strong if the transaction date of the bank statement line and date of the transaction matches.
- **Match Reference:** This option makes the matching strong if the reference of the bank statement line and the reference of the transaction matches.

All the criteria above can be selected, or just some of them.

!!! info
    Not matched transactions can be matched manually. 

Let us take for instance the starting situation shown below where there are three bank statement lines which do not match:

![Example 3](https://docs.etendo.software/latest/assets/drive/1K31lmmG2WiS1k6bunMTXgghMHLw9Chw3.png)

- the "magnifying glass" icon helps to search transactions to match as it opens a new window which shows the financial account transactions registered the same day as the bank statement line or before. Several transactions can be selected at the same time to match with a single bank statement line. In that case, the system automatically splits the original bank statement line as many times as transactions are selected.

![Example 4](https://docs.etendo.software/latest/assets/drive/1OL1GtOSH905zxVc9UjliNCM3UztnFK84.png)

Back to our example, there is no transaction which matches the second transaction of the bank statement file (the one with an amount equal to 1.500,00). If there was a match, it could be selected by using as well the "magnifying glass" icon.

- the "+" icon helps to add transactions to the financial account (and even create a payment to deposit or withdraw from the financial account) as it opens the "Add Transaction" window.

![Example 5](https://docs.etendo.software/latest/assets/drive/1MhRo1pZgSopD5v9S3avUHPR5HUWW_XdZ.png)

The image above shows that there was a "Received In" transaction pending to be created in the financial account. Once created it is matched.

Back to our example the current situation is shown in the image below:

![Example 6](https://docs.etendo.software/latest/assets/drive/1YjafVYkcIa5yMvLoNCt5jBMZbdyqUsFo.png)

There is only one transaction pending to be matched. The "magnifying glass" icon helps again to search for transactions to match.

If a transaction that almost matches is selected, Etendo shows a message which informs that the transactions do not fully match therefore a partial match can be performed. The user can set the 'Match Statement: hide partial match confirmation popup' to Y for the Financial Account window to hide this confirmation message in the future.

!!! info
    This last option will require to log out and log in.

![Example 7](https://docs.etendo.software/latest/assets/drive/1U0DAE2Ad9SLeZF4HRRf6o_PkA8FPIk-w.png)

This action matches the bank statement line and creates a new line pending to be matched for the difference.

- the ICON "unmatch" icon unmatches the transaction linked to the individual record. The user can also select multiple records and unmatch all of them in a batch using the **Unmatch Selected** button.

The user is able to force both reactivating and processing reconciliations in case some mistake was made, to permit reactivating old reconciliations to be able to correct that data.

This should not be the standard procedure, as there should be an exercise of reviewing data before validating/processing a reconciliation. In any case, errors happen and to be able to solve the situation without a big impact for the user, there are now these two buttons as advanced features.

!!! info
    This process will impact starting and ending balance of subsequent documents whenever ending balance changes for the reconciliation being edited.

####### **Funds transfer**

_Input fields:_

- **Transaction date**:
  - It is mandatory
  - This date is used for the records that this process creates. Transaction and accounting date
- **Deposit to**: This combo box is displayed with all the financial accounts that belong to the organization tree of the financial account that is selected and that have the Funds Transfer flag enabled
- **G/L item**: Default value is set from **Default G/L Item for Funds Transfer** configured in Financial Account's organization or its parent organization. The user can overwrite this parameter. This combo box is displayed with all the G/L Items that belong to the org tree of the financial account that is selected.
- **Deposit amount**: Mandatory
- **Currency from**: Not editable. Currency of the financial account selected
- **Currency to**: Not editable. Currency of the financial account to
- **Rate**: The conversion rate from one currency to other
  - It is null by default
  - It is shown just when currencies are different
  - In case the user leaves this value as null the system uses the conversion rate configured in the system for that date. If there is nothing defined then an error is raised
- **Bank fee**:
  - Not marked by default
  - When being checked two more fields are shown
    - Bank fee from and Bank free to
- **Description**:
  - Description is set as "Funds Transfer Transaction" by default. The user can overwrite the description if needed.

![Funds transfer](https://docs.etendo.software/latest/assets/drive/12Q4Emkj5LA4t5Y7f16uy0IJWRKlJvkIo.png)

_Process:_

Being in the account tab and selecting the corresponding financial account:

- It creates a new record in the transaction tab for that financial account:
  - **Transaction type**: BP Withdrawal
  - **Transaction date**: The one selected in the popup
  - **Accounting date**: The one selected in the popup
  - **G/L items**: The one selected in the button
  - **Description**: G/L Item: the one selected in the popup
  - **Currency**: The one of the financial account
  - **Withdrawal Amount**: The amount entered in the button
  - **Processed**: Y
  - **Organization**: the same as the financial account
  - **Status**: Withdrawn not cleared
- If _Bank fee_ _from_ is filled, it will create another record in the transaction tab for that financial account:
  - **Transaction type**: Bank fee
  - **Transaction date**: the one selected in the popup
  - **Accounting date**: the one selected in the popup
  - **Currency**: The one of the financial account
  - **Withdrawal Amount**: The amount entered (Bank fee from)
  - **Processed**: Y
  - **Organization**: the same as the financial account
  - **Status**: Withdrawn not cleared
- It creates a new record in the transaction tab for the **deposit to** financial account
  - **Transaction type**: BP Deposit To
  - **Transaction date**: The one selected in the button
  - **Accounting date**: The one selected in the button
  - **G/L Items**: The one selected in the button
  - **Description**: G/L Item: the one selected in the button
  - **Currency**: the one of the financial account
  - **Deposit Amount**: The amount entered in the button
  - **Processed**: Y
  - **Organization**: The same as the financial account
  - **Status**:Deposit not cleared
  - **Origin financial account**: Point to the transaction created for the Financial Account selected to open the button
- If _Bank fee to_ is filled, it creates another record in the transaction tab for that financial account
  - **Transaction type**: Bank fee
  - **Transaction date**: The one selected
  - **Accounting date**: The one selected
  - **Currency**: The one of the financial account
  - **Withdrawal amount**: Bank fee to
  - **Processed**:Y
  - **Organization**: the same as the financial account
  - **Status**: Withdrawn not cleared
  - **Origin financial account**: It points to the financial transaction that triggered the transaction

###### **Transaction**

This tab shows all the transactions of the financial account.

As already explained, those transactions can either be:

- "**Deposits**" coming from payments received in
- or "**Withdrawals**" as a consequence of the payments made out

The transactions shown in this tab can be:

- manually created by adding a new record in this tab
- created & processed as a batch by selecting several payments at the same time through the Add Multiple Payments process window
- or automatically created whenever the actions listed below are taken while processing a payment in/out, either in the sales/purchase invoice windows or in the payment in/out windows.
  - **Process Made Payment(s) and Withdrawal**
  - **Process Received Payment(s) and Deposit**

Some fields to note are:

- **G/L item** - this field/column is populated if the payment is related to a G/L item payment
- **Foreign Amount** - this field/column is populated if the payment was received or made in a currency different from the financial account currency.

!!! info
    It is possible to allow the user **either to receive or make payments in multiple currencies** (foreign currency), while configuring the payment methods assigned to a given financial account.

###### **Exchange rates**

This tab allows the user to define an exchange rate to use while posting the financial account transaction to the ledger whenever the currency of the financial account is not the same as the general ledger currency.

###### **Accounting History**

This tab shows the accounting history of a given transaction.

![Accounting history](https://docs.etendo.software/latest/assets/drive/1Bjg-OJiKl8bBeYN36lxwYnIUgtl1dbP3.png)

As shown in the image above, this tab shows the general ledger entries created while posting/unposting a given transaction to the ledger.

###### **Accounting Configuration**

The accounting configuration tab is used to define the accounts of a General Ledger to use while posting transactions such as a bank fee or a deposit.

![Accounting configuration](https://docs.etendo.software/latest/assets/drive/1CYADTe8Ks-V7eoJVPSmVP8-8Ighure6S.png)

As shown in the image above, the accounts listed below can be configured for a financial account and general ledger.

**General** section:

- **Bank Revaluation Gain Account**, this account is used to credit/debit an exchange rate gain:
  - The gain corresponding to an exchange rate decreased while making a payment is credited in this account.
  - The gain corresponding to an exchange rate increase while receiving a payment is credited in this account.

!!! info
    Remember that it is possible to receive payments and to make payments in a currency different to the financial account currency.

In case of a "Cash" Financial Account type, the ledger account used to credit an exchange rate gain is the "**Bank Revaluation Gain**" account of the Defaults tab of the General Ledger Configuration.

- **Bank Revaluation Loss Account** used to debit/credit an exchange rate loss :
  - The loss corresponding to an exchange rate increase while making a payment is debited in this account.
  - The loss corresponding to an exchange rate decrease while receiving a payment is debited in this account.

In case of a "Cash" Financial Account type, the ledger account used to credit an exchange rate gain is the "**Bank Revaluation Loss**" account of the Defaults tab of the General Ledger Configuration.

- **Bank Fee Account** used to debit/credit fee expenses/revenues

The checkbox **Enable Bank Statement** allows the user to post Bank Statements. If selected, two additional fields are shown:

- **Bank Asset Account**
- **Bank Transitory Account**

As a bank statement posting is a transitory posting until the transactions have been finally cleared, the "Bank Transitory Account" must be the same account as the one used upon clearing.

As soon as a "Bank Transitory Account" is defined, the system shows a warning stating that "When posting Bank Statements, the Bank Transitory Account should match the account used upon clearing for all payment methods in order to ensure properly balanced accounting. Do you want to propagate this value to all payment methods?"

- If the end-user presses (YES), the system fills-in the Bank Transitory Account selected in the field "Cleared Payment Account" of the "Payment IN" and "Payment OUT" sections.

**Payment IN / Payment OUT** sections:

These sections of the accounting configuration tab are closely related to another tab of the financial account window, the Payment Method tab.

The Payment Method tab allows the user to define which step of the payment workflow can be posted to the ledger. That can be defined for each payment method assigned to the financial account

The "Accounting Configuration" tab allows the user to select the ledger accounts to use while posting in transit payments in/out, deposit/withdrawal transactions or reconciliations linked to a given payment method.

It is important to remark that:

- None of the fields of the "**Payment In**" and "**Payment Out**" section are mandatory, as the accounting process can be different depending on the payment method configuration.
- However, if any of those fields is "empty" for instance the "**Deposit Account**", while it has been configured for a given payment method assigned to the financial account that the "Deposit" transaction needs to be posted, the posting process will generate an error.

More in detail:

**Payment In** section:

- **In Transit Payment Account** - This is the account which would be used in the first step, when the receipt of the payment is registered in the "Payment In" window.  
  The Payment Method used should have the value "In Transit Payment Account" defined in the field "Upon Receipt use".
- **Deposited Payment Account** - This is the account which would be used to post the second phase that is the "Deposit" of the receipt in the Financial Account. The Payment Method used should have the value "Deposited Payment Account" defined in the field "Upon Deposit use".
- **Cleared Payment Account** - This is the account which would be used to post the third step that is the reconciliation of the deposit. The payment method used should have the value ""Cleared Payment Account" defined in the field "Upon Reconciliation use".

**Payment out** section:

- **In Transit Payment Account** - This is the account which would be used in the first step, when the payment is made in the "Payment Out" window. The Payment Method used should have the value "In Transit Payment Account" defined in the field "Upon Payment use".
- **Withdrawal Payment Account** - This is the account which would be used to post the second phase that is the "Withdrawal" of the payment in the Financial Account. The Payment Method used should have the value "Withdrawal Payment Account" defined in the field "Upon Withdrawal use".
- **Cleared Payment Account** - This is the account which would be used to post the third step that is the reconciliation of the withdrawal. The Payment Method used should have the value "Cleared Payment Account" defined in the field "Upon Reconciliation use".

###### **Payment Method**

This tab lists all the payment methods assigned to the financial account. A payment can either be deposited in or withdrawn from the financial account if the payment method used is assigned to the financial account.

Every Financial Account can have more than one payment method assigned, payment methods such as "Check", "Wire Transfer", "Cash".

The fact of assigning a payment method or a set of payment methods to a given financial account means that it is possible to manage through a given financial account only those payments linked to any of the payment methods assigned to that financial account.

Payment Methods are created and configured in the Payment Method window. Once created and configured, there can be assigned to a financial account in this tab. The way to do that is:

- Click the '**Payment Method'** tab of the financial account
- Create a new record
- From the '**Payment Method'** drop down list, select a payment.
  - This action automatically populates the default configuration of the payment method.
- Change the default configuration if required
  - Any change to that configuration does not change the default configuration of the payment method because it only applies to the way that payment method is going to behave while being used for the financial account selected.

In this tab, there is the advanced feature (hidden by default) called **invoice paid status control**, this functionality provides a configuration option to be able to decide which status for each payment determines whether an invoice is paid or not.

- **Invoice paid status combo**: Sets the state from which is considered an invoice as paid.

This combo can be set at payment method level (payment in and payment out) in each financial account. By default this combo is set as **payment received** or **payment made**, therefore we get the usual behavior of Etendo.

!!! info
    For additional information about payment method configuration, visit the [_Payment Method_](https://docs.etendo.software/latest/financial-management/receivables-and-payables/setup.md#payment-method) article.

###### **Imported Bank Statements**

The tab lists the imported bank statement files as well as the bank statements created manually.

![Imported bank statements](https://docs.etendo.software/latest/assets/drive/1JYuyMUUrwVxlwti9FdfNcdz_t-DgIPY3.png)

There are key fields to note:

- **Document No.:** that is the imported bank statement number which is provided by the corresponding document sequence.
- **Document Type:** that is the "Bank Statement File" document category (not "Bank Statement").
- **Name:** that is the name given by Etendo which is a combination of the transaction dates and the amount in/out difference.
- **Import Date:** that is the date when the file was imported.
- **Transaction Date:** that is the date to use while posting the bank statement to the ledger.
- **File name:** that is the name of the file imported

An imported bank statement file can be "**Reactivated**" as once imported it gets processed automatically.

Once reactivated, the bank statement header information as well as the bank statement lines can be changed as required.

Once done, the bank statement can be **Processed** once again.

A Bank statement can be posted if that is enabled in the accounting configuration tab of the financial account.

!!! info
    If the user is not able to import a bank statement file, it is also possible to create bank statements and bank statement lines manually.

###### **Bank Statement Lines**

This tab lists all the lines of a bank statement.

There are key fields to note:

- **Business Partner Name:** this field shows the name of the business partner in the bank statement lines
- **Business Partner:** this field shows the business partner found in Etendo by the matching algorithm, if any
- **G/L Item:** this field allows to manually enter a G/L Item if it is well known that a bank statement line is related to a G/L transaction. Etendo will recall that a bank statement line text was related to a given G/L transaction next time that a bank statement file is imported.  
  The G/L item entered here will then be used by the matching algorithm while matching up the bank statement lines with the financial account transactions.
- **Amount OUT:** that is the charged amount of the bank statement line
- **Amount IN:** that is the received amount of the bank statement line
- **Financial Account Transaction:** that is the financial account transaction once matched with the bank statement line, it may be empty when no matching transaction has been found
- **Matching type:** that can be "Manual" or "Automatic" depending on who did the math, either the matching algorithm used or the user.

###### **Reconciliations**

The reconciliation tab shows the reconciliations created manually if no matching algorithm is assigned to the financial account as well as the ones created while matching an imported bank statement file otherwise.

####### **Manual Reconciliations**

- As already explained, the process button Reconcile allows the user to manually reconcile existing financial account transactions in the "Reconciliation" window.
- Each reconciliation of that type once saved is also saved in this tab in "**Draft**" status until it is finally reconciled in the "**Reconciliation**" window therefore, its status changes to "**Completed**".
- It is possible to "**Reactivate**" a reconciliation of that type, therefore it can be changed in the "**Reconciliation**" window and be reconciled from that window once more.

####### **Automatic Reconciliations**

- In the same way, once a bank statement file has been imported, the bank statement lines can be automatically reconciled in the "**Match using imported Bank Statement Lines**" window accessible from the process button Match Statement.
- Each reconciliation of that type once saved is also saved in this tab in "**Draft**" status until it is finally reconciled in the "Match using imported Bank Statement Lines" window therefore, its status changes to "**Completed**".
- It is possible to "**Reactivate**" a reconciliation of that type, therefore it can be changed in the "**Match using imported Bank Statement Lines**" window and be reconciled from that window once more.

![Reconciliations](https://docs.etendo.software/latest/assets/drive/1ptaQQlAalghp30dTWFwNGupZaaGIhujf.png)

####### **Reconciliations Posting**

A Reconciliation of any type can be posted if the Payment Method used while creating the payment to be reconciled allows the user to do so once assigned to the financial account. If that is not the case, Etendo shows a warning : "Document disabled for accounting".

A "**Deposit Reconciliation**" posting looks like:

a. if the Payment Received was NOT posted in the **"Payment In"** window and the Deposit Transaction was also NOT posted in the "**Financial Account**" window:

|                                                             |                |                |
| ----------------------------------------------------------- | -------------- | -------------- |
| Account                                                     | Debit          | Credit         |
| Upon Reconciliation Use the "Cleared Payment Account" (i.e) | Payment amount |                |
| Customer Receivables                                        |                | Payment amount |

b. if the Payment Received was posted in the **"Payment In"** window and the Deposit Transaction was NOT posted in the "**Financial Account**" window:

|                                                             |                |                |
| ----------------------------------------------------------- | -------------- | -------------- |
| Account                                                     | Debit          | Credit         |
| Upon Reconciliation Use the "Cleared Payment Account" (i.e) | Payment amount |                |
| Upon Receipt Use the "In Transit Payment IN Account" (i.e)  |                | Payment amount |

c. if the Payment Received was posted in the **"Payment In"** window or not and the Deposit Transaction was posted in the "**Financial Account**" window:

|                                                             |                |                |
| ----------------------------------------------------------- | -------------- | -------------- |
| Account                                                     | Debit          | Credit         |
| Upon Reconciliation Use the "Cleared Payment Account" (i.e) | Payment amount |                |
| Upon Deposit Use the "Deposit Account" (i.e)                |                | Payment amount |

!!! info
    Each posting will be different when the amount comes partially or totally from a debt classified as doubtful. In that case, the posting will be as explained in the [_Doubtful Debt Run Window_](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#doubtful-debt-run)

A "**Withdrawal Reconciliation**" posting looks like:

a. if the Payment Made was NOT posted in the **"Payment Out"** window and the Withdrawal transactions was also NOT posted in the **Financial Account** window:

|                                                             |                |                |
| ----------------------------------------------------------- | -------------- | -------------- |
| Account                                                     | Debit          | Credit         |
| Vendor Liability                                            | Payment amount |                |
| Upon Reconciliation Use the "Cleared Payment Account" (i.e) |                | Payment amount |

b. if the Payment Made was posted in the **"Payment Out"** window and the Withdrawal transactions was NOT posted in the **Financial Account** window:

|                                                             |                |                |
| ----------------------------------------------------------- | -------------- | -------------- |
| Account                                                     | Debit          | Credit         |
| Upon Payment Use the "In Transit Payment OUT Account" (i.e) | Payment amount |                |
| Upon Reconciliation Use the "Cleared Payment Account" (i.e) |                | Payment amount |

c. if the Payment Made was posted in the **"Payment Out"** window or not and the Withdrawal transactions was posted in the **Financial Account** window:

|                                                             |                |                |
| ----------------------------------------------------------- | -------------- | -------------- |
| Account                                                     | Debit          | Credit         |
| upon Withdrawal Use the "Withdrawal Account" (i.e)          | Payment amount |                |
| Upon Reconciliation Use the "Cleared Payment Account" (i.e) |                | Payment amount |

####### **Reconciliations Reporting**

Additionally there are two reports which shows information about each reconciliation, those reports can be run from the process buttons:

- Reconciliations Details
- Reconciliation Summary

###### **Cleared items**

This tab shows the transactions cleared or set as matched in a reconciliation.

As soon as either a **manual** or an **automatic** reconciliation is "Saved" in "**Draft**" status in the Reconciliations tab, this sub-tab allows to see the transactions cleared in the Reconciliation window or match against a bank statement line in the Mach Using imported Bank Statement Lines window.

It is not possible to remove the cleared items from this sub-tab but from either the "Reconciliation" window or the "Mach Using imported Bank Statement Lines" window whenever the reconciliation has been "**reactivated**".

Cleared item sub-tab allows to see below information:

- the **financial account transaction** reconciled
- the **payment** reconciled
- the **description** of the transaction reconciled for instance "Invoice No:..."
- and either the **Deposit Amount** or the **Withdrawal Amount** of the cleared transaction.

###### **Accounting**

The accounting tab is a read-only tab which shows every financial account transaction posting.

##### Payment Removal

The aim of this functionality is to delete and reactivate payments in an agile and easy way. Also, it allows eliminating and reactivating bank transactions and reconciliations.

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

###### Transactions

From this window, it is possible to delete and reactivate the transactions included in a financial account.

Payments can be found in this instance in Withdrawn not cleared, Deposited not cleared and Payment cleared status, in the latter case the payment is already reconciled, and therefore related to a bank reconciliation and a bank statement.

To remove a transaction, select the corresponding record in the Transaction tab and then click on the Remove Transaction button. If the payment is in Deposited not cleared or Withdrawn not cleared status, the process removes the transaction from the financial account, and the payment returns to its previous status. If the status is Payment cleared, the process also removes the related reconciliation line and also the related bank statement line.

Note that:

If the reconciliation is completed and the rest of the existing reconciliations are also completed, then the reconciliation in question is reopened to remove the matching reconciliation line and closed again.
If the reconciliation is completed and there is a reconciliation in Draft status, the draft reconciliation will be closed, the corresponding reconciliation is reactivated, the corresponding reconciliation line is deleted, it will be closed again and the one in Draft status will be reactivated.

To reactivate a transaction, select the corresponding record in the Transaction tab and then click on the Reactivate Transaction button. If the payment is in Deposited not cleared or Withdrawn not cleared status, the payment returns to its previous status but will remain associated to the financial account. If the status is Payment cleared, the process also deletes the related reconciliation line and also the related bank statement line.

Consider the following cases:

- If the reconciliation is completed and the rest of the existing reconciliations are completed, then the reconciliation in question will be reopened to delete the relevant reconciliation line and closed again.
- If the reconciliation is completed and there is a reconciliation in Draft status, the draft reconciliation is closed, the corresponding reconciliation is reactivated, the corresponding reconciliation line is deleted, it will be closed again and the one in Draft status will be reactivated.

![](https://docs.etendo.software/latest/assets/drive/1M_IDKW70W9wRHEkPK6Uw9uLvfD03wyxx.png)

###### Reconciliations

It is possible to delete and reactivate bank reconciliations.

The following situations can be possible:

- Delete a reconciliation in Completed or Draft status: in this case the corresponding reconciliation is deleted, the bank statement lines associated with it and the payments reconciled in it change their status to Deposited not cleared or Withdrawn not cleared.
- Reactivate a reconciliation in Completed status. The other existing reconciliations are also in Completed status: in this case the reconciliation is reactivated and its status returned to Draft.
- Reactivate a reconciliation in Completed status. There is another reconciliation in Draft status: in this case, the reconciliation in Draft status is completed first and the selected reconciliation is reactivated and its new status will be : Draft.

![](https://docs.etendo.software/latest/assets/drive/1ZyeE1vy7Gri5kslKF1fq1PzohDkwVPwK.png)

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button. In the case of the "Financial Account" window, this option can be used in three tabs: Transaction, Imported Bank Statements and Reconciliations.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

##### Advanced Business Partner Settlement

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

Etendo allows performing a settlement from a bank reconciliation.
From the **Financial Account** window, once the bank statements are already imported and processed, the user is able to select the bank statement from the financial account and match it with the invoice to be paid by clicking on the **Match Statement** button.

![](https://docs.etendo.software/latest/assets/drive/11F6-j76ebOwud3SCfJNtfFhgfuAcjh5d.png)

In the pop-up window, Etendo shows a list of invoices to be settled each one with its corresponding invoice number, here the user is able to select the corresponding invoice to net with its **Actual Payment** amount to be paid.

![](https://docs.etendo.software/latest/assets/drive/1GufQeDY76qDFzfshhuTzhogcH10T0zxb.png)

From the **Invoice From Compensation** tab, the user selects the invoice that will be used to pay (either sales or purchase, depending on the invoice previously chosen) and sets the needed amount from the invoice to be netted.

![](https://docs.etendo.software/latest/assets/drive/1nRmzMoT6EiyE2m0yvApx99cpJladJZkA.png)

After clicking the Done button, Etendo opens another pop-up window to show the information for the new settlement to be created for the user to confirm the details by clicking Done.

![](https://docs.etendo.software/latest/assets/drive/1XvbDRrKkyoporgm2uVTBDg-72m2iOOaa.png)

The settlement record (payment in and payment out) is also registered in the **Business Partner Settlement** window where a line for the invoice (sales and purchase) used to net will be shown.

![](https://docs.etendo.software/latest/assets/drive/1v1dM1rAImvwdfJLXtQYzzwKNH6BBALbm.png)

!!! info
    For more information, visit the [the Business Partner Settlement module user guide](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#business-partner-settlement).

#### Payment Execution

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Transactions` > `Payment Execution`

##### Overview

Payment Execution form allows the user to massively execute deferred payments in an "Awaiting Execution" status.

The same applies to payments that failed during the execution process due to a paper jam or any other problem occurred due to a connection failure.

There are some mandatory filtering options:

- the **organization**
- the **payment method**
- and the **financial account**

!!! info
    Note that the payment method/s used while receiving/making the corresponding payment/s requires a "deferred" automatic execution process configured while being assigned and configured for a given Financial Account.

and some other available filters such as:

- Payment **Dates From/To**
- whether the payment is a "**Received In**" payment or a "**Paid Out**" payment

Once the process button "**Search**" is pressed, the payments to execute are shown.

![Payment Execution](https://docs.etendo.software/latest/assets/drive/1fX1GLQHOzJHloXOAJSh9X2Y_3SfXqknL.png)

Once the process button **"Process"** is pressed, a new window is displayed to allow the user to enter the input parameters required such as the check number, for instance if the execution process selected in the payment method used was "Print Check simple process".

Once the process button "Execute" is pressed, the payment changes its status to either "Payment Made/Payment Received" or "Withdrawal not Cleared/Deposit not Cleared", therefore the next payment can be processed and therefore executed.

Note that several payments can be selected to be executed grouped in the same payment run.

If that is the case, more than one payment for the same business partner can be paid by the same check number.

#### Business Partner Settlement

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Transactions` > `Business Partner Settlement`

##### Overview

This module provides a new document where it is possible to settle debts or credit of business partners that are both customers and providers. When a Business Partner is a Customer and a Provider, it is possible to have credit as both types. But it is not possible to consume a customer credit in a Payment Out document. In the same way, it is not possible to mix purchase or sales invoices on a single payment document. In some scenarios, when a business partner has sales and purchase invoices, it is desirable to cancel both debts without needing a financial transaction.

In this document, you have to select the invoices or credit amount that is desired to settle. When the document is processed, a Payment In and a Payment Out are created. Both have a total amount of zero, so no financial transaction is created. The amount settled on each payment is compensated by a GL Item line. Both payments use the same GL Item, so the balance of it after the process is zero.

###### Configuration

It is not required any specific configuration to work on with this module. It is expected that business partners are already completely defined as Customers and Vendors with their corresponding Financial Accounts and Currency.

It is also required to have at least one GL Item defined for the Organizations where these settlements are needed.

##### Business Partner Settlement

In this window, all the settlements are registered. In a new one, you have to select:

- the type: Credit or Invoice
- the settlement date
- the Business Partner
- and the GL Item.
  GL Item balance after the settlement process is not going to be affected, therefore a specific ledger account out of the account tree can be created and used for it.

Depending on the settlement type, the selected process button on the top and child tabs below change accordingly to show either the credit payments or the invoices to be settled.

"Credit Settlement" type:

![CS](https://docs.etendo.software/latest/assets/drive/1annoerkei9LaS96_BUY5bysMxH8_E803.png)

"Invoice Settlement" type:

![IS](https://docs.etendo.software/latest/assets/drive/16rHvcenj5_bk5_qSmaiq55vc-DtdPa2x.png)

###### Credit settlement

In credit settlements, you have to select the credit payments that are required to be settled.

Clicking Add Credit Payments button, a popup is opened where you can select from 2 grids the Credit In and the Credit Out payments.

In the Totals section, total amounts of the selected credit payments are calculated.

!!! warning
    You cannot close and add the credit payments until the total amounts of each grid are the same.

The information above means that Credit In Amount and Credit Out Amount should be the same, therefore Credit Payment is 0.00

![IS](https://docs.etendo.software/latest/assets/drive/1xh1LMaTcJWuLXzNeqesDDY0niWC1VLv6.png)

###### Invoice settlement

As in credit settlements, by clicking Add Not Paid Invoices a popup is opened with 2 grids. The grids in this case show not paid invoices.

Once more, it is not possible to create settlement payments until "Pending Amount" is 0.00, as shown in the image below:

![IS](https://docs.etendo.software/latest/assets/drive/1_6G9sHyHAhvjBD4ktBmlwmj1E8QUivF7.png)

###### Process settlement

Depending on the status of the Settlement different actions are available:

Draft
In this status it is only possible to Process the settlement.

Processed
In this status it is possible to Cancel or Reactivate the settlement.

Cancelled
In this status it is not possible to perform any action.

###### Process

When the settlement is processed, a Payment In and a Payment Out are created. Each payment includes all the credit payments or invoices that were selected on the settlement.

See images below in the case of settlement payments related to invoices.

**Payment In**

![IS](https://docs.etendo.software/latest/assets/drive/1jh-cvFM4r4uHBH11jspb2XVnp_GthyfW.png)

**Payment Out**

![IS](https://docs.etendo.software/latest/assets/drive/15MCP7JSy_YEdnBeOB8CUgNSRmtc75VZR.png)

The generated payments are set on the Business Partner Settlement header.

The invoices are inserted as Payment Lines while the credit payments are added to the payment as Used Credit.

As the total amount of the settlement payment must be zero, an additional payment line is added using the selected GL Item.

The amount in the lines related to the GL Item is the same in
both payments, therefore the net effect on the GL item balance is null. In other words, the balance of the GL Item is not altered by the settlement process.

**Settlement Payment In posting:**
2722.50 GL Item ledger account (55500) DEBIT
2722.50 Account Receivables (43000) CREDIT

**Settlement Payment Out posting:**
2722.50 Account Payables (40000) DEBIT
2722.50 GL Item ledger account (55500) CREDIT

Finally, as the Settlement Payment amount is zero, no "Transaction" is created in the Financial Account of the payment, therefore it will not be required to include it in any Reconciliation.

###### Reactivate

When a Settlement is reactivated, the generated payments are canceled creating a Reverse Payment. This process will restore the debt or credit so it is again available and the invoices are again not paid. The generated payments are removed from the header but the selection of credit or invoices is kept, so it is possible to add new items, remove some items and/or edit the settled amounts.

!!! info
    The settlement is left in Draft status so it is possible to process it again when needed.

###### Cancel

As in the Reactivate process, the settlement payments are canceled by creating a Reverse Payment and the settled credit or invoices are again available or not paid. But, in this case, these payments are not removed from the settlement header and the status is changed to Canceled.

!!! info
    In this status, it is not possible to modify the settlement anymore.

#### Tax Payment

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Transactions` > `Tax Payment`

##### Overview

The "Tax Payment" process helps to calculate the amount of taxes to be paid to or received from the tax authority.

Taxes such as the VAT are settled as the difference between:

- the VAT that is charged by an organization and paid by its customers, that is the Output VAT or VAT collected on Sales
- and the VAT that is paid by an organization to other businesses on the supplies that it receives, that is the Input VAT or VAT paid on purchases

Tax payment process can be run after below detailed configuration is done:

- A Tax Authority business partner needs to be created in the business partner window. This business partner needs to be setup as both "Customer" and "Vendor" because sometimes the organization will have to pay to the tax authority and the other way around.
- A G/L item needs to be created and then linked to each Tax Register Type. The G/L item is going to be used to post the corresponding tax payment to the ledger.
  - The "**G/L item Debit Account**" of the G/L item is the account to use while posting a tax payment to be received from the tax authority.
  - The "**G/L item Credit Account**" of the G/L item is the account to use while posting a tax payment to be made to the tax authority.
- As many Tax Register Type as required are linked to the tax rates of each type to take into account for the calculation of the tax payment.

###### Header

The tax payment window allows the user to calculate the amount of taxes to be paid to or received from the tax authority within a given period of time. It also allows the user to generate the corresponding payment to/from the tax authority.

![Tax Payment Header](https://docs.etendo.software/latest/assets/drive/1YLUngAGz6MvriT9nplSWvYYnkY7pMnJt.png)

As shown in the image above, the fields to fill in are:

- **Organization**: which is the organization for which the tax payment needs to be calculated
- **Name**: the name of the tax payment calculation
- **Business Partner**: that is the tax authority business partner who either receive the tax payment or make the tax payment.
- **Currency**: the currency of the tax payment
- **Starting Date**: that is the first date to take into account for the tax calculation.
  - Taxes such as the VAT are settled on a monthly basis, therefore the starting date can be the first day of a given month.
- **Ending Date**: that is the last date to take into account for the tax calculation.
  - Taxes such as the VAT are settled on a monthly basis, therefore the ending date can be the last day of a given month.
- **Journal Entry**: that is a read-only field which links to the journal entry created once the tax payment is processed and therefore included in a G/L Journal.
- **Generate Payment checkbox**: this checkbox allows the user to configure if a payment in/out is going to be created after processing the tax payment.
- This checkbox should not be selected in those cases where the tax authority needs to pay to the organization but instead of doing that, it compensates the amounts to be paid to it by the organization.

The **Create VAT Registers button** run the tax payment process and gets the tax amount of each "Tax Register Type" automatically populated in the "Tax Register Header" tab.

The **Process** button process the tax payment and includes the tax settlement posting in a **G/L Journal** accessible from the "**Journal Entry**" field of the Tax Payment window.

The "**Unprocess**" button undoes the tax payment and deletes the G/L Journal created.

###### **Tax Register Header**

Tax Register Header tab allows the user to see the calculated tax amount per each configured "Tax Register Type".

![Tax Register Header](https://docs.etendo.software/latest/assets/drive/1WDw5E4PuOhtmQemNXGYCGt40woWtWUYO.png)

###### **Lines**

The lines tab is a read-only tab which lists all the tax transactions related to the tax rates configured as part of a "Tax Register Type".

![Tax Register Lines](https://docs.etendo.software/latest/assets/drive/1JAQeiows8-fzEHJq0r3TYYD6zWlzRLQ5.png)

Some relevant fields to note are:

- **Tax**: that is the tax rate included as part of the "Tax Register Type".
- **Invoice Tax**: that is the invoice linked to the tax rate.
- **Invoice Date**: that is the invoice date.
- **Document No.**: that is the document number for instance an invoice number.
- **Exempt Amount**: that is an exempt tax amount which will not be included in the tax payment. The set-up is in the customer tab of the business partner.
- **No VAT Amount**: amount that is not included in the tax calculation.
- **Nondeductible Amount**: amount that is non deductible.
- **Taxable Amount**: that is the taxable amount used for the calculation of the tax amount.
- **Tax Amount**: that is the tax amount.
- **Total Amount**: that is the total gross amount of the document/invoice.

#### Remittance

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Transactions` > `Remittance`

<iframe width="560" height="315" src="https://www.youtube.com/embed/6z3t-E_sV0E" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

##### Overview

In the Remittance window, the user is able to create remittances to manage payments in or out to customers or suppliers.

A remittance is a group of payments (in/out) or orders/invoices which can be remitted to the bank for its payment. The bank will then manage either the collection of the money from the customers or the payment to the vendors/suppliers.

##### Configuration

To be able to use this functionality, it is necessary to configure some aspects first.

- Remittance Dataset: it is necessary to install the Remittance dataset before using the Remittance window. 

    For this, go to the *Enterprise Module Management* window and select the corresponding dataset as shown below.

    ![emm.png](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions/enterprise-module-management.png)

    !!! info
        For more information, visit [Enterprise Module Management](https://docs.etendo.software/latest/general-setup/enterprise-model.md#enterprise-module-management).

- Remittance Type: It is necessary to define a remittance type with a certain payment method in the *Remittance Type* window.

    !!! info
        For more information, visit [Remittance Type window](https://docs.etendo.software/latest/financial-management/receivables-and-payables/setup.md#remittance-type).

- Business Partner default bank account: For each business partner, it is possible to   define a bank account that is selected by default each time creating a remittance is necessary.

    !!! info
        To read more, visit [Bank Account](https://docs.etendo.software/latest/master-data-management/master-data.md#remittance) in the Business Partner section.


##### Remittance window

![Remittance window](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions/remittance-window.png)


As shown in the image above, it is necessary to fill in the fields in the window and different buttons appear so as to continue with the process.


###### Buttons

**Select Payments**

Using this button, the user is able to select a payment to be included in the remittance.

**Process**

Using this button, the user processes the payments and groups lines according to the options shown in its corresponding pop-up window. 

!!! info
    If the Automated Remittance module in the Financial Extensions Bundle is installed, this process includes the date setting and the settlement of the remittance.  For more information, visit [the Automated Remittance user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/automated-remittance.md).
   

**Select Invoices and Orders**

In the Remittance window, the *select invoices and orders* button is shown. With this button, the user is able to select not only invoices, but also orders to include in the remittance. In the pop-up window shown when this button is clicked, the user can order and filter each column, payments in and out are shown at the same time and, orders and invoices are shown together.

![filter.png](https://docs.etendo.software/latest/assets/legacy/filter.png)

**Protest Remittance**

!!!info
    This button is only available if the Automated Remittance module in the Financial Extensions Bundle is installed. To install it, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}.

The Protest Remittance button allows the automatic protest of remittances. This function facilitates the management of protests and the re-settlement of future remittances.

!!! info
    For more information, visit [the Automated Remittance user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/automated-remittance.md).

##### Types of Remittances

There are two types of remittances:

**Non-Discount Remittances:** orders/invoices and purchases and/or payments (in/out) are grouped in a remittance that is sent to the bank to be managed.

- The remittance generates a series of payments according to the grouping required by the user (by business partner, due date, among others). The bank usually charges a certain amount for the management of each of these payments, hence the attempt to group them.
- The bank deducts the amount of the remittance from the financial account at the time the remittance is sent, taking care of managing the payments.

**Remittances for Discount:** sales orders/invoices and/or payments are grouped in a remittance that is sent to the bank. The bank advances the amount of the remittance and then manages it itself.

- The remittance generates as many payments (in/out) as those incorporated in the remittance plus one for the global amount, which is the one that is taken to the financial account due to the advance of such amount.
- The bank informs of the payments (in/out) that have been settled (normally, if in one month the bank does not respond, these payments are considered settled) and of those that have been protested.

=== "Non-Discount Remittance"
    To create a Non-Discount remittance follow these steps:

    1. Add a new remittance to the Remittance window and select “printable Remittance” as remittance type since it indicates it is a non-discount remittance.

        ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions/new-va.png)

    2. By clicking the “Select Invoices and Orders” button, the system displays a pop up with, by default, the "Show collections/payments for alternative payment methods" selector unchecked, displaying only invoices that have Remittance payment method.
        By checking this checkbox, the system shows all the invoices and orders pending to be taken to the bank. Select those operations needed to remit and process.

        ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions/new-va2.png)

        So the system inserts the selected lines:

        ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions/new-va3.png)

    3. If no further operations to the remittance are to be added, process the payment clicking the "Process" button.

        !!! warning
            When using the "process" button and grouping lines, it is necessary for the bank accounts of those lines of a remittance document to coincide. If they are different from one another, Etendo shows an error notification as seen below.

        ![error.png](https://docs.etendo.software/latest/assets/legacy/error.png)

        !!! info
            Bank accounts can be defined in the header of [purchase](https://docs.etendo.software/latest/procurement-management/transactions.md#remittance_1) and [sales](https://docs.etendo.software/latest/sales-management/transactions.md#remittance_1) invoices as well as in [purchase](https://docs.etendo.software/latest/procurement-management/transactions.md#remittance) and [sales](https://docs.etendo.software/latest/sales-management/transactions.md#remittance) orders.


    4. When processing, the system shows the following options:

        - No grouping: generates a payment for each of the selected lines.
        - Group by invoice: generates a payment for each invoice (in case there is more than one).
        - Group by invoice and due date: generates a payment for each invoice and due date.
        - Group by business partner: generates as many payments as there are business partners on the selected lines. It allocates the total amount of all lines that apply to each business partner.
        - Group by business partner and due date: creates as many payments as there are business partners and payment dates on the selected lines.
        - Group by order: generates a payment for each order (in case there is more than one).
        - Group by order and due date: generates a payment for each order and due date.


        ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions/new-va7.png)

    **Example**

    As an example, let us create the payment by selecting the Group by business partner option.  
    When processing, the 3 payments have been created for the 3 lines included in the remittance due to the fact that all of them correspond to the same business partner.

    ![](https://docs.etendo.software/latest/assets/drive/1-UUBayBZD-1QRbyj3yj62RmFsdw5tkE6.png)

    When navigating to the payment, it can be observed that the status of the payments created is "Remitted".

    ![](https://docs.etendo.software/latest/assets/drive/11-m5CC8wd0k4YLB3BjnqKq9ujwa-GJfm.png)

    When the remittance is posted, an accounting entry is obtained, according to the accounts defined.

    ##### Settle/ Protest Remittance

    Once the bank confirms the corresponding payments, access the "Settle/Protest Remittances" window and check the settled and protested remittances.

    !!! info
        The selected date is the posting date of the created document.

    ![](https://docs.etendo.software/latest/assets/drive/1wK9U8kZzmOuxtNJAwZ02iWEgYpYRPrSN.png)

    By settling the first line, it is observed that the line has been added to the settled tab of the corresponding remittance.

    ![](https://docs.etendo.software/latest/assets/drive/1QpvCzdNsUsa4FJBZwvJWH7YfxuapHAO4.png)

    Once the remittance is posted, the accounting entry is obtained according to the indicated configuration. The posting should be line by line of the settled transactions.
    The returned remittance lines will appear in the returned tab.

    The accounting of returned operations are accounted for in the same way as settled operations, from the 401 of the remittance statement to the 400, leaving the outstanding debt again.

    !!! info
        The returned transactions may be managed again later in other remittances or directly in the financial accounts.

    The status of settled remittance transactions is changed to "Withdrawn not Cleared" and in the case of payment outs to “Deposited not Cleared”.

    If one of the payments has been returned, the status of the document is set to "Awaiting Execution".

    ![](https://docs.etendo.software/latest/assets/drive/1YZ5mcnLw9KQ5KZ4svYJF9S8vrR-xuvzf.png)

    !!! info
        It is possible to print the Non-discount remittances as well as the Remittances for Discount from the printer in the toolbar.

    ##### Settled payments to the financial account

    !!! info
        After the settlement, the system has automatically transferred these payments to the financial account indicated in the payments.

    ![](https://docs.etendo.software/latest/assets/drive/1HAoN4VJmSrj-MdVzuICt4x0pKUt6_fvN.png)

    ###### Reconcile Payments

    The Reconcile Payments option in any remittance process refers to the action of comparing and adjusting financial records to ensure that payments are accurately and properly recorded. By using the *reconcile* button in the *financial account* window, it is possible to access the window shown below.

    ![](https://docs.etendo.software/latest/assets/drive/1B-eqtToHww-gMuD5CldZ2fwBm2x5-OIu.png)
=== "Remittance for Discount"

    To create a remittance for discount follow these steps:

    1. Create a remittance from the Remittances window. Select as type of remittance "Remittances for Discount". Once the header has been   created, add the lines, either invoices, orders or payments, that are to be included in this remittance.

        ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions/new-va4.png)

    2. By clicking "Select Invoices and Orders" the system displays a pop up with, by default, the "Show collections/payments for alternative payment methods" selector unchecked, displaying only invoices that have Remittance payment method.
        By checking this check box, the system shows all the invoices and orders pending to be taken to the bank. Select those operations needed to remit and process.

        ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions/new-va5.png)

        The system inserts the selected lines:

        ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions/new-va6.png)

    3. If no further operations to the remittance are to be added, process the payment clicking the "Process" button.

        !!! warning
            When using the "process" button and grouping lines, it is necessary for the bank accounts of those lines of a remittance document to coincide. If they are different from one another, Etendo shows an error notification as seen below.

        ![error.png](https://docs.etendo.software/latest/assets/legacy/error.png)

        !!! info
            Bank accounts can be defined in the header of [purchase](https://docs.etendo.software/latest/procurement-management/transactions.md#remittance_1) and [sales](https://docs.etendo.software/latest/sales-management/transactions.md#remittance_1) invoices as well as in [purchase](https://docs.etendo.software/latest/procurement-management/transactions.md#remittance) and [sales](https://docs.etendo.software/latest/sales-management/transactions.md#remittance) orders.


    4. When processing, the system shows the following options:
        - No grouping: generates a payment for each of the selected lines.
        - Group by invoice: generates a payment for each invoice (in case there is more than one).
        - Group by invoice and due date: generates a payment for each invoice and due date.
        - Group by business partner: generates as many payments as there are third parties on the selected lines. It allocates the total amount of all lines that apply to each third party.
        - Group by business partner and due date: creates as many payments as there are third parties and payment dates on the selected lines.
        - Group by order: generates a payment for each order (in case there is more than one).
        - Group by order and due date: generates a payment for each order and due date.

        In this case, it is recommended to select the option "No grouping", since as many payments as operations of the remittance will be generated and a payment sum of all the operations which is the one that the bank will advance. The rest of the payments will be settled as known.

        ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions/new-va7.png)

    5. The next step is to take to the bank the sum payment of the remittance transactions, as in these cases the bank advances the money. From the financial account window, add the payment to the transaction and reconcile it with the bank statement.
      ![](https://docs.etendo.software/latest/assets/drive/1jeThcgRV1wHyXRiOZpG2N-w-uuMVgAqo.png)

    6. Finally, settle the executed payments and/or return the necessary ones.
      ![](https://docs.etendo.software/latest/assets/drive/1ZbcAE5TCXIEo4wQU6AHrdtlhaQAVmZeC.png)
      The status of the settled collections changed to Settled in Remittance and the status of the total payments of the remittance operations changed to Payment cleared.

#### Doubtful Debt

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Transactions` > `Doubtful Debt`

##### Overview

Doubtful debts are those debts which the company is unlikely to be able to collect. Moreover, a doubtful debt becomes a bad debt when there is no longer any doubt that the debt is uncollectible, therefore:

- **Doubtful Debt**: receivable that might become a bad debt at some point in the future.
- **Bad debt**: receivable that has been clearly identified as not being collectible.

Doubtful debts are useful in order to make provisions for possible losses beforehand.

###### User Story

The following example illustrates how Etendo manages Doubtful Debts posting to the ledger.

The Client Healthy Food Supermarkets, Co. who owes the company 1,000 EUR is going through a difficult situation, hence its debt is considered doubtful.

|                       |       |        |
| --------------------- | ----- | ------ |
| Account               | Debit | Credit |
| Doubtful Debt Account | 1000  |        |
| Customer Receivables  |       | 1000   |

|                                     |       |        |
| ----------------------------------- | ----- | ------ |
| Account                             | Debit | Credit |
| Bad Debt Expense Account            | 1000  |        |
| Allowance For Doubtful Debt Account |       | 1000   |

The Client Healthy Food Supermarkets, Co. makes a Payment of 350 EUR:

|                               |       |        |
| ----------------------------- | ----- | ------ |
| Account                       | Debit | Credit |
| In Transit Payment IN Account | 350   |        |
| Doubtful Debt Account         |       | 350    |

|                                     |       |        |
| ----------------------------------- | ----- | ------ |
| Account                             | Debit | Credit |
| Allowance For Doubtful Debt Account | 350   |        |
| Bad Debt Revenue Account            |       | 350    |

Later, the client becomes bankrupt, so its debt is considered bad:

|                       |       |        |
| --------------------- | ----- | ------ |
| Account               | Debit | Credit |
| Write-off             | 650   |        |
| Doubtful Debt Account |       | 650    |

|                                     |       |        |
| ----------------------------------- | ----- | ------ |
| Account                             | Debit | Credit |
| Allowance For Doubtful Debt Account | 650   |        |
| Bad Debt Revenue Account            |       | 650    |

###### Configuration

Before starting working with Doubtful Debt, some previous configuration steps are required:

- To configure Accounting for Doubtful Debts. The accounts that need to be configured are:
  - Doubtful Debt Account
  - Bad Debt Expense Account
  - Bad Debt Revenue Account
  - and Allowance for Bad Debts Account.
- To create a Preference in order to be able to see the amount of a debt that has been classified as doubtful when receiving a Payment.  
  This preference must be defined for the Client and the Organization that needs to see it.  
  This preference is an Attribute 'Doubtful_Debt_Visibility' which Value needs to be 'Y'
- To create a Document Type for Doubtful Debts.  
  This step is not a must, since there is already a Standard Document Type defined for Doubtful Debts.

###### Doubtful Debt

Doubtful Debts are defined in the Doubtful Debt Run Window. After being created, a record will appear in the grid of this window.

Fields to note:

- **Doubtful Debt Run:** A link to the Doubtful Debt Run that generated this Doubtful Debt
- **Invoice Payment Schedule:** A link to the Payment Plan of the Invoice to which this Doubtful Debt is related.
- **Outstanding Doubtful Debt Amount:** Doubtful Debt Amount which remains pending.

Possible Actions:

- **Reactivate:** A Doubtful Debt can be Reactivated in order to be modified or deleted afterwards. Notice that, like every other document, it cannot be Reactivated if it is Posted. In that case, it is necessary to Unpost it first.
- **Post:** A Doubtful Debt can be posted, creating an entry in the Journal that should look like this:

|                       |                      |                      |
| --------------------- | -------------------- | -------------------- |
| Account               | Debit                | Credit               |
| Doubtful Debt Account | Doubtful Debt Amount |                      |
| Customer Receivables  |                      | Doubtful Debt Amount |

|                                     |                      |                      |
| ----------------------------------- | -------------------- | -------------------- |
| Account                             | Debit                | Credit               |
| Bad Debt Expense Account            | Doubtful Debt Amount |                      |
| Allowance For Doubtful Debt Account |                      | Doubtful Debt Amount |

###### Accounting

Accounting information related to the doubtful debt.

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

#### Doubtful Debt Run

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Transactions` > `Doubtful Debt Run`

**Doubtful Debt Run** window is used to define which debts, and in what percentage, are considered doubtful. These Doubtful Debts are shown in the Doubtful Debt Window afterwards.

![Doubtful Debt Run window](https://docs.etendo.software/latest/assets/drive/1O6LI7av2TJyYTZyW8aE3gjlakxldIxhy.png)

Some fields to note:

- **Doubtful Debt Method:** If there is a Doubtful Debt Method defined, it can be selected to automatically fill the needed fields with the provided values.
- **Days Overdue:** This field is used as a filter when selecting the existing debts. It can be removed afterwards.
- **Percentage:** This field is used when selecting the existing debts as the default percentage of the debt that is going to be considered doubtful. It can be changed afterwards.

**Select Doubtful Debt**. After filling the necessary fields, the "Select Doubtful Debt" button is shown. By clicking it, a new pop-up is shown for selecting the debts that are going to be considered doubtful.

![Select Doubtful Debt](https://docs.etendo.software/latest/assets/drive/14aXYdvA41Jd2AkO4x7yD3wesdB3q0LBG.png)

All the pending debts are shown in this window pre-filtered by the previously set parameters. These filters can be removed by clicking the funnel icon.

Each row represents an Outstanding Debt, and it is possible to select as many as necessary to define them as doubtful.

For each line, it is possible to edit the **Doubtful Debt Amount** field. This is the amount that is going to be considered as doubtful. Notice that it is not possible to define a Doubtful Debt amount larger than the Outstanding Amount.

The field **Run Date** can also be modified per each row. When clicking the OK button, the selected records will be visible in the Doubtful Debt tab below.

**Process**:

It is necessary to click the Process button after selecting the records in order to generate the corresponding Doubtful Debt/s.

Once created, it will be possible to post them or to reactivate them through the Doubtful Debt Window.

###### Doubtful Debt

In this tab, the previously selected records are shown. Afterwards, it will be necessary to Process the Doubtful Debt in order for it to be available in the Doubtful Debt Window.

![Doubtful Debt grid](https://docs.etendo.software/latest/assets/drive/1OkWrTJKB0GNeSzk3shtcONfIEuexLMPT.png)

![Doubtful Debt edition](https://docs.etendo.software/latest/assets/drive/1LKCMe9ihePjTcHhheD6mvtYeUls6zzKj.png)

---

This work is a derivative of ["Financial Management"](http://wiki.openbravo.com/wiki/Financial_Management) by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo), used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/). This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/) by [Etendo](https://etendo.software).
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Analysis Tools
## Article Path: /User Guide/Etendo Classic/Basic Features/Financial Management/Receivables and Payables/Analysis Tools
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/analysis-tools
## Article Content: 
#### Overview

This section describes the windows related to financial reports in Etendo. These are:

[:material-file-document-outline: Cashflow Forecast Report](#cashflow-forecast-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Receivables Aging Schedule](#receivables-aging-schedule){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Payables Aging Schedule](#payables-aging-schedule){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Payment Report](#payment-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Payment Run](#payment-run){ .md-button .md-button--primary } <br>


#### Cashflow Forecast Report

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Analysis Tools` > `Cashflow Forecast Report`

##### **Overview**

The report displays the position of a financial account in a future date, taking into account items planned to collect or pay in the given financial account.

#### Receivables Aging Schedule

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Analysis Tools` > `Receivables Aging Schedule`

##### Overview

The report shows the past due receivables as of the date the user selects.

##### **Source of Information**

The source of the information for this report is invoices as the origin of the receivables and the payables.

-   **Invoices**
    -   The due date of an invoice depends on the payment terms, and it is calculated based on the invoice date.
    -   If invoice has multiple payment plan lines, each line has its own due date.
    -   If there exists payments against the invoice, only those which are in a not confirmed status as of the date of the date filter are considered for this report.

##### **Multi-currency**

This report supports multi-currency.

-   **Invoices**: If the exchange rate exists at document level, then the amount is calculated based on this value, if it does not exist, then the rate is taken at client level (Conversion Rates window).

##### **Filters**

-   **Organization** (Mandatory).
-   **General Ledger** (Mandatory). The user can filter the results by organization's general ledger. All the amounts will be converted to the currency of the general ledger.
-   **As of Date** (Mandatory). This is the date as of which the report will be processed. Past due dates and payment dates will be calculated based on this date.
-   **Business Partners** (Optional). The user can select multiple Business Partners to filter the results.
-   **Number of Days Overdue: Group One/Two/Three/Four** (Mandatory). The results shown are grouped according to the day ranges the user must enter. The user can enter the ending day for each range, and then, the application will automatically modify the beginning day for the next ranges. For example: in group One the user enters 30, so the range is now 0 - 30, in group Two the user enters 60 so the second range is 31 - 60, and so on and so forth.
-   **Show Details** (Optional). This checkbox offers the user the option to either show the detailed version of the report or the summarized one. It is also used when printing and exporting to an xls file.
-   **Show Doubtful Debt** (Optional). This checkbox offers the user the option to show information about Doubtful Debts in the report.
-   **Voided invoices need to be included** (Only available if Preference "Enable void documents filter in Aging Reports" is set to Y). This checkbox offers the user the option to include/exclude voided documents from the report.
-   **Reversed payments need to be included** (Only available if Preference "Enable reversed payment documents filter in Aging Reports" is set to Y). This checkbox offers the user the option to include/exclude reversed payment documents from the report.

![](https://docs.etendo.software/latest/assets/drive/1abmyBz-r9kRr3l7gNXmPgxwZrx-ca-AH.png)

##### **HTML/PDF/Excel output**

The report can be generated in HTML, PDF and Excel Spreadsheet format.

##### **Receivables Aging Schedule**

It should display a table showing the following data:

-   **Business partner**. A business partner with pending receivables. This is also a link to the detailed version of the report for this Business Partner.
-   **Current**. A sum of all the current debts the business partner has with the organization that are not due as of the date selected.
-   **First day range**. The amount the business partner owes the organization that is due, and its due date is between the range.
-   **Second day range**. Same as above.
-   **Third day range**. Same as above.
-   **Fourth day range**. Same as above.
-   **Fifth day range**. Same as above.
-   **Total**. Current + All the amounts of the day ranges
-   **Credits**. Amount of money that the business partner has left as credit, to be used later. The amount is between brackets because it must be subtracted when calculating the totals.
-   **Net**. Total - Credit of the Business Partner.

If the credits are posted in the same account as the Receivables, then the Net would match the balance of the Business Partner. If the credits are posted in a different account, such as prepayments, then the balance of the Business Partner would match with the Total.

If the **Show Doubtful Debt** check is selected, two more fields are shown.

-   **Doubtful Debt**. The amount classified as Doubtful Debt for that particular Business Partner.
-   **Percentage**. The percentage that represents the Doubtful Debt over the Net Debt of that particular Business Partner.

Also, when Show Doubtful Debt is selected, the Total amount is the sum of all the debts that are not doubtful. Therefore, the Net is Total + Doubtful - Credits

![](https://docs.etendo.software/latest/assets/drive/18axihCKiqxA8w_i5HX_UsGM6ZtE4G0U7.png)

##### **Receivables Aging Schedule Details**

It should display a table showing the following data: By clicking on the PDF or the XLS link, either a PDF or a spreadsheet file are generated.

The information is grouped by Business Partner, in case the report is run for more than one. For each Business Partner, the information shown is:

-   **Document No.**. The number of the document and also a link to it.
-   **Document Date**. The accounting date of the document.
-   **Past due date buckets**. The pending amount of the Invoice. It is shown in one column or another depending on the due date and the as of date filter.
-   **Net Due**. The outstanding amount of the Invoice as of date. It is the sum of the amounts in the past due date buckets.
-   **Credits**. Each line represents a Payment that has generated credit, and the amount is the credit left to be used as of date. The amount is between brackets because it must be subtracted when calculating the totals.
-   **A summary line for the Past due date buckets and Credits**.

If the credits are posted in the same account as the Receivables, then the total Net Due would match the balance of the Business Partner. If the credits are posted in a different account, such as prepayments, then the balance of the Business Partner would match with the total Net Due plus the Credits (undoing the subtraction of the credits to the total).

Plus, there is a summary line for all the Business Partners.

If the **Show Doubtful Debt** check is selected, two more fields are shown.

-   **Doubtful Debt**. The amount classified as Doubtful Debt for that particular Invoice.
-   **Percentage**. The percentage that represents the Doubtful Debt over the Net Due of that particular Invoice.

Also, when Show Doubtful Debt is selected, the Total amount is the sum of all the debts that are not doubtful. Therefore, the Net Due is Total + Doubtful - Credits

![](https://docs.etendo.software/latest/assets/drive/1-9xrAmRtJQym6Hh1Enp8-6BpMW5Tu72Y.png)

#### Payables Aging Schedule

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Analysis Tools` > `Payables Aging Schedule`

##### Overview

The report shows the past due payables as of the date the user selects.

##### **Source of Information**

The source of the information for this report is invoices as the origin of the receivables and the payables.

-   **Invoices**
    -   The due date of an invoice depends on the payment terms and iit s calculated based on the invoice date.
    -   If the invoice has multiple payment plan lines, each line has its own due date.
    -   If there exist payments against the invoice, only those which are in a not confirmed status as of the date of the date filter are considered for this report.

##### **Multi-currency**

This report supports multi-currency.

-   **Invoices**: If the exchange rate exists at document level, then the amount is calculated based on this value, if it doesn't exist then the rate is taken at client level (Conversion Rates window).

##### **Filters**

-   **Organization** (Mandatory).
-   **General Ledger** (Mandatory). The user can filter the results by organization's general ledger. All the amounts will be converted to the currency of the general ledger.
-   **As of Date** (Mandatory). This is the date as of which the report will be processed. Past due dates and payment dates will be calculated based on this date.
-   **Business Partners** (Optional). The user can select multiple Business Partners to filter the results.
-   **Number of Days Overdue: Group One/Two/Three/Four** (Mandatory). The results shown are grouped according to the day ranges the user must enter. The user can enter the ending day for each range, and then, the application will automatically modify the beginning day for the next ranges. For example: in the group One, the user enters 30 so the range is now 0 - 30, in the group Two, the user enters 60 so the second range is 31 - 60, and so on.
-   **Show Details** (Optional). This checkbox offers the user the option to either show the detailed version of the report or the summarized one. It is also used when printing and exporting to an XLS file.
-   **Voided invoices need to be included** (Only available if Preference "Enable void documents filter in Aging Reports" is set to Y). This checkbox offers the user the option to include/exclude voided documents from the report
-   **Reversed payments need to be included** (Only available if Preference "Enable reversed payment documents filter in Aging Reports" is set to Y). This checkbox offers the user the option to include/exclude reversed payment documents from the report

![](https://docs.etendo.software/latest/assets/drive/1Yl2Zd0sXPSwkfD9IN_P-tP2pxy_CSCTR.png)

##### **HTML/PDF/Excel output**

The report can be generated in HTML, PDF and Spreadsheet format.

##### **Payables Aging Schedule**

It should Display a table showing the following data:

-   **Business partner**. A business partner with pending payables. This is also a link to the detailed version of the report for this Business Partner.
-   **Current**. A sum of all the current debts the business partner has with the organization that are not due as of the date selected.
-   **First day range**. The amount owed to the business partner, and it's due date is between the range.
-   **Second day range**. Same as above.
-   **Third day range**. Same as above.
-   **Fourth day range**. Same as above.
-   **Fifht day range**. Same as above.
-   **Total**. Current + All the amounts of the day ranges
-   **Credits**. Amount of money left as credit to the business partner to be used later. The amount is between brackets because it must be subtracted when calculating the totals.
-   **Net**. Total - - Credit of the Business Partner.

If the credits are posted in the same account as the Payables, then the Net would match the balance of the Business Partner. If the credits are posted in a different account, such as prepayments, then the balance of the Business Partner would match with the Total.

![](https://docs.etendo.software/latest/assets/drive/1Yl2Zd0sXPSwkfD9IN_P-tP2pxy_CSCTR.png)

##### **Payables Aging Schedule Details**

It displays a table showing the following data: By clicking on the PDF or the XLS link, either a PDF or a spreadsheet file are generated.

The information is grouped by Business Partner, in case the report is run for more than one. For each Business Partner, the information shown is:

-   **Document No.**. The number of the document and also a link to it.
-   **Document Date**. The accounting date of the document.
-   **Past due date buckets**. The pending amount of the Invoice. It is shown in one column or another depending on the due date and the as of date filter.
-   **Net Due**. The outstanding amount of the Invoice as of date. It is the sum of the amounts in the past due date buckets.
-   **Credits**. Each line represents a Payment that has generated credit, and the amount is the credit left to be used as of date. The amount is between brackets because it must be subtracted when calculating the totals.
-   **A summary line for the Past due date buckets and Credits**.

If the credits are posted in the same account as the Payables, then the total Net Due would match the balance of the Business Partner. If the credits are posted in a different account, such as prepayments, then the balance of the Business Partner would match with the total Net Due plus the Credits (undoing the subtraction of the credits to the total).

Plus, there is a summary line for all the Business Partners.

![](https://docs.etendo.software/latest/assets/drive/1E-2_-hP5TV-Ylx8JE-KPHdZ6sZQkdHHG.png)

#### Payment Report

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Analysis Tools` > `Payment Report`

##### Overview

The Payment Report displays Receivables and/or Payables information, which can be filtered by an extensive set of available filters.

Receivables and/or Payables information is shown grouped by the payment status, besides additional grouping and ordering criteria can also be defined.

The Payment Report is an Etendo dimensional report which contains below specific filtering options:

![](https://docs.etendo.software/latest/assets/drive/1PX-rtKZBix9j8-LmDamIE90SjBybrPpM.png)

-   **Dates**: enter a **Date From** and a **Date To** to be used while retrieving the payment's data, in relation to:
    -   the payment due date
    -   the document paid date
    -   and the payment date
-   **Amounts**: enter an **Amount From** and an **Amount To** to be used while retrieving the payment's data
-   **Empty Business Partner**: select whether it is required or not to include in the report payments not related to a business partner but to a **G/L item** or a **Fee**. The options available are:
    -   **Include Empty Business Partner**: if this selection is made, the report includes also payments not related to a business partner.
    -   **Exclude Empty Business Partner**: if this selection is made, the report excludes any payment not related to a single business partner.
    -   **Only Empty Business Partner**: if this selection is made, the report only includes payments not related to a single business partner.
-   the Payment Status: the options available are:
    -   Awaiting Payment
    -   Awaiting Execution
    -   Voided
    -   Payment Made
    -   Payment Received
    -   Deposited not Cleared
    -   Withdrawn not Cleared
    -   Payment Cleared
-   the **Sales Representative.** It will show only Payments related to Invoices that have been invoiced for this Sales Representative.
-   the **Payment Method** and the **Financial Account** of the payment
-   the checkbox **"Include Payments Using Credit"** allows to
-   the **"Convert to Currency"** field allows the user to select a currency, therefore the "Transaction Amounts" in other currency than the one chosen are converted to the chosen currency and displayed in the field "Base Amount".
-   the "**Conversion date**" field allows the user to define a date to select the system conversion rate to exchange transaction amounts.
-   the **Payment Type**: the options available are:
    -   Receivables
    -   Payables
    -   Receivables & Payables
-   the checkbox "**Overdue**" allows the user to include in the report just overdue payments.
-   Finally, it is also possible to define an additional **Grouping Criteria** and **Ordering Criteria** to be used while showing the payment data output.
    -   **Grouping criteria** such as:
        -   Business Partner
        -   Project
        -   Business Partner Category
        -   Currency
        -   Account (Financial Account)
    -   **Ordering criteria** such as:
        -   Date (Payment Date)
        -   Project
        -   Business Partner Category
        -   Currency
        -   Due date (Payment due date)
        -   Account (Financial Account)
        -   Business Partner

!!! warning
    Note that if "Business Partner" for instance is selected as grouping criteria, it will be removed from the ordering criteria list, as grouping implies ordering.


The Payment Report is launched by pressing the process button "**Search**". An example of the output of the report is shown in the image below:

![](https://docs.etendo.software/latest/assets/drive/1c5purjJlxqlGJ5jZjeFLEW0IfBPMWBXX.png)

Some relevant fields to note are:

-   **Invoice Number**: the green arrow allows the user to navigate to the payment plan of the sales/purchase invoice if there is only one invoice number shown in this field.
-   **Payment**: the green arrow allows the user to navigate to the invoice/document's payment
-   **PlannedDSO** (Planned Days Sales Outstanding): the number of days between the date of the invoice and the date it was due to be paid, calculated with the formula **(Invoice) Due date - Invoice Date**.
-   **CurrentDSO** (Current Days Sales Outstanding):
    -   if there is a payment, this field shows the number of days between the date of the invoice and the date of the payment, calculated with the formula **Payment Date - Invoice Date**.
    -   if there is not a payment, this field shows the number of days the invoice is pending to be paid, calculated with the formula **Current Date - Invoice Date**.
-   **Overdue** this fields indicates whether a payment was received on time (overdue number is set to zero), early (overdue number is a negative number) or late (overdue number is a positive number)

An invoice marked with an (*) means that the invoice has been paid by using a credit payment.

Several invoices marked with (**) means that the invoices have been paid by using the same credit payment.

#### Payment Run

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Analysis Tools` > `Payment Run`

##### Overview

The payment run window is a read-only window which shows relevant information of each payment run executed within an organization.

A payment run can contain only one payment or several payments grouped and executed together.

It is possible to check the status and result of the payment run as well as the result and message of every single payment inside each payment run.

##### Payment Run

The execution date and the execution status of each payment run is shown in this window among other relevant data such as the source of the execution.

![](https://docs.etendo.software/latest/assets/drive/1-_lia6e8AfC9M7ON-PzhrWoRitQW9sSs.png)

The Payment Run window only shows the payments received or made which required an additional execution step, therefore an Automatic Execution Type is configured for the payment method used while making/receiving those payments.

The source of the payment execution can be:

-   **Automatically from Invoice process** - which means that the payment is automatically executed upon invoice completion.
    -   To get this option, the payment method needs to be configured as described below:
        -   the Automatic Receipt check-box is selected for the payments received
        -   and/or the Automatic Deposit check-box is selected for the payments received
        -   and the Deferred checkbox is not selected.
-   **Automatically from Payment process** - which means that the payment is automatically executed upon payment creation.
    -   To get this option the Deferred checkbox needs to be selected.
-   **Execute Payment Form** - which means that the payment has been executed from the Payment Execution form.
    -   To get this option the Deferred checkbox needs to be selected, therefore the deferred payment can be later on executed in the payment execution form.
-   **Payment Proposal Window** - which means that the payment has been executed from the Payment Proposal window.
    -   To get this option the Deferred checkbox needs to be selected, therefore the deferred payment can be later on executed from the payment proposal window.
-   **Payments Window** - which means that the payment has been executed either in the payment out or in the payment in window.
    -   To get this option the Deferred checkbox needs to be selected, therefore the deferred payment can be executed later on in the corresponding payment window.

There are three "Status" available:

-   Executed, which means that the payment run has been executed. The automatic execution processes currently delivered by Etendo will all get an "Executed" status.
-   and "Partially Executed" and "Pending" which are status that can be used by modules such as the Check Printing module to manage those cases where a payment was not successfully executed due to any problem occurring due to a connection failure.

###### Payments

The payment tab lists the payments executed in a payment run.

![](https://docs.etendo.software/latest/assets/drive/1porA4UfbmvSes9QKVmxrwr6b8zRav5vK.png)

###### Parameters

The parameters tab shows the value of the payment execution process parameter/s.

An Execution Process can have a set of parameters defined.

For instance, the "Print Check simple process" execution process delivered by Etendo only requires the check number upon execution of the payment.

![](https://docs.etendo.software/latest/assets/drive/14j20K8igu1aLPxaZLE1jDu_9jG-ydeaj.png)

This work is a derivative of ["Financial Management"](http://wiki.openbravo.com/wiki/Financial_Management) by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo), used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/). This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/) by [Etendo](https://etendo.software).

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Setup
## Article Path: /User Guide/Etendo Classic/Basic Features/Financial Management/Receivables and Payables/Setup
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/setup
## Article Content: 
#### Overview

This section describes the windows that are necessary to configure the financial management transactions as regards receivables and payables in Etendo. The corresponding windows are:

[:material-file-document-outline: Tax Register Type](#tax-register-type){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Payment Method](#payment-method){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Matching Algorithm](#matching-algorithm){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Bank File Format](#bank-file-format){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Execution Process](#execution-process){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Remittance Type](#remittance-type){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Doubtful Debt Method](#doubtful-debt-method){ .md-button .md-button--primary } <br>


#### Tax Register Type

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Setup` > `Tax Register Type`

##### Overview

A tax register type is used to collect all the tax rates of a type to take into account while calculating the total tax amount of a given tax register type within a period of time.

Tax register types are a key variable of the Tax Payment process as that is the process which calculates the total tax amount of each tax register type created and configured.

In other words, the "Tax Payment" process helps to calculate the amount of taxes to be paid to or to be received from the corresponding tax authority as the difference between:

-   the "Sales" tax register types or the total tax amount that is charged by an organization and paid by its customers
-   and the "Purchase" tax register types or the total tax amount that is paid by an organization to other businesses on the supplies that it receives.

##### Header

The tax register type window allows the user to create tax register types.

![Tax Register Type Header](https://docs.etendo.software/latest/assets/drive/1wwI271qWNtJQmMZxupMktzWI6S3ByU6w.png)

As shown in the image above, it is possible to create:

-   "**Sales**" related tax register types which will therefore include **sales related "Tax Rates"** in the "**Lines**" tab
-   as well "**Purchase**" related tax register types which will therefore include **purchase related "Tax Rates"** in the "**Lines**" tab

Besides, every tax register type needs to be linked to a G/L Item.

The ledger accounts defined for that G/L Item will be the ones to use while posting the tax payment calculated as the difference between the "Sales" tax register type and the "Purchase" tax register type.

##### Lines

The lines tab allows the user to associate tax rates to the tax register type.

![Tax Register Type Lines](https://docs.etendo.software/latest/assets/drive/1O_4QacWfrELWWRoG5Ye2E73Fa8AIi8i1.png)

As shown in the image above, each tax rate selected needs also to be linked to a document type.

Therefore, it is not only possible to configure the tax rates which will be taken by the tax payment process as part of a tax register type but also the document types which will be taken into account.

**Sales document types** which can be linked to the corresponding sales tax are:

-   AR Invoice
-   AR Credit Note
-   Reversed Sales Invoice
-   ES Return Material Sales Invoice

**Purchase document types** which can be linked to the corresponding sales tax are:

-   AP Invoice
-   AP Credit Note
-   Reversed Purchase Invoice

#### Payment Method

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Setup` > `Payment Method`

##### Overview

**Payment Methods** represent means of payment employed by your enterprise or by a business partner, such as:

-   Cash
-   Credit Card
-   PayPal
-   Cheque
-   Direct Debit
-   Standing Order
-   Bank Transfer
-   Note Payable

Each **payment transaction** is associated with a **Payment Method**. A payment method defines how a payment in/out is going to be managed within the receivables and payables Payment Cycle, and besides how it is going to be accounted.

**Payment Methods** are associated with Financial Accounts, so that payments can be registered in a bank or cashbook.

The payment methods which can be used within the payables and receivables management are the ones assigned to a Financial Account, therefore if any payment method configuration needs to be modified, it has to be done in the Payment Method tab of the financial account.

It is possible to associate multiple **Payment Methods** to a single Financial Account.

For instance, both checking and electronic payments may be associated with a single Financial Account as each payment method has its own configuration.

###### Payment Cycle

To better understand the configuration of a **Payment Method**, it is necessary to understand the flow of events within the payment cycle:

-   **Order:** the sales order or purchase order is used in this process of payables and receivables management in the case of an advance payment:
    -   when the sales invoice or purchase invoice gets booked, the payment information can be generated for the order from either the Payment In window or the Payment Out window.
-   **Invoice:** the purchase invoice generates a debt to a vendor and the sales invoice a debt-claim for a customer.
-   **Receipt or Payment:** the registration of the transfer of money in or out before the transaction is confirmed in our bank account or cashbook.
-   **Financial Account update:** the addition of the transaction in the Financial Account as a "Deposit" or as a "Withdrawal", related to the movement of the money in or out of our bank account or cashbook.
-   **Reconciliation:** the confirmation of the movement of the money after receiving the bank statement or cash balance.

In the image below, a Simple Payment Workflow is shown:

![](https://docs.etendo.software/latest/assets/drive/1MwU8f0EaeyCjJveISM3RGAnFAfSHfq4N.png)


The way to create each payment stage in Etendo is described below:

**First Stage:**

A "**Receipt**" can be registered in:

-   the Sales Invoice window by using the process button "Add Payment".
-   and in the Payment In window by using the process button "Add details".

A "**Payment**" can be registered in:

-   the Purchase Invoice window by using the process button "Add Payment".
-   and in the Payment Out window by using the process button "Add Details".

Above payment stages can create an **accounting event** depending on the payment method accounting configuration.

-   If it is configured to account at this stage, Receipts and Payments can be accounted in the Payment In / Payment Out window by using the process button "Post" or by running the accounting background process.

**Second Stage:**

A "**Deposit**" can be registered in:

-   the Financial Account by using the process button "Add Transaction".
-   and in the Payment In window by using the process button "Add details" and then the Action: "Process Received Payment(s) and Deposit"

A "**Withdrawal**" can be registered in:

-   the Financial Account by using the process button "Add Transaction".
-   and in the Payment Out window by using the process button "Add details" and then the action: "Process Made Payment(s) and Withdrawal"

Above payment stages can create an **accounting event** depending on the payment method accounting configuration.

-   If it is configured to account at this stage, Deposits and Withdrawals can be accounted in the Financial Account window by using the process button "Post" or by running the accounting background process.

**Third and final stage:**

A "**Reconciliation**" can be registered in:

-   the Reconciliation tab of the Financial Account window.

Above payment stage can create an **accounting event** depending on the payment method accounting configuration.

-   If it is configured to account at this stage, Reconciliations can be accounted in the Reconciliation tab of the Financial Account window by using the process button "Post" or by running the accounting background process.

###### Payment Status

To better understand the configuration of the payment method, it is also necessary to understand the **payment status** related to the process steps.

During the whole Payment Cycle, the payment is defined by one status so the user knows the last step of the process that took place and the following step that should take place.

In the following explanation and diagram below, the different Payment Statuses are explained.

-   **Awaiting Payment:** This status appears when a Receipt/Payment has been created in either the Payment In window or in the Payment Out window, but it has no details of what it is going to be received or paid.
-   **Awaiting Execution:** This status appears when the Receipt/Payment has been created and processed and there is an automated execution process to be executed.  
    This is an *optional* status which will be skipped if:
    -   the Payment Method is Manual
    -   or if the Payment Method is Automatic and it is not set as "Deferred".
-   **Payment Received/Made:** This status appears when the Receipt/Payment has been completed and processed.
-   **Deposited/Withdrawn not Cleared:** This status appears when the Receipt/Payment has been added to the Financial Account screen, therefore the corresponding Deposit/Withdrawal transaction has been created in the Financial Account.
-   **Payment Cleared:** This status appears when the Deposit/Withdrawal reconciliation has been executed.

![](https://docs.etendo.software/latest/assets/drive/1Ol1gtQAffG_S_bYKW6zAKbUK-Ez2qNRX.png)


In more detail, the way those payment status change within the payables and receivables payment cycle is:

1\. The **Receipt** of the money in or the **Payment** of the money out, before the transaction is confirmed on the bank account, changes the payment status to either:

-   **Awaiting Execution**, if there is an execution process set up in the payment method used for the financial account
-   or **Payment Received** in the case of a receipt of the money in
-   or **Payment Made** in the case of a payment of money out.

If there is an execution process set up in the payment method, the extra action of executing that process changes the status from "Awaiting Execution" to either "Payment Received" or "Payment Made".

2\. The **Deposit** of the payment in the financial account changes the payment status from **"Payment Received"** to **"Deposited not Cleared"**

and the **Withdrawal** of the payment from the financial account changes the payment status from **"Payment Made"** to **"Withdrawn not Cleared"**.

3\. The **Clearing** or reconciliation of the payments changes the payment status from either **"Deposited not Cleared"** or **"Withdrawn not Cleared"** to **"Payment Cleared"**

###### Payment Method

The image below shows the Payment Method window. That is the window where payment methods are configured.

However, payment methods are assigned to financial accounts, therefore, a different configuration of a given payment method can also be defined in the payment method tab of the financial account window.

![](https://docs.etendo.software/latest/assets/drive/10h0Lmw3yZ6rITkSq7q4nijmHlH_6jg5-.png)

As a consequence, the same method of payment can have different configuration "versions" depending on the financial account it has been assigned to.

It is very important to remark that:

-   the **configuration of a payment method created in a financial account overwrites the "generic" configuration of that payment method** while managing payments associated to that payment method in that financial account.
-   even more, **the payment methods which can be use**:
    -   while issuing a sales invoice for instance
    -   or while assigning a by default payment method to a vendor

**are the ones which are already assigned to a financial account**.

In other words, it is not possible to use a payment method if it is not assigned to a financial account.

Finally, if reviewing the payment method assigned to a business partner is required,  the steps to follow are:

-   navigate to the financial account assigned to that business partner if any
-   and then to the payment method tab of the financial account.

Payment Method configuration includes the features below:

-   if it is going to be used for **receiving payments** and/or **making payments**
-   if it implies a **manual execution**, for instance "Cash" or an **automatic execution**, for instance "Check"
-   if it is going to **automatically create the registration of the transfer of money** before the transaction is confirmed on our bank account or cashbook.
    -   that is a "**Receipt**" in case of receiving a payment
    -   that is a "**Payment**" in case of making a payment
-   if it is going to **automatically add the transaction in the financial account** related to the movement of the money in or out of our bank account or cashbook.
    -   that is a "**Deposit**" in case of receiving a payment
    -   that is a "**Withdrawn**" in case of making a payment
-   if it allows the user to **receive or make payments in other currencies** than the financial account currency
-   and finally, how the payment is going to be **accounted**.

!!! info
    To learn more, visit the section [Accounting Payment Workflow](https://docs.etendo.software/latest/financial-management/receivables-and-payables/setup.md#accounting-payment-workflow).


Payment Methods can be configured as explained below in detail:

###### **Payment Method configuration**

####### Payment In Configuration:

-   **Payment In Allowed:** If checked, the Payment Method is enabled to receive payments.
-   **Automatic Receipt:** If checked, on completion of a Sales Invoice the payment is automatically received.  
    In order to use this option, the corresponding customer needs to have a "Financial Account" defined by default in the customer tab of the Business Partner window. The reason why is:
    -   this check automatically creates a "Receipt" transaction in the Payment In window. A payment in requires a financial account.
-   **Automatic Deposit:** If checked, on completion of the Receipt the payment is automatically deposited in the financial account.  
    In order to use this option, the corresponding customer needs to have a "Financial Account" defined by default in the customer tab of the Business Partner window. The reason why is:
    -   this check automatically creates a "Deposit" transaction in the transaction tab of the financial account window. A deposit requires a financial account.
-   **Receive Payments in Multiple Currencies:** If checked, it is possible to receive payments in other currencies than the Financial Account default currency.
    -   Above means that a sales invoice in USD can be deposited in a Financial Account configured in EUROS, for instance. For getting that working the corresponding customers need to have a Sales Price List in USD assigned.
    -   It will be possible to enter a given exchange rate while creating the payment in the Sales Invoice window, by using the "Add Payment" button.
    -   It will be possible to select both USD currency and a given exchange rate, while "manually" receiving the payment in the Payment In window, or while "manually" creating the deposit of the payment in the transaction tab of the financial account window, by using the "Add Transaction" button and then the "Add Payment In/Out" button.
-   **Execution Type**. There are payments which might or might not require an additional step to be executed. Therefore, there are two execution types:
    -   **Manual:** this is the execution type by default, unless it is changed to "Automatic". This type implies the "Reception" of the payment as a manual event without the need of any additional system step. For example, payment by cash.
    -   **Automatic:** if the execution type is changed to "Automatic" Etendo allows the user to choose an "Execution Process, in other words the "Reception" of the payment requires to execute an additional step for instance the recording of a "Check Number".  
        There are three execution process available:
        -   **Simple Execution Process** - this process does not require any action as it automatically changes the payment status from Awaiting Execution to Payment Received.
        -   **Print Check simple process** - this process shows a window which allows the user to enter a check number while processing the payment in the Payment In window, and changes the payment status from Awaiting Execution to Payment Made. The check number entered is saved as the "Reference Number" of the Payment.
            -   In case there are more than one payment and a given check number is entered, the process automatically saves as many consecutive check numbers as payments. Those numbers are also saved as "Reference Number" of the Payments.
        -   **Leave as Credit** - this process is just use Return Materials functionality as it allows the user to change a negative payment in/out into a positive credit for the business partner (customer/vendor).
    -   **Deferred:**
        -   If not checked the payment once processed is also automatically executed, this applies to "Simple Execution Process" where no additional action is needed.
        -   If checked, the payment is processed but it is not executed. It has to be manually executed once the payment gets an "Awaiting Execution" Payment Status in the Payment In window by using the button "Execute Payment". That applies to "Print Check simple process" where a check number needs to be entered for instance.
-   **Upon Receipt Use:** Account to be used to account the payment Receipt.
    -   Would normally be either left blank if the financial transaction is going to be created later in the workflow or if it is not required any posting at this stage in the cycle, otherwise the "In Transit Payment Account" can be assigned to get that:
        -   the payment Receipt is posted in the "In Transit Payment IN Account" defined in the Accounting Configuration tab of the financial account window.
-   **Upon Deposit Use:** Account to be used to account the payment Deposit.
    -   Would normally be left blank if no financial transaction required for the Deposit event or if it is not required any posting at this stage, otherwise the "Deposited Payment Account" can be assigned to get that:
        -   the payment Deposit is posted in the "Deposit Account" defined in the Accounting Configuration tab of the financial account window.
-   **Upon Reconciliation Use:** Account to be used to account payment Reconciliation.
    -   Would normally be set to the "Cleared Payment Account", but could be left blank if the payment Receipt or if the payment Deposit have already been posted earlier in the process. If it is set to "Cleared Payment Account":
        -   the payment Reconciliation is posted in the "Cleared Payment Account" defined in the Accounting Configuration tab of the financial account window.

####### Payment Out Configuration:

-   **Payment Out Allowed:** If checked the Payment Method is enabled to make payments.
-   **Automatic Payment:** If checked, on completion of a Purchase Invoice the payment is automatically received.  
    In order to use this option,  the corresponding vendor needs to have a "Financial Account" defined by default in the vendor tab of the Business Partner window. The reason why is:
    -   this check automatically creates a "Payment" transaction in the Payment Out window. A payment out requires a financial account.
-   **Automatic Withdrawn:** If checked, on completion of the payment, the payment is automatically withdrawn from the financial account.  
    In order to use this option, the corresponding vendor needs to have a "Financial Account" defined by default in the vendor tab of the Business Partner window. The reason why is:
    -   this check automatically creates a "Withdrawal" transaction in the transaction tab of the financial account window. A withdrawn requires a financial account.
-   **Make Payments in Multiple Currencies:** If checked, it is possible to make payments in other currencies than the Financial Account default currency.
    -   The information above means that a purchase invoice in USD can be withdrawn in a Financial Account configured in EUROS, for instance. In order to use this option, the corresponding vendor needs to have a Purchase Price List in USD assigned.
    -   It will be possible to enter a given exchange rate while creating the payment out in the Purchase Invoice window, by using the "Add Payment" button.
    -   It will be possible to select both USD currency and a given exchange rate, while "manually" making the payment out in the Payment Out window, or while "manually" creating the withdrawn of the payment out in the transaction tab of the financial account window, by using the "Add Transaction" button and then the "Add Payment In/Out" button.
-   **Execution Type**. Same as above but for the payments made.
-   **Upon Payment Use:** Account to be used to account the payment.
    -   Would normally be either left blank if the financial transaction is going to be created later in the workflow or if it is not required any posting at this stage in the cycle, otherwise the "In Transit Payment Account" can be assigned to get that:
        -   the payment is posted in the "In Transit Payment OUT Account" defined in the Accounting Configuration tab of the financial account window.
-   **Upon Withdrawal Use:** Account to be used to account the payment Withdrawal.
    -   Would normally be left blank if no financial transaction required for the Withdrawal event or if it is not required any posting at this stage, otherwise the "Withdrawal Payment Account" can be assigned to get that:
        -   the payment Withdrawal is posted in the "Withdrawal Account" defined in the Accounting Configuration tab of the financial account window.
-   **Upon Reconciliation Use:** Account to be used to account payment Reconciliation.
    -   Would normally be set to the "Cleared Payment Account", but could be left blank if the payment or if the withdrawal have already been posted earlier in the process. If it is set to "Cleared Payment Account":
        -   the payment Reconciliation is posted in the "Cleared Payment Account" defined in the Accounting Configuration tab of the financial account window.

One of the key features allowed by the payment method configuration is to get that two of the three payment cycle stages can be automated:


![](https://docs.etendo.software/latest/assets/drive/1V8vW4qdKyJxH9BGNX5xWZaRmXNJvbSkr.png)


As shown in the image above, if the **Automatic Receipt/Payment and Automatic Deposit/Withdrawn are selected**, the manual actions to execute are:

-   the creation and booking of the sales/purchase invoice
-   the payment in/out reconciliation in the financial account

because, the Payment In/Out as well as the Deposit/Withdrawn transactions are automatically created.

If the **Automatic Receipt/Payment and Automatic Deposit/Withdrawn are NOT selected**, the manual actions to execute are:

-   the creation and booking of the sales/purchase invoice
-   the creation of the Payment In/Out
-   and the creation of the Deposit/Withdrawal transaction in the financial account, unless the action "Process Made Payment(s) and Withdrawal" or "Process Received Payment(s) and Deposit" are selected while processing the payment.

####### **Accounting Payment Workflow**

Etendo allows a flexible payment accounting process, that means that a payment associated with a given payment method can be posted or not in any of its Payment Cycle stages.

As already described a payment received from a customer goes through below stages:

-   Step 1 - the "Receipt" of the payment
-   Step 2 - the "Deposit" of the Receipt in the Financial Account
-   Step 3 - and finally the "Reconciliation" of the Deposit once the bank statement has been received.

Analogue situation happens while making a payment to a vendor:

-   Step 1 - the "Payment"
-   Step 2 - the "Withdrawal" of the payment from the Financial Account
-   Step 3 - and finally the "Reconciliation" of the Withdrawal once the bank statement has been received.

![](https://docs.etendo.software/latest/assets/drive/1dugshR9aHhF3ahlQd03ILe6xTAPKVg0a.png)

For each step, it is possible to specify the default account for the receivables and payables cycles independently.

Each financial account needs to have at least one default account for both the receivables and payables cycle at either step 1, step 2 or step 3.

Both on the payables and receivables side, the first step containing an account represents the moment in which the supplier liability or customer receivables are cancelled.

For instance, if the Receive Payment Account is empty and you specify a Deposit Account, the customer receivables is cancelled at the moment of the deposit, not at the time of recording of the payment.

Any subsequent step having an account would offset the account in the previous step with the account in that step to represent the diminishing of the risk.

In other words, each of the stages can be posted in the windows/tabs where those are created if there is a value defined in the "Upon...Use" fields.

For instance:

-   if for a payment method the value "**In Transit Payment Account**" is selected in the field "**Upon Receipt Use**" that means that:
    -   the receipt of the payment can be posted in the Payment In window by using the process button "Post".
    -   the customer receivable is going to be cancelled by the "**In Transit Payment IN Account**" defined in the accounting configuration tab of the financial account window.
-   if for a payment method the value "**Deposited Payment Account**" is selected in the field "**Upon Deposit Use**" that means that:
    -   the deposit of the payment can be posted in the Transaction tab of the financial account window by using the process button "Post".
    -   the payment receipt is going to be cancelled by the "**Deposit Account**" defined in the accounting configuration tab of the financial account window.
-   if for a payment method the value "**Cleared Payment Account**" is selected in the field "**Upon Clearing use**"
    -   that means that the reconciliation of the deposit can be posted in the Reconciliation tab of the financial account window by using the process button "Post".
    -   the deposit of the payment is going to be cancelled by the "**Cleared Payment Account**" defined in the accounting configuration tab of the financial account window.

!!! note
    If any account is left empty, it implies that the process button "Post" is shown as "Post: Disable for accounting" in the corresponding window.


#### Matching Algorithm

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Setup` > `Matching Algorithm`

##### Overview

Etendo allows the user to reconcile deposit and withdrawal transactions of a financial account in two ways:

1.  **Automatically** by matching up the bank statement lines (imported or not) with the financial account transactions.  
    In this case, a matching algorithm is necessary to drive the matching process.
2.  **Manually** by using the Reconcile process button of the financial account window.  
    This way of reconciliation does not require a matching algorithm.

Etendo delivers out of the box the "**Standard**" matching algorithm, which can be found and configured in the **Matching Algorithm** window.

###### Matching Algorithm

The matching algorithm window lists and allows the user to configure the algorithm/s to use while matching up bank statement lines with financial account transactions.

As shown in the image above, the "**Standard**" matching algorithm has three checkboxes which allow the user to configure the financial account transactions matching process:

-   **Match BP Name:** This option gets a strong match if the business partner name of the bank statement line matches the business partner name of the financial account transaction.
-   **Match Reference:** This option gets a strong match if the reference of the bank statement line matches the reference of the financial account transaction.
-   **Match Transaction Date:** This option gets a strong match if the business partner name of the bank statement line matches the business partner name of the financial account transaction.

!!! info
    It is possible to select all the above checks at once or just some of them in order to configure how to get a strong match.


#### Bank File Format

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Setup` > `Bank File Format`

##### Overview

Etendo allows the user to import a bank statement file to an organization's financial account if a bank file format is configured for the organization.

Etendo delivers some modules which, once installed, allow the user to import bank statement files into Etendo in different formats:

-   OFX Bank Statement Format
-   CSV Generic Bank Statement Importer
-   WePay CSV Importer
-   and the Spanish one Cuaderno 43

Once a bank statement file is imported to an organization's financial account:

-   the overall information such as the file name and the import date are saved in the Imported Bank Statements tab of the financial account
-   and the content of the bank statement file is saved line by line in the corresponding Bank Statement Lines tab.

###### Bank File Format

The bank file format window lists the bank file format modules installed for an organization.

![Bank File Format](https://docs.etendo.software/latest/assets/drive/1m1UirW3EvMahtJQK5imtme5TZTf-Iy9w.png)

As shown in the image above, a bank file format can be applied to the organization in the Enterprise Module Management window after being installed, therefore it is available for any organization of the client.

###### Exceptions
Exceptions can be added to a bank file import format, therefore they are not taken by the import process.
It is possible to define the text to exclude while matching transactions and bank statement lines on a given financial account or in all of them.

#### Execution Process

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Setup` > `Execution Process`

##### Overview

Some payment types require an additional activity to be executed upon completion of the payment.

For instance, a payment with a check might require the recording of the check number and the printing of the check.

Overall, the execution process is a definition of the **activity/ies** that the system or the user has to execute to get that a payment is finally recorded as:

-   **made/withdrawn from the financial account**
-   or **received/deposited in the financial account**.

###### Process

The execution process window lists the available execution processes.

Etendo delivers by default execution processes described below:

-   **Simple Execution Process** - this process runs a system activity which changes the payment status from "Awaiting Execution" to "Payment Received"/"Payment Made" (or "Deposited not Cleared"/"Withdrawn not Cleared")
-   **Print Check simple process** - this process opens a window which allows the user to enter a check number while processing the payment.
-   **Leave as Credit** - this process is just use Return Materials functionality as it allows the user to change a negative payment in/out into a positive credit for the business partner (customer/vendor).

The payments that require a separate activity to be executed need to be configured to make them work, that implies the selection of the "**Automatic**" option in the field "**Execution Process**", therefore an execution process of the ones listed above can be selected while configuring the payment method.


###### Parameter

The parameter tab allows the user to configure the additional activity to execute upon completion of a payment. For instance, to record a check number.

![Parameter tab](https://docs.etendo.software/latest/assets/drive/17seAr4S-i9aqgCgpcrr01lDo4hXD22Rn.png)

As shown in the image above, the "**Print Check Simple Process**" has one parameter named "**Check Number**". That parameter is an "**In**" "**Parameter Type**" which "**Input Type**" is "**Text**".

Above configuration means that the check number needs to be entered as a text by the user.

An **"In" parameter type** can also be a checkbox, therefore instead of entering a text, the user needs to select a checkbox or not. It is also possible to define whether the default value of the checkbox is going to be "Yes" or "No".

Besides, the parameter types can also be a "**Constant**", therefore the "**Default Text Value**" of the constant can be specified.

!!! info
    The value register for any of the above defined parameter's types is saved in the Parameters tab of the corresponding payment run.

#### Remittance Type 

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Setup` > `Remittance Type`

To configure the remittance payment method it is necessary to previously execute a dataset that has created this payment method and the execution process. 

!!! info
    The "Deferred" field should always be checked for payment methods that apply to remittances.

![](https://docs.etendo.software/latest/assets/drive/1Qe3mdTduM3wJctZkC3N8z-yLRL_Gq6Y_.png)

!!! info
    No accounting will be defined for any of the transactions associated with the remittance payment method, so that no double accounting is generated. Remittance accounting is configured from the remittance types window.


The next step is the configuration of the type of remittance and the assignment of the accounting accounts for its posting.
It is possible to create as many remittance types as financial accounts available so that the appropriate accounting accounts can be assigned to each of them. 

The following accounts are defined:<br>
**Sent account:** the account to be used in the remittance posting.<br>
**Settlement account:** account to be used for the remittance settlement posting, which refers to the amount having been collected or paid.

![](https://docs.etendo.software/latest/assets/drive/1fUwM5P-aNQOSlIm1u_mYfDAdQzbPO6ur.png)

To finish the process, the payment methods applicable to each financial account should be associated. 

!!! info
    It is important that those banks from which remittance transactions are to be made have a third party partner.

![](https://docs.etendo.software/latest/assets/drive/1lNuqadYEmnZeOl8RcS3hXS_2-N7GrVfg.png)


##### Non-Discount Remittances
To configure Non-Discount Remittances, define this payment method from the Payment Method window.  

![](https://docs.etendo.software/latest/assets/drive/11mLuoH5qVVh_8tjnepUL12O6oaOkIoY2.png)


![](https://docs.etendo.software/latest/assets/drive/1Y0pJr2nUKDJEYbp85_a75ifAKQ70IIqO.png)

!!! info
    To create a Non-Discount remittance go to the [Remittance window](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#remittance). 

##### Remit for Discount

To configure Remittances for Discount, define the type from the Remit for Discount check box as shown in the image below: 

![](https://docs.etendo.software/latest/assets/drive/1xW3siKWbirKqZAazQzIoLoPcGMknNwjk.png)



![](https://docs.etendo.software/latest/assets/drive/12vjozrcXO3zaa1j9_e0P9xj3TD9kJ-FI.png)

!!! info
    To create a Remit for Discount remittance go to the [Remittance window](https://docs.etendo.software/latest/financial-management/receivables-and-payables/transactions.md#remittance).


#### Doubtful Debt Method

:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Setup` > `Doubtful Debt Method`

##### Overview

Through this window, it is possible to define a Doubtful Debt Method, which will be available to use as a template when creating a new Doubtful Debt Run.

###### Doubtful Debt Method

![Doubtful Debt Method](https://docs.etendo.software/latest/assets/drive/1aJifeptvA2B8lIiaFEBtvNIbXUcJpRxO.png)

Fields to note:

-   **Days Overdue:** This field is used as a filter when selecting the existing debts. It can be removed afterwards.
-   **Percentage:** This field is used when selecting the existing debts as the default percentage of the debt that is going to be considered as doubtful. It can be changed afterwards.

---
This work is a derivative of ["Financial Management"](http://wiki.openbravo.com/wiki/Financial_Management){target="_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="_blank"} by [Etendo](https://etendo.software){target="_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Transactions
## Article Path: /User Guide/Etendo Classic/Basic Features/Financial Management/Accounting/Transactions
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions
## Article Content: 
#### Overview

This section describes the windows related to the accounting transactions that are part of the Financial Management in Etendo. The corresponding windows are:

[:material-file-document-outline: Financial Type Configuration](#financial-type-configuration){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Simple G/L Journal](#simple-gl-journal){ .md-button .md-button--primary } <br>

[:material-file-document-outline: G/L Journal](#gl-journal){ .md-button .md-button--primary } <br>

[:material-file-document-outline: End Year Close](#end-year-close){ .md-button .md-button--primary } <br>

[:material-file-document-outline: GL Posting by DB Tables ](#gl-posting-by-db-tables){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Budget](#budget){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Create Budget Reports in Excel](#create-budget-reports-in-excel){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Not Posted Transaction Report](#not-posted-transaction-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Reset Accounting](#reset-accounting){ .md-button .md-button--primary } <br>

[:material-file-document-outline: VAT Regularization](#vat-regularization){ .md-button .md-button--primary } <br>

#### Financial Type Configuration

:material-menu: `Application` > `Financial Management` > `Accounting` > `Transactions` > `Financial Type Configuration`

##### Overview

This feature allows entering in the system all the financings the company has. It is possible  to exploit the information through the bank pool report. 
Depending on the financial product used in this new **Financing** window, Etendo generates financing plans automatically (Leasing, Renting and Loans) and also manages the invoices and payments from this same window. 

The usual financing products are: 

- Invoice Advance
- Bank Guarantee 
- Confirming
- Foreign Trade
- Credit Account
- Factoring
- Leasing
- Loans
- Renting 
- Credit Cards. 

These financing methods are loaded into the system using a dataset.

!!! info
    For more information, visit [Financial Type](https://docs.etendo.software/latest/financial-management/accounting/setup.md#financial-type).


##### Header
The main header has the following fields:

- **Organization**: drop-down list of organizations.    
- **Financial Type**: drop-down list of methods  Invoice Advance, Bank Guarantee, Confirming, Foreign Trade, Credit Account, Factoring, Leasing, Loans, Renting and Credit Cards.   
- **Financial Bank/Entity**: drop-down list of the business partner window.  
- **Financial Account**: drop-down list of the Financial Account window.    
- **Payment Method**: drop-down list of the payment methods indicated in the selected financial account.    
- **Name**: free field to add information.  
- **Date**: date field (contract signature date).   
- **Due Date**: date field. 
- **Lack (Month)**: numeric field (Integers)    
- **Currency**: drop-down list of the currency window.   
- **Amount Granted**: numeric field with 2 decimals.    
- **Amount Drawn**: numeric field with 2 decimals.  
- **Amount Available**: numeric field with 2 decimals.  
- **Residual Value**: numeric field with 2 decimals.    
- **Installment No**: integer numeric field.    
- **% Annual Interest**: % numeric field with 2 decimals.   
- **Periodic commission**: numeric field with 2 decimals.   
- **Opening Financial Expenses**: numeric field with 2 decimals.    
- **Frequency**: drop-down list (Monthly, Bimonthly, Quarterly, Quarterly, Semiannual, Annual)  
- **Payment Date**: numeric field. Integer (limit of 31)    
- **Purpose**: free field to add information.   
- **Warranty**: free field to add information.  
- **% Early Cancellation Fee**: % numeric field with 2 decimals.    
- **% Early Amortization Commission**: % numeric field with 2 decimals. 
- **Ledger account at long term**: informative field to indicate the accounting account of the  account tree.   
- **Ledger account at short term**: informative field to indicate the accounting account of the account tree.   
- **Ledger account at purchase option**: informative field to indicate the accounting account of the account tree.  
- **Project**: drop-down list of the “Multiphase Project“ window.   
- **Cost Center**: drop-down list of the “Cost Center” window.

![](https://docs.etendo.software/latest/assets/drive/1jmKFmy5LNZ9pjB7h1giXvNre6KYpI8BX.png)

##### Lines
 
Lines contain the following fields:
 
- **Installment No**: numeric field. Integer. 
- **Amortization/ Expiration date**: date field.
- **Installment**: numeric field with 2 decimals.
- **Amortization/Renting**: numeric field with 2 decimals.
- **Interest**: numeric field with 2 decimals.
- **Commission**: numeric field with 2 decimals.
- **Total Amortization**: numeric field with 2 decimals.
- **Pending Amortization**: numeric field with 2 decimals.
- **Invoice**: the linkage to the generated invoice is shown (Leasing/Renting).
- **Payment**: the linkage to the generated payment is shown (Loan). 
- **Business Partner Finance**: business partners ‘ drop-down list (this is used as an informative field to know about advance invoices, Confirming, Comex, how much has each been financed).
- **Date**: date field. 
- **Project:** drop-down list of the “Multiphase Project“ window.
- **Cost Center**: drop-down list of the “Cost Center” window.
 
![](https://docs.etendo.software/latest/assets/drive/10-YHo9nG7tBwph55ag0oNzkhqgbkfihr.png)
 
##### Accounting 
 
 There are three sections: “Amortization/Renting”, “Interest” and “Commission”. There are six fields in total where three of them represent the product and the other three, the accounting concept. The 2 fields (product and accounting concept) cannot be filled in the same section. In each of these related fields, the product must be indicated from the **Products** window or **Accounting Concept** if the **Available in Financial Invoices** check box needed to assign to each column is activated. In the case of the type of financing **Loan**, it is obligatory to fill in the part of accounting concepts.
 
 ![](https://docs.etendo.software/latest/assets/drive/1eQLGjpM9vAMRCbo4_gh2-J9Nc6yd36lU.png)
 

##### Loan, Leasing or Renting calculation in the lines tab

Fill the necessary fields of the header according to the description of each of them indicated at the top of the document. Such information allows the automatic creation of the finance plan, which is created by clicking the “Update Finance plan” button at the upper right margin of the window.
 
![](https://docs.etendo.software/latest/assets/drive/1-laz4Iz4Vr4bWWskpQvNTOjMnOU0RrVO.png)
 
###### Loan: 
- **Installment No**: It starts with the installment number 0 and the “pending amortization” field has the value indicated in the “granted amount” field, and the “date” field has the indicated date in the header field “date”. The rest of the installments are correlative, adding 1 by 1.
- **Amortization/Expiration date**: To see the date of the installment number 1 of the finance plan, it is indicated when clicking the new button “Create finance plan”. A pop up is shown to indicate the date. Click “OK”. The rest of the lines are created with the frequency indicated in the “Frequency” field, with the date of the last installment created and the date indicated in the “payment date” field. If lack is indicated, the indicated date when clicking “Create finance plan” is the first lack installment, the rest of the installments, lack and amortization ones, are created according to the indicated frequency. The lack installments are indicated with the installment number 0.
- **Installment**: At first, the same installment is calculated for the entire loan. If the interest rate changes during the loan period, the installment is changed. To do this, change the 1% interest rate of the header and click the new button of the header “Update Finance Plan”. The information is updated from the following line to the last line with an associated payment.
- **Amortization/Renting**: Redeemed amount in the installment.
- **Interest**: Interest to pay in the installment.
- **Commission**: filled with the information entered in the “Periodic Commission” field of the header, if any. If not, the value is 0.
- **Total Amortization**: Addition of the values in the previous column “amortization/renting” and regarding the same calculated line. Read-only field.
- **Pending amortization**: Difference between the “granted amount” indicated in the header and the “total amortization” of the same calculated line. Read-only field.
- **Payment**: The related payment is shown.
- **Business Partner**: If indicated in the header, the business partner is shown in this field. If not, it can be manually indicated.
- **Project**: If indicated in the header, the project information is shown in this field. If not, it can be manually indicated.
- **Cost Center**: If indicated in the header, the cost center is shown in this field. If not, it can be manually indicated.
 
 ![](https://docs.etendo.software/latest/assets/drive/14Ih3VtN49OvT6_mFvoqD6aRl0-2Q6Zo6.png)
 
 ![](https://docs.etendo.software/latest/assets/drive/1xWW0_nVq1kjh_cumMvK21HnEfDFr_bxu.png)
 
###### Leasing:
- **Installment No**: It starts with the installment number 0 and the “pending amortization” field has the value indicated in the “granted amount” field, and the “date” field has the indicated date in the … The rest of the installments are correlative, adding 1 by 1.
- **Amortization/Expiration date**: To see the date of the installment number 1 of the finance plan, it is indicated when clicking the new button “Create finance plan”. A pop up is shown to indicate the date. Click “OK”. The rest of the lines are created with the frequency indicated in the “Frequency” field, with the date of the last installment created and the date indicated in the “payment date” field. If lack is indicated, the indicated date when clicking “Create finance plan” is the first lack installment, the rest of the installments lack and amortization ones, are created according to the indicated frequency. The lack installments are indicated with the installment number 0.
- **Installment**: At first, the same installment is calculated for the entire leasing. If the interest rate changes during the leasing period, the installment is changed. To do this, change the 1% interest rate of the header and click the new button of the header “Update Finance Plan”. The information is updated from the following line to the last line with an associated invoice. Lastly, one last line with the residual value is included, if any, in the same date of the last calculated line.
- **Amortization/Renting**: Redeemed amount in the installment.
- **Interest**: Interest to pay in the installment.
- **Commission**: filled with the information entered in the “Periodic Commission” field of the header, if any. If not, the value is 0.
-  **Total Amortization**: Addition of the values in the previous column “amortization/renting” and regarding the same calculated line. Read-only field.
- **Pending amortization**: Difference between the “granted amount” indicated in the header and the “total amortization” of the same calculated line. Read-only field.
- **Invoice**: The related invoice is shown.
- **Payment**: The related payment is shown.
- **Business Partner**: If indicated in the header, the business partner is shown in this field. If not, it can be manually indicated.
- **Project**: If indicated in the header, the project information is shown in this field. If not, it can be manually indicated.
- **Cost Center**: If indicated in the header, the cost center is shown in this field. If not, it can be manually indicated.
 
 ![](https://docs.etendo.software/latest/assets/drive/1VZWhH1uWsjLVMD3PcGRLL-PAsUATljDu.png)
 
 ![](https://docs.etendo.software/latest/assets/drive/1qzAFpd3xnZ-HdM8QYZkeRiTPrFtCZ156.png)
 
###### Renting
- **Installment No**: It starts with the installment number 0 and the rest of the installments are correlative, adding 1 by 1.
- **Amortization/Expiration date**: To see the date of the installment number 1 of the finance plan, it is indicated when clicking the new button “Create finance plan”. A pop up is shown to indicate the date. Click “OK”. The rest of the lines are created with the frequency indicated in the “Frequency” field, with the date of the last installment created and the date indicated in the “payment date” field.
- **Installment**: The result of the “Granted amount” divided the installments number.
- **Amortization/Renting**: Redeemed amount in the installment.
- **Interest**: Interest to pay in the installment.
- **Commission**: filled with the information entered in the “Periodic Commission” field of the header, if any. If not, the value is 0.
- **Invoice**: The related invoice is shown.
- **Business Partner**: If indicated in the header, the business partner is shown in this field. If not, it can be manually indicated.
- **Project**: If indicated in the header, the project information is shown in this field. If not, it can be manually indicated.
- **Cost Center**: If indicated in the header, the cost center is shown in this field. If not, it can be manually indicated.
 
 ![](https://docs.etendo.software/latest/assets/drive/1kTCqTfIYwvMIWkPpe1pYTg862Igm509S.png)
 
 ![](https://docs.etendo.software/latest/assets/drive/1iog1B9hLNu48VixtuTNFBI7LILxLsGKT.png)
 
####### Generating payments or invoices

Once the amortization plan is created, payments (loans) and invoices (leasing and renting) for each line can be generated. This is possible individually (line by line) or in groups (3 lines can be selected and 3 different payments/invoices are generated).
 
In order to do this, select the required line/s and click the “Create payment” (loans) or “Create invoice” (leasing or renting) buttons shown in the upper right margin of the window.
 
**Loan**:
 
 ![](https://docs.etendo.software/latest/assets/drive/1OCunghF0jWITNTUxMFgM6CEhrQpnvgjX.png)
 
**Leasing**:
 
 
 ![](https://docs.etendo.software/latest/assets/drive/1pediSQ58EVWkA619-VY80W9AyrzlTHtz.png)

 
**Renting**:

 ![](https://docs.etendo.software/latest/assets/drive/1bEcDIiMM9bYTVIFcNW4_No-Dbd19NaGE.png)

 
####### Credit account and credit cards reported in financial accounts.
 
The Credit account and Credit card information is automatically entered. To do this, create a new header and indicate the finance method, “Credit account” or “Credit card”. Then, the button “Add Financial Account” is enabled in the upper right margin. 
 
![](https://docs.etendo.software/latest/assets/drive/1K6HHmJ723s2BMk5o-FKH34n6dEs6uo1E.png)
 
When clicking the button, a pop up is shown and it is possible to select a financial account (only those with the “Add to bank pool” flag checked are shown).
 
![](https://docs.etendo.software/latest/assets/drive/1jG0EQ3FQ8NWJeo6oIXJfY8msx80tyMJU.png)

![](https://docs.etendo.software/latest/assets/drive/1W5brf7TNC5rUNhZmtIftjtGoBocJjX2N.png)

Once this credit account/credit card is created in the financings and its information has to be updated, click the “Update Financial Account” button in the upper right margin.
 
![](https://docs.etendo.software/latest/assets/drive/15ivJAiL2y4phrUGAatnzasqFpzC384U_.png)
 
The fields to be copied from the account or credit card are the equivalent ones in the “Financial Account” field, the amount of residual value to be indicated in the “Amount Available” field and the “Credit Limit” amount to be indicated in the “Amount Granted” field. All other fields in the header are editable to include the rest of the information.

#### Simple G/L Journal

:material-menu: `Application` > `Financial Management` > `Accounting` > `Transactions` > `Simple G/L Journal`

##### Overview

In Etendo there is a GL Journal window that allows the user to manually enter GL journals in the system. This window has three tabs (Batch, Header and Lines) and in some cases this can be difficult for the user since it might be enough with just two levels (Header and lines). Another issue that this window has is that only accounting schemas can be selected, so when posting the GL journal there is only one entry in the fact\_Acct table.

####### Benefits of the Simple G/L Journal

-   It is a simpler window since it is not necessary to enter a batch. There is one less level of data entry.
-   It is simpler to search journal entries. Without the batch level, it is possible to directly search for specific journal entries.
-   In this window, it is possible to see journal entries that have been created using the GL Journal window, so it is possible to search journal entries as well.

##### Header

A G/L journal header can include journals which can contain several journal lines.

Important field to note:

-   *Multi-general ledger*: A flag
    -   If it is not marked, the General ledger field is shown from then on.
    -   If it is marked, the system will not show the General ledger field, and it will not be taken into account for next operations.

##### Lines

The lines tab allows the user to enter the journal entries of a G/L journal as well as G/L item payment related information.

One field to note:

-   G/L Item: Combo where all G/L Items are shown. It has a logical display, and it is only shown when **Multi-general ledger** is flagged in the header.

!!! info
    If **Multi-general ledger** is not flagged, then the Account field is shown instead.


###### Accounting

Accounting information related to the GL Journal

When Posting the Header:

-   All accounting entries are created either with account combinations (Account) or GL item. There cannot be mixed lines.
-   If **Multi-General Ledger** is:
    -   Not marked: It can only select accounts that belong to just one accounting schema (defined in the header) so when posting the document there will be just one journal entry. This behaviour will not change. Posting process exactly as GL Journal window
    -   Marked: the user selects G/L Items and since it can have different valid combinations when posting the document, it will have as many entries as in different accounts it is defined the GL item and the organization defined in the header.

###### Exchange Rates

The exchange rate tab allows the user to enter an exchange rate between the organization's general ledger currency and the currency of the G/L Journal to be used while posting the G/L Journal to the ledger.

!!! info
    This tab will only be displayed when Multi General Ledger is enabled.

##### GL Journal Reverse 

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

This functionality is specifically useful for companies that have a month close, instead of an end year close, but with pending payments (in or out). It allows the user to open or close the period without taking into account the payments until they are made.

In order to use this functionality, in both “GL journal” and “Simple GL journal” windows, the user can click the button “Reverse Journal” in the toolbar when selecting an entry.

![](https://docs.etendo.software/latest/assets/drive/185JazYlxodMfPSx-2B4RgVe9UVadeUks.png)

In this way, Etendo automatically creates a reverse entry that compensates the amount in the credit and debit columns. 
> 
!!! info
    It is important to note that, by default, the reverse document will be created as a draft. That is why Etendo shows the check “process document” when clicking the “Reverse Journal” button. In this way, the user can complete the document.

As seen below, Etendo shows a success notification in green with the new GL Journal number.

![](https://docs.etendo.software/latest/assets/drive/1QAaLd-Rkiay5X6sKozqV80H7ykVoes53.png)

When comparing the original GL Journal to the reverse GL Journal, the debit and credit columns show the compensation, since the amounts are reversed.

####### Original GL journal

![](https://docs.etendo.software/latest/assets/drive/1l7-FyYg87NhJheS_L7GTATeJsvvoA41K.png)

####### Reverse GL Journal

![](https://docs.etendo.software/latest/assets/drive/1tZDhsR7UlZUz7itZlxDBVouv9QHIj-_G.png)

###### Changing description option in the Simple GL Journal window

If the GL Journal entry is created in the Simple GL Journal window, it is possible for the user to change the description of the GL journal, once it clicks on the “Reverse Journal” button, in the corresponding pop up window. 
 
![](https://docs.etendo.software/latest/assets/drive/1Uec9_qgFGGKWDLNsWvN7CZDwuQXAjp0J.png)

This is useful to distinguish between the original GL journal and the reverse one. 

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.
>
!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

##### G/L Journal Clone

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

With this functionality, the user is able to seamlessly clone a selected entry. This feature not only duplicates the entry but also creates a detailed description that includes the original order number.

In order to do this, select the record to clone and click the copy record button in the toolbar.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions/gljournalclone.png)

In this way, a copy of the original record is generated, including a description and a copy number, as seen below.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions/gljournalclone2.png)

This functionality enhances the efficiency of managing journal entries, making it easier to replicate and document transactions accurately.

#### G/L Journal

:material-menu: `Application` > `Financial Management` > `Accounting` > `Transactions` > `G/L Journal`

##### Overview

A G/L (General Ledger) journal allows the user to post journal entries to the ledger and create G/L item payments.

As already explained, most of the accounting entries are created while posting documents such as purchase invoices, sales invoices, etc.

The accounting entries which do not match with an existing Document Type need to be posted to the ledger by using a G/L Journal.

Besides, a G/L Journal can be used to create **G/L Item Payments** or payments not related to orders or invoices.

!!! info
    This feature is very useful while posting an employee payroll to the ledger as the payroll payment can be created at the same time.


Finally, a G/L Journal can also be configured as a **template**.

This feature allows the user to create the same journal entries as the ones contained in the G/L Journal set as a template.

This feature is also very useful while posting employee payroll, for instance.

###### Batch

A G/L journal batch allows the user to group G/L journals of similar characteristics which can all be processed at the same time.

![](https://docs.etendo.software/latest/assets/drive/1dR_rouWq3IFHDFHv_CBfLdywl7lBkLQz.png)

As shown in the image above, a *G/L Journal batch* can contain below data:

-   the **accounting period**
-   the **accounting date**
-   and the **currency**

None of the data above is mandatory at this point because a G/L journal can contain several journals having different accounting periods and accounting dates. The same applies to the currency as a G/L journal can contain several journals of different general ledger configurations.

Once a batch is created and saved, it is possible to create as many G/L Journals as required, which once ready can be completed and processed at the same time as a **unique** batch.

A G/L journal and therefore its content can be set up as **Template**, that template can be later on used while creating a new G/L journal by using the process button **Copy Lines** as described in the next section.

####### G/L Journal set up as “Template”

As already mentioned, a G/L Journal and therefore its content can be configured as a **Template**. In order to do so,  it is required to follow the steps below:

**1.** **create a G/L journal** to account the employee payroll corresponding to the period of January 2022, for instance. That G/L Journal needs to be marked as **Template**.

**2.** Create a **new G/L journal** to account the employee payroll corresponding to the period of January 2022. Enter an **Accounting Date** and a **Period**:

![](https://docs.etendo.software/latest/assets/drive/1FoRVJ89HIyQt4zO2WhyYkSm3riRyKGpx.png)

**3.** Press the **Copy Details** process button.

A new window is shown containing all the templates available:

![](https://docs.etendo.software/latest/assets/drive/1xUX_ZaY1POd69AUGYWN2FCf6Bjx7_-F9.png)

!!! info
    Note that it is possible to search for a template by using the G/L journal document number set as template and the description fields. 

**4.** **Select a template and click OK**. After that, Etendo populates the most recently created G/L Journal with the same journal entries, only the dates are different.

It may be necessary to change the journal entries amounts. In order to do so, it is possible to edit the G/L Journal Lines and then change the amounts.

The last step is to post the G/L Journal, therefore the corresponding journal entries are posted to the ledger.

##### Header

A G/L journal header can include journals, which can contain several journal lines.

![](https://docs.etendo.software/latest/assets/drive/137QIrGJeaxPlR9pTnhh0delXq_Xwqt0y.png)

A G/L Journal header contains the following data:

-   The organization and the organization's General Ledger configuration which once selected defaulted the field **Currency** to the one of the general ledger configuration, for instance USD. The currency can however be changed to EUR for instance. Etendo will apply the corresponding EUR -> USD conversion rate as the posting to the ledger must be in USD.
-   The *document date* which does not have to be the same as the accounting date.  
    The document date is automatically populated with the current date by default, but can always be changed.
-   The *accounting period* and the *accounting date* within that period. These dates can be automatically populated with the values entered in the Journal batch if any, however these dates can always be changed.

There is a checkbox named ***Opening*** which can be flagged just to state that a journal contains **opening balance accounts entries.**

There is a **list of actions** which can be executed from the G/L Journal header:

-   **Copy Details** button allows the user to copy the journal entries of a journal configured as a ***Template*** into the current journal
-   **Complete** button allows the user to complete the G/L Journal once the corresponding journal lines have been entered whenever the total debit amount matches the total credit amount
-   **Post/Unpost** button allows the user to Post/Unpost a G/L Journal once completed
-   **Close** button allows the user to close a G/L Journal for which no other action needs to take place or to reactivate it if it is not already posted
-   **Process Batch** button completes the G/L Journal/s of the batch

!!! info
    Note that upon **G/L Journal completion a **G/L Item** payment** will be created for each journal line that has the **Open Items** checkbox selected as explained in the G/L Item payments creation section.


!!! info
    The Journal will be completed even if any of the Payment/s creation failed. In this case, an error message is shown indicating the Lines that tried to create a Payment but failed.


##### Lines

The lines tab allows the user to enter the journal entries of a G/L journal as well as G/L item payment related information.

###### Accounting

Accounting information related to the GL Journal

##### Deferred GL Journal 
###### Duplicate Journal Entries

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

<iframe width=**854** height=**480** src=**https://www.youtube.com/embed/K7XOBkmRLAQ** title=**YouTube video player** frameborder=**0** allow=**accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture** allowfullscreen></iframe>

This functionality allows the user to duplicate a journal entry as many times as required, indicating the regularity and the period in which the first copy must be made. Starting from the second copy, the duplication will take place with the corresponding regularity.
The process to create a journal entry from the beginning and duplicate it later is shown below.

1- Enter the “G/L Journal” window and create a header:

![](https://docs.etendo.software/latest/assets/drive/1O9MpaLX0Ewh-OI8GW3z1h8E9ERRqoOQ4.png)

2- Create a new record:

![](https://docs.etendo.software/latest/assets/drive/1mxbJexaQrgCCMkvjYdJILcAmCb8Y8ohF.png)

3- Create the lines (to be recorded) and complete the entry. Once these three steps are done, the “Create Deferred Plan” button will be shown in the upper right margin. 


![](https://docs.etendo.software/latest/assets/drive/194RVxWW4vIWYQVLBrgYBi2P8ADNOH0bR.png)

4 - Click the button and a pop-up with three fields will be shown:
• Expense Plan Type: copies regularity.
    • Period Number: required number of copies.
    • Period: period in which the first copy will be made.


![](https://docs.etendo.software/latest/assets/drive/1cwaYerXmbWqaJu5HXlH8-yoaxvrf5935.png)

5 - Once this information is entered, click the “Done” button and as many records will be generated as the number of copies indicated.

![](https://docs.etendo.software/latest/assets/drive/1jJr_ZWLzgVbkF1mXz835JWRVBQhQcJ_l.png)


By default, this functionality is only available for the “GL Journal” window, since the record copies are grouped under only one header. It is also possible to duplicate these entries in the “Simple GL Journal” only if there is a preference configured in the “Preference” window with the property “Display Create Deferred Plan Button” and the value “Y”.

![](https://docs.etendo.software/latest/assets/drive/1CMGcvXoHxCcfYwskpj4OOwC_XBaPWDG0.png)

Once this preference is configured, the button will be enabled in “Simple GL Journal”. The flow is the same but the duplicated copies will not be created under a header. That is, this information will not be shown in the “GL Journal” window, except the information to be copied is already in it, in which case it will be shown.

![](https://docs.etendo.software/latest/assets/drive/1RflwaoqNOmVWf7b6_Bo5MFeO_KlJqg1-.png)

##### GL Journal Reverse 

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

This functionality is specifically useful for companies that have a month close, instead of an end year close, but with pending payments (in or out). It allows the user to open or close the period without taking into account the payments until they are made.

In order to use this functionality, in both “GL journal” and “Simple GL journal” windows, the user can click the button “Reverse Journal” in the toolbar when selecting an entry.

![](https://docs.etendo.software/latest/assets/drive/185JazYlxodMfPSx-2B4RgVe9UVadeUks.png)

In this way, Etendo automatically creates a reverse entry that compensates the amount in the credit and debit columns. 
> 
!!! note
    By default, the reverse document is created as a draft. That is why Etendo shows the check “process document” when clicking the “Reverse Journal” button. In this way, the user can complete the document.

As seen below, Etendo shows a success notification in green with the new GL Journal number.

![](https://docs.etendo.software/latest/assets/drive/1QAaLd-Rkiay5X6sKozqV80H7ykVoes53.png)

When comparing the original GL Journal to the reverse GL Journal, the debit and credit columns show the compensation, since the amounts are reverse.

####### Original GL journal

![](https://docs.etendo.software/latest/assets/drive/1l7-FyYg87NhJheS_L7GTATeJsvvoA41K.png)

####### Reverse GL Journal

![](https://docs.etendo.software/latest/assets/drive/1tZDhsR7UlZUz7itZlxDBVouv9QHIj-_G.png)


This is useful to distinguish between the original GL journal and the reverse one. 

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.
>
!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).


#### End Year Close

:material-menu: `Application` > `Financial Management` > `Accounting` > `Transactions` > `End Year Close`

##### Overview

The **Close Year** process allows the user to close a fiscal year. This process also permanently closes all the periods of the year (standard ones and adjustment ones).

It is important to remark that it is not required to close the standard periods of a year prior to closing that year, however it can help to keep tracking of the periods of the year already reviewed and closed.

The close year process requires that the next year is started, and its first period is opened.

!!! info
    Once a year is closed, the status of that year and all its periods can be reviewed in the Open/Close Period Control window.


As already mentioned, all the periods of the year are now shown as **Period Status**=**Permanently Closed**, that means that it is not possible to post any transaction within that year anymore, unless the **Undo Close Year** process is run for that year.

**Close Year** process creates the following accounting entries:

1\. The **Profit and Loss Closing** entry.

-   This accounting entry resets all **Revenue** and **Expense** Account Types and the difference is posted in the Income Summary account.
    -   In other words, the **Expense** accounts are **Credited and the **Revenue** accounts are **Debited** and the difference, if any, is posted in the Income Summary account.  
        Let us take an expense account with a debit balance of 500,00. The P&L Closing entry creates a credit accounting entry of 500,00 in the Expense account of the example, therefore it gets a balance equal to zero.  
        If the revenue accounts total balance is higher than the expense accounts total balance that difference is credited in the Income Summary account, that means a positive result or a profit.  
        If the revenue accounts total balance is lower than the expense accounts total balance that difference is debited in the Income Summary account, that means a negative result or a loss.
-   This accounting entry is posted the last day of the last period of the year being closed, that is the **Adjustment Period** or **13th Period** of the year.
-   Etendo does not create a G/L Journal for this accounting entry but just the accounting entry.

2\. The **Closing** entry or **Balance Sheet Closing** entry.

-   This accounting entry credits all the accounts which have a debit balance and debits all the accounts which have a credit balance. The aim of this accounting entry is to get that Asset and Liability accounts get a zero balance.
    -   In order words, let us take an Asset account with a debit balance of 8.000,00. The closing entry creates a credit accounting entry of 8.000,00 in the Asset account of the example.
-   This account entry is posted the last day of the last period of the year being closed, that is the **Adjustment Period** or **13th Period** of the year.
-   Etendo does not create a G/L Journal for this accounting entry but just the accounting entry.
-   This entry is created only if the Reverse Permanent Account Balances checkbox is set to yes.

Finally, if a Retained Earnings account is specified for the general ledger configuration, an additional entry dated on the last day of the year is created.

This entry moves the Income Summary account balance to the **Retained Earnings** account.

3\. And the **Opening** or **Balance Sheet Opening** entry.

-   This accounting entry is the reversal entry of the closing entry.
    -   Following the example of point 2 above, the opening entry creates a debit accounting entry of 8.000,000 in the Asset account of the example. That amount is the opening balance of the asset account for the new year.
-   This accounting entry is posted the first day of the first period of the next year.
-   This entry is created only if the Reverse Permanent Account Balances checkbox is set to yes.

####### End-year close process example

This example describes the **2019 end-year closing** process of a sample legal with an accounting organization.


This article describes the end-year closing process intentionally keeping the organization's activity as simple as possible.

The company in this example started its activity prior to 2019, therefore a G/L Journal set as **Opening** can be created to record the 2019 opening entry and get it posted to the ledger.

![](https://docs.etendo.software/latest/assets/drive/1aYBdLPYhLuzH26wsAf2zzFeaEcWS5Eab.png)


To make it simple, the company in this example executed detailed **regular** activities which created the corresponding **regular** journal entries in the general ledger:


![](https://docs.etendo.software/latest/assets/drive/1UE0WYDFJLdbDQkApYSinHkXYyM4p-1Hr.png)

Let us imagine that **F&B España** closes the standard periods as soon as each period is over and that is done even for the last standard period which is **December 2019**.

The accountants can use the **13th Period** to post accounting adjustment to the ledger through the posting of G/L Journal/s, prior running the **Year Close** process.

Once 2019 is over and ready to be closed, the company in this example can execute the 2019 **Close Year** process from the End Year Close window.

The process button **Year Close** runs the end-year close process for this sample organization.

![](https://docs.etendo.software/latest/assets/drive/17enHOwaYF9EQ3HyoN2pkBbsEPYhMLpwF.png)

####### Reverse Permanent Account Balances set to **Yes**

Etendo creates **closing entries** detailed below if the **Reverse Permanent Account Balances** checkbox of the Organization's general ledger is set to **Yes** before running the **Close Year** process.

!!! info
    Note that below accounting entries can also be reviewed in the **End Year Close** window in the Accounting Tab.

-   Dated on the latest day of the year below **P&L Closing Entry**.  
    This entry resets all **Revenue** and **Expense** account which is posted in the account defined as Income Summary.  
    ![](https://docs.etendo.software/latest/assets/drive/1Cuof0WypYpnGFKPCNux-MNCDPUEvTKdB.png)
 
-   Dated on the latest day of the year below **Closing Entry**.
    This entry resets all **Asset**, **Liability** and **Owner's Equity** accounts.x Besides, an additional entry is created to move the Income Summary account balance to the Retained Earning account:
    ![](https://docs.etendo.software/latest/assets/drive/1vXHeJ04vFjZUZdE3uTSmEoS1zbsI8lVY.png)
 
-   Dated on the day of the following year (01-01-2022) below **Opening Entry**. This entry is the reversal entry of the above closing entry:
    ![](https://docs.etendo.software/latest/assets/drive/1quKLjnhNs8KRB5GZXv0y3mvdQ3YU791c.png)
    The organization in this example can launch the 2020 Balance Sheet and the 2021 Profit and Loss reports from the Balance Sheet and P&L structure window:

2020 Balance Sheet:

![](https://docs.etendo.software/latest/assets/drive/1ttBuhupxE9YYwts1jvL2qSmu9tGwleUx.png)

2021 Profit and Loss:

![](https://docs.etendo.software/latest/assets/drive/1F6LMtj4tZdBSdt1yKsYhoO4Tv8nxyiGH.png)


####### Reverse Permanent Account Balances set to **No**

Etendo creates below **closing** entries if the **Reverse Permanent Account Balances** checkbox of the Organization's general ledger is set to **No** before running the **Close Year** process.

!!! info
    Note that below accounting entries can also be reviewed in the **End Year Close** window in the Accounting Tab.


-   Dated on the latest day of the year (31-12-2019) below **P&L Closing Entry**:
 ![](https://docs.etendo.software/latest/assets/drive/1Cuof0WypYpnGFKPCNux-MNCDPUEvTKdB.png)
     
-   and dated on the latest day of the year (31-12-2019) below entry as a Retained Earnings account is defined for the organization's general ledger:
 ![](https://docs.etendo.software/latest/assets/drive/1KRK07-Dtm1eikqZ7ERqOv1poDAvUfOzB.png)
     

The organization in this example can launch the 2019 Balance Sheet and the 2019 Income Statement reports from the Balance Sheet and P&L structure window. It will get the same Balance Sheet and Income Statement as the ones shown for the **Reverse Permanent Account Balances set to **Yes** scenario.

###### End Year Close

In the **End Year Close** window, all the Years previously created in the Fiscal Calendar window are shown. Those years can be closed in this window.

The records shown in this window are filtered by their **Status** and the **Organization**, by showing only the Years which are not closed yet and belongs to the Organization in which the User is logged. These filters can be removed by clicking in the funnel icon.

This window shows two Tabs. The first Tab shows all the existing Years. Once selected a record in this Tab, the lower tab shows the related Accounting entries, meaning the closing entries generated by the Close Year process as well as the corresponding opening entries of the next year.

This way, it is easier and quicker to see the Accounting generated when a Year is closed. More information can be found in the Accounting Tab below.

The way to Close a Year is:

-   Use the filters of the grid to show the Year to close.
-   Select the Year.
-   Click on the Year Close button and click OK.

Once done, Etendo informs that the process has been completed successfully.

All the Periods for that Year and that Organization will be permanently Closed. The way to Undo the Close of the Year is the same, but clicking Undo Close Year.

![](https://docs.etendo.software/latest/assets/drive/17enHOwaYF9EQ3HyoN2pkBbsEPYhMLpwF.png)

As shown in the image above, the main fields in this window are:

-   Organization.
-   Calendar.
-   Year.

###### Undo Close Year

If a year (i.e 2019) is closed, it will not be possible to do any posting within that year unless the **Undo Close Year** process is run for that year.

This process opens the year and all the periods of the year. It also reverts all the ledger entries posted by the end-year close process; therefore closing/opening entries are not shown in the Journal Entries Report anymore, unless the end-year close process is run once again for the year.

-   Status: It can be **Year Not Closed** or **Year Closed**

###### Accounting

In the **Accounting** Tab of the End Year Close Window, all the Accounting entries generated when a Year is Closed or when it is Opened are shown, grouped by Account. This Account entries can be:

-   Opening Entries
-   Income Statements
-   Closing Entries
-   Regular Entries
-   Divide Up

This way, it is easier to review the Accounting entries made in the Closing Year Process.

![](https://docs.etendo.software/latest/assets/drive/1SEPkTkQEu25sszL7ZUxhOnI9HK3-d6ON.png)

As shown in the image above, the main fields in this window are:

-   General Ledger.
-   Type. It can be an Opening Entry, Closing Entry, Income Statement, Regular Entry or Divide Up.
-   Account. Notice that **the account entries are grouped by Account**, showing only one record.
-   Debit.
-   Credit.

For explaining this Tab, it is better to follow the same example as in the Introduction section and show how this Tab presents the results.

####### Reverse Permanent Account Balances set to **Yes**

Etendo creates below **closing entries** if the **Reverse Permanent Account Balances** checkbox of the Organization's general ledger is set to **Yes**:

-   Dated on the latest day of the year (31-12-2019) below **P&L Closing Entry**.  
    This entry resets all **Revenue** and **Expense** accounts.
    
 ![](https://docs.etendo.software/latest/assets/drive/113QOGZVS2BuV29KMcUvMYHVS1fRyHW4B.png)
     
-   Dated on the latest day of the year (31-12-2019) below **Closing Entry**.  
    This entry resets all **Asset**, **Liability** and **Owner's Equity** accounts.
 ![](https://docs.etendo.software/latest/assets/drive/1Y0yGWcULssKJaRjezhwZ8-ZgBlunEcjm.png)
     
-   Dated on the day of the following year (01-01-2020) below **Opening Entry**.  
    This entry is the reversal entry of the above closing entry:
 ![](https://docs.etendo.software/latest/assets/drive/1lZ1pLSan1bButlXguyX9126egixcQAqu.png)
     

####### Reverse Permanent Account Balances set to **No**

Etendo creates below **closing** entries if the **Reverse Permanent Account Balances** checkbox of the Organization's general ledger is set to **No**:

-   Dated on the latest day of the year (31-12-2019) below **P&L Closing Entry**:
 ![](https://docs.etendo.software/latest/assets/drive/1LaHkcA8oefBywLCDFCJBBFN4x2cHYFHW.png)
     
-   and dated on the latest day of the year (31-12-2019) below entry as a Retained Earnings account is defined for the organization's general ledger:
 ![](https://docs.etendo.software/latest/assets/drive/18CrpHbC5hgoLYFKInsO201y-MzQT2AG5.png)

#### GL Posting by DB Tables

:material-menu: `Application` > `Financial Management` > `Accounting` > `Transactions` > `GL Posting by DB Tables`

##### Overview

The G/L Posting by DB Table allows the user to massively post the transactions related to a given transactional table or to all of them.

![](https://docs.etendo.software/latest/assets/drive/1tAh4RfUDcPvDgSG9PeBYX79MhpW-csWW.png)

As shown in the image above, the **G/L Posting by DB Tables** feature allows the user to:

-   select an Organization or all of them if a particular organization is not selected
-   select a Table or all of them if a particular table is not selected.
-   and select a **From date** and **To date**, if no dates are selected all the transactions available will be posted.

After running the process, Etendo informs about the number of ledger entries posted to the ledger for each table in order to post once again the transactional table/s to the ledger.

![](https://docs.etendo.software/latest/assets/drive/1nfPHEpviK8sRPB5BEZbSM4xYx32HgHeX.png)

This process can be launched whenever it is required:

-   It can be run if there are pending transactions to be massively posted whenever the Accounting Sever Process is not enabled or if it is not enabled for a given set of tables.
-   It can also be run after running the process Reset Accounting as a way of regenerate the ledger entries.

#### Budget

:material-menu: `Application` > `Financial Management` > `Accounting` > `Transactions` > `Budget`

##### Overview

Etendo creates and edits budgets to be used for informative purposes allowing the user to access the data about budget versus actual. 

##### Header

These are the actions which can be executed from the header in order to create budgets for a selected year to be used for informative purposes: 
 
**Export Budget to Excel:**  exports budget to an Excel document.
**Copy Budget:** copy budget already created. 
**Check Export Actual Data:** when checked, actual quantities will be exported to Excel in addition to the budgeted quantities. 

![](https://docs.etendo.software/latest/assets/drive/1FStSn-NWyajDwRZQ6xki_owQLql2FOyy.png)

##### Lines

The user is able to add budget lines. Each line may refer to a specified period, business partner, product, etc.

#### Create Budget Reports in Excel

:material-menu: `Application` > `Financial Management` > `Accounting` > `Transactions` > `Create Budget Reports in Excel`

By using the necessary filters such as business partner, product, partner group, product category, etc, the user is able to generate budget reports in Excel to be used for specific purposes.  

![](https://docs.etendo.software/latest/assets/drive/1Svc4hFmQRQA1s1IeQx9-po1KhrxpEeZ7.png)

#### Not Posted Transaction Report

:material-menu: `Application` > `Financial Management` > `Accounting` > `Transactions` > `Not Posted Transaction Report`

##### Overview

Not Posted Transaction Report lists the transactions and/or documents in status **Complete** which are not already posted.

This report can be used to make sure that there are no documents pending to be post:

-   while closing an accounting period or a fiscal year as once a period is closed it is not possible to post within that period
-   while running financial reports, as not posted transaction or document will not be taken into account in the financial reports

![](https://docs.etendo.software/latest/assets/drive/1dFKDra_iDbmeMrzC8n3M94m8uPqhokNk.png)

Not posted transactions and/or documents shown are split by type, for instance:

-   Journal
-   Vendor Invoice
-   Invoice or customer invoice
-   Vendor Payment
-   Financial Transaction
-   Receipt or payment in
-   etc

and it is possible to navigate to the document not posted and therefore get it posted by clicking on the **Date** field next to the document or transaction.

Finally, it is important to remark that:

-   **Date From** and **Date To** filters allows the user to narrow down the not posted transactions to be shown in the report by taking into account their transaction or document date.
-   It is not required to enter a **general ledger configuration** to narrow down the accounting information because:
    -   if a document is not posted, it is not posted for any of the general ledgers for which it should be posted
    -   and if a document is posted, it is posted for all the general ledgers for which it should be posted.


#### VAT Regularization

:material-menu: `Application` > `Financial Management` > `Accounting` > `Transactions` > `VAT Regularization Process`

!!!info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

##### Overview

The VAT Regularization module allows you to automatically adjust the accounts to ensure that the VAT balance is correct. This means, checking the accounts in which this process is necessary and creating the corresponding GL journal to regularize the VAT. This process is essential for maintaining accurate financial records and compliance with tax regulations.

The following are the required steps to carry this out for a specific period of time.

##### VAT Regularization Process

###### Account Setup

In order to enable an account to be part of the VAT regularization process, it is necessary to enter the Account tree window, select the organization to which the account belongs, and, in the Element Value tab, select the corresponding account and check the VAT Regularization box as active.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions/vatregularization1.png)

###### VAT Regularization Process

1. Go to `Application` > `Financial Management` > `Accounting` > `Transactions` > `VAT Regularization Process` window.
2. Complete the following required fields:
    - **General Ledger**: Select the general ledger to which the account to be regularized belongs.
    - **Organization**: Select the organization to which the account belongs.
    - **Date From**: Start date of the regularization.
    - **Date To**: End date of the regularization.
    - **VAT Regularization Date**: Date on which the regularization will take place.
    - **Description**: Description identifying the periods being regularized.
    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions/vatregularization2.png)
3. Click the **Search** button. This will display a grid with the accounts marked with the VAT Regularization checkbox, as explained in [Account Setup](#account-setup).
![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions/vatregularization3.png)
4. The Amount field shows us the value to be regularized. In addition, the Amount field in the header gives us a sum of all the amounts of the accounts that were chosen to regularize. In this case, it is the same value as the amount of the line because there is only one account to regularize.
5. Select an account in the VAT debtor/creditor account field to balance the accounts once the VAT accounts once the simple GL journal entry is generated.


###### GL Journal Entry Generation
1. Click the **Process** button to generate the simple GL journal entry.
![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions/vatregularization4.png)

    !!!important
        Remember this process affects all the accounts resulting from the search, so selecting the corresponding accounts must be done when marking the VAT regulularization checkbox in the setup step.

2. Go to the Simple G/L Journal window and filter the Document No. field by the number generated in the process (e.g. **1000123**).
![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions/vatregularization5.png)
3. Here, verify that the header has been created with the corresponding lines.

###### Entry Review and Posting

1. Check that a line has been created per account to be regularized (in this case, account 40000) and that the amount to be regularized (-1,377,222.00) has been added in the Debit field in positive.
![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions/vatregularization6.png)
2. Verify that another line has been created with the account selected in the VAT debtor/creditor account field with the corresponding amount in the Credit field.
![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions/vatregularization7.png)
3. Post the manual journal entry with the **Post** process.
4. Generate the GL journal report again and verify that the **Balance** for account 40000 is zero, which indicates that the VAT has been regularized correctly.
![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions/vatregularization8.png)

!!!info
    With this module, from Etendo Classic, version 24.2.0, and Financial Extensions Bundle, version 1.15.0, the field sorting has been modified so that GL journal entries are always sorted at the end of the day. This change ensures that, in the General Ledger report and in General Ledger Report Advanced, the manual journal entries of the day are displayed correctly sorted.

#### Reset Accounting

:material-menu: `Application` > `Financial Management` > `Accounting` > `Transactions` > `Reset Accounting`

##### Overview

The reset accounting process allows the user to totally or partially remove the ledger entries of an organization. The ledger entries can be massively re-created again by using the **Accounting Server Process** or the **G/L Posting by DB Tables** process. The manual changes done for the accounting entries description will obviously be lost after running this process.


==ARTICLE_END==
==ARTICLE_START==
# Article Title: Analysis Tools
## Article Path: /User Guide/Etendo Classic/Basic Features/Financial Management/Accounting/Analysis Tools
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/analysis-tools
## Article Content: 
#### Overview

This section describes the windows related to accounting financial reports in Etendo. These are:

[:material-file-document-outline: Accounting Transaction Details](#accounting-transaction-details){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Balance Sheet and P/L Structure](#balance-sheet-and-pl-structure){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Balance Sheet and P/L Structure Advanced](#balance-sheet-and-pl-structure-advanced){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Trial Balance](#trial-balance){ .md-button .md-button--primary } <br>

[:material-file-document-outline: General Ledger Report](#general-ledger-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: General Ledger Report Advanced](#general-ledger-report-advanced){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Journal Entries Report](#journal-entries-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Journal Entries Report Advanced](#general-ledger-report-advanced){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Create Tax Report](#create-tax-report){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Customer Statement](#customer-statement){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Tax Report Setup](#tax-report-setup_1){ .md-button .md-button--primary } <br>



#### Accounting Transaction Details

:material-menu: `Application` > `Financial Management` > `Accounting` > `Analysis Tools` > `Accounting Transaction Details`

##### Overview

The accounting transaction details window is a detailed list of every ledger entry of a general ledger.

Etendo has an integrated accounting system that combines financial and analytical accounting.

-   **Financial accounting** allows the user to exploit accounting dimensions such as "Organization", the "Account" and the "Accounting Date":
    -   These dimensions are always **mandatory,** that means they need to be specified every time that a document is posted to the ledger.
-   **Analytical accounting** allows the user to exploit other dimensions such as "Product", "Business Partner" and "Sales Region".
    -   These dimensions can be configured mandatory or optional in the organization's general ledger configuration if the client the organization belongs to does not **"centrally maintain"** the accounting dimensions.
    -   Otherwise, if the client **"centrally maintains"** the accounting dimensions, some  analytical dimensions above can be configured in the Client window (i.e "Product", "Project", "Cost Center") while some others need to be configured in the organization's general ledger configuration (i.e. "Sales Region", "Campaign").

Etendo allows the user to post transactions to the ledger only if the financial dimensions and the mandatory analytical dimensions are specified, while there is always the option to specify the optional analytical ones.

###### **Header**

This report lists every transaction posted to the ledger by showing every accounting dimension specified.

![](https://docs.etendo.software/latest/assets/drive/15B7fD-yrlWdAqXA0BmxcG_IA66xSpAoD.png)

Column Filters allow the user to filter the information to be shown by any of the accounting dimensions.

#### Balance Sheet and P&L Structure

:material-menu: `Application` > `Financial Management` > `Accounting` > `Analysis Tools` > `Balance Sheet and P&L Structure`

##### Overview

The Balance sheet and P&L structure report engine allows the user to launch the Balance Sheet and P&L which need to be previously configured.

The Balance Sheet report is a quantitative summary of an organization's financial condition at a specific point in time. This report shows a summary of the assets and liabilities & Owner's Equity balances.

Profit and Loss report shows earnings, expenses and the net profit of an organization

These reports need to be configured prior to be launched in the Balance Sheet and P&L Structure setup window.

![](https://docs.etendo.software/latest/assets/drive/1RuYrg1NFpQZz9FOuNnPR47hpQCTwgzjv.png)

As shown in the image above, data to fill in is:

-   the *"General Ledger"* from which the accounting information needs to be obtained
-   the *"Accounting Report"* to launch.  
    This field lists the reports created and configured in the Balance Sheet and P&L structure setup window
-   the *"Organization"*.  
    This field lists the organization for which the report has been configured in the Balance Sheet and P&L structure setup window
    -   if the report is configured for a "Legal with Accounting" organization type, only that one is shown in this field. The account's balances shown in the report will be a roll-up of the organizations which belong to it, if any.
    -   if the report is configured for a "Generic" organization type, the organizations shown in this field are at least the generic organization and the legal with accounting organization type it belongs to, all of them linked to the general ledger selected.
-   the *"Account Level"* which defines up to which detail level is going to be shown in the report, the options available are the same as the account tree element levels:
    -   Heading, only "heading" elements are shown including summarized accounting information up to that level
        -   Account, in this case "heading" and "account" elements are shown including summarized accounting information up to each of those levels
            -   Breakdown, in this case "heading", "account" and "breakdown" elements are shown including summarized accounting information up to each of those levels
                -   Subaccount, in this case "heading", "account", "breakdown" and "subaccount" elements are shown including summarized accounting information up to each of those levels.  
                    It is important to recall that accounting entries are booked at subaccount level.
-   *"Show only accounts with value"* flag allows the user to see that the report does not show account elements having a *zero* amount balance, but elements defined as Title which are always shown regardless of its balance amount.
-   *Show Account codes* flag allows the user to make the report show the Element Level Search Key or not.

Under the *"Primary Filters"* section, it is possible to specify:

-   an *Initial page number* for the report, in case the report needs to be integrated.  
    This one is useful in case the report must be integrated as a part of a bigger report or document.
-   a *"Year"* and a *"Reference Year"* in order to get a comparative report normally between the current "Year" and the previous one entered as "Reference Year". The report has a filter *"Compare To"*, so it can be launched just for a concrete year, without forcing to compare it with another year.
-   and finally *"As of Date"* (Date To) and *"As of Reference Date"* (Date From filters can be entered, these filters behave differently depending on the report:
    -   In the case of Balance Sheet report, a "Date To" value can be entered to get that the report shows account balance information up to that date to.
    -   In the case of P&L report a "Date To" and a "Date From" can be entered to make the report show accounting information within that period of time (a year, a quarter, a month, etc).

###### Balance Sheet Report Example

!!! info
    Please note that the word "Provisional" (en\_US) \[or "Provisional" (es\_ES)\] is shown whenever at least one of the periods for which the report has been launched for it is not closed yet.

![](https://docs.etendo.software/latest/assets/drive/1JYmJT5MghrfjqL3Y_qbNopzLK1GeXrFK.png)

###### P&L Report Example
 
![](https://docs.etendo.software/latest/assets/drive/1K5dS8FvF5Ol26dSDpo-UzjtE9VBt8T-6.png)

#### Balance Sheet and P&L Structure Advanced

:material-menu: `Application` > `Financial Management` > `Accounting` > `Analysis Tools` > `Balance Sheet and P&L Structure Advanced`

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The **Balance Sheet and P&L Structure Advanced report** is an enhanced version of the previous “Balance Sheet and P&L Structure”. Its purpose is to expand the filtering criteria, including all the existing accounting dimensions in the table Accounting Transaction Details.

![](https://docs.etendo.software/latest/assets/drive/1yP5IthEhrtJWbj_xZg9dpUAMpCwTB_oJ.png)

In addition to the previous basic filters: 

- General Ledger
- Accounting Report
- Organization
- Account level
- Year
- As of Date
- Compare to (check)
- Reference Year
- As of Reference Date

the following were added:    

-   Business Partner  
-   Product   
-   User 1    
-   User 2  
-   Project 
-   Activity    
-   Sales Region    
-   Sales Campaign  

In basic filters, in the section of the current year, the fields Date From and Date to were added to select a specific period from the selected year.

In the comparative year section, the fields From Reference Date, To Reference Date were added to select a specific period from the selected year apart from the Select Template field. 
 
In each filter, more than one option can be selected:
 
![](https://docs.etendo.software/latest/assets/drive/1t-N2QU-2fbhu2ElbxNvlhGrcIyMuW3tO.png)


Another difference to take into account is that, in this case, the buttons View, Export to PDF and Export to Excel are located in the same section of the upper bar.

![](https://docs.etendo.software/latest/assets/drive/1kJEGtKDwiG8owTtPhXJmER1_ZOj3NEK4.png)

#### Trial Balance

:material-menu: `Application` > `Financial Management` > `Accounting` > `Analysis Tools` > `Trial Balance`

##### Overview

The trial balance helps to check that the total amount of debits is equal to the total amount of credits.

This report is commonly launched at the end of the period prior to the preparation of the Balance Sheet and the Income Statement. However, Etendo allows the user to launch it at any point in time to check that debits equal credits.

In Etendo terms, the "Trial Balance" shows for a given Organization and General Ledger:

-   the account balance as of a given date from
-   the account total sum of debits within a given period of time
-   the account total sum of credits within a given period of time
-   and finally the account balance as of a given date to

At the end of the report, the total sum of debits must be equal to the total sum of credits.

![](https://docs.etendo.software/latest/assets/drive/1Khc4yKHg-WQAjZBTFfNegete-k0l0qhX.png)


As shown in the screen above, it is possible to enter below data before launching the Trial Balance.

Under the **Primary Filters** section, it is possible to specify:

-   the *"From"* date when the account balance is going to be taken
-   the *"To"* date when the account balance is going to be calculated by following the formula below:
    -   *Balance as of to date = Balance as of from date + Sum of the Debit amounts - Sum of the Credit amounts*
-   the *"Organization"* for which the Trial Balance is required. It is important to remark that a Trial Balance can be launched for:
    -   "Legal with Accounting" type organizations
    -   "Generic" type organizations which must belong to a "Legal Entity with Accounting" organization.
        -   It is possible to enter and post transactions in this organization type as they inherit the general ledger of the legal entity with accounting they belong to.
    -   "Organization" type organizations, as this type can be linked to a general ledger to be shared by a set of organizations which belong to it.
        -   Regardless this organization type does not allow transaction posting, the Trial Balance obtained at this level summarizes the accounting information of all the organizations which belong to an organization of this type which share the same general ledger.
-   and finally the "General Ledger".

**Advanced filters** is a collapsible section which can be shown by clicking on it. Under this section, it is possible to specify:

-   the Account Level to show. The options available are from top to bottom:
    -   **Heading**
    -   **Account**
    -   **Breakdown**
    -   and **Subaccount**.

These are the Account Tree Elements.

"**Subaccount**" is the value set by default, regardless it can be changed if required.

This is due to the fact that a subaccount is the element which helps to check that the total amount of debits is equal to the total amount of credits for every subaccount of the account tree.

Also, the selection of this value allows the user to:

1\. select other "**Dimensions**", such as the "Business Partner", the "Product" and the "Project". These dimensions are recorded while posting transaction to the ledger and the transactions can be posted to the ledger through the subaccounts.

2\. Select “Group By” value to have more information about that option. Values are "Business Partner", "Product", "Project" and “Cost Center”

3\. select "**Include Zero Figures**" flag which allows the user to display all subaccounts even those which hold zero figures.

-   It is possible to enter the **initial page number** of the trial report if required
-   Also, the "**Opening Entry Amount to Initial Balance**" flag is marked by default.  
    This checkbox allows the user to configure if the "Opening" account balance (dated i.e. 1st January 2021) is shown separately in the first column "Balance As Of" or either in the "Debit" or in the "Credit" column.  
    In other words:
    -   the negative "Opening" balance of a liability type account can be shown in the "Balance As Of" column or in the "Credit" column
    -   the positive "Opening" balance of an asset type account can be shown in the "Balance As Of" column or in the "Debit" column.  
        This check only applies if the "From" date entered while launching the report is the same as the "Opening" Accounting date (i.e. 1st January 2021), otherwise the "Opening" account balance is always shown in the "Balance As Of" column.

Once all the data above has been properly filled in, the "Search" process button shows the results in the same window.

An example of the output of the report is:

![](https://docs.etendo.software/latest/assets/drive/1h503JiqJg9EGZ_3IhlNJ6XHTOsgHPesf.png)

This report can also be shown in:

-   a *PDF format* by pressing the "Print" action icon of the Toolbar.
    -   the PDF file can be printed or archived for later reviews.
    -   the PDF file has the same grouping rules as the search button.
-   and in *excel format*:
-   the excel file has the same grouping rules as the search button. When the Trial Balance Report is launched at "Subaccount" level, this format shows the dimension selected in the combo group by, but when no grouping is selected in the combo, the report shows all dimensions.

#### General Ledger Report

:material-menu: `Application` > `Financial Management` > `Accounting` > `Analysis Tools` > `General Ledger Report`

##### Overview

The General Ledger report lists every ledger "subaccount" and its debit and credit ledger entries within a given period of time.
   
![](https://docs.etendo.software/latest/assets/drive/1pAPw9gmjnNbZUJ4bbL6oTXNBUrvdUkhS.png)

As shown in the image above, the fields to fill in for launching this report are:

-   the *"Organization"* for which the accounting information is required.  
    Once more, the accounting information provided by this report relies on the organization type selected as:
    -   accounting information shown might be just related to a "Generic" organization belonging to a "legal Entity with Accounting"
    -   or could be a roll-up in case of selecting either a "Legal Entity with Accounting" or an "Organization" having other organizations underneath.
-   *"Show Open Balances"* option which will hide those entries for which the balance is zero. (Ex. removing receivables/payables entries from invoices once those have been paid.)
-   and the corresponding *"General Ledger"* which will also rely on the Organization previously selected.

It is possible to narrow down the accounting information to be shown in the report by:

-   a range of "*amounts*"
-   a set of *"subaccounts"*
-   and a set of *"accounting dimensions"* such as business partner, product and project

Finally, it is also possible to:

-   *"group"* the information by any of the accounting dimensions
-   and enter a *"Initial Page Number"* for the report

Once all data have been properly entered, the "Search" button shows the outcome of the report in the same window:

-   the ledger entries displayed for each subaccount are ordered by accounting date and besides the subaccount balance is shown for each ledger entry.

The arrows in the toolbar allows the user to navigate through the report outcome shown in the window.

The General Ledger Report can also be viewed and saved in Excel format and PDF format:

-   Excel format by pressing on the *"Export to Excel"* action button of the Toolbar:
    -   This format contains a list of all the ledger entries per each subaccount not grouped, therefore it is possible to group them as desired.
    -   It also lists the corresponding accounting dimensions of each ledger entry.
-   PDF format by pressing on the *"Print Record"* action button of the Toolbar:
    -   This format includes an "Initial" balance of each subaccount, the "Subtotal" balance of each subaccount for the given period and calculates the "Total" balance of each subaccount.

![](https://docs.etendo.software/latest/assets/drive/1x52NlvusNpOPj6hku1N5jRDQ39i7XjWI.png)

#### General Ledger Report Advanced

:material-menu: `Application` > `Financial Management` > `Accounting` > `Analysis Tools` > `General Ledger Report Advanced`

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

This **General Ledger Advanced** report is an enhanced version of the previous “General Ledger Report”. Its purpose is to expand the filtering criteria, including all the existing accounting dimensions in the table Accounting Transaction Details.

![](https://docs.etendo.software/latest/assets/drive/1jJoiQn3MPwICVsZ1fVdrAnTVqNzD7Dzy.png)


In addition to the previous basic filters: Date from, Date to, From amount, To amount, Organization, General Ledger, From Account, To account, and the previous dimension filters: Business partner, Product and Project, the following were added:
- User 1
- User 2
- Activity
- Sales Region
- Sales campaign
- Cost center

Moreover, the “Organization filter” was added, a filter that combines the original Organization field with the “Show related operations” check, to show intercompany transactions.

In each filter, more than one option can be selected.

![](https://docs.etendo.software/latest/assets/drive/1dUg2Mluy4XOBd8UdPnwT20vCNpkTOi8Y.png)


Another difference to take into account is that, in this case, the buttons View, Export to PDF and Export to Excel are located in the same section of the upper bar.

![](https://docs.etendo.software/latest/assets/drive/1acr95_DrwZFiNtzQDWquk-mDfTnn0a3W.png)

#### Journal Entries Report

:material-menu: `Application` > `Financial Management` > `Accounting` > `Analysis Tools` > `Journal Entries Report`

##### Overview

The Journal Entries Report is a list of all the journal vouchers of an organization and general ledger shown in a chronological order.

A journal entry is the recording of financial data in a journal voucher such that the debit equals credit and the debits are entered before the credits.

![](https://docs.etendo.software/latest/assets/drive/1R5ckg6bUk6VCZecVNI0KYiEgig4y4ZDk.png)

As shown in the image above, the "Primary Filters" section allows the user to specify:

-   the "*Organization*" and the "*General Ledger*" for which the financial data taken from the journal entries is required.

The "Advanced Filters" is now a collapsible section. Under this section, it is possible to specify:

-   a **From/To Account** to display journal entries with at least one line using an account defined in the range.
-   a Document Type to narrow down the financial data to be shown in the report to just the one related to that particular document type.
    -   If the document type selected has a document number associated, for instance an invoice document type, it will be possible to narrow down the data shown to a specific "**Document Number**".
-   the "**Initial Page Number**" *to be shown in the PDF format of the report*
-   the **"Initial Entry Number"** to be shown in the PDF format of the report
-   the **"Entry Description**" to be shown in the PDF format of the report

The rest of the checkboxes are selected by default in order to show:

-   the *"**regular**"* journal entries:
    -   these entries are the ones generated while posting either any of the Etendo document types or while posting a General Ledger Journal do not flag as "Opening".
-   the *"**opening**"* journal entries:
    -   these entries are automatically generated by Etendo after the closing of a given fiscal year
    -   these entries can also be manually generated while posting a General Ledger Journal whenever its journal entries are flagged as "Opening".
-   the "**closing**" journal entries:
    -   these entries are automatically generated by Etendo after the closing a given fiscal year
-   and finally the *"**P&L closing**"* journal entries:
    -   these entries are automatically generated by Etendo after the closing of a given fiscal year

Finally, and same way as for the rest of financial reports, the Journal Entries Report can be launched in:

-   *HTML* format. An example of the HTML output:

![](https://docs.etendo.software/latest/assets/drive/1a9mebyPB8r9ZqAmlrQzmieeBsgolbsYb.png)

-   *PDF* format by using the "Print Record" action button of the Toolbar
-   or *XML* format by using the "Export to Excel" action button of the Toolbar.

#### Journal Entries Report Advanced

:material-menu: `Application` > `Financial Management` > `Accounting` > `Analysis Tools` > `Journal Entries Report Advanced`

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

This **Journal Entries Advanced** report is an enhanced version of the previous “Journal Entries Report”. Its purpose is to expand the filtering criteria, including all the existing accounting dimensions in the table Accounting Transaction Details.

![](https://docs.etendo.software/latest/assets/drive/1bZUV65uj-1R6hXX6dE9AQeEMBffjmKbc.png)


In addition to the previous basic filters: Date from, Date to, Organization, General Ledger and the previous advanced filters: From account, To account, Document, Document N°, the following were added:
- Business Partner
- Product
- User 1
- User 2
- Project
- Activity
- Sales Region
- Sales campaign

The report filters the transactions included in the selected dimensions, for the selected organization and general ledger and for a determined period, if necessary.

In each filter, more than one option can be selected:

![](https://docs.etendo.software/latest/assets/drive/11J-cgWCMLSQg5h-TVuoeWa09pcwXrCYm.png)

Another difference to take into account is that, in this case, the buttons View, Export to PDF and Export to Excel are located in the same section of the upper bar.

![](https://docs.etendo.software/latest/assets/drive/1tcD3dKQCRkQ_EjE3KMUFyCpDUXyGmyLF.png)

#### Create Tax Report

:material-menu: `Application` > `Financial Management` > `Accounting` > `Analysis Tools` > `Create Tax Report`

##### Overview

This Form allows the user to create different Tax Reports according to the user's specific needs.

In order to explain the use of this process, it is necessary to understand the window Tax Report Setup.

####### Tax Report Setup

This window allows the user to create or modify different Tax Report for the different existing taxes. In the following lines, it will be explained how to create a new Tax Report:

![](https://docs.etendo.software/latest/assets/drive/1I29H6eckLq6K7WR7wzgmYPgjZ4PRcUiV.png)

The window has some parameters to indicate the Tax Report created:

-   **Name:** The name of the Report.
-   **Tax:** The tax that will be shown in the report.
-   **Sales Transaction:** Checked if it’s a Sales Tax Report, unchecked if it’s a Purchase Tax Report.
-   **Report:** If checked, it will appear in the Create Tax Report form to be chosen.
-   **Shown:** If checked, it will appear in the Create Tax Report form to be chosen.
-   **Summary Level:** If it is checked, the tax rate is defined as a parent tax that has dependent taxes: the child taxes. If a tax is not going to have any “children,” it should not be checked as summary.
-   **Negative:** If checked, the report will be printed in negative values, otherwise, it will be printed in positive values.
-   **Active:** If it’s an active Tax Report.

Once, the Tax Report has been set up, it will appear in the Create Tax Report form:

####### Create Tax Report

This window allows printing Reports previously defined by the user. In order to print the Report, it is necessary to fill a few fields:

![](https://docs.etendo.software/latest/assets/drive/174ocSJCYYPhTy_2AmynTHIQv93BlA4rB.png)

-   **From Date:** Starting Date of the Report.
-   **To Date:** Last Date of the Report.
-   **Tax Report:** In this list, all the Tax Reports created will appear to be chosen-
-   **Organization:** Organization for which the Report will be printed.

Once these fields have been introduced, it will be possible to print the Report that will show the amount during those dates.

![](https://docs.etendo.software/latest/assets/drive/1hDOABUzDouOzwfy4lBICVjVpUzKlnsB0.png)

#### Customer Statement

:material-menu: `Application` > `Financial Management` > `Accounting` > `Analysis Tools` > `Customer Statement`

##### Overview

Customer statement is a consolidated statement of every transaction of a customer posted to the ledger over a given period.

Transactions aggregated from various sources like:

-   **Sales Invoices**
-   **Payment In**
-   **Financial Transactions**
-   **Reconciliations**

!!! warning
    Note that *Completed* but not *posted* transactions are not taken into consideration.

In case that a business partner is a customer as well as a vendor, the Customer Statement shows only customer related transactions and does not take into account vendor related transactions.

The *Multicurrency* parameter of the report, in case of checked, will group records based on the currency records and display original currency amounts. If unchecked, it will not group records, and it will display ledger currency amounts.

The Customer Statement provides the following details:

-   The credit/debit information including the document number of the transaction
-   The accounting date
-   The document type of the transaction. (i.e. AR Invoice, Financial Account Transaction, etc)
-   The net financial value of each transaction as \[Debit - Credit\], this column represents the accumulated value of the net financial value transaction by transaction, therefore an accumulated net financial value for the end of the given period is the end balance of the customer statement.  
    Note that negative amounts are highlighted by using brackets ().

###### Customer Statement Report

An example of the customer statement filter is shown in the image below:

![](https://docs.etendo.software/latest/assets/drive/1rYsGNhlgTxXIUQR4NxlDh2_4uLDvm_WA.png)

Note about some filters:

-   **Multicurrency.** If there are transactions in multiple currencies for the selected Business Partner, it is possible to use them to split the report. By default, this report converts all currency values into the currency of the General Ledger. If this flag is checked, then the report will be split by each different currency (each one with its initial and ending balance isolated from the rest).
-   **Sum Initial Balance.** By default, the report starts with an Initial Balance, then there are the transactions that have happened with the Business Partner, and for each one there is a Net Balance. The Ending Balance is the Initial Balance plus the final Net Balance. However, if this check is enabled, the Initial Balance is aggregated into each one of the Net Balances, in this case the final Balance is the same one as the last Net Balance.

An example of the Customer Statement output:

![](https://docs.etendo.software/latest/assets/drive/1knnrLJDapnNKaokRPFgInW3mIQcJBHIo.png)

#### Tax Report Setup

:material-menu: `Application` > `Financial Management` > `Accounting` > `Analysis Tools` > `Tax Report Setup`

##### Overview

Etendo allows the user to create different Tax Reports according to the user’s specific needs.

In order to explain the use of this process, it is necessary to understand the window Tax Report Setup.

####### Tax Report Setup

This window allows the user to create or modify different Tax Reports for the different existing taxes. In the following lines, it will be explained how to create a new Tax Report:

![](https://docs.etendo.software/latest/assets/drive/1j91z0YQV6PrYedzt7qrf5NsIhMHgxAP6.png)

The window has some parameters to indicate the Tax Report created:

-   **Name:** The name of the Report.
-   **Tax:** The tax that will be shown in the report.
-   **Sales Transaction:** Checked if it’s a Sales Tax Report, unchecked if it’s a Purchase Tax Report.
-   **Report:** If checked, it will appear in the Create Tax Report form to be chosen.
-   **Shown:** If checked, it will appear in the Create Tax Report form to be chosen.
-   **Summary Level:** If it is checked, the tax rate is defined as a parent tax that has dependent taxes: the child taxes. If a tax is not going to have any “children,” it should not be checked as summary.
-   **Negative:** If checked, the report will be printed in negative values, otherwise, it will be printed in positive values.
-   **Active:** If it is an active Tax Report.

Once, the Tax Report has been set up, it will appear in the Create Tax Report form:

####### **Create Tax Report**

This window allows to print Reports previously defined by the user. In order to print the Report, it is necessary to fill a few fields:

![](https://docs.etendo.software/latest/assets/drive/17xPpINQrk2rcbebH6-hCCsIjwDP0X7qH.png)

-   **From Date:** Starting Date of the Report
-   **To Date:** Last Date of the Report
-   **Tax Report:** In this list, all the Tax Reports created will appear to be chosen.
-   **Organization:** Organization for which the Report will be printed.

Once these fields have been introduced, it will be possible to print the Report that will show the amount during those dates.

![](https://docs.etendo.software/latest/assets/drive/1eqmh8_yS9iZrrp0PpT70hpDlT5MhrACN.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Setup
## Article Path: /User Guide/Etendo Classic/Basic Features/Financial Management/Accounting/Setup
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup
## Article Content: 
#### Overview

This section describes the windows that are necessary to configure the accounting functionalities of Etendo. The corresponding windows are:

[:material-file-document-outline: Accounting Transaction Details](#accounting-transaction-details){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Open/Close Period Control](#openclose-period-control){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Financial Type](#financial-type){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Period Control Log](#period-control-log){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Account Tree](#account-tree){ .md-button .md-button--primary } <br>

[:material-file-document-outline: General Ledger Configuration](#glconfig){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Fiscal Calendar](#fiscal-calendar){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Account Combination](#account-combination){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Accounting Process](#accounting-process){ .md-button .md-button--primary } <br>

[:material-file-document-outline: G/L Item](#gl-item){ .md-button .md-button--primary } <br>

[:material-file-document-outline: G/L Category](#gl-category){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Document Type](#document-type){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Document Sequence](#document-sequence){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Tax Category](#tax-category){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Business Partner Tax Category](#business-partner-tax-category){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Tax Rate](#tax-rate){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Cost Center](#cost-center){ .md-button .md-button--primary } <br>

[:material-file-document-outline: ABC Activity](#abc-activity){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Accounting Templates](#accounting-templates){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Balance Sheet and P/L Structure Setup](#balance-sheet-and-pl-structure-setup){ .md-button .md-button--primary } <br>


#### Open/Close Period Control

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Open/Close Period Control`

##### Overview

Open/Close Period Control feature manages the periods of an organization. This feature applies to organizations for which the "Period Control" feature is enabled.

The Period Control feature allows the user to assign a Fiscal Calendar containing years and periods (normally months) to an organization.

Overall, the "**Period Control**" and the "**End Year Close**" processes can be executed in Etendo by following the steps recommended below:

-   The **creation** of the Years and the Periods (i.e. monthly periods) in the "Fiscal Calendar" window
-   The **opening of all the period/s**, that means including the "13th Period" or adjustment period, in this window
-   The **closing of the standard period/s**, that means excluding the "13th Period" or adjustment period, in this window.

This step can be done once the corresponding transactions have been posted to the ledger within a "standard" period.

!!! info
    It is not mandatory to close the standard periods of a given year before running the Close Year process.


Closing the standard periods helps to track the periods which have been already reviewed and adjusted if required, and therefore closed in order not to allow any further posting within those periods.

-   The **posting of the accounting adjustments** to the ledger if any, in the "13th Period" by using a G/L Journal/s.
-   The **execution** of the Close Year process in the "End Year Close" window.  
    This process generates the closing accounting entries such as the P&L closing entry, and also closes the standard and adjustment periods if those are still open. After the Closing of the Year, all its Periods will be in **Permanently Closed** status. A Period in Permanently Closed can not be reopened, it is necessary to Undo the Closing of the Year first.

Additionally, the Undo Close Year process undoes all what has been done and therefore accounted for by the close year process. Besides, this process opens all the periods which were closed.

This is done to allow that the corresponding changes can be posted to the ledger as required in a standard period.

Once the corresponding changes have been accounted for, the "Close Year" process can be run once again. This process generates the closing accounting entries and closes all the periods again.

As already mentioned:

It is not possible to create years and periods directly on this window, use the Fiscal Calendar window to create new years and periods.

It is not possible to generate the closing accounting entries directly on this window, use the Close Year process which can be found in the End Year Close Window.

Finally, it is also possible to check the "Status" of a given period is to navigate to the Period Control tab of the Organization window.

###### **Period Control**

In **Open/Close Period Control window** all the Periods previously created in the Fiscal Calendar window are shown.

However, the records are filtered by their "Status" and "Organization", by showing only the Periods which are not in **Closed** Status and belong to the Organization in which the User is logged in. These filters can be removed by clicking on the funnel icon.

This window shows two Tabs. The first Tab shows all the existing Periods. Once selected a record in this Tab, the lower one shows all the Document Types and their Status in that Period. With this layout, it is possible to easily manage the status of a Period as a whole as well as the status of a particular Document Type inside a specific Period.

The way to manage the Opening/Closing of a Period is:

-   Use the filters of the grid to show the desired Periods.
-   Select the Periods for which the action is going to be performed.
-   Click on the Open/Close Period, select the action to perform, and click OK.

Once done, Etendo informs that the process has been completed successfully.

The way to manage the Opening/Closing of a particular Document Type for a specific Period is similar:

-   Use the filters of the grid to show the desired Document Type.
-   Select the Document Types for which the action is going to be performed.
-   Click on the Open/Close Period, select the action to perform, and click OK.

Once done, Etendo informs that the process has been completed successfully.

![](https://docs.etendo.software/latest/assets/drive/1wWBwXFdqFKBcXY9i19M7U8nE0jiUYMJt.png)

As shown in the image above the main fields in this window are:

-   the *Status*. It is split in two columns. One that represents the Status with a color code, making it easier to understand the situation at a quick glance. The other one represents the Status by its name, making it possible to filter the records shown. The possible Status values are:
    -   All Never Opened, colored in gray. Recently created Periods.
    -   All Opened, colored in green. All the Document Types are open for this Period.
    -   All Closed, colored in red. All the Document Types are closed for this Period.
    -   Mixed, colored in orange. Not all the Document Types have the same Status value in this Period. For more information, refer to the Documents Tab below.
    -   All Permanently Closed, colored in red. All the Document Types are Permanently Closed for this Period.
-   the *Calendar*
    -   Etendo automatically displays the calendar of the organization, as an organization can only have one calendar assigned. In fact, this field is a read-only field
-   the *Organization*
-   the *Year*
-   the *Period No.*
-   the *Name* of the Period
-   the *Starting Date* of the Period
-   the *Ending Date* of the Period

These fields can be used as filters to show the desired records. For example, filtering by a Calendar, and Organization and a Year it is an easy way to show all the Periods of a particular Year.

Then it is possible to select all records shown and Open or Close all of them at once.

-   The *Period Actions* available are:
    -   *Open Period*
        -   This action opens the period/s.
    -   *Close Period*
        -   This action closes the period/s.  
            Once a period is closed, it is not possible to post or to undo the posting of any transaction in such period/s. A closed period/s can always be re-opened by just selecting it and executing the action "Open Period" for the period/s.
    -   It is only possible to open and close the accounting periods of "Legal with Accounting" Organization types for which Allow Period Control check is enabled
-   If a period is open for all document types, but it is closed for a given document type, for instance AP Invoice, it will be possible to post transactions of any type within that given period but AP Invoice transactions.

###### **Period Control Example**

The organization in this example has created three consecutive years and has open all the periods including the "13th Period" as shown in the image below:

![](https://docs.etendo.software/latest/assets/drive/1dOWq4RquxSziuUbqVYpORdf9eA4Ts7g5.png)

The configuration above means that the organization in this example can post any document to the ledger at any period within those 4 years. If the organization tried to post a sales invoice in Dec 2018, Etendo will show an error as that year/period does not exist.

The organization in this example needs to close the year 2019.

Before running the "Close Year" process for 2019, the organization in this example closes all the 2019 standard periods until Dec-19 in order not to allow any further accounting on any 2019 standard period. The process to do that is:

-   Move to **Open/Close Period Control** Window.
-   Use the filters of the grid to show the desired Periods. In this example, filter by Calendar, Organization and Year (i.e. 2019)
-   As the Year has all its Periods Open, including the Adjustment Period, the Window should show thirteen records.
-   Select all the periods except the 13th Period and click on the Close Period button and select the action "Close Period" (as this one allows the user to reopen the year/period if needed)

![](https://docs.etendo.software/latest/assets/drive/1AxEefqisj3SW_FqBBXGfF6Th0rWpaJrn.png)

Above action closes all the 2021 standard periods until Dec-2021, therefore it is not possible to post any transaction to the ledger in any 2021 standard period anymore but:

- to post "G/L Journals" to the ledger in the "13th Period"

- and to post the "Closing" entries automatically created by the Close Year process to the ledger

unless:

-   the corresponding 2019 standard period/s is/are re-opened. That is only possible if the 2019 year is not closed, otherwise the Undo Close Year needs to be run.

###### **Documents**

When a Period is created in the Fiscal Calendar Window, it is possible to Open or Close it in this Window. Performing these actions directly for that Period affects all the associated Document Types at once.

For example, opening a Period results in opening all the Document Types for that Period, making it possible to post transactions of any type within that given Period.

But it is also possible to Open or Close each Document Type in the same Period.

Once a Period is selected in the Periods Tab of this Window, all the available Document Types are shown in the Documents Tab, making it possible to select any of them and Open or Close it.

The way to manage the Opening/Closing of a particular Document Type for a specific Period is:

-   Use the filters of the grid to show the desired Document Type.
-   Select the Document Types for which the action is going to be performed.
-   Click on the Open/Close Period, select the action to perform, and click OK.

Once done, Etendo informs that the process has been completed successfully.

![](https://docs.etendo.software/latest/assets/drive/18LHnWB8IGtMlKvBlGEkFcvMl4MtUzfWD.png)

-   As in the Periods tab, the *Status* is split in two columns. One that represents the Status with a color code, and one that represents it by its name. The possible Status values are:
    -   Never Opened, colored in gray. It belongs to a recently created Period.
    -   Open, colored in green.
    -   Closed, colored in red.
    -   Permanently Closed, colored in red. Document Permanently closed. Only by reopening a Year, it is possible to Open it again.

Notice that:

-   13th Period has **only one Document Type**, GL Journal, since in the Adjustment Period only GL Journal Transactions can be posted.
-   If a period is open for all document types but it is closed for a given document type, for instance AP Invoice, it will be possible to post transactions of any type within that given period but AP Invoice transactions.
-   If not all the Document Types of that Period have the same value, for example some are Closed and some are Open, then the Status of the Period is *Mixed.*

#### Financial Type

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Financial Type`

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).


##### Overview

In this window, the user can configure the different options to use in the Financial Type Configuration window.

!!! info
    For more information, visit [Financial Type Configuration](https://docs.etendo.software/latest/financial-management/accounting/transactions.md#financial-type-configuration).


###### How to install the Financial Type dataset
 
Go to the Enterprise Module Management window and select the organization needed to import the date by default. Then, check the dataset called "Banking Pool" and click the OK button. 

![](https://docs.etendo.software/latest/assets/drive/1_nLnAqZWd8FEKdbpyTOeYnn9XwECgU6z.png)

The information imported from the Financial Type window is shown. 

![](https://docs.etendo.software/latest/assets/drive/1Xyc0F9xpyGMqp2Aq_MArXwdIGjdtgpw0.png)


#### Period Control Log

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Period Control Log`

##### Overview

This window shows the log for period control.

The periods of a year can be opened, closed and permanently closed. The **Period Control Log** Window shows all the Openings and Closings of the Periods that had taken place in the application, therefore it can be used to understand how the Status of a Period has changed over time.

When a Period is Open or Closed through the Open/Close Period Control Window, or has been permanently Closed as a result of the closing of a Year through the End Year Close Window, a record is created in the Period Control Log.

For example, this screenshot shows the Period Control Log for an Organization that has opened all of its Periods for the Year 2019:

![](https://docs.etendo.software/latest/assets/drive/1ZQv4ciDH8NuE6aOQLnWmztUUVg2PxZuN.png)

As shown in the image above, the main fields in this Window are:

-   Organization.
-   Calendar.
-   Year.
-   Period. The starting Period from which the Period Action is going to be performed (usually matches the Until Period)
-   Until Period. The ending Period to which the Period Action is going to be performed (usually matches the Period)
-   Period Action. The action that has taken place. It can be Open Period, Close Period or Permanently Close Period.
-   Document Category. If the Period Action has been done only for Document Type, it will be shown here. This means that the Period Action has affected only the shown Document Type for that Period, not all the other Document Types, which remains in the same status as before.

#### Account Tree

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Account Tree`

##### Overview

An account tree is the way Etendo captures the chart of accounts of an Organization. The chart of accounts is a list of the accounts used in an organization's general ledger.

Some countries such as Spain or France require that a specific chart of accounts is used in the statutory books, therefore the authorities can see the same list of accounts and the same level of detail in the P&L and Balance Sheet. In that case, Etendo provides a "Localization Bundle" which includes the Statutory Chart of Accounts.

For instance, the Spanish Localization Bundle includes

-   the General Spanish CoA
-   the PYMES Spanish CoA.
-   and the Abreviado Spanish CoA.

After installation, the Charts of Accounts are available for selection during the [Initial Client Setup](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-run-an-initial-client-setup-process.md) and the Initial Organization setup.

On the other hand, some countries such as the USA do not require that specific level of detail.

!!! info
    Each organization can define the chart of accounts that best suits their practices.


In that case, Etendo provides a Generic Chart of Accounts module which delivers a standard list of accounts which can be evolved for the organization's needs. After installation, the generic Chart of Accounts is available for selection during the Initial Client Setup and the Initial Organization setup.

As explained in the Chart of Accounts Module article, a **chart of accounts module** basically includes a **CSV file** which contains the account tree structure.

In Etendo, that creates:

-   the organization's **Account Tree** or Chart of Accounts
-   and besides a defaulted General Ledger configuration.

It is important to remark that it is not possible to apply a Chart of Accounts in the Enterprise Module Management window because a Chart of Account is not a dataset but a CSV file.

If the legal entity has already been created, the chart of accounts can be imported by using the Import Data module, this module allows importing products, business partners and accounts among others.

Additionally, a CSV file can be imported while running the Initial Client Setup or while running the Initial Organization Setup if the checkbox "**Include Accounting**" is checked, therefore the CSV file or accounting file can be selected.

Finally, a chart of accounts can also be created manually, regardless it is recommended to start from a sample chart of accounts like the generic one and evolve it for the company’s needs rather than starting from scratch.

###### Element

The account tree window allows the user to review and maintain the chart of accounts imported through a chart of accounts module, as well as to create new ones from scratch.

If a *Chart of Accounts* module or an accounting CSV file is installed and selected at *client* level through the Initial Client Setup process:

-   the chart of accounts automatically created can be shared by any organization available in the client, as it is assigned to the organization (\*)

As a side note, this is not the preferred method but to install it at organization level, see next paragraph.

If a *Chart of Accounts* module is installed and then selected at *organization* level through the Initial Organization Setup process, the chart of accounts automatically created is linked to the organization being created.

###### Element Value

Element value tab lists every chart of account elements from the chart of accounts headings to the subaccounts.

Every Chart of Accounts in Etendo contains different types of elements. There are four types of elements:

-   "Heading", "Breakdown" and "Account" elements help to structure the chart of accounts in a way that the financial reports can be produced based upon that structure
-   "Subaccount" element allows the user to post the transactions to the ledger

Besides, it is well-known that every account, subaccount in Etendo terms, needs to be included in a financial statement:

-   "Asset", "Liability" and "Owner's Equity" account types need to be included in the Balance Sheet
-   while "Expense" and "Revenue" account types need to be included in the Profit & Loss.

The best way to understand how a chart of accounts is captured in Etendo is by pressing the "Tree" icon  ![](https://docs.etendo.software/latest/assets/drive/12vK4RHPNQ9vkJb_G1nUIneDdx6pLh_CY.png) which can be found in the toolbar.

Tree icon opens a new window which shows one tree branch per financial statement:

-   Balance Sheet
-   Profit & Loss
-   and Temporary default accounts. This branch of the account tree gathers temporary defaults accounts which are not ledger accounts.

![](https://docs.etendo.software/latest/assets/drive/12A_jeX7hjVBb97LZZW_nK85hx6Esp59a.png)

Besides, each tree branch contains several elements inside structured in a hierarchical way, for instance:

-   Balance Sheet branch is split into:
    -   Assets
    -   Liabilities and Owner's Equity

![](https://docs.etendo.software/latest/assets/drive/1HiiXjkkZf5e0VsVbgldchqqwS8WrspJG.png)

As shown in the image above "Assets" is also split into:

-   Current Assets
-   Long term Assets
-   and Accumulated Depreciation

Same way "Equity" is also split into several accounts, in Etendo terms "subaccounts", such as "Capital Stock" or "Retained Earnings".

Back to the "Element Value" tab, there are several **basic fields** which help to define each chart of account element:

![](https://docs.etendo.software/latest/assets/drive/1pTNoLOD4-8sKE5F5VMC-loqlMklPTmv6.png)

-   the **"Search Key"** and the **"Name"** identifies the chart of account element.
    -   The search key can either be a single letter, a word or a number, however it is important to be aware that the "Search key" field is the field that Etendo uses while helping the user to create an account tree element.
-   the **Account Sign** field is only shown and therefore editable if the general ledger configuration linked to the account tree is "NOT" set as "Centrally Maintained".  
    In that case, the account sign of each account tree element defines how the balance of that account is going to be shown in the financial statements:
    -   if the account sign of an account tree element is "**Debit**", the balance of that account will then be shown as **(Debit - Credit)**.
        -   "**Asset**" accounts type are normally set as **Debit**, therefore its debit balance is shown as **positive** in the Balance Sheet.  
            In the same way, its credit balance is then shown as negative in the Balance Sheet.
    -   if the account sign of an account tree element is "**Credit**", the balance of that account will then be shown as **(Credit - Debit)**.
        -   "**Liability**" account types are normally set as **Credit**, therefore its credit balance is shown as **positive** in the Balance Sheet. Same applies to the "**Owner's Equity**" account type.
        -   "**Revenue**" account types are set as **Credit**, therefore its Credit balance is shown as **positive** in the P&L report.
        -   "**Expense**" account types are set as **Credit**, therefore its Debit balance is shown as **negative** in the P&L report.
-   **"Element Level"**. As already mentioned, there are four types of elements which help to structure a chart of accounts in a way that the financial reports can be produced right away based upon the chart of accounts structure.  
    It is important to remark that it is not mandatory to use the four elements but just the ones which help us to properly structure the Chart of Accounts,  
    having into account that the lowest one "Subaccount" is the only mandatory one because ledger entries are posted to the ledger through the subaccounts.  
    The four element types are:
    -   **Heading** - the elements "B - Balance Sheet" and "1000-Assets" are heading type elements because those are at the top ones having other elements underneath.
    -   **Breakdown** - the element "1100 - Current Assets" and "1500 - Long-term Assets" are a breakdown of the heading "1000-Assets".  
        Often, the assets and liabilities on a balance sheet are broken down into current assets and long-term assets. Breakdown element type helps us to define this kind of situations.
    -   **Account** - this level would help to split the element "1100 - Current Assets" into "1110 - Cash", "1200 - Accounts Receivable", etc, as a way to distinguish between the different types of current assets.
    -   **Subaccount** - this level is the lowest level of detail. For instance, the account element "1110 - Cash" can be split into the subaccounts "1120 - Checking Account" and "1140 - Petty Cash" subaccount to distinguish while posting to the ledger the transactions paid by check from the ones paid by petty cash.
-   **"Account Type"**. The options available are **Asset**, **Liability**, **Owner's equity**, **Revenue** and **Expense**.  
    *Asset*, *Liability* and *Owner's equity* account types are included in the Balance Sheet as well as in the "balance sheet closing entry" as described in the Close Year article.  
    *Revenue* and *Expense* account types are included in the Income Statement as well as in the "P&L closing entry" as described in the Close Year article.
-   **"Summary Level"** defines if an account tree element groups other levels underneath or not, therefore heading, account and breakdown levels can be marked as summary levels while subaccount should not. There can be heading elements which group other elements underneath, for instance the element "1000-Assets" while there can be heading elements which do not need to group other elements underneath but Customize Elements, for instance the element "1900-Total Assets". The first type needs to be configured as "Summary Level", the second type does not need to. Moreover:
    -   the amounts displayed in financial reports such as the Balance Sheet and the Income statement for a non-summary element is the sum of the debit and credit amounts posted to that account (subaccount).  
        The balance of that particular subaccount will then be shown as either positive or negative depending on its account sign or depending on what is centrally configured in the General Ledger Configuration
    -   the amounts displayed in financial reports such as the Balance Sheet and the Income statement for a summary element is the sum of the amounts of the elements underneath.  
        The balance of that summary element will then be shown as either positive or negative depending on its account sign or depending on what is centrally configured in the General Ledger Configuration.

Additionally, there are other advanced fields which also help to configure more unusual scenarios. Those fields are:

-   the **"Show Value Condition"** field defines if a chart of account element balance is going to be shown and taken into account in financial reports or not. The options available are:
    -   **Algebraic**, the chart of account element will be shown anyway regardless of the sign of its balance. This is the most commonly used.
    -   **Negative Only**, it will be shown only in case its balance is negative
    -   **Positive Only**, same as the previous one but just in case its balance is positive.
-   **"Element Shown"** defines if an account tree element is going to be shown in the financial reports or not. This one can be used for elements used to execute calculations which do not need to be shown in a report.
-   **"Title Node"** defines if an account tree element is going to be shown in the financial reports just as a "Title" without including its balance. This option works for heading account tree elements which balance is not 100% accurate for whatever kind of reason as there is another element which gets the correct balance value by using operations or customized elements between a set of given elements.

###### Customized Elements

The customized elements tab allows the user to get an account tree element as a combination of a given list of existing elements.

Once the account tree elements have been selected in a new record and in the correct sequence order, it is not required to specify a sign but just the elements which are going to be included. The customized elements need to be elements located at the same level within the account tree, otherwise a "recursive" calculation may happen.

For instance, the element "1900-Total Assets" is the sum up of three customized elements:

-   current assets
-   long-term assets
-   and accumulated depreciation

as shown in the image below.

![](https://docs.etendo.software/latest/assets/drive/1fwBuS2sV-ufKxTap5X_O02nkVrMJOD_i.png)

###### Translation

Account elements can be translated to any language required.

###### Account Tree creation

A chart of accounts creation from scratch implies to create each chart of accounts element one by one:

-   Once created, the elements can be arranged in a hierarchical way according to the corresponding financial statement structure by using the "Drag & Drop" function of the Tree Structure feature.
-   Moreover, Etendo considers the elements created in an alphanumerical order as a sorted list and finds the position in that sorted list where the new element needs to be positioned.

The steps to follow for the creation of a chart of accounts (CoA) are:

-   select the "**Organization**" for which the CoA is going to be used while posting to ledger, for example "F&B US Inc."
-   enter the "**Name**" of the Chart of Accounts, for example "Test CoA"
-   set it up as "**User Defined Type**" to distinguish it from the imported Chart of Accounts
-   select the **Tree** as "B&F International Group Element Value (Account, etc.).

Move to "**Element Value**" tab.

The first thing to do in this tab is to create all the "Heading" elements one per each financial statement, for instance "Balance Sheet" and "Income Statement".

**Balance Sheet Node:**

-   create a new record
-   enter "**B**" value in the field "Search Key"
-   enter "**Balance Sheet**" value in the field "Name"
-   select "**Heading**" in the Element Level field
-   select "**Memo**" in the Account Type field
-   select the value "**Algebraic**" in the field "Show Value Condition"
-   set the field "**Summary Level**" to "Yes"

**Profit and Loss Node:**

-   create a new record
-   enter **"P&L"** value in the field "Search Key"
-   enter "**Profit and Loss**" value in the field "Name"
-   select "**Heading**" in the Element Level field
-   select "**Memo**" in the Account Type field
-   select the value "**Algebraic**" in the field "Show Value Condition"
-   and set the field "**Summary Level**" to "Yes"

The next thing to do in this tab is to create one element value per each financial statement node:

-   Balance Sheet nodes are "Assets", "Liabilities" and "Owner's Equity"
-   Profit and Loss nodes are "Revenue" and "Cost of Goods Sold" among others

####### Balance Sheet Elements

Let us focus first on explaining the creation of the nodes/elements of a **Balance Sheet** financial statement.

An organization's balance sheet shows its financial situation at a given point in time, the three sections of a balance sheet are:

-   **Assets**
-   **Liabilities**
-   and **Owner's equity**

therefore the next step to take is to create one chart of account element per each balance sheet node:

**Assets Node:**

To create a new record, enter a value in the field "Search Key", this value could be a number for instance ("1000") or a name ("Assets").

!!! info
    It is recommended to use a number as that helps while creating a new chart of accounts elements. The following rule is considered while creating new chart of accounts elements:    
        Etendo first considers the elements in an alphanumerical order as a sorted list, finds the position in that sorted list where the new element needs to be positioned, looks at the element that precedes it and if that element is a summary element and the current element is not a summary one, adds the element as a children of that node otherwise add the element as a sibling of that node.

-   enter "**Assets**" value in the field "Name"
-   select "**Heading**" in the Element Level field
-   select the value "**Asset**" in the field "Account Type"
-   select the value "**Algebraic**" in the field "Show Value Condition"
-   and set the field "**Summary Level**" to "Yes"

Once done, this node is dragged and dropped under the Balance Sheet node.

**Liabilities Node:**

-   create a new record
-   enter the value ("2000") in the field "Search Key"
-   enter "**Liabilities**" value in the field "Name"
-   select "**Heading**" in the Element Level field
-   select the value "**Liability**" in the field "Account Type"
-   select the value "**Algebraic**" in the field "Show Value Condition"
-   and set the field "**Summary Level**" to "Yes"

**Owners Equity Node:**

-   create a new record
-   enter the value ("3000") in the field "Search Key"
-   enter "**Owner's Equity**" value in the field "Name"
-   select "**Heading**" in the Element Level field
-   select the value "**Owner's Equity**" in the field "Account Type"
-   select the value "**Algebraic**" in the field "Show Value Condition"
-   and set the field "**Summary Level**" to "Yes"

!!! info
    This time there is no need to drag and drop these two last nodes as Etendo does it according to the rule explained above.


Both the Liabilities Node and the Owner's Equity Node are summary nodes, therefore they are added as a sibling of the Asset Node (element that precedes them).

It is very common to break down assets and liabilities into current assets (or liabilities) and long-term assets (or liabilities).

Moreover, "Assets" can be split into "Cash", "Inventory" and "Accounts Receivable", "Liabilities" can be split into "Accounts Payable" and "Note Payable" and finally "Owner's Equity" can be split into "Common Stock" and "Retained Earnings" among others.

All of the above guides the creation of the following sub-nodes at a lower level underneath the heading nodes.

**Current Assets Node:**

-   create a new record
-   enter the value ("1100") in the field "Search Key"
-   enter "**Current Assets**" value in the field "Name"
-   select "**Breakdown**" in the Element Level field
-   select the value "**Assets**" in the field "Account Type"
-   select the value "**Algebraic**" in the field "Show Value Condition"
-   and set the field "**Summary Level**" to "Yes"

Once done, drag this node under the "1000-Assets" node.

**Long-Term Assets Node:**

-   create a new record
-   enter the value ("1500") in the field "Search Key"
-   enter "**Long-term Assets**" value in the field "Name"
-   select "**Breakdown**" in the Element Level field
-   select the value "**Assets**" in the field "Account Type"
-   select the value "**Algebraic**" in the field "Show Value Condition"
-   and set the field "**Summary Level**" to "Yes"

!!! info
    This time, there is no need to drag and drop this last node as Etendo does it according to the rule explained above.


The Long-term Asset Node is a summary node, therefore it is added as a sibling of the Current Asset Node (element that precedes it).

**Current Liabilities Node:**

-   create a new record
-   enter the value ("2100") in the field "Search Key"
-   enter "**Current Liabilities**" value in the field "Name"
-   select "**Breakdown**" in the Element Level field
-   select the value "**Liability**" in the field "Account Type"
-   select the value "**Algebraic**" in the field "Show Value Condition"
-   and set the field "**Summary Level**" to "Yes"

Once done, drag this node under the "2000-Liabilities" node.

**Long-Term Liabilities Node:**

-   create a new record
-   enter the value ("2500") in the field "Search Key"
-   enter "**Long-term Liabilities**" value in the field "Name"
-   select "**Breakdown**" in the Element Level field
-   select the value "**Liability**" in the field "Account Type"
-   select the value "**Algebraic**" in the field "Show Value Condition"
-   and set the field "**Summary Level**" to "Yes"

!!! info
    This time, there is no need to drag and drop this last node as Etendo does it according to the rule explained above.


The Long-term Liabilities Node is a summary node, therefore it is added as a sibling of the Current Liabilities Node (element that precedes it).

**Cash Node:**

-   create a new record
-   enter the value ("1110") in the field "Search Key"
-   enter "**Cash**" value in the field "Name"
-   select "**Account**" in the Element Level field
-   select the value "**Asset**" in the field "Account Type"
-   select the value "**Algebraic**" in the field "Show Value Condition"
-   and set the field "**Summary Level**" to "Yes"

Once done, drag this node under the "1100-Current Assets" node.

**Accounts Receivable Node:**

-   create a new record
-   enter the value ("1120") in the field "Search Key"
-   enter "**Accounts Receivable**" value in the field "Name"
-   select "**Account**" in the Element Level field
-   select the value "**Asset**" in the field "Account Type"
-   select the value "**Algebraic**" in the field "Show Value Condition"
-   and set the field "**Summary Level**" to "Yes"

!!! info
    This time, there is no need to drag and drop this last node as Etendo does it according to the rule explained above.


The Accounts Receivable Node is a summary node, therefore it is added as a sibling of the Cash Node Node (element that precedes it).

Cash Node needs to have subaccounts elements underneath, for instance:

**111200 Checking Account**

-   create a new record
-   enter 111200 in the field "Search Key"
-   enter "**Checking Account**" value in the field "Name"
-   select "**Subaccount**" in the Element Level field
-   select the value "**Asset**" in the field "Account Type"
-   and select the value "**Algebraic**" in the field "Show Value Condition"

**111300 Checking In-Transfer**

-   create a new record
-   enter 111300 in the field "Search Key"
-   enter "**Checking In-Transfer**" value in the field "Name"
-   select "**Subaccount**" in the Element Level field
-   select the value "**Asset**" in the field "Account Type"
-   and select the value "**Algebraic**" in the field "Show Value Condition"

**111400 Petty Cash**

-   create a new record
-   enter 111400 in the field "Search Key"
-   enter "**Petty Cash**" value in the field "Name"
-   select "**Subaccount**" in the Element Level field
-   select the value "**Asset**" in the field "Account Type"
-   and select the value "**Algebraic**" in the field "Show Value Condition"

Above subaccounts are the ones used while posting ledger entries into the ledger.

!!! info
    There is no need to drag and drop the three subaccounts above into the corresponding node as Etendo does it.


Accounts Receivable Node needs to have subaccounts elements underneath, for instance:

**112100 Trade Receivable**

-   create a new record
-   enter 112100 in the field "Search Key"
-   enter "**Trade Receivable**" value in the field "Name"
-   select "**Subaccount**" in the Element Level field
-   select the value "**Asset**" in the field "Account Type"
-   and select the value "**Algebraic**" in the field "Show Value Condition"

**112200 Tax Receivables**

-   create a new record
-   enter 112200 in the field "Search Key"
-   enter "**Tax Receivables**" value in the field "Name"
-   select "**Subaccount**" in the Element Level field
-   select the value "**Asset**" in the field "Account Type"
-   and select the value "**Algebraic**" in the field "Show Value Condition"

Above subaccounts are the ones used while posting ledger entries into the ledger.

There is no need to drag and drop the two subaccounts above into the corresponding node as Etendo does it as explained above.

The same steps need to be followed for the creation of other "Account" and "Subaccount" node types under the nodes:

-   Long-term Assets
-   Current Liabilities
-   Long-term Liabilities
-   and Owner's Equity

Last but not least, it is required to create a node which summarizes assets, another one which summarizes liabilities and the last one which summarized owner's equity.

Let's take the creation of total assets node, for instance:

**Total Assets Node**

-   create a new record
-   enter 1900 in the field "Search Key"
-   enter "**Total Assets**" value in the field "Name"
-   enter "1100+1500" in the field "Description" as a way to describe that this node sums up current assets and long-term assets.
-   select "**Heading**" in the Element Level field
-   select the value "**Asset**" in the field "Account Type"
-   and select the value "**Algebraic**" in the field "Show Value Condition"
-   navigate to Customized Element tab
-   create a new record
-   enter **"1"** in the field "Sign"
-   select the Account **"1100 - Current Assets"**
-   create a new record
-   enter **"1"** in the field "Sign"
-   select the Account **"1500 - Long-term Assets"**

####### **Income Statement Elements**

Now, let us briefly explain the creation of the nodes/elements of an **Income Statement**.

An organization's income statement shows the company's financial performance over a period of time (usually one year), therefore it has two main sections:

-   the first section details the organization revenues
-   the second section details the organization expenses

The income statement also takes into account the cost of the goods sold, therefore the gross profit refers to the sum of an organization's revenues minus the cost of goods sold.

Besides, it is very common to separate the "Operating Expenses" from the "Non-Operating Expenses", therefore it is possible to calculate the operating income as the difference between the gross profit and the operating expenses while the net income is the difference between the operating income and the non-operating expenses.

All of the above drives the creation of the nodes/ elements which once arranged will represent the structure of the organization's income statement.

The nodes to create for instance can be:

-   The "**Revenue**" node:
    -   this "Heading" and "Revenue" account type node can include all the revenue subaccounts.
-   The "**Total Revenue**" node:
    -   this "Heading" and "Revenue" account type node can include a customized element of the "Revenue" node above.
-   The "**Cost of the Goods Sold**" node:
    -   this "Heading" and "Expense" account type node needs can include all the cost of the goods sold related subaccounts.
-   The "**Total Cost of the Goods Sold**" node:
    -   this "Heading" and "Expense" account type node can include a customized element of the "Cost of the Goods Sold" node above.
-   The "**Gross Margin**" node:
    -   this "Heading" and "Revenue" account type node is a customized element of the "Revenue" node and the "Cost of the Goods Sold" node above.
-   the "**Operating Expenses**" node:
    -   this "Heading" and "Expense" account type node can include all the operating expense related subaccounts.
-   The "**Total Operating Expense**" node:
    -   this "Heading" and "Expense" account type node can include a customized element of the "Operating Expenses" node above.
-   The "**Operating Income**" node:
    -   this "Heading" and "Revenue" account type node can include a customized element of the "Revenue" node, the "Cost of the Goods Sold" node and the "Operating Expenses" node.
-   The "**Non Operating Expense**" node:
    -   this "Heading" and "Expense" account type node can include all the non operating expense related subaccounts.
-   The "**Total Non Operating Expenses**" node:
    -   this "Heading" and "Expense" account type node can include a customized element of the "Non Operating Expense" node above.
-   and finally the "**Net Income**" node:
    -   this "Heading" and "Revenue" account type node can include a customized element of the "Operating Income" node above and the "Total Non Operating Expense" node above.

####### **Temporary Elements**

As already explained, there is a close relationship between an **account tree** and the General Ledger configuration in Etendo, as the Account Tree is a Dimension of the General Ledger.

The General Ledger configuration also includes a set of default accounts (or subaccounts in Etendo terms) to use while posting certain type of transactions. Those accounts need to be created in the account tree first and then be configured in the General Ledger Configuration tabs listed below:

-   General Accounts
-   Defaults

Most of those defaults accounts are ledger accounts such as:

-   the "Income Summary" account
-   the "Retained Earnings" account
-   the "Vendor Liability" account
-   or the "Customer Receivables" account

However, there are a few of these accounts which are not ledger accounts but what we can call "Temporary" accounts such as the "Suspense Balancing" account.

!!! info
    It is not necessary to create a default ledger account as those are created as part of the account tree.


However, temporary default accounts need to be created in the account tree under a specific tree branch or node, in order to get that the balance of those temporary accounts is not taken while launching either the Balance Sheet or the Income Statement.

Therefore, a new "Heading" and "Summary" element needs to be created in the "Element Level" tab, that element can be named "Temporary Accounts".

![](https://docs.etendo.software/latest/assets/drive/16EDV3UALuhdBZvS9RlBN0-4jF1WdCJbG.png)

Once created, the accounts below (subaccounts) can be created and move underneath it:

-   Suspense Balancing account
-   Suspense Error account

![](https://docs.etendo.software/latest/assets/drive/1a2sIjZMYnytbKtZw8g42pCYzy9EfSb2M.png)

#### General Ledger Configuration

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `General Ledger Configuration`

##### Overview

The general ledger configuration indicates the way that the organization's financial transactions are going to be posted to the ledger.

A general ledger configuration is created whenever an accounting CSV file or "Chart of Accounts" module reference data is selected while running the Initial Client Setup process or the Initial Organization Setup process.

The general ledger configuration created by default can afterwards be customized to meet the organization's needs.

If the *accounting CSV file* or *reference data* is selected at **client** level, the general ledger configuration is assigned to the organization(\*) therefore it is available to any organization within the client.

If the *accounting CSV file* or *reference data* is selected at **organization** level, the general ledger configuration is assigned to the organization making it available to that organization and any of its descendants.

Besides a general ledger configuration, those accounting files also create:

-   the organization's Account Tree or Chart of Accounts
-   and the general ledger default accounts

Etendo delivers accounting files through:

-   the "Chart of Accounts" modules contained in a Localization Bundle if available for your country
-   and the Generic Chart of Accounts module

Additionally, a general ledger configuration can also be created manually, but once the corresponding Account Tree has been created.

Finally, it is important to remark that the organization's general ledger configuration and the organization's account tree (or chart of accounts) are linked to each other because "Account" is a mandatory dimension of the general ledger configuration.

###### General Ledger Configuration

The General Ledger Configuration window allows the user to review and maintain defaulted general ledger configurations and to create new ones if needed.

![](https://docs.etendo.software/latest/assets/drive/1CzhjGyPX0yBre7l8Icc2Oh1BZY8rJASo.png)

A general ledger configuration created by default can be changed to meet the organization's needs by changing the features below:

1\. The **Currency** to use while posting transactions or journal entries to the ledger.

-   The currency shown at first is taken from the currency entered either in the Initial Client Setup process or in the Initial Organization Setup process. This currency can be changed if needed before doing any posting.

An organization can have two general ledgers assigned, one inherited from its parent in a given currency (i.e. USD) and its own one which can be defined in a different currency (i.e. EUR).  
That is, for instance, the configuration of the F&B España organization of the F&B sample client. This means that every time that an F&B España transaction is posted to the ledger Etendo will show two "Journal Entries Report" windows one for each general ledger, as shown in the images below:

2\. The **Allow Negative** checkbox defines if negative posting is allowed or not while posting transactions to the general ledger.

Negative posting not allowed implies that a negative debit posting would turn into a credit posting and a negative credit posting would turn into a debit posting.

For instance, a purchase invoice generates the posting below:

|     |     |     |     |
| --- | --- | --- | --- |
| Account | Debit | Credit | Comments |
| Product Expense | Line Net Amount |     | One per invoice line |
| Tax Credit | Tax Amount |     | One per tax line |
| Vendor Liability |     | Total Gross Amount | One per invoice |

If that purchase invoice needs to be totally or partially voided or reversed, the posting will look like:

-   in case of "Allow Negative" checkbox enabled

|     |     |     |     |
| --- | --- | --- | --- |
| Account | Debit | Credit | Comments |
| Product Expense | (-) Line Net Amount |     | One per invoice line |
| Tax Credit | (-) Tax Amount |     | One per tax line |
| Vendor Liability |     | (-) Total Gross Amount | One per invoice |

-   in case of "Allow Negative" checkbox disabled

|     |     |     |     |
| --- | --- | --- | --- |
| Account | Debit | Credit | Credit |
| Product Expense |     | Line Net Amount | One per invoice line |
| Tax Credit |     | Tax Amount | One per tax line |
| Vendor Liability | Total Gross Amount |     | One per invoice |

3\. The general ledger can be set as "**Centrally Maintained**" or not in relation to the way that the Account Tree elements are going to be shown in the **Balance Sheet** and in the **Income Statement**

-   If a general ledger is set as "Centrally Maintained":
    -   The field "Account Sign" is hidden in the Element Value tab of the Account Tree window
    -   It is possible to define at general ledger level whether the balances of any account type are going to be shown as "Positive" or "Negative" in the financial statements.  
        If the checkbox "Central Maintenance" is selected :
        -   The Debit balances of the "Asset" account type will be shown as "Positive" in the Balance Sheet.  
            As a consequence of that, if an "Asset" account type has a credit balance that will then be shown as "Negative" in the Balance Sheet.
        -   The Credit balances of the "Liabilities" account type will be shown as "Positive" in the Balance Sheet. The same applies to "Owner's Equity" account types.
        -   The Debit balances of the "Expense" account type will be shown as "Positive" in the Income Statement.
        -   Finally, the Credit balances of the "Revenue" account type will be shown as "Positive" in the Income Statement.

It is possible to uncheck any of the checkboxes listed above. For instance, an organization might want to show the Debit balances of the "Expense" account type as "Negative" in the Income Statement.

-   If the general ledger is NOT set as "Centrally Maintained":
    -   The field "Account Sign" is not hidden in the Element Value tab of the Account Tree window.
    -   Therefore, the account sign of each account tree element defines how the balance of that account is going to be shown in the financial statements.

Finally, it is important to remark that the "**Central Maintenance**" checkbox is not selected by default for the general ledgers created by default, as the corresponding accounting CSV files or reference data imported have their own configuration through the "Account Sign".

###### Dimension

Dimension tab allows the user to configure the organization's general ledger dimensions or to add additional accounting dimensions not centrally maintained in the client.

Etendo allows the user to manage mandatory and not mandatory accounting dimensions to be entered in the Dimensions section of the documents, which can be posted to the ledger.

Mandatory dimensions can be filled in or not depending on the document category being created. For instance, "Business Partner" and "Product" are mandatory dimensions that need to be filled in a purchase invoice but can be filled or not in a G/L Journal.

There are **two "mandatory" dimensions at the organization's general ledger configuration** level, which are:

-   The "**Account**" as any document/transaction posted to the ledger needs to be posted in a ledger account (or subaccount in Etendo terms) of a given account tree or chart of accounts.
-   The "**Organization**", as any document/transaction posted to the ledger, needs to be posted in an organization's general ledger.

Besides, if an organization belongs to a Client which centrally maintains the accounting dimensions, it is possible to add in this tab other dimensions such as the ones listed below which can even set as "mandatory" for the organization:

-   Activity
-   Asset
-   Campaign
-   Location From
-   Location To
-   Sales Region

On the other hand, let us take for instance an organization's general ledger for which the dimensions below have been selected in this tab because the organization belongs to a client which does not centrally maintain the accounting dimensions:

-   Mandatory dimensions:
    -   Organization
    -   and Account
-   Non mandatory dimensions which are set as "mandatory" in here:
    -   Business Partner, Product and Project
-   Non mandatory dimension:
    -   Sales Region

The configuration above means that every time that a transaction of any kind (purchase invoice, sales invoice, G/L Journal) is posted to the ledger, all the mandatory dimensions above must be entered while there is an option to enter sales region information if any.

Moreover:

-   some dimensions appear on some transactions and some do not. That depends on the document being created. For instance:
    -   The **Account** dimension always appears in the Lines tab of a G/L Journal, however it does not appear in the Lines tab of a purchase invoice as that data is automatically taken from the accounts (subaccounts) setup for the product, for the business partner and for the taxes, if any.
-   Some dimensions appear either in the header and/or in the lines of the documents. That defaulted configuration can be changed only in the clients which centrally maintain the accounting dimensions and for the centrally maintained dimensions.

###### Active Tables

Active Tables tab allows the user to define which tables and therefore transactions are going to be posted to the ledger and which ones not.

The tables listed below are the tables suitable to be posted:

|     |     |
| --- | --- |
| Table name | Window |
| FinancialMgmtAmortization | Amortization |
| Invoice | Purchase Invoice   <br>  <br>Sales Invoice |
| Order | Purchase Order   <br>  <br>Sales Order |
| FIN\_BankStatement | Financial Account - Bank Statement |
| FIN\_Finacc\_Transaction | Financial Account - Transactions |
| FIN\_Payment | Payment In   <br>  <br>Payment Out |
| FIN\_Reconciliation | Financial Account - Reconciliation |
| FinancialMgmtGLJournal | General Ledger Journal |
| MaterialMgmtShipmentInOut | Goods Receipt   <br>  <br>Goods Shipment |
| MaterialMgmtInternalConsumption | Internal Consumption |
| MaterialMgmtInventoryCount | Physical Inventory |
| ProcurementReceiptInvoiceMatch | Matched Invoices |
| ProcurementPOInvoiceMatch | Matched Purchase Orders |
| MaterialMgmtInternalMovement | Goods Movement |
| MaterialMgmtProductionTransaction | Work Effort   <br>  <br>Bill of Materials Production |
| FinancialMgmtBankStatement | Old payment flow - Bank Statement   <br>  <br>Set to Active = No |
| FinancialMgmtCashJournal | Old payment flow - Cash Journal   <br>  <br>Set to Active = No |
| FinancialMgmtDPManagement | Old payment flow - Debt-payment management   <br>  <br>Set to Active = No |
| FinancialMgmtSettlement | Old payment flow - Settlements   <br>  <br>Set to Active = No |

For instance, the records of the table "FinancialMgmtAmortization" are the amortization transactions which can be posted.

!!! info
    The records of the tables above can be posted when the "Active" checkbox of these tables is set as "Yes".

There is a flag named "**Disable for Background**" next to each table above, which allows that a given table is not taken by the Accounting Background Process.

In other words, it is possible to configure that the transactions related to a given "Table", for instance the "Invoice" table, are not taken by that process, therefore, they will not be automatically posted.

###### Documents

Documents tab allows the user to define which document types of a table allow negative posting and if they use a different accounting process than the default one based on a given accounting template.

###### General Accounts

General accounts tab allows the user to define the accounts to be used in balancing entries and in the end-year closing process.

The mandatory "Income Summary" account is populated by default as part of the general ledger configuration. That account is obviously part of the organization's chart of accounts.

If an accounting CSV or reference data is not selected while running the Initial Client Setup process or the Initial Organization Setup process, this mandatory account needs to be manually entered here once the account tree and therefore the corresponding income summary (or net income) subaccount has been created.

![](https://docs.etendo.software/latest/assets/drive/1cpksFbMtBay1-6GdLI2NxEIDLUQk7ap0.png)

The Income Summary account is used by the Close Year process as the P&L closing entry resets all revenue and expense account type and posts the difference in this account.

This tab also contains a set of "Suspense" accounts which needs to be created under a specific account tree branch as explained in the Account Tree creation article.

Those accounts can also be provided by the accounting files, in fact the Generic CoA provides these accounts.

The **Suspense Balancing** account is shown if the checkbox "Suspense Balancing Use" is selected. This account is used in those cases where an accounting entry can not be balanced while being posted. If there is no account in this field, Etendo shows an error.

The **Suspense Error** account is shown if the checkbox "Suspense Error Use" is selected. This account is used in those cases where an exception or error happens, preventing an accounting entry to be posted. If there is not an account in this field, Etendo will show an error.

Other accounts are:

The **Retained Earning** account if any automatically gets the P&L closing balance of a given year. If there is no account in this field, nothing will be automatically moved from the **Income Summary** account to the **Retained Earning** account.

The **Currency Balance** account is shown if the checkbox "Currency Balance Use" is selected. This account is used in those cases where there are currency rounding differences while posting a transaction. For instance, it could happen that the total invoice exchanged into a given currency does not 100% match with the sum of each invoice line exchanged into the same currency.

Finally, the **Reverse Permanent Account Balances** checkbox allows the user to include or not an entry to reverse the balance sheet accounts balances during the end year closing process.

###### **Defaults**

Defaults tab allows the user to maintain or to add a set of default accounts to use while posting a certain type of transactions.

The mandatory "Default" accounts are populated by default as part of the general ledger configuration. Those accounts are obviously part of the organization's chart of accounts.

If an accounting csv or reference data is not selected while running the Initial Client Setup process or the Initial Organization Setup process, these mandatory accounts need to be manually entered here once the account tree and therefore the corresponding subaccounts have been created.

The accounts selected here are defaulted to every Business Partner Category or Product Category, for instance, by using the action button "Copy Accounts".

The accounts defaulted to every business partner category, for instance, can be as well defaulted to every vendor or customer by using the action button "Copy Accounts", this time from the Business Partner Category window.

Finally, it is possible to override these defaults at business partner category level allowing vendor liabilities and customer receivables for different business partners to be posted to different accounts.

This last configuration change needs to be done in the vendor and/or customer windows.

![](https://docs.etendo.software/latest/assets/drive/1q05Evh6w4UuSzH_ZIsB6OiymUn2Mh76U.png)

As shown in the image above, "default" accounts are:

-   Customer Receivables
-   Customer Prepayments
-   Write Off
-   Write Off Revenue
-   Vendor Liability
-   Vendor Prepayment
-   Non-Invoiced Receipts
-   Bad Debt Expense Account
-   Bad Debt Revenue Account
-   Allowance for Doubtful Debt Account
-   Doubtful Debt Account
-   Product Asset
-   Product Expense
-   Product Deferred Expense
-   Product Revenue
-   Product Deferred Revenue
-   Product COGS
-   Product Revenue Return
-   Product COGS Return
-   Invoice Price Variance
-   Warehouse Differences
-   Inventory Revaluation
-   Work in Progress
-   The "Bank Asset" default account is populated as:
    -   the Deposit Account
    -   the Withdrawal Account
    -   the Cleared Payment Account (Payment In)
    -   the Cleared Payment Account (Payment Out)
-   The "Bank In Transit" default account is populated as:
    -   the In Transit Payment IN Account
    -   the In Transit Payment OUT Account
-   The "Bank Expense" default account is populated as:
    -   the Bank Fee Account
-   Bank Revaluation Gain Account
-   Bank Revaluation Loss Account
-   Tax Due
-   Tax Credit
-   Depreciation
-   Accumulated Depreciation

###### **Creation of a General Ledger Configuration**

An Organization might have as many different General Ledgers as required.

By default, an organization can have only one general ledger assigned for simplicity reasons, unless:

-   The organization has its own general ledger and another one inherited from its parent, that is, for instance, the case of "F&B España" sample organization.
-   The advanced general ledger configuration is enabled at system level, as explained in the Organization article.

!!! info
    It is recommended to create a new general ledger configuration and link it to an organization once it has been created the Account Tree to use while posting transactions to that new general ledger.


It is possible that an organization might require the same account tree but different general ledgers, one of them in USD and the other one in EUR.

The steps to follow to configure a general ledger are:

-   Select the "**Organization**" for which the general ledger is going to be available, for instance "F&B US Inc.".
-   Enter the **"Name" of the General Ledger configuration**, for instance "EUR General Ledger".
-   Select the "**Accounting Standard**" for instance "US GAAP".  
    In the United States, "Generally Accepted Accounting Principles" (GAAP) is the name for the framework of accounting rules used in the preparation of financial statements.  
    This data is just informative without any business logic behind it.
-   Select the **"Currency"** to use for posting transactions to the ledger.  
    In the case of the F&B US Inc organization, the currency can be "EUR" therefore the F&B US Inc organization can get a double posting one in "USD" and the other one in "EUR".
-   Select the check "**Allow Negative**" in case negative posting is allowed as already described or not.

Once done, the newly created general ledger needs to be linked to F&B US Inc organization in the General Ledgers tab.

The organization of the example has now two general ledgers assigned:

-   The inherited one (owned by its parent organization "F&B International Group") in "USD" currency.
-   The newly created one in "EUR" currency.

Back to the General Ledger configuration window, the remaining steps to take to properly configure the general ledger are:

Navigate to the Dimension tab to add below listed mandatory dimensions:

-   Create a new record and enter **Organization** in the field "**Name**".
-   Select "**Organization**" in the field "**Type**".
-   Select "F&B US Inc" in the field "**Trx Organization**".
-   Select the checkbox "**Balanced**" and the checkbox "**Mandatory**".
-   Create a new record and enter **Account** in the field "**Name**".
-   Select "**Account**" in the field "**Type**".
-   Select the already existing "**Account Tree**" in the field "**Account Tree**".
-   Select the checkbox "**Mandatory**".

Non-mandatory dimensions can also be created as described below in case it is required to save additional information such as the business partner or the project while posting journal entries or any transaction type:

\- create a new record and enter "Business Partner" in the field "Name"

\- select "Business Partner" in the field "Type"

\- create a new record and enter "Project" in the field "Name"

\- select "Project" in the field "Type"

Navigate to the Active Tables tab to review the tables which are going to generate accounting. It is possible to enable accounting for the ones do not active for accounting.

Navigate to the General Accounts tab to configure the mandatory general account (Income Summary) as well as the accounts to use in case of suspense balancing or suspense error among others. Those accounts need to be previously created as described in the Account Tree creation article.

Finally, navigate to the Defaults tab to configure the default accounts which needs to be copied to other accounting configuration tab such as:

-   the Product Accounting tab
-   the Financial Account Accounting Configuration tab
-   the Tax Rate Accounting tab
-   etc.

!!! info
    As every time that a transaction of any type is posted to the ledger, it is posted to the two general ledgers configured for the Organization.


#### Fiscal Calendar

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Fiscal Calendar`

##### Overview

"Legal entities with accounting" organization types must have a fiscal calendar assigned, while the rest of organization types can inherit it from its parent.

A calendar contains years and the periods of each year required to get an accurate organization's accounting practice.

###### Calendar

The fiscal calendar window allows the user to create and maintain the organization's fiscal calendar.

![](https://docs.etendo.software/latest/assets/drive/14LKmlXTMNBiFaMeCMoQbvMtX2_jk8gri.png)

A fiscal calendar is a collection of years to be created on demand as time goes by.

Each organization requiring a calendar needs to have one calendar assigned to it and only one therefore it is clearly known which calendar is going to be used while posting transactions and while opening and closing the accounting cycle. The procedure to do that is:

-   Once the calendar is properly created in this window, it needs to be linked to the "legal with accounting organization" type by selecting it after enabling the checkbox "Allow Period Control".  
    All of the above is done in the Organization window.

Etendo automatically proposes the organization as \* while creating a fiscal calendar:

-   Accepting this default means that this calendar will be maintained at the client level and will therefore be available to all another organizations created within this client.
-   Changing this default to other organization means that this calendar will only be available to that organization.

###### Year

Year tab allows the user to create as many fiscal years as required within a fiscal calendar.

A Fiscal Year is an accounting year which normally includes the twelve consecutive months over which a company determines earnings and profits.

The button "**Create Periods**" allows the user to create the twelve consecutive months starting from "**January, 1st**" to "**December, 31st**" as "**Standard Calendar Period**" Types.

This process also allows the user to create the "**13th Period**" which is a period that can be used to make accounting adjustments and get them posted to the ledger by using G/L Journals.

The "**13th Period**" is an "**Adjustment Period**" that is the last date of the last standard calendar period (i.e 31-12-2012).

![](https://docs.etendo.software/latest/assets/drive/1IGnqS8kOPXzV58VxzGjD3sBTUBWmgOtj.png)

Once created, all the periods need to be **opened** in the Open/Close Period Control window.

The periods of an organization's fiscal calendar can be reviewed in the Period Control tab of the **Organization** windows. Note that:

-   **"Standard Calendar Periods"** are opened for **every "Document Category"**, which means that Etendo obviously allows the user to post any document type to the ledger within a standard calendar period open.
-   while the "**Adjustment Period**" is only open for **G/L Journal** document category, which means that Etendo allows to post only G/L journals within the adjustment period.

Additionally, it is possible to **manually** create the accounting periods of a year. That action requires to enter the data below:

-   A consecutive *period number*: this number will be later on used to open/close consequent accounting periods at a time.
-   A *period name.*
-   The *starting date* of the period.
-   The *ending date* of the period.
-   The *period type* as "Standard Calendar Period Type" or "Adjustment Period" as required.

The values of a Period can be manually modified also, but only while this Period is in a **Never Opened** Status, once it has been open it will no longer be possible.

Etendo checks if another period with the same starting and ending date is already registered in the system, and it also checks if the date of a period overlaps the date of another period.

Finally, a year can be:

-   **"closed"**
-   and **re-opened**

Both actions are performed in the End Year Close window.

###### **Period**

The period tab lists all the periods of a year.

![](https://docs.etendo.software/latest/assets/drive/1He-55aAYDSVEVm8vWy9_ER_h0k2qSIK5.png)

#### Account Combination

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Account Combination`

##### Overview

An account combination is an Organization's General Ledger account.

###### Combination

The Account Combination window allows the user to review the Organization's General Ledger accounts.

![](https://docs.etendo.software/latest/assets/drive/1-YOqTdD_2q6W30y3iC19xoD6NJRoMpnj.png)

The accounts can not be created manually in this window, but in the Account Tree window.

Every time that an account (or subaccount in Etendo terms) is created in an account tree of a General Ledger, the corresponding account combination is also created in this window.

The account combination window shows the data below:

-   the *General Ledger*
-   the *Organization*
-   and the *Account*

#### Accounting Process

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Accounting Process`

##### Overview 

In this window, the user can configure necessary accounting processes.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/basic-features/financial-management/accounting/set-up/accounting-process.png)

!!!info
    For more information, visit the developer guide on [How to Create a Module that Adds an Accounting Process](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-module-that-adds-an-accounting-process.md).
  
#### G/L Item

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `G/L Item`

##### Overview

A G/L item is an account item to be used for direct account posting.

Direct account posting refers to:

-   entering and posting accounting entries in a G/L Journal by using the corresponding GL items and therefore their debit/credit accounts defined.
-   creating and posting financial invoices such as Purchase Financial invoices, same applies to sales.
-   or creating and posting G/L item payments in a GL Journal.

###### G/L Item

G/L Item window allows the user to create as many account items as required for an organization and general ledger.

![](https://docs.etendo.software/latest/assets/drive/1hHiMTePnKxuaHcACgsqhmT3AxiD0MxKQ.png)

As shown in the image above, a G/L item or accounting item can be created by entering below listed basic information:

-   the *Organization*, as always if a G/L item is created at (\*) organization level will be shared across all the organization of the client.
-   the *Name* of the item
-   the flag *"Enable in Financial Invoices"* define if the item can be used as an account while creating and posting financial sales and purchase invoices, if that is the case:
    -   a *Tax Category* will have to be selected to get that purchase or sales taxes are properly calculated.

###### Accounting

Account items are directly related to the debit and credit accounts to be used while posting them.

![](https://docs.etendo.software/latest/assets/drive/1Z4sfyfiCMHTj0jE2vxq9xtUb8zZyPzzk.png)

As shown in the image above, the accounting tab allows the user to enter debit and credit accounts for the G/L item. It is possible to enter a debit and a credit account for each organization's general ledger configuration.

#### G/L Category

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `G/L Category`

In this window, the user can define G/L Categories to be used in the General Ledger.

The G/L Category Tab defines optional identifiers for a document or journal. Each Category may be used on a document, import or manual journal. 

The fields to note are:
- ¨G/L Category: A classification used to group lines in the general ledger.
- Client: Client for this installation.
- Organization: Organizational entity within client
- Name: A non-unique identifier for a record/document often used as a search tool.
- Description : A space to write additional related information.**
- Active: A flag indicating whether this record is available for use or deactivated.
- Category Type: Source of the Journal with this category
- Document Category: A classification of document types that are shown and processed in the same window.
- Default: A value that is shown whenever a record is created.

![](https://docs.etendo.software/latest/assets/drive/1MGSdC1HCW2OFxS7Z0NL7qnM-94c55xOb.png)

Once the needed information is complete, the categories are defined as in the following example: 

![](https://docs.etendo.software/latest/assets/drive/1Im9vUdoxlQDR3jvfk8F9Qsbd8brcpWty.png)

#### Document Type

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Document Type`

##### Overview

Each document type in Etendo refers to a business transaction such as purchase orders, shipments or sales invoices, among others.

Etendo includes a complete set of standard Document Types needed for the application to work properly.

This set is bundled into two reference datasets:

-   Standard document types for orders, invoices, etc. and settings - Core - English (USA)
-   Document types and default algorithm for bank statement auto matching - Advanced Payables

These datasets can be imported into the application during its initial setup using Initial Client Setup or Initial Organization Setup processes. Or if the application is already up and running, these datasets or their updates can be installed using Enterprise Module Management window.

The complete list of standard document types is the following:

|     |     |     |
| --- | --- | --- |
| Document Type Name  | Document Category  | Business Transaction |
| AP CreditMemo | AP Credit Memo | Purchase Credit Memo |
| AP Invoice | AP Invoice | Purchase Invoice |
| AR CreditMemo | AR Credit Memo | Sales Credit Memo |
| AR Invoice | AR Invoice | Sales Invoice |
| Return Material Sales Invoice | AR Return Material Invoice | Return Material Sales Invoice |
| Reversed Sales Invoice | AR Invoice | Reversed Sales Invoice |
| MM Receipt | Material Receipt | Goods Receipt |
| RTV Shipment | Material Receipt | Return to Vendor Shipment |
| MM Shipment | Material Delivery | Goods Shipment |
| RFC Receipt | Material Delivery | Return from Customer receipt |
| Purchase Order | Purchase Order | Purchase Order |
| RTV Order | Purchase Order | Return to Vendor |
| Quotation | Sales Order | Sales Quotation |
| RFC Order | Sales Order | Return from Customer Sales Order |
| POS Order | Sales Order | Point of Sales Order |
| Warehouse Order | Sales Order | Warehouse Order |
| Standard Order | Sales Order | Sales Order |
| AP Payment | AP Payment | Payment Out |
| AR Receipt | AR Receipt | Payment In |
| Financial Account Transaction | Financial Account Transaction | Financial Account Transaction |
| Bank Statement File | Bank Statement File | Bank Statement |
| Payment Proposal | AP Payment Proposal | Payment Proposal |
| Reconciliation | Reconciliation | Reconciliation |
| Doubtful Debts | Doubtful Debt | Doubtful Debt |
| Cost Adjustment | Cost Adjustment | Cost Adjustment |
| Landed Cost | Landed Cost | Landed Cost |
| Landed Cost Cost | Landed Cost Cost | Landed Cost Cost |
| Inventory Amount Update | Inventory Amount Update | Inventory Amount Update |

It is also important to remark that *new document types could be added to the list above*, if that is the case an updated version of the "Reference Data" containing the new document types will be provided by Etendo. That newly created "Reference Data" will have to be applied to the corresponding Organization in the Enterprise Module Management.

###### Document Definition

Document type window allows the user to configure how each document type is going to behave in terms of accounting and sequencing among others.

![](https://docs.etendo.software/latest/assets/drive/1qwdOVXe0r2NZ05j_Oslp9WmmOKPlogwi.png)

"Standard" Document Types can be customized as required by having into account that:

There are a few fields whose values should not be changed. Those are:

-   the **Organization**
-   the **Document Category**
-   and the **Table**

The rest of the fields can be changed, for instance:

-   the **Name** of the document
-   the **Print Text** which is the name of the document to be printed while printing the document.
-   the **Sequenced Document** flag could be disabled or enabled if it is required to either
    -   manually number a document type
    -   or automatically number a document type according to a given document sequence.
-   **Document Cancelled,** if any, is the document to use for voiding a given document type. For instance, a "Reversed Sales Invoice" document type can be set as the document canceled of an "AR Invoice", therefore that one will be the one to use while voiding an "AR Invoice"(or sales invoice).
    -   A "Reversed Sales Invoice" document type is also an "AR Invoice" document type, but it can have a different sequencing by just linking it to a difference document sequence
    -   besides, it is set as a "**Return**" document type, which means that:
        -   it generates a "negative" sales invoices with a negative invoiced quantity/ies
        -   therefore, the posting will be opposite to the sales invoice one, as described below, in case Allow Negative checkbox is enabled and in case it is not:

|     |     |     |     |
| --- | --- | --- | --- |
| Account | Debit | Credit | Comments |
| Customer Receivables | (-) Line Net Amount |     | One per invoice line |
| Tax Debit |     | (-) Tax Amount | One per tax line |
| Product Revenue |     | (-) Total Gross Amount | One per invoice |

|     |     |     |     |
| --- | --- | --- | --- |
| Account | Debit | Credit | Comments |
| Customer Receivables |     | Line Net Amount | One per invoice line |
| Tax Debit | Tax Amount |     | One per tax line |
| Product Revenue | Total Gross Amount |     | One per invoice |

-   the checkbox named "**Credit Memo**" is enabled by default for "Credit Memo" document types such as "AR Credit Memo" and "AP Credit Memo":
    -   *"Credit Memo"* document types are also "*reverse*" or "*cancelled*" documents type however, those behave differently than "*return*" document types, for instance:
        -   they generate invoices with "*positive*" invoiced quantity/ies
        -   therefore, the posting is always opposite to the invoices one, regardless the Allow Negative checkbox setup:

|     |     |     |     |
| --- | --- | --- | --- |
| Account | Debit | Credit | Comments |
| Customer Receivables |     | Line Net Amount | One per invoice line |
| Tax Debit | Tax Amount |     | One per tax line |
| Product Revenue | Total Gross Amount |     | One per invoice |

-   The field "**Document Type for Order**" allows the user to define for the Quotation "Document Type" the document (i.e Standard Order) to use while creating a sales order from a sales quotation.
-   The field "**Document Type for Invoice**" allows the user to define the document (i.e. Return Material Sales Invoice) to use while creating a Sales Order from a Return Material Document Type, like Return From Customer.

**Report Templates**

The report template tab allows the user to configure a different look and feel for the document types by setting up Jasper JRXML templates for each document type.

It is possible to print document types such as Goods Shipments or Sales Invoices by using the "*Print*" action button, which can be found in the *Toolbar*.

In Etendo, every document suitable to be printed is linked to a "standard" report template.

If necessary, report templates can be customized and even new ones can be created and therefore linked to a given document type.

![](https://docs.etendo.software/latest/assets/drive/1dJ2abXwQM0NXUH3Ht_ryJhDt_BiSEHe-.png)

###### **Email Definitions**

Emails definition tab supports the creation of as many email templates as required depending on the language to be used for sending the documents by email.

Documents can be sent by e-mail by using the action button **Email** which can be found in the *Toolbar*.

![](https://docs.etendo.software/latest/assets/drive/1X9EV4yRuVGFu1ooGo6_cC8AIru8Px7nh.png)

As shown in the image above, it is possible to define:

-   a *Subject template* to be populated with "real" data every time a given document is sent by email.
    -   For instance "New Invoice (@our\_ref@)" will turn into "New Invoice (SI/2589)" where SI/2589 is the number of the invoice sent by email.
-   a Body template to be populated with "real" data every time a given document is sent by email.
    -   For instance:
        -   "Dear @cus\_nam@, Find attached the invoice @our\_ref@ corresponding to the products you received from F&B International Group."  
            will turn into
        -   "Dear Healthly Food Supermarkets Co., Find attached the invoice SI/2589 corresponding to the products you received from F&B International Group."

Here is the list of possible tags:

-   *@cus\_ref@*: The document reference of the customer
-   *@our\_ref@*: The reference of the document
-   *@cus\_nam@*: The name of the customer
-   *@sal\_nam@*: The name of the sales rep.
-   *@bp\_nam@*: The Business Partner name \[since 3.0MP27\]
-   *@doc\_date@*: The document date \[since 3.0MP27\]
-   *@doc\_desc@*: The document description \[since 3.0MP27\]
-   *@doc\_nextduedate@*: The next due date (if document has associated any payment plan) \[since 3.0MP27\]
-   *@doc\_lastduedate@*: The last due date (if document has associated any payment plan) \[since 3.0MP27\]

###### Translation

Document types can be translated to any language required.

#### Document Sequence

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Document Sequence`

##### Overview

Every document in Etendo can be numbered and therefore linked to a document sequence.

Etendo "reference data" including the standard list of document types also includes a standard list of document sequence linked to those documents which make sense to number.

"Standard" document sequences are listed in the document sequence window.

It is important to remark that:

-   it is possible to *change "standard" document sequences*, for instance:
    -   the "AP Invoice" document type is created by default linked to a document sequence which is setup as Auto Numbering
    -   that sequence can be changed by removing the Auto Numbering checkbox, which would imply that "AP Invoice" numbers will have to be manually entered according to the supplier's invoice number.
-   The most common scenario is that different document types have different document sequences, however it is also possible that a set of different document types share the same document sequence in order to get the same consecutive numbering.

##### Sequences

Document sequence window allows the user to define how document sequences are going to behave.

![](https://docs.etendo.software/latest/assets/drive/1cqBJ-LRNEyws3SX80mIMk8SbXVlAmEKI.png)

As shown in the image above, a document number sequence can be set as *"Auto Numbering"* which means that the document linked to that sequence will get a document number automatically generated by the sequence.

It is also possible to define how the "Auto Numbering" type document sequence are going to behave in terms of:

-   how numbering is going to be *incremented by*
-   what is going to be the *next number assigned*
-   if it requires a given *prefix* or *suffix*

!!! info
    The number logic is applied when saving the document.

##### Masked Sequences

Transactional and Non-transactional Sequences can be used in any document and any field.
In this new sequences, the masks can be added with dynamic dates or strings.

The user can filter the new sequence according to the organization, document type and mask, the mask is  `#######` by default. This sequences could be created with the `Create sequences` process in `General Setup > Aplication > Create Sequences` window.

![Sequences creation](https://docs.etendo.software/latest/assets/drive/1PP0CkomMyGlx20kQe3l7D0hW5Jn__2q-.png)

- Mask: It is a string to define a parse format, with the possibility of creating a dynamic date or literal substring in addition to the formatted incremental number.

##### Sequence Masking
 
Sequence masking always uses numeric key to parse the input. Therefore, the mask must have at least the same number of '#' or '\*' chars as the length of the `Next Assigned Number` field. (Seven is the length of this field by default)


###### Data Time Formatting

| Letter | Type | Presentation | Examples |
| :--- | :--- | :--- | ---: |
| G   | Era designator | Text | AD  |
| y   | Year | Year | 1996; 96 |
| Y   | Week year | Year | 2009; 09 |
| M   | Month in year | Month | July; Jul; 07 |
| w   | Week in year | Number | 27  |
| W   | Week in month | Number | 2   |
| D   | Day in year | Number | 189 |
| d   | Day in month | Number | 10  |
| F   | Day of week in month | Number | 2   |
| E   | Day name in week |     | Tuesday; Tue |
| u   | Day number of week (1 = Monday) | Number | 1   |
| a   | Am/pm marker | Text | PM  |
| H   | Hour in day (0-23) | Number | 0   |
| k   | Hour in day (1-24) | Number | 24  |
| K   | Hour in am/pm (0-11) | Number | 0   |
| h   | Hour in am/pm (1-12) | Number | 12  |
| m   | Minute in hour | Number | 30  |
| s   | Second in minute | Number | 55  |
| S   | Millisecond | Number | 978 |
| z   | Time zone | General time zone | Pacific Standard Time; PST; GMT-08:00 |
| Z   | Time zone | RFC 822 time zone | \-0800 |
| X   | Time zone | ISO 8601 time zone | \-08; -0800; -08:00 |
| ‘ ’ | Literal | Text |     |

###### Parse Formatting

| Letter | Type | Presentation | Examples |
| :--- | :--- | :--- | ---: |
| ##   | Digit Key | Digit | 9   |
| !   | Literal Key | Literal |     |
| l   | Lower Case | Char | a   |
| x   | Hexadecimal | Number | 10F |
| U   | Upper Case | char | A   |
| A   | *Alpha Numeric* | Number | h0l4 |
| ?   | Character | Char | h   |
| \*  | Anything | \*  | \*  |

!!! info
    The parse is resolved in two steps, first dates and then types. For this reason if the parse formatting characters like ‘l’, ‘x’ ‘U’ or ‘A’ are used,  the character ‘!’ should be used to escape each character. 

##### Examples

| Mask | Input | Result |
| :--- | ---: | ---: |
| ##-### | 1   | 00-01 |
| #!### | 12  | 1#2 |
| ##-'YE!AR'-### | 21  | 00-YEAR-21 |
| yy-MM-dd/### | 1   | 21-08-31/01 |
| y-#### | 25  | 2021-025 |

#### Tax Category

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Tax Category`

##### Overview

A tax category allows the user to group and manage similar product or services tax rates.

Not all the products and services have the same tax rate.

There are tax-exempt products and there are products or services to which a higher tax rate applies just due to the type of product or service.

Tax categories allow the user to group similar tax rates by having into account that:

-   the same tax category can be assigned to more than one product or service, by taking into account that it is recommended to split the tax categories by item type.
-   every product and service must be linked to one tax category same as each tax rate.  
    Therefore when that product or service is entered in an invoice only the tax rate/s which belong to that tax category will be used to get the applicable tax rate.
-   there are other variables which can reduce up to just "one" the correct tax rate to use while entering a product and a business partner in an invoice.  
    Those variables are related to the business partner tax category as well as the way each tax rate is configured.

###### Tax Category

It is possible to create as many tax categories as required to be later on linked to the corresponding tax rates and products.

![](https://docs.etendo.software/latest/assets/drive/1_UP-RLlLSipSAv4t40gnPbBj05ds58p0.png)

As shown in the image above, a tax category can be created by just entering:

-   a *Name*
-   and a *Description*

of the Tax Category.

Once created, the tax categories must be assigned to the corresponding products and services in the Product window.

If the tax category is flagged as *As per BOM*, it indicates that products with this category will use the products included in its Bill of Materials list to calculate proportionally the taxes. In this case, only one Tax\_Rate has to be configured for this tax category flagged as *Summary level*.

###### Translation

Tax categories can be translated to any language required.

#### Business Partner Tax Category

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Business Partner Tax Category`

##### Overview

A business partner tax category allows the user to group and manage similar business partners tax rates.

Not all the business partners are subject to the same type of tax, that depends on the business partner activity type, for instance:

-   there could be business partners subject just to VAT (Value Added Tax)
-   and there could be business partners subject to VAT and to Income Tax

and even business partners subject to the same tax type could be tax-exempt or not depending on the type of activity they perform.

Business Partner tax categories allow the user to group similar taxes, and the same business partner tax category can be assigned to more than one business partner.

A business partner may or may not be linked to a business partner tax category:

-   if a business partner is linked to a business partner tax category, only the tax rate/s which belongs to that business partner tax category will be used to **automatically** populate the applicable tax rate in an order/invoice line.

There are other variables which can reduce up to just "one" the tax rate automatically populated in an order/invoice line, while entering a business partner and a product in an order/invoice.

Those variables are related to the tax category as well as the way each tax rate is configured.

!!! info
    It is important to notice that all available tax rates are available for *manual* selection in an order/invoice line regardless a tax rate is automatically populated by Etendo for that given order/invoice line.

The end-user could need to select a particular tax rate under a given business scenario that is not the common one.

###### Business Partner Tax Category

It is possible to create as many business partners categories as required to be later on linked to the corresponding tax rates and business partners, if applicable.

Once created, the business partner tax categories must be linked to the corresponding business partners, if applicable, in either:

-   the Customer tab of the Business Partner window.
-   and/or the Vendor/Creditor tab of the Business Partner window.

#### Tax Rate

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Tax Rate`

##### Overview

Each tax rate in Etendo is a combination of different variables such as the tax category, the rate and the business partner tax category among others. If all those variables are properly set up, the correct tax rate is automatically filled in every business transaction.

It is possible to create *tax rates* which are a *combination* of more than one tax rate. That scenario can apply to a business partner who is subject to VAT and Income tax at the same time while renting an office to a third party out of its "normal" business activities.

###### Applying Taxes

Taxes are applied to orders and invoices. In this process, there are two steps: associate the desired tax to the line and process the document that will apply the tax and calculate the actual amount.

###### Obtaining Default Tax

When in a document line (order or invoice) a product is selected, a default tax is associated to this line. Keep in mind that we can select the tax we want for this line. The selection of the default tax is achieved by the C\_GetTax DB stored procedure. The rules followed by this procedure are as follows:

For sale transactions with an associated project, if a project has a tax rate, this tax rate is taken. This works when an order is generated by a Project (Order). In this case, the tax is taken directly from the project line tax. For sale transactions, if a partner is marked as tax-exempt, the selected tax will be the one checked as exempt with the most recent date relative to the ordered or invoiced date.

Otherwise, the tax is selected from the ones defined in the same tax category as the product on the line. Taxes with defined business partner tax category can only be applied to those business partners with the same tax category (for vendor or customer). If the tax does not have a business partner tax category, it can be applied to any partner (with or without an associated tax category). If a tax with business partner tax category and another one without it can both be applied, the one with business partner tax category will be selected. In addition to this, the “to” and “from” locations are taken into account. At first, those taxes defined for closer regions are selected (if a tax is for region and another one for country, the region one will be selected). This information is associated to the tax rate, through the “Tax Zone” tab. Taxes are applied taking into account if they are defined as Sales, Purchases or Both.

Apart from these rules, and only in the case of Purchase/Sales Orders and Invoices, the system filters the tax rates taking into account the Cash VAT flag defined at the document's header too, which is automatically set based on the organization's and the business partner's configuration for sales and purchase documents respectively (although it can be manually overridden afterwards). Thus, in case the document is enabled for the Cash VAT regime, the system will get a Cash VAT tax rate and the other way around.

Once the tax is selected (the default one, or another one selected by the user), an approximated amount is calculated by the SL\_Order\_Tax or SL\_Invoice\_Tax callouts. If the tax is checked as summary, the calculation will be done using the rate defined in the parent, not exploding it and taking the real values from its children. In addition, information c\_order\_tax and c\_invoice\_tax tables are populated with taxes at this point. The actual amount is calculated when the document is processed.

When creating a new invoice, it is possible to write down taxes manually and check them as “no recalculate”. In this case, the tax is applied with the amount written down in the tax tab of the invoice, so no recalculation will be done while processing the invoice. When a tax in an invoice is marked as recalculated, if the tax is edited manually all changes will be lost when processing the invoice. This is because the tax amount of the invoice is recalculated. “No recalculate” taxes are not associated to any invoice line, whereas the recalculated ones are. So when a tax comes from a line, it will be checked as recalculate. If it is manually created, it will not be checked, and this value will be not updatable.

Not recalculating taxes is useful for invoices that include tax lines without a product. For example, it can be used for imported products: these products usually have an invoice that is tax-exempt and another invoice that is created by the custom broker without any product, but a tax amount for the imported products.

###### Calculating actual amount

When these documents are processed (c\_order\_post and c\_invoice\_post), the actual taxes and amounts are calculated from the selected taxes (unless they are defined as “no recalculate” for invoices) following these steps:

Every tax at C\_OrderTax or C\_InvoiceTax tables is deleted. This is done because the taxes in these tables before the process of the document are for information only and can be inaccurate.

A new line is created in C\_OrderTax or C\_InvoiceTax tables for every different tax applied to the lines of the document (each line will have only one tax). The amount paid to the tax is calculated from the base amount of the lines that are associated to this tax.

For taxes defined as summary, a new line is inserted for each of its children and the amount is calculated taking into account whether or not the children are cascade.

###### Tax

Tax rate window allows the user to create as many tax rates as required.

![](https://docs.etendo.software/latest/assets/drive/1CNDReMFRW2DoxDedviRdGoWwXmcDGTAp.png)

The fields to fill in to properly set up a tax rate are:

-   **"Valid From Date"**, which is the date when a tax rate becomes valid.  
    For instance, an existing tax rate increases its rate, in this case:
    -   it is recommended to create a new tax rate configured with the new requirements, rather than changing the original tax rate which can be still in use if required.  
        That way, there will be two tax rates which are exactly the same for a given organization but the rate (%) and the valid from date.
-   **"Tax Category"**, as every tax rate must be linked to a given tax category as the way of grouping similar tax rates.
-   **"Rate"**, which is the % or rate of the tax
-   **"Sales/Purchase Type"** as the way to distinguish between sales and purchase taxes.  
    The tax type is another variable which Etendo takes into account while retrieving the correct tax rate in either sales and purchase transactions. It is also a very valuable variable to take into account while reporting taxes as there are tax reports which require to submit purchase and sales tax information separately.  
    There is an additional option which is "Both", this option allows using the same tax rate for both purchase and sales transactions.
-   **"Country/Region"** and **"Destination Country/Region"**.  
    Tax such as *VAT* and *US Sales Tax* take into account from where/to where a transaction takes place in order to get it subject to the tax or not.  
    These two fields allow the user to enter that information by taking into account if the tax is a "purchase" or a "sales" tax type, therefore, when issuing a sales invoice from F&B US Inc (USA Country and New York Region) to a customer also located in Destination Country USA and Destination Region New York, only the sales tax rates created within that specified Tax Zone would be applied.
-   **"Summary Level"**, a tax rate can be defined as summary which means it will have some tax rates underneath.  
    Summary tax rates are also set as "*Parent Tax Rate*" therefore its child tax rates can be linked to it.  
    For instance, a sales invoice is issued to a business partner under a specific VAT regime which includes an additional tax rate besides the VAT rate.  
    For this scenario, it is required to create three tax rates, the parent one as summary, and two more for the VAT rate and for the other rate, both of them linked to the parent.  
    *"It is important to remark that when issuing the sales invoice for that business partner, **the tax rate shown/selected is the summary** or parent one."*
-   **"Base Amount"**, which is the tax base amount to take into account in the tax amount calculation. The options available are:
    -   Line Net Amount
    -   Line Net Amount + Tax Amount
    -   Alternate Tax Base Amount
    -   Alternate Tax Base Amount + Tax Amount
-   **"Document Tax Amount Calculation"** which is the way how the tax amount is going to be calculated per each tax rate (or %). The options available are:
    -   "Document based amount by rate", this option implies that the tax amount is going to be calculated as tax amount = (tax base amounts sum at the same rate \* tax rate)
    -   "Line base amount by rate", this option implies that the tax amount is going to be calculated by line as tax amount = (tax base amount line 1 \* tax rate) + (tax base amount line 2 \* tax rate) + ....+ (tax base amount line n + tax rate).

Under "More Information" section, there are also few relevant fields:

-   **"Parent Tax Rate"**, tax rates belonging to a summary tax rate should be linked to them in this field therefore the tax rate tree is properly structured.
-   **"Business Partner Tax Category"**, a tax rate can be linked to a specific business partner tax category, therefore it will only apply to the business partners belonging to that category.
-   **"Withholding"**, a tax rate can be set as "Withholding" therefore it is properly managed as a separated tax type in the fiscal reports.
    -   Withholding tax rates are "*negative*" tax rates.
-   **Tax Exempt**. A tax rate can be set as exempt therefore it is the one automatically shown in the order/invoice lines created for a given Customer set as tax-exempt as well.
-   **Cash VAT**. This kind of tax rates are used to support the Cash VAT regime, which allows companies to settle the VAT amount when they have collected/paid the invoices instead of in the invoice creation. When using cash VAT tax rates, the Tax Due and Tax Credit Transitory accounts must be declared into the Accounting tab.
-   Tax rates can also be setup as **"Not Taxable"**. A not taxable tax rate can be linked to transactions subject to tax which become not taxable under a given situation. There are fiscal reports which require information about both type of taxes, exempt and not taxable.
-   Specific tax rates can be setup as **"Deductible"** (for those Organizations for which tax deduction is NOT allowed).
-   Specific tax rates can be setup as **"Not Deductible"** (for those Organizations for which tax deduction is allowed).

The way Deductible and Not Deductible tax rates behave in terms of accounting is explained below:

-   Purchase invoice which includes a 100% deductible tax amount.  
    The VAT amount needs to be posted to the ledger in a Tax Credit account, therefore purchase invoice posting looks like:

|     |     |     |     |
| --- | --- | --- | --- |
| Account | Debit | Credit | Comments |
| Product Expense | Line Net Amount |     | One per invoice line |
| Tax Credit | Tax Amount |     | One per tax line |
| Vendor Liability |     | Total Gross Amount | One per invoice |

##### Purchase invoice which includes NOT deductible tax amount

The VAT amount can not be posted to the ledger in a Tax Credit account as it means an expense, therefore purchase invoice posting looks like:

|     |     |     |     |
| --- | --- | --- | --- |
| Account | Debit | Credit | Comments |
| Product Expense | Line Net Amount + Tax Amount |     | One per invoice line and tax rate |
| Vendor Liability |     | Total Gross Amount | One per invoice |

!!! info
    To be able to use the functionality described below, the Financial Extensions Bundle must be installed. To do so, follow the instructions in marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).   

The same behavior can be applied for the non-deductible tax. 

By default, the accounting amount that is generated in the supplier invoices when a non-deductible tax range is used, is assigned to the accounting expense account configured in the "Accounting" tab of the product. With this improvement, the amount of that non-deductible tax can be assigned to a specific account, the one configured in the accounting of the tax range itself. To do this, check the "Use the configured account" checkbox located inside the "Accounting" tab in the "Tax rate" window. 

![](https://docs.etendo.software/latest/assets/drive/vgIVffeOmiu30VHVRRMlIlN41BbaPKe2vydojUxBx1boZS64zEcr5NgKw6fh0iMflSP60qpC-gb2f36uFWzzast-6LFJ2mV1IAkboxENkBoWlmzrxsBMSu-sudz9F7X6n-mzSD7Q.png)

As system administrator user, activate the accounting template field in the Active Table tab of the General Ledger Configuration window and then, set the template called Purchase Invoice Not Deductible. 

![](https://docs.etendo.software/latest/assets/drive/jd75sTt-TOwSTJGK4Zc0Z89aBGk9emQ2OxMIsQ-90Ku8KewJpoRffN8bIdUft-R37ud1xdrkWuzLEyUUZxY6Lk8Wdz-dfK5HfJsUfP2NPmxKSE274RPJRgLwAXE7I6YbO5GpV6eH.png)

This checkbox, "Use the configured account", will only be visible if the checkbox under the heading "Non-deductible tax" was previously checked. The default value of this checkbox will be NO.

![](https://docs.etendo.software/latest/assets/drive/Nn8EaIsRTZnkCxDRlhahXZsX_A1UGjiokZHVkHfTxQCyhd9mOvS8f_IrcGX6YwX_vHu3NQsqvJ-M5JLYAzxUE-NDdb5K1HwTPruHSxRaoj8pNuHgFHhhNSqh86-xmctvh1rcoiYF.png)

![](https://docs.etendo.software/latest/assets/drive/idDd6mEz0pXGB5MWi7L2wgYeas5dOXuCJCVhH_Zb2a4TWYGbHc1fgGwHEy5Yyv4ss9G-zP736NwP95l5IgFScpal65Z8G-ueARkHn6ije6drfpJAcR7XlxrXqeVLLMGgA5DJzvGV.png)

The VAT amount needs to be posted to the ledger in a Tax Credit account, therefore purchase invoice posting looks like:

|     |     |     |     |
| --- | --- | --- | --- |
| Account | Debit | Credit | Comments |
| Product Expense | Line Net Amount |     | One per invoice line |
| Tax Credit | Tax Amount |     | One per tax line |
| Vendor Liability |     | Total Gross Amount | One per invoice |



Tax rates examples:

-   **Simple tax rate**
    -   *"Purchase VAT Tax Rate at 18%"* belonging to the tax category "Normal VAT for Products", Country/Region set to Spain and Destination Country/Region set to Spain.
-   **Summary tax rate**
    -   "Service Sales VAT Tax Rate at 18.00% + Withholding (-15.00%)" belonging to the tax category "Normal VAT for Services" and to the business partner tax category "Business Partners subject to VAT and Income Tax".  
        This one must be setup as Summary type having two tax rates underneath which must belong to the same tax category and business partner tax category:
        -   "Service Sales VAT Tax Rate at 18.00% + Withholding (-15.00%) (VAT 18%)", rate = 18,00
        -   "Service Sales VAT Tax Rate at 18.00% + Withholding (-15.00%)" (W -15%)", rate = -15,00

###### **Tax Zone**

Tax zone defines the origin country/region and destination country/region where a given tax rate applies, for those cases where it is not enough to define only one "Origin" Country/Region and only one "Destination" Country/Region at header level.

For instance, an "Export" tax rate must detail as Origin Country/Region the location of the warehouse organization and as Destination Country/Region the rest of countries and regions where it is possible to export the goods. This tax rate would apply to sales transactions between the "local" organization and its customers located abroad.

The same would apply to an "Import" tax rate, in this case Origin Country/Region would be all the country from where goods can be imported and the Destination Country/Region would be Organization one.

###### **Translation**

Tax rates can be translated to any language required.

###### **Accounting**

Accounting tab allows the user to configure the account to be used while posting tax rate transactions to the general ledger.

-   *"Tax Due"* account is the account used while posting sales tax amounts
-   *"Tax Credit"* account is the account used while posting purchase tax amounts.
-   *"Tax Due Transitory"* account is the transitory account used while posting sales tax amounts under the Cash VAT regime.
-   *"Tax Credit Transitory"* account is the transitory account used while posting purchase tax amounts under the Cash VAT regime.

![](https://docs.etendo.software/latest/assets/drive/15wOKJ7_50pNLBMCTWm7Rd_vJyGOZqcB0.png)

A purchase invoice posting looks like:

|     |     |     |     |
| --- | --- | --- | --- |
| Account | Debit | Credit | Comments |
| Product Expense | Line Net Amount |     | One per invoice line |
| Tax Credit | Tax Amount |     | One per tax line. For Cash VAT regime the *Tax Credit Transitory* account is used instead. |
| Vendor Liability |     | Total Gross Amount | One per invoice |

And a sales invoice posting looks like:

|     |     |     |     |
| --- | --- | --- | --- |
| Account | Debit | Credit | Comments |
| Customer Receivable | Total Gross Amount |     | One per invoice |
| Product Revenue |     | Line Net Amount | One per Invoice Line |
| Tax Due |     | Tax Amount | One per Tax Line. For Cash VAT regime the *Tax Due Transitory* account is used instead. |

"Negative" Withholding tax rates need to have specific accounting information in this tab in order to get that withholding tax amounts are posted in a different account.

Below posting applies in the case that the "Allow Negative" feature is not enabled either for the General Ledger configuration used while posting or for the Document Type which in this case is an "AP Invoice"

In other words, a negative withholding posting means a negative debit posting which will turn into a positive credit posting if a negative feature is not enabled.

|     |     |     |     |
| --- | --- | --- | --- |
| Account | Debit | Credit | Comments |
| Product Expense | Line Net Amount |     | One per Invoice Line |
| Tax Credit | Tax Amount |     | One per tax line. For Cash VAT regime the *Tax Credit Transitory* account is used instead. |
| Tax Credit |     | Withholding Amount | One per withholding line |
| Vendor Liability |     | Total Gross Amount | (Line Net Amount+Tax Amount-Withholding Amount) |

#### Cost Center

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Cost Center`

##### Overview

Cost Center is an accounting dimension which can be used while posting documents to the ledger.

![](https://docs.etendo.software/latest/assets/drive/1vk6c1L49EaXAtzd0A121Tq55wJZfq1Fu.png)

###### Cost Center

The Cost Center window allows the user to create organization's cost centers. It is used as a master of the cost centers of an organization.

A cost center can be created by just entering the name and the description of the organization's cost center. If a cost center is created for the (\*) organization that cost center will then be available to all the organizations of the client. A cost center can be created as summary which helps to get a tree structure of cost centers.

#### ABC Activity

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `ABC Activity`

##### Overview

Activity based costing (ABC) is a special costing model that identifies activities in an organization for which managing cost is required.

"*Activity*" is one of the dimensions which can be set up for a given general ledger configuration.

###### Activity

ABC Activity window allows the user to create as many activities as required per each organization.

![](https://docs.etendo.software/latest/assets/drive/1ekUpsYTliIZF7K_3I_HrqIgD5DGf7vrw.png)

As shown in the screen above, it is possible to define summary activities which support a hierarchical structure or activities within an organization.

#### Accounting Templates 

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Accounting Templates`

##### Overview 
 
Accounting templates in Etendo overwrite default accounting behavior. Each template is related to a specific table.

The accounting entries generated by Etendo usually need to be generated in a different way to fulfill the legal requirements for a concrete country. To support this kind of requirements, Etendo allows overriding the code that generates the accounting entries through what is called Accounting Templates. Each time a document is posted, the accounting engine checks whether any Accounting Template is defined for the associated table or for the concrete document and executes it instead of the default Core's code.
 
!!! warning
    This is a powerful feature that must be used with caution. The code that generates the accounting entries must be deeply tested before deploying it in a real instance.

##### Creating the Accounting Template Configuration

The Java class that implements the generation of the new accounting entries is defined into the Accounting Templates window. The definition is quite simple and only requires a name, the Java class name, which must be inside the java package of the module, and the table for which the user wants to override its accounting entries (for example, C_Invoice for Invoices, M_InOut for goods shipments/receipts, etc.).

![](https://docs.etendo.software/latest/assets/drive/1QFEgaMk9QRkcpsjLLGOZJNKRJo75LvKr.png)

This Accounting Template will be later on associated with the Active Tables or a Document. So in this step it is important to define as many Java classes as Active Tables or Document to override their accounting behavior.
For example, we can define an unique java class for overriding the accounting behavior of all the invoices (sales invoices, purchase invoices, purchase/sales credit memo, etc.), or alternatively define a class for overriding only the accounting entries for Purchase Invoices (AP Invoice) and keep the default behavior to the rest of the invoices.

###### Dataset Definition

Dataset definition is a key step in this process. A wrong dataset definition can waste all previous work, so it is important to follow all these considerations:

- The dataset must belong to the accounting template module
- Try avoiding strange characters in the dataset's name. This string is used for generating the XML file name that stores the dataset.
- The Data Access Level must be set to System/Client, which means we allow users to apply the configuration only at Client level (Organization *).
- The Export allowed flag must be set.
- Inside the Table tab, include the AD_CreateFact_template table, which is the one that stores the Accounting Template configuration.
- The HQL/SQL Where clause is an important field, because it allows filtering the records the user wants to include into the dataset. In the example all the records that are inside the module java package name have been filtered. 

![](https://docs.etendo.software/latest/assets/drive/1stuKmJOwNnsth6RG3HX9tj5_6v3OY83U.png)

The dataset definition is ready, so the user just needs to export it to a file pressing the Export Reference Data button. This process queries the previous tables and gets all the records that fulfill the HQL/SQL Where clause, generating a XML file inside the module's referencedata/standard directory. As a fast check, this file can be opened using any plain text editor and the user can verify that it contains several lines.
In case the file is empty, the user should double check the dataset definition, specially the HQL/SQL Where clause used for each table.

####### Testing the Dataset

The real test to ensure the taxes dataset is OK can be done inside the development instance. The test consists on creating a new client running the Initial Client Setup and selecting the new dummy accounting template dataset.

![](https://docs.etendo.software/latest/assets/drive/14yYG4b3onJefyFiz6sV8KlImkfi5ijCf.png)

!!! info
    If the data inside the dataset are consistent, the Initial Client Setup Process should be completed successfully, otherwise it will fail giving a description about the error.

 
After a successful Initial Client Setup, login into the new client, go to the Accounting Templates window and check the record is there.

##### Functional Specification

###### Overview

Nowadays, Etendo  builds entries associated with documents following a hard-coded behavior. In order to modify the generated entry, code must be modified. The current code has become a module called core. If a module wants to modify accounting entries generated by documents, core must be modified, and this is not desired at all.
With this new development in core, modules will be able to easily modify the entries generated by each document.

###### Scope
The aim of this project is to allow modules to modify the way entries are generated when posting documents.

###### Design Considerations
A new layer will be included between the document, and the logic that posts that document. In a new window each document is mapped to the servlet that implements the logic to post it. This way, just modifying the values on this window, accounting behavior is changed. If a new module wants to change the entry generated when posting an invoice, a new servlet is developed following the desired behavior. At the same time, the mapping of the invoices to the servlet that posts will be changed to the servlet developed in the module. This way, the whole application behavior is changed.

###### Functional Requirements

!!! info
    Application is not affected by these developments, because all changes to the way the documents are posted are transparent to the user. Only a new window is necessary, that is configured automatically for the user when updating.


#### Balance Sheet and P/L Structure Setup

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Balance Sheet and P/L Structure Setup`

##### Overview

Balance Sheet and P&L structure setup allows the user to configure the two main financial reports which are the Balance Sheet and the P&L.

Once configured, these two reports can be launched from the Balance Sheet and P&L window.

It is important to remark that the *source of both reports structure* is the organization Account Tree which therefore needs to be structured in a way to obtain a meaningful Balance Sheet and P&L reports.

Moreover, and as already described, an Account Tree or chart of accounts can be imported or can be manually created:

-   in the case of imported account trees as a CSV file or as a reference data set:
    -   Etendo provides the localized account tree structure required to get localized balance sheet and P&L reports for a given country, for instance, the Spanish Chart of Accounts
-   in the case of manually created account trees:
    -   it is key to take into account that financial reports structure relies on the account tree structure.

###### Setup

Each new record in the Balance Sheet and P&L structure setup window is a report.

It is really important the level up to which either a Balance Sheet or P&L report is defined. That level relies on the organization type selected because:

-   If the organization selected is a *Legal with Accounting* which has other organizations underneath, the financial information provided by the reports will be a **roll-up** of the financial information of the organizations which belong to it. Roll-up means it produces an **aggregated** Balance Sheet. To get a **consolidated** Balance Sheet, transactions between organizations (intercompany transactions) need to be removed from the resulting report.
-   The same applies in the case of organizations which are *Organization* type which have other organizations underneath sharing the same general ledger configuration and, therefore, account tree.
-   If the organization selected is a *Generic* organization which belongs to a *Legal with Accounting* one, the financial information provided by the reports will be just the financial information of that organization.

![](https://docs.etendo.software/latest/assets/drive/1xwB1sbOrMC6OtQejlrNDjg5Zss_vMddz.png)

The fields to fill in this window are:

-   the **Report Name**
-   the **General Ledger** from which accounting information is required
-   the **Report Type**. The options available are:
    -   **Point in Time**, this type is used for reports such the Balance Sheet as account's balance needs to be referred to a specific date.
    -   and **Periodic**, this type is used for reports such the P&L as used account's balance needs to be referred to a specific period of time, for instance a month, a quarter, a year, etc.
-   finally the **Balanced** flag which must be activated whenever the report need to be launched just for "Legal with Accounting" organization types as that is the enterprise level where accounting balance is ensured.  
    This flag needs to be checked as active for the Balance Sheet report.

###### Grouping Category

Grouping category tab allows the user to define categories which groups report node/s. Each grouping category implies a page break in the report showing the defined report node/s.

![](https://docs.etendo.software/latest/assets/drive/1SWF7a1R4E3wI7Qx_nxPBzfoHqn9aneBF.png)

###### Node

A node defines the information shown in the report.

![](https://docs.etendo.software/latest/assets/drive/1jA6R5_RRLe7qWdGcNE_pWbiRmzfT61FF.png)

A report node is defined by:

-   the **Name** of the node
-   and the Account Element which is going to be shown in the report.
    -   The account elements selected here are usually "*Heading*" element level types,  
        therefore the calculated balance of the node will take into account and will show the balance of all the account elements of other types which are underneath it.

###### Balance Sheet Structure Setup Example

One example of a Balance Sheet structure can be:

-   *Report Name: Balance Sheet*  
    *Report Type: Point in Time*  
    *Balanced: Yes*
    -   Grouping Category: Balance Sheet
        -   Node: Assets linked to the Account Element of the Account Tree which collects all the "Asset" accounts.
        -   Node: Liabilities and Owner's Equity linked to the Account Tree element which collects all the "Liabilities and Owner's Equity" account tree elements.

Above nodes must be an Account Tree element properly configured.

###### P&L Setup Example

An example for a Profit and Loss report would be:

-   *Report Name: Profit and Loss*  
    *Report Type: Periodic*  
    *Balanced: No*
    -   Grouping Category: Profit and Loss
        -   Node: Profit and Loss linked to the "Heading" Account Tree element which collects all the "Expenses" and "Revenue" account tree elements.

Above node must be an Account Tree element properly configured.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Assets
## Article Path: /User Guide/Etendo Classic/Basic Features/Financial Management/Assets
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/assets/overview
## Article Content: 
#### Overview

This section describes the windows related to assets, part of the Financial Management in Etendo. These are:

[:material-file-document-outline: Assets](#assets){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Asset Group](#asset-group){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Amortization](#amortization){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Asset Amortization Report (Excel)](#amortization-report){ .md-button .md-button--primary } <br>


#### Assets

:material-menu: `Application` > `Financial Management` > `Assets` > `Assets`

##### Overview

The user can define amortization characteristics for assets owned by the company.

###### Assets

The user can define assets owned by the company and create an amortization for them.

![](https://docs.etendo.software/latest/assets/drive/1SggpQOnJ2aCqlJS7Ds8KulWXK1pCaoKR.png)

Fields to note:

-   **Organization** : Organizational entity within client.
-   **Search Key** : A fast method for finding a particular record.
-   **Name** : A non-unique identifier for a record/document often used as a search tool.
-   **Asset Category** : A classification of assets based on similar characteristics.
-   **Document No.** : An automatically generated identifier for all documents.
-   **Description** : A space to write additional related information.
-   **Currency** : An accepted medium of monetary exchange that may vary across countries.
-   **Product** : An item produced by a process.
-   **Summary Level** : A means of grouping fields in order to view or hide additional information.
-   **Static** : Prevents from moving the record into the tree
-   **Depreciate** : The asset is used internally and will be depreciated
-   **Depreciation Type** : Depreciation Type
-   **Calculate Type** : Calculate type
-   **Annual Depreciation %** : Depreciation annual %
-   **Amortize** : Asset schedule
-   **Usable Life - Years** : Years of the usable life of the asset
-   **Usable Life - Months** : Months of the usable life of the asset
-   **Every Month Is 30 Day** : When calculating the amortization plan every month will be considered as a 30 day month and years of 365 days (no leap-years).
-   **Purchase Date** : Purchase date
-   **Cancellation Date** : Cancellation date
-   **Depreciation Start Date** : Depreciation Start Date. The amortization plan will be calculated starting from this date.
-   **Depreciation End Date** : Depreciation end date
-   **Asset Value** : Asset value
-   **Residual Asset Value** : Residual asset value amount
-   **Depreciation Amt.** : Depreciation Amount
-   **Previously Depreciated Amt.** : This amount is subtracted to the Depreciation amount when calculating the amortization plan. Total amount to be depreciated = Depreciation Amount - Previously Depreciated Amount
-   **Depreciated Value** : Depreciated value
-   **Project** : Identifier of a project defined within the Project & Service Management module.
-   **Create Amortization** : it will create (or recalculate) the amortization plan based on the asset definition.

##### **Asset Amortization**

The user can add asset amortizations for a selected asset.

![](https://docs.etendo.software/latest/assets/drive/167vATAwJuJhpPE2by-QgZN1_jyrDsyWZ.png)

-   **Line No.** : A line stating the position of this request in the document.
-   **Amortization** : The depreciation or reduction of a product value over time.
-   **Amortization Percentage** : Amortization Percentage
-   **Amortization Amount** : Amortization Amount
-   **Currency** : An accepted medium of monetary exchange that may vary across countries.

The *Create Amortization* process populates the Asset Amortization tab.

The Asset Amortization tab shows the depreciation plan of the asset based on its usable life-time and its value that is the amount to be depreciated. The asset value is split within its usable life (months or years), therefore each depreciation plan line represents a percentage of the total depreciation amount of the asset.

!!! note
    It is important to remark that the proposed depreciation plan lines can be manually removed whenever they are not processed and posted. In that case, the create amortization process can be executed once again, therefore the depreciation plan is recalculated. This is very useful in those cases where the value of an asset changes or the usable life-time of an asset changes once its depreciation has started.

There is a restriction though, when removing lines, if the user plans to click the Recalculate Amortization button afterwards. The lines must be removed always starting from the latest one and without leaving undeleted lines in between. For example, having amortization lines such as:

-   Line 10 - January depreciation plan line
-   Line 20 - February depreciation plan line
-   Line 30 - March depreciation plan line

The depreciation line of February cannot be removed until the depreciation line of March is removed.

The process assumes that if the March depreciation line exists, then the February depreciation line exists.

###### **Accounting**

The user can create and edit G/L accounts to be used in transactions which include a selected asset.

![](https://docs.etendo.software/latest/assets/drive/1huSwZWBa8W1gwPd3rvluydFF5jNOMU2k.png)

#### Asset Group

:material-menu: `Application` > `Financial Management` > `Assets` > `Asset Group`

##### Overview

Assets can be grouped into different categories with the aim of helping their depreciation management and analysis.

###### Asset Category

Asset category window allows the user to create and configure every asset category your organization may need.

![](https://docs.etendo.software/latest/assets/drive/17CmG5FAA86HDWLrAmjuHIgpNsdwAn_ya.png)

As shown in the image above, the creation of an asset category requires the user to enter below listed information for each category:

-   **Name** or short name which helps to easily find a category
-   **Description**
-   **Depreciate** indicates if the assets of this group will be depreciated.
-   **Depreciation Type** method used to depreciate the asset.
-   **Calculate Type** indicates how the depreciation will be calculated (Time or Percentage)
-   **Annual Depreciation** Annual percentage used to depreciate this asset.
-   **Amortize** it refers to the periods chosen between depreciation entries (monthly, yearly).
-   **Usable Life - Months** Years of the usable life of the asset
-   **Usable Life - Years** Months of the usable life of the asset

Depreciation configuration will be inherited from the asset category when creating a new asset.

###### Accounting

Each asset category allows the user to configure a different set of accounts to use to post asset depreciation.

![](https://docs.etendo.software/latest/assets/drive/1jZl_RGgZw2i1Ogq4d1D-fhNcd59AI6ev.png)

#### Amortization

:material-menu: `Application` > `Financial Management` > `Assets` > `Amortization`

##### **Overview**

The user can create and edit amortization for a selected year.

##### **Header**

In the header, the user creates amortizations for particular periods.

![](https://docs.etendo.software/latest/assets/drive/1w9ObbOLgqEa3WC4p5N5wW4C1HSl1gBPk.png)

##### **Lines**

In each line, the user adds amortized assets and details of amortization.

![](https://docs.etendo.software/latest/assets/drive/1meY53s5Ivsbk_i6wd1TY7ZNPv9JIF258.png)

###### **Accounting**

Accounting information related to the amortization

![](https://docs.etendo.software/latest/assets/drive/15yAiipNMuH7eorzPtiPFAQOpqpm78P-o.png)

##### How to Reactivate Amortizations

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

Etendo allows multiple amortizations to be processed and unprocessed. This process is available for amortizations which share the same status. The status of the amortization can be seen in the status bar.  

![](https://docs.etendo.software/latest/assets/drive/1je7Yl7FTqlDAhFlb8wTQKBDUF3pSn0Qu.png)

##### Bulk Posting

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button.

Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.
> 
!!! info
    For more information, visit [the Bulk Posting module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).


#### Asset Amortization Report (Excel)

:material-menu: `Application` > `Financial Management` > `Assets` > `Asset Amortization Report (Excel)`

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md).

The new Amortization report allows downloading excel reports. The report can be found in Financial Management > Assets > Analysis Tools > Asset Amortization Report. 

![](https://docs.etendo.software/latest/assets/drive/FCyjH9Cqjoxlpce_Q2Adrf0qcnEwMumykLuNZ5DvkPgw5L1GNfFz4EDeMvEQzQ4ud9ZTFjcAk-1Y0l45vCDs1ONk0KMn-TzkhKKAEL17m3fV85B2lbrmxRnIhAM4-R1zOqVfr8sU_3AoWConwvRkI4I.png)

This report allows filtering by organization, date, asset or any particular description, category and general ledger configuration.  

![](https://docs.etendo.software/latest/assets/drive/v044uU7hYLEk9gHyJ_rQT4PafeiO44KV81IWajtztUpPd9hLqZiPs9ivfPP69HxfwwK-35rPk_nzpLHsSXeXpUUfVDnFw7k4jsQ4AvDJIwDMCPWrsiRDyLPKgLCb0WDOB4GPZVU2urwKJ3sq1BhSXnA.png)

Once the information is filtered, an excel sheet is downloaded as shown in the following image:

![](https://docs.etendo.software/latest/assets/drive/X4RYGKFzkl-VVrKXiztozXKKOQIFqIwXJMgUUeLzdGESddbVChKWbf6L2XnMO1aQg2wCfXit-Tw-w3TXDP_FLWBluY08K6JG6kHf_w2Mz5fRWBfzbbfV6edBbPzULPPPWxAALvtVBmxhKLtC_DwAzgg.png)

This report takes into account the amortization lines of each Asset. That is to say, the report will still be generated even if the amortization lines are not processed or posted. 

It is necessary to filter by date since the information comes out over this filtering. That is, the accumulated period, net value and subsequent report fields will depend on this filtering.

For example: Period date filtered 01-01-2022 and 31-12-2022

**Period:** The total of the amortization lines between 01/01/2022 and 12/31/2022 will be shown. <br>
**Accumulated:** The sum of the amortization lines between 01/01/2022 and 12/31/2022 and the total amortization lines prior to 01/01/2022 will be shown. <br>
**Net Value:** The Asset value minus the Accumulated field will be shown.  <br>
**After:** The amortization lines after 31-12-2022 will be shown.  <br>

!!! info
    When the end date within the Assets window is filled in, that Asset will not appear in the report if the filtered date is after the end date of the Asset.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Essentials Extensions Bundle/Overview
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/essentials-extensions/overview
## Article Content: 
#### Overview 
This bundle includes fundamental modules that affect most areas in Etendo.

#### Translations

#### Modules

##### Advanced Business Partner

:octicons-package-16: Javapackage: `com.etendoerp.advanced.businesspartner`

:octicons-package-16: Javapackage: `com.etendoerp.advanced.businesspartner.template`

<iframe width="560" height="315" src="https://www.youtube.com/embed/sRvQCM8xZE0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

The “Advanced Business Partner” module allows the user to have a general view of business partners information and to assign sequence numbers to business partners.

!!! info
    For more information, visit [Advanced Business Partner - User guide](https://docs.etendo.software/latest/essentials-extensions/advanced-business-partner.md).

##### Bulk Completion

:octicons-package-16: Javapackage: `com.etendoerp.bulk.completion` 

The Bulk Completion functionality allows the user to complete, reactivate or close multiple records by selecting them and clicking the **Bulk completion** button. This makes records management easier and more efficient, reducing the time spent processing individual records.

!!! info
    For more information, visit [Bulk Completion - User guide](https://docs.etendo.software/latest/essentials-extensions/bulk-completion.md)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Advanced Business Partner
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Essentials Extensions Bundle/Advanced Business Partner
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/essentials-extensions/advanced-business-partner
## Article Content: 
### Advanced Business Partner
:octicons-package-16: Javapackage: `com.etendoerp.advanced.businesspartner` 

#### Overview
This section describes the Advanced Business Partner module included in the Etendo Essentials Extensions bundle.

<iframe width="560" height="315" src="https://www.youtube.com/embed/sRvQCM8xZE0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

!!! info
    To be able to include this functionality, the Essentials Bundle must be installed. To do that, follow the instructions from the [Marketplace](https://marketplace.etendo.cloud/#/product-details?module=39AC2D9F72124AC7A1D0A3D005293C9E){target="\_blank"}.

The **Advanced Business Partner** module allows the user to have a general view of business partners information and to assign sequence numbers to business partners.

##### Business Partner General View

:material-menu: `Application` > `Master Data Management` > `Business Partner General View`

In this window, it is possible to see all the business partner information of each record, grouped in the customer, vendor/creditor and employee sections of the header. In the original window “Business Partner”, this information is found in different tabs.

![image_3.png](https://docs.etendo.software/latest/assets/legacy/image_3.png)

This change implies, in grid view, the user is able to create, modify and filter business partner information according to their needs.

![image_4.png](https://docs.etendo.software/latest/assets/legacy/image_4.png)

##### Document Sequence

:material-menu: `Application` > `Financial Management` > `Accounting` > `Setup` > `Document Sequence`

In this window, it is also possible to create a sequence number for each business partner based on its category. This sequence number can be found in the Document No. field.

![image_5.png](https://docs.etendo.software/latest/assets/legacy/image_5.png)

For this, you have to set some preferences and configure the sequence number first, as explained below.

##### Preferences

:material-menu: `Application` > `General Setup` > `Application` > `Preference`

To be able to configure a business partner sequence number, two preferences are set by default. These can be found in the “Preference” window.

###### Auto Business Partner Document No

![image_6.png](https://docs.etendo.software/latest/assets/legacy/image_6.png)

This property allows the automatic generation of sequence numbers for business partners. The default value is Y and, in case it is necessary to disable this automatic generation, a new preference must be created, but with the value N and the option “Selected” checked. In this case, the Document No field will be left blank.

###### Allow Jumps in Business Partner Document No

![image_1.png](https://docs.etendo.software/latest/assets/legacy/image_1.png)

This property allows jumping among the different document numbers. The default value is N, so, it is not allowed to remove business partners or change business partner categories. However, it is possible to create a new preference with value Y to enable this option. When the business partner category is changed, the document number is also changed according to the corresponding document sequence.

##### How to Configure Sequences Number

To configure the Sequence Number, go to the “Document Sequence” window, create a new record for each organization and category, set the corresponding table, column and business partner category, and save the record. The table and column fields must be filled with the options seen below.

![image_2.png](https://docs.etendo.software/latest/assets/legacy/image_2.png)

!!! info
    For more information, visit [Sequences](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-use-advanced-sequences.md).
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Bulk Completion
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Essentials Extensions Bundle/Bulk Completion
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/essentials-extensions/bulk-completion
## Article Content: 
### Bulk Completion

:octicons-package-16: Javapackage: `com.etendoerp.bulk.completion` 

#### Overview

This section describes the Bulk Completion module included in the Etendo Essentials Extensions bundle.

!!! info
    To be able to include this functionality, the Essentials Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Essentials Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=39AC2D9F72124AC7A1D0A3D005293C9E){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Essentials Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/essentials-extensions/release-notes.md).

!!! warning
    Before using this functionality, remember that processing multiple records at the same time can affect system performance, especially when handling a large volume of data.

The Bulk Completion functionality allows the user to complete, reactivate or close multiple records by selecting them and clicking the **Bulk completion** button. This makes records management easier and more efficient, reducing the time spent processing individual records.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/essentials-extensions/salesinvoice1.png)

As seen here, you can select multiple records at the same time, drafts in this case, and click the Bulk completion button to complete them all at once.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/essentials-extensions/salesinvoice2.png)


This functionality is available in the following windows:

- [Sales Quotation](https://docs.etendo.software/latest/basic-features/sales-management/transactions.md#bulk-completion)
- [Sales Order](https://docs.etendo.software/latest/basic-features/sales-management/transactions.md#bulk-completion_1)
- [Goods Shipment](https://docs.etendo.software/latest/basic-features/sales-management/transactions.md#bulk-completion_2)
- [Return From Customer](https://docs.etendo.software/latest/basic-features/sales-management/transactions.md#bulk-completion_3)
- [Sales Invoice](https://docs.etendo.software/latest/basic-features/sales-management/transactions.md#bulk-completion_4)
- [Purchase Order](https://docs.etendo.software/latest/basic-features/procurement-management/transactions.md#bulk-completion)
- [Goods Receipt](https://docs.etendo.software/latest/basic-features/procurement-management/transactions.md#bulk-completion_1)
- [Purchase Invoice](https://docs.etendo.software/latest/basic-features/procurement-management/transactions.md#bulk-completion_2)
- [Return To Vendor](https://docs.etendo.software/latest/basic-features/procurement-management/transactions.md#bulk-completion_3)


This functionality improves efficiency by allowing users to perform document actions in bulk, streamlining operations and saving time.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Platform Extensions Bundle/Overview
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/platform-extensions/overview
## Article Content: 
#### Overview
This bundle includes enhancements for Platform functionalities in Etendo.

#### Translations
-  :material-translate: Spanish: [Platform Extensions Bundle ES](https://marketplace.etendo.cloud/#/product-details?module=3789DBA46FC54FDF96CD7D298203A3E9){target="_blank"}

#### Modules

##### Dependency Manager

:octicons-package-16: Javapackage: `com.etendoerp.dependencymanager`

The user can have access to all the available dependencies to add, configure them and check information about versions, validations, etc.

!!! info
    For more information, visit the [Dependency Manager developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/dependency-manager.md).

##### Docker Management 

:octicons-package-16: Javapackage: `com.etendoerp.docker`

This module enables the use of Dockerized containers in Etendo Classic.

!!!info
    For more information visit, [Docker Management developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/docker-management.md). 

##### Dockerized Tomcat Service

:octicons-package-16: Javapackage: `com.etendoerp.tomcat`

This module enables the Dockerization of Tomcat within Etendo Classic.

!!!info
    For more information visit, [Dockerized Tomcat Service developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/dockerized-tomcat-service.md).

##### Dynamic App 

:octicons-package-16: Javapackage: `com.etendoerp.dynamic.app`

Dynamic App allows you to create sub applications in Etendo Mobile.

!!! info
    For more information, visit the [Dynamic App developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/dynamic-app.md)

##### EAN 128

:octicons-package-16: Javapackage: `com.smf.ean128`

EAN 128 allows to use bar code in your application

!!! info
    For more information, visit the [EAN 128 developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/overview.md#ean-128).

##### Etendo Advanced Security

:octicons-package-16: Javapackage: `com.etendoerp.advanced.security`

:octicons-package-16: Javapackage: `com.etendoerp.advanced.security.template`

Etendo Advanced Security allows extending and enhancing some of the security features of the system.

!!! info
    For more information, visit the [Etendo Advanced Security user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/platform-extensions/etendo-advanced-security.md) and read the [Etendo Advanced Security developer guide](https://docs.etendo.software/latest//developer-guide/etendo-classic/bundles/platform/overview.md#etendo-advanced-security).

##### Etendo Async Processes

:octicons-package-16: Javapackage: `com.etendoerp.asyncprocess`

##### Etendo Reactor

:octicons-package-16: Javapackage: `com.etendoerp.reactor`

##### Etendo RX

:octicons-package-16: Javapackage: `com.etendoerp.etendorx`

This module guarantees an authentication method which allows users to securely authenticate and authorize access to their information using their preferred provider.

!!!info
    For more information, visit [Etendo RX user guide](https://docs.etendo.software/latest/platform-extensions/etendo-rx.md).

##### Javax XML SOAP API

:octicons-package-16: Javapackage: `org.openbravo.util.javax.xml.soap`

This module provides SOAP with Attachments API for Java (SAAJ), which was part of JDK until 10. Starting from JDK 11, it was removed, which makes this module required as a dependency for those modules making use of it in order to be able to compile in JDK11+.

!!! info
    For more information, visit the [Javax XML SOAP API developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/overview.md#javax-xml-soap-api).


##### Number To Word (English)

:octicons-package-16: Javapackage: `org.openbravo.numbertoword_en`

:octicons-package-16: Javapackage: `org.openbravo.numbertoword`

It provides the infrastructure to convert a number into its equivalent in words. This functionality is especially useful while printing checks.

!!! info
    For more information, visit [Number To Word Converter user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/application.md#number-to-word-converter) and the [Number To Word Converter developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/overview.md#number-to-word-english).

##### Print Document Web Service

:octicons-package-16: Javapackage: `com.etendoerp.printdocumentws`

:octicons-package-16: Javapackage: `com.smf.ws.printdocument`

It allows downloading a PDF from some transaction documents using a web service and returning a PDF with the order, invoice or delivery note. This is useful for companies that use third party applications and require to make printables accessible from those applications.

!!! info
    For more information, visit the [Print Document Web Service developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/overview.md#print-document-web-service). 

##### Report Cache Management

:octicons-package-16: Javapackage: `com.exos.erp.reportcachemanagement`

This module allows changing or updating a Jasper Report in an Etendo environment without stopping the server.

!!! info
    For more information, visit [Clear Report Cache user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/clear-report-cache.md) and the [Clear Report Cache developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/overview.md#report-cache-management).  


##### Webhook Events

:octicons-package-16: Javapackage: `com.etendoerp.webhookevents`

Webhook events allow you to execute actions via a URL call, providing a powerful way to integrate with external services.

!!! info
    For more information, visit the [Webhook Events developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/etendo-webhooks.md).  
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo Advanced Security
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Platform Extensions Bundle/Etendo Advanced Security
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/platform-extensions/etendo-advanced-security
## Article Content: 
### Etendo Advanced Security
:octicons-package-16: Javapackage: `com.etendoerp.advanced.security` 

#### Overview
This section describes the Etendo Advanced Security module included in the Platform Extensions bundle.

!!! info
    To be able to include this functionality, the Platform Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [_Platform Extensions Bundle_](https://marketplace.etendo.cloud/#/product-details?module=5AE4A287F2584210876230321FBEE614){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Platform Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/platform-extensions/release-notes.md).

The **Etendo Advanced Security** module allows the user to customize several security features such as the following:

- Password Security
- Password History
- User Lockout
- Multiple Session Verification
- Changing Password after Login
- Expiration Time (Autolock Password)

!!! info
    For more information about the module configuration visit the [Developer Guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/overview.md#etendo-advanced-security).

#### Password Security

This functionality is executed when the password is changed, either because the user needs to change it or because the system requires it. The process can be done from the **Change Password** field in the navigation bar and/or from the **User** window.

From the **Change Password** process, Etendo will ask for the current password and the new one to make the change. After clicking on **Apply,** a series of checks will be verified to finally execute the corresponding changes.

![](https://docs.etendo.software/latest/assets/drive/sQNqx26cwCGfPld7D47SHw_QnmdO5-zHlJ41yN28V3yKv95xq6PMGqHobkKuh8rQa11RNvI6bMpkWMk9k0H6P_n8DilZ0NfQ56yjBZYaP85WyQWXC7shoMt7zU6nxO-3-JMUXzwRJ2ASii0YDJpUN6s.png)

!!! info
    The password must be no less than 8 characters long and its structure must contain at least three of the following characters: letters, uppercase letters, lowercase letters, numbers and symbols.

If the new password does not comply with the above mentioned conditions, a popup appears with an error message indicating the conditions to be fulfilled.

![](https://docs.etendo.software/latest/assets/drive/shTQdtbDJq_FrCieCra0q6YLlv5akL6vFAS2Xr9sogzi6IMddd-qi9HJDwKKhxY0fCqpUfcFa-l0agc03ypnwtH_eFpDR6SLWNPVi4edc--fKnZsuzeFwnNC_ITWGd5q07zMCr1ImePmG5cOLmSH_rQ.png)

This process can also be executed from the **User** window by applying the same password requirements mentioned above.

![](https://docs.etendo.software/latest/assets/drive/JNG3VeVWDWewBfz_iijE7kUBTZBV-8DUBQAWaiEa1uyxhOxYZxmbC_bavwTW85z0LJ_S9ibzN1XVz8pGIZQZz675KBO8H8vaO1LJ8BXxO3Sl5AOqOvOV2hgDKjMObk6CWCpmB8ChETBvqkEICBJ0SI4.png)

**Etendo Advanced Security** verifies the changes, and if the new password does not fulfill the required conditions, Etendo shows an error message at the moment of registering the changes.

![](https://docs.etendo.software/latest/assets/drive/jUjckeZt5RPHdHYZcD0xN9BXUkKoNLOYPrkLIkG4pyqPJBYvFFtkWWKBzgy3pZ2Qr1M-kGZPzd2YXiNxOuOlNdVj26PDen8jOxw-44zBzZsX1G3eNTiIzIHidjO8eiDmrY-uU-XhkUxG2RiUbahRbbQ.png)

##### Password History

When changing the password, one of the conditions to be fulfilled is that the new password cannot be the same as a previously used one. Etendo creates records of the previously used passwords so, if the user enters a previously used one, the system informs with an **error message.**

This security feature can be configured only with **System Administrator permissions**. To do this, go to the **System Info** window, within the group field **Password Security**, and check the field called **Enable Password History**, according to your preference.

![](https://docs.etendo.software/latest/assets/drive/s0Xj63FWSlAuip3ZzJB0OWyHiF-cM8zs8EruyfZEM7qA3Pt1hvcNZkRDHWzSb9t3GkzqrqbRwIuP5hghTfyal4441tIbtMQrNyu1CPQmhLOwJkM1EcQ85tEz5TDRbOQazN15k5hzX-b6NyleAak3u1s.png)

When the configuration of the feature **Password Security** is active and the user **changes the password** to a previously used one, Etendo will show an **error message** explaining the failure in saving the password.

![](https://docs.etendo.software/latest/assets/drive/x4qql4v3biKPnkWDrD86UUS4mJkw0HuajIK5AmXZKT0OKjP5LdGjzhtd6L8BkkPsR-a9duOtg9uK6OHWjJbig-vSHrltxOd2TfjU5-_lwfH74sKnuekNk4A-heIRIniDxvEb5F45Ms0SxKbRQdy-ztg.png)

The following example shows the same error message when changing the password from the **Change Password** process.

![](https://docs.etendo.software/latest/assets/drive/1VTtHPNlLr0N3fvL1vVQ7FO2lzWcQti5I.png)

!!! info
    Etendo also allows entering the same password an indefinite number of times. In case the user wishes to maintain the same password, just keep the field **Enable Password History** from the System Info window **unchecked**. 

#### User Lockout

Another feature of this module is the **blocking** of the user after N number of **unsuccessful login attempts**. When entering a wrong password, Etendo shows an error message indicating the number of attempts left.

In this example, the system shows that there is one attempt left.

![](https://docs.etendo.software/latest/assets/drive/C-pmD7RKuMzM6e1fSFHSwLWAusC2cL1U9gKlvxWxe7VRa64uuLwaQ7dm4Cmi_Z773XQsfFzfSPrdfMGDNdnNgKPuWobU4xTlxFtOirr34LPiLMT9bI3LONLsmydtloKyd48GYi_1hRnovcHduVsDwGE.png)

Even if in the next attempt the user is not able to log in correctly, Etendo leaves another message indicating that the user has been blocked.

![](https://docs.etendo.software/latest/assets/drive/e_vXv3RF7iceBBddpDNUMwewnLYcr5W7LzjhyzrUMPnGe6oT9v9TeXiGc-8MLQpF_Xv1POEZdvMmIRL5bwfai6-hfaEirW4IKlsrBVzcLndzbtRTYeO0_fwou-fTO00rxDtw2lJJi7LY5LoW7vWPEb8.png)

!!! info
    By default, Etendo configures five attempts to enter the right password. 

To configure the number of unsuccessful login attempts, it is necessary to create a preference from the **Preference** window. In the **Value** field, add the desired number of login attempts, and also select the preference **Maximum number of password attempts** from the **Property** field.

![](https://docs.etendo.software/latest/assets/drive/5nXDi_OVP9kEESFxQsu1DJywuIEhpJfGl7UvWYPV4UO1CkEhcs2aXMQQIt51lJrww8TfMAUWMfjky2zRtpqhzzdsYygdDt8VhJAe0HNHAWpFbbTbX7c0khUaD9Dn9so89idLPpfmVAqR9bVfS4h4IAU.png)

!!! warning
    It is important to note that once the new password has been entered, if the user enters again a wrong password, the system will automatically block the login at the first try. 

#### Multiple Session Verification  

Another functional innovation that facilitates this module is the ability to allow or block to have multiple sessions opened from another browser.

From the **User** window, within the **More Information** field, it is possible to configure the check that allows having several sessions active at the same time. The check is called **Allow multiple sessions**.

![](https://docs.etendo.software/latest/assets/drive/vcMT58GIgiB2QsZcR-bt5xyajWgf9isk7sxrFJuwkUW27BKnmLIjcb2YZIEJUB-YE-scGv_n3rZ1jTwKGKwLumx4KAIjSp0SsN1jK4saZNChsH8q2JRn5RS3Q6TkXVdVLa1r7C5wXTPmrfVkJyChjRA.png)

In case the user just wants one session allowed to be activated, uncheck the **Allow multiple sessions** checkbox from the **User** window and, **only with System Administrator permissions**, check the **Enable single session verification** field in the **Session Security** field from the **System Info** window.

![](https://docs.etendo.software/latest/assets/drive/Prfolo_qyMafrXpr9dUe_ASCkalv-LjArCWEcMCPSWWi2IzyypsQytDTUlSeMgq_mSbgCYKtebK9aawUzMNotE2V25Lg-RrJ2f21l6m75dS4Z11d76gidgZfFrxy1BQgjVl7EvJg2xQISvt1efahvCc.png)

This way, when trying to log in, the system verifies that an active session already exists informing the user.

![](https://docs.etendo.software/latest/assets/drive/IkC8pMQVLKRCkr3SI1oYDJsaSirmOHxS31Z5ZmwhCzOnMnwXW88ZFHcyTCnp0Vpm9BxY_RJbpWIdrQG0g5DhURD1RSzW2nexd9hGTeCxTNWhaAWaopvCG-r7JieCNHkLjpCb7HW3v3JXDjofFCHEyAU.png)

!!! info
    By default, Etendo with this module installed, only allows to have one session active. 

#### Changing Password after Login

After logging in for the **first time** with a user, Etendo asks to **change the password**. When trying to log in, the system mentions that the password has expired and that the user needs to change it to a new one to be able to log in.

![](https://docs.etendo.software/latest/assets/drive/aJIN1JP1Oau9HSzi_O2NF-rcQBAdE58v59GVg5NoLiQvgTobqai4mOU07aw0D786KJfL0EBJ_rcaQ86-vf8FmZo3gKZnhLaE_yE3Ynzk46CQkhg0abwcMPLKPw2OjUlvFa75h5zkhSW4i97OviTl8mo.png)

Once the change has been made, the user is redirected to the main interface of the application.

#### Expiration Time (Autolock Password)

As part of the security management, Etendo also allows the management of the days for the **password expiration time**.

From the **Preferences** window, it is possible to adjust the period of time required for the user to be obliged to change the password. Do it by adding the desired amount of days for the password expiration in the **Value** field.

![](https://docs.etendo.software/latest/assets/drive/4o5-tsn6u1mWXedVD-rp5GQNpc6RZ6cAroo-BrZc6xPUevOI0COBerM1NnEmySSSMLMBicOBI1Gidh-4D3QkOMPvJI72977qKSYFHtFJ0UtZnChiIcSYi0Nz3Uu_9H5k39FZ7ozJjeyUbxifnWGamz0.png)

!!! info
    Consider that by default, Etendo configures 30 days for the password expiration time. 

After the number of days established for the password expiration, when trying to log in, a message is displayed explaining the need to be redirected to the **login to change the password**, i.e. the user is marked as **password expired**.

Besides, Etendo notifies the user with a message announcing the amount of **remaining days** for the password expiration. In this example, the user has two days left.

![](https://docs.etendo.software/latest/assets/drive/0g12hmyWCTy2ecyVLmptMQSLE6ocCBLGSJLJlYa3EqwCNE-NyYSxy-aO9jg88OWefWDsRso8RDce3Zas0q5Q29fUdcrtSeZ-nA13uwNokmr2vnlKM4HabnGCzy5r3stbAmsCoEgMhzno5T6LLr4tyYM.png)

!!! info
    By default, the system activates this message when there are **seven days** left to change the password.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo RX
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Platform Extensions Bundle/Etendo RX
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/platform-extensions/etendo-rx
## Article Content: 
### Etendo RX
:octicons-package-16: Javapackage: `com.etendoerp.etendorx` 

#### Overview

This section describes the oAuth Authentication module included in the Platform Extensions bundle.

!!! info
    To be able to include this functionality, the Platform Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [_Platform Extensions Bundle_](https://marketplace.etendo.cloud/#/product-details?module=5AE4A287F2584210876230321FBEE614){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Platform Extensions - Release notes](https://docs.etendo.software/whats-new/release-notes/etendo-classic/bundles/platform-extensions/release-notes/).


oAuth Authentication process facilitates the **provider type configuration** which allows users to **securely authenticate and authorize access** to their information using their preferred provider.

oAuth facilitates an authentication method through a security protocol for obtaining a token needed to make **API calls** to access specific resorces on behalf of their owner. This authentication will allow Etendo to get the necessary information to access to third party applications. 

#### oAuth Provider

In the oAuth Provider window in :material-menu: `Application`> `Etendo-RX`> `oAuth-Provider`, set the preferred type provider by adding the user authentication URL in the **API oAuth URL field**. This URL can be found in the provider documentation API.  

The other fields will be completed with data referring to the corresponding provider.

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/platform-extensions/oauthprovider-1.png)






==ARTICLE_END==
==ARTICLE_START==
# Article Title: Warehouse Extensions Bundle
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Warehouse Extensions Bundle
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/warehouse-extensions/overview
## Article Content: 
#### Overview
This bundle includes enhancements for the Warehouse Management functionalities in Etendo.

#### Translations

-  :material-translate: Spanish: [Warehouse Extensions Bundle ES](https://marketplace.etendo.cloud/?#/product-details?module=BAE67A5B5BC4496D9B1CA002BBCDC80E){target="_blank"}

#### Modules

##### Automated Warehouse Reservation

:octicons-package-16: Javapackage: `com.etendoerp.automated.warehouse.reservation`

This module adds the option Automatic - Only Default Warehouse to the Stock Reservation field of the lines tab in the Sales Order window. This is used to limit the reservation only to the warehouse specified in the header of the order.

!!! info
    For more information, visit [Sales Order](https://docs.etendo.software/latest/basic-features/sales-management/transactions.md#stock-reservations) and [Stock Reservation](https://docs.etendo.software/latest/basic-features/warehouse-management/transactions.md#stock-reservation).

##### Stock History

:octicons-package-16: Javapackage: `com.etendoerp.stock.history`

This module provides updated information about the daily history stock of the products. 

!!! info
    For more information, visit [the Stock History user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/analysis-tools.md#stock-history) and [the Stock History developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/warehouse-extensions-bundle.md#stock-history).

##### Reactivate Warehouse Documents

:octicons-package-16: Javapackage: `com.etendoerp.reactivate.warehouse.documents`

:octicons-package-16: Javapackage: `com.etendoerp.reactivate.warehouse.documents.template`

<iframe width="560" height="315" src="https://www.youtube.com/embed/ghH3tBjoN9c" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

This functionality is part of the Warehouse Extensions Bundle and it is useful when the user needs to reactivate documents such as Goods Movements, Goods Receipts, Goods Shipments and Physical Inventories. 

!!! info
    For more information, visit the user guide for:

    - [Goods Movements](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/transactions.md#how-to-reactivate-goods-movements)
    - [Goods Receipts](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#how-to-reactivate-goods-receipts)
    - [Goods Shipments](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#how-to-reactivate-goods-shipments)
    - [Physical Inventory](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/transactions.md#how-to-reactivate-physical-inventories)

##### Product Operations

:octicons-package-16: Javapackage: `com.etendoerp.product.operations`

This module allows you to observe and analyze in detail all transactions associated with the selected product. 

!!! info
    For more information, visit [Product Operations user guide](https://docs.etendo.software/latest/basic-features/warehouse-management/analysis-tools.md/#product-operations).

#### Uninstall bundle

To uninstall the bundle and prevent future problems with orphan records, a sequence of steps must be followed:

1. Run the following query in the environment's database
```
DELETE FROM OBUIAPP_GC_TAB 
WHERE AD_TAB_ID = 'C3DB551F2BCA40A79AAF21DBD6D06309';
```

2. After the query successfully finishes, delete the bundle by the way corresponding to the installation method (Sources/JARs)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Production Extensions Bundle
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Production Extensions Bundle
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/production-extensions/overview
## Article Content: 
#### Overview
This bundle includes enhancements for the Production Management functionalities in Etendo.

#### Translations

-  :material-translate: Spanish: [Production Extensions Bundle ES](https://marketplace.etendo.cloud/?#/product-details?module=0FFED1B8A5AE471AA1A672F4D7E1B1C4){target="_blank"}

#### Modules

##### Advanced Work Effort

:octicons-package-16: Javapackage: `com.etendoerp.advanced.work.effort`

<iframe width="560" height="315" src="https://www.youtube.com/embed/uqq7-LAoK-Q" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe> 

This functionality is useful when the user needs to reactivate a work effort.

!!! info
    For more information, visit the [Advanced Work Effort user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/production-management/transactions.md#how-to-reactivate-work-efforts).
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Sales Extensions Bundle
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Sales Extensions Bundle
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/sales-extensions/overview
## Article Content: 
#### Overview 
This bundle includes enhancements for the Sales Management functionalities in Etendo Classic.


#### Translations

-  :material-translate: Spanish: [Sales Extensions Bundle ES](https://marketplace.etendo.cloud/?#/product-details?module=32AF7995603A4CCBB68FE24DDD8536D7){target="_blank"}


#### Modules


##### Sales Quotation

:octicons-package-16: Javapackage: `com.etendoerp.quotation`

:octicons-package-16: Javapackage: `com.etendoerp.quotation.template`

<iframe width="560" height="315" src="https://www.youtube.com/embed/xkWfvKOXTUg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

Different functionalities are added to this window which allows the user to make changes and/or to adjust the information entered, to generate the sales quotations in order to create the corresponding orders from those quotations.

!!! info
	For more information, visit the [Sales Quotation user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#advanced-sales-quotation).


##### Advanced Rappels

:octicons-package-16: Javapackage: `com.etendoerp.rappels.advanced`

:octicons-package-16: Javapackage: `com.etendoerp.rappels.advanced.template`


<iframe width="560" height="315" src="https://www.youtube.com/embed/_iBwlVHvF4c" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

This functionality allows the user to configure and grant rappels to business partners. Rappels are discounts based on the volume of consumption of the business partner in a given period of time.

!!! info
	For more information, visit the [Advanced Rappels user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#rappel-configuration). 

!!! info
	For more information, visit the [Print Document Web Service developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/overview.md#print-document-web-service). 

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Financial Extensions Bundle/Overview
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/overview
## Article Content: 
#### Overview
This bundle includes enhancements for Financial Management functionalities in Etendo.

#### Translations
-  :material-translate: Spanish: [Financial Extensions Bundle ES](https://marketplace.etendo.cloud/#/product-details?module=0E104B3E36C84992BD7A6D941FBC7AB9){target="_blank"}

#### Modules

##### Accounting Templates

:octicons-package-16: Javapackage: `com.etendoerp.accounting.templates`

This module allows setting a non deductible tax's amount to a specified financial account

!!! info
    For more information, visit the [Accounting Templates user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#purchase-invoice-which-includes-not-deductible-tax-amount).

##### Advanced Bank Account Management

:octicons-package-16: Javapackage: `com.etendoerp.advanced.bank.account.management`

:octicons-package-16: Javapackage: `com.etendoerp.advanced.bank.account.management.template`

This module enhances the bank account management enabling greater customization and control over bank account selection associated with customers and vendors.

!!! info
    This functionality is available in the following windows:

    - [Business Partner](https://docs.etendo.software/latest/basic-features/master-data-management/master-data.md#advanced-bank-account-management-1)
    - [Sales invoice]()
    - [Purchase Invoice]()
    - [Sales order]()
    - [Purchase order]()
    - [Payment In]()
    - [Payment Out]()

    For more information, visit the [Advanced Bank Account Management](https://docs.etendo.software/latest/optional-features/bundles/financial-extensions/advanced-bank-account-management.md)


##### Advanced Business Partner Settlement

:octicons-package-16: Javapackage: `com.etendoerp.advanced.bpsettlement`

<iframe width="560" height="315" src="https://www.youtube.com/embed/Gh6G1i3Iyts" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

This functionality allows the user to create settlements for invoices, both sales and purchase, from the Payment In and Payment Out windows. Also a netting can be performed by creating a settlement from a bank reconciliation for credit in / out from the Financial Account window.

!!! info
    For more information, visit:

    - [Payment In](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#advanced-business-partner-settlement-1)
    - [Payment Out](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#advanced-business-partner-settlement)
    - [Financial Account](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#advanced-business-partner-settlement-2)

##### Advanced Financial Docs. Processing

:octicons-package-16: Javapackage: `com.etendoerp.advanced.financial.docs.processing`

:octicons-package-16: Javapackage: `com.etendoerp.advanced.financial.docs.processing.template`

<iframe width="560" height="315" src="https://www.youtube.com/embed/pnE-nePaTEI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

This functionality is part of the Financial Extensions Bundle and it is useful when the user needs to reactivate voided invoices (either Sales or Purchase) and closed orders (either Sales or Purchase) as well as amortizations.

!!! info
    For more information, visit:

    - [Sales Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#how-to-reactivate-a-closed-sales-order) 
    - [Sales Invoice](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#how-to-reactivate-a-voided-sales-invoice)
    - [Purchase Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#how-to-reactivate-a-closed-purchase-order)
    - [Purchase Invoice](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#how-to-reactivate-a-voided-purchase-invoice)
    - [Amortization](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/assets/overview.md#how-to-reactivate-amortizations)
    - and the [Advanced Financial Docs. Processing developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/financial-extensions-bundle.md#advanced-financial-docs-processing)

##### Asset Amortization Report

:octicons-package-16: Javapackage: `com.smf.asset.amortization.report`

The new Amortization report allows downloading excel reports about information on amortization created for a selected year.

!!! info
    For more information, visit [the Asset Amortization Report user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/assets/overview.md#asset-amortization-report-excel).

##### Automated Remittance

:octicons-package-16: Javapackage: `com.etendoerp.automated.remittance`

This functionality allows the user to automatically process and protest remittances.

!!! info
    For more information, visit [the Automated Remittance user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/automated-remittance.md).

##### Bank Integration PSD2

:octicons-package-16: Javapackage: `com.etendoerp.psd2.bank.integration`

This functionality allows users to synchronize their bank accounts with financial accounts in Etendo and automatically download bank transactions in a secure and faster way.

!!!info
    For more information, visit [Bank Integration PSD2](https://docs.etendo.software/latest/optional-features/bundles/financial-extensions/psd2-bank-integration.md) section. 


##### Banking Pool

:octicons-package-16: Javapackage: `com.etendoerp.bankingpool`

<iframe width="560" height="315" src="https://www.youtube.com/embed/sdPnyewiPbc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

This feature allows entering in the system all the financings the company has. It is possible to exploit the information through the bank pool report.

!!! info
    For more information, visit [the Banking Pool user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions.md#financial-type-configuration) and the [Banking Pool developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/financial-extensions-bundle.md#banking-pool).

##### Bulk Posting

:octicons-package-16: Javapackage: `com.etendoerp.bulk.posting`

<iframe width="560" height="315" src="https://www.youtube.com/embed/mgE-NnDLlA0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

This functionality allows the user to post or unpost multiple records at the same time.

!!! info
    For more information, visit [the Bulk Posting Module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting.md).

##### Business Partner Settlement

:octicons-package-16: Javapackage: `org.openbravo.financial.bpsettlement`

<iframe width="560" height="315" src="https://www.youtube.com/embed/Gh6G1i3Iyts" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

This module provides a new document where it is possible to settle debts or credit of business partners that are both customers and providers.

!!! info
    For more information, visit the [Business Partner Settlement user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#business-partner-settlement) and the [Business Partner Settlement developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/financial-extensions-bundle.md#business-partner-settlement).

##### Conversion Rate Downloader

:octicons-package-16: Javapackage: `com.smf.currency.conversionrate`

This process allows keeping currency conversions up to date by generating conversion ranks automatically with a background process using apilayer.

!!! info
    For more information, visit the [Conversion Rate Downloader user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/application.md#conversion-rate-download-rule) and the [Conversion Rate Downloader developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/financial-extensions-bundle.md#conversion-rate-downloader).


##### Currency API Configuration

:octicons-package-16: Javapackage: `com.smf.currency.apiconfig`

##### Deferred GL Journal

:octicons-package-16: Javapackage: `com.etendoerp.gljournal.advanced`

<iframe width="560" height="315" src="https://www.youtube.com/embed/K7XOBkmRLAQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

This functionality allows the user to duplicate a journal entry as many times as required, indicating the regularity and the period in which the first copy must be made. Follow the process to create a journal entry from the beginning and duplicate it later.

!!! info
    For more information, visit [the Deferred GL Journal user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions.md#deferred-gl-journal).


##### Financial Advanced Reports

:octicons-package-16: Javapackage: `com.etendoerp.financial.reports.advanced`

<iframe width="560" height="315" src="https://www.youtube.com/embed/YG2m6eMhLJg" title="Financial Advance Reports" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

The Balance Sheet and P&L Structure, General Ledger and Journal Entries Advanced reports are an enhanced version of the previous reports including new filters according to the reports accounting dimensions.

!!! info
    For more information, visit [the Balance Sheet and P&L Structure user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/analysis-tools.md#balance-sheet-and-pl-structure-advanced), [the General Ledger Report user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/analysis-tools.md#general-ledger-report-advanced) and [the Journal Entries Report user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/analysis-tools.md#journal-entries-report-advanced).

##### G/L Journal Clone

:octicons-package-16: Javapackage: `com.etendoerp.gljournal.clone`

This functionality allows the user to clone a G/L journal in the Simple G/L Journal window, part of the accounting transactions of financial management.

!!! info
    For more information, visit the [G/L Journal Clone user guide](https://docs.etendo.software/latest/basic-features/financial-management/accounting/transactions.md#gl-journal-clone).

##### Intercompany

:octicons-package-16: Javapackage: `com.etendoerp.advanced.intercompany`

<iframe width="560" height="315" src="https://www.youtube.com/embed/bQjT7iPkYtQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

In case the user has to create orders or invoices among two or more organizations that are different but belong to the same client, this functionality allows automatically generating the corresponding inverse document.

!!! info
    For more information, visit [the Intercompany Module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/enterprise-model.md#intercompany).

##### Payment Removal

:octicons-package-16: Javapackage: `com.etendoerp.payment.removal`

:octicons-package-16: Javapackage: `com.etendoerp.payment.removal.template`

<iframe width="560" height="315" src="https://www.youtube.com/embed/TLbjMLjGYwo?si=uGtWnNHNa7gV4_l5" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

The aim of this functionality is to delete and reactivate payments in an agile and easy way. Also, it allows eliminating and reactivating bank transactions and reconciliations.

The payments to be deleted or reactivated can be found in different statuses: Awaiting execution, Payment made, Payment received, Withdrawn not cleared, Deposited not cleared, Payment cleared (provided that the payment has been reconciled by an automatic method and not by a manual method), Post and Unpost.

The button Remove Payment is available in the Sales Order, Purchase Order, Sales Invoice, Purchase Invoice, Payment In y Payment Out windows.The Reactivate and the Advanced reactivation buttons are only available in the Payment In and Payment Out windows. Finally, the buttons Reactivate Transaction, Remove Transaction, Reactivate Reconciliation and Remove Reconciliation are available in the Financial Account window.


!!! info
    For more information, visit:

    - [Sales Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#payment-removal)
    - [Purchase Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#payment-removal)
    - [Sales Invoice](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#payment-removal_1)
    - [Purchase Invoice](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#payment-removal_1)
    - [Payment In](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#payment-removal_1)
    - [Payment Out](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#payment-removal)
    - [Financial Account](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#payment-removal_2)

##### Remittances

:octicons-package-16: Javapackage: `org.openbravo.module.remittance`

:octicons-package-16: Javapackage: `org.openbravo.module.remittance.template`

<iframe width="560" height="315" src="https://www.youtube.com/embed/6z3t-E_sV0E" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

This functionality allows creating a remittance which is a group of "payments" (in/out) or "orders/invoices" that can be remitted to the bank for its payment. The bank will then manage either the collection of the money from the customers or the payment to the vendors/suppliers.

!!! info
    For more information, visit [the Remittances Module user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#remittance).


##### Reverse GL Journal

:octicons-package-16: Javapackage: `com.smf.gljournal.reverse`

:octicons-package-16: Javapackage: `com.smf.gljournal.reverse.template`

<iframe width="560" height="315" src="https://www.youtube.com/embed/pfqClq8HD6k" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

This functionality is specifically useful for companies that have a month close, instead of an end year close, but with pending payments (in or out). It allows the user to open or close the period without taking into account the payments until they are made.

!!! info
    For more information, visit the [GL Journal user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions.md#gl-journal) and the [Simple GL Journal user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions.md#simple-gl-journal).


##### VAT Regularization 

:octicons-package-16: Javapackage: `com.etendoerp.vat.regularization`

<iframe width="560" height="315" src="https://www.youtube.com/embed/udarQ6h6EXQ?si=4CNi7Qgi2_yHdW5z" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

This functionality enables the user to adjust accounts, ensuring the VAT balance is accurate and correctly aligned.

!!!info
    For more information, visit the [VAT Regularization User Guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions.md#vat-regularization).


==ARTICLE_END==
==ARTICLE_START==
# Article Title: Advanced Bank Account Management
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Financial Extensions Bundle/Advanced Bank Account Management
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/advanced-bank-account-management
## Article Content: 
### Advanced Bank Account Management

:octicons-package-16: Javapackage: `com.etendoerp.advanced.bank.account.management`

:octicons-package-16: Javapackage: `com.etendoerp.advanced.bank.account.management.template`

#### Overview
This section describes the Advanced Bank Account Management module included in the Etendo Financial Extensions bundle.

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}.

This functionality enhances the bank account management enabling greater customization and control over bank account selection associated with customers and vendors.

This functionality is available in the following windows: 

- [Business Partner](https://docs.etendo.software/latest/basic-features/master-data-management/master-data.md#advanced-bank-account-management)
- [Sales invoice](https://docs.etendo.software/latest/basic-features/sales-management/transactions.md#advanced-bank-account_1)
- [Purchase Invoice](https://docs.etendo.software/latest/basic-features/procurement-management/transactions.md#advanced-bank-account_1)
- [Sales order](https://docs.etendo.software/latest/basic-features/sales-management/transactions.md#advanced-bank-account)
- [Purchase order](https://docs.etendo.software/latest/basic-features/procurement-management/transactions.md#advanced-bank-account)
- [Payment In](https://docs.etendo.software/latest/basic-features/financial-management/receivables-and-payables/transactions.md#advanced-bank-account_1)
- [Payment Out](https://docs.etendo.software/latest/basic-features/financial-management/receivables-and-payables/transactions.md#advanced-bank-account)

#### Business Partner - Bank Account
:material-menu: `Application` > `Master Data Management` > `Business Partner`

This module introduces the possibility to mark a bank account as Default within the Bank Account tab of the Business Partner window. Here, in the Advanced Bank Account Management field, it is possible to check the Default Account checkbox in order to set the account to be used in invoices and orders. This information determines the bank account of each payment.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/advanced-bank-account-management/aba1.png)

#### Business Partner - Location/Address
:material-menu: `Application` > `Master Data Management` > `Business Partner` 

The Advanced Bank Account Management field is introduced in the Location/ Address tab of the Business Partner window to associate specific bank accounts to the different locations.  

!!!info
    The default account will always be used when generating a new document unless an account is set up in a specific location. 

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/advanced-bank-account-management/aba2.png)

#### Sales/Purchase Order windows
:material-menu: `Application` > `Sales Management` > `Transactions` > `Sales Order`

:material-menu: `Application` > `Procurement Management` > `Transactions` > `Purchase Order`

A Bank Account field has also been added to the Purchase and Sales Order windows, in the Advanced Bank Account Management section of the header. 

This field is automatically filled based on the selected address. If a specific account is associated with the address, that account is used; if no account is configured, the default account is selected. In cases where neither option is configured, the field remains blank. Payment plans generated from these Purchase and Sales Orders now include the bank account information.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/advanced-bank-account-management/aba3.png)

###### Add Payment button

Furthermore, the Add Payment button has been enhanced to include a Bank Account field, allowing users to filter payments by bank account. This button is present in the Sales Invoice and Purchase invoice windows.


#### Sales/Purchase Invoice windows

:material-menu: `Application` > `Sales Management` > `Transactions` > `Sales Invoice`

:material-menu: `Application` > `Procurement Management` > `Transactions` > `Purchase Invoice`

Similarly, a Bank Account field has been added to the Purchase and Sales Invoice windows, which functions in the same manner as in orders. The field is auto-filled based on the selected address, using a specific account if associated, falling back to the default account if none is specified, or remaining blank otherwise. 
The payment plan inherits the bank account information from the header
Additionally, invoices created from Purchase and Sales Orders inherit the bank account information from the respective orders.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/advanced-bank-account-management/aba4.png)

The Payment Plan in Sales Invoice and Purchase Invoice windows now displays the associated bank account information in the Payment Plan tab. 

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/advanced-bank-account-management/aba5.png)

###### Add Payment button

Furthermore, the Add Payment button has been enhanced to include a Bank Account field, allowing users to filter payments by bank account. This button is present in the Sales Invoice and Purchase invoice windows.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/advanced-bank-account-management/aba6.png)


###### Modify Payment Plan button

A Modify Payment Plan button is found at Payment Plan tab level in both the Purchase and Sales Invoice windows. This function allows users to modify payment plans already created, adding or deleting payments, and even specifying the bank account for each payment plan record.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/advanced-bank-account-management/aba7.png)

#### Payment In /Payment Out windows
:material-menu: `Application` > `Financial Management` > `Receivables and Payables` > `Transactions` > `Payment In / Payment Out` 
##### Add Details button


As in the case of the Add Payment button, the Add Details button has been enhanced to include a Bank Account field, allowing users to filter payments by bank account. This button is present in the Payment In and Payment Out windows.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/advanced-bank-account-management/aba8.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Bank Integration PSD2
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Financial Extensions Bundle/Bank Integration PSD2
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/psd2-bank-integration
## Article Content: 
### Bank Integration PSD2
:octicons-package-16: Javapackage: `com.etendoerp.psd2.bank.integration`

#### Overview

The **Revised Payment Services Directive (PSD2)** is an European Union legislation designed to regulate payment services and payment service providers in the EU and the European Economic Area (EEA). 

Its main objectives are:

- Improving the security of electronic payments: it implements stricter authentication requirements to reduce fraud.
- Encouraging innovation and competition: allows Etendo to access users' bank account information (by giving consent), promoting the emergence of new financial services.
- Consumer protection: increases transparency and establishes new liability rules for unauthorized payments.

This section describes an enhancement of the Financial Extensions Bundle in Etendo which uses the **PSD2 (Payment Services Directive 2) feature**. This functionality allows users to securely connect to their bank, synchronize their bank accounts with financial accounts in Etendo and **automatically download bank transactions** within specified date ranges. 

This section serves as a guide for users to understand the functionality and usage of the PSD2 module.

!!!info
    To be able to include this functionality, the **Financial Extensions Bundle** must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes/).


Before using the Bank Integration PSD2, users must provide necessary credentials to **login on the bank page** to connect their bank accounts with Etendo. This will allow automating the process of updating financial records with bank account information in order to be able to download the bank transactions needed. 

This bank integration will be done throught the **Redsys service provider** by following a series of mandatory steps which must be done by a technical staff.

!!!warning
    Before continuing with this guide, ensure that a developer has configured the environment by following the instructions in the [PSD2 Bank Integration Technical Documentation](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/financial-extensions-bundle/psd2-integration.md).

#### Bank Account Setup
:material-menu: `Financial Management`> `Receivables and Payables` >`Transactions`>`Financial Account`

The following configuration steps are needed to directly connect the Etendo financial account with the user's bank provider. 

##### Provider Configuration

From the `Financial Account` window, the user will be able to get to download bank transactions, configure the accounts that will be integrated through PSD2 in order to set the bank provider with which the financial accounts will be syncronized with. 
For this, go to the **Bank Integration PSD2** section and select the corresponding provider for the selected financial account. 

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/psd2-bank-integration-10.png)

!!!note
     Remember to repeat this procees for each bank account needed to be configured with PSD2 Integration. 


##### Get Token Button

The next step is to generate the token thought the **Get Token button**, which allows logging into the bank interface as Etendo will move towards token-based authentication. 
This token provided by the bank is a secure and temporary key used to authenticate and authorize Etendo to access the bank account information. 

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/psd2-bank-integration-9.png)

In the bank pop-up window, log in to the configured provider by using the **bank’s user and password**. This process will generate the token, and Etendo will use it to get the information needed from the bank. 

<figure markdown="span">
    ![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/psd2-bank-integration-12.png)
  <figcaption>This image is an example of a type of provider. </figcaption>
</figure>

!!!note
    Consider that the token has a validity period, it will be only necessary to generate a new one if it has expired.  


##### Get Consent Button

Once the token is generated, it is necessary to **give consent** in order to allow Etendo to retreive the bank statement information. For this, a new button named **Get Consent** will show up, click on it to authorize Etendo to access all the bank information through the token generated. 

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/psd2-bank-integration-3.png) 

By giving authorization from the Get Consent button, it is mandatory to confirm the authorisation in the following bank provider pop-up window. 

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/psd2-bank-integration-1.png)


##### Get Bank Account Identifiers Process

:material-menu: `General Setup`> `Integrations Configuration` >`PSD2`>`Get Bank Account Identifiers`

The following step is to synchronize the bank account registed in Etendo with the chosen provider. This process gets the internal provider account ID to associate it with the bank account used by Etendo. This allows the system to directly access the bank information to execute financial processes. 

For this, go to the **Get Bank Account Identifiers** window and select the bank provider to synchronize the accounts with. 

!!! warning
	Remember that in order to finally achieve the accounts synchronization, it is necessary to have the IBAN (International Bank Account Number) previously configured in the Financial Account since this number will allow the connection with the bank’s internal ID to automatically create and generate the bank statements. 

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/psd2-bank-integration-4.png)

Once the process is finished, the synchronization can be checked in the **Bank Integration PSD2** information section from the Financial Account window where the account is saved.  

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/psd2-bank-integration-5.png)

#### Get Bank Statements Button

From the `Financial Account` window, in the **PSD2 Bank Integration** section of the header, it is also possible to define the **import date** of the bank statements and the **frequency run**, e.i., how often the user wants a record to be created. 

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/psd2-bank-integration-6.png)

- **Import from Date**: The user is able to set the specific date from which the bank information will be taken. In case no date is set, Etendo brings bank statement information from the last date when a bank statement was created (when a bank statement was imported). 

- **Import to Date**: The user is able to set the specific date up to which the bank information will be taken. In case this field remains empty, Etendo brings the information to the current day's date.

- **Statement Frequency**: 

    - One per day: if there is already a statement created for that day,  Etendo uses the same statement and includes the information there.
    - One per month: Etendo checks the last statement created within the given month and if there is one created, it enters the statement there. Otherwise, Etendo creates a new one. 
    - One per run: Etendo creates a new statement.
    - One per week: Etendo checks if the last statement created is within the given week.


After defining the requirements for the bank statement creation, complete the process by clicking on the **Get Bank Statement button**. Etendo creates a header record, whose names are related to the dates, and the bank statements lines provide a transaction reference number. 

Etendo **processes the bank statements** which are ready to be reconciled. 

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/psd2-bank-integration-7.png)


==ARTICLE_END==
==ARTICLE_START==
# Article Title: Bulk Posting
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Financial Extensions Bundle/Bulk Posting
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting
## Article Content: 
### Bulk Posting
:octicons-package-16: Javapackage: `com.etendoerp.bulk.posting` 

#### Overview
This section describes the Bulk Posting module included in the Etendo Financial Extensions bundle.

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}.

!!! warning
    Before using this functionality, remember that this module's background process can affect the performance of the system.

The Bulk Posting functionality allows the user to post or unpost multiple records by selecting the corresponding records and clicking the **Bulk posting** button. Also, the Accounting Status of the record/s is shown in the status bar, in form view, or in a column, in grid view.

![](https://docs.etendo.software/latest/assets/drive/17KafE0qvtuAe21aVvs7mDN58V_BCDScO.png)

This functionality is available in the following windows:

- [Amortization](https://docs.etendo.software/latest/basic-features/financial-management/assets/overview.md#bulk-posting)
- [Goods Movements](https://docs.etendo.software/latest/basic-features/warehouse-management/transactions.md#bulk-posting_1)
- [Financial Account](https://docs.etendo.software/latest/basic-features/financial-management/receivables-and-payables/transactions.md#bulk-posting_2)
- [Matched Invoices](https://docs.etendo.software/latest/basic-features/procurement-management/transactions.md#bulk-posting_2)
- [Cost Adjustment](https://docs.etendo.software/latest/basic-features/warehouse-management/transactions.md#bulk-posting_3)
- [Bill of Materials Production](https://docs.etendo.software/latest/basic-features/warehouse-management/transactions.md#bulk-posting_2)
- [Internal Consumption](https://docs.etendo.software/latest/basic-features/production-management/transactions.md#bulk-posting_1)
- [Doubtful Debt](https://docs.etendo.software/latest/basic-features/financial-management/receivables-and-payables/transactions.md#bulk-posting_3)
- [Landed Cost](https://docs.etendo.software/latest/basic-features/procurement-management/transactions.md#bulk-posting_4)
- [G/L Journal](https://docs.etendo.software/latest/basic-features/financial-management/accounting/transactions.md#bulk-posting_1)
- [Simple G/L Journal](https://docs.etendo.software/latest/basic-features/financial-management/accounting/transactions.md#bulk-posting)
- [Work Effort](https://docs.etendo.software/latest/basic-features/production-management/transactions.md#bulk-posting)
- [Goods Receipt](https://docs.etendo.software/latest/basic-features/procurement-management/transactions.md#bulk-posting)
- [Goods Shipment](https://docs.etendo.software/latest/basic-features/sales-management/transactions.md#bulk-posting)
- [Return Material Receipt](https://docs.etendo.software/latest/basic-features/sales-management/transactions.md#bulk-posting_1)
- [Return to Vendor Shipment](https://docs.etendo.software/latest/basic-features/procurement-management/transactions.md#bulk-posting_3)
- [Sales Invoice](https://docs.etendo.software/latest/basic-features/sales-management/transactions.md#bulk-posting_2)
- [Purchase Invoice](https://docs.etendo.software/latest/basic-features/procurement-management/transactions.md#bulk-posting_1)
- [Payment In](https://docs.etendo.software/latest/basic-features/financial-management/receivables-and-payables/transactions.md#bulk-posting_1)
- [Payment Out](https://docs.etendo.software/latest/basic-features/financial-management/receivables-and-payables/transactions.md#bulk-posting)
- [Physical Inventory](https://docs.etendo.software/latest/basic-features/warehouse-management/transactions.md#bulk-posting)


##### Accounting Status

All the records existing previously to the installation of this new functionality have a default **pending refresh** value in the column **Accounting Status**. To set the correct value for this column, it is necessary to configure the following preference to indicate the amount of days to be considered by the process to set the correct values of the previous records.

###### Preference Configuration

To configure the preference, go to the **Preference** window and create a new record with the property **Amount of Days** and the default value **90**. If necessary, it is possible to create another preference by entering a new value and checking the **selected** box.

###### Background Process

It is necessary to run the **Days Back to Refresh Accounting** background process to update the accounting status column.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/bulk-posting/daysbacktorefreshaccounting.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Automated Remittance
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Financial Extensions Bundle/Automated Remittance
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/automated-remittance
## Article Content: 
### Automated Remittance

:octicons-package-16: Javapackage: `com.etendoerp.automated.remittance` 

#### Overview

This section describes the Automated Remittance module included in the Etendo Financial Extensions bundle.

!!! info
    To be able to include this functionality, the Financial Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}.


This functionality allows the user to automatically process and protest remittances. To better understand this section, it is necessary to visit the [Remittance user guide](https://docs.etendo.software/latest/basic-features/financial-management/receivables-and-payables/transactions.md#remittance).

!!!important
    This functionality depends on the `org.openbravo.module.remittance` module in version `3.15.0` or higher. In case of installing the financial extensions bundle, the dependencies are handled automatically.

#### Setup

To be able to use this functionality, it is necessary to install the Automated Remittance dataset before using the Remittance window.

For this, go to the [Enterprise Module Management](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/enterprise-model.md#enterprise-module-management) window and select the corresponding dataset as shown below. This includes the necessary payment method to be used in the protest functionality, explained below.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/automated-protest-remittance/Enterprise%20Module%20Management.png)

#### Automated Remittance Process

This functionality allows the automatic processing of remittances. This functionality is activated by selecting the Process Automated checkbox in the header of the [Remittance](https://docs.etendo.software/latest/basic-features/financial-management/receivables-and-payables/transactions.md#remittance) window.


1. Activation: To activate the automated processing, the Process Automated checkbox in the Remittance header is selected by default. This selection is included once the module is installed. If the manual processing is preferred, the user can uncheck this option.

    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/automated-protest-remittance/process-automated-check.png)

    Once the Process button is used, Etendo automatically creates the corresponding lines in the Bank Instructions and Settled tabs, as explained below.

2. Generation of Bank Instructions: The system automatically generates the corresponding Bank Instructions.

3. Date Processing: Remittance lines will be processed with the current date, automating the entire workflow. This lines can be found in the Settled tab. If necessary, this date can be manually modified in the corresponding field from the Settled tab, after remittance processing.

    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/automated-protest-remittance/remittance.png)

!!!note
    The invoice selection, grouping and processing steps already existed; what's new is the automation of the remittance processing by selecting the Process Automated checkbox.

#### Automated Remittance Protest

The Protest Remittance button allows the automatic protest of remittances. This function facilitates the management of protests and the re-settlement of remittances. This automatic protest creates a negative payment, therefore it is not necessary to use the Settle/Protest Remittance window or add a payment manually.

1. Remittance Selection: In the Settled tab, of the Remittance window, select the remittance to be protested.

    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/automated-protest-remittance/remittance-selection.png)

2. Return Generation: By pressing the Protest Remittance button and selecting a return date, the system will automatically generate the return of the remittance.

    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/automated-protest-remittance/protest-generation.png)

3. Negative Invoice Payment: The return will include the generation of a negative payment of the invoice to be returned, allowing the remittance to be settled again in the future.

    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/automated-protest-remittance/negative-invoice-payment.png)

    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/financial-extensions/automated-protest-remittance/negative.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Spanish Localization Bundle/Overview
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/overview
## Article Content: 
#### Descripción
El bundle de Localización Española contiene los módulos que añaden funcionalidades a Etendo para ajustar Etendo Classic a los requerimientos legales y/o fiscales españoles.

#### Módulos

- [Spain SII](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/sii-para-iva.md)
- [Tax Report: Modelo 303 (Spain)](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/modelo-303.md)
- [Withholding Report: Modelo 190 (Spain)](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/modelo-190.md)
- [Spain AEAT Modelo 347 for APR](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/modelo-347.md)
- [Modelo 349](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/modelo-349.md)
- [Impuestos para España](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/impuestos-para-españa.md)
- [Intrastat](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/intrastat.md)
- [Tax Report: Modelo 390 (Spain)](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/modelo-390.md)
- [Libro de Facturas](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/libro-de-facturas.md)
- [Configuración de Impuestos para Libro de Facturas](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/configuracion-de-impuestos-para-libro-de-facturas.md)
- [TicketBai y Batuz](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/ticketbai-batuz.md)
- Incoterms
- European Union Countries
- Provincias de España
- Legal Representative of the Organization
- I.A.E. Epigraphs (Epígrafes del I.A.E.)
- CIF and NIF validator
- Validador de número de cuenta financiera
- Check Printing
- Tipo de Número de Identificación de Tercero
- Professional Localization pack Spain (España) Datasets
- Multidimensional Tax Report
- Cuaderno 43
- 3 digits ISO country codes
- Métodos de Pago
- Tax Report Launcher
- Spanish Tax Module Improvements
- Nueva versión del módulo de Impuestos de España
- Condiciones de pago
- Chart of accounts: PGC 2007 General
- Chart of accounts: PGC 2007 PYMEs
- Professional Localization pack Spain (España)
- Localization pack Spain (España)
- Traducción al español del módulo 'Default Jobs'
- JSON Datasource Translation: Spanish Spain (es_ES)
- Workspace & Widgets Translation: Spanish Spain (es_ES)
- User Interface Selector Translation: Spanish Spain (es_ES)
- Traducción al Español del módulo Payment Report
- Number To Word
- User Interface Client Kernel Translation Spanish Spain(esES)
- Translation: Spanish-Spain (es_ES) español-España
- Openbravo Multi Business Partner Selector
- Orders Awaiting Delivery Spanish (Spain) Translation
- Smartclient Translation: Spanish Spain (es_ES)
- Query/List Widget Translation Spanish Spain (es_ES)
- Widgets Collection Translation Spanish Spain (es_ES)
- Advanced Payables and Receivables - Spanish Translation
- User Interface Application Translation Spanish Spain (es_ES)
- Alerts: Accounting
- SOAP with Attachments API for Java Implementation
- Payment Method Type
- Javax XML SOAP API
- HTML Widget Translation Spanish Spain (es_ES)
- OpenID Service Integration Translation Spanish Spain
- Integration with Google APIs Translation Spanish Spain
- Openbravo 3.0 Translation Pack: Spanish Spain (es_ES)

#### Incoterms

:octicons-package-16: Javapackage: `org.openbravo.module.incoterms`

Este módulo añade el listado de Incoterms a Etendo Classic.

Los Incoterms or International Commercial Terms son una serie de términos de venta internacionales, publicados por la Cámara Internacional de Comercio y ampliamente utilizados en transacciones comerciales internacionales. Son utilizados para dividir costos de transacción y responsabilidades entre compradores y vendedores.

#### European Union Countries

:octicons-package-16: Javapackage: `org.openbravo.module.eucountries`

Este módulo identifica qué países pertenecen a la Unión Europea.

#### Provincias de España

:octicons-package-16: Javapackage: `org.openbravo.spain.regions`

Este módulo añade el listado de provincias españolas a Etendo Classic.

#### Legal Representative of the Organization

:octicons-package-16: Javapackage: `org.openbravo.module.organization.representative.es`

Este módulo añade a la ventana de la Organización una pestaña que permite configurar el Representante Legal de la Organización. Pueden declararse uno o varios Representantes.

La pestaña “Representante Legal” que se añade a la ventana de Organización permite configurar el Representante Legal de la organización, dato que es obligatorio para el Modelo 390.

#### I.A.E. Epigraphs (Epígrafes del I.A.E.)

:octicons-package-16: Javapackage: `org.openbravo.module.epigrafes.iae.es`

Este módulo agrega en la ventana de Organización una pestaña titulada “Actividades del IAE”, donde se pueden indicar todas las actividades en las que la empresa ha estado trabajando. Es posible seleccionar los Epígrafes del Impuesto sobre Actividades Económicas (IAE) que estén asociados a la Organización.

El tipo de información agregada por este módulo se requiere en determinados modelos tributarios oficiales, por ejemplo en el Modelo 390.

En este módulo se incluye el conjunto correspondiente a la clave 1. Si se desea incluir un epígrafe que pertenezca a cualquier otra clave, se debe crear un nuevo registro en la ventana Epígrafes IAE e incluirlo en un registro de la solapa “Actividades del IAE” de la ventana de Organización.

#### CIF and NIF validator

:octicons-package-16: Javapackage: `org.openbravo.module.cifnifvalidator`

:octicons-package-16: Javapackage: `org.openbravo.module.cifnifvalidator.es_es`

Este módulo implementa un callout que comprueba si se ha introducido un Número de Identificación Fiscal (NIF) válido al configurar un tercero.

El Número de Identificación Fiscal (NIF) permite identificar de forma inequívoca a personas físicas o jurídicas.

#### Validador de número de cuenta financiera

:octicons-package-16: Javapackage: `org.openbravo.module.finactvalidator.es`

Este módulo permite validar el número de cuenta financiera de la organización y el número de cuenta de banco del tercero, de acuerdo con la normativa española. Verifica que se ajusten al formato definido para España, y que los dígitos de control sean correctos.

#### Check Printing

:octicons-package-16: Javapackage: `org.openbravo.finance.checkprinting`

:octicons-package-16: Javapackage: `org.openbravo.finance.checkprinting.es_es`

Este módulo permite la impresión de cheques desde Etendo. Además, provee un sistema para buscar datos históricos y poder volver a imprimir un cheque en caso de error.

Este módulo incluye el dataset "Check Printing Infraestructure" que crea un formato de impresión llamado "Standard Format", un método de pago denominado “Check" y un proceso de ejecución llamado "Check Printing".

##### Ejecutar pago

Después de crear un pago, permanecerá en “Awaiting Execution”. Se necesita un paso adicional para ejecutarlo y proveer el primer número para la secuencia de los cheques, esto puede hacerse a través del formulario de “Payment Execution”.

Para seleccionar los pagos que serán impresos, tras hacer click en “Process” aparece un pop up que requiere un número para el cheque. Este número es opcional.
El sistema creará automáticamente las entradas en la ventana “Check Printing” en estado “Not Printed”. Además, el sistema asociará automáticamente el tipo de documento “Check” y el número de secuencia.

##### Imprimir cheques

Se genera una nueva ventana para imprimir cheques. Esta puede encontrarse en _Gestión Financiera > Gestión de cobros y pagos > Transacciones > Impresión de cheques_. La información de esta ventana será automáticamente completada cuando se ejecuten transacciones payment out que están usando el método de pago “Check”.

La ventana aplica un primer filtro para mostrar solamente los cheques que están en estado “Not printed”. Ese filtro puede ser removido para mostrar todos los cheques, incluidos los que están en estado “Printed”.

Para imprimir uno o varios cheques, se deben seleccionar y presionar el botón “Imprimir”.

#### Tipo de Número de Identificación de Tercero

:octicons-package-16: Javapackage: `org.openbravo.module.bptaxidkey`

Este módulo añade el campo “Número de identificación de tercero” a la ventana de Terceros. Este dato es utilizado por los Libros de Registro de Facturas.

#### Professional Localization pack Spain (España) Datasets

:octicons-package-16: Javapackage: `org.openbravo.proflocalization.spain.dataset`

Este módulo contiene un dataset que añade permisos para ciertas ventanas y procesos incluidos en el pack de Localización Española para el rol de Finanzas.

#### Multidimensional Tax Report

:octicons-package-16: Javapackage: `org.openbravo.module.invoicetaxreportenhanced30`

:octicons-package-16: Javapackage: `org.openbravo.module.invoicetaxreportenhanced30.es_es`

Este módulo genera un informe que permite al usuario obtener un listado de aquellas transacciones registradas en el sistema que tienen implicaciones fiscales.

El módulo permite obtener los datos necesarios para cumplimentar modelos de la AEAT que no se generan como un fichero válido desde Etendo. Por ejemplo, el Modelo 115 (Trimestral) de Retenciones e ingresos a cuenta sobre rentas procedentes del arrendamiento de inmuebles urbanos.

La información obtenida mediante este módulo es útil para que las empresas puedan completar manualmente y enviar los informes requeridos por las autoridades. Se le brinda al usuario final información fiscal relevante, que luego puede ser clasificada según las necesidades.

#### Cuaderno 43

:octicons-package-16: Javapackage: `org.openbravo.module.cuaderno43.es`

Este módulo implementa el formato de importación bancaria “Cuaderno 43” (Norma AEB 43). Los Cuadernos o Normas AEB (Asociación Española de la Banca) son una serie de normas o protocolos comunes a todas las entidades bancarias que operan en España y que fijan las características de los ficheros informáticos emitidos o recibidos por una entidad financiera.

#### 3 digits ISO country codes

:octicons-package-16: Javapackage: `org.openbravo.module.countryisocode`

Los códigos ISO de países son utilizados a nivel mundial para representar a cada país con dígitos. Este módulo provee el dataset que vincula los países con su código ISO.

#### Métodos de Pago

:octicons-package-16: Javapackage: `org.openbravo.spanishdefaultdata.paymentmethods`

Este módulo contiene las formas de pago más utilizadas en España, las cuales pueden ser utilizadas en el módulo de gestión avanzada de cobros y pagos. Incluye Recibo domiciliado, Recibo, Letra Aceptada, Crédito Documentario, Contrato Adjudicación, etc.

El módulo de Métodos de Pago refiere a las formas de pago utilizadas por las empresas, por ejemplo contado o tarjeta de crédito. Etendo define un flujo de pagos basado en la configuración de Métodos de Pago.

#### Tax Report Launcher

:octicons-package-16: Javapackage: `org.openbravo.module.taxreportlauncher`

:octicons-package-16: Javapackage: `org.openbravo.module.taxreportlauncher.es`

Este módulo consiste en un launcher de impuestos que permite la definición de informes y de sus parámetros, e incluye la clase java asociada que contiene la lógica de negocios que será aplicada.

Este módulo permite crear y enviar formularios de informe de impuestos desde Etendo. Es posible ingresar los datos requeridos en un formulario en particular y generar un fichero que luego puede ser enviado a las autoridades.
Los impuestos para una localización determinada se instalan con módulos que extienden de este.

##### Configuración de declaraciones de impuestos

Para habilitar el uso del launcher de declaraciones de impuestos, se deben descargar e instalar los siguientes módulos:

- Tax Report Launcher
- Módulos individuales de informes para los informes de impuestos que se quieren utilizar.
- Módulos de códigos de transacción y de clave tributaria.

Cuando estos módulos están instalados, es necesario asociar los rangos de impuestos con los parámetros de las declaraciones de impuestos.

###### Códigos de transacción

Los códigos de transacción representan transacciones en las que se paga IVA. Por ejemplo, una compra de bienes. Hay dos códigos de transacción predeterminados en Etendo: E para transacciones de venta y A para transacciones de compra. Los códigos de transacción están en un módulo que se puede descargar y aplicar.

###### Claves y subclaves de impuestos

El sistema fiscal español designa un conjunto específico de letras para cada tipo de ingreso (por ejemplo, la P representa la renta de una propiedad alquilada). Las claves y subclaves de impuestos están en un módulo que se puede descargar y aplicar.

###### Asociar un rango de impuestos con un parámetro de impuestos

- Se realiza a partir de la ruta _Gestión Financiera > Contabilidad > Configuración > Rango Impuesto._
- En la vista de cuadrícula, se selecciona la tasa de impuestos que se desea asociar con un parámetro de impuestos.
- Se selecciona la pestaña “Parámetro de declaración”.
- En la lista de Parámetros del informe de impuestos, se debe seleccionar el parámetro que se desea asociar con la tasa de impuestos.
- Clic en “Guardar”.

###### Usar el Generador de Declaraciones de Impuestos para generar un informe

- Ruta: _Gestión Financiera > Contabilidad > Herramientas de análisis > Generador de declaraciones de impuestos_.
- Seleccionar de la lista de “Declaración de impuestos” cuál es el informe requerido.
- Seleccionar la organización para la cual se quiere generar el informe de impuestos. Para ello, la organización debe ser del tipo entidad legal con contabilidad.
- Seleccionar el esquema contable que se desea utilizar para el informe de impuestos. Se puede seleccionar el esquema de contabilidad propio de la organización o un esquema de contabilidad de una organización padre.
- Seleccionar un calendario. El sistema establece de forma predeterminada el calendario de la organización, pero se puede seleccionar cualquier otro. Esto es especialmente útil cuando el calendario de la organización no se basa en años naturales (de enero a diciembre), pero el informe requiere períodos y años naturales.
- En la lista “Año”, se debe seleccionar el año fiscal para el que se desea crear el informe.
- En la lista “Período”, se debe seleccionar el período para el que se desea crear el informe. Por ejemplo, si el informe se ha configurado para enviarse al final de cada trimestre, se puede seleccionar el trimestre correcto de la lista.
- Al hacer clic en “Parámetros de entrada”, aparece una ventana que muestra campos a completar con información necesaria para el informe. Los campos que aparecen dependen de la configuración del informe fiscal y deben ser completados.
- En el campo “Nombre de archivo” se asigna al informe un nombre de archivo.
- Click en “Generar archivo electrónico”.
- Aparece un mensaje que pregunta si desea ver o guardar el archivo. Tras seleccionar la opción “Guardar”, se debe especificar una ubicación de archivo.


#### Spanish Tax Module Improvements

:octicons-package-16: Javapackage: `org.openbravo.module.taximprovements.es`

:octicons-package-16: Javapackage: `org.openbravo.module.taximprovements.es_es`

Este módulo añade campos en la ventana de “Rango de impuestos” para mejorar la configuración y administración de los impuestos de España. Los campos añadidos son: Tipo de libro, Inversión de sujeto pasivo, Recargo de equivalencia e Impuesto intracomunitario.

- Tipo de Libro (“Tax Book Type”): El usuario puede configurar si un rango de impuesto debe ser reportado en la compra (recibido) o en la venta (enviado) del Libro de Facturas.
- Inversión de Sujeto Pasivo ("Reverse Charge"): El usuario puede seleccionar este check para indicar que un rango de impuesto es una tasa de impuesto de cargo inverso
- Recargo de equivalencia ("Equivalent Charge"): El usuario puede seleccionar este check para indicar que un rango de impuesto es un recargo de equivalencia.
- Impuesto Intracomunitario ("Intra Community Tax"): El usuario puede seleccionar este check para indicar que un rango de impuesto es intracomunitario.

#### Nueva versión del módulo de Impuestos de España

Este módulo incluye en los impuestos españoles el IGIC Canario y el IPSI aplicable en Ceuta y Melilla.

#### Condiciones de pago

:octicons-package-16: Javapackage: `org.openbravo.spanishdefaultdata.paymentterms`

Este módulo contiene las condiciones de pago más utilizadas en España. Entre ellas se incluyen el pago en "30 días", "60 días", "90 días", "120 días", "50% en el acto, resto 60 días", "20% a 10 días resto a 30 días" y "20% a 15 días, 40% a 30 días, resto a 60 días".

#### Chart of accounts: PGC 2007 General

:octicons-package-16: Javapackage: `org.openbravo.localization.spain.referencedata.accounts`

Este módulo añade el Plan de Cuentas General (Modelo Normal) conforme a los requerimientos vigentes en España.

Etendo puede configurarse para realizar la contabilidad en base a distintos esquemas contables.

El cuadro de cuentas define las cuentas contables y la estructura del balance de situación y de la cuenta de resultados. La estructura de la cuenta de resultados es de una sola columna. El cuadro de cuentas definido permite utilizar las cuentas contables y obtener la información del balance y la cuenta de resultados.

El Plan de Cuentas General tiene la siguiente estructura:

- Marco Conceptual de la Contabilidad
- Normas de registro y valoración
- Cuentas anuales
- Cuadro de cuentas
- Definiciones y relaciones contables

El Plan de Cuentas que añade este módulo es el que debe ser utilizado si una empresa cumple alguna de estas condiciones:

- El total de las partidas del activo de la empresa supera los dos millones ochocientos cincuenta mil euros.
- El importe neto de la cifra anual de negocios supera los cinco millones setecientos mil euros.
- El número medio de trabajadores empleados durante el ejercicio es superior a cincuenta.
- La empresa ha emitido valores admitidos a negociación en mercados regulados o sistemas multilaterales de negociación, de cualquier Estado miembro de la Unión Europea.
- Forma parte de un grupo de sociedades que formule o debiera haber formulado cuentas anuales consolidadas.
- La moneda funcional es distinta del euro.
- Se trata de una entidad financiera que capta fondos del público, asumiendo obligaciones respecto a los mismos.

#### Chart of accounts: PGC 2007 PYMEs

:octicons-package-16: Javapackage: `org.openbravo.localization.spain.referencedata.accounts.pymes`

Este módulo añade el Plan de Cuentas PYMES conforme a los requerimientos vigentes en España.

Etendo puede configurarse para realizar la contabilidad en base a distintos esquemas contables.

El cuadro de cuentas define las cuentas contables y la estructura del balance de situación y de la cuenta de resultados. La estructura de la cuenta de resultados es de una sola columna. El cuadro de cuentas definido permite utilizar las cuentas contables y obtener la información del balance y la cuenta de resultados.

El Plan de Cuentas que añade este módulo es el utilizado por las pequeñas y medianas empresas en España. Tiene la siguiente estructura:

- Marco Conceptual de la Contabilidad
- Normas de registro y valoración
- Cuentas anuales
- Cuadro de cuentas
- Definiciones y relaciones contables

#### Professional Localization pack Spain (España)

Este módulo ofrece a las empresas españolas un set de módulos que adaptan Etendo a los requerimientos comerciales de España, permitiendo realizar procesos de manera rápida y eficaz. Incluye una gestión avanzada de cuentas a cobrar y a pagar.

#### Localization pack Spain (España)

:octicons-package-16: Javapackage: `org.openbravo.localization.spain30`

Este módulo ofrece a las empresas españolas un set de módulos que adaptan Etendo a los requerimientos comerciales de España, permitiendo realizar procesos de manera rápida y eficaz.

#### Traducción al español del módulo 'Default Jobs'

:octicons-package-16: Javapackage: `com.smf.jobs.defaults.es_es`

#### JSON Datasource Translation: Spanish Spain (es_ES)

:octicons-package-16: Javapackage: `org.openbravo.service.datasource.es_es`

#### Workspace & Widgets Translation: Spanish Spain (es_ES)

:octicons-package-16: Javapackage: `org.openbravo.client.myob.es_es`

#### User Interface Selector Translation: Spanish Spain (es_ES)

:octicons-package-16: Javapackage: `org.openbravo.userinterface.selector.es_es`

#### Traducción al Español del módulo Payment Report

:octicons-package-16: Javapackage: `org.openbravo.financial.paymentreport.es_es`

#### Number To Word

:octicons-package-16: Javapackage: `org.openbravo.numbertoword`

:octicons-package-16: Javapackage: `org.openbravo.numbertoword_es`

:octicons-package-16: Javapackage: `org.openbravo.numbertoword.es_es`

#### User Interface Client Kernel Translation Spanish Spain(esES)

:octicons-package-16: Javapackage: `org.openbravo.client.kernel.es_es`

#### Translation: Spanish-Spain (es_ES) español-España

:octicons-package-16: Javapackage: `org.openbravo.localization.spain.referencedata.translation.esES`

#### Openbravo Multi Business Partner Selector

:octicons-package-16: Javapackage: `org.openbravo.utility.multiplebpselector`

:octicons-package-16: Javapackage: `org.openbravo.utility.multiplebpselector.es_es`

#### Orders Awaiting Delivery Spanish (Spain) Translation

:octicons-package-16: Javapackage: `org.openbravo.reports.ordersawaitingdelivery.es_es`

#### Smartclient Translation: Spanish Spain (es_ES)

:octicons-package-16: Javapackage: `org.openbravo.userinterface.smartclient.es_es`

#### Query/List Widget Translation Spanish Spain (es_ES)

:octicons-package-16: Javapackage: `org.openbravo.client.querylist.es_es`

#### Widgets Collection Translation Spanish Spain (es_ES)

:octicons-package-16: Javapackage: `org.openbravo.client.widgets.es_es`

#### Advanced Payables and Receivables - Spanish Translation

:octicons-package-16: Javapackage: `org.openbravo.advpaymentmngt.es_es`

#### User Interface Application Translation Spanish Spain (es_ES)

:octicons-package-16: Javapackage: `org.openbravo.client.application.es_es`

#### Alerts: Accounting

:octicons-package-16: Javapackage: `org.openbravo.alerts.accounting30`

:octicons-package-16: Javapackage: `org.openbravo.alerts.accounting30.es_es`

#### SOAP with Attachments API for Java Implementation

:octicons-package-16: Javapackage: `org.openbravo.util.saaj.impl`

#### Payment Method Type

:octicons-package-16: Javapackage: `org.openbravo.module.paymentmethod.type`

#### Javax XML SOAP API

:octicons-package-16: Javapackage: `org.openbravo.util.javax.xml.soap`

#### HTML Widget Translation Spanish Spain (es_ES)

:octicons-package-16: Javapackage: `org.openbravo.client.htmlwidget.es_es`

#### OpenID Service Integration Translation Spanish Spain

:octicons-package-16: Javapackage: `org.openbravo.service.integration.openid.es_es`

#### Integration with Google APIs Translation Spanish Spain

:octicons-package-16: Javapackage: `org.openbravo.service.integration.google.es_es`

#### Openbravo 3.0 Translation Pack: Spanish Spain (es_ES)

:octicons-package-16: Javapackage: `org.openbravo.v3.translation.pack.es_es`

#### TicketBai y Batuz

:octicons-package-16: Javapackage: `com.smf.ticketbai`

Este módulo permite cumplir con las normativas fiscales del País Vasco, automatizando el proceso de emisión, firma electrónica y envío de facturas a la hacienda foral de Gipuzkoa y Bizkaia. A través de este sistema, se garantiza la trazabilidad y autenticidad de las facturas, permitiendo su envío en tiempo real y asegurando el cumplimiento fiscal.

!!! info
    Para más información, visite la [Guía de usuario TicketBai y Batuz](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/ticketbai-batuz.md).
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Configuración de Impuestos para Libro de Facturas
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Spanish Localization Bundle/Configuración de Impuestos para Libro de Facturas
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/configuracion-de-impuestos-para-libro-de-facturas
## Article Content: 
#### Javapackages 

:octicons-package-16: Javapackage: `org.openbravo.module.invoicesregisterbook.estaxes`

#### **Introducción**

Esta sección contiene información sobre la configuración de impuestos de los libros de facturas que forman parte del bundle de Localización española de Etendo.

#### **Instalación**

El usuario debe instalar este módulo y posteriormente aplicar el conjunto de datos o "Datos de Referencia" en la ruta de aplicación: Configuración General / Organización/ Gestión del Módulo de Empresa a la organización que corresponda.

![](https://docs.etendo.software/latest/assets/drive/gGO4D4W1ZWtJV0sluU-2ESwmVQA8_vykqX_CABOqxU9WSAqeKQS42g46yOcZnVDpMG4qUHJO0XGnn1zvcHzKOVcgHMDFEXB3MwaBeyDOPZTwYEH1wdYWTPub9sLhcOcrko6PuYvIyNryJYZoi2dUxKIV9hFEXNlZ5DYtYyYTJ1663ViYtA-aKGEy9XXLYg.png)

Una vez instalado y aplicado este módulo, se puede comprobar la configuración de los libros en la ruta de aplicación: Gestión financiera/ Contabilidad/ Configuración/ Configuración de Libros de Facturas, tal y como se muestra en la siguiente imagen:

![](https://docs.etendo.software/latest/assets/drive/jKTQzqVFoz7dxq2qJS-Q2ECPksUf8UxYrLmeKDGG4NFGeQSxG96b-vbxqpaQb71UWuFBFscdPLSXXjD6dIqHoBB-3mCoOypQBeADb8AONAYOjD5Lu-MGfk1njsbQMJ2C3Cp-V18LcZpTZIpJTBZQ4X9b2dEEj-9nzmnM3FceUIHW3hdlgfFtLRx_S-4hYg.png)

Es importante recalcar, que la configuración que se incluye en este dataset, relaciona tipos/rangos de impuesto con el tipo de documento estándar de Etendo (AP Invoice, AR Invoice, etc) a incluir en el correspondiente libro (facturas recibidas o facturas emitidas).

Si se crean nuevos tipos de documento de factura de compra o venta, tendrá que incluirse de forma manual en la configuración de cada libro, relacionados con los impuestos de compra o venta correspondientes.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Impuestos para España
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Spanish Localization Bundle/Impuestos para España
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/impuestos-para-españa
## Article Content: 
#### Javapackages 

:octicons-package-16: Javapackage: `org.openbravo.localization.spain.referencedata.taxes`

#### **Introducción**

El módulo de impuestos para España es un conjunto de datos que contiene:

-   "Categorías de Impuestos" para IVA, IGIC e IPSI
-   "Categorías de Impuestos de Terceros"
-   "Rangos de Impuestos"

configurados con el objetivo de que los usuarios de Etendo puedan gestionar:

-   el IVA Nacional
-   el IVA Intracomunitario
-   el IVA de Importación/Exportación
-   las retenciones de IRPF, "Impuesto sobre la Renta de las Personas Físicas" más comúnmente utilizados en el España
-   así como el IGIC, "Impuesto General Indirecto Canario" de aplicación en Canarias y el IPSI, "Impuesto sobre la Producción, los Servicios y la Importación" de aplicación en Ceuta y Melilla.

Es importante tener en cuenta que en el caso del:

-   **IVA Nacional**, los rangos de impuestos están asociados a España como país de origen y destino, España inlcuye "Península y Baleares".
-   **IVA Intracomunitario**:
    -   los rangos de impuestos de venta o entregas intracomunitarias exentas, están asociados a España como país de origen y países de la UE como país de destino.
    -   los rangos de impuestos de compra o adquisiciones intracomunitarias, están asociados a países de la UE como país de origen y España como país de destino.
-   **IVA de Importación/Exportación**:
    -   los rangos de impuestos de venta o exportaciones exentas, están asociados a España como país de origen y terceros países como país de destino.
    -   los rangos de impuestos de importaciones, están asociados a terceros países como país de origen y España como país de destino.
-   **IGIC**, los rangos de impuestos están asociados a Canarias como región de origen/destino según aplique.
-   **IPSI**, los rangos de impuestos están asociados a Ceuta y Melilla como región de origen/destino según aplique.

Por tanto:

-   Si su organización se localiza en Península y Baleares, sus productos/servicios tiene que estar asociados a las categorías de impuesto de IVA
-   Si su organización se localiza en Canarias, Ceuta o Melilla, sus productos/servicios tienen que estar asociados a las categorías de impuesto de IGIC o IPSI

Es importante recalcar que la configuración de impuestos para España, no incluye impuestos de "IVA Nacional" de otros países miembros de la UE como "IVA Nacional de Italia" o "Francia", para las ventas que excediendo el límite requerido deban liquidarse en el país de Europa que aplique.

#### **Instalación del Módulo**

Para la instalación del módulo de Impuestos para España, el usuario debe seguir los pasos que se describen a continuación en función de la situación de partida:

-   Instalación de la última versión disponible de Etendo 
-   o la instalación del módulo de Localización Española.

!!! info
    Para la instalación del módulo de Localización Española, visite [_Marketplace_](https://marketplace.etendo.cloud/#/product-details?module=003B475055DD421B9483B5BE15AA48C5){target="_blank"}. 


#### **Aplicación del Módulo**

Es importante recalcar que una vez instalado el módulo de impuestos, los "Datos de referencia" que incluye deben aplicarse en la ruta de aplicación "Gestión del Módulo de Empresa".

Los datos se pueden aplicar:

-   a nivel de organización (\*) si se quiere conseguir que todas las organizaciones del cliente utilicen el mismo conjunto de datos o tipos impositivos
-   o bien se pueden aplicar a una organización en concreto o a varias.

#### **Impuestos para España**

A continuación, se encuentran los impuestos disponibles en el conjunto de datos de este módulo.


- Adquisiciones IVA 0%
- Adquisiciones IVA 0+RE 0+0%
- Adquisiciones IVA+RE 21+1.75%
- Adquisiciones IVA+RE 5+0.62%
- Adquisiciones intracomunitarias 5%
- Entregas IVA 0%
- Entregas IVA 0+RE 0+0%
- Entregas IVA 5%
- Entregas IVA+RE 21+1.75%
- Entregas IVA+RE 5+0.62% 
- Servicios prestados 0%
- Prestación servicios nacional 5%
- Servicios prestados nacional 5%
- Adquisiciones IGIC 15%
- Adquisiciones IGIC 7%
- Adquisiciones IGIC Implícito 70% s15%
- Adquisiciones IGIC Implícito 70% s7%
- Arrendamientos en Canarias 7%
- Arrendamientos en Canarias 7% -19%R (pagos)
- Arrendamientos en Canarias 7% -21%R (pagos)
- Entregas IGIC 15%
- Entregas IGIC 7%
- Prestación servicios en Canarias 15%
- Prestación servicios en Canarias 7%
- Prestación servicios en Canarias 7% -15%R
- Prestación servicios en Canarias 7% -19%R
- Prestación servicios en Canarias 7% -21%R
- Servicios prestados en Canarias 15%
- Servicios prestados en Canarias 7%
- Adquisiciones IGIC 6.5%
- Adquisiciones IGIC Implícito 70% s6.5%
- Arrendamientos en Canarias 6.5%
- Arrendamientos en Canarias 6.5% -19%R (pagos)
- Arrendamientos en Canarias 6.5% -21%R (pagos)
- Entregas IGIC 6.5%
- Prestación servicios en Canarias 6.5%
- Prestación servicios en Canarias 6.5% -15%R
- Prestación servicios en Canarias 6.5% -19%R
- Prestación servicios en Canarias 6.5% -21%R
- Servicios prestados en Canarias 6.5%
- Adquisiciones IGIC Implícito 70% s13.5%
- Adquisiciones IGIC Implícito 70% s3%
- Adquisiciones IGIC Implícito 70% s9.5%
- Entregas IGIC Exentas
- Entregas IGIC Tipo 0%
- No declarable gastos de empleado
- Adquisiciones REBU Exentas
- Arrendamientos 0% - 19%R (cobros)
- Arrendamientos 0% - 19%R (pagos)
- Arrendamientos 21% -19%R (cobros)
- Arrendamientos 21% -19%R (pagos)
- Arrendamientos en Guipúzcoa 21% - 19%R (pagos)
- Arrendamientos en Navarra 21% - 19%R (pagos)
- Compensación REAGYP 10.5% -2%R (sobre BI) SR
- Compensación REAGYP 12% -2%R (sobre BI) SR
- Compensación REAGYP 12% -2%R (sobre bruto) SR
- Intereses 0% -19%R
- Prestación servicios agencias publicidad 21% -24%R
- Prestación servicios en Canarias 0%
- Prestación servicios en Canarias 0% -7%R
- Prestación servicios nacional 0% -24%R
- Prestación servicios nacional 21% -24%R
- Prestación servicios no residente 0% -19%R
- Servicios prestados nacional 21%-24%R
- Arrendamientos 0% -19,5%R (cobros)
- Arrendamientos 0% -19,5%R (pagos)
- Arrendamientos 21% -19,5%R (cobros)
- Arrendamientos 21% -19,5%R (pagos)
- Prestación servicios Bienes Inversión 21% -15%R
- Prestación servicios Bienes Inversión 21%-7%R
- Prestación servicios en Canarias 0% -15%R
- Prestación servicios en Ceuta/Melilla 0%-7.5%R
- Prestación servicios en Ceuta/Melilla 4% -3,5%R
- Prestación servicios en Ceuta/Melilla 4% -7,5%R
- Prestación servicios nacional 0% -7%R
- Prestación servicios nacional 10% -15%R
- Prestación servicios nacional 10% -7%R
- Prestación servicios nacional 21% -15%R
- Prestación servicios nacional 21% -7%R
- Prestación servicios profesionales nacional 0% -15%R
- Servicios prestados nacional 21% -15%R
- Servicios prestados nacional 21% -7%R
- Entregas a Canarias, Ceuta y Melilla (%N=>0%) ISP
- Entregas sin IVA por ISP
- Entregas sin IVA por ISP con RE
- Inversión Sujeto Pasivo Nacional 21%
- Arrendamientos 0% -20%R (cobros)
- Arrendamientos 0% -20%R (pagos)
- Arrendamientos 21% -20%R (cobros)
- Arrendamientos 21% -20%R (pagos)
- Inversión Sujeto Pasivo no UE 21% -24%R
- Inversión Sujeto Pasivo no UE 21% -7%R
- Prestación servicios divulgación nacional 0% -15%R
- Prestación servicios en Ceuta/Melilla 0% -9.5%R
- Prestación servicios en Ceuta/Melilla 4% -9,5%R
- Prestación servicios nacional 0% -19%R
- Prestación servicios nacional 21% -19%R
- Servicios prestados nacional 21% -19%R
- Prestación servicios nacional 21% -15%R RDL
- Exenciones relativas a regímenes aduaneros y fiscales
- No declarable devoluciones de cliente
- Adquisiciones IVA 10%
- Adquisiciones IVA 10% -2%R
- Adquisiciones IVA 21%
- Adquisiciones IVA 4% -2%R
- Adquisiciones IVA+RE 10+1.4% 
- Adquisiciones IVA+RE 21+5.2%
- Adquisiciones Intracomunitarias 21% ISP
- Adquisiciones a Canarias,Ceuta y Melilla 10%
- Adquisiciones a Canarias,Ceuta y Melilla 21%
- Adquisiciones bienes inversión 10%
- Adquisiciones intracomunitarias 10%
- Adquisiciones intracomunitarias 21%
- Adquisiciones intracomunitarias Bienes Inversión 21%
- Adquisiciones intracomunitarias exentas
- Adquisición B.Inmuebles 10%
- Adquisición B.Inmuebles 21%
- Adquisición Bienes Inversión 21%
- Adquisición Bienes Inversión 21% -1%R
- Arrendamiento 21% (cobros)
- Arrendamiento 21% (pagos)
- Arrendamientos 0% -21%R (cobros)
- Arrendamientos 0% -21%R (pagos)
- Arrendamientos 21% -21%R (cobros)
- Arrendamientos 21% -21%R (pagos)
- Arrendamientos 21% -24%R (pagos). No Residentes
- Arrendamientos en Guipúzcoa 21%-10%R (pagos)
- Arrendamientos en Navarra 21% -20%R (pagos)
- Entregas Bienes Inversión 21%
- Entregas IVA 10%
- Entregas IVA 10% Revendedores
- Entregas IVA 21%
- Entregas IVA 21% ISP
- Entregas IVA 21% Revendedores
- Entregas IVA+RE 10+1.4% 
- Entregas IVA+RE 21+5.2% 
- Entregas IVA+RE 21+5.2% ISP
- Entregas IVA+RE 21+5.2% IVA Normal ISP
- Importaciones 10%
- Importaciones 10%=0%
- Importaciones 21%
- Importaciones 21% ISP
- Importaciones 21%=0%
- Importaciones 21%=0% ISP
- Importaciones Bienes Inversión 21%
- Importaciones Bienes Inversión 21%=0%
- Inversión Sujeto Pasivo UE 10%
- Inversión Sujeto Pasivo UE 21%
- Inversión Sujeto Pasivo UE exento
- Inversión Sujeto Pasivo no UE 10%
- Inversión Sujeto Pasivo no UE 21%
- Inversión Sujeto Pasivo no UE 21% -24.75%R
- Inversión Sujeto Pasivo no UE exento
- Prestación servicios nacional 0% -21%R
- Prestación servicios nacional 0% -9%R
- Prestación servicios nacional 10% 
- Prestación servicios nacional 10% -9%R
- Prestación servicios nacional 21% 
- Prestación servicios nacional 21% -1%R
- Prestación servicios nacional 21% -21%R
- Prestación servicios nacional 21% -9%R
- Prestación servicios nacional 4% - 9%R
- Servicios prestados nacional 10%
- Servicios prestados nacional 21%
- Servicios prestados nacional 21% -21%R
- Servicios prestados nacional 21% -9%R
- Transmisión B.Inmuebles 10%
- Transmisión B.Inmuebles 21%
- Adquisiciones IGIC 0%
- Adquisiciones IGIC 13.5%
- Adquisiciones IGIC 3%
- Adquisiciones IGIC 9.5%
- Adquisiciones IPSI 10%
- Adquisiciones IPSI 4%
- Entregas IGIC 13.5%
- Entregas IGIC 3%
- Entregas IGIC 9.5%
- Entregas IPSI 10%
- Entregas IPSI 4%
- Prestación servicios en Canarias 13.5%
- Prestación servicios en Canarias 3%
- Prestación servicios en Canarias 3% -21%R
- Prestación servicios en Canarias 9.5%
- Prestación servicios en Ceuta/Melilla 0%
- Prestación servicios en Ceuta/Melilla 10%
- Prestación servicios en Ceuta/Melilla 4%
- Prestación servicios en Ceuta/Melilla 4% -10,5%R
- Prestación servicios en Ceuta/Melilla 4% -4,5%R
- Prestación servicios exenta por suplido
- Servicios prestados en Canarias 13.5%
- Servicios prestados en Canarias 3%
- Servicios prestados en Canarias 9.5%
- Servicios prestados en Ceuta/Melilla 10%
- Servicios prestados en Ceuta/Melilla 4%
- Arrendamientos 18% -21%R (cobros)
- Arrendamientos 18% -21%R (pagos)
- Adquisiciones IVA 18%
- Adquisiciones IVA 8%
- Adquisiciones IVA+RE 18+4%
- Adquisiciones IVA+RE 8+1% 
- Adquisiciones a Canarias,Ceuta y Melilla 18%
- Adquisiciones a Canarias,Ceuta y Melilla 8%
- Adquisiciones intracomunitarias 18%
- Adquisiciones intracomunitarias 8%
- Adquisiciones intracomunitarias Bienes Inversión 18%
- Adquisición B.Inmuebles 18%
- Adquisición B.Inmuebles 8%
- Adquisición Bienes Inversión 18%
- Arrendamiento 18% (cobros)
- Arrendamiento 18% (pagos)
- Arrendamientos 18% -19%R (cobros)
- Arrendamientos 18% -19%R (pagos)
- Entregas Bienes Inversión 18%
- Entregas IVA 18%
- Entregas IVA 8%
- Entregas IVA+RE 18+4% 
- Entregas IVA+RE 8+1% 
- Entregas intracomunitarias Bienes Inversión (%N=>0%)
- Exportaciones Bienes Inversión (%N=>0%)
- Importaciones 18%
- Importaciones 18%=0%
- Importaciones 8%
- Importaciones 8%=0%
- Importaciones Bienes Inversión 18%
- Importaciones Bienes Inversión 18%=0%
- Inversión Sujeto Pasivo UE 18%
- Inversión Sujeto Pasivo UE 8%
- Inversión Sujeto Pasivo no UE 18%
- Inversión Sujeto Pasivo no UE 8%
- Prestación servicios nacional 18% 
- Prestación servicios nacional 18% -1%R
- Prestación servicios nacional 18% -15%R
- Prestación servicios nacional 18% -7%R
- Prestación servicios nacional 8% 
- Servicios prestados nacional 18%
- Servicios prestados nacional 18% -15%R
- Servicios prestados nacional 18% -7%R
- Servicios prestados nacional 8%
- Transmisión B.Inmuebles 18%
- Transmisión B.Inmuebles 8%
- Arrendamientos 16% -19%R (cobros)
- Arrendamientos 16% -19%R (pagos)
- Inversión Sujeto Pasivo no UE 16%
- Prestación servicios en Canarias 5%
- Adquisiciones intracomunitarias 7%
- Adquisiciones a Canarias,Ceuta y Melilla 16%
- Adquisiciones a Canarias,Ceuta y Melilla 4%
- Adquisiciones a Canarias,Ceuta y Melilla 7%
- Adquisiciones interiores exentas (art 22)
- Adquisiciones no sujetas
- Adquisición B.Inmuebles 16%
- Adquisición B.Inmuebles 7%
- Arrendamiento 16% (cobros)
- Arrendamiento 16% (pagos)
- Arrendamientos 16% -18%R (cobros)
- Arrendamientos 16% -18%R (pagos)
- Entregas a Canarias,Ceuta y Melilla (%N=>0%)
- Entregas a Canarias,Ceuta y Melilla (%R=>0%)
- Entregas a Canarias,Ceuta y Melilla (%SR=>0%)
- Entregas no sujetas con dcho deducción
- Importaciones 16%
- Importaciones 16%=0%
- Importaciones 4%
- Importaciones 4%=0%
- Importaciones 7%
- Importaciones 7%=0%
- Importaciones exentas
- Inversión Sujeto Pasivo UE 16%
- Inversión Sujeto Pasivo UE 7%
- Inversión Sujeto Pasivo no UE 7% 
- Prestación servicios interiores exentos (art 20)
- Prestación servicios interiores exentos (art 22)
- Prestación servicios nacional 16% 
- Prestación servicios nacional 16% -15%R
- Prestación servicios nacional 16% -7%R
- Prestación servicios nacional 4%
- Prestación servicios nacional 7%
- Servicios prestados UE (%N=>0%)
- Servicios prestados UE (%R=>0%)
- Servicios prestados exentos sin derecho a deducción
- Servicios prestados internacional (%N=>0%)
- Servicios prestados internacional (%R=>0%)
- Servicios prestados nacional 16%
- Servicios prestados nacional 16% -15%R
- Servicios prestados nacional 16% -7%R
- Servicios prestados nacional 4%
- Servicios prestados nacional 7%
- Servicios prestados no sujetos con dcho deducción
- Transmisión B.Inmuebles 16%
- Transmisión B.Inmuebles 7%
- Adquisiciones IVA 16%
- Adquisiciones IVA 4%
- Adquisiciones IVA 7% 
- Adquisiciones IVA+RE 16+4%
- Adquisiciones IVA+RE 4+0,5% 
- Adquisiciones IVA+RE 7+1% 
- Adquisiciones interiores exentas (art 20)
- Adquisiciones intracomunitarias 16%
- Adquisiciones intracomunitarias 4%
- Entregas Exentas
- Entregas IVA 16%
- Entregas IVA 4%
- Entregas IVA 4% Revendedores
- Entregas IVA 7% 
- Entregas IVA+RE 16+4% 
- Entregas IVA+RE 4+0,5% 
- Entregas IVA+RE 7+1% 
- Entregas intracomunitarias (%N=>0%)
- Entregas intracomunitarias (%N=>0%) ISP
- Entregas intracomunitarias (%R=>0%)
- Entregas intracomunitarias (%SR=>0%)
- Exportaciones (%N=>0%)
- Exportaciones (%N=>0%) ISP
- Exportaciones (%R=>0%)
- Exportaciones (%SR=>0%)
- Prestación servicios no sujetas
- Servicios a Canarias, Ceuta y Melilla (%N=>0%)
- Servicios a Canarias, Ceuta y Melilla (%R=>0%)
- Servicios a Canarias, Ceuta y Melilla (%SR=>0%)
- Servicios prestados exentos con derecho a deducción

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Intrastat
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Spanish Localization Bundle/Intrastat
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/intrastat
## Article Content: 
#### Javapackages

:octicons-package-16: Javapackage: `org.openbravo.module.intrastat` <br>
:octicons-package-16: Javapackage: `org.openbravo.module.intrastat.spain` <br>
:octicons-package-16: Javapackage: `org.openbravo.module.intrastat.es.es`

#### Introducción

Esta sección describe el módulo disponible de Etendo para la generación y presentación del informe oficial de Intrastat.

El informe Intrastat se debe presentar a las autoridades mensualmente, dentro de los 12 días posteriores al mes en el que se realizaron las transacciones.

La declaración de Intrastat se debe enviar telemáticamente (a través Internet) en un fichero válido con un determinado formato específico de cada país.

#### Descripción de los Módulos

A continuación, se listan los diferentes **módulos** sobre los que se desarrolla la funcionalidad de Intrastat:

-   **Intrastat.** Este módulo proporciona la infraestructura necesaria que permite la configuración, ejecución y generación del fichero de Intrastat. Si sólo instala este módulo, Etendo será capaz de reconocer todas las transacciones que formarán parte del fichero de Intrastat.

Éste es un módulo del que dependen el resto de módulos de Intrastat, proporciona la funcionalidad genérica para los países de la Unión Europea. Sin embargo, tenga en cuenta que cada país de la UE tiene sus propias peculiaridades, y este módulo es incapaz de conocerlas y manejarlas él sólo. Por este motivo, es posible que necesite instalar además el módulo de Intrastat concreto para su país, que será el que proporcione las peculiaridades propias de su país.

-   **Intrastat for Spain (Intrastat para España).** Este módulo complementa al módulo anterior y proporciona las características específicas para España, como por ejemplo:
    -   Excluye las transacciones que tienen como origen o destino las Islas Canarias (como requiere la ley)
    -   Genera un fichero de Intrastat con el formato oficial listo para ser enviado mensualmente a las Autoridades.
-   **Intrastat – Spanish Translation (Intrastat - Traducción al español).** Añade la traducción al español (España) del módulo Intrastat.

Además de los módulos anteriores, necesitará instalar las siguientes dependencias obligatorias:

-   **Incoterms.** Añade la lista de Incoterms oficiales (Condiciones de Entrega) a su instalación de Etendo
-   **European Union Countries.** Añade la lista de países miembros de la Unión Europea a su instalación de Etendo
-   **Provincias de España.** Añade la lista de provincias españolas a su instalación de Etendo

Todas estas dependencias se instalarán automáticamente al instalar los módulos de Intrastat, por lo que no tendrá que hacerse manualmente.

#### **Instalación de los módulos**

Para la instalación del módulo “Modelo AEAT 349 - Declaración recapitulativa de operaciones intracomunitarias”, el usuario debe seguir los pasos que se describen a continuación en función de la situación de partida:

-   Instalación de la última versión disponible de Etendo
-   o la instalación del módulo de Localización Española.

!!! info
    Para la instalación del módulo de Localización Española, visite [*Marketplace*](https://marketplace.etendo.cloud/#/product-details?module=003B475055DD421B9483B5BE15AA48C5){target="_blank"}. 


!!! info
    **Nota importante**: Las transacciones realizadas con anterioridad a la instalación del módulo *“Intrastat”* no se tendrán en cuenta a la hora de generar las declaraciones de Intrastat.


Tenga en cuenta que, como es lógico, el sistema solo es capaz de reconocer las transacciones a incluir en el informe de Intrastat desde el momento que se instala y configura dicha funcionalidad en Etendo.

##### **Aplicación de los Datasets (Conjuntos de datos)**

Una vez instalado el módulo, se deberán aplicar los datasets incluidos a su instalación.

Si está realizando la configuración inicial de Etendo, puede utilizar el proceso “Crear Organización” para aplicar estos datos.

Si, por el contrario, está instalando estos módulos en un sistema en productivo, deberá aplicar los datasets desde la ventana Configuración General | Organización | Gestión del módulo de Empresa  |  Gestión del módulo de Empresa:

![](https://docs.etendo.software/latest/assets/drive/9E8pdSDAB1cQjG039Rhp_c3Z-XDg2LC-1tnuokHzaQ6MVZ1TTuM5YTyX1q0-wYHGGRAH0OtCyMQ6uICIwQHcHfwz7sBTqVtvAKlc6SSyZGiCuCAJhZ8bsQt9m3qLT4Eiw3mR4XSTNY01hZtqqw9IwQKG9zaQzBnRd89An6VyGUsO7DNXkQl1Q19l9A.png)

Seleccione los datos de referencia “Incoterms” e “Intrastat for Spain” y aplíquelos a su organización de nivel de agrupación o a su entidad legal dependiendo de su árbol de organizaciones.

Si el proceso se ha ejecutado correctamente, el sistema debería mostrar la siguiente información:

![](https://docs.etendo.software/latest/assets/drive/WFgwGX-k5cQwljyb0pvetphDd1B4qebt3L2mRNX9o2MhfjH5nTqVpG9O4TUCMwn6NJ1cK1bfQhtosDVfnjno3suZce-SgBk9JC9aZgaRntutQfEf7cc5GLPaBmCSu_L29LYfA3n-g6DMfo8M-NnfKSZnQ8TDR6o3VoM1Y9W75yEjs4v_2POlWyUEpA.png)

#### **Interfaz de Usuario**

El módulo “Intrastat” proporciona campos, ventanas y solapas necesarios para la configuración y generación de la declaración de Intrastat.

A continuación se muestran unas capturas de pantalla de estos elementos junto a una breve descripción de cada uno de ellos.

######## **Gestión de Datos Maestros | Producto  |  Producto  >>  Intrastat**

![](https://docs.etendo.software/latest/assets/drive/G5Llm2flNrOzJt-k1_SvtgklRXnnQtgz0wyBL4ouCXVxOoe30GaKqSgN5KgrXlgH21xq0_T0EUyZlwpaGQgjhcLP8cpt1HqqiAK9EGzkjzgcObg1bTkeIMUdoTtcM7WbTd0oTcgVEi4iAQdWhJ76AyrmUSnh2bw8Zo0tU15gL3AYtIFQr1wMBybNXA.png)

Las transacciones entre países de la UE que incluyan productos de tipo Artículo se deben registrar en la declaración de Intrastat. Cada uno de los productos tiene asociado un código de mercancía obligatorio y una masa neta en Kg (por unidad de facturación). Opcionalmente, y siempre dependiendo del producto, se puede configurar una unidad de medida suplementaria junto a su correspondiente conversión.

En esta solapa, el usuario debe configurar los datos particulares de cada producto.

######## **Gestión de Datos Maestros | Terceros  |  Terceros  >>  Cliente  >>  Envíos de Intrastat y Gestión de Datos Maestros | Terceros  | Terceros  >>  Proveedor/Acreedor  >>  Adquisiciones de Intrastat**

![](https://docs.etendo.software/latest/assets/drive/7azhjfSW95mKDO_Umt-b50nUiixohLlwZ1zx_oZKMbNAO7R79nOk7oMsT2Rq-iOC-rY16uPaSnyHXz5_5bwULKS1eSqn7bmhL85Um2Qs-f_RNafxL9RFYkcEXvV_l-7QVXpWVGjPDbIghA2hw-mXyPncKMBU1GIqXCrUt8KkoklL6WlVFouQKsXX8A.png)

Cada tercero con el que trabaje, ya sea cliente o proveedor, tendrá su propia configuración para Intrastat por defecto. Por ejemplo, es posible que su proveedor siempre le envíe la mercancía mediante un medio de transporte determinado.

Desde esta solapa el usuario tiene la oportunidad de configurar esos valores por defecto de cada tercero. El sistema siempre recuperará la información configurada aquí y la utilizará para generar la declaración de Intrastat.

Sin embargo, es posible que en alguna transacción en particular, la modalidad de transporte varíe de la que tiene configurada por defecto en esta ventana. Si éste es el caso, el usuario siempre tiene la oportunidad de cambiar manualmente esta información a nivel de transacción o de declaración de Intrastat como veremos más adelante en este manual.

######## **Gestión de Datos Maestros | Terceros  |  Terceros  >>  Cliente y Gestión de Datos Maestros | Terceros  |  Terceros  >>  Proveedor/Acreedor, campo Incoterms**

![](https://docs.etendo.software/latest/assets/drive/FxL2ss3KNP9of-xib9m4PqSBvMrXhhFCKBFlFLq06LGNxkxNzb2A0R55NPFpGogVFQ6Zc9ztwL-EjSxQYPAZTkDgpbCN-Unh4iJGItzb1np0W0YBfO6_PiM-PSbp20vpW5T38UEp2vXdogNtyh-osvVMoIUHGJDlSf4HDqNXCsD2YbFUGULEr1gW0A.png)

El campo Incoterms permite definir el Incoterm (Condición de Entrega) por defecto para el tercero. Es importante tener en cuenta que se pueden configurar dos Incoterms para el tercero, uno cuando el tercero es cliente y otro cuando es proveedor.

!!! info
    El campo "Incoterms" del Tercero, es un campo de Etendo que no se muestra por defecto, pero si se utiliza en los módulos de Intrastat. Recuerde mostrarlo si lo va a utilizar.


######## **Gestión Financiera | Contabilidad | Configuración | Tipo de documento  |  Definición de documento**

![](https://docs.etendo.software/latest/assets/drive/IoUclg9rhO_Gqhw_0FuLoJa54gQjUysOPDNlGgbwsbczidBrKgSlXDVgV06YLVDXTwMPbgeJ041zklsHvsDQKu0lhSTvKh3uI3TPmCeYv4qY466B-at_lMNxdR24jh40VhYtkBzLxGKGPkQIFVHGJSLZfwjDeImzQu1key6CJmHNBTfZEDth6QQCeg.png)

Los campos *Tipo de Transacción* y *Regimén estadístico* van asociados al tipo de documento (facturas). En esta ventana puede definir los valores por defecto que, al igual que sucedía con los valores de Intrastat para Producto o Tercero, pueden ser sobrescritos para transacciones o declaraciones de Intrastat en concreto.

######## **Configuración General | Organización | Organización | Organización, campo Calendario de Intrastat**

![](https://docs.etendo.software/latest/assets/drive/mVJ1pyaJF0A0_AhDbNggeRZnZvxKq2pl9cs7i7n-0TuQfxS-sucLH8Dj83qvRSIDnttYFzgSMZK5LRnWS5n5Wp6liQUUZnaOeJfKjfHFFm7q5eFQ68kpmuLi_V-SI8N2d28S3lOfQfGwc6Rhq-U_RROZKyUL9fmjd9LM_xCuM2H3pzd__651wvaibg.png)

El campo *Calendario de Intrastat* define el calendario de declaraciones de Intrastat. En España, el Intrastat se debe presentar mensualmente, por lo que el calendario de Intrastat seleccionado debe tener doce periodos que coincidan con los dos meses naturales de un año. Si su calendario fiscal cumple esas condiciones, puede usarlo también como calendario de Intrastat sin necesidad de crear uno nuevo.

En este nuevo campo, sólo aparecerán los calendarios que estén marcados como *“Calendario de Intrastat”* en la configuración del calendario:

![](https://docs.etendo.software/latest/assets/drive/bO3u93UFfmKU1W9mLFKYj-ZbmYv8cKLtPjLvC-yacQkkRXAfcnGz3HeIrfsjW08XXL8iBOP656gydvYIYVKSIthvyYK8IEsipoh7XADziIBF77qqffJlwOH11cgdPlb0tWT9wCtR11_P3CSWWbkOUracp5Ui3Ul0irS50FTaDLewU1rdVdJ1TEVmMg.png)

######## **Configuración General | Organización | Organización  |  Organización  >>  Intrastat**

![](https://docs.etendo.software/latest/assets/drive/C03LX7XPMO-rvqovv8Gtmu6l-HoRmUqQPf0Q321iltU61rfVQyiGCo1dsu6oQ_oFXHLbF0528kEHLoOx8qWAmbJx0NcgwVmw_Iy-lNzSCRXYB4jO9P0zcaOAU44PXqja7AgrdctRRSNeYtErmY50OYAT0RKfFXgrX6lTf20j5WzMnDQexGT1AqaK0g.png)

En esta solapa se introduce la información de Intrastat relativa a la organización (sólo entidades legales).

Cada año se debe introducir un registro en esta solapa para configurar los siguientes datos:

-   *Formato de Fichero*: Cada país tiene su propio formato de Intrastat. En este campo seleccionamos el formato de fichero concreto que queremos que cree el sistema. En el caso de España, el módulo “Intrastat for Spain” es el encargado de generar el fichero con formato para España.
-   *Ejercicio*: Año de la declaración
-   *Declaración de Intrastat*: Adquisiciones o Entregas
-   *Importe Límite*: Cada año las Autoridades suelen modificar el importe que delimita la obligatoriedad de presentar o no la declaración de Intrastat. En este campo el usuario debe indicar el importe límite de cada año.
-   *Importe Acumulado del año*: Cada vez que se presente una declaración mensual, el sistema irá actualizando automáticamente el valor de este campo con el importe acumulado. Si el año anterior se generó la declaración de Intrastat fuera de Etendo, o desea empezar a generar la declaración una vez empezado el año, puede configurar aquí el importe que declaró en su momento.
-   *Valores por Defecto (Incoterms, Tipo de transacción, Modalidad de transporte, Régimen estadístico, Valor estadístico)*: Como ha visto anteriormente, en las ventanas de *Tercero* o *Tipo de documento* se pueden definir todos estos valores. Sin embargo, definir la misma *Modalidad de transporte* (por ejemplo) para todos los terceros puede resultar un poco molesto. Así que, si lo desea, puede definir la configuración global de estos valores en esta solapa. De esta forma, si por ejemplo no especifica nada en la *Modalidad de Transporte* de un Tercero, el sistema utilizará por defecto la configurada en esta solapa. Podrá modificar manualmente esta configuración siempre que lo desee en cada transacción o declaración de Intrastat.

######## **Solapa Intrastat en Línea de Pedido, Albarán y Factura (compra o venta)**

![](https://docs.etendo.software/latest/assets/drive/MPXVxD2cgEZhT-sITSN4LLZJV59vTsxYwzj5fC8IKyIZuUjHq8BWShP7aSB5M5vue9kXWhNUL54W0Q7vNGkN1OJvPXInGUWRPOhsSix8csKzNIAYHwIxwxany7JR3xAeifSGeUfUOLCeOoxyR55QMrajFQjcsrPYt5AnOUALpnHeh82pH3O9mGbIKg.png)

A nivel de línea de Pedido, Albarán y Factura, tanto de compra como de venta, se ha creado una nueva solapa que contiene toda la información de Intrastat relativa a esa transacción en concreto.

Cada vez que se introduce una nueva línea de pedido, albarán o factura, el sistema comprueba si esa transacción se debe incluir en el informe de Intrastat (por ejemplo, si se trata de una compra/venta intracomunitaria) y, en caso afirmativo, genera un registro en la pestaña Intrastat con toda la información de Intrastat que se ha configurado por defecto. El usuario puede modificar manualmente cada uno de esos campos antes de completar el documento.

La razón por la que se ha añadido una solapa de Intrastat tanto en las líneas de pedido como de albarán (teniendo en cuenta que estos documentos no se incluyen en el Intrastat, sino sólo las facturas contabilizadas) es que las facturas en Etendo pueden crearse desde los pedidos y/o los albaranes. Es por ello que si la información relativa a Intrastat se introduce en la línea de un pedido, esa información se trasladará a la correspondiente línea de factura si la factura se genera copiando del pedido.

######## **Intrastat | Herramientas de análisis | Generador de Intrastat**

![](https://docs.etendo.software/latest/assets/drive/XxYQ02-DL0rr3DGMZ_FUOn2gVmqY34Iko4NBU_Wr7JXNbchAgTSr_BaLU_6bf9giEwaUVf8c2b2pvk2dc2U6NwRsa7CX8uFXET_eiMgxybpB8swm-0wSw9ln1r_FcRFaFlYvumc30KMLbEhCxNLFPy7NfCiPVYvY41yrCbbhVWZ75HgRrxwNyEYkdg.png)

Una vez finalizado el mes, se debe generar la declaración de Intrastat de ese mes. Desde esta ventana podremos hacerlo. Para ello seleccionamos la Organización (sólo entidades legales), Ejercicio, Periodo, Adquisiciones o Entregas y Tipo de declaración (Normal o Anulativa).

El sistema generará automáticamente una cabecera de declaración junto a sus líneas, accesible desde Intrastat | Herramientas de análisis | Declaración de Intrastat.

######## **Intrastat | Herramientas de análisis | Declaración de Intrastat**

![](https://docs.etendo.software/latest/assets/drive/er07E5V7YGKLkaVl1A9lUzWMFj3FREeBMgFaqnjtq6fB2w7ek7q6ztujPw2KNRxtVq45PS7SU6MzaKmrNSdDnNXw6nkGRo0s_Y1aY0KKEyigXKHj9w8_RqGCSKo-Hj3AiqoUKo2sNu19GNJ6xTBoUMHzLYDpfMVL8JcyS1evqol-e3m-weEBCbbB5Q.png)

Al generar una declaración de Intrastat, el sistema crea automáticamente una nueva cabecera (sólo lectura) junto con sus líneas. En este momento la declaración se encuentra en estado borrador, y se permiten modificaciones en las líneas de la declaración. Veamos un ejemplo de la información que contiene una línea:

![](https://docs.etendo.software/latest/assets/drive/04R4qED5tjzLbOS_oOdZGSssalCSrO5HjgBFbLPHotJgoHxVqKwB7MzSAGUN9sqiJdzB78R9LBKGA0J8pTtaXgOGJBcI3BzfQoyEXdg3dwLXaDTNG7aqfe6JSU_KAgeVjCkHNZO5kvKhJ5DzooSFsIYSd-hZs3KfJMCSH54KXzVfiXilrW02m280dQ.png)

El sistema ha recuperado toda la información de Intrastat desde las líneas de factura. Si ha configurado toda la información relativa al Tercero, Producto y tipo de documento, Etendo Classic habrá rellenado automáticamente todos estos valores en las líneas de la declaración.

Si por el contrario le falta algún dato, si desea modificar alguno, o incluso si quiere añadir manualmente nuevas líneas o excluir alguna de ellas, puede hacerlo mientras la declaración esté en estado borrador.

En la solapa de líneas de declaración de Intrastat, al margen de los campos relativos a la información de Intrastat, aparecen dos campos de especial importancia para el usuario: el campo *“Incluir”* y el campo *“Modificado Manualmente”:*

-   *Incluir*: Por defecto, todas las líneas de la declaración de Intrastat se incluirán a la hora de generar el fichero de Intrastat. Sin embargo, si desmarca esta casilla, la línea en cuestión se excluirá de la declaración.
-   *Modificado Manualmente*: Cada vez que se modifique un dato de una línea de declaración de Intrastat o añada manualmente una nueva línea, el sistema marcará automáticamente esta casilla.

Mientras la declaración está en estado borrador, la declaración de Intrastat se puede relanzar todo lo necesario. Cuando se haga, el sistema volverá a recalcular de nuevo la declaración, conservando intactas todas las líneas que tengan marcado el campo de *Modificado Manualmente.*

#### **Manual de Instrucciones**

Una vez que conoce las ventanas más importantes que proporcionan la funcionalidad de Intrastat en Etendo, es hora de conocer el flujo de trabajo para usar correctamente dicha funcionalidad.

##### **Configuración General**

Toda la lógica detrás de la funcionalidad de Intrastat en Etendo se basa en la ubicación física de su organización y de sus terceros. Por ese motivo es fundamental que especifique la dirección completa de cada uno de ellos. Si la dirección es de España, deberá indicar también la Provincia en la que se ubica.

###### **Configuración de Intrastat**

Como habrá podido observar, la configuración para Intrastat se realiza principalmente en los siguientes lugares:

-   **Configuración General | Organización | Organización**. Para cada entidad legal, deberá seleccionar un calendario válido para Intrastat (que tenga ejercicios con 12 periodos que coincidan con los meses naturales). Recuerde marcar la casilla “Calendario de Intrastat” cuando configure su calendario (*Gestión Financiera | Contabilidad | Configuración | Calendario anual y periodos*) para que éste aparezca en el campo de *Calendario de Intrastat* de la ventana de Organización.
-   **Configuración General | Organización | Organización  |**  Organización  **\>>  Intrastat**. Recuerde que en esta solapa se configuran:
-   Los importes y tipos de declaraciones que desea generar para cada entidad legal
-   Los valores por defecto globales que se utilizarán en caso de que no se definan concretamente donde corresponda (*Tercero* o *Tipo de documento*)

El sistema necesita saber cuánto se declaró el año anterior. Para proporcionar esta información, se debe crear un nuevo registro en esta solapa. Solamente a modo de ejemplo, en *2021* para la organización *España*, declaramos un Intrastat de *adquisiciones* por un importe de *0.00* Euros:

![](https://docs.etendo.software/latest/assets/drive/9X5udGu8RP0DTGJquv2Li6dXdSXPxg03D1QBGQ6qnrs6VxCayvbcoqtu-IyOzhhT5L2lb7CWeHMST-gvve1CpWU8RyBTrUcgu-CIGup0h6kG9MrY0-DbIZ-LQIrMrLttuy0FAM3Ax2-CPquZMG8IOmqkZGLr6bl1mhCpSe2_IErNZTQfX5RfnIIrfg.png)

!!! info
    Nota: Si su calendario de Intrastat no tiene creado el año 2021, deberá crearlo (junto a sus respectivos periodos) antes de poder introducir este registro.


Ahora repita ese proceso para el año presente. Si ya ha empezado el año y se han realizado transacciones intracomunitarias de bienes (presentando o no la declaración de Intrastat), deberá indicar el importe acumulado de este año. De esta forma, el sistema podrá saber si debe presentar la declaración de Intrastat o no a lo largo del presente año.

También existe la opción de configurar los valores globales por defecto, lo que es especialmente útil si, por ejemplo, casi todos sus Terceros comparten el mismo Incoterm. Posteriormente, a nivel de tercero, se podrá especificar la configuración concreta para cada uno de ellos.

![](https://docs.etendo.software/latest/assets/drive/oVnu7ahLXMceKTVmUBhewKFKYODlv-fRnLLXvLdTrg6rsJdYzXk9_nRSj9_6COfueYVEub-2ISJZV49Abl1WRLhdVqzJ5DCV5n0d3vMDePDlcYKGY6pUDeQSSSrpRz6k--F-438sLk7NF_QCydiwA2C2X6nWOSbZ5u0D0Zn7UyfdJsZm1IRoRMPjAQ.png)

-   **Gestión de Datos Maestros | Producto  |**  Producto  **\>>  Intrastat** Como ya vió en el apartado Interface de Usuario, debe definir la información de Intrastat para los productos de tipo *Artículo.*
-   **Gestión de Datos Maestros | Terceros  |**  Terceros  **\>>  Cliente y Gestión de Datos Maestros | Terceros  |**  Terceros  **\>>  Proveedor/Acreedor, campo Incoterms.** Como ya se vió en el apartado Interfaz de Usuario, se puede definir el Incoterm de cada Tercero.
-   **Gestión de Datos Maestros | Terceros  |**  Terceros  **\>>**  Cliente  **\>>  Envíos de Intrastat y Gestión de Datos Maestros | Terceros  |**  Terceros  **\>>**  Proveedor/Acreedor  **\>>  Adquisiciones de Intrastat .** Como ya se vió en el apartado Interfaz de Usuario, se puede definir la información de Intrastat de cada Tercero.
-   **Gestión Financiera | Contabilidad | Configuración | Tipo de documento  |  Definición de documento.** Como ya se vió en el apartado Interfaz de Usuario, puede definir el *Tipo de Transacción* y *Régimen estadístico* para sus documentos de tipo Factura.

##### **Creación de transacciones**

Una vez que nuestros datos están perfectamente configurados, es el momento de empezar a crear las transacciones que posteriormente se incluirán en la declaración de Intrastat.

Como ya se ha visto en apartados anteriores, su instalación cuenta con una nueva solapa, llamada *“Intrastat”*, a nivel de línea de pedido, albarán y factura que contiene toda la información relativa al Intrastat. Si se han introducido todos los datos de configuración necesarios anteriormente, se utilizará esta información automáticamente para rellenar esa solapa. Si, por el contrario, no se ha configurado toda esta información, o desea modificar algún dato en concreto, podrá hacerlo de forma manual.

Cada vez que se introduce una línea de pedido, albarán o factura, el sistema comprueba si se cumplen todas estas condiciones:

1.  La organización y el tercero del documento se encuentran en países distintos de la Unión Europea
2.  Todas las direcciones incluidas en la cabecera del documento, que están relacionadas con el tercero, están ubicadas en la UE. Si al menos una de las direcciones no pertenece a la UE, no se generará información de Intrastat
3.  El producto incluido en la línea es un artículo
4.  Si se ha instalado el módulo de *“Intrastat for Spain”*, el sistema también comprobará que tercero y organización no se encuentren ubicados en las Islas Canarias, ya que en este caso las transacciones se deben excluir del Intrastat.

Si todas esas condiciones se cumplen, cada vez que inserte una línea de documento, el sistema creará automáticamente la información en la pestaña de Intrastat.

El sistema recupera los valores por defecto que haya configurado a nivel de tercero, producto, tipo de documento y organización (este último si no encuentra los valores correspondientes anteriormente). Pero recuerde que, independientemente de los valores configurados, el usuario tiene la libertad de modificarlos para cada línea en concreto mientras el documento no se haya completado.

###### **Creación de transacciones desde otras transacciones**

En Etendo existe la posibilidad de crear albaranes desde pedidos; en este caso, el sistema recuperará la información de Intrastat introducida a nivel de pedido y la copiará al albarán.

Imagine que ha creado un pedido y que ha cambiado el Incoterm por defecto. Cuando se cree un albarán desde ese pedido, el Incoterm que se incluirá en la línea de Intrastat del albarán será el que se haya redefinido en el pedido, y no el que estuviera configurado en el sistema por defecto.

Lo mismo sucede para las facturas. En Etendo se pueden crear facturas desde albaranes o pedidos. En este caso, el sistema siempre intentará recuperar la información de Intrastat del albarán o del pedido. Si la factura se crea sin albarán o pedido asociado, Etendo recuperará la configuración del sistema para rellenar la solapa del Intrastat.

##### **Generación de declaraciones de Intrastat**

Una vez finalizado el mes natural, llega el momento de generar la declaración de Intrastat. Para hacerlo debemos ir a la ventana Intrastat | Herramientas de análisis | Generador de Intrastat. Seleccionaremos la entidad legal, año, periodo y tipo de declaración.

![](https://docs.etendo.software/latest/assets/drive/-xOOy1tCY12Yc8KLtr_QEIiGwyUIQ8O9dXuGoMTnHHhDwYTKty5cP1dog-im2f-iHQoE-UEbMJcoseuQvPEnMqTTwZvEEwMyHin7jQyDByPcGvhswO9pAz2e07LqRCkFPWXTXlMJEwr09pCoiupjWHCQLHRcPRdjgZhysMOmd4ZvJbmmRELeLdO7gg.png)

Actualmente, Etendo soporta dos tipos de declaraciones: *Normales* y *Anulativas*, estas últimas anulan las declaraciones normales procesadas en el periodo seleccionado y generan una nueva declaración normal.

Tenga en cuenta que un mismo periodo sólo puede tener como máximo una declaración normal para adquisiciones y otra para entregas.

Mientras la declaración normal para un periodo se encuentre en estado borrador, el usuario puede lanzar la generación de la declaración tantas veces como quiera. El sistema actualizará todas las líneas de la declaración, conservando todos los cambios manuales realizados por el usuario.

Como veremos más adelante, cuando se procese una declaración ya no se podrá realizar más cambios sobre ella. Sin embargo, el usuario siempre puede anular la declaración procesada para volver a generar una nueva declaración normal para ese periodo.

!!! info
    **Nota importante:** Etendo recomienda cerrar el periodo contable antes de generar la declaración de Intrastat.


###### **Revisión, Modificación y Procesado de la declaración de Intrastat**

Una vez generada la declaración, podemos examinarla antes de procesarla. Para ello utilizaremos la ventana Intrastat | Herramientas de análisis | Declaración de Intrastat. La cabecera de la declaración se encuentra por defecto en estado borrador, con todos los campos de solo lectura.

Si navegamos a las líneas, podemos comprobar los datos que se incluirán en la declaración. Mientras la declaración esté en borrador, podremos modificar datos de las líneas, incluir manualmente nuevas líneas (para transacciones al margen de Etendo), o excluir líneas (mediante el campo *Incluir*) que no queramos que aparezcan en el fichero de Intrastat.


Cuando estemos seguros de que la declaración es correcta, navegaremos a la cabecera y pulsaremos el botón *“Procesar Declaración”.* Este proceso comprobará que todos los datos necesarios para generar el fichero de Intrastat están en el sistema y nos mostrará un error detallado en caso de que encuentre algún fallo. Ejemplo:

![](https://docs.etendo.software/latest/assets/drive/YmqOUWlEagUpEcF7v1V8AbomnzuIy8PSzX0CHXiNQTThWHi821JdV-yVpHHydVZOZbxkF1ybQSff-K0KbKoaGSgYekcjm2ofbGreyprdx482TGdM8m4S-076wHnQt16isDz4Vn-gSMkN2Q5qEft7hRWTILjXA2NWVp2G7bVxcmzeCxVVxcfB7Bal7Q.png)

Una vez procesada la declaración, el campo *“Importe Acumulado del año”* a nivel de organización se actualizará automáticamente, sumando el importe de esta declaración a lo acumulado en el año. Si posteriormente anula esta declaración, el sistema restará el importe de la declaración anulada al acumulado del año.

##### **Generación del fichero de Intrastat**

Al procesar la declaración, aparece automáticamente el botón de “Generar fichero”.

![](https://docs.etendo.software/latest/assets/drive/qZnZAQ6qT2iKqwv_ZgjHxgD_ytT0UxvLoevWs3yIh-DMPFriliEcja2bxMfH3znnY9CkX0Dvzw80Z99vu-3jyD_vSjaqb8Hds-METiaoAqj7KWg5WzgJq2u8FJ5qg2yBrBTlM20qrC_8jDo03XDeametjvbJwchZo4gBISB7-1D6NEtn8k3cp4hVDA.png)

Cuando lo pulsemos, el sistema comprobará si estamos obligados a presentar la declaración para este periodo o no. Para llevar a cabo esta operación, el sistema comprueba el importe declarado el año anterior y el acumulado de este año, por ese motivo es muy importante que configure correctamente estos valores en la ventana Intrastat a nivel de Organización.


Si durante el año anterior superamos el límite de declaración de Intrastat, o lo hemos superado a lo largo del presente año, Etendo nos generará el fichero de Intrastat con el formato apropiado para ser enviado telemáticamente (a través de Internet) a las Autoridades. Ejemplo:

FR;31;FOB;11;3;;85182190;CN;1;115;162;15,37;15,37

DE;28;CIF;11;1;0811;85182190;US;1;2459;1982;4589,46;4589,46

IT;12;FOB;11;3;;02012030;;1;800;;987,00;890,45
!!! info
    Si las líneas de la declaración sobre la que vamos a generar el fichero son superiores a 1000, generará un fichero zip con tantos txt como sean necesarios, ya que cada archivo podrá contener un máximo de 1000 líneas.

!!! info
    Este fichero se puede importar en el enlace web de la AEAT - Cumplimentación en Línea con Importación de Fichero. Para más información, consulte este [*enlace*](https://sede.agenciatributaria.gob.es/Sede/ayuda/consultas-informaticas/presentacion-declaraciones-ayuda-tecnica/procedimiento-presentacion-declaraciones-intrastat.html){target="_blank"}.


!!! info
    Es importante recalcar que superado el umbral de presentación en caso de que en un periodo (mes) no se realicen transacciones de intercambio de bienes intracomunitarias, habrá que presentar la correspondiente declaración sin transacciones. 



###### **Finalizar el año. Copia de configuración al siguiente año**

Una vez que hemos generado todas las declaraciones del año, es momento de configurar el sistema para el próximo año. Lo único que debe hacer es ir a la configuración del presente año en Configuración General | Organización | Organización  |  Organización\]  >>  Intrastat y presionar el botón *“Copiar al año siguiente”.* En la ventana emergente aparecerá un campo numérico para que introduzca el nuevo importe límite del siguiente año.

![](https://docs.etendo.software/latest/assets/drive/QeFYekMn3a3rRGcEFIkw2MgQ2UNf5EfrCuJM8iaLCP6WqeyL6-0HRqUgzimJiyEkn-vT6XRvDUsNkw2VhlJYRdoo5kgTPOdCa5r1EnNBj8k6CQ45xq-7R2LS4b0Yn8MwpQ2cgLoWrgeZYvCn9NhJNoIFNt6ZuzvNE82NJDn7JL4TtbIoU-OuQWHm4Q.png)

El proceso comprobará que haya procesado todas las declaraciones del presente año y, en ese caso, creará un nuevo registro copiando toda la información de configuración del presente año junto al nuevo importe límite de declaración de Intrastat.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: IVA de Caja
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Spanish Localization Bundle/IVA de Caja
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/iva-de-caja
## Article Content: 
#### Introducción

Este documento describe la funcionalidad del **IVA de Caja**, disponible en Etendo Classic.

El objetivo de esta funcionalidad es **reconocer contablemente el IVA y declararlo/liquidarlo** con la Agencia Tributaria correspondiente, al realizarse el **cobro/pago** de las factura de venta/compra.

En el caso de **España** se puede concretar que:

- Este Régimen especial de carácter optativo, permite a los sujetos pasivos retrasar el devengo y la consiguiente declaración e ingreso del IVA repercutido hasta el momento del cobro a sus clientes.
- Igualmente, se retardará la deducción del IVA soportado en sus adquisiciones hasta el momento en que efectúe el pago a sus proveedores (**criterio de caja doble**).
- Todo ello con la fecha límite del 31 de diciembre del año inmediato posterior a aquel en que las operaciones se hayan efectuado.
- Por tanto, **el derecho a la deducción del IVA soportado** en el régimen especial del criterio de caja nace:

    - **En el momento del pago total o parcial** de las facturas de compra, por los importes efectivamente satisfechos.
    - **O el 31 de diciembre del año inmediato posterior** a aquel en que se haya realizado la operación si el pago no se ha producido.

- Igualmente, **el devengo del IVA en las operaciones** a las que sea de aplicación el régimen especial del criterio de caja se produce:

    - **En el momento del cobro total o parcial** de las facturas de venta, por los importes efectivamente percibidos.
    - **O el 31 de diciembre del año inmediato posterior** a aquel en que se haya realizado la operación si el cobro no se ha producido.


Es por ello que el módulo de IVA de Caja **a partir de su versión 1.0.100** permite **liquidar de forma manual el IVA de Caja** de facturas no pagadas/cobradas total o parcialmente. Esta liquidación, en el caso de España, se registrará y contabilizará con fecha 31 de Diciembre de 2024. Ver sección: [Liquidación manual del IVA de Caja
](#liquidación-manual-del-iva-de-caja)


#### Descripción

El IVA de Caja es un régimen especial de IVA al que las organizaciones ya se pueden acoger en países como España.

Las organizaciones aplican el IVA al generar una factura de venta; de tal forma que este impuesto es pagado por el cliente pero es la organización que genera la factura que incluye el IVA, quien lo declara y por tanto lo liquida con la Agencia Tributaria correspondiente.

En el caso de las facturas de compra sucede lo mismo pero a la inversa; el impuesto es pagado por la organización que adquiere los bienes/servicios pero es el proveedor quien lo declara y lo liquida con la Agencia Tributaria correspondiente.

Por tanto, una organización liquida con la Agencia Tributaria la diferencia entre el IVA que ha repercutido en sus ventas y el IVA que ha soportado en sus compras y que puede deducir.

La particularidad de este régimen radica en el momento de declarar y por tanto liquidar este impuesto:

- Cuando no se aplica este régimen, el IVA se puede declarar y liquidar con la Agencia Tributaria en el momento de emitir/recibir la factura de venta/compra, independientemente de si estas facturas se han cobrado/pagado o no.
- Cuando sí se aplica este régimen, el IVA se puede declarar y liquidar con la Agencia Tributaria en el momento de cobrar/pagar la factura de venta/compra correspondiente.

Este régimen puede ser una buena opción desde el punto de vista financiero pero puede implicar un mayor esfuerzo en la gestión y presentación de los informes de impuestos oficiales. La gestión del IVA de Caja en Etendo trata de reducir esta complejidad.

##### IVA de Caja en España

Este Régimen especial de carácter optativo permite a las organizaciones, sujetos pasivos del IVA, retrasar el devengo y la consiguiente declaración e ingreso del IVA repercutido en sus ventas hasta el momento del cobro a sus clientes aunque se retardará, igualmente, la deducción del IVA soportado en sus adquisiciones hasta el momento en que efectúe el pago a sus proveedores (**criterio de caja doble**); todo ello con la fecha límite del 31 de diciembre del año inmediato posterior a aquel en que las operaciones se hayan efectuado.

Dicho esto, en España puede haber organizaciones como las que se indican a continuación:

- **Organizaciones no acogidas a este régimen especial**:

    - En este caso ni las facturas de compra ni las facturas de venta están sujetas a este régimen especial, por tanto el IVA se reconoce contablemente y se devenga/declara en el momento de emitir/recibir las facturas de venta/compra.

- **Organizaciones no suscritas a este régimen especial, pero destinatarias de operaciones sujetas a este régimen especial**:

    - En este caso sólo las facturas de compra están sujetas a este régimen, pudiéndose reconocer contablemente y deducir el IVA soportado en dichas facturas sólo cuando se efectúa el pago al proveedor.

- **Organizaciones acogidas a este régimen especial**:

    - En este caso tanto las facturas de compra recibidas como las de venta emitidas por la organización se acogen a este régimen pudiéndose reconocer contablemente y liquidar el IVA en el momento del pago/cobro de dichas facturas.

Por otra parte, es importante señalar que hay ciertas operaciones que quedan excluidas de este régimen general. En el caso de España, las operaciones que se excluyen son:

- Las acogidas a los regímenes especiales simplificado, de la agricultura, ganadería y pesca, del recargo de equivalencia, del oro de inversión, aplicable a los servicios prestados por vía electrónica y del grupo de entidades.
- Las entregas de bienes exentas a las que se refieren los artículos 21, 22, 23, 24 y 25 de esta Ley (exportaciones y entregas intracomunitarias de bienes).
- Las adquisiciones intracomunitarias de bienes.
- Aquellas en las que el sujeto pasivo del impuesto sea el empresario o profesional para quien se realiza la operación conforme artículo 84.Uno.2º, 3º y 4º (supuestos de inversión del sujeto pasivo).
- Las importaciones y las operaciones asimiladas a importaciones.
- Aquellas a las que se refieren los artículos 9.1º y 12 (autoconsumos de bienes y servicios).

**Por lo tanto, si su organización está acogida a este régimen especial, no olvide desactivar la casilla "IVA de Caja" en las facturas de compra/venta que incluyen operaciones excluidas de este régimen especial.**

#### Instalación

El IVA de Caja es una funcionalidad oculta de manera predeterminada en Etendo.

Para habilitarla, es necesario [instalar manualmente el módulo de IVA de Caja](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/Datasets/#importing-reference-data-on-organization-level), que se encuentra bajo Licencia Pública de Etendo.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/dataset-cashvat.png)

*Recuerde que debe tener previamente instalado el dataset "Taxes: Configuration for Spain".*

Una vez instalado, en la interfaz de Etendo se mostrarán las pestañas y los campos necesarios para trabajar con la funcionalidad de IVA de Caja.


#### Configuración
##### Dos procesos independientes: Compra y Venta

Por defecto, el IVA de Caja en Etendo aparece deshabilitado, es por ello que el usuario debe activarlo de forma manual.

Con el objetivo de ser lo más genérico posible, el manejo del IVA de Caja se puede configurar en Etendo de forma independiente para cada una de las ventas y para cada una de las compras. Dicho de otro modo, una organización puede declarar cada compra o venta acogida a este régimen especial de IVA o no.

Por otro lado, y en el caso del proceso de compra, los proveedores puede configurarse de forma individual como acogidos a este régimen de IVA o no.

Toda esta configuración permite cubrir diferentes tipo de legislación en países como España, Alemania, México, etc.

Es importante remarcar que la configuración correcta para España, en el caso de una organización sujeta a este régimen especial de IVA, es seleccionar las dos casillas que se citan a continuación en la ventana "Organización":

- **Cash VAT** ("IVA de Caja")
- **Double Cash Criteria** ("Criterio de Caja Doble")

##### Proceso de Venta

Con el fin de activar el IVA de Caja para el proceso de ventas, la organización debe configurarse como acogida a este régimen especial de IVA. Es importante recalcar que las organizaciones "hijas" de la organización configurada como IVA de Caja, heredarán esta configuración.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/org-info-cashvat.png)

Esta configuración se lleva a cabo seleccionado el check "Cash VAT (IVA de Caja)" en la ventana "Organización", pestaña "Información".

##### Proceso de Compra

1. Organizaciones acogidas al régimen especial de IVA de Caja:

    La deducción del IVA soportado en las facturas de compra se retrasa, en el caso de organizaciones acogidas a este régimen especial de IVA, hasta el momento en que se efectúa el pago a los proveedores. Este es el "Criterio de Caja Doble".

    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/org-info-crit.png)


2. Organizaciones no acogidas a este régimen especial pero destinatarias de operaciones sujetas al mismo:

    En estos casos, no es necesario configurar a la organización como "acogida" al régimen especial de criterio de caja, simplemente es necesario configurar como acogidos al régimen a aquellos tercero o proveedores sujetos a este régimen especial de IVA. Esta configuración se puede hacer en la ventana "Terceros", pestaña "Proveedor/Acreedor".

    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/bp.png)

##### Configuración de los rangos de impuesto

Los rangos de impuesto de IVA a utilizar en organizaciones acogidas a este régimen especial de IVA o destinatarias de este tipo de operaciones, deben configurarse como rangos de impuestos de "IVA de Caja", en la ventana "Rango de Impuestos" tal y como se muestra en la siguiente imagen.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/tax-rate.png)

En el caso de España, Etendo facilita un dataset o conjunto de datos con los impuestos de IVA de Caja para España.

Además, cuando una organización está acogida a este régimen especial de IVA o es destinataria de operaciones acogidas a este régimen, los importes de IVA (devengado/soportado) se contabilizan en cuentas contables transitorias de IVA, al contabilizarse las facturas de compra/venta. Estas cuentas transitorias de IVA se pueden configurar en la pestaña "Contabilidad".

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/accounting-taxes.png)

El IVA contabilizado en las cuentas contables transitorias de IVA se traspasa a las cuentas finales de IVA, cuando las facturas se pagan/cobran de forma parcial o total.

Como excepción, si una factura tiene un pago por adelantado, la contabilización de este pago por adelantado no reflejará el traslado de IVA de las cuentas contables transitorias a las finales. Ver sección [Anticipos de Venta](#anticipos-de-venta) y [Anticipos de Compra](#anticipos-de-compra).

##### Configuración de las cuentas contables de IVA transitorias

Es posible definir las cuentas transitorias de IVA a utilizar por defecto para el "Esquema Contable" de la organización, en la pestaña "Valores por Defecto".

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/default_conf.png)

#### Proceso de Ventas

##### Facturas de Venta

En la cabecera de la ventana **"Factura (Cliente)"**, sección **"Más Información"** puedes encontrar el check **"Cash VAT"** (IVA de Caja). Si este check está seleccionado, la factura de venta está acogida a este régimen especial de IVA y, por tanto, todos los rangos de impuestos incluidos en la factura deben ser de IVA de Caja, con excepción de los rangos de impuestos exentos de IVA y las retenciones, de lo contrario el sistema no permitirá completar la factura.

Este check se activa de forma automática cuando la organización se ha configurado como acogida al régimen de IVA de Caja, sin embargo se puede desactivar de forma manual para aquellos casos en los que la factura de venta incluya operaciones que se excluyen de este régimen especial, por ejemplo en los casos de "Exportaciones" y "Entregas Intracomunitarias Exentas".

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/sales_invoice.png)

En las facturas de venta acogidas a este régimen aparecerá una nueva pestaña en la parte inferior de la factura, debajo de la pestaña "Impuestos", denominada "Cash VAT".

Cada vez que la factura se cobre de manera parcial o total, el sistema inserta automáticamente una línea con el porcentaje del IVA cobrado en cada cobro. Esta información puede ser utilizada posteriormente para la generación de los informes de impuestos correspondientes.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/taxes-cashvat.png)

##### Contabilización de las facturas de venta

Cuando una factura de venta se contabiliza, el IVA es contabilizado en las cuentas transitorias de IVA, tal y como se muestra en la siguiente imagen

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/post_sales_invoice.png)

Posteriormente, cuando se contabiliza el pago/la transacción/o la reconciliación (en función de la configuración de la Forma de Pago utilizado), el importe de IVA contabilizado en la cuenta transitoria de IVA se traslada automaticamente a la cuenta de IVA correspondiente, tal y como se muestra en la siguiente imagen:

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/post_payment_in.png)

##### Pedidos de Venta

Para revisar si un pedido u orden de venta está marcada como "IVA de Caja", nos dirigimos a la cabecera del pedido, sección "Más información".

El comportamiento de los pedidos es similar al de las facturas, además las facturas creadas desde los pedidos acogidos a este régimen, heredarán esta configuración.

Tenga en cuenta que cualquier proceso de facturación (incluso los creados especificamente para los usuarios finales de Etendo) mostrará en las facturas la configuración del IVA de Caja o no en función de la configuración de los pedidos, por tanto no será necesario adaptar ningún proceso de facturación que se use con anterioridad a la vigencia de este régimen especial de IVA.

##### Anticipos de Venta

Etendo permite anticipar cobros de clientes al permitir registrar cobros en los pedidos de venta.

Como se ha adelantado en la sección anterior [Pedidos de Venta](#pedidos-de-venta), estos pedido pagados por anticipado, pueden estar sujetos a IVA de Caja.


Cuando se contabiliza el anticipo de un cliente, bien sea total o parcial, no se produce traslado contable alguno de IVA de Caja.

Al completar la factura de venta correspondiente, desde el pedido de venta pagado parcialmente, se reflejan dos cosas:

1. El importe prepagado **"Prepayment Amount"**, en la cabecera de la factura.

    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/sales-inv-from-order.png)

2. El **porcentaje de IVA de Caja liquidado** como final, en la pestaña "IVA de Caja" ("Cash VAT"). En este caso el importe del anticipo = 0.67 € divido entre el importe total de la factura = 1.67, nos daría un porcentaje del 40.12 %, esto es una cuota de 0.12 €

    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/cashvat-sales-order.png)

Al contabilizar la factura de venta la cuota del impuesto por importe de 0.12 € se reflejará contablemente en una cuenta de IVA final (47700) y el resto de cuota pendiente de liquidar en la cuenta de IVA transitoria.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/post-sales-inv-order.png)

Si con posterioridad se paga la factura, la contabilización de dicho pago trasladará contablemente el IVA de Caja pendiente de liquidar a una cuenta final de IVA.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/post-payment.png)

#### Proceso de Compras

##### Facturas de Compra

En la cabecera de la ventana **"Factura (Proveedor)"**, sección **"Más Información"**, puedes encontrar el check **"Cash VAT"** (IVA de Caja). Si este check está seleccionado la factura de compra está acogida a este régimen especial de IVA y, por tanto, todos los rangos de impuestos incluidos en la factura deben ser de IVA de Caja, con excepción de los rangos de impuestos exentos de IVA y las retenciones, de lo contrario el sistema no permitirá completar la factura.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/purchase-inv.png)

Este check se activa automáticamente:

- cuando la "Organización" se ha configurado como acogida al régimen de IVA de Caja,
- o bien cuando el "Tercero" se ha configurado como acogido al regimen de IVA de Caja

Este check se puede desactivar de forma manual para aquellos casos en los que la factura de compra incluya operaciones que se excluyen de este régimen especial, por ejemplo en los casos de "Importaciones" y "Adquisiciones Intracomunitarias".

En las facturas de compra acogidas a este régimen aparecerá una nueva pestaña en la parte inferior de la factura, debajo de la pestaña "Impuestos", denominada "Cash VAT".

Cada vez que la factura se pague de manera parcial o total, el sistema inserta automáticamente una línea con el porcentaje del IVA pagado en cada pago. Esta información puede ser utilizada posteriormente para la generación de los informes de impuestos correspondientes.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/tax-purchase-inv.png)

##### Contabilización de las facturas de compra

Cuando una factura de compra se contabiliza, el IVA es contabilizado en las cuentas transitorias de IVA, tal y como se muestra en la siguiente imagen

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/post-purchase-inv.png)

Posteriormente, cuando se contabiliza el pago/la transacción/o la reconciliación (en función de la configuración de la Forma de Pago utilizado), el importe de IVA contabilizado en la cuenta transitoria de IVA se traslada automaticamente a la cuenta de IVA correspondiente, tal y como se muestra en la siguiente imagen:

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/post-payment-out.png)

##### Pedidos de Compra

Para revisar si un pedido u orden de compra está marcada como "IVA de Caja", nos dirigimos a la cabecera del pedido, sección "Más información".

El comportamiento de los pedidos es similar al de las facturas, además las facturas creadas desde los pedidos acogidos a este régimen, heredaran esta configuración.

Tenga en cuenta que cualquier proceso de facturación (incluso los creados especificamente para los usuarios finales de Etendo) mostrará en las facturas la configuración del IVA de Caja o no en función de la configuración de los pedidos, por tanto no será necesario adaptar ningún proceso de facturación que se use con anterioridad a la vigencia de este régimen especial de IVA.


##### Anticipos de Compra

Etendo permite anticipar pagos a proveedores permitiendo registrar pagos en los pedidos de compra. Estos pedidos pagados por anticipado pueden estar sujetos a IVA de Caja.

Cuando se contabiliza el anticipo a un proveedor, bien sea total o parcial, no se produce traslado contable alguno de IVA de Caja.

Al completar la factura de compra correspondiente, desde el pedido de compra pagado parcialmente, se reflejan dos cosas:

1. El importe prepagado **"Prepayment Amount"**, en la cabecera de la factura.

    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/prepayment-purchase.png)

2. El **porcentaje de IVA de Caja liquidado** como final, en la pestaña "IVA de Caja" ("Cash VAT"). Por ejemplo, un anticipo de 1000 € en una factura de 4114 € nos daría un porcentaje del 24.31 %.

    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/tax-purchase-inv-ord.png)

Al contabilizar la factura de compra la cuota del impuesto por importe de 173.57 € se reflejará contablemente en una cuenta de IVA final (47200) y el resto de cuota pendiente de liquidar en la cuenta de IVA transitoria.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/post-purchase-inv-order.png)

Al contabilizar la factura de compra la cuota del impuesto por importe de 173.57 € se reflejará contablemente en una cuenta de IVA final (47200) y el resto de cuota pendiente de liquidar en la cuenta de IVA transitoria.

#### Liquidación manual del IVA de Caja

Tal y como ya se ha adelantado, en el caso de España **el derecho a la deducción del IVA soportado** en el régimen especial del criterio de caja nace:

- **en el momento del pago total o parcial** de las facturas de compra, por los importes efectivamente satisfechos, tal y como ya se ha explicado dentro de la sección [Proceso de Compras](#proceso-de-compra)
- **o el 31 de diciembre del año inmediato posterior** a aquel en que se haya realizado la operación si el pago no se ha producido.

Igualmente, **el devengo del IVA en las operaciones** a las que sea de aplicación el régimen especial del criterio de caja se produce:

- **en el momento del cobro total o parcial** de las facturas de venta, por los importes efectivamente percibidos, tal y como ya se ha explicado dentro de la sección [Proceso de Ventas](#proceso-de-ventas)
- **o el 31 de diciembre del año inmediato posterior** a aquel en que se haya realizado la operación si el cobro no se ha producido.

Es decir, el IVA de Caja devengado/deducible de las facturas de venta/compra de fecha 2024 que no estén cobradas/pagadas totalmente, tendrá que liquidarse y declararse a Hacienda con fecha del 31 de Diciembre de 2024.

##### Documento de Liquidación Manual

El módulo de gestión de IVA de Caja de Etendo (Cash VAT Management) incluye, a partir de su **versión 1.0.100**, un nuevo "Tipo de Documento" ("Document Type"), denominado "Manual Cash VAT Settlement", así como una nueva ventana denominada **"Manual Cash VAT Settlement"** ("Liquidación Manual del IVA de Caja").

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/manual-cashvat-settlement.png)

*Recuerde actualizar el dataset de este módulo, una vez instalado, en la ventana "Gestión del módulo de Empresa".*

Esta nueva ventana permite a una organización acogida o destinataria de operaciones en régimen especial de criterio de caja:

- introducir una **fecha desde/hasta** que filtre por la fecha de las facturas de IVA de Caja no pagadas/cobradas o parcialmente pagadas/cobradas (campos "Starting Date"/"Ending Date")
- así como una **fecha de contabilización de la liquidación manual del IVA de Caja** (campo "Accounting Date").

Al crearse el estado del documento ("Document Status") es borrador ("**Draft**").

A continuación el botón de proceso **"Pick Lines & Complete"** permite obtener un listado de las facturas de IVA de Caja "completadas" y no necesariamente "contabilizadas" no pagadas/cobradas. Este listado de facturas incluye la siguiente información relevante:

- **Numero de Factura**, columna "Document Nº"
- **Tipo de documento**, columna "Document Type", que puede incluir facturas o facturas rectificativas o abonos tanto de compra como de venta.
- **Fecha de Factura**, columna "Invoice Date"
- **Tercero**, columna "Business Partner"
- **Importe Total de la Factura**, columna "Grand Total Amount"
- **Impuesto de IVA de Caja**, columna "Tax"
- **Porcentaje no pagado de la factura**, columna "Percentage", que puede ser el 100% o menor.
- **Cuota del impuesto**, columna "Tax Amount" 
- **Base Imponible del impuesto**, columna "Taxable Amount".

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/transfer-cashvat-accounts.png)

A continuación, el usuario puede seleccionar la factura o facturas para las que el IVA de Caja se tiene que liquidar de forma manual a 31 de Diciembre de 2024. En esta ventana:

- el botón **"OK"** permite cerrar la ventana de facturas de IVA de caja pendientes de liquidar y mantener las facturas seleccionadas.
- el botón **"Complete"** permite completar la selección y pasar el estado del documento "Manual Cash VAT Settlement" a "Completado". Cualquier cambio en la selección implicará la **"Reactivación"** del documento.
- el botón **"Cancel"** permite cerrar la ventana de facturas de IVA de caja pendientes de liquidar y cancelar la selección.

Una vez seleccionadas, las facturas se reflejan en la pestaña "Lines", y en la parte superior de la ventana se actualizan los campos siguientes, con la suma de cuotas y bases correspondientes:

- **Cuota de IVA Devengado**, campo "Sales Tax Amount"
- **Base Imponible Devengada**, campo "Sales Taxable Amount"
- **Cuota del IVA Deducible**, campo "Purchase Tax Amount"
- **Base Imponible Deducible**, campo "Purchase Taxable Amount"

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/process-manual-cashvat.png)

Es importante recalcar el **último campo de la pestaña "Lines"**, denominado **"Invoice Tax Cash VAT"**,"**IVA de Caja del Impuesto**").

Este campo enlaza con la pestaña "Cash VAT" relacionada con el impuesto que corresponda de la factura de compra, en este caso. Lo mismo aplicaría en el caso de una factura de venta. 

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/purchase-cashvat.png)

Tal y como se puede apreciar en la imagen anterior, la liquidación manual del IVA de Caja, crea de forma automática un nuevo registro en la pestaña "Cash VAT", con la siguiente información:

- **Fecha de pago** = vacío ya que la liquidación del IVA de Caja no se ha producido al pagarse la factura, sino como consecuencia de una liquidación manual.
- **Porcentaje** = se mostrará el porcentaje de liquidación de IVA de Caja pendiente para el impuesto (de IVA de Caja).
- **Impuestos** = cuota del impuesto liquidada
- **Base Imponible** = base imponible del impuesto liquidada
- **Pago** = vacío ya que la liquidación del IVA de Caja no se ha producido al pagarse la factura, sino como consecuencia de una liquidación manual.
- **Liquidación Manual** ("Manual Settlement") = Sí
- **Linea de la Liquidación** ("Manual Manual Cash VAT Settlement Line") = con información sobre el número de documento y línea de la Liquidación Manual del IVA de Caja
- **Fecha de la liquidación** ("Manual Manual Cash VAT Settlement Date") = con la fecha contable de la liquidación manual.

Como puede apreciarse en la imagen anterior, el **porcentaje total liquidado de IVA de Caja** para el impuesto es ahora de un **100%**. Por tanto, si se produjera un pago de la factura de compra, la contabilización de ese pago no generaría un traslado contable del IVA de Caja, ya que éste ya se ha producido.

##### Traspaso contable del IVA de Caja

Al contabilizar la liquidación manual a 31 de Diciembre de 2024 (botón "Post"), se producirá el traslado del IVA de Caja contabilizado en las cuentas transitorias de IVA a las cuentas finales, tanto para el IVA Devengado (Cuentas: 47700T a 477000), como para el IVA Soportado Deducible (Cuentas 47200T a 472000).

Recuerde activar la tabla "OBCVAT_ManualSettlement" en la ventana "Esquema contable", pestaña "Tablas a contabilizar".

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/cashvat/journal-entries-manual.cashvat.png)

##### Liquidación del IVA de Caja

En el ejemplo mencionado anteriormente, es con fecha, 31 de Diciembre de 2024, cuando se puede liquidar/declarar ese IVA de Caja a las autoridades fiscales correspondientes. En el caso de España, este IVA de Caja se tendrá que incluir para su liquidación en el Modelo 303 del último periodo (Diciembre 2024/Último Trimestre 2024), así como en el Modelo 390 de 2024.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Libro de Facturas
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Spanish Localization Bundle/Libro de Facturas
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/libro-de-facturas
## Article Content: 
#### Javapackages 

:octicons-package-16: Javapackage: `org.openbravo.module.invoicesregisterbook`

:octicons-package-16: Javapackage: `org.openbravo.module.invoicesregisterbook.es_es`

#### **Introducción**

Este módulo de funcionalidad española se denomina “Libros Registro de IVA” o “Libros Registro de Facturas emitidas/recibidas”.

#### **Descripción del módulo**

Este módulo de los libros registro de IVA permite a las empresas españolas generar los libros registro de IVA, tanto los libros de facturas recibidas (IVA soportado) como los libros de facturas emitidas (IVA repercutido). Las empresas españolas tienen que guardar registro de cada una de las facturas recibidas y emitidas con el fin de poder determinar el importe total de IVA a liquidar con la Hacienda Pública para un periodo de tiempo determinado, como diferencia entre el IVA repercutido y el IVA soportado deducible.

El contenido de los libros de facturas se ajusta a los requerimientos de la Hacienda Pública española. Los libros de facturas contienen información sobre:

-   Número de registro
    -   este número será generado automáticamente por el sistema una vez que el correspondiente libro se marque como "Final"
-   Número de factura emitida/recibida
    -   este número tanto en el caso de facturas recibidas como emitidas se corresponde con el campo "Nº documento"
    -   en el caso de las facturas recibidas dicho campo no debería llevar secuencia numérica asociada con el fin de que el usuario final pueda introducir el número de factura del proveedor.
-   Fecha factura emitida/recibida o fecha de expedición/recepción de los bienes/servicio, en caso de ser diferentes
-   Nombre y breve descripción del cliente/proveedor
-   NIF del cliente/proveedor
-   Base imponible
-   Tipo impositivo de IVA
-   Cuota de IVA repercutido/soportado
-   Cuota de IVA soportado deducible
-   Tipo impositivo de recargo de equivalencia
-   Cuota de recargo de equivalencia
-   Importe total de la factura

!!! info
    Los importes deben consignarse en Euros.


El tipo de cambio que se utiliza en las transacciones que deban incluirse en los libros cuyos importes no sean en Euros, es el definido para un rango de fecha determinado en la ventana "Rangos de Conversión".

Este módulo de funcionalidad incluye además las claves de libro correspondientes al modelo tributario español 340 de declaración informativa de operaciones incluidas en los libros registro

-   “E”= en el caso del libro de facturas emitidas  
      
-   “R”= en el caso del libro de facturas recibidas  

y también las claves de operación correspondientes al modelo tributario español 340 de declaración informativa de operaciones incluidas en los libros registro:

-   “ “= en el caso de operación habitual de compra/venta  
      
     
-   “C”= en el caso de factura de compra o venta con varios tipos impositivos  
      
     
-   “D”= en el caso de factura de compra o venta rectificativa o nota de abono  
      
     
-   “I”= en el caso de inversión de sujeto pasivo  
      
     
-   “R” = en caso de facturas de arrendamiento de local de negocio (nueva clave para 2012)

En los libros registro de IVA se consideran las siguientes operaciones de compra relacionadas con los tipos de documento de Etendo que se listan a continuación:

-   Facturas de compra (Tipo de documento = “AP invoice” )
-   Facturas de compra negativas (Tipo de documento = “AP invoice”) o abonos (Tipo de documento = "Reverse Purchase Invoice"). Ambos tipos implican una nota de abono en negativo.
-   Notas de abono de compra (Tipo de documento = “AP CreditMemo”), lo cual implicaría una factura rectificativa o nota de abono en positivo. En este caso, hay que tener en cuenta que el libro de IVA de facturas recibidas marcará este tipo de operaciones como “D” con importes en positivo, aunque impliquen un IVA soportado negativo y, por tanto, menor IVA soportado/soportado deducible.

En los libros registro de IVA se consideran las siguientes operaciones de venta relacionadas con los tipos de documento de Etendo que se listan a continuación:

-   Facturas de venta (Tipo de documento = “AR invoice” )
-   Facturas de venta negativas (Tipo de documento = “AR invoice”) o abonos (Tio de documento="Reverse Sales Invoice"). Ambos tipos implican una nota de abono en negativo.
-   Notas de abono de venta (Tipo de documento = “AR CreditMemo”), lo cual implicaría una factura rectificativa o nota de abono en positivo. En este caso hay que tener en cuenta que el libro de IVA de facturas emitidas listará este tipo de operaciones en positivo, aunque impliquen un IVA repercutido negativo y, por tanto, menor IVA repercutido.

No se consideran los libros registro de IVA del tipo:

-   Libro registro de ciertas operaciones Intracomunitarias
-   Libro registro de bienes de Inversión

así como las:

-   Operaciones de nota de abono de compra/venta negativas (Tipo de documento = “AP/AR CreditMemo”), lo cual implicaría una factura de compra/venta.

#### **Instalación del módulo**

Para la instalación del módulo “Libro de facturas”, el usuario debe seguir los pasos que se describen a continuación en función de la situación de partida:

-   Instalación de la última versión disponible de Etendo 
-   o la instalación del módulo de Localización Española.

!!! info
    Para la instalación del módulo de Localización Española, visite [_Marketplace_](https://marketplace.etendo.cloud/#/product-details?module=003B475055DD421B9483B5BE15AA48C5){target="_blank"}. 


Este módulo de funcionalidad requiere el módulo de Impuestos para España de Etendo. Es importante tener en cuenta que a la hora de instalar el módulo del libro de facturas, los módulos dependientes se instalarán automáticamente.
> 
!!! info
    **Nota importante**: Las transacciones realizadas con anterioridad a la instalación del módulo de libro registro de facturas aparecerán en el correspondiente libro de facturas pero sin la clave de operación. Hay que tener en cuenta que la clave de operación solamente es necesaria en el modelo tributario 340. Para generar la clave de operación, las transacciones deberán completarse de nuevo.

#### **Interfaz de usuario**

Tal y como se ha explicado en la sección “*Instalación del Módulo*”, los “Libros registro de IVA” requieren del módulo de impuestos para España mejorado que incluye 3 campos que permiten:

1.- la identificación de los importes de **recargo de equivalencia** tanto en el libro de facturas recibidas como emitidas de forma separada a los importes de IVA, si bien hay que tener en cuenta que los rangos de impuestos de recargo de equivalencia tienen que ir referidos al régimen del cliente/proveedor como una categoría de impuestos del cliente/proveedor.

2.- la identificación de las operaciones de **inversión de sujeto pasivo** para los casos de operaciones de servicios suministrados por parte de proveedores europeos/extranjeros a empresas españolas.

3.- la selección del **tipo de libro** aplicable a cada impuesto, debido a que por la configuración actual de los tipos impositivos se darán casos de impuestos de tipo compra que se deben incluir en el libro de facturas emitidas como IVA repercutido/venta. Un ejemplo es el IVA Intracomunitario de compras. El IVA Intracomunitario de compras implica un apunte al debe (como IVA repercutido) y otro al haber (como IVA soportado).

Estos 3 nuevos campos se encuentran en la ruta de aplicación “**Gestión Financiera / Contabilidad / Configuración / Rango impuesto”**.

!!! info
    **Nota importante:** En caso de que no se utilice el módulo de impuestos para España proporcionado por Etendo, el usuario debe tener en cuenta que necesita configurar de forma adecuada y manualmente los 3 parámetros básicos del libro de facturas explicados en esta sección. 

Además este módulo cuenta con dos ventanas para la configuración de los libros registro de IVA y la generación de los mismos, tal y como se muestra a continuación:

**Configuración de los libros de IVA**

Ruta: Gestión Financiera / Contabilidad / Configuración / Configuración de Libro de Facturas

![](https://docs.etendo.software/latest/assets/drive/GrG6D0PyhdbT_TLRpP-ucIUxQWXB195QfgnnOoCooFMRK3_UdE3CVkl5e-u4JKIm9XaZa5jlgs3MKgRXNtxUWKv5ZUSPy8jn96u3UzeFgFAM9xK1K3iQaadEg4m-4tJzEekLb2QEmIUReL3FFSu2T3GhAwhqXYbEUj2bWFTahFcOb_5QbJBoJUODVWN_CA.png)

**Generación de los libros de IVA**

Ruta: Gestión Financiera / Contabilidad / Herramientas de análisis/ Libro de facturas

![](https://docs.etendo.software/latest/assets/drive/loPMP2zWkOWGQYfmN6LTMPKteM1c0FpDnobtXCpuevnoP_ymLRTTP17h6YhVPEbK0Jxvi_Er9fhCfcGHAmifvo__4Oa0B4iLGjknSLMFgaC8T1GUkaqyKv_b7axuA6vYViAQYr5AAnnCRI9cQes9jvV-QT48duPSsMzBwN9QADTKJZsyqGc7LmNQOZiFyw.png)

#### **Casos de usuario**

Esta funcionalidad permitirá a las empresas españolas llevar a cabo los escenarios que se explican a continuación una vez que las correspondientes facturas/abonos de compra y venta se han completado/contabilizado en Etendo para un determinado año/periodo, por ejemplo 2021/Enero/Febrero.

##### **Configuración y creación de los libros**

Es necesario crear y configurar los libros de facturas recibidas y emitidas, para ello deberá seguir los pasos que se detallan a continuación o bien instalar y aplicar a la entidad legal con contabilidad el módulo de configuración de los libros de facturas.

El módulo de configuración de los libros:

-   crea los libros tanto de facturas recibidas como emitidas
-   y los configura añadiendo todos los impuestos por tipo de documento a tener en cuenta a la hora de generar los libros de facturas.

Es importante recalcar que el usuario puede crear los libros de facturas para un determinado periodo de tiempo tantas veces como sea necesario con tan solo volver a presionar el botón de proceso “Crear” para el correspondiente Libro, de esta forma se incluirán en el libro nuevas facturas o abonos que no se tuvieron en cuenta al crear el libro.

###### **Libro de Facturas Recibidas**

####### **Configuración**

Configuración del Libro de Facturas recibidas en la ruta de aplicación Gestión Financiera – Contabilidad – Configuración – Configuración de Libro de Facturas.

Una vez aplicado el dataset del módulo [Configuración de impuestos para el libro de facturas](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/configuracion-de-impuestos-para-libro-de-facturas.md), el usuario puede comprobar la configuración de los libros de facturas que se ha creado por defecto para el libro de facturas recibidas.


Campos a tener en cuenta:

-   **Nombre** : Libro de Facturas Recibidas 2021
-   **Descripción** : Libro de Facturas Recibidas 2021
-   **Activo** : Sí
-   **Tipo**: R – Recibidas
-   **Nº inicial**: Este número se tendrá en cuenta al crear el libro como final, ya que a todas las transacciones o facturas incluidas en el libro habrá que asignarles un número de registro correlativo. El primer número asignado por defecto será el 1.

![](https://docs.etendo.software/latest/assets/drive/IXk_LbHGPAuvnqJO0OgUVrfZ-SOpTuzA9Wdl-wKAtmqZyaLqjv5om5qoPtpYl-508VUqsTJWgPPhnbLlYh1P9-drRWRiE3ZgN58uiycr6MdIYXayaz1hfLWPS0lJYV4ktVApRw9gKP7nbn5ezHlyCPRoO9D1tqo5W1e2DednQyS0Krh4qpRfakqWFyT8PA.png)

*Nota:* El usuario puede definir el **Número de Documento** que aparecerá en cada una de las líneas del libro, pudiendo ser: 
-   El Nº Factura (campo "Nº documento" de la factura de compra)
-   o el Nº Documento Proveedor (campo "Referencia del Proveedor" de la factura de compra) 

En la pestaña "**Impuestos**" el usuario puede comprobar el listado de todos los impuestos por tipo de documento que se han incluido en la configuración del libro de facturas recibidas y que, por tanto, se tendrán en cuenta a la hora de crear el libro.

####### **Creación**

La **creación del libro de facturas recibidas** se debe llevar a cabo desde la ruta de aplicación Gestión Financiera – Contabilidad – Herramientas de Análisis – Libro de facturas. El usuario debe crear un nuevo registro e introducir la siguiente información para el correspondiente Cliente/Organización:

-   **Nombre** : Libro de Facturas Recibidas Enero 2021
-   **Descripción** : Libro de Facturas Recibidas Enero 2021
-   **Activo** : Sí
-   **Libro de Facturas** : el usuario debe seleccionar el libro de facturas ya configurado, por ejemplo "Libro de Facturas Recibidas 2021".
-   **Ejercicio**: el usuario debe introducir el año (en el ejemplo, 2021)
-   **Desde Periodo** : el usuario debe introducir el periodo para el cual quiere que la fecha de las facturas se tenga en cuenta al lanzar el libro de facturas, por ejemplo enero 2021. El sistema incluirá las facturas con fecha desde el 1 de enero 2021.
-   **Hasta Periodo** : el usuario debe introducir el periodo hasta el cual quiere que la fecha de las facturas se tenga en cuenta al lanzar el libro de facturas, por ejemplo enero 2021. El sistema incluirá las facturas con fecha hasta el 31 de enero 2021.

Una vez introducida la información anterior, el usuario puede crear el libro mediante el botón de proceso “Crear” y comprobar las transacciones generadas en la pestaña “Líneas”.

![](https://docs.etendo.software/latest/assets/drive/GvTXD6nqhWoDk09XBU4LNxXPn81wG8PznqfHtMS3lI4NuiNwNZc1ogkyhqki6kcJnPsjkefAdwu2hyX7kqcvtxqwwLZ5m7q_U_93v-tu-TYnHSsn3-yP0Umnd-GvwqcUgJ280R80kJtIO9aCko3KN7HnJlw8ePE7avYq3kvhTfXn8ZFZsO4YzsvruBWF.png)

La información contenida en las líneas del libro es la que se muestra a continuación:

![](https://docs.etendo.software/latest/assets/drive/qk68QXzdYHjO1yKVcIG-WHMqCFoX0pJN8oCzkZP5CSVgReXjk0C43dB4ucckSUhXzLwG09yagjJvl14pAbhdBM1G_c6Y_enkOgCxfnSEPdrRGK6zUVxoIaTaoP6TOw3ejSKC4OrdJ740nB8ev0mERhCCHkhoIuT8dkk6g6tqayPEbcAgnsDde48ZxtUv.png)

###### **Libro de Facturas Emitidas**

####### **Configuración**

Configuración del Libro de Facturas emitidas en la ruta de aplicación Gestión Financiera – Contabilidad – Configuración – Configuración de Libro de Facturas.

Una vez aplicado dataset del módulo [Configuración de impuestos para el libro de facturas](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/configuracion-de-impuestos-para-libro-de-facturas.md), el usuario puede comprobar la configuración de los libros de facturas que se ha creado por defecto para el libro de facturas emitidas.

Campos a tener en cuenta:

-   **Nombre** : Libro de Facturas Emitidas 2021
-   **Descripción** : Libro de Facturas Emitidas 2021
-   **Activo** : Sí
-   **Tipo**: E – Emitidas
-   **Nº inicial**: Este número se tendrá en cuenta al crear el libro como final, ya que a todas las transacciones o facturas incluidas en el libro habrá que asignares un número de registro correlativo.

![](https://docs.etendo.software/latest/assets/drive/U7zyB9bCxJ53qXJTCwT0NxvIDJ4gMZ3c5G9QLmsMWGRYYV1mKdK90kPhbtf9l8Ee7hhsNZApVcmY-2fnalHXgl8xf3BcPEDM3VNbqspYjkVZyysWBhR_QXGJA0-vnGn_20c8luy3ZIeqVbnyJ8pghgvC7dfkSuO9AmajeRFq-uqqHy8o9IoMQFu0azbj.png)

En la pestaña "Impuestos" el usuario puede comprobar el listado de todos los impuestos por tipo de documento que se han incluido en la configuración del libro de facturas emitidas y que, por tanto, se tendrán en cuenta a la hora de crear el libro.

####### **Creación**

La creación del libro de facturas emitidas se debe llevar a cabo desde la ruta de aplicación Gestión Financiera – Contabilidad – Herramientas de Análisis – Libro de facturas. El usuario debe crear un nuevo registro e introducir la siguiente información para el correspondiente Cliente/Organización:

-   **Nombre** : Libro de Facturas Emitidas Febrero 2021
-   **Descripción** : Libro de Facturas Emitidas Febrero 2021
-   **Activo** : Sí
-   **Libro de Facturas** : el usuario debe seleccionar el libro de facturas emitidas ya configurado que quiere crear, por ejemplo "Libro de Facturas Emitidas 2021".
-   **Ejercicio**: el usuario debe introducir el año (2021)
-   **Desde Periodo** : el usuario debe introducir el periodo para el cual quiere que la fecha de las facturas se tenga en cuenta al lanzar el libro de facturas, por ejemplo febrero 2012. El sistema incluirá las facturas con fecha desde 1 febrero 2012.
-   **Hasta Periodo** : el usuario debe introducir el periodo hasta el cual quiere que la fecha de las facturas se tenga en cuenta al lanzar el libro de facturas, por ejemplo febrero 2012. El sistema incluirá las facturas con fecha hasta el 28 de febrero de 2012.

Una vez introducida la información anterior, el usuario puede crear el libro mediante el botón de proceso “Crear” y comprobar las transacciones generadas en la pestaña “Lineas”.

![](https://docs.etendo.software/latest/assets/drive/4PIfpdoRUi3Yr61UjSdmHK4-wjU2TnkBEFbFqev8C0CbUrrIxM5c_gpKnY8zz2RyzNa2TvRTXEmgQzB_-tXJKUc11kRLCv-pHzX00pJhI_NAIzDlmTRxWw3R4xXZI2A4Ns87C9tAa9P6icxTDkN8yyHo4SXbOXGJbx620JaN4BUNPYFsRzr_ZTwgIksZtg.png)

La información contenida en las líneas del libro es la que se muestra a continuación:

![](https://docs.etendo.software/latest/assets/drive/7fv5JlzALOzMrSXXDvFubccNZBrZwSJm1VSNpczqK4u03ULPED0uOMR_TbM-q3uEwc0W_J9fqUZAdHFvaWt8K9G3zTL0vXz-N7nXENJdFG7-PuBSMVa0PiF1uTWabKTHJToOaoiJX8y9A7KUN7bUEvUKPXZz0BkBg6daCzUA7tze8XfVeFtaVw_cisfZEw.png)

##### **Inclusión manual de transacciones**

El usuario puede añadir manualmente facturas/abonos tanto emitidos como recibidos que por cualquier motivo no estén registrados en Etendo, pero que deban ser incluidos en el libro correspondiente. Para ello el usuario deberá seguir los pasos que a continuación se detallan:

En la ruta Gestión Financiera / Contabilidad / Herramientas de Análisis / Libro de Facturas / Cabecera >> Líneas, el usuario puede crear un nuevo /s registro/s e introducir facturas o abonos tanto emitidos como recibidos de sus proveedores, en el libro correspondiente, con tal solo presionar el botón de menú “Nuevo”.

En ese caso, el usuario deberá introducir la información que se lista a continuación para cada nuevo registro creado manualmente:

-   Nº de documento (obligatorio)
-   Tercero (obligatorio)
-   Clave de operación
-   Base imponible (obligatorio)
-   Tipo impositivo (obligatorio)
-   Tipo de Recargo de equivalencia
-   Fecha documento
-   NIF del tercero (no editable, debe rellenarse al seleccionar el tercero)
-   Cuota del impuesto (obligatorio)
-   Cuota recargo de equivalencia (obligatorio). En caso de que no aplique el recargo de equivalencia se debe rellenar como 0,00
-   Importe total de la factura (obligatorio)

##### **No inclusión de transacciones**

El usuario puede marcar manualmente facturas/abonos tanto emitidos como recibidos que por cualquier motivo no deban ser incluidos en el correspondiente libro y que estén registrados en Etendo, para ello el usuario deberá seguir los pasos que a continuación se detallan:

En la ruta Gestión Financiera / Contabilidad / Herramientas de Análisis / Libro de Facturas / Cabecera >> Líneas, el usuario puede “desmarcar” cualquier transacción que esté marcada por la aplicación como “Incluida”, dichas transacciones no se incluirán al crear el correspondiente libro como Final (documento impreso en formato \*.pdf).

##### **Libros de facturas marcados como "Final"**

El usuario puede procesar los libros de facturas como “Finales”, una vez que se asegure de que las transacciones incluidas en el libro son las correctas, dicho proceso implicará la numeración correlativa de las facturas incluidas en dicho libro, siempre que el periodo o periodos a los que se refieren las facturas incluidas en el libro estén cerrados, al menos temporalmente.

Desde “Gestión Financiera / Contabilidad / Transacciones – Abrir/Cerrar Periodos”, el usuario debe cerrar temporalmente aquellos periodos para los que no se van a introducir nuevas facturas ni transacciones y que, por tanto, pueden cerrarse.

Una vez cerrados los periodos desde “Gestión Financiera / Herramientas de Análisis / Libro de Facturas”, el usuario puede "Crear y Marcar como Final" el correspondiente libro, con lo que el sistema dará opción a partir de ese momento tan solo de “Desprocesar”.

El usuario puede imprimir el libro mediante el botón de la barra de herramientas “Imprimir”.

El libro impreso (\*.pdf) de facturas recibidas incluye la siguiente información:

-   Número registro
-   Número factura
-   Nº Doc / Ref. Prov - esta columna relaciona ambos números de documento, el número de Etendo y el número o referencia del proveedor.
-   Fecha operación
-   Tercero
-   NIF
-   Clave
-   Base imponible
-   Tipo impositivo
-   Cuota impuesto
-   Cuota deducible
-   Importe factura
-   Fecha de pago
-   Cuenta Financiera
-   Método de Pago
-   Importe de Pago

El libro impreso (\*.pdf) de facturas emitidas incluye la siguiente información:

-   Número registro
-   Número factura
-   Fecha factura
-   Fecha operación
-   Tercero
-   NIF
-   Clave
-   Base imponible
-   Tipo impositivo
-   Cuota del impuesto
-   Recargo
-   Cuota RE
-   Importe factura
-   Fecha de cobro
-   Cuenta Financiera
-   Método de Pago
-   Importe de cobro

En caso de error u omisión en los libros, el usuario deberá desprocesar el correspondiente libro, reabrir el periodo/periodos, añadir o modificar la/las facturas emitidas o recibidas y volver a empezar el proceso de creación y procesamiento como final del correspondiente libro, teniendo en cuenta el/los periodos de facturación debido a que la numeración de registro debe ser correlativa en función de las fechas de factura.

Si el usuario tiene que introducir una factura de fecha de marzo y ya ha cerrado y generado como finales los libros de abril y mayo, deberá desprocesar los libros de mayo, abril y marzo; reabrir los periodos de mayo, abril y marzo; contabilizar la factura con fecha de marzo y finalmente, crear el libro de marzo para comprobar que la nueva factura se ha incluido en el libro de marzo, cerrar los periodos y crear y marcar como finales los libros de marzo, abril y mayo por ese orden.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Modelo 190
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Spanish Localization Bundle/Modelo 190
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/modelo-190
## Article Content: 
#### Javapackages 

:octicons-package-16: Javapackage: `org.openbravo.module.aeat190.es`

#### **Introducción**

Esta sección explica el contenido y funcionamiento del módulo **"Modelo 190"**, incluído dentro del bundle de Localización Española para Etendo.

**Descripción del Modelo**

El módulo **Modelo 190** permite a las empresas cumplir con sus obligaciones fiscales relativas a la obligatoriedad de declarar las retenciones e ingresos a cuenta sobre rendimientos del trabajo y de actividades económicas, premios y determinadas ganancias patrimoniales e imputaciones de renta.

La presentación del Modelo 190 por vía telemática deberá efectuarse en el plazo comprendido entre los días 1 y 31 de enero de cada año, en relación con las cantidades retenidas y los ingresos a cuenta efectuados correspondientes al año natural inmediato anterior.

Con este módulo, el Modelo 190 se puede presentar a Hacienda como un fichero de texto válido, obtenido a través del "Generador de Declaraciones de Impuestos".

#### **Contenido del fichero Modelo 190**

El fichero generado por Etendo, que cumple con el formato requerido por la Agencia Tributaria, contiene:

-   Una primera sección, llamada *registro tipo 1*, con información relativa a la empresa que presenta el informe, CIF, nombre de la empresa, persona de contacto y resumen de los detalles presentados.
-   Una segunda sección, llamada *registros tipo 2*, con la información relativa a la retención e ingresos a cuenta practicada a la empresa agrupada por tercero y año.

De esta forma, el informe puede contar con un único registro de tipo 1 y cero o varios registros de tipo 2.

Si el usuario abre el fichero generado con un editor de texto plano, verá una sucesión de números y letras prácticamente ilegibles para el ser humano. Si desea comprobar el contenido del fichero e incluso modificarlo antes de ser enviado a la Agencia Tributaria, puede importar dicho fichero en la AEAT (Ver abajo).

#### **Instalación y aplicación del módulo**

##### **Instalación**

Para su instalación del Modelo 190 de Etendo, el usuario debe seguir los pasos que se describen a continuación en función de la situación de partida:

-   Instalación de la última versión disponible de Etendo 
-   o la instalación del módulo de Localización Española.

!!! info
    Para la instalación del módulo de Localización Española, visite [_Marketplace_](https://marketplace.etendo.cloud/#/product-details?module=003B475055DD421B9483B5BE15AA48C5){target="_blank"}. 


##### **Aplicación del módulo**

El módulo del Modelo AEAT 190 incluye el correspondiente "conjunto de datos" o "configuración" que relaciona los tipos/rangos de impuestos (retenciones, en este caso) para España con los parámetros del 190, por tanto:

-   Una vez instalado el módulo, la "configuración del Modelo 190" debe aplicarse a la **Entidad legal con Contabilidad** que corresponda, en la ruta de aplicación: Configuración General || Organización || **Gestión del módulo de Empresa.**
-   Importante, antes de aplicar esta configuración es importante haber aplicado previamente la configuración del módulo de impuestos, puesto que el Modelo 190 depende de éste.

![](https://docs.etendo.software/latest/assets/drive/NPmuokqQMPVWHGO_5axvvqS3kqWJ7TUYhtrgII9Adx2R4lsxQxCOECCclQxInjaTso4hIHruR7f8UNtrSAMuTvupjpsmZW-osW83k_TFV3UE_QFFP8igDGJf6ctmSmSFP5WLMyHfV8lI19X_wgXEO24.png)

Al instalar y aplicar este nuevo módulo, el usuario podrá comprobar que:

-   se han creado un nuevo informe, el modelo 190 anual que se encuentra en la ruta de aplicación: Gestión Financiera || Contabilidad || Configuración || Declaración de impuestos, tal y como se muestra en la siguiente imagen:  
     

![](https://docs.etendo.software/latest/assets/drive/0DGnsbvGSRglnOfedtcm1BRq0hExCnVLCnWNfG9twk0cA9ktqHih10dD1ufrzq3uGu1oafipUnxtCc7W08aw753gYX3AzuoAMZ6ZAyknSHIwLa9eAw-kajDMk6DOjGpTM5IOKb0pxrmcm5Dj31wI2ZM.png)

-   los rangos de impuestos se han asociado al correspondiente Parámetro del informe 190, con el fin de que las transacciones ligadas a dichos impuestos completadas y contabilizadas en el sistema, se tenga en cuenta en una u otra casilla/posición del fichero, tal y como se muestra en la siguiente imagen:  
     

![](https://docs.etendo.software/latest/assets/drive/jH29-HkAFNLN3w0RKpitrmjGJ918EMfwdfbMQmfE7qEeFhSAB-tRR9z-pNWDz34lm9xlhMN1ADfKDKwicm4h6282rQATMsMggwZUCfu4ZX6aBmki3PF1g8O_dzJVRa7i55QIMWkesDoXacrd4Rb9_RQ.png)

-   y, por último, el generador de declaraciones de impuestos permite la generación del fichero para la presentación de la declaración-liquidación del modelo 190, desde la ruta de aplicación: Gestión Financiera || Contabilidad || Herramientas de análisis || Generador de declaraciones de impuestos, tal y como se muestra en la siguiente imagen:  
     

![](https://docs.etendo.software/latest/assets/drive/duCdxzeDZl6Ym8W_h-APG_n78tbJ09PZ9MLqx11_Q2x96V2K1-TrVAh5I-apRPNWffmsIybEKB06xmRie5bzRHyi9Ljf70g6ekwyusOk8ZR5lg9_7cllbMklo9vRjRB73JbKdW4q8XxdL9CwrMW3eZE.png)

#### **¿Qué se incluye en el Modelo 190 generado por Etendo?**

El informe generado por Etendo incluye únicamente las retenciones referentes a actividades económicas, puesto que es la información que el ERP maneja actualmente.

El resto de información que se incluye en el Modelo 190, como retenciones e ingresos a cuenta por rendimientos del trabajo, determinadas ganancias patrimoniales o premios, no está registrada en el ERP y, por lo tanto, no se puede incluir en el informe.

Sin embargo, si usted desea incluir esta información en su declaración, tan sólo debe importar el fichero generado por Etendo como se indica en [_Modelo 190_](https://sede.agenciatributaria.gob.es/Sede/ayuda/consultas-informaticas/declaraciones-informativas-ayuda-tecnica/modelos-190-198/modelo-190-formulario.html){target="_blank"}.

##### **Tipos de documentos y retenciones que se incluyen en el informe**

El modelo 190 es un informe de retenciones, así que sólo se tendrán en cuenta facturas de compra con retenciones a terceros ubicados en España que estén contabilizadas y pagadas (parcialmente o completamente).

Dentro de las facturas de compra, se soportan todo el rango disponible actualmente:

-   Facturas de compra (AP Invoice)
-   Facturas de abono de compra (AP Credit Memo)
-   Facturas de compra negativas (AP Invoice negativas)
-   Facturas de tipo "Reversal" (Reversed Purchase Invoice)

##### **Retenciones asociadas a parámetros del informe**

Las retenciones que vienen asociadas a los parámetros del modelo 190 son:

-   Details-Withholding\_G\_01, Clave tributaria G - subclave 01:
    -   Prestación servicios nacional 0% -15%R (-15%)
    -   Prestación servicios nacional 16% -15%R (-15%)
    -   Prestación servicios nacional 18% -15%R (-15%)
-   Details-Withholding\_G\_03, Clave tributaria G - subclave 03:
    -   Prestación servicios nacional 0% -7%R (-7%)
    -   Prestación servicios nacional 16% -7%R (-7%)
    -   Prestación servicios nacional 18% -7%R (-7%)
-   Details-Withholding\_H\_04, Clave tributaria H - subclave 04:
    -   Prestación servicios nacional 18% -1%R (-1%)

##### **Retención proporcional al pago**

La retención a incluir en el fichero del modelo 190 es proporcional a la percepción íntegra efectivamente satisfecha durante el ejercicio correspondiente:

-   por ejemplo, si tenemos una factura contabilizada pero pagada en un 50% en 2011, el informe del 190 del 2011 incluirá la parte proporcional de la retención práctica en la factura, esto es, el 50%.

Además, si durante un ejercicio se han satisfecho facturas correspondientes a ejercicios anteriores, el fichero del modelo 190 incluirá una línea por cada uno de los pagos efectuados durante dicho ejercicio, correspondientes a facturas devengadas en años anteriores, indicando, por tanto, el año de devengo.

##### **Cantidades indebidas o excesivamente percibidas en ejercicios anteriores**

El fichero del modelo 190 tiene en cuenta los datos relativos a cantidades reintegradas por sus perceptores en el ejercicio, como consecuencia de haber sido indebida o excesivamente percibidas en ejercicios anteriores, en estos supuestos:

-   cada reintegro se relaciona bajo la misma clave y, en su caso, subclave de percepción bajo la cual se incluyeron en su día las cantidades indebidas o excesivamente satisfechas
-   se refleja su importe en el campo "Percepción íntegra"
-   el campo "Signo de la percepción íntegra" se cumplimenta con la letra "N" (importe negativo)
-   y se consigna el valor (0) en el campo "Retenciones practicadas"
-   finalmente, se hace constar en el campo "Ejercicio devengo" el año en el que se devengaron originariamente las percepciones reintegradas.

!!! info
    Cuando se hayan producido reintegros procedentes de una misma persona o entidad que correspondan a percepciones originariamente devengadas en varios ejercicios, su importe se desglosa en varios apuntes o registros, de forma que cada uno de ellos refleje exclusivamente reintegros de percepciones correspondientes a un mismo ejercicio.


#### **Generación del modelo 190**

Tal y como ya se ha explicado, el modelo 190, se genera como un fichero de texto válido conforme a los requerimientos de la AEAT desde la ruta de aplicación: **Gestión Financiera || Contabilidad || Herramientas de análisis || Generador de declaraciones de impuestos || Generador de declaraciones de impuestos**

Una vez que el usuario ha introducido los datos genéricos, tales como "organización", "ejercicio", "periodo" y otros, puede introducir los parámetros de entrada propios del 190:

![](https://docs.etendo.software/latest/assets/drive/Jbjc9g-xJ_iZ2B6_xDHfLV9umzxu0_R-HS5ss8jpczAYl654wdnKknjU_i6b8wqIRhiWQbeArp2hMAGaZTsj5_zoOHLAIEq-s8BhhTEbnFmoHYcfRaLoVcxI1TlCjyjuUQeXbM7ZN7AZAuBE9Z4YjXg.png)

En este caso, se puede especificar el nombre del fichero (si no queremos el que el sistema da por defecto), y la información necesaria en caso de generar una declaración sustitutiva.

#### **Importación del modelo 190 en AEAT**

Una vez generado el fichero, el mismo tendrá que cargarse en la AEAT en la página correspondiente de [Agencia Tributaria](https://sede.agenciatributaria.gob.es/Sede/procedimientoini/GI10.shtml){target="_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Modelo 303
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Spanish Localization Bundle/Modelo 303
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/modelo-303
## Article Content: 
#### Javapackages 

:octicons-package-16: Javapackage: `org.openbravo.module.aeat303.es` <br>

#### **Introducción**

El presente manual de usuario explica el contenido y funcionamiento del nuevo módulo comercial de Etendo, **"Modelo AEAT303"**, compatible con Etendo 21.4 o versiones posteriores. Este módulo forma parte del bundle de Localización española, al igual que todas las dependencias relacionadas.

#### **Descripción del Módulo**

El módulo Modelo AEAT303 - Impuesto sobre el Valor Añadido - Autoliquidación, permite a las empresas cumplir con sus obligaciones fiscales de "Autoliquidación de IVA" como diferencia entre el IVA Devengado y el IVA Deducible, a través de la presentación del Modelo 303 como un fichero de texto válido conforme a los requerimientos establecidos por la Agencia Tributaria española (Orden EHA/3786/2008).

La estructura válida del fichero se puede encontrar en el siguiente link de la AEAT: [](http://www.aeat.es/AEAT/Contenidos_Comunes/La_Agencia_Tributaria/Ayuda/Disenyos_de_registro/Ayudas/Trimestrales_Mensuales/303_2009.pdf)[_Modelo 303 - Fichero_](https://sede.agenciatributaria.gob.es/Sede/ayuda/consultas-informaticas/presentacion-declaraciones-ayuda-tecnica/modelo-303/presentacion-electronica-modelo-303-fichero.html){target="_blank"}.

El fichero del modelo 303 contiene la siguiente información:

-   **Información genérica**
    -   NIF
    -   Apellidos o Razón Social - Nombre
    -   Ejercicio
    -   Periodo
-   **IVA devengado** (IVA repercutido en ventas), incluyendo:
    -   IVA devengado conforme al régimen general - Base, Cuota y Tipo
    -   IVA devengado conforme al régimen especial de recargo de equivalencia, especificado por tipo de IVA - Base, Cuota y Tipo
    -   IVA devengado en las adquisiciones intracomunitarias de bienes- Base y Cuota
-   **IVA Deducible** (IVA soportado en compras), incluyendo:
    -   operaciones interiores de bienes y servicios - Base y Cuota
    -   operaciones interiores de bienes de inversión - Base y Cuota
    -   importaciones de bienes - Base y Cuota
    -   importaciones de bienes de inversión - Base y Cuota
    -   adquisiciones intracomunitarias de bienes - Base y Cuota
    -   adquisiciones intracomunitarias de bienes de inversión - Base y Cuota
    -   regularizaciones
-   **Diferencia** - Resultado de la liquidación como diferencia del IVA devengado - IVA soportado deducible, incluyendo otras operaciones tales como:
    -   entregas intracomunitarias de bienes - Base
    -   exportaciones - Base
    -   operaciones no sujetas o de inversión de sujeto pasivo - Base
-   **Datos bancarios y otros.**

Dicho fichero se genera en Etendo desde el Generador de declaraciones de impuestos que se encuentra en la ruta de aplicación: "Gestión Financiera || Contabilidad || Herramientas de análisis || Generador de declaraciones de impuestos"

El fichero se puede:

1.  **pre-validar** en la pagina wed de la AEAT, en el siguiente link: [**_Formulario del 303 para su presentación (predeclaración)_**](https://www2.agenciatributaria.gob.es/es13/h/ie93030b.html){target="_blank"}.
2.  y, posteriormente **presentar** en el siguiente link de la AEAT: [**_Presentación del Modelo_**_._](https://www2.agenciatributaria.gob.es/es13/h/ie93030a.html){target="_blank"}.

La autoliquidación de IVA puede ser:

-   "**A ingresar**" (casilla 48>0), en el caso de que el IVA Devengado > IVA deducible. El IVA a ingresar se reflejará en la casilla \[I\], posición 860.
-   "**A compensar**" (casilla 48<0), en el caso de que el IVA Devengado < IVA deducible. El IVA a compensar se reflejará en la casilla \[49\], posición 804.
-   "**A devolver**" (casilla 48<0 e inscripción en el Registro de devolución mensual), en el caso de que el IVA Devengado < IVA deducible. El IVA a devolver se reflejará en la casilla \[50\], posición 822.
-   "**Cero**" o "**Sin actividad**" (casilla 48=0).

#### **Presentación del Modelo 303**

Los obligados a presentar el modelo 303 son:

-   Los sujetos pasivos que realicen actividades a las que aplique el Régimen General del Impuesto (IVA) o cualquier otro de los regímenes del mismo, a excepción del Régimen especial de agricultura, ganadería y pesca, del Régimen de recargo de equivalencia y del Régimen Simplificado.

La presentación del modelo 303 puede ser Mensual o Trimestral.

La presentación será obligatoria por vía telemática (fichero de texto válido) para los sujetos pasivos que:

-   tengan forma jurídica de sociedad anónima o sociedad de responsabilidad limitada
-   y/o estén inscritos en el "Régimen de devolución mensual".

##### **Novedades a partir del 1 de julio de 2010**

**MODIFICACIÓN TIPOS IMPOSITIVOS IVA**

La Ley 26/2009 de Presupuestos Generales del Estado para 2010, modificó los tipos general y reducido del Impuesto sobre el Valor Añadido con efectos a partir del 1 de julio, de forma que el tipo general pasa del 16% al 18% y el tipo reducido pasa del 7% al 8%, sin que se haya producido alteración alguna en relación con el tipo superreducido del 4% y con los tipos del recargo de equivalencia.

**Cumplimentación de declaraciones**

En las autoliquidaciones de IVA, modelo 303, correspondientes a los períodos iniciados desde julio de 2010 (correspondientes al mes 07 ó al 3T) , se puede dar la situación de que en un mismo período de liquidación hayan de reflejarse operaciones gravadas según los nuevos tipos impositivos (18%, 8%) junto con otras devengadas en períodos anteriores y a las que les sean de aplicación los tipos vigentes hasta el 30 de junio (7% ó 16%).

En estos supuestos deberá consignarse en las casillas correspondientes la suma algebraica de las bases imponibles. De igual forma se procederá con las casillas correspondientes a las cuotas devengadas.

En cuanto a las casillas relativas a los tipos impositivos, se consignará el tipo resultante del cociente entre la cuota y la base imponible declarada, cualquiera que sea el resultado y si este cociente no da un número entero, se hará constar los dos primeros decimales del número resultante.

En las autoliquidaciones modelo 303 correspondientes al 1T ó 2T de 2010 o a los meses 01 a 06 de 2010 no se puedan consignar bases ni cuotas a los nuevos tipos impositivos del 18% ó 8%.

!!! info
    Los cambios expuestos en esta sección, implican una modificación del contenido de los datos de referencia del módulo.


##### **Novedades a partir del 1 de septiembre de 2012**

**MODIFICACIÓN TIPOS IMPOSITIVOS IVA Y RECARGO DE EQUIVALENCIA**

El Real Decreto Ley 20/2012 de medidas para garantizar la estabilidad presupuestaria y de fomento de la competitividad, modificó los tipos general y reducido del Impuesto sobre el Valor Añadido con efectos a partir del 1 de septiembre, de forma que el tipo general pasa del 18% al 21% y el tipo reducido pasa del 8% al 10%, sin que se haya producido alteración alguna en relación con el tipo superreducido del 4%. Igualmente, los tipos de recargo de equivalencia pasan del 4% al 5,2% y del 1% al 1,4%.

**Cumplimentación de declaraciones**

En las autoliquidaciones de IVA, modelo 303, correspondientes a los períodos iniciados desde septiembre de 2012 (correspondientes al mes 09 ó al 3T), se puede dar la situación de que en un mismo período de liquidación hayan de reflejarse operaciones gravadas según los nuevos tipos impositivos junto con otras devengadas en períodos anteriores y a las que les sean de aplicación los tipos vigentes hasta el 30 de agosto.

En estos supuestos, deberá consignarse en las casillas correspondientes la suma algebraica de las bases imponibles. De igual forma se procederá con las casillas correspondientes a las cuotas devengadas.

En cuanto a las casillas relativas a los tipos impositivos, se consignará el tipo resultante del cociente entre la cuota y la base imponible declarada, cualquiera que sea el resultado y si este cociente no da un número entero, se hará constar los dos primeros decimales del número resultante.

En las autoliquidaciones modelo 303 correspondientes al 1T ó 2T de 2012 o a los meses 01 a 08 de 2012 no se puedan consignar bases ni cuotas a los nuevos tipos impositivos.

!!! info
    Los cambios expuestos en esta sección, implican una modificación del contenido de los datos de referencia del módulo.


#### **Instalación y aplicación del módulo**

##### **Instalación**

!!! info
    Para la instalación del módulo **“AEAT - Modelo 303”** visite [Marketpace](https://marketplace.etendo.cloud/#/product-details?module=003B475055DD421B9483B5BE15AA48C5){target="_blank"}. 



##### **Aplicación del módulo**

El módulo del Modelo 303 incluye unos datos de referencia que relaciona los tipos/rangos de impuestos para España con los parámetros del 303, por tanto:

-   Una vez insalado el módulo, los datos de referencia deben aplicarse a la Entidad legal con Contabilidad que corresponda, en la ruta de aplicación: Configuración General || Organización || Gestión del módulo de Empresa.

![](https://docs.etendo.software/latest/assets/drive/EhxTBUvs6RBHj5qryz08lOpzAmCekUOmboNjz-E3OUuIK92wRMMzhOul3GuQ1hHMAutQbKIBKSi4NRQ0lPVDxWALgH4Fzsmc47MYlVJZZAOHS5giW468E6SMHsBjt2vqa8pn93TEZUBvHqiUId8oegI.png)

#### **Contenido del módulo**

Al instalar y aplicar este nuevo módulo, el usuario podrá comprobar que:

-   Se han creado dos nuevos informes, el modelo 303 mensual y el trimestral para la organización/es en la ruta de aplicación: Gestión Financiera || Contabilidad || Configuración || Declaración de impuestos, tal y como se muestra en la siguiente imagen:  
     

![](https://docs.etendo.software/latest/assets/drive/MAZZa2VuPorWEk1BAyrZHON1lh2tNqdkQna7BJhsI0E5g4R9ML0BrK9Xvpicq7ZG4xqlzAMn_0JEJBOskqgZvemex1fqHA8u9dvn6XT1190PDLTHuuzsunhwnbZ9PeooUmrqd6oiKCt-fI-J7ONuNsU.png)

-   La pestaña "Sección de Impuestos" contiene la definición de toda la información que se va a incluir en el modelo 303 y, por tanto, en el fichero del 303 que se generará desde la ventana "Generador de Declaraciones de Impuestos". De todas estas secciones cabe destacar las secciones "IVA Devengado", "IVA Deducible" y "Diferencia".  
    Por ejemplo, la sección "IVA Devengado" incluye los parámetros siguientes en la pestaña "Parámetro de declaración":
    -   IVA Devengado - Régimen Ordinario
    -   IVA Devengado - Recargo de Equivalencia
    -   IVA Devengado - Adquisiciones Intracomunitarias

Estos parámetros se ligan a los tipos de impuestos en función de que las operaciones ligadas a ellos deban declararse, por ejemplo, como parte del IVA Devengado en Régimen Ordinario o bien como parte del IVA Devengado por Recargo de Equivalencia.

![](https://docs.etendo.software/latest/assets/drive/zC4megIrlvdoyIVRkdw2ET8DrB6IV8rIcxQMRlZH4qJAHIO8TFlmif7eUuqb6NRoM6vvzm1mP5BLwsBOKFLQhDOLPbloFfYy6AVDe9p820rJKJem-Jy9UIlCzCafEWf15srFfJUOfrBR9fm5GSiUVsg.png)

-   Por tanto, los rangos de impuestos se han asociado al correspondiente parámetro del 303, con el fin de que las transacciones completadas y contabilizadas ligadas a dichos impuestos, se tenga en cuenta en una u otra casilla/posición del fichero.  
     

![](https://docs.etendo.software/latest/assets/drive/Vxz9LkuESteDKaeIzQmhO9gu10wFqL8QU579ZxLacwnA5WlhWtA-wkXgQvBfe7ZJCX6ksbd4XfoRk4U7sKTbnAQAWBbTgFBYJau2aJstONlCeoFElqPArRuDIf_dGIaD50o6yGJkxowqixFQAJ18Beo.png)

-   Por último, el generador de declaraciones de impuestos permite la generación del fichero para la presentación de la declaración-liquidación del modelo 303, desde la ruta de aplicación: Gestión Financiera || Contabilidad || Herramientas de análisis || Generador de declaraciones de impuestos, tal y como se muestra en la siguiente imagen:  
     

![](https://docs.etendo.software/latest/assets/drive/612TP0yYxrPiuET6z7IkyF40fr5KGP6XC5cxCTbrK5eg6K1Im1xh_XYc3PzLVeMApJERGkm_9QHTuvuTl4slrb_t8TktOSrtNeisdNQcSpzodyq9c8wptIpFshledbtdup6U7-Kmw5FiEvBYOvfqsDI.png)

#### **Configuración**

##### **Configuración de impuestos / IVA**

El usuario deberá navegar a la ruta de aplicación: "Configuración General / Gestión del módulo de Empresa", seleccionar la organización legal con contabilidad y aplicar los módulos en el orden especificado:

-   primero el módulo de impuestos si no está aplicado previamente y a nivel (\*)
-   y después el módulo del 303 a nivel Organización Legal con contabilidad

##### **Configuración del modelo 303**

La configuración del modelo 303 se instala por defecto y se puede comprobar en la ruta de aplicación: Gestión Financiera//Contabilidad//Configuración//Declaración de Impuestos.

Tanto para el modelo 303 mensual como trimestral en la pestaña "Sección de declaración" se han creado 11 secciones, una por cada grupo de información a incluir a la hora de generar el fichero del Modelo 303:

![](https://docs.etendo.software/latest/assets/drive/5e_DW0KWWXZ8E1fET-mk_Y2oq6YGls8fZL-zmAGlO8wzUqgFH0zKq0ir2QP6CK-SOWttp263yE5VKCjPLKuz5ubn63i8nzztWYzLioqT1Ar_RTn9zlNOCtG9T5CRG2wD0fzJpACMuAA7-vycnuQo390.png)

-   **Fichero**
    -   Esta sección contiene un parámetro de tipo "Entrada", para que el usuario pueda introducir el nombre del fichero 303 al generarlo.
-   **Tipo de declaración**
    -   Esta sección contiene a 8 parámetros de tipo "Entrada", uno por cada tipo de declaración, para que el usuario pueda marcar el correspondiente al generar el fichero.
        -   Compensación
        -   Devolución
        -   Ingreso
        -   Resultado cero
        -   Ingreso domiciliación bancaria
        -   Ingreso cuenta corriente tributaria
        -   Devolución cuenta corriente tributaria
        -   Devolución por transferencia al extranjero
-   **Sin Actividad**
    -   Esta sección contiene 1 parámetro de tipo "Entrada" para que el usuario pueda marcar una liquidación de IVA como "Sin Actividad".
-   **Constantes**
    -   Esta sección incluye todos los valores constantes que requiere el 303, tales como:
        -   Modelo = 303
        -   Página = 01
        -   Identificador de fin de registro = </T30301>
-   **Identificación**
    -   Esta sección incluye 4 parámetros de "Salida" que se corresponden con datos de identificación de la organización para la cual se genera el fichero y 1 parámetro de "Entrada" de tipo "checkbox" que es "Inscrito en el Registro de devolución mensual" que podría configurarse como constante.
-   **IVA Devengado**
    -   Esta sección incluye 3 parámetros de tipo "Salida", uno por cada tipo de IVA devengado.
        -   "IVA Devengado - Régimen General" de IVA. Este parámetro está ligado a los rangos de impuestos cuyas operaciones tributan en régimen general, por ejemplo, las entregas de bienes y servicios dentro del territorio de aplicación del impuesto.
        -   "IVA Devengado - Recargo de Equivalencia". Este parámetro está ligado a los rangos de impuestos cuyas operaciones tributan en régimen de recargo de equivalencia, por ejemplo, las entregas de bienes a minoristas dentro del territorio de aplicación del impuesto.
        -   "IVA Devengado - Adquisiciones Intracomunitarias”. Este parámetro está ligado a los rangos de impuestos de adquisiciones intracomunitarias de bienes

El listado completo de los rangos de impuesto ligados a cada uno de estos parámetros se puede consultar en el anexo al final de este documento.

-   **IVA Deducible**
    -   Esta sección incluye un total de 12 parámetros, 6 parámetros de tipo "Salida" y otros 6 de tipo "Entrada".  
        Los parámetros de tipo "Salida" se corresponden con el tipo de IVA Deducible del que se puede sacar información de Etendo, por ejemplo "IVA Deducible por cuotas soportadas en operaciones interiores corrientes".  
        Los parámetros de tipo "Entrada" se corresponden con tipos de IVA Deducible para los que no se puede sacar información de Etendo, por ejemplo "IVA Deducible por compensación Régimen Esp. A.G y P.(cuota)

El listado completo de los rangos de impuesto ligados a cada uno de estos parámetros se puede consultar en el anexo al final de este documento.

-   **Diferencia**
    -   Esta sección incluye 4 parámetros de tipo "Entrada" para que el usuario pueda introducir la siguiente información a la hora de generar el fichero:
        -   % Atribuible a la Administración del Estado %.  
            Los sujetos pasivos que tributen conjuntamente en la Administración del Estado y en las Diputaciones del País Vasco o a la Comunidad Foral de Navarra, deben hacer constar el % del volumen de operaciones en territorio común y que, por tanto, deben tributar en la Administración del Estado; el resto de sujetos pasivos harán costar un 100%.  
            Este dato podría configurarse como constante.
        -   Cuotas a compensar de periodos anteriores. Los sujetos pasivos deben hacer constar, cuando sea aplicable, las cuotas positivas a compensar procedentes de periodos anteriores.
        -   Resultado de la regularización anual. En la última liquidación del año se hará constar el resultado de la regularización anual por inversiones
        -   A deducir (autoliquidación complementaria), exclusivamente en el caso de declaración complementaria se hará constar el resultado de la última declaración presentada por el mismo concepto, correspondiente al mismo ejercicio y periodo.
    -   Y, además, 3 parámetros de salida correspondientes a operaciones no sujetas que originan derecho a deducción:
        -   Entregas Intracomunitarias de bienes. Este parámetro está ligado a los rangos de impuestos que se listan a continuación:
            -   Entregas intracomunitarias (%N=>0%)
            -   Entregas intracomunitarias (%R=>0%)
            -   Entregas intracomunitarias (%SR=>0%)
            -   Entregas intracomunitarias Bienes Inversión (%N=>0%)
        -   Exportaciones y Operaciones asimiladas. Este parámetro está ligado a los rangos de impuestos que se listan a continuación:
            -   Entregas a Canarias,Ceuta y Melilla (%N=>0%)
            -   Entregas a Canarias,Ceuta y Melilla (%SR=>0%)
            -   Entregas a Canarias,Ceuta y Melilla (%R=>0%)
            -   Exportaciones (%N=>0%)
            -   Exportaciones (%R=>0%)
            -   Exportaciones (%SR=>0%)
            -   Exportaciones Bienes Inversión (%N=>0%)
        -   Operaciones no sujetas o con inversión del sujeto pasivo. Este parámetro está ligado a losrangos de impuestos que se listan a continuación:
            -   Servicios a Canarias, Ceuta y Melilla (%N=>0%)
            -   Servicios a Canarias, Ceuta y Melilla (%SR=>0%)
            -   Servicios a Canarias, Ceuta y Melilla (%R=>0%)
            -   Servicios prestados internacional (%N=>0%)
            -   Servicios prestados internacional (%R=>0%)
            -   Servicios prestados UE (%N=>0%)
            -   Servicios prestados UE (%R=>0%)
-   **Devolución**
    -   Esta sección incluye un parámetro de tipo "Entrada" que es la cuenta bancaria a utilizar en caso de declaración a devolver. Este dato podría configurarse como constante.
-   **Ingreso**
    -   Esta sección incluye 5 parámetros de tipo "Entrada" relativos a declaraciones "A ingresar":
        -   la cuenta bancaria a utilizar en caso de declaración a ingresar. Este dato podría configurarse como constante.
        -   No consta
        -   Efectivo
        -   Adeudo en cuenta
        -   Domiciliación
-   **Complementaria**
    -   Esta sección incluye 2 parámetros de tipo entrada:
        -   Declaración complementaria, como un checkbox (si/no)
        -   Nº Justificate, de la declaración anterior que se complementa.

##### **Tipos de documento y fecha**

A la hora de generar el fichero de texto válido para declarar el Modelo 303 de liquidación de IVA, se tiene en cuenta:

-   El IVA (soportado) deducible registrado y contabilizado en las Facturas/Abonos de Compra, que el usuario puede registrar en la ruta de aplicación: Gestión de Compras || Transacciones || Factura (Proveedor), para los siguientes tipos de documento:
    -   AP Invoice (Factura de compra)
    -   AP Invoice negativa (Abono de compra)
    -   AP Credit Memo (Abono de compra)
-   El IVA devengado registrado y contabilizado en las Facturas/Abonos de Venta que el usuario puede emitir en la ruta de aplicación:    Gestión de Ventas || Transacciones || Factura (Cliente), para los siguientes tipos de documento:
    -   AR Invoice (Factura de venta)
    -   AR Invoice negativa (Abono de venta)
    -   AR Credit Memo (Abono de venta)

La actual versión del módulo no tiene en cuenta los tipos de documento de Etendo sin APRM que se enumeran a continuación, y que podrían estar ligados a un rango de impuesto, por considerarse que no se deberían utilizar para la contabilización de facturas que incluyan IVA:

-   Extracto bancario
-   Diario de Caja
-   Liquidaciones y asientos manuales

**La fecha que se tiene en cuenta** para la inclusión de las facturas de compra/venta en la declaración/fichero del 303 es la **fecha de contabilización**, lo cual que implica que:

-   Las facturas de compra/venta con fecha de contabilización desde el 01 de junio del 2010 hasta 30 de junio del 2010, se incluirán en la declaración Mensual correspondiente al mes de junio del 2010; en caso de tipo de declaración mensual, a presentar antes del 20 de agosto del 2010.
-   Las facturas de compra/venta con fecha de contabilización desde el 01 de abril del 2010 hasta el 30 de junio del 2010, se incluirán en la declaración trimestral correspondiente al segundo trimestre del año; en caso de tipo de declaración trimestral, a presentar antes del 20 de agosto del 2010.

#### **Caso de Usuario**

##### **IVA Devengado - escenarios**

Tal y como se ha explicado con anterioridad, el principal objetivo del modelo 303 es que las empresas españolas puedan autoliquidar el IVA regularmente como diferencia entre el IVA Devengado en facturas emitidas de Venta y el IVA soportado deducible.

El fichero del 303 recoge desde la posición 72 a la 357, la base imponible, tipo y cuota del IVA devengado en las operaciones de venta bajo el régimen general, especificando por tipo de IVA (16%/18%, 7%/8% y 4%), régimen de recargo de equivalencia especificado por tipo de IVA (4%, 1% y 0,5%) así como la base y cuota del IVA devengado en las adquisiciones intracomunitarias.

###### **IVA devengado - régimen general**

Durante el periodo correspondiente (mes/trimestre), el usuario contabilizará en Etendo las facturas/abonos de venta emitidas tanto por la entrega de bienes como por la prestación de servicios dentro del territorio de aplicación del impuesto/IVA (Península y Baleares).

Se tendrán en cuenta:

1.  las facturas/abonos emitidas por la venta de productos o por la prestación de servicios, contabilizadas en la ruta de aplicación "Gestión de Ventas || Transacciones || Factura (Cliente)"
2.  las facturas/abonos financieros emitidos desde la ruta de aplicación: "Gestión de Ventas || Transacciones || Factura (Cliente)", marcados como "Factura Financiera" a nivel de línea de factura de venta, ligadas a un concepto contable previamente creado y asignado a una categoría de impuesto.
3.  las líneas de impuesto manualmente introducidas por el usuario en la ruta de aplicación: "Gestión de Ventas || Transacciones || Factura (Cliente) - Cabecera - Impuestos"

El fichero del 303 recogerá dichas transacciones dentro del mes/trimestre correspondiente, teniendo en cuenta la fecha de contabilización de dichas facturas, ya que el IVA se devenga cuando se realiza la puesta a disposición de los bienes o la prestación del servicio lo cual conlleva la facturación correspondiente, facturas que deben contabilizarse para tenerse en cuenta.

Los productos/servicios/conceptos contables tiene que estar ligados a una de las siguientes categorías de impuestos:

-   IVA Normal
-   IVA Reducido
-   IVA Super reducido
-   IVA Normal Servicios
-   IVA Reducido Servicios
-   IVA Super Reducido Servicios
-   IVA Normal B. Inmuebles
-   IVA Reducido B. Inmuebles
-   IVA Normal Bienes Inversión

Las líneas de facturas tienen que tener un rango de impuesto asociado a uno de los parámetros del 303 de la sección "IVA Devengado - Régimen General".

###### **IVA devengado - régimen de recargo de equivalencia**

Durante el periodo correspondiente (mes/trimestre), el usuario contabilizará en Etendo las facturas/abonos de venta emitidas por la entrega de bienes dentro del territorio de aplicación del impuesto/IVA (Península y Baleares) a terceros minoristas que se encuentren en régimen de recargo de equivalencia.

En estos casos, el emisor de la factura incluye, además del IVA, el tipo (%) de recargo correspondiente.

Se tendrán en cuenta:

1.  las facturas/abonos emitidas por la venta de productos, contabilizadas en la ruta de aplicación "Gestión de Ventas || Transacciones || Factura (Cliente)"
2.  las facturas/abonos financieros emitidos desde la ruta de aplicación: "Gestión de Ventas || Transacciones || Factura (Cliente)", marcados como "Factura Financiera" a nivel de línea de factura de venta, ligadas a un concepto contable previamente creado y asignado a una categoría de impuesto.
3.  las lineas de impuesto manualmente introducidas en el usuario en la ruta de aplicación: "Gestión de Ventas || Transacciones || Factura (Cliente) - Cabecera - Impuestos"

El fichero del 303 recogerá dichas transacciones dentro del mes/trimestre correspondiente, teniendo en cuenta la fecha de contabilización de dichas facturas, ya que el IVA se devenga cuando se realiza la puesta a disposición de los bienes, lo cual conlleva la facturación correspondiente, facturas que deben contabilizarse para tenerse en cuenta.

Los productos/servicios/conceptos contables tiene que estar ligados a una de las siguientes categorías de impuestos:

-   IVA Normal
-   IVA Reducido
-   IVA Super reducido

Las líneas de facturas tienen que tener un rango de impuesto asociado a uno de los parámetros del 303 de la sección "IVA Devengado - Recargo de Equivalencia".

###### **IVA devengado - Adquisiciones intracomunitarias**

Durante el periodo correspondiente (mes/trimestre), el usuario registrará y contabilizará en Etendo las facturas/abonos de compra recibidos de sus proveedores/acreedores (no residentes en territorio de aplicación del impuesto, pero residentes en la Unión Europea que son operadores intracomunitarios), por la adquisición de bienes dentro del territorio de aplicación del impuesto/IVA (Península y Baleares).

Se tendrán en cuenta:

1.  las facturas/abonos registradas en el sistema por la compra de productos, contabilizadas en la ruta de aplicación "Gestión de Compras || Transacciones || Factura (Proveedor)"
2.  las facturas/abonos financieros emitidos desde la ruta de aplicación: ""Gestión de Compras || Transacciones || Factura (Proveedor)", marcados como "Factura Financiera" a nivel de línea de factura de compra, ligadas a un concepto contable previamente creado y asignado a una categoría de impuesto.
3.  las líneas de impuesto manualmente introducidas en el usuario en la ruta de aplicación: "Gestión de Compras || Transacciones || Factura (Proveedor) - Cabecera - Impuestos"

Los productos/conceptos contables tienen que estar relacionados con una de las siguientes categorías de impuesto:

-   IVA Normal
-   IVA Reducido
-   IVA Super Reducido

Las líneas de facturas tienen que tener un rango de impuesto asociado a uno de los parámetros del 303 de la sección "IVA Devengado - Adquisiciones Intracomunitarias".

Es importante recalcar que el caso de las adquisiciones intracomunitarias se considerarán realizadas en el territorio de aplicación del impuesto cuando:

-   se encuentre en este territorio el lugar de la llegada de la expedición o transporte con destino al adquirente.
-   y cuando el adquirente haya comunicado al vendedor el número de identificación a efectos del impuesto sobre el Valor Añadido atribuido por la Administración española.

Este régimen se caracteriza por el gravamen en destino de las entregas intracomunitarias realizadas entre empresas. Esto significa que se aplique una exención en el país de origen y que se considere realizado el hecho imponible en el de destino, con motivo de la adquisición. A esto se le denomina adquisición intracomunitaria de bienes, y se altera de esta manera la regla general del impuesto, al ser el sujeto pasivo del impuesto el que compra y no el que vende.

El sujeto pasivo/adquiriente es, por tanto, quien debe liquidar el IVA y, por tanto, deberá autorrepercutirse el IVA y a su vez deducírselo, si aplica. Es por ello que este tipo de operaciones, como las operaciones de Inversión de Sujeto Pasivo aparecen tanto en la sección de IVA devengado como en la sección de IVA deducible.

##### **IVA Deducible - escenarios**

Tal y como se ha explicado con anterioridad, el principal objetivo del modelo 303 es que las empresas españolas pueda autoliquidar el IVA regularmente como diferencia entre el IVA Devengado en facturas emitidas de Venta y el IVA soportado deducible.

El fichero del 303 recoge desde la posición 357 a la 612, la base imponible y cuota, en la mayoría de los casos, del IVA soportado que es deducible en operaciones interiores, importaciones y adquisiciones intracomunitarias de bienes corrientes (bienes y servicios) y de bienes de inversión.

###### **IVA deducible - cuotas soportadas en operaciones interiores corrientes**

Durante el periodo correspondiente (mes/trimestre), el usuario registrará y contabilizará en Etendo las facturas/abonos de compra recibidos de sus proveedores/acreedores tanto por la compra de bienes como por los servicios prestados a la Empresa dentro del territorio de aplicación del impuesto/IVA (Península y Baleares), así como las facturas financieras.

Los productos/servicios/conceptos contables tienen que estar relacionados con una de las siguientes categorías de impuesto:

-   IVA Normal
-   IVA Reducido
-   IVA Super Reducido
-   IVA Normal Servicios
-   IVA Reducido Servicios
-   IVA Super Reducido Servicios
-   IVA Normal B. Inmuebles
-   IVA Reducido B. Inmuebles

Las líneas de facturas tienen que tener un rango de impuesto asociado a uno de los parámetros del 303 de la sección "IVA Deducible - Por cuotas soportadas en operaciones interiores corrientes".

###### **IVA deducible - operaciones interiores bienes de inversión**

Durante el periodo correspondiente (mes/trimestre), el usuario registrará y contabilizará en Etendo las facturas/abonos de compra recibidos de sus proveedores/acreedores tanto por la compra de bienes de inversión (se consideran bienes de inversión los bienes con un valor superior a 3.000,00 €) dentro del territorio de aplicación del impuesto/IVA (Península y Baleares), así como las facturas financieras.

Los productos/servicios/conceptos contables tienen que estar relacionados con una de las siguientes categorías de impuesto:

-   IVA Normal Bienes Inversión

Las líneas de facturas tienen que tener un rango de impuesto asociado a uno de los parámetros del 303 de la sección "IVA Deducible - Operaciones interiores bienes de inversión".

###### **IVA deducible - por cuotas devengadas en importaciones de bienes**

Durante el periodo correspondiente (mes/trimestre), el usuario registrará y contabilizará en Etendo las facturas/abonos de compra recibidos de sus proveedores/acreedores (no residentes en territorio de aplicación del impuesto), por la importación de bienes dentro del territorio de aplicación del impuesto/IVA (Península y Baleares), así como las facturas financieras.

Los productos/conceptos contables tienen que estar relacionados con una de las siguientes categorías de impuesto:

-   IVA Normal
-   IVA Reducido
-   IVA Super Reducido

Las líneas de facturas tienen que tener un rango de impuesto asociado a uno de los parámetros del 303 de la sección "IVA Deducible - Por cuotas devengadas en las importaciones de bienes corrientes".

###### **IVA deducible - importaciones bienes de inversión**

Durante el periodo correspondiente (mes/trimestre), el usuario registrará y contabilizará en Etendo las facturas/abonos de compra recibidos de sus proveedores/acreedores (no residentes en territorio de aplicación del impuesto), por la importación de bienes de inversión dentro del territorio de aplicación del impuesto/IVA (Península y Baleares), así como las facturas financieras.

Los productos/conceptos contables tienen que estar relacionados con una de las siguientes categorías de impuesto:

-   IVA Normal Bienes Inversión

Las líneas de facturas tienen que tener un rango de impuesto asociado a uno de los parámetros del 303 de la sección "IVA Deducible - Importaciones bienes de inversión".

###### **IVA deducible - adquisiciones intracomunitarias de bienes**

Durante el periodo correspondiente (mes/trimestre), el usuario registrará y contabilizará en Etendo las facturas/abonos de compra recibidos de sus proveedores/acreedores (no residentes en territorio de aplicación del impuesto, pero residentes en la Unión Europea que son operadores intracomunitarios), por la adquisición de bienes dentro del territorio de aplicación del impuesto/IVA (Península y Baleares), así como las facturas financieras.

Los productos/conceptos contables tienen que estar relacionados con una de las siguientes categorías de impuesto:

-   IVA Normal
-   IVA Reducido
-   IVA Super Reducido

Las líneas de facturas tienen que tener un rango de impuesto asociado a uno de los parámetros del 303 de la sección "IVA Deducible - adquisiciones intracomunitarias de bienes corrientes".

Tal y como ya se ha mencionado, es importante recalcar que el caso de las adquisiciones intracomunitarias se considerarán realizadas en el territorio de aplicación del impuesto cuando:

-   se encuentre en este territorio el lugar de la llegada de la expedición o transporte con destino al adquirente.
-   y cuando el adquirente haya comunicado al vendedor el número de identificación a efectos del impuesto sobre el Valor Añadido atribuido por la Administración española.

Este régimen se caracteriza por el gravamen en destino de las entregas intracomunitarias realizadas entre empresas. Esto significa que se aplique una exención en el país de origen y que se considere realizado el hecho imponible en el de destino, con motivo de la adquisición. A esto se le denomina adquisición intracomunitaria de bienes, y se altera de esta manera la regla general del impuesto, al ser el sujeto pasivo del impuesto el que compra y no el que vende.

El sujeto pasivo/adquiriente es, por tanto, quien debe liquidar el IVA y, por tanto, deberá autorrepercutirse el IVA y a su vez deducírselo, si aplica. Es por ello que este tipo de operaciones, como las operaciones de Inversión de Sujeto Pasivo aparecen tanto en la sección de IVA devengado como en la sección de IVA deducible.

###### **IVA deducible - adquisiciones intracomunitarias de bienes de inversión**

Durante el periodo correspondiente (mes/trimestre), el usuario registrará y contabilizará en Etendo las facturas/abonos de compra recibidos de sus proveedores/acreedores (no residentes en territorio de aplicación del impuesto, pero residentes en la Unión Europea que son operadores intracomunitarios), por la adquisición de bienes de inversión dentro del territorio de aplicación del impuesto/IVA (Península y Baleares), así como las facturas financieras.

Los productos/conceptos contables tienen que estar relacionados con una de las siguientes categorías de impuesto:

-   IVA Normal Bienes Inversión

Las líneas de facturas tienen que tener un rango de impuesto asociado a uno de los parámetros del 303 de la sección "IVA Deducible - adquisiciones intracomunitarias de bienes de inversión".

##### **Diferencia - escenarios**

El fichero del 303 recoge desde la posición 629 a la 804, los datos relativos a la diferencia entre el IVA Devengado y el Deducible, junto con otro tipo de información adicional necesaria para el cálculo del resultado final casilla \[48\]

Desde Etendo, el usuario puede obtener la diferencia entre IVA Devengado y Deducible, así como parte de la información adicional necesaria para el cálculo del resultado final, el resto debe introducirse por parte del usuario como "parámetros de entrada" a la hora de generar el fichero.

La información que el usuario puede obtener desde el sistema es las bases imponibles para un periodo determinado (mes/trimestre) respecto de las operaciones que a continuación se detallan:

-   **Entregas intracomunitarias** - en este caso el sistema tiene en cuenta las facturas/abonos/facturas financieras de venta a clientes no residentes en territorio de aplicación del impuesto pero residentes en la Unión Europea, emitidos y contabilizados, por la entrega exenta de IVA de bienes fuera del territorio de aplicación del impuesto/IVA (Península y Baleares).  
    Las líneas de facturas tienen que tener un rango de impuesto asociado a uno de los parámetros del 303 de la sección "Diferencia - Entregas Intracomunitarias".
-   **Exportaciones y operaciones asimiladas** - lo mismo aplica a las exportaciones, en este caso el sistema tiene en cuenta las facturas/abonos/facturas financieras de venta emitidas y contabilizas, a clientes extranjeros, emitidos y contablizados, por la entrega exenta de IVA de bienes fuera del territorio de aplicación del impuesto/IVA (Península y Baleares).  
    Las líneas de facturas tienen que tener un rango de impuesto asociado a uno de los parámetros del 303 de la sección "Diferencia - Exportaciones y Operaciones Asimiladas".
-   **Operaciones no sujetas o con inversión del sujeto pasivo** que origina derecho a deducción - este caso aplica a facturas/abonos/facturas financieras de venta emitidos y contabilizados, por la prestación de servicios de la Empresa fuera del territorio de aplicación del impuesto, servicios exentos pero que originan derecho a deducción.  
    Las líneas de facturas tienen que tener un rango de impuesto asociado a uno de los parámetros del 303 de la sección "Diferencia - Operaciones no sujetas o con inversión del sujeto pasivo".

El resto de datos deben ser introducidos manualmente por el usuario a la hora de generar el modelo 303 desde la ventana "Generador de declaraciones de impuestos", tal y como se muestra en la pantalla siguiente:

![](https://docs.etendo.software/latest/assets/drive/1aOcwK47kn7zNbQB4UYWQgR7MrNA0sPoc7gech6cMPSdUr6ozKUpHPmXThitLJ-cH-J1CGwfirc3uiEWM5eWv4b_uTTVtgibwWIKX_45wOoSiXPSsu6KqC7-Uqbpf806myQtrgX_zTtxob5SkKC21jY.png)

##### **Devoluciones - escenarios**

###### **Devoluciones - Devolución/Devolución cuenta corriente tributaria**

Para este tipo de declaraciones, y siempre que el check 'Inscrito en registro de devolución mensual' esté marcado, los siguientes campos son obligatorios:

- IBAN
- Marca SEPA

###### **Devoluciones - Devolución por transferencia al extranjero**

Para este tipo de declaraciones, y siempre que el check 'Inscrito en registro de devolución mensual' esté marcado, los siguientes campos son obligatorios: 

- Domiciliación/Devolución - IBAN (cuenta bancaria)
- Devolución - Banco/Bank name
- Devolución - Dirección del Banco/ Bank address
- Devolución - Ciudad/City
- Devolución - Código País/Country code
- Devolución - Marca SEPA

##### Configuración previa antes de generar el Informe

###### **Actividades del I.A.E.**

En el Modelo 303, para generar el informe mensual - último periodo, a partir de 2022, se deben declarar las principales actividades del I.A.E. (Impuesto de Actividades Económicas) en las que la empresa trabaja habitualmente.

El módulo Epígrafes I.A.E., instalado como dependencia del 303, añade una nueva solapa a la ventana de Organización en la que puede indicar todas las actividades en las que su empresa ha estado trabajando. El modelo 303 debe incluir como mínimo una actividad principal, que debe estar marcada en la aplicación como por defecto, y como máximo 5 actividades. En caso de incluir más de 5 actividades, se incluirán en el informe las 5 primeras según el número de línea.

![](https://docs.etendo.software/latest/assets/drive/xWyc9Dzkqn1i48qdwqYjwylIUK39OllwglsbxorOf_u8TNJXZr4J4fAxALMyMvi6eCiATDGan8Z0C2No0SA-NVcsiXBPGo1qvj6VLamQwVYMTUgnW5oMaiouFU-eY65XVXK_YZPPzg6z6Rns5Bl-9IpSiIjKz-NCaNr6oG1tsoCdlsSPPfFyGqmH_pPBnQ.png)

En el módulo de Epígrafes IAE se incluye el conjunto correspondiente a la clave 1. Si desea incluir un epígrafe que pertenezca a cualquier otra clave, tan sólo debe crear un nuevo registro en la ventana Epígrafes IAE e incluirlo en un registro de la solapa de Actividades del IAE de la ventana de Organización.

Para el modelo 303, los campos 'Epígrafe IAE' y 'Código' son obligatorios

##### **Generación del modelo 303**

Tal y como ya se ha explicado, el modelo 303 de autoliquidación de IVA, se genera como un fichero de texto válido conforme a los requerimientos de la AEAT desde la ruta de aplicación: Gestión Financiera || Contabilidad || Herramientas de análisis || Generador de declaraciones de impuestos || Generador de declaraciones de impuestos

Una vez que el usuario ha introducido los datos genéricos, tales como "organización", "ejercicio", "periodo":

![](https://docs.etendo.software/latest/assets/drive/dNa0Xp7cP15EVu-NquNiO27FfKbbDTYXfLQ5Wm4I8LxL3ah4xw4_v3_PB6zShaBBNuFB1dwW9O15LSxabPohtRNc3xjWGMrgxQzdvqRagqs2C0A6Pwq3DJ5-FVhdBE-RMxe09uIGBEXM5YE7NQ3KRWg.png)

se pueden introducir los parámetros de entrada, o datos que no pueden obtenerse de Etendo a través de botón de proceso "Parámetros de entrada".

!!! info
    Es importante recalcar que algunos de los parámetros de entrada que se introducen a continuación, como por ejemplo "Inscrito en el Registro Devolución Mensual", pueden configurarse como parámetros "Constantes" con el fin de no tener que introducirlos cada vez que se genera el fichero del 303.


La forma de hacerlo es:

-   buscar el parámetro de entrada del 303 en la ventana "Declaración de Impuestos", pestaña "Sección de declaración". Por ejemplo, el parámetro de entrada "Inscrito en el Registro de devolución mensual" que se encuentra en la Sección de declaración "Identificación"
-   cambiar el parámetro de tipo "Entrada" a "Constante". En el campo "Constant Value" añadir "1", en caso de inscripción en el registro de devolución mensual, o bien añadir "2", en caso de que el sujeto pasivo no esté inscrito en el registro de devolución mensual.

Es importante recalcar que si se produce una actualización de los datos de referencia de este módulo, los cambios de parámetros de entrada a constante se sobreescribirán, por lo que será necesario el volver a configurarlos.

Las secciones de la nueva ventana que se muestra se corresponden con las secciones definidas para el Modelo 303:

Secciones: "**Fichero**", "**Tipo de declaración**" y "**Sin actividad**":

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/modelo-303/seccion-fichero-tipo-dec-sin-act.png)

Secciones: "**IVA deducible**", **"Liquidación-resultado"** y **"Banco"**:

![](https://docs.etendo.software/latest/assets/drive/TmR4r-g0sbW3iYqVXO4M4IvKdyIKxp9t7FxwjL1i2srAJVnSK7obME0S7xZnd6ZBOMGwzsfbYZJ3BTDwjwzwSbpLmbioI49r1hX4YpyFrXeUYauG-D8tNEiGXqROzpI6RWJlewDrm-lQspoLPFfMR9M.png)

Secciones:  **"Complementaria", “Tributación por razón de territorio” y “Additional Information”**

![](https://docs.etendo.software/latest/assets/drive/SZHf8tnfL96mKnbhdEg4Oev3PSB8moMCC7k5MqXfkkR5aY3E9FR_QjNwZ5xOFytKPdafxQv5QLaccO557RenGMZlkPMDoskLe9TXqfiVJ4s1Fi1wPM32-UMQMA7MFoExjgiZlbR9y1EhG_2uz3_Fd9E.png)

Una vez que el fichero se ha generado, tendrá este aspecto:

![Fichero.png](https://docs.etendo.software/latest/assets/drive/7TUbkV18JCkTIs6aoBVNgXYoCr6vvEfFk1_kWdHjMi8-VjOMmEIsWBEWeRgj8AJ8VsbXNifrzXOGd6u19snnZEyhWLrsUty88vVrYwvnAU3FRzuTZRvteHfLFXle7Ajk4deKF124p9-bySu6AweMwpk.png)

##### **Pre-validación del modelo 303**

El fichero generado en Etendo se puede pre-validar en el siguiente link de la AEAT:

[_Formulario del modelo 303 para su presentación (predeclaración) ejercicio 2014 y siguientes (Régimen General)_](https://www2.agenciatributaria.gob.es/es13/h/ie43030b.html){target="_blank"}.

Una vez en dicho link el usuario podrá importar el fichero en la opción "Optativo: Importar datos de fichero", los datos obtenidos del fichero se mostrarán para su validación.

Una vez validados los datos, el modelo 303 se puede presentar en el siguiente link, para lo cual se requiere un certificado válido: [_Presentación ejercicio 2014 y siguientes (Régimen General)_](https://www.agenciatributaria.gob.es/AEAT.sede/procedimientoini/G414.shtml){target="_blank"}, para lo que se necesita certificado electrónico de identificación o DNI electrónico.

#### **Anexo**

Este anexo incluye el listado completo de los rangos de impuestos asociados a los parámetros del modelo 303 de las secciones "IVA Devengado" e "IVA Deducible" sólo para los tipos de IVA vigentes en la actualidad (2012):

##### **IVA Devengado**

###### **IVA Devengado - Régimen General**

-   Arrendamiento 18% (cobros)
-   Arrendamientos 18% -21%R (cobros) (+18%)
-   Arrendamiento 21% (cobros)
-   Arrendamientos 21% -21%R (cobros) (+21%)
-   Entregas Bienes Inversión 18%
-   Entregas Bienes Inversión 21%
-   Entregas IVA 18%
-   Entregas IVA 8%
-   Entregas IVA 21%
-   Entregas IVA 10%
-   Entregas IVA 4%
-   Entregas IVA+RE 18+4% (+18%)
-   Entregas IVA+RE 8+1% (+8%)
-   Entregas IVA+RE 21+5.2% (+21%)
-   Entregas IVA+RE 10+1.4% (+10%)
-   Entregas IVA+RE 4+0.5% (+4%)
-   Inversión Sujeto Pasivo no UE 18% (-18%)
-   Inversión Sujeto Pasivo no UE 8% (-8%)
-   Inversión Sujeto Pasivo no UE 21% (-21%)
-   Inversión Sujeto Pasivo no UE 10% (-10%)
-   Inversión Sujeto Pasivo UE 18% (-18%)
-   Inversión Sujeto Pasivo UE 8% (-8%)
-   Inversión Sujeto Pasivo UE 21% (-21%)
-   Inversión Sujeto Pasivo UE 10% (-10%)
-   Servicios prestados nacional 18%
-   Servicios prestados nacional 21%
-   Servicios prestados nacional 18% -15%R (+18%)
-   Servicios prestados nacional 18% -7%R (+18%)
-   Servicios prestados nacional 21% -21%R (+21%)
-   Servicios prestados nacional 21% -9%R (+21%)
-   Servicios prestados nacional 8%
-   Servicios prestados nacional 10%
-   Servicios prestados nacional 4%
-   Transmisión B.Inmuebles 18%
-   Transmisión B.Inmuebles 8%
-   Transmisión B.Inmuebles 21%
-   Transmisión B.Inmuebles 10%

###### **IVA Devengado - Recargo de equivalencia**

-   Entregas IVA+RE 18+4% (+4%)
-   Entregas IVA+RE 8+1% (+1%)
-   Entregas IVA+RE 21+5.2% (+5.2%)
-   Entregas IVA+RE 10+1.4% (+1.4%)
-   Entregas IVA+RE 4+0.5% (+0.5%)

###### **IVA Devengado - Adquisiciones Intracomunitarias**

-   Adquisiciones intracomunitarias 18% (-18%)
-   Adquisiciones intracomunitarias 8% (-8%)
-   Adquisiciones intracomunitarias 21% (-21%)
-   Adquisiciones intracomunitarias 10% (-10%)
-   Adquisiciones intracomunitarias 4% (-4%)
-   Adquisiciones intracomunitarias Bienes Inversión 18% (-18%)
-   Adquisiciones intracomunitarias Bienes Inversión 21% (-21%)

##### **IVA Deducible**

###### **IVA Deducible - Por cuotas soportadas en operaciones interiores corrientes**

-   Adquisición B.Inmuebles 18%
-   Adquisición B.Inmuebles 8%
-   Adquisición B.Inmuebles 21%
-   Adquisición B.Inmuebles 10%
-   Adquisiciones IVA 18%
-   Adquisiciones IVA 8%
-   Adquisiciones IVA 21%
-   Adquisiciones IVA 10%
-   Adquisiciones IVA 4%
-   Arrendamiento 18% (pagos)
-   Arrendamiento 21% (pagos)
-   Arrendamientos 18% -21%R (pagos) (+18%)
-   Arrendamientos 21% -21%R (pagos) (+21%)
-   Inversión Sujeto Pasivo no UE 18% (+18%)
-   Inversión Sujeto Pasivo no UE 8% (+8%)
-   Inversión Sujeto Pasivo no UE 21% (+21%)
-   Inversión Sujeto Pasivo no UE 10% (+10%)
-   Inversión Sujeto Pasivo UE 18% (+18%)
-   Inversión Sujeto Pasivo UE 8% (+8%)
-   Inversión Sujeto Pasivo UE 21% (+21%)
-   Inversión Sujeto Pasivo UE 10% (+10%)
-   Prestación servicios nacional 18%
-   Prestación servicios nacional 21%
-   Prestación servicios nacional 18% -15%R (+18%)
-   Prestación servicios nacional 18% -1%R (18%)
-   Prestación servicios nacional 18% -7%R (+18%)
-   Prestación servicios nacional 21% -21%R (+21%)
-   Prestación servicios nacional 21% -1%R (+21%)
-   Prestación servicios nacional 21% -9%R (+21%)
-   Prestación servicios nacional 8%
-   Prestación servicios nacional 10%
-   Prestación servicios nacional 4%

###### **IVA Deducible - Operaciones interiores bienes de inversión**

-   Adquisición Bienes Inversión18%
-   Adquisición Bienes Inversión 21%

###### **IVA Deducible - Por cuotas devengadas en las importaciones de bienes corrientes**

-   Adquisiciones a Canarias,Ceuta y Melilla 18%
-   Adquisiciones a Canarias,Ceuta y Melilla 8%
-   Adquisiciones a Canarias,Ceuta y Melilla 21%
-   Adquisiciones a Canarias,Ceuta y Melilla 10%
-   Adquisiciones a Canarias,Ceuta y Melilla 4%
-   Importaciones 18%
-   Importaciones 8%
-   Importaciones 21%
-   Importaciones 10%
-   Importaciones 4%

###### **IVA Deducible - Importaciones bienes de inversión**

-   Importaciones Bienes Inversión 18%
-   Importaciones Bienes Inversión 21%

###### **IVA Deducible - En adquisiciones intracomunitarias de bienes de corrientes**

-   Adquisiciones intracomunitarias 18% (+18%)
-   Adquisiciones intracomunitarias 8% (+8%)
-   Adquisiciones intracomunitarias 21% (+21%)
-   Adquisiciones intracomunitarias 10% (+10%)
-   Adquisiciones intracomunitarias 4% (+4%)

###### **IVA Deducible - Adq. Intracomunitarias bienes de inversión**

-   Adquisiciones intracomunitarias Bienes Inversión 18% (+18%)
-   Adquisiciones intracomunitarias Bienes Inversión 21% (+21%)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Modelo 347
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Spanish Localization Bundle/Modelo 347
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/modelo-347
## Article Content: 
#### **Introducción**

Esta sección describe la generación de la declaración: “**Modelo AEAT 347 - Declaración Anual de Operaciones con Terceros**” como un fichero de texto ("\*.txt") válido conforme a los requerimientos de la Hacienda Pública española, es por ello que se publicará una nueva versión de este módulo cuando dichos requerimientos cambien.

El fichero del 347 se genera desde el "**Generador de Declaraciones de Impuesto**" que se encuentra en la ruta de aplicación: "Gestión Financiera / Contabilidad / Herramientas de análisis / Generador de declaraciones de impuestos".

El Modelo/Declaración 347 es parte del módulo de Localización Española de Etendo.

#### **Descripción del módulo**

##### **Obligados a presentar la declaración**

De acuerdo con la normativa de la Hacienda Española, están obligados a presentar el modelo 347:

Todas aquellas personas físicas o jurídicas, de naturaleza pública o privada que desarrollen actividades empresariales o profesionales, siempre y cuando hayan realizado operaciones que, en su conjunto, respecto de otra persona o Entidad, cualquiera que sea su naturaleza o carácter, hayan superado la cifra de 3.005,06€ durante el año natural al que se refiere la declaración. Para el cálculo de la cifra de 3.005,06 € se computan de forma separada las entregas de bienes y servicios y las adquisiciones de los mismos.

De acuerdo con la normativa, no están obligados a presentar el modelo 347:

-   Quienes realicen en España actividades empresariales o profesionales sin tener en territorio español la sede de su actividad, un establecimiento permanente o su domicilio fiscal.
-   Las personas físicas y entidades en atribución de rentas en el Impuesto sobre la Renta de las Personas Físicas, por las actividades que tributen en dicho impuesto por el método de estimación objetiva y, simultáneamente, en el Impuesto sobre el Valor Añadido por los regímenes especiales simplificado o de la agricultura, ganadería y pesca o del recargo de equivalencia, salvo por las operaciones por las que emitan factura.
-   Los obligados tributarios que no hayan realizado operaciones que en su conjunto superen la cifra de 3.005,06€
-   Los obligados tributarios que hayan realizado exclusivamente operaciones no declarables.
-   Los obligados tributarios que deban informar sobre las operaciones incluidas en los libros registro de IVA (modelo 340) salvo que realicen operaciones que expresamente deban incluirse en el modelo 347.

##### **Operaciones declarables**

Las operaciones declarables y que, por tanto, se incluyen en el modelo 347 son las que se detallan a continuación:

1.  Tanto las entregas de bienes y prestaciones de servicios realizadas por el declarante como sus adquisiciones de bienes y servicios incluyéndose, en ambos casos, tanto las operaciones típicas y habituales como las ocasionales e incluso las operaciones inmobiliarias. Debe tenerse en cuenta que dichas operaciones se incluirán estén o no sujetas al IVA y, en el primer caso, también las exentas de dicho impuesto.

Además, se incluyen de forma específica y aparte:

-   los Arrendamientos de locales de negocios
-   los importes superiores a 6.000,00€ percibidos en metálico de cada una de las personas o entidades relacionadas en la declaración
-   las cantidades que se perciban en contraprestación por transmisiones de bienes inmuebles que constituyan entregas sujetas a IVA
-   y las prestaciones de servicios de/a no residentes (incluyendo Canarias, Baleares, Ceuta y Melilla) que no estén sujetos a retención.

Los importes que se incluyen en el modelo 347 son los “importes totales” de la contraprestación en euros (€). En los supuestos de operaciones sujetas y no exentas de IVA se añaden, por tanto, a la base imponible, las cuotas del impuesto y recargos de equivalencia repercutidos. Los importes además se declaran netos de las devoluciones o descuentos y bonificaciones concedidos.

Las operaciones que se incluyen en el modelo 347 son las realizadas por el declarante en el año natural a que se refiere la declaración y la fecha que se tiene en cuenta para su inclusión en el 347 es la fecha contable de la factura.

Las operaciones que en ningún caso se incluirán en el 347 por ser no declarables son las que se detallan a continuación:

-   aquellas que hayan supuesto entregas de bienes o prestaciones de servicios por las que los obligados tributarios no debieron expedir y entregar factura o documento equivalente
-   aquellas operaciones realizadas al margen de la actividad empresarial o profesional
-   aquellas efectuadas a título gratuito
-   los arrendamientos de bienes exentos de IVA
-   las importaciones y exportaciones de mercancías, así como las entregas y adquisiciones de bienes que supongan envíos entre el territorio peninsular español o las islas Baleares y las islas Canarias, Ceuta y Melilla.
-   Todas aquellas que se incluyan en otros modelos de la Administración Tributaria como por ejemplo aquellas cuya contraprestación haya sido objeto de retención o ingreso a cuenta; las operaciones intracomunitarias de bienes y servicios que se declaran en el modelo 349 o las operaciones incluidas en los libros registro que deben incluirse en el modelo 340.

El nuevo módulo de generación del Modelo 347 no incluye las operaciones que se describe a continuación y que deberían incluirse en el modelo 347, por ser relativas a Administraciones Públicas, Entidades aseguradoras y Colegios Profesionales:

-   las subvenciones, auxilios o ayudas satisfechas por las entidades integradas en las distintas Administraciones Públicas
-   las operaciones de seguros realizadas por las entidades aseguradoras
-   las prestaciones de servicios realizadas por las agencias de viajes
-   los cobros por cuenta de terceros de honorarios profesionales o de derechos derivados de la propiedad intelectual, industrial, de autor u otros por cuenta de sus socios, asociados o colegiados efectuados por sociedades, asociaciones, colegios profesionales u otras entidades que, entre sus funciones, realicen las del cobro
-   las operaciones sujetas al impuesto sobre la producción, los servicios y la importación en las ciudades de Ceuta y Melilla.

Además, no se incluye en el módulo de funcionalidad el supuesto de Declaración Complementaria para aquellos casos en que deban incluirse sólo las operaciones que, debiendo haber sido declaradas en otra declaración del mismo ejercicio presentada con anterioridad, no se incluyeron. Estas operaciones deberán ser incluidas por el usuario manualmente, a través de la página de la AEAT tal y como se explica en la sección de este documento "Declaración Complementaria".

#### **Instalación del módulo**

Para la instalación del módulo **“Modelo AEAT 347 - Declaración de operaciones con terceros”**” (Spain AEAT Modelo 347 for APR),el usuario debe seguir los pasos que se describen a continuación en función de la situación de partida:

-   Instalación de la última versión disponible de Etendo 
-   o la instalación del módulo de Localización Española.

!!! info
    Para la instalación del módulo de Localización Española, visite [_Marketplace_](https://marketplace.etendo.cloud/#/product-details?module=003B475055DD421B9483B5BE15AA48C5){target="_blank"}. 


Es importante recalcar que el módulo del Modelo AEAT 347 incluye el correspondiente conjunto de datos (dataset) que relaciona los rangos de impuestos de España con los parámetros del 347, este conjunto de datos se debe aplicar a la Organización para la cual se necesita obtener el 347 tal y como se explica en el siguiente apartado.

##### **Aplicación del Módulo**

Una vez instalado el módulo del 347 por cualquiera de los procedimientos anteriores, el usuario debe aplicar el conjunto de datos o dataset del módulo 347 a la organización legal con contabilidad que corresponda, desde la ventana "Gestión del Módulo de Empresa".

El módulo de impuestos para España es válido para todos los modelos de declaración de impuestos, en este caso el modelo 347, y debe estar instalado previamente.

!!! info
    Es fundamental recalcar que el usuario debe tener el módulo de impuestos para España instalado y aplicado a la organización (\*) o bien a la organización legal para la que se quiera obtener el 347.


#### **Configuración del módulo**

##### **Configuración del modelo 347**

Una vez aplicado el conjunto de datos del Modelo 347, puede comprobar en la ruta de aplicación: Gestión Financiera / Contabilidad / Configuración / Declaración de Impuestos que el modelo 347 del periodo correspondiente está creado como informe anual de impuestos.

![](https://docs.etendo.software/latest/assets/drive/2u88N7Cgi-SP2bdf8o4omVD0u1Up3nn33id19ei0bDPUxydw-cF9LLBl-YAE_5CNlQR7_9-rgia_VhhUwgW6QTKQgrHCC1qu4jTyfflLyVH9uDdav7NQWS47_h1ntt7M7800npJGiAbWAqRnzHfhIQ.png)

En la pestaña “Secciones de la declaración” se han creado 3 grupos para el modelo 347:

-   Nombre del Fichero del 347. Esta sección contiene:
    -   un parámetro de tipo “entrada” que se mostrará en el momento de generar el 347 con el fin de que el usuario introduzca manualmente el “Nombre del fichero txt del 347” que se va a generar.
-   Identificación y Totales. Esta sección contiene:
    -   2 parámetros de tipo “constante” que el sistema tendrá en cuenta a la hora de incluir las operaciones, ya que solo incluirá las que superen las cifras límite que se detallan a continuación:  
          
        -   Cifra límite de inclusión de operaciones con terceros = 3.005,06€
        -   Cifra límite para cobros percibidos en efectivo = 6.000,00€
    -   y 5 parámetros de tipo “entrada” que se mostrarán en el momento de generar el 347 con el fin de que el usuario los introduzca manualmente y que son:  
          
        -   Nombre y apellidos de la persona de contacto: Este parámetro de tipo entrada podría ser modificado a tipo constante y, por tanto, se debería especificar el valor de dicha constante que en este caso sería el nombre de la persona de contacto, para los escenarios en que la misma persona presenta la declaración. De ser así, este parámetro no tendría que informarse cada vez que se genera la declaración.
        -   Nº Teléfono de la persona de contacto. Este parámetro de tipo entrada podría ser modificado a tipo constante y, por tanto, se debería especificar el valor de dicha constante que en este caso sería el teléfono de la persona de contacto, para los escenarios en que la misma persona presenta la declaración. De ser así, este parámetro no tendría que informarse cada vez que se genera la declaración.
        -   Declaración substitutiva (si/no)
        -   Nº de la declaración a sustituir
        -   NIF del representante legal
-   **Operaciones con terceros**. Esta sección contiene:
    -   5 parámetros de tipo “salida” ligados a la clave tributaria correspondiente, que asociados a los tipos impositivos del módulo de impuestos para España, incluirán las operaciones de compra/venta en el 347:
        -   Adquisiciones de bienes - Clave A
        -   Entregas de bienes - Clave B
        -   Prestación de servicios - Clave A
        -   Servicios prestados - Clave B
        -   Transmisiones de inmuebles - Clave B

En la ruta Gestión Financiera / Contabilidad / Configuración / AEAT347 Tipo de documento, el usuario puede especificar los tipos de documentos que el 347 debe tener en cuenta. El funcionamiento de esta pantalla de parametrización es que si no se especifica ningún tipo de documento, Etendo tendrá en cuenta todos los tipos de documentos de tipo factura que se pueden contabilizar.

Si el usuario introduce algún tipo de documento, solo esos serán los que se tengan en cuenta.

![](https://docs.etendo.software/latest/assets/drive/OkdImkuzASfTUs2ne-BnPzKROain8Y-Z59B-4m3DX8xAjhoK-wvSJEmH6P1OBX-eIC9AGQXKGViX6K-0zMZHeGnfVD3v-eKgTvojkYKe-vEXykDdGYstwWmsUW4vRRjUAreAq7ndNhtf8zVm3rwbug.png)

##### **Configuración de impuestos**

Este módulo de generación del modelo 347 se basa en el módulo de impuestos para España, ya que utiliza los rangos de impuesto que incluye dicho módulo. Además, incluye un juego de datos que liga los rangos de impuesto del módulo de impuestos para España con los parámetros del 347 que se listan a continuación, en función de la operación de que se trate:

-   **Adquisiciones de bienes – Adquisición “A”**
-   **Entregas de bienes – Entregas “B”**
-   **Prestación de servicios– Adquisición “A”**
-   **Servicios prestados– Entregas “B”**
-   **Transmisiones de inmuebles – Entregas “B”**

El usuario puede comprobar en la ruta de aplicación: Gestión Financiera / Contabilidad / Configuración / Rango impuesto - pestaña Parámetro de Impuesto que los “tipos impositivos/impuestos” que deben incluirse en el 347 se han asociado al correspondiente parámetro de impuesto del 347:

-   Los tipos de IVA de compras/adquisiciones (nacional) incluyendo las adquisiciones de bienes inmuebles y bienes de inversión, se han asociado con el parámetro “Adquisiciones de bienes” que se corresponden con la clave de operación del 347 => “A”
-   Los tipos de IVA de ventas/entregas (nacional) (incluyendo Recargo de Equivalencia) se han asociado con el parámetro “Entregas de bienes” que corresponden con la clave de operación del 347 => “B”
-   Los tipos de IVA de “inversión del sujeto pasivo NO UE” (en los casos de prestación de servicios NO intracomunitarios) se han asociado con el parámetro “Prestación de servicios” que se corresponden con la clave de operación del 347 => “A”
-   Los tipos de IVA de entregas de bienes inmuebles (nacional) se han asociado con el parámetro “Transmisiones de inmuebles” que se corresponden con la clave de operación del 347 => “B”; ya que tiene que declararse dos veces como operación de venta y consignarse a parte el importe de la transmisión del bien inmueble.
-   Se han creado los tipos de IVA específicos para prestaciones de servicios (nacional e internacional), asociados a categorías de impuestos específicas para los servicios, que se han asociado con los parámetros del 347 “Prestación de servicios – clave de operación A” o “Servicios prestados – clave de operación B” en función de que la empresa declarante reciba o preste los servicios.
-   Los tipos de IVA de servicios desde/a Canarias, Baleares, Ceuta y Melilla se han asociado bien con el parámetro “Prestaciones de servicios” clave de operación del 347 => “B” o bien con el parámetro “Operaciones de servicios (Adquisición) clave de operación del 347 => “A”, respectivamente, ya que sólo se incluyen en el 347 las operaciones de servicios y no las de bienes que supongan envíos de bienes entre el territorio peninsular español o las islas Baleares y las islas Canarias, Ceuta y Melilla
-   Y por último se han creado tipos de IVA específicos para alquileres (con y sin retenciones asociados a 2 tipos de BP tax category, respectivamente). Los tipos de IVA de alquiler sin retenciones se han asociado con los parámetros del 347 “Prestación de servicios – clave de operación A” o “Servicios prestados – clave de operación B” en función de que la empresa sea arrendatario o arrendador del local u oficina arrendado y sujeto a IVA.

##### **Configuración de los locales de negocio**

En el modelo 347 se deben incluir los arrendamientos de locales de negocios, es por ello que en la ruta de aplicación: Gestión de Datos Maestros / Producto se ha creado un nuevo parámetro “Local arrendado”.

De ser así, el usuario debe introducir en el sistema la información que se detalla a continuación, ya que es necesario incluirla en el modelo 347:

-   **Situación**. El usuario debe elegir entre una de las siguientes opciones:
    -   Locales en el extranjero
    -   Referencia catastral válida en País Vasco o en Navarra
    -   Referencia catastral válida excepto en País Vasco o Navarra
    -   Sin referencia catastral
-   **Referencia catastral.** Campo de texto libre.
-   **Tipo de vía.** El usuario debe elegir el tipo de vía de una lista normalizada según el INE español.
-   **Nombre de la vía pública**. Campo de texto libre.
-   **Tipo de numeración**. El usuario debe elegir el tipo de numeración de una lista normalizada.
-   **Número**. Campo de texto libre.
-   **Calificación del número**. Campo de texto libre.
-   **Bloque**. Campo de texto libre.
-   **Portal**. Campo de texto libre.
-   **Escalera**. Campo de texto libre.
-   **Planta o piso**. Campo de texto libre.
-   **Puerta**. Campo de texto libre.
-   **Complemento**. Datos complementarios del domicilio si los hubiera.
-   **Localidad o Población**. Campo de texto libre.
-   **Municipio**.
-   **Código de municipio**. El usuario debe elegir el código del municipio de una lista normalizada según el INE español.
-   **Código de provincia.** El usuario debe elegir el código de provincia de una lista de códigos de provincia de dos dígitos numéricos.
-   **Código postal**. El usuario debe elegir el código postal.

En el caso de "Locales en el extranjero" los datos a incluir son:

-   **Tipo de vía.**
-   **Nombre de la vía pública**.

El 347 refleja este tipo de operaciones de forma separada tal y como se explica en el correspondiente caso de usuario.

#### **Generación del modelo 347**

El modelo 347 se genera desde la ruta de aplicación: Gestión Financiera / Contabilidad / Herramientas de análisis / Generador de declaraciones de impuestos.

![](https://docs.etendo.software/latest/assets/drive/I8vKXFszVIXPVZhyPNt7q1dl52OyNIGw-JWKniQBLnKUq21l25J9MbdniTdtPtnNIB1Q3aKoP3thNPaSWwmlwa3xdcBYC6jQWnQUxks9w9nH2cMZEKWtJMgTrWme0TlsVbG5dqhEh14CHBKAqglBiA.png)

El usuario deberá introducir los siguientes datos para generar el modelo 347:

-   **Organización** para la cual quiere generar el Modelo 347. El sistema mostrará el calendario asociado a la organización en un campo no editable.
-   **Esquema contable**
-   **Declaración**. El usuario debería seleccionar aquí el modelo 347 del periodo impositivo que corresponda.
-   **Ejercicio**. El usuario puede introducir el año natural para el cual quiere generar el modelo 347
-   **Periodo**. El valor “Anual” debería mostrarse por defecto.

Una vez introducidos los datos anteriores, el usuario puede introducir los parámetros de entrada del 347 en el botón de proceso “Parámetros de entrada”

![](https://docs.etendo.software/latest/assets/drive/BTVvmrL7eUYl5NhX1-PKOO_Aa_50C1NZd8bWXZAiD4oQsYc32KxEQKKhjq1bzpwL084nWtTneQN0cn2Fd9zQVoUqkGtIrzR8LnkUklnypDnn9CSFjpknNIHs5c6lV8fV4nsqaxBlFplBnEuRQ2_8pA.png)

y una vez introducidos los parámetros de entrada, como por ejemplo el "Nombre del Fichero" o la "Persona/Teléfono de contacto", el usuario puede generar el fichero del Modelo 347 a través del botón de proceso “Generar fichero”.

Es entonces cuando se genera el fichero de texto ("\*.txt") del Modelo 347 conforme a los requerimientos de la AEAT, que puede presentarse directamente en la web de la AEAT.

En el módulo [](http://centralrepository.openbravo.com/openbravo/org.openbravo.forge.ui/sso/ForgeModuleDetail/Spain-AEAT-Modelo-347-For-APR)"Spain AEAT Modelo 347 for APR", se genera un fichero zip que contiene tres ficheros:

-   el fichero "txt" ya mencionado de igual formato y, por tanto, igualmente válido para la presentación del Modelo 347 a partir de 2014
-   un fichero denominado "Facturas.csv"
-   y un fichero denominado "Metalico.csv"

*Los dos ficheros adicionales de formato \*.csv sólo se generan si la declaración del 347 tiene contenido*.

El fichero "Facturas.csv":

-   contiene un listado con información del tipo "Tercero", "Fecha Contable", "Impuesto", "Base Imponible", "Cuota", "Total" etc, de todas las facturas susceptibles de incluirse en el fichero txt.

El fichero "Metalico.csv":

-   contiene un listado con información del tipo "Cuenta Financiera", "Identificación de Transacción", "Tercero", "Fecha Contable", "Importe" y "Ejercicio (de devengo)" de todos los cobros en efectivo susceptibles de incluirse en el fichero txt.

#### **Casos de usuario**

##### **Operaciones de compra y venta**

Etendo permite la introducción y contabilización de facturas de compra y de venta, a través de la ventana correspondiente.

El modelo 347 recogerá agrupando por "tercero" y "clave \[A (compras) o B (ventas)\]", las siguientes operaciones de compra/venta que superen la cifra de 3.005,06 euros:

-   compra/venta de bienes/servicios (no sujetos a retención) dentro del territorio de aplicación del impuesto (IVA), España y Baleares
-   compra/venta de servicios desde/hacia resto del mundo, incluyendo Canarias, Ceuta y Melilla.

No se van a tener en cuenta:

-   operaciones de compra/venta de bienes/servicios intracomunitarias, por reflejarse en otro modelo de hacienda, el Modelo 349, excepto las operaciones que no se incluyen en el Modelo 349.
-   importaciones/exportaciones de bienes.

###### **Operaciones de compra y venta acogidas a RECC**

Etendo permite la introducción y contabilización de facturas de compra y de venta acogidas al RECC (Régimen Especial de Critero de Caja).

Para ello:

-   la "Organización" debe estar acogida a este Régimen
-   o bien no acogida pero si alguno de los proveedores de los cuales recibe facturas de compra.

Estas organizaciones deben tener aplicado el juego de datos del módulo "Spain AEAT Modelo 347 Cash VAT compatible.

Este módulo incluye un juego de datos que relaciona los impuestos de IVA de Caja con los parámetros correspondientes del Modelo 347.

Las transacciones de compra/venta se recogen en el Modelo 347 de forma anual conforme al criterio de devengo general de IVA y marcadas como "Operación de IVA de Caja". Además, se incluye la parte correspondiente anual devengada conforme al criterio de IVA de Caja en otro campo.

**Transmisión de Inmuebles**

Etendo permite la introducción y contabilización de transmisiones (ventas) de bienes inmuebles sujetas a IVA.

Este tipo de operaciones se recogen de forma separada en el modelo 347.

Es por ello que se ha creado en el módulo de impuestos para España:

-   categorías de impuestos específicas para los B. Inmuebles (IVA Normal B.Inmuebles e IVA Reducido B.Inmuebles)
-   rangos de impuestos (IVA) de compra/venta de Bienes Inmuebles

y en el conjunto de datos del 347:

-   un parámetro específico denominado "Transmisiones de Inmuebles" ligado a los impuestos de venta de bienes inmuebles.

###### **Transmisión de Inmuebles sujetas a RECC**

Este tipo de transacciones también se incluyen en el Modelo 347 de forma separada, en computo anual, y marcadas como "Operación IVA Caja".

##### **Arrendamientos**

Etendo permite la introducción y contabilización de facturas de compra y de venta que incluyan arrendamiento de locales de negocio sujetos a IVA.

Solo en el caso de arrendamientos de locales de negocio por parte del propietario de dicho local, se deberá además incluir información adicional sobre dicho inmueble/local, en un registro de tipo Inmueble específico. Para ello, aquellos locales que se den de alta en el maestro de productos susceptibles de ser alquilados deberán configurarse como tales tras activar el nuevo parámetro "Local arrendado".

Esto implica rellenar datos como los que se muestran en la siguiente imagen:

![](https://docs.etendo.software/latest/assets/drive/dE833IZAyk5YYiQiYB9eDDk6wxK_0btiWm0ZxEGjetv8EO6eEVaFX1l49jftJWX3Kzpsjf7CYhV2xKGpTzoPPIHnWOtBreM6VjXKc9pppnC3uX0Da8TQSwz_CSSxFmBEVhREbwCzxTxCExDC9scqtRA.png)

Este tipo de operaciones tienen que reportarse de forma separada en el 347 tal y como se muestra en la siguiente imagen:

![Arrendamiento fichero.png](https://docs.etendo.software/latest/assets/drive/jbFjoMyVVnHbJWnBIr3G76slsiwl0sB1cuiVHPyZU3Fxi0xayrKTqa6KnmpwSN6pZAUm3FPIwxGY8b7sfijsMd2dXLmxmn4WI85_Pr8_F41aL7Y3GQUXNZYqaM4uvGleErZpzWqX3KiMv6ElEGHuxt8.png)

La transacción de venta (B) con el cliente "Cliente Arrendamiento" por un importe anual de 30.310,50, incluye además el arrendamiento de un inmueble por un importe de 13.370.50.

###### **Arrendamientos en RECC**

Estas operaciones se reflejan de forma anual en el modelo 347,marcadas como tal, incluyéndose también la información referente al registro del inmueble arrendado por el declarado. 

##### **Cobros en Efectivo**

Etendo permite la introducción y contabilización de facturas de venta y sus correspondientes cobros en efectivo depositados y contabilizados en Etendo a través de cuentas financieras del tipo "Caja".

  
Se recomienda configurar el método de pago "Contado" asociado a la cuenta financiera "Caja" como se detalla a continuación:

-   Permitido para Cobro
-   Depósito automático en cuenta
-   Cuenta de depósito = Cuenta contable para depósito.
-   los cobros que para un tercero (cliente) y para un periodo, por ejemplo 2014, que lógicamente será el periodo/año para el cual generamos el 347, superen el umbral de 6.000,00 €
    -   Dicho cobro puede referirse a operaciones incluidas en facturas de venta contabilizadas en 2014 o años anteriores.

![Cobro Efectivo 2.png](https://docs.etendo.software/latest/assets/drive/rQsEfez1_-0gnYadOcq2Dp9ptPt-fpXnvDJr-dZQKfhGd4CbMhpIZl8--qafNSbneZvk0iTvjQdOyesMqfRe8UKT1l8bwOYiPd4PojgZsEHUXOjQ5o5TiOrFYFxOVfBKW4hIp9qC0W8mkxbVsM54wz4.png)

![Cobro Efectivo 1.png](https://docs.etendo.software/latest/assets/drive/Lxv-BIcYyAGs73YiuQW3z8G7HaswKFky4KLo0tygiKNTTsVyOQuux39shCmeBOucaw5We-Pq56fRIDdRr4VeMlWN2ffdh1Pw-u931b7tv1Ejq87qM-waVMN6DMHFg4VKOpgsvPeTu6Qwfx0BT3Rf_3k.png)

En el fichero ejemplo anterior se puede comprobar que:

-   los cobros en efectivo tanto del "Cliente Efectivo" (por importe de 18.000,00) como del "Cliente Efectivo Varios" (por importe de 6.560,00) se especifican de forma separada en las posiciones (101-115). La diferencia entre estos cobros es:
    -   para el "Cliente Efectivo Varios", la operación que generó el cobro en efectivo en el año 2014 se devengo y se declaró en el año 2013.  
        Esa es la razón por la cual no aparece importe de operación alguno en las posiciones 83-98 y el año de devengo de la operación es 2013.
    -   para el "Cliente efectivo B", la operación que generó el cobro en efectivo se devenga y se cobra en el año 2014, y forma parte del total de operaciones por importe de 81.675,00.

Faltaría un último caso:

El caso en el que un cobro/s del año en curso (2014), sea un cobro/s de transacciones devengadas en un periodo/año anterior y, por tanto, ya declaradas, y transacciones devengadas en el periodo/año en curso y, por tanto, no declaradas, tal y como se muestra en la siguiente imagen:

![Efectivo C 1.png](https://docs.etendo.software/latest/assets/drive/UNvoZgjSZH4I3jP_aiFtWoh588bAF9cXNFgxPj9QwdIVRaSs2LQPqaO0OfaumKmjQOuONVkzQGnDksNIoLc7WsaMn_lM2LfMrDdYTlFaM7rQA2UzZu06m4Yujf8I4zN_3XE-sPOl7SnRi8i7pXJkujA.png)

![Efectivo C 2.png](https://docs.etendo.software/latest/assets/drive/fUbrPtlbC-3LRPMGAoFSLSg5WJL9aJnB-ArVFC3JAq-ED3T3EyPf4rNPjlEEPdIhSqX31YFcp95zSSdXDdxNAwR0Jj6APn121ZA20w1dwxW571BuD2nXIjhchVDKE4BEHosSqTq9cd39qycG3KI9u5M.png)

En la imagen anterior, se ha producido un cobro en el año 2014 por importe de 48.188,25; de los cuales 7.350,75 son por operaciones realizadas y declaradas en el año 2014 y el resto 40.837,50 por operaciones realizadas y declaradas en un ejercicio anterior (2013).

###### **Cobros en Efectivo en RECC**

Todo lo dicho en este apartado aplica igualmente a las operaciones de venta en IVA de Caja que se cobran en efectivo, salvo que en este caso no aplicaría un "Ejercicio" de devengo anterior a 2014, ya que el periodo de validez de este régimen comenzó el 1 de enero de 2014.

Además del importe anual de las operaciones y el importe anual devengado en criterio de IVA de Caja, debe añadirse el importe percibido en metálico, junto con el ejercicio de devengo de dichas operaciones.

##### **Presentación del modelo 347 en formato electrónico**

La presentación telemática del modelo 347 en formato electrónico requiere que las empresas tenga un NIF español así como un Certificado electrónico emitido por la “Fábrica Nacional de Moneda y Timbre” (FNMT) u otro Certificado válido y reconocido por Hacienda.

La presentación telemática puede realizarse a través de la página web de la [Hacienda Pública española](https://sede.agenciatributaria.gob.es/Sede/procedimientoini/GI27.shtml){target="_blank"}.

###### **Datos en los ficheros csv**

Tal y como ya se ha mencionado, con módulo "Spain AEAT Modelo 347 for APR" se generan, además del fichero "txt" del Modelo 347, dos ficheros adicionales "\*.csv", un fichero denominado "Facturas.csv" y otro fichero denominado "Metalico.csv".

El fichero csv "XXXFacturas.csv" incluye las siguientes columnas:

-   "**Tipo de documento**".  
    Estos son las facturas estándar (AP/AR Invoice, AP/AR Credit Memo..etc) de Etendo
-   "**Número de documento**"  
    O número de factura/abono.
-   "**Tercero**"  
    Cliente o proveedor.
-   "**NIF/CIF**" del tercero.
-   "**Fecha Factura**"
-   "**Fecha Contable**"  
    Fecha contable de la factura.
-   "**Impuesto**"  
    Impuestos del dataset de impuestos para España ligados al parámetro del Modelo 347 correspondiente.
-   "**IVA de Caja**"  
    Esta columna nos indica si la factura está o no sujeta a IVA de Caja.
-   "**Cuota**"  
    Cuota ligada al tipo de impuesto incluido en la factura
-   "**Base Imponible**"  
    Base imponible ligada al impuesto incluido en la factura.
-   "**Total**"  
    Suma de la base imponible y la cuota. Este valor es el que hay que tener en cuenta ya que el 347 incluye importes totales, incluído el IVA, al ser una declaración de operaciones con Terceros y no una liquidación de IVA.
-   "**Tipo de Línea**"  
    Dado que en el 347 se tiene que incluir de forma separada tanto los arrendamientos como las transmisiones de bienes inmuebles y operaciones de inversión del sujeto pasivo, por tanto, en este campo las opciones que hay son "vacío" para operaciones de compra/venta normales, "Arrendamientos", "Transmisión B. Inmuebles" e "Inversión Sujeto Pasivo".

El fichero csv "XXXMetálico.csv" incluye las siguientes columnas:

-   "**Cuenta Financiera**"  
    Cuentas financieras de tipo "Caja" de Etendo.
-   "**Línea de Transacción**"  
    Número de línea de la transacción en la pestaña "**Transacción**" de la cuenta Financiera.
-   "**Identificador de Transacción**"  
    Identificador formado por la cuenta financiera, la divisa, el número de cobro, la fecha del cobro, el tercero y el importe del depósito/cobro.
-   "**Tercero**"
-   "**NIF/CIF**" del tercero.
-   "**Fecha Contable**"  
    Fecha contable del cobro.
-   "**Ejercicio**"  
    Ejercicio en el cual se devengó la operación o factura que se cobra. Este ejercicio puede ser 2014 o anterior para declaraciones del ejercicio 2014.
-   "**Importe transacción**"  
    Importe del cobro en metálico.

Estos ficheros csv nos van a permitir saber por ejemplo:

-   que tercero se debe incluir en la declaración y con qué importes por haberse superado el límite de 3.005,06 € en el volumen anual de operaciones realizadas con él.
-   que tercero no se debe incluir en la declaración por no haberse superado el límite de 3.005,06 € en el volumen anual de operaciones realizadas con él.
-   cuales son las facturas de compra cuya suma equivale al "Importe Anual/Trimestral de Operaciones" realizadas con un proveedor en concreto
-   o bien cuales son los cobros en efectivo cuya suma equivale al "Importe percibido en metálico" de un cliente en concreto, incluido en la declaración.

###### **Presentación de declaraciones sustitutivas**

Es necesario presentar una declaración sustitutiva cuando dicha declaración tenga por objeto anular y sustituir completamente a otra declaración anterior para el mismo periodo ya enviada a Hacienda, en la cual se hubieran incluido datos inexactos o erróneos.

Para ello, el usuario deberá realizar en la aplicación los cambios en los datos/transacciones pertinentes y volver a generar la declaración 347 como fichero indicando:

-   que la declaración es sustitutiva
-   el número de la declaración original que se sustituye

![](https://docs.etendo.software/latest/assets/drive/beimgAXSJ1DvjNuJHa1G2tIQaIYdpHt769PulMwVmx7Y7bT0NJvb08DTbx5rt5GTBVuWu7XxfJ5ZTGw7iyFufV-kRKiw2OCLzoNH17Ul6h3y5ajyc1CcVbAr-XqjfQKBAnUFcjLZ7g1n27uXFZtbX5c.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Modelo 349
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Spanish Localization Bundle/Modelo 349
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/modelo-349
## Article Content: 
#### Javapackages 

:octicons-package-16: Javapackage: `org.openbravo.module.aeat349.es` <br>

#### **Introducción**

Esta sección aplica al módulo “**Modelo AEAT 349 - Declaración recapitulativa de operaciones intracomunitarias”** incluído en el módulo de Localización Española de Etendo.

##### **Descripción del módulo**

El nuevo módulo de generación del Modelo 349 como un fichero “.txt” válido de acuerdo a los requisitos establecidos por la Hacienda Española (Orden HAC/360/2002 de 19 de febrero y modificada en última instancia por la Orden HAC/174/2020 de 28 de diciembre) permitirá a las empresas españolas cumplir con sus obligaciones fiscales de presentación de la declaración recapitulativa de las entregas y adquisiciones intracomunitarias de bienes que realicen.

De acuerdo con el reglamento del IVA, están obligados a presentar el modelo 349, los sujetos pasivos del Impuesto que realicen cualquiera de las siguientes operaciones:

-   Las entregas de bienes destinados a otro Estado miembro, entregas de bienes exentas del impuesto.
-   Las adquisiciones intracomunitarias de bienes sujetas al impuesto.
-   Las adquisiciones intracomunitarias de bienes y entregas subsiguientes exentas conocidas como “Operaciones Triangulares”

El contenido de la declaración recapitulativa de operaciones Intracomunitarias es:

-   Las operaciones citadas en el párrafo anterior, así como las rectificaciones a cualquiera de las operaciones anteriores ya incluidas en la correspondiente declaración recapitulativa.
-   Los datos de identificación de los proveedores y adquirientes
-   así como la base imponible en euros de las operaciones intracomunitarias de bienes declaradas.

En general, la declaración recapitulativa deberá presentarse por cada mes natural durante los veinte primeros días naturales del mes inmediato siguiente, salvo la correspondiente al mes de julio, que podrá presentarse durante el mes de agosto y los veinte primeros días naturales del mes de septiembre y la correspondiente al último período del año, que deberá presentarse durante los 30 primeros días naturales del mes de enero.

Cuando ni durante el trimestre de referencia ni en cada uno de los cuatro trimestres naturales anteriores el importe total de las entregas de bienes y prestaciones de servicios que deban consignarse en la declaración recapitulativa sea superior a 50.000 euros, excluido el Impuesto sobre el Valor Añadido, la declaración recapitulativa deberá presentarse durante los veinte primeros días naturales del mes inmediato siguiente al correspondiente período trimestral.

Si al final de cualquiera de los meses que componen cada trimestre natural se superará el importe mencionado en el párrafo anterior, deberá presentarse una declaración recapitulativa para el mes o los meses transcurridos desde el comienzo de dicho trimestre natural durante los veinte primeros días naturales inmediatos siguientes.

!!! info
    Desde 2020 se suprime el período anual de declaración.

Las operaciones se entenderán realizadas el día en que se expida la factura o documento equivalente que sirva de justificante de las mismas.

Debido a que en el modelo 349 se deben diferenciar aquellas notas de abono que son rectificación a facturas incluidas en modelos del 349 ya enviados a Hacienda y las notas de abono que no lo son, ha sido necesario crear una funcionalidad que relaciona las notas de abono con las facturas que están siendo abonadas o rectificadas, tal y como se explica en este documento en la sección “Casos de usuario. Operaciones rectificativas del 349”

!!! info
    El módulo de generación del Modelo 349 no incluye las operaciones triangulares, puesto que dichas operaciones no se gestionan en Etendo. 

Este módulo no tiene en cuenta las transacciones correspondientes al tipo de documento de Etendo “AP/AR credit memo” como facturas de abono, ya que dicho tipo de transacciones no reflejan devoluciones de mercancía, es por ello que el módulo 349 tendrá en cuenta los tipos de documento AP/AR invoice (como facturas de compra y venta) y los tipos de documento AP/AR invoice negativos (como notas de abono o facturas rectificativas).

Además, no se incluye en el módulo de funcionalidad el supuesto de Declaración Complementaria para aquellos casos en que deban incluirse solo las operaciones que, debiendo haber sido declaradas en otra declaración del mismo ejercicio presentada con anterioridad, no se incluyeron. Estas operaciones deberán ser incluidas por el usuario manualmente, a través de la página de la AEAT tal y como se explica en la sección de este documento “Declaración Complementaria”.

#### **Instalación del módulo**

Para la instalación del módulo “Modelo AEAT 349 - Declaración recapitulativa de operaciones intracomunitarias”, el usuario debe seguir los pasos que se describen a continuación en función de la situación de partida:

-   Instalación de la última versión disponible de Etendo
-   o la instalación del módulo de Localización Española.

!!! info
    Para la instalación del módulo de Localización Española, visite [*Marketplace*](https://marketplace.etendo.cloud/#/product-details?module=003B475055DD421B9483B5BE15AA48C5){target="_blank"}. 

Es importante recalcar que:

-   El módulo del Modelo AEAT 349 incluye el correspondiente conjunto de datos que relaciona los tipos/rangos de impuestos con los parámetros del 349.
-   Una vez instalado el módulo, éste se debe aplicar a la Organización para la cual se requiere obtener el modelo 349, tal y como se describe en el apartado siguiente.

##### **Aplicación del Módulo**

Una vez instalado el módulo del 349, el usuario debe aplicar el módulo del 349 a la organización legal con contabilidad que corresponda.

Es fundamental recalcar que el usuario debe tener el módulo de impuestos para España instalado y aplicado a la organización (\*) y, por tanto, a la organización legal para que se quiera obtener el 349, dicho módulo de impuestos para España es válido para todos los modelos de declaración de impuestos, en este caso el modelo de declaración del 349, y debe estar instalado previamente.

El usuario deberá navegar a "Configuración General / Gestión del módulo de Empresa", seleccionar la organización legal con contabilidad y aplicar los módulos en el orden especificado (primero el módulo de impuestos, si no está aplicado previamente, y después el módulo del 349).

##### **Configuración del módulo para la organización con contabilidad**

Una vez instalado el módulo del 349 por cualquiera de los procedimientos anteriores, el usuario debe aplicar el módulo del 349 a la organización legal con contabilidad que corresponda.

Es fundamental recalcar que el usuario debe tener el módulo de impuestos para España instalado y aplicado a la organización legal con contabilidad previamente, dicho módulo de impuestos para España es válido para todos los modelos de declaración de impuestos, en este caso el modelo de declaración del 349, y debe estar instalado y aplicado a la organización previamente.

El usuario deberá navegar a "Configuración General / Gestión del módulo de Empresa", seleccionar la organización legal con contabilidad y aplicar los módulos en el orden especificado (primero el módulo de impuestos si no está aplicado previamente y después el módulo del 349).

#### **Configuración del módulo**

##### **Configuración del modelo 349**

Este módulo de generación del modelo 349 como un fichero de texto (“\*.txt”) válido conforme a los requerimientos de la Hacienda Pública Española, se basa en la funcionalidad del “Generador de declaraciones de impuestos”.

El usuario puede comprobar en la ruta de aplicación: Gestión Financiera / Contabilidad / Configuración / Declaración de Impuestos, que el modelo 349 está creado como informe anual, trimestral o mensual de impuestos, todos con la misma configuración:

![](https://docs.etendo.software/latest/assets/drive/H0HWfOy7IdB5yLwjirTyqV4jjt9pCbVBTk0lZlXCnufLFyy1zAos1vJiKc0Wgsydgfs3H5RtRsFpPg7UcQXvX924p8_3Taq958X892bGQbJCsMqKjxmenrRR7j3NPFZTcbTE9oQgv9zdWwU9-ngWWh1cIdzW-78QmhNv6SBuuTAUSn_h_N9dotFwXQ.png)

En la pestaña “Secciones de la declaración” se han creado 4 secciones:

![](https://docs.etendo.software/latest/assets/drive/vgoWI1diiY_P5qHvQxVKR-bl45Z8XjklTv3NmDsdvGUs47FO_5rOG-1iHbXUXJvJgbMrIVFi4o6K2uExaU-quP9Dhj8z5E4T5bLhOaC-UfkPdriINML5ZQldERE6KkGqjl3A1-eqqIrcqJmCxujcgbe6loYARcfVDZWZVLggYf9-f7LUz3gdGa5IxQ.png)

-   **Fichero** esta primera sección contiene un parámetro de tipo entrada para que el usuario pueda introducir el nombre del fichero del 349 como parámetro de entrada a la hora de generar el fichero.
-   **Identificación y Totales** esta segunda sección tiene:
    -   **4 parámetros de tipo “entrada”** que se mostrarán en el momento de generar el 349 con el fin de que el usuario los introduzca manualmente:
        -   Persona de contacto: Apellidos y nombre de la persona de contacto. Este parámetro de tipo entrada podría ser modificado a tipo constante y, por tanto, se debería especificar el valor de dicha constante que en este caso sería el nombre de la persona de contacto, para los escenarios en que la misma persona presenta la declaración. De ser así, este parámetro no tendría que informarse cada vez que se genera la declaración.
        -   Teléfono de contacto: Número de teléfono de la persona de contacto. Este parámetro de tipo entrada podría ser modificado a tipo constante y, por tanto, se debería especificar el valor de dicha constante que en este caso sería el teléfono de la persona de contacto, para los escenarios en que la misma persona presenta la declaración. De ser así, este parámetro no tendría que informarse cada vez que se genera la declaración.
        -   Declaración sustitutiva (si/no)
        -   Identificador declaración anterior: Número de la declaración a sustituir.
    -   **3 parámetros de tipo “salida”** que el sistema recogerá de la base de datos:
        -   Año
        -   Nombre de la organización
        -   NIF/CIF de la organización
-   **Operaciones** esta tercera sección tiene 2 parámetros de tipo “salida” que asociados a los tipos impositivos correspondientes incluirán las operaciones en el 349:
    -   Entregas intracomunitarias de bienes – Clave tributaria E
    -   Adquisiciones intracomunitarias de bienes – Clave tributaria A
-   **Constantes** esta cuarta sección tiene 11 parámetros de tipo “constante”:
    -   Constante en caso de informe anual (0A)
    -   Constante para el primer trimestre (1T)
    -   Constante para el segundo trimestre (2T)
    -   Constante para el tercer trimestre (3T)
    -   Constante para el cuarto trimestre (4T)
    -   Número de declaración del 349 (349 se reemplaza al remitir el fichero)
    -   Tipo de declaración (349)
    -   Línea tipo 1 (1)
    -   Línea tipo 2 operaciones (2)
    -   Línea tipo 2 correcciones (2)
    -   Presentación (T)

##### **Configuración de impuestos**

Este nuevo módulo de generación del modelo 349 se basa en el módulo de impuestos para España y en uno específico para el 349.

El usuario puede comprobar en la ruta de aplicación: Gestión Financiera / Contabilidad / Configuración / Rango impuesto - pestaña Parámetro de Impuesto que los “tipos impositivos/impuestos” que deben incluirse en el 349 se han asociado al correspondiente parámetro de impuesto del 349:

-   Los tipos de IVA de adquisiciones intracomunitarias se han asociado con el parámetro “Adquisiciones intracomunitarias de bienes” que se corresponde con la clave de operación del 349: “A”

![](https://docs.etendo.software/latest/assets/drive/KfmRrt9yoEP7_JdY9pGj74eYjDSqeyfBKSdPOhVonW4dkyhp_ooo6fq_VvIR-JcZsvSLAqbAMCowQduY6t-bMNJ_XJCHhqpkFCqo9Fkddj0GPykc5YhEp8TZKoOmZTXyWLYNY2PgG-JTVAdV2I6h_gZLLB-n48YQGkJdC5M8_iKRF7lv0W6I93sY6w.png)

-   Los tipos de IVA de entregas intracomunitarias se han asociado con el parámetro “Entregas intracomunitarias de bienes” que se corresponde con la clave de operación del 349: “E”

![](https://docs.etendo.software/latest/assets/drive/M9IdlZd-5bo-JKwXpqzeEiWsaa3ONYSfKXANXvyS8TFgbYrOUVg4LjLNidbkGB9lpDkSyNFJQeaV3JpBU_U6IFw2deN8Hi7v5zQhzvAuZNHfE4C2cXoxZu6orkao7wqoXLbdfN40AkRo2obRJexQcI_PQAlOY85AwyUL_-pfUnFrUBHBkhkiMN8Odg.png)

#### **Generación del modelo 349**

El modelo 349 se genera desde la ruta de aplicación: Gestión Financiera / Contabilidad / Herramientas de análisis / Generador de declaraciones de impuestos. El usuario puede generar el modelo 349 para cualquier mes natural, trimestre natural o bien para el año que desea, tal y como se muestra en las pantallas siguientes:

![](https://docs.etendo.software/latest/assets/drive/ajXlOv6TaSCfuNPH4ti4kb0oWm2V4BommSomzro0ZtwUi9P_MqK2QydL8RjnbP9dZ0jdU_iXnYr958xhg5mmGYK1msnKIQqnGKVrNVT6EqQYsqK4hGfKR7VV21YB2EvluSKzXnC4AWnPo2ZLENR5mSWIlsKMKbGdPJ2kZn8VilJkc7KVL20L9bW8pg.png)

![](https://docs.etendo.software/latest/assets/drive/bexJeVp33GqVPTWs2j-Z5_3gP2ywX0ej3VPCpQBrbBBkogNFQZ02p_hkUr2y9GipS0Z8uZ8zIj_zFIli04pNqqzK4FGSbPFiFgPlYShPVMCcvSuBIGxAZhBT2gbMtxm2nV_omJ3BguAthe6i320j95im5TmxSCsnmech5ZFWUyUhhks4MFsTvxIVqw.png)

![](https://docs.etendo.software/latest/assets/drive/lj6JxfJvSCO3n4p3kIK_SIXgIbUVY0Oqt4iJJMZPJGYy-JhM3rp6C96LMeAGmK5p33pacEBtCOb0Llmm1G4IoWG6KiEpvPY_IQjyDXZ2lf5uqZBt2_geN7M-aG-97lFUFC16BLcCK6XAB5hC-e18eBunH1RQfRX2_tOwNBJEFVgVwOkf5POwOFWRuw.png)

En la ventana de generación de informes, el usuario deberá introducir los siguientes datos para generar el modelo 349:

**Organización** para la cual quiere generar el Modelo 349. El sistema mostrará el calendario asociado a la organización en un campo no editable.

**Esquema contable**

**Declaración de impuestos**. El usuario debería seleccionar aquí el modelo 349 mensual, trimestral o anual.

**Ejercicio**. El usuario puede seleccionar el año para el cual quiere obtener el 349.

**Periodo**. Si el usuario ha seleccionado el modelo 349 mensual, podrá seleccionar aquí el período (por ejemplo, enero 22), si ha seleccionado el modelo 349 trimestral, podrá seleccionar aquí el período (por ejemplo, enero 22 – marzo 22) y si ha seleccionado el modelo 349 anual, este campo mostrará, como valor por defecto, “Anual”.

Una vez introducidos los datos anteriores, el usuario puede introducir los parámetros de entrada del 349 en el botón de proceso “Parámetros de entrada”

![](https://docs.etendo.software/latest/assets/drive/5i9PO0yuY0M54bcqQ5wMi6y9VjSP18KJBqhgyUFL5pfn5NST30ZaM-zOyqWJZ4KfkX_0m7B_jNUUfhUKNDOI5iNYxD6xlx0b54ajbT0_26cnQGYRKIBLdzoDcCEiYz-08U-TOsJ9Q8vKm_XeSi7AChRNm-sSwhL8zmq99ULTHXlMTXTTXGuM1kZP.png)

y una vez introducidos los parámetros de entrada, el usuario puede generar el 349 a través del botón de proceso “Generar fichero”.

##### Navarra y Guipúzcoa

Se incluyen 2 nuevos check que permiten generar el fichero con la parametrización correcta para poder realizar su presentación en Hacienda Navarra y Hacienda Guipúzcoa:

![](https://docs.etendo.software/latest/assets/drive/yM3HJ5ASqiH4Qs-ZgFfKANQSIVTin-DqGq0zKSmvduihJS7WOddNRd448Wv5eni03bNiwWYjVCVtZU47t4sUIyIfF18hUY-JL-oA2B_0374_CXHpXvsPICoc0TtxcvEnrrJ_ZK6ezf1gUzdsvhxXdr8.png)

Anteriormente, el fichero generado del modelo 349 sólo se podía presentar en AEAT. Con esta mejora, se permite la presentación tanto en Navarra como en Guipúzcoa en función del check que marquemos (si no se marca ninguno, el fichero se genera con la parametrización para la AEAT).

#### **Casos de usuario**

##### **Generación del modelo 349 como un fichero de texto válido**

Esta funcionalidad permitirá a las empresas españolas generar el modelo 349 como un fichero de texto conforme a los requisitos establecidos por la normativa española, para un periodo determinado.

Durante el año/trimestre/mes natural, el usuario registrará en Etendo las transacciones de compra y/o devolución con sus proveedores de la Unión Europea así como las transacciones de venta y/o devoluciones de ventas con sus clientes de la unión europea.

Las transacciones de compra y venta, se deberán introducir en el sistema normalmente a través de los tipos de documento de compra (albarán de compra y factura de compra =AP invoice) y de venta (albarán de venta y factura de venta =AR invoice), respectivamente.

Las transacciones de devolución, tanto de compra como de venta, se deberán introducir en el sistema normalmente a través de los tipos de documento de compra (albarán de compra y abono de compra =AP invoice Negativa) y de venta (albarán de venta y abono de venta=AR invoice Negativa).

Además, deberá asegurarse de que todos los productos tienen la parametrización adecuada en relación con las categorías de impuestos que tienen asociadas (21%-10%-4%).

Una vez que todas las operaciones se han registrado en el sistema, el usuario podrá generar el fichero del modelo 349 tal y como se explicó en la sección de este documento “Generación del Modelo 349”. El fichero txt del 349 tiene la siguiente estructura:

![349 4T.png](https://docs.etendo.software/latest/assets/drive/4_Ps-YvMKdQKgeHJ_8HkhOwYAerhc8oX6OB58UG1NX5nSoSPBvgsR6vpY2MjmJk1pOhsFk4SmLv_ETEI4Fm4ZBDkWuxdFH4ZcDSJ83NIb3m9QNrqqWssPrfkpRjovNPC2MpEfj9CTun2h_BQgo0TNyAt5gyqhJFR6Qr5dt5T91F5tH-HCYkaJABLfw.png)

##### **Tipo registro 1 – Registro de declarante:**

|     |     |
| --- | --- |
| **Posiciones** | **Descripción** |
| **1** | Tipo de Registro (constante = 1) |
| **2-4** | Modelo Declaración (constante = 349) |
| **5-8** | Ejercicio |
| **9-17** | NIF del declarante |
| **18-57** | Apellidos y nombre o razón social del declarante |
| **58** | Blanco |
| **59-107** | Persona con quién relacionarse: Teléfono / Apellidos y nombre |
| **108-120** | Número identificativo de la declaración |
| **121-122** | Declaración complementaria o substitutiva |
| **123-135** | Número identificativo de la declaración anterior |
| **136-137** | Periodo (predeterminado = 1T,2T,3T,4T,0A,01,02,03,04,05,06,07,08,09,10,11,12) |
| **138-146** | Número total de operadores intracomunitarios |
| **147-161** | Importe de las operaciones intracomunitarias |
| **162-170** | Número total de operadores intracomunitarios con rectificaciones |
| **171-185** | Importe de las rectificaciones |
| **186** | Indicador cambio periodicidad en la obligación de declarar |
| **187- 390** | Blancos |
| **391 - 399** | NIF del representante legal |
| **400 - 500** | Blancos |

##### **Tipo de Registro 2 – Registro de operador intracomunitario**

|     |     |
| --- | --- |
| **Posiciones** | **Descripción** |
| **1** | Tipo de Registro (constante = 2) |
| **2-4** | Modelo Declaración (constante = 349) |
| **5-8** | Ejercicio |
| **9-17** | NIF del declarante |
| **18-75** | Blancos |
| **76-92** | NIF del operador comunitario |
| **93-132** | Apellidos y nombre o razón social del operador intracomunitario |
| **133** | Clave de operación (E, M, H, A, T, S, I, R, D o C) |
| **134-146** | Base Imponible o Importe |
| **147-178** | Blancos |
| **179- 195** | NIF Empresario o Profesional Destinatario final sustituto |
| **196- 235** | Apellidos y Nombre o Razón social del sujeto pasivo sustituto |
| **236- 500** | Blancos |

##### **Tipo de Registro 2 – Registro de rectificaciones**

|     |     |
| --- | --- |
| **Posiciones** | **Descripción** |
| **1** | Tipo de Registro (constante = 2) |
| **2-4** | Modelo Declaración (constante = 349) |
| **5-8** | Ejercicio |
| **9-17** | NIF del declarante |
| **18-75** | Blancos |
| **76-92** | NIF del operador comunitario |
| **93-132** | Apellidos y nombre o razón social del operador intracomunitario |
| **133** | Clave de operación (E, M, H, A, T, S, I, R, D o C) |
| **134-146** | Blancos |
| **147-178** | Rectificaciones   <br>  <br>\- 147-150 ejercicio (de la declaración que se corrige)   <br>\- 151-152 periodo (de la declaración que se corrige)   <br>\- 153-165 base imponible (para el tercero y el periodo) rectificada   <br>\- 166-178 base imponible (para el tercero y el periodo) declarada anteriormente |
| **179- 195** | NIF Empresario o Profesional Destinatario final sustituto |
| **196- 235** | Apellidos y Nombre o Razón social del sujeto pasivo sustituto |
| **236- 500** | Blancos |

##### **Operaciones rectificativas del 349**

En el modelo/fichero del 349 hay que diferenciar de forma específica en el registro tipo 2 de "Rectificaciones aquellas notas de abono a facturas que ya fueron incluidas en una declaración 349 para un periodo anterior al corriente, por ejemplo:

-   **Declaración 349 Mensual** = Una nota de abono de fecha agosto del 2022 que abona una factura de fecha julio del 2022 que ya fue incluída en la declaración del 349 del mes de julio del 2022. La nota de abono de fecha agosto debe incluirse en la declaración del mes de agosto como rectificativa a la declaración del mes de julio para el proveedor/cliente que aplique, indicando además el importe total (base imponible) de compra/venta que se incluyó en la declaración de julio para ese cliente/proveedor.
-   **Declaración 349 Trimestral** = Lo mismo aplica en el caso de presentación de la declaración del 349 de forma trimestral, lo único que varía en este escenario es que en vez de tener en cuenta meses se tendrán en cuenta trimestres.
-   **Declaración 349 Anual** = Lo mismo aplica en el caso de presentación de la declaración del 349 de forma anual, lo único que varía en este escenario es que en vez de tener en cuenta meses/trimestres se tendrán en cuenta el año natural.

Y las que no y deben acumularse para el periodo, por ejemplo:

-   **Declaración 349 Mensual** = Una nota de abono de fecha de agosto 2022 que abona una factura de fecha de agosto 2022 que todavía no ha sido incluida en la Declaración del 349 para el mes de agosto del 2022, se incluirá en la declaración de agosto como un menor valor del importe de compra/venta con el correspondiente proveedor/cliente.
-   **Declaración 349 Trimestral o Anual** = Lo mismo aplica en el caso de presentación de la declaración del 349 de forma trimestral o Anual, lo único que varía en este escenario es que en vez de tener en cuenta meses se tendrán en cuenta trimestres o el año natural.

Es por ello que se ha introducido en el sistema una funcionalidad que permite al usuario, a la hora de crear una nota de abono o devolución, indicar si dicha nota de abono/devolución es una “rectificativa del 349” o no, es decir, si rectifica a una factura (factura rectificada) de un año/mes/trimestre natural anterior y que, por tanto, ya se incluyó en una declaración del 349 anterior.

Para introducir esta información, el usuario deberá navegar a Gestión de compras o Ventas / Transacciones / Factura (Proveedor) o Factura (Cliente), crear una nueva factura como:

-   una AP/AR invoice negativa (devolución de mercancía al proveedor/cliente)
-   una AP/AR credit Memo
-   una Reversed Purchase/Sales Invoice
-   o incluso la anulación total de una factura de compra/venta;

e introducir los datos relativos al abono y devolución de mercancía y, en la pestaña “Factura Rectificativa”, crear un nuevo registro con el fin de:

-   seleccionar la factura (original) que esta abonándose o rectificándose - esa selección ya vendŕa dada en caso de anulación total de una factura.
-   y además seleccionar el nuevo campo “Rectificativa del 349”, con el fin de indicar además:
    -   el Año de la factura original que se rectifica
    -   el Periodo de la factura original y, por tanto, el periodo en el cual dicha factura original se incluyó en un 349
    -   La base imponible del 349 de productos o, lo que es lo mismo, El importe total de compra/venta (que para operaciones intracomunitarias coincide con la Base Imponible total) que para dicho periodo y para dicho proveedor/cliente se informó en el 349 anterior con respecto a la compra/venta de productos (Clave A en compras, Clave E en ventas)
    -   y la base imponible del 349 servicios o, lo que es lo mismo, El importe total de compra/venta (que para operaciones intracomunitarias coincide con la Base Imponible total) que para dicho periodo y para dicho proveedor/cliente se informó en el 349 anterior con respecto a la compra/venta de servicios (Clave I en compras, Clave S en ventas)

![](https://docs.etendo.software/latest/assets/drive/vi_SXEIsX7fl_bwkI5sm1XIKSMs7Ts0Z2mbdjIKBZTPCCmetky4ch7u-EhHzPh2ZgHf5UNYO9M36vkH2CG_lLB6hYJ8KhiF1pNVahoUxgovjB1mVJbFKtbr01lqAvGkctdWmJ7skW2umwSjvRobDk0_lAQtQkW7-W-FwN8EBjlO5eK_m3H2iyZG1Qw.png)

Tal y como se muestra en la pantalla anterior, esta funcionalidad requiere mostrar en Etendo las columnas que se detallan a continuación:

-   Correctiva del 349
-   Año
-   Periodo
-   Base Imponible del 349 Productos
-   Business Partner
-   Base Imponible del 349 Servicios

!!! info
    No todas las notas de abono o devoluciones de mercancía serán rectificativas del 349, sólo aquellas que así se configuren por el usuario. 

En caso de que la nota de abono o devolución de mercancía y la factura original pertenezcan al mismo periodo, por ejemplo al 1er mes del año 2022 (Enero 2022, en caso de declaración del 349 mensual), al 1er periodo del año 2022 (Enero 2022 a Marzo 2022, en caso de declaración del 349 trimestral) o al mismo mes (Enero 2022, en el caso de declaración del 349 mensual), tan sólo será necesario relacionar ambos documentos en la nueva pestaña “Factura Rectificativa” sin tener que seleccionar el parámetro “Rectificativa del 349”.

En este último escenario, el sistema, para un mismo proveedor o cliente y periodo, acumulará las facturas positivas y los abonos con el fin de generar el computo global del importe de las transacciones de compra/venta efectuadas con dicho proveedor/cliente (operador intracomunitario) que debe incluirse en la declaración del 349 para un periodo determinado.

##### **Presentación del modelo 349 en formato electrónico**

La presentación telemática del modelo 349 en formato electrónico requiere que las empresas tenga un NIF español así como un Certificado electrónico emitido por la “Fábrica Nacional de Moneda y Timbre” (FNMT) u otro Certificado válido y reconocido por Hacienda.

La presentación telemática puede realizarse a través de la página web de la Hacienda Pública española, desde el enlace “Oficina virtual”-”Presentación de declaraciones” - “Todas las declaraciones” - “Modelo 349”

!!! info
    Existe una “Guía de presentación telemática” en la página web de Hacienda que nos explica cómo debe realizarse la presentación telemática de las declaraciones y que se puede descargar [*aquí*](https://sede.agenciatributaria.gob.es/static_files/Sede/Procedimiento_ayuda/GI28/instr_mod_349.pdf).


##### **Presentación de declaraciones sustitutivas**

Es necesario presentar una declaración sustitutiva cuando dicha declaración tenga por objeto anular y sustituir completamente a otra declaración anterior para el mismo periodo ya enviada a Hacienda, en la cual se hubieran incluido datos inexactos o erróneos.

Para ello el usuario deberá realizar en la aplicación los cambios en los datos/transacciones pertinentes y volver a generar una nueva declaración 349 como fichero indicando en este caso que la nueva declaración que se presenta es sustitutiva de una anterior, e indicando además el número de la declaración original a la que sustituye, tal y como se muestra en la siguiente pantalla:

![](https://docs.etendo.software/latest/assets/drive/iSU9FGfN3pSTIsHPTAKpZsKZsCB7C0BhZa1RBDpzcJQ8uaOHAUmMPFuYQkhQbrQ2izd9kDfZ0TCiEHdGvHIE7iHOc-uDNoBEhDS5cF9x__Bf2rQgvz47h3U88ViVeZimkAUXctFTFhF9gZYbywo3Nb23iqRQ0Tfq03VSTqcEOcsQQnYJVi6MGxDajA.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Modelo 390
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Spanish Localization Bundle/Modelo 390
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/modelo-390
## Article Content: 
#### Javapackages 

:octicons-package-16: Javapackage: `org.openbravo.module.aeat390.es`

#### **Introducción**

El presente manual de usuario explica el contenido y funcionamiento del módulo comercial de Etendo, “**Modelo 390**”. 

#### **Descripción del Modelo** 

El módulo **Modelo 390** permite a las empresas cumplir con sus obligaciones fiscales relativas a la obligatoriedad de declarar un resumen anual de la liquidación del IVA durante el ejercicio fiscal.

Esta declaración se debe enviar a la AEAT como un fichero XML de acuerdo con la normativa vigente.

El Modelo 390 se debe presentar cada año durante los primeros 30 días del mes de enero del año siguiente, junto con la autoliquidación del IVA Modelo 303 correspondiente al último periodo del año.

La liquidación anual del IVA permite al usuario calcular el importe anual que debe pagar a, o ser devuelto por Hacienda como la diferencia entre el IVA devengado y el soportado deducible.

Con este nuevo módulo comercial, el Modelo 390 se puede presentar a Hacienda como un fichero de texto válido, obtenido a través del "Generador de Declaraciones de Impuestos".

#### **Contenido del fichero Modelo 390**

El fichero generado por Etendo, que cumple con el formato requerido por la Agencia Tributaria, contiene una estructura en formato XML con las siguientes secciones:

-   Sujeto Pasivo y devengo
-   Datos Estadísticos
    -   Actividad
    -   Clave
    -   Epígrafe
-   Datos del Representante
    -   Personas Físicas
    -   Personas Jurídicas
-   Operaciones realizadas en régimen general (IVA Devengado)
-   Operaciones realizadas en régimen general (IVA Deducible)
-   Resultado liquidación anual
-   Tributación por razón de territorio
-   Resultado de las liquidaciones
    -   Periodos que no tributan en Régimen especial del grupo de entidades
-   Volumen de operaciones
    -   Operaciones en Régimen General
    -   Operaciones en RECC
    -   Entregas Intracomunitarias Exentas
    -   Operaciones exentas sin derecho a deducción
    -   Exportaciones y otras operaciones exentas con derecho a deducción
    -   Operaciones no sujetas por reglas de localización o con inversión del sujeto pasivo
    -   Entregas de bienes inmuebles y operaciones financieras no habituales
    -   Entregas de bienes de inversión
-   Operaciones específicas - Operaciones realizadas en el ejercicio
    -   Adquisiciones interiores exentas
    -   Adquisiciones intracomunitarias exentas
    -   Servicios localizados en el territorio de aplicación del impuesto por inversión del sujeto pasivo
    -   Entregas de bienes y prestación de servicios en RECC, criterio devengo art 75 LIVA
    -   Adquisiciones de bienes y servicios en RECC, criterio devengo art 75 LIVA

Al contrario de otros modelos tributarios, este fichero XML no se puede importar en ningún software de la AEAT para su previsualización y edición.

Sin embargo, debido a su estructura XML, este fichero se puede abrir directamente con cualquier editor de texto plano y su contenido es fácilmente entendible.

A continuación se muestra como ejemplo un fragmento de dicho fichero:

![](https://docs.etendo.software/latest/assets/drive/3QJUPmIRRgydZM5-NvNgNFFdnM3pL6nmrrOkKyK9954vq1uCkiyLLrpxXy6BYWDfqGCWGU-syZWT6e4-ELClbkW_zjf3sssmTsohd-XoHntzYFwUzQiw5aqWybMwI6NLu1zTGp7b_Kz_h4xexbEYQdvwGquwY_AUWxwg_7dXC0byB3bmWGfcgfGke70i5w.png)

Para facilitar el estudio y la comprensión de las cifras obtenidas y, debido al gran número de transacciones y tipos de impuestos que pueden incluirse en este modelo, el módulo del Modelo 390 de Etendo genera un fichero .csv que puede abrirse con cualquier software de Hoja de Cálculo. 

Este fichero .csv lista todas las transacciones incluidas en el fichero XML, el impuesto relacionado, el importe de base imponible y cuota junto a la casilla del Modelo 390 oficial en la que se ha incluido dicha transacción.

#### **Instalación y configuración del módulo**

##### **Instalación**

El soporte para el Modelo 390 en Etendo se distribuye en un único módulo. Este módulo tiene un gran número de dependencias, que serán instaladas automáticamente al instalar el 390. Entre estas dependencias destacan:

-   Taxes: configuration for Spain (Impuestos para España)
-   Tax Report Launcher
-   Provincias de España
-   Epígrafes del I.A.E.
-   Legal Representative of the Organization (representante legal de la organización)

Para su instalación el usuario debe seguir los pasos que se describen a continuación en función de la situación de partida:

-   Instalación de la última versión disponible del paquete profesional de Etendo Classic para España
-   o la instalación del módulo(s) de forma separada.

!!! info
    Para la instalación del módulo de Localización Española, visite [_Marketplace_](https://marketplace.etendo.cloud/#/product-details?module=003B475055DD421B9483B5BE15AA48C5){target="_blank"}. 


Adicionalmente, el Modelo 390 se distribuye en otro módulo compatible con el "Régimen Especial de Criterio de Caja" (RECC). Este módulo sólo contiene el juego de datos que relaciona los impuestos de IVA de Caja con los parámetros de declaración del Modelo 390 correspondientes. Si su organización está sujeta a este régimen o es destinataria de operaciones sujetas a este régimen, deberá instalar además este módulo.

##### **Aplicación del módulo**

Los módulos del Modelo AEAT 390 incluye un "conjunto de datos" o "configuración" que relaciona los tipos/rangos de impuestos para España, incluidos los de IVA de Caja, con los parámetros de declaración del 390.

Es por ello que, una vez instalado el módulo, la "configuración del Modelo 390" debe aplicarse a la Entidad legal con Contabilidad que corresponda, en la ruta de aplicación:

Configuración General | Organización | Gestión del módulo de Empresa.

![](https://docs.etendo.software/latest/assets/drive/KxO8csXtBkVFQ32QZFZVVG1SipP8sxYwagvvnkaCVpAP9q_1hN-lH3i_gv64w-cwl2j2Zg4x8tS5AxCCnlr72zxBECmJEUKcL3iYLlr1DrPjplAGmQ3yjKfDK2ZI5HBq3tWyck3CF-_7kMST8fGie_VUYt6hwj2lr2Q197NZ0q-pe-o2iQa5L5J1V6pF6A.png)

!!! info
    Es fundamental recalcar que antes de aplicar esta configuración, se debe haber aplicado previamente la configuración del módulo de [_impuestos para España_](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/impuestos-para-españa.md) y del módulo de impuestos para España de IVA de Caja ya que el Modelo 390 depende de estos módulos de impuestos para España.


Al instalar y aplicar los datos de referencia del Modelo 390 el usuario podrá comprobar que:

1. Se crea una nueva declaración del Modelo 390 anual, en la ruta de aplicación: Gestión Financiera | Contabilidad | Configuración | Declaración de impuestos, tal y como se muestra en la siguiente imagen:

![](https://docs.etendo.software/latest/assets/drive/4BgnIDpX0cT7z8sdAmqlsUOCEhMfGXzimfarXhM-6aAtY-vxDeu4a0q1LLa0gTlFWHmCJ-Nh7EDdmXBayEKkvrlJDz9kcAYIz9WKT4yBnln5-07j5T_s1GfJH7e8bwdG21GolrQaugGdBd1__hUTp-MoV9YpEgqghU5gOByi2XLwTUshfN9Gs24Y3qhZtg.png)

De ser necesario, para cada año fiscal se publica una nueva versión del Modelo 390 con los cambios tanto de diseño como de datos correspondientes. La última versión disponible es la relativa al periodo fiscal 2021.

2. Cada rango de impuestos del módulo de impuestos para España se asocian con el parámetro de declaración del Modelo 390 correspondiente, con el fin de que las transacciones ligadas a dichos impuestos completadas y contabilizadas en el sistema, se tenga en cuenta en una u otra casilla/nodo del fichero XML, tal y como se muestra en la siguiente imagen: 

![](https://docs.etendo.software/latest/assets/drive/xl0hUWgK97dvKk9LYorJ4vXXpltQStE57Zd_QmJ7BMlmTgWxmNBDiWnjz8FznBhE39VtlzT8WOd5sVjWVsnzgDa3mRuXsc-IU0e8M9O2CDxE6f1Zs9tSjwMZsJPIXGhgy_hzwe4Rlpszp9GHu0Wd4WocXCEHmOoukjpUTjGKM2Hy2kQzd3Wz9Q_dYJMhJQ.png)

En la imagen del ejemplo se muestra como las bases imponibles/cuotas ligadas al rango de impuesto "Entregas IVA 21%" se reflejarán en las casillas correspondientes del 390 relacionadas con:

-   IVA devengado - Operaciones en Régimen General
-   IVA devengado - Modificación de bases y cuotas (en el caso de abonos o facturas rectificativas)
-   IVA devengado - Total Bases y Cuotas IVA
-   Volumen de operaciones - Operaciones en Régimen General

3. Por último, el generador de declaraciones de impuestos permite la generación del fichero para la presentación del modelo 390 del período fiscal que corresponda, desde la ruta de aplicación:

Gestión Financiera | Contabilidad | Herramientas de análisis | Generador de declaraciones de impuestos.

##### **Tipos de documentos soportados por el módulo**

El informe se genera teniendo en cuenta la información disponible en las facturas de compra y venta contabilizadas que incluyan alguno de los impuestos declarados en la configuración del informe.

Más concretamente, los tipos de factura soportados son:

-   Facturas de venta tipo AR Invoice positivas
-   Facturas de venta tipo AR Invoice negativas
-   Facturas de venta de tipo Reversal negativas
-   Abonos de venta (Credit Memo) positivos
-   Facturas de compra tipo AR Invoice positivas
-   Facturas de compra tipo AR Invoice negativas
-   Facturas de compra de tipo Reversal negativas
-   Abonos de compra (Credit Memo) positivos

##### Configuración previa antes de generar el informe

###### **Impuestos**

!!! info
    No es necesario realizar ninguna configuración adicional si tiene aplicado y utiliza el Módulo de Impuestos para España y el Módulo de Impuestos para España de IVA de Caja. 

Es por ello que se recomienda utilizar estos módulos de impuestos para España.

Las transacciones relacionadas con impuestos creados manualmente sólo se incluirán en el Modelo 390 si se relacionan correctamente con el/los parámetros del 390 que corresponda:

-   si, por ejemplo, se crea un nuevo tipo de IVA de compras nacionales de bienes al 21%, dicho impuesto debería estar relacionado con los parámetros:  
    "Modelo 390 v 2021 - Declaración Anual de IVA - IVA Deducible - Operaciones Interiores Corrientes - IVA Deducible en operaciones interiores de bienes y servicios corrientes."  
    "Modelo 390 v 2021 - Declaración Anual de IVA - IVA Deducible - Rectificación de deducciones."

Recuerde que Etendo en la actualidad no contempla que un rango de impuesto de compras pueda definirse como parcialmente deducible.

Configuraciones del tipo:

-   Impuesto padre "Adquisiciones IVA 21% (no 100% deducible)"
    -   Impuesto hijo "Adquisiciones IVA 21% (50% deducible)" con un índice 10.50, marcado como "Impuesto Deducible".
    -   Impuesto hijo "Adquisiciones IVA 21% (50% no deducible)" con un índice 10.50, marcado como "Impuesto No deducible"

no permitirán la generación del Modelo 390 ya que el índice 10.50% no es un índice o tipo que reconozca el fichero del 390.

Estos impuestos no deberán estar ligados a parámetros del 390 y sus importes (base y cuota) deberán reflejarse en el programa "IVA 2021" o el que corresponda de forma manual.

###### **Actividades del I.A.E.**

En el Modelo 390 se deben declarar las principales actividades del I.A.E. (Impuesto de Actividades Económicas) en las que la empresa trabaja habitualmente.

El módulo Epígrafes I.A.E., instalado como dependencia del 390, añade una nueva solapa a la ventana de Organización en la que puede indicar todas las actividades en las que su empresa ha estado trabajando. El modelo 390 debe incluir como mínimo una actividad principal, que debe estar marcada en la aplicación como por defecto, y como máximo 5 actividades. En caso de incluir más de 5 actividades, se incluirán en el informe las 5 primeras según el número de línea.

![](https://docs.etendo.software/latest/assets/drive/xWyc9Dzkqn1i48qdwqYjwylIUK39OllwglsbxorOf_u8TNJXZr4J4fAxALMyMvi6eCiATDGan8Z0C2No0SA-NVcsiXBPGo1qvj6VLamQwVYMTUgnW5oMaiouFU-eY65XVXK_YZPPzg6z6Rns5Bl-9IpSiIjKz-NCaNr6oG1tsoCdlsSPPfFyGqmH_pPBnQ.png)

En el módulo de Epígrafes IAE se incluye el conjunto correspondiente a la clave 1. Si desea incluir un epígrafe que pertenezca a cualquier otra clave, tan sólo debe crear un nuevo registro en la ventana Epígrafes IAE e incluirlo en un registro de la solapa de Actividades del IAE de la ventana de Organización.

###### **Representante Legal de la Organización**

Si su organización tiene uno o varios representantes legales debe declararlos en la solapa correspondiente de la ventana Organización, que está disponible al instalar el módulo Legal Representative of the Organization (representante legal de la organización).

![](https://docs.etendo.software/latest/assets/drive/yXySL0UNxH9GjB2DhIDbmoLdXxISY9aj4zmmZbU-1Y2usima7UM_5a7yLx09zNDmAgbtkf_SSCNZPcb2urJ_3ePFmHFQnqtaVN4QDfNI2dRxwgdtOuMWhOx_gnpMfrN6STY5jh9ZswHTceH1gUWu-mnwenFo-yKbOn0DMs-0_eGv1QK2lsOEkuDf9vppNQ.png)

##### **Generación del modelo 390**

Tal y como ya se ha explicado, el modelo 390, se genera como un fichero XML válido conforme a los requerimientos de la AEAT desde la ruta de aplicación: Gestión Financiera | Contabilidad | Herramientas de análisis | Generador de declaraciones de impuestos | Generador de declaraciones de impuestos

Una vez que el usuario ha introducido los datos genéricos, tales como la "organización", el "ejercicio" y "periodo", así como la "Declaración de Impuestos'', puede introducir los parámetros de entrada propios del Modelo 390 para posteriormente generar el fichero.

La ventana de "parámetros de entrada" del 390 se muestra en la siguiente imagen:

![](https://docs.etendo.software/latest/assets/drive/8E1H3y4j_5fmJ2K87L8xc2v10m8UvRU-ub-M3flFlZbORFRpy9LDEs80TBAteUllGVPdzAJ6dCOeiVtQkk5506tixB29SWgte_QF8PKQPl7Kq_UKT8BWu8snG4dOTY_X6bKiaEol3NwlDrO6uvf-GGVmylSiX-3cejwlHi577Y1eKobtQFLwJBq1haz17A.png)

Los parámetros de entrada tienen que ver con datos que no pueden extraerse directamente desde Etendo. Datos como:

-   check para indicar si se está "**Inscrito en el registro de devolución mensual**"
-   campo de texto para introducir un **Nombre del fichero** del 390
-   check para indicar si "**Ha sido declarado en concurso de acreedores en el ejercicio**"
-   check para indicar si "**las autoliquidaciones del último periodo de liquidación del ejercicio corresponden a declaraciones concursales**"
-   check para indicar si se trata de una "**Declaración Sustitutiva**"
-   check para indicar si se trata de una "**Declaración sustitutiva por rectificación de cuotas**"
-   campo de texto para introducir el "**Número identificativo de la declaración anterior**" que se sustituye o rectifica
-   campo de texto para introducir si aplica la cuota a "**compensar del ejercicio anterior**" 
-   campos de texto para introducir los "**% de tributación por razón de territorio**", en los casos en que no hay una tributación al 100% al territorio común.
    -   Si se introduce un valor aquí (p.ej 50% territorio común, 50% Navarra) el resultado de la liquidación anual se borra y pasa a la casilla Resultado de la liquidación anual atribuible a territorio común.
-   campo de texto para introducir la cuota a **Compensar atribuible a territorio común** 
-   campos de texto para introducir los **resultados a ingresar en las autoliquidaciones de IVA del ejercicio**, si aplica.
-   campos de texto para introducir el **total de devoluciones mensuales/trimestrales de IVA** (Modelo 303 en los casos de inscripción en el registro de devolución mensual
-   campo de texto para introducir el **Resultado de la autoliquidación del último período a compensar**
-   campo de texto para introducir "las cuotas pendientes de compensación al término del ejercicio" 



###### **Transformación de parámetros de entrada en constantes**

Como se puede observar, el número de parámetros de entrada es muy elevado. Para evitar tener que introducir todos estos datos cada vez que se genera el informe, el módulo del 390 permite definir como constantes cada uno de los parámetros de entrada. Para ello sólo tiene que encontrar el parámetro de entrada en la definición del informe (ventana Declaración de impuestos), cambiarle el tipo de parámetro a constante y definir el valor de dicha constante.

Por ejemplo, en nuestra organización el porcentaje de tributación en Territorio Común es el 50% por lo que cambiamos ese parámetro a tipo constante con un valor de 50

![](https://docs.etendo.software/latest/assets/drive/oPL91YrGG3zCsXi6j_4OtAmkDz1BaSshkNuh7EHEaKaA0GRfAULiEa-FMJ9FAIvUYC0bmbd1opqeGAbrOyYqaqa1DuTCQEsBwYKu_1KYlCgVmXMg7MC1GIHOjh4m6DpDIQPYe7-l1rzoLdb6b_O58kAj31JExjZ7q4SUVrl_-2rNyDH59cMTDK7wJKkBdg.png)

A partir de ahora, cada vez que generemos el informe de nuevo no será necesario introducir este parámetro, ya que ni siquiera aparecerá de nuevo en la ventana de parámetros de entrada del 390.

#### **Resultado del Modelo 390**

Una vez que el proceso de generación del informe ha finalizado, el sistema nos devolverá un fichero comprimido ZIP. Si lo descomprimimos, en su interior encontraremos dos ficheros:

##### **Fichero XML**

Este fichero XML es compatible con el formato oficial publicado en el BOE para el modelo 390 listo para ser enviado a la AEAT. Este fichero se puede abrir con cualquier editor de texto plano para examinar o editar su contenido

![](https://docs.etendo.software/latest/assets/drive/EUtcF7232b2XmCvVtzha9eEJfC7WDVPvbaKUX_WHEWEgiDANwi84Wd7cEUbO_NegLTIbeX80wxazDMZo4HlUKhCBOJqxBmM_KzHycha0gqHfpCaW4VjQaAZy_MYjcVCNb2cq_YfXnO_tBliBrdhmD-hN-4qUQjAjz5yzUJGD23C10KUBdY9ZVWR4q0On4g.png)

##### **Fichero CSV**

Un fichero CSV con la lista de facturas e importes que se han utilizado para generar el informe. Este archivo se puede importar en cualquier software de Hoja de Cálculo. 

A la hora de importar el fichero es importante que defina los siguientes filtros:

-   Juego de caracteres: **UTF-8**
-   Separador: **punto y coma**, es decir **;**
-   Delimitador de texto: **comilla doble**, es decir **“**

![Aeat390 import.png](https://docs.etendo.software/latest/assets/drive/Fc1f4L1omag1JBtJviufoH3pfPYmhHhmEJQERSVywOgU-cFo61aeNpvBArNzHKqy8DZ3VYBrSGj2X61-lKXWeTMjuj3_2yzAH31aWmLXYUl3B7yu3XXn44ckoTvoIjc87sdMmULxPgqrgTNEr1bJ953euAb0AXns7Byum7nttim66d8Foevat49TzZB-1g.png)

Este es el aspecto del fichero una vez importado como hoja de cálculo:

![390 FicheroCSV.png](https://docs.etendo.software/latest/assets/drive/Gu3UCsXhF30LRTvr-afGt4BYargy1tzXgHIqBJgj6zBW-wYVgdriORZwzLc0tOxdOn_nNmnf43GaZj4MmVQY5YC6oyYYXlBnMm4zAVDOqYx6pVXDpIbCitc6K2NqxuKyfdrmsc2_7-fatxQprZvMwurwj-7bGWzwEmF7CYEvIRbNONDMupNEC-LPk60JMQ.png)

La hoja nos muestra las facturas que se han tenido en cuenta para generar el 390, el impuesto (porcentaje, cuota y base imponible en Euros) de cada factura y el grupo de casillas correspondientes del 390 en las que se ha incluido dicho importe.

La columna *Casilla 390* representa la casilla o grupo de casillas en las que se ha incluido dicho importe. Esas casillas se corresponden con nodos del fichero XML generado desde Etendo.

Por ejemplo, en la fila número 2 del ejemplo anterior vemos que esa transacción se incluye en el grupo de casillas *01 02 03 04 05 06*, que se corresponden con los siguientes nodos del fichero XML:

<RegGeneral>

<BaseImponibleyCuota>

<RegOrdinario>

<Tipo4>

Si buscamos estas casillas en el modelo 390 oficial, veremos que corresponden al Régimen ordinario del IVA devengado, por lo que esta transacción en concreto deberá reflejarse en las casillas *01* y *02* (IVA Devengado - Régimen Ordinario *4%*)

![390 RegimenOrdinario.png](https://docs.etendo.software/latest/assets/drive/MIkgy9VbltH8VQNF1UrsspqDDWjP3Y8swgINiFHl8IuTC7lKcmgofIqY_C6uW6laaZPMi5AgeymL10lbz8YeiOdBPd9xInFqOWCxo64IzsRtA2gVw8Y6AW7FPzlj-eg8s1QkHIWOg2DPaJh0_73wOqcdmYbnyITCZK3hJsLZMmaVieULukdFPGrfgFonyw.png)

!!! warning
    *Es importante tener en cuenta que las casillas correspondientes a subtotales de los grupos de IVA deducible (por ejemplo casillas 48 y 49) no se incluyen en el fichero CSV pero sí se incluyen en el archivo XML que contiene el informe oficial. Estas casillas se autogeneran como el sumatorio de las bases imponibles y cuotas de las casillas correspondientes de su grupo (por ejemplo casillas 190 a 606) que sí se incluyen en el CSV. Esta es una limitación del fichero CSV que no afecta en absoluto al informe oficial generado.*


###### **Ventajas**

El tener todos los datos en la hoja de cálculo nos permite examinar la información con detalle. Por ejemplo:

-   se puede definir un filtro automático en la primera fila que nos permita filtrar por cualquiera de las columnas. De esta forma responderemos a preguntas del estilo: ¿la factura 1000013 en qué casillas del 390 se ha incluido? ¿Qué facturas se han incluido en un determinado grupo de casillas del 390?, etc.
-   también se puede realizar sumatorios sobre las columnas de cuota y base imponible para asegurarnos de que el importe incluido en el 390 es el correcto.
-   Otra ventaja de tener la información tan detallada es que nos puede servir para rellenar manualmente el modelo 390 en el programa de ayuda “IVA 2016”. Esto puede ser útil en caso de que queramos añadir información adicional no disponible en nuestra instancia de Etendo.

#### **Presentación telemática del Modelo 390**

Una vez que ha comprobado que las cifras incluidas en el Modelo 390 generado por Etendo son correctas, puede presentar el fichero XML en el siguiente enlace [_Presentación Modelo 390_](https://sede.agenciatributaria.gob.es/Sede/ayuda/consultas-informaticas/presentacion-declaraciones-ayuda-tecnica/modelo-390/modelo-390-presentacion-mediante-fichero.html){target="_blank"} para lo cual se requiere un certificado válido.


Se mostrarán los siguientes datos:

-   Total de cuotas de IVA y RE (IVA Devengado) 
-   Suma de deducciones (IVA Deducible) 
-   Resultado Régimen General (Resultado Anual) 
-   Resultado de la liquidación, como resultado de la suma de:
    -   resultados Régimen General y Simplificado 
    -   menos la compensación de cuotas ejercicio anterior 
-   Resultado de la liquidación anual atribuible a territorio común 
-   Total volumen de operaciones 

Es importante recordar que el resultado de la liquidación anual del 390 tiene que coincidir con los resultados de las liquidaciones periódicas del Modelo 303.

Los resultados de las liquidaciones periódicas del Modelo 303 se pueden introducir al lanzar el Modelo 390 desde Etendo, como "Parámetros de Entrada":

-   "Total resultados a ingresar en las autoliquidaciones de IVA del ejercicio"
-   o bien, "Total devoluciones mensuales de IVA"
-   o bien, "Resultado de la autoliquidación el último período a compensar".
==ARTICLE_END==
==ARTICLE_START==
# Article Title: SII para IVA
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Spanish Localization Bundle/SII para IVA
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/sii-para-iva
## Article Content: 
#### Javapackages 

:octicons-package-16: Javapackage: `org.openbravo.module.sii`

:octicons-package-16: Javapackage: `org.openbravo.module.sii.es_es`

:octicons-package-16: Javapackage: `org.openbravo.module.sii.template`

#### **Introducción**

Esta sección explica el contenido del nuevo módulo comercial de Etendo, "**Spain AEAT SII template**", compatible con Etendo 21Q4 y posteriores, bajo licencia comercial "**Etendo Commercial License**".

Este módulo forma parte del bundle (paquete) de Localización para España en su versión para Etendo.

#### **Descripción del Módulo**

El módulo  "Spain AEAT SII template" permite que las organizaciones puedan gestionar el Impuesto sobre el Valor Añadido y el Impuesto General Indirecto Canario de forma telemática, dentro del marco del proyecto "Suministro Inmediato de Información" (SII).

Este proyecto consiste en la gestión de los Libros registro de IVA a través de la Sede Electrónica de la Agencia Estatal de Administración Tributaria (AEAT), mediante el suministro casi inmediato de los registros de facturación. También se lleva la gestión de IGIC a través de la sede electrónica de la Agencia Tributaria Canaria.

El objetivo final de este trámite online del IVA es proporcionar a las empresas información contrastada sobre su liquidación del IVA, esto es un "borrador" de su declaración del IVA, siempre que los clientes/proveedores de dichas empresas se encuentren también acogidos al SII.

Existen dos posibilidades de envío o alta/modificación de los registros de facturas a SII:

1.  por **vía telemática mediante Servicios Web** basados en el intercambio de mensajes XML
2.  a través del Formulario de alta web, que la AEAT pone a disposición de los contribuyentes.  
    En este portal se pueden consultar, modificar o dar de baja facturas ya enviadas.

![](https://docs.etendo.software/latest/assets/drive/NcapLkTK0dSBkBKnjlIi4vrC9hJzMZL9ZBod26PJNUbKwihAng4l6CYr99qkDa4oF13Qu117ZzDoaMx3Fxlo1K9Xv65A3akDmFWkF0WYKZlNNU-SN0z9vcHkE8a_dZGxs05lrXEjgsv8EVRPzAQ.png)

Desde Etendo es posible enviar (dar de alta o modificar) los registros de facturas por vía telemática, opción 1 anterior, lo cual se traduce en la generación de un fichero XML con el siguiente contenido por cada envío a SII:

- una **cabecera común** con la información del titular de cada libro, así como la información del ejercicio y periodo en que se registran dichas operaciones
- un **bloque con el contenido de las facturas**.

En definitiva, desde Etendo vamos a poder:

- enviar fácilmente y de forma automática o manual, estos ficheros XML a la AEAT con la información requerida, tanto para el "alta" como para la "modificación" de los registros de facturas.
- recibir los XML de respuesta de la AEAT, respecto de cada tipo de comunicación (alta/modificación)
- consultar en qué estado se encuentra la información ya suministrada a la AEAT, dentro del proceso de contrastación.

Con carácter obligatorio, SII afecta a :

- Inscritos en REDEME (Registro de Devolución Mensual del IVA), salvo renuncia antes de junio de 2017
- Grandes empresas con una facturación superior a 6.101.121,04 €
- Grupos de IVA
- Empresarios o profesionales no establecidos que tengan condición de sujetos pasivos con un periodo de liquidación mensual
- Resto de sujetos pasivos establecidos o no, que voluntariamente quieran acogerse, a través del Modelo 036 de Declaración Censal, que implica autoliquidar el IVA mensualmente, y permanecer el año natural por el que se opte

El nuevo SII conlleva para el contribuyente, entre otras, las siguientes ventajas:

- Reducción de las obligaciones formales, suprimiendo la obligación de presentación de los modelos 347, 340 y 390. Es decir, sólo se tendrá que presentar el Modelo 303 de autoliquidación de IVA
- Obtención de “Datos Fiscales”, ya que en la Sede electrónica dispondrá de un Libro Registro “declarado” y “contrastado” con la información de contraste procedente de terceros que pertenezcan al colectivo de este sistema.  
  Estos datos fiscales serán una útil herramienta de asistencia en la elaboración de la declaración, reduciendo errores y permitiendo una simplificación y una mayor seguridad jurídica.
- Ampliación en diez días del plazo de presentación de las autoliquidaciones periódicas (Modelo 303).

A partir del 1 de julio de 2017 comienza la fase obligatoria de aplicación de este sistema.

Los sujetos pasivos que apliquen el SII desde el 1 de julio de 2017 están obligados a remitir los registros de facturación del primer semestre de 2017 en el periodo desde el 1 de julio al 31 de diciembre de 2017; excepto sujetos en REDEME.

Las facturas de fecha del 1er semestre de 2017 se envían (alta en SII) a través de ficheros XML con un contenido sin las validaciones aplicables a las facturas de fecha desde 1 de julio de 2017.

La AEAT pone a disposición del contribuyente las siguientes URLs que entendemos son de gran utilidad:

- Proyecto SII, en el que se puede encontrar toda la información sobre SII
- Herramienta de cálculo de plazos para la remisión de registros de facturas a SII, que permite calcular la "fecha fin de plazo", el "periodo", y el "ejercicio" para cada tipo de factura en función de su fecha de devengo/recepción y fecha de expedición/registro contable.

#### **Contenido del Módulo**

Al instalar este módulo, el usuario podrá comprobar que:

1.  Se crea un **nuevo menú** dentro de "Gestión Financiera", denominado "**AEAT SII**". Este nuevo menú contiene las siguientes pantallas:
    1.  **Configuración SII**, en la que se podrán configurar todos los parámetros necesarios para el envío correcto de los registros de facturas a SII.
    2.  **Consulta Facturas SII**, en esta pantalla el usuario tendrá información sobre el estado de cuadre de las facturas enviadas a SII, estado de cuadre recibido de la AEAT.
    3.  **Descripciones SII**, en esta pantalla se pueden dar de alta descripciones tipo para las operaciones de compra y venta que realice la organización acogida a SII.
    4.  **Conexiones a SII**, nos muestra el estado de todas las conexiones online con la AEAT referenciadas al Código CSV (Código Seguro de Verificación), proporcionado por la AEAT en cada conexión.  
        La AEAT responde con un CSV para cada factura enviada. Si se envía un fichero XML con varias facturas, en el XML de respuesta aparecerá un CSV para cada una de ellas.
    5.  **Monitor SII**, desde la que se puede gestionar el estado de las facturas, en relación con su envío a SII, así como realizar envíos de las mismas, según su estado.
2.  Se crean **nuevos campos y pestañas relativos a SII** en las ventanas de "**Pedidos y Facturas**", tanto de compra como de venta, con el fin de añadir la información requerida por parte de SII, respecto del "Alta"/"Modificación" del registro de las facturas.
3.  Se genera un nuevo campo en la cabecera de las facturas denominado "**Modificada por error registral**", que permite modificar una factura dada ya de alta en SII.
4.  Se crea un nuevo campo en la cabecera de las facturas de compra, ventana "Factura (Proveedor)", que permite recoger la "**fecha de registro contable**" al registrar las facturas recibidas.
5.  Igualmente, se añaden dos botones en las ventanas de Facturas, tanto de compra como de venta, con el fin de dar de alta (**Alta en SII**) y, si fuera necesario, modificar (**Modificación en SII**) el registro de las facturas.
6.  Se generan dos nuevos procesos en la ventana "Procesamiento de Peticiones", denominados "**Proceso de alta en SII**" y "**Proceso de Modificación en SII por error registral**", configurables para cada Organización o "Entidad Legal".  
    Estos nuevos procesos permitirán el alta/modificación masiva de facturas en SII con la cadencia de envío configurada.

#### **Configuración**

Para conseguir un correcto uso del módulo SII es muy importante revisar la configuración de "Terceros", "Productos" e "Impuestos".

Los productos/servicios tienen que tener correctamente configurado su "Grupo/Categoría de Impuestos" (de producto o servicio).

Los terceros (cliente/proveedores) tienen que tener correctamente configurada su "Categoría de impuestos de Tercero", si aplica, así como su "CIF/NIF" o "Clave NIF País Residencia".

Además, los impuestos tienen que estar configurados correctamente, tal y como se explica en el siguiente apartado.

##### **Configuración de impuestos**

El proyecto SII amplía el contenido de los libros registro de facturas, tal y como se describe a continuación:

- al enviar el registro de una factura emitida a SII, debemos indicar si esa factura está "Sujeta" a IVA, o, por el contrario, se trata de una operación no sujeta a IVA. Igualmente, las operaciones sujetas a IVA, se deben diferenciar entre "Exentas" y "No Exentas".
- al enviar el registro de una factura recibida a SII, debemos indicar si esa factura es de "Inversión de Sujeto Pasivo" o se trata de una "Adquisición Intracomunitaria de Bienes y/o Servicios", por ejemplo.

!!! info
    La utilización del módulo "Spain AEAT SII", requiere de la versión 1.2.204500 o posterior del módulo de impuestos para España, versión que ya incluye toda la configuración de impuestos requerida para el correcto funcionamiento de envío de registros de factura a SII (alta/modificación).

##### **Configuración de terceros**

Todos los terceros, ya sean del tipo "Cliente" o "Proveedor/Acreedor", deben configurarse en la ventana "Terceros".

Es muy importante indicar para cada tercero:

- sus datos de contacto (Nombre Comercial, Nombre Fiscal (Razón Social) o Nombre/Apellidos
- su "Clave NIF País" Residencia):
  - 1 - NIF
  - 2 - NOI
  - 3 - Pasaporte
  - 4 - Documento oficial de identificación expedido por el país
  - 5 - Certificado de residencia fiscal
  - 6 - Otro documento probatorio
  - 7 - No censado
- su número de Identificación fiscal, en el caso del NOI se debería incluir el código ISO de país (por ejemplo DE en el caso de Alemania o FR en el caso de Francia).
- la categoría de impuestos de tercero (por ejemplo: Servicios Profesionales Normal, Servicios Profesional Reducido, Autónomo, Recargo de Equivalencia, Revendedores, Régimen Agrario...)
- su localización (País, provincia, dirección).

**Tercero con NIF no censado**

Se ha creado una nueva "Clave NIF País de Residencia", de valor 7 - No Censado.

Un NIF no censado es un NIF que se ha dado de baja.

Esta nueva clave habrá que configurarla para aquellos terceros con un NIF español válido pero no censado, respecto de los que sea necesario emitir facturas de venta o recibir facturas de compra.

![](https://docs.etendo.software/latest/assets/drive/x32lggVwaGGuN2LEHAcmdiTxQkiGQmJy-C-c1aJE_PtbYs-wEPOGsmF60MeJ-dy-mCyeV5bMha-AGazmPGsm8zJNwXbnA03--9vbE9SM3kBh1NFa23UUVAm58gGNEmODILze76yjrlb8PoaCM2Q.png)

Las facturas con un NIF no censado que se den de alta en SII, quedarán en un estado "Aceptado con errores".

Es muy importante recalcar que la AEAT comprueba en los envíos a SII que el NIF español introducido se corresponda con el nombre/apellidos del tercero persona física (cliente/proveedor).

Si damos de alta un tercero (persona física) con su nombre y un solo apellido, por ejemplo, o con un apellido correcto y el otro no, al enviar la factura de dicho tercero a SII obtendremos un error del tipo: "NIF no identificado".

Puede comprobar los NIF de sus terceros en la siguiente URL de la AEAT: [Comprobación NIF terceros a efectos censales](https://sede.agenciatributaria.gob.es/Sede/ayuda/consultas-informaticas/presentacion-declaraciones-ayuda-tecnica/modelo-030/comprobacion-nif-terceros-efectos-censales.html){target="_blank"}.

Respecto de las personas jurídicas o empresas, parece no se está realizando dicha comprobación (correspondencia Empresa-NIF), pero aun así recomendamos que se revise que los terceros estén configurados correctamente.

**Gastos de empleado no declarables**.

Los empleados de la organización que incurran en gastos a reembolsar, deben darse de alta como Terceros de tipo Empleado en la ventana "Terceros". Se les debe asociar la categoría de impuestos de tercero “No declarable SII”, con el fin de que las facturas de gasto registradas para el reembolso de los gastos, no se incluyan en SII.

##### **Configuración del Local Arrendado**

Los locales arrendados sujetos a IVA se deben configurar en la ventana de "Producto", con al menos los siguientes datos:

- **Grupo de Impuestos** = IVA Normal
- **Local arrendado**, este campo se debe seleccionar
- **Situación del inmueble**, en este campo se debe seleccionar la opción que corresponda:
  - Locales en el extranjero
  - Referencia catastral válida en el País Vasco o en Navarra
  - Referencia catastral válida, excepto de País Vasco o Navarra
  - Sin referencia catastral
- **Referencia catastral**, en este se informa de la referencia catastral del local arrendado.

Dependiendo de si el Tercero se configura con la categoría de impuestos de Tercero "Arrendamiento con retención" o "Arrendamientos sin retención", el arrendamiento del local de negocio estará o no sujeto a retención.

##### **Configuración Transmisión de Bienes Inmuebles**

Los bienes inmuebles se configuran en la ventana "Producto", asociándolos la categoría de impuestos "IVA Normal B. Inmuebles", por ejemplo.

##### **Configuración SII**

En la ventana "Configuración SII" se configuran todos los parámetros necesarios para un correcto envío de registros de facturas a SII (alta/modificación).

![](https://docs.etendo.software/latest/assets/drive/PUUxVQZw1yZL9b2ewXHB-XVmzsLyPo5faDW1aeCsJFwhbChyd9ruI4NLYICeHXrV48LcMdddkTCLen33qEYscOjGen7klkPxS8qHfCLTiL9IlOByRZvbjg9lRVFUsnmjV3Tu-DwuITRpXYEC6lo.png)

Tal y como se muestra en la imagen anterior, los parámetros de configuración de SII son los siguientes:

- **Organización**: organización (entidad legal) para la que se configura el envío de registros a SII.  
  Seleccionada una entidad legal (con o sin contabilidad), todas sus organizaciones "hijas" quedarán igualmente acogidas a SII.
- **Fecha acogida a SII**: check que permite configurar que la organización seleccionada se acoja al SII, esto es, que los registros de sus facturas se envíen (alta/modificación) a la AEAT a través de ficheros XML.  
  Una vez seleccionado, se muestra el resto de parámetros de configuración de SII.  
  El usuario lo puede desmarcar con posterioridad, en el caso en que la organización ya no esté acogida a SII.  
  Si se desmarca este check, todos los demás campos aparecerán como no editables y la organización ya no estará acogida a SII, es decir, ya no será necesario ni se podrá enviar el registro de sus facturas a SII (alta/modificación).
- **Fecha acogida a SII**: campo de fecha en el que se puede indicar la fecha en la que la organización se acoge a SII. En general, esta fecha es el 01-07-2017.
- **Ruta de ubicación del certificado electrónico** : el usuario debe especificar la ruta en la que se encuentra el certificado de la AEAT válido para dicha organización.
- **Contraseña certificada**: una vez informado el campo anterior, el usuario debe indicar la contraseña de dicho certificado. El contenido se guardará como texto cifrado.
- **Plazo límite de alta en SII**: campo "informativo" que por defecto mostrará 8 días como plazo límite de alta en SII, ya que para 2017 y para este tipo de comunicación Alta (A0) ese es el plazo límite.  
  El usuario tendrá que modificarlo a 4 días o al número de días que indique la AEAT para el alta de registros de factura a realizar a partir del 1 de enero de 2018.
- **Cadencia Proceso Alta Facturas Venta a SII**: en este campo, el usuario puede configurar el número de días naturales de margen que necesita para revisar/modificar las facturas de venta, antes de que estas se envíe de forma automática por el Proceso de "alta"en SII, proceso que se recomienda programar para que sea ejecutado diariamente. Además, se recomienda que el número de días introducido en este campo no supere el **plazo límite de alta en SII**, que en el caso de las facturas de venta es de 8 días (sin contar sábados, domingos y festivos nacionales) desde la fecha de "expedición" de la factura (fecha factura).  
  En todo caso, las facturas expedidas se tienen que dar de alta en SII antes del día 16 del mes siguiente al que se produjo el devengo de la operación.  
  En concreto:
  - Una factura con fecha de operación 10-07-2017 (devengo) y fecha de expedición 14-07-2017 (fecha factura), tendría que darse de "alta" en SII antes del día 25-07-2017.  
    Si introducimos una cadencia de 8 días, tendremos 8 días de margen para su revisión/modificación, ya que dicha factura se enviará a SII de forma automática el día 22-07-2017.  
    Es decir, el proceso automático de "alta" que se ejecute el día 22 de julio, enviará todas las facturas de venta con fecha factura 14 de julio (22 de julio - 8 días).
  - Una factura con fecha de operación 10-06-2017 (devengo) y fecha de expedición 14-07-2017 (fecha factura), tendrá que darse de "alta" en SII antes del día 16-07-2017.  
    Es decir, el proceso automático de "alta" que se ejecute el día 14 de julio, ya enviará dicha factura, sin tener en cuenta el número de días introducido en el campo de cadencia.
- **Cadencia Proceso Alta Facturas Compra a SII**: en este campo el usuario puede configurar el número de días de margen que necesita para revisar/modificar las facturas de compra, antes de que éstas se envíen de forma automática por el Proceso de "alta"en SII, proceso que se recomienda programar para que sea ejecutado "diariamente". Además, se recomienda que el número de días introducido en este campo, no supere el **plazo límite de alta en SII**, que en el caso de las facturas de compra es de 8 días (sin contar sábados, domingos y festivos nacionales) desde la fecha "contable" de la factura.  
  En todo caso, las facturas de compra se tienen que dar de alta en SII antes del día 16 del mes siguiente al que se liquidó la operación a efectos de IVA.  
  En concreto:
  - Una factura con fecha de operación 10-07-2017 y fecha factura/fecha contable 14-07-2017, tendría que darse de "alta" en SII antes del día 25-07-2017.  
    Si introducimos una cadencia de 8 días, tendremos 8 días de margen para su revisión/modificación, ya que dicha factura se enviará a SII de forma automática el día 22-07-2017.  
    Es decir, el proceso automático de "alta" que se ejecute el día 22 de julio, enviará todas las facturas de compra con fecha contable 14 de julio (22 de julio - 8 días).
  - Una factura con fecha de operación 10-06-2017, que se quiera liquidar en la declaración de junio y con fecha contable 14-07-2017, tendrá que darse de "alta" en SII antes del día 16-07-2017.  
    Es decir, el proceso automático de "alta" que se ejecute el día 14 de julio, ya enviará dicha factura, sin tener en cuenta el número de días introducido en el campo de cadencia.
- **Entorno de producción SII**: este entorno tiene que estar seleccionado para aquellos entornos productivos de organizaciones cuyos registros de factura se tienen que enviar al entorno productivo (final) de SII de la AEAT.  
  Por defecto se muestra como seleccionado, en cuyo caso las facturas se enviarán al entorno de producción de la AEAT.  
  Si el usuario quiere realizar pruebas de envío, siempre desde un entorno en test o entidad/organización de pruebas, deberá desmarcarlo.
- **Adjuntar archivos XML**: este campo permite indicar si los ficheros XML enviados a la AEAT y los recibidos como respuesta por parte de la AEAT se deben guardar como ficheros adjuntos en la factura correspondiente.
- **Enviar desde 1 de enero 2017** - este campo permite que el proceso automático de alta en SII considere o no las facturas de fecha desde 01-01-2017 hasta 30-06-2017.  
  Este proceso considera en todo caso las facturas de fecha desde la fecha acogida a SII configurada (01-07-2017).
  - Si está seleccionado, las facturas de fecha desde 01-01-2017 hasta el 30-06-2017, serán también incluidas en el proceso automático de Alta en SII.
  - Si no está seleccionado, las facturas de fecha desde 01-01-2017 hasta el 30-06-2017, no serán incluidas en el proceso de alta automático y, por tanto, habrá que enviarlas de forma manual o a través de Monitor SII, o no enviarlas como es el caso para los sujetos acogidos a REDEME.
- **Afectada RECC**, este parámetro permite configurar el que para una Organización no acogida al "Régimen Especial del Criterio de Caja" (RECC), pero si afectada por recibir facturas de proveedores acogidos, se muestre o no la pestaña de "Cobros/ Pagos Criterio Caja" dentro de la pantalla "Monitor SII".  
  Si la organización, llegado un punto, no se viera ya afectada por dicho régimen, podría desactivar este campo, y la pestaña "Cobros/ Pagos Criterio Caja" se dejaría de mostrar en el monitor SII.
- **Sujeto inscrito en REDEME**, si se selecciona este campo, se está indicando que la organización es un sujeto pasivo inscrito en REDEME que, por tanto, no tiene obligación de enviar las facturas del primer semestre de 2017 a SII.  
  Con este campo se controla que las facturas del primer semestre de este tipo de sujetos pasivo no se puedan dar de alta en SII de forma manual, esto es, desde la venta de factura.
- **Fecha desde visualización "Monitor SII"**, en este campo podemos introducir la fecha desde la cual se visualizarán las facturas de compra/venta y los cobros/pagos en RECC en la ventana "Monitor SII" para su alta en SII. Por ejemplo:
  - si una organización se acoge al SII el 01-07-2017 y no está inscrita en REDEME, la fecha a introducir en este campo será el 01-01-2017
  - si una organización se acoge al SII el 01-07-2017 y está inscrita en REDEME, la fecha a introducir en este campo será el 01-07-2017.

##### **Descripciones SII**

En esta ventana es posible introducir descripciones tipo para las operaciones de compra/venta que la Organización acogida a SII realiza.

Las descripciones introducidas en esta pantalla:

- sólo se podrán seleccionar en las facturas de compra, si la descripción está configurada como "**Descripción factura de compra**"
- sólo se podrán seleccionar en las facturas de venta, si la descripción está configurada como "**Descripción factura de venta**"
- se podrán seleccionar tanto en las facturas de compra como de venta, si los dos checks "**Descripción factura de compra**" y "**Descripción factura de venta**", están seleccionados.
- será el que por defecto se seleccione tanto en facturas de compra como de venta, si además se selecciona el check "**Por defecto**".

![](https://docs.etendo.software/latest/assets/drive/x5SNFYObWJ09RINUVFsSyaz2GXjEz9dgzB8uii8Aop2bTJzFPhKiRl1DQn0U_ftwny6e4YRNo-48sriTWNDSvvOX-J0Riu4Vih2WmesHgfYJR10cNFG54mM1I6fXN2UpnoclPpOSgD7GKqH5tVw.png)

Además, en las ventanas de

- Pedido de Venta
- Pedido de Compra
- Factura de Venta
- Factura de Compra

existe otro campo de texto libre que se denomina "**Descripción SII**" que siempre se puede utilizar.

Si en una factura seleccionamos una descripción en el campo "Descripción maestro SII", el campo "Descripción SII" heredará esa descripción para que para esa operación en concreto podamos modificar/completar dicha descripción.

Si una factura tiene ambas descripciones "Descripción SII" y "Descripción maestro SII", siempre prevalece la primera, es decir, será la "Descripción SII" la que se incluya en el fichero XML de "alta" / "modificación" en SII.

Si en un pedido se informa de la "Descripción SII" y la correspondiente factura se crea desde dicho pedido, la descripción introducida en el campo "Descripción SII" del pedido, se rellenará de forma automática en el campo "Descripción SII" de la factura.

Si se copiara desde más de un pedido, solo se trasladaría la primera descripción.

##### **Configuración de la Organización en RECC**

Si una organización se acoge al régimen del IVA de Caja, deberán seleccionarse el campo "IVA de Caja" y el campo "Criterio de caja doble" en la ventana "Organización", pestaña "Información".

En este caso, tanto las facturas de compra como de venta nacionales estarán sujetas al RECC y tendrán que darse de alta como tales en SII.

!!! info
    La clave de "RÉGIMEN ESPECIAL / IDENTIFICACIÓN OPERACIONES CON TRASCENDENCIA TRIBUTARIA" del RECC es la "07". Esta clave prevalece sobre las demás.

Esto significa que las operaciones de arrendamiento con RECC no se informarán con la clave propia de los arrendamientos sino con la de RECC que es la 07.

##### **Configuración de proveedores en RECC**

Si una organización no se acoge al régimen del IVA de Caja, pero recibe facturas de proveedores acogidos al RECC, tendrá que configurar dichos proveedores como Acogidos al RECC en la ventana "Terceros", pestaña "Proveedor/Acreedor", campo "IVA de Caja.

##### **Configuración de los métodos de pago**

Los cobros/pagos de facturas en RECC (IVA de Caja), tienen que darse de alta en SII.

Al dar de alta este tipo de cobros/pagos tenemos que informar del **importe**, la **fecha** de cobro/pago y el **medio** de cobro/pago utilizado, conforme a una definición propia de la AEAT:

- Transferencia "01"
- Cheque "02"
- Otros "04"

Es por ello que en la ventana "**Método de Pago**" tendremos que configurar el tipo de método de pago, tal y como se explica a continuación:

- los métodos de pago que configuremos con el tipo "Bank Account", serán del tipo 01 = Transferencia
- los métodos de Pago que configuremos con el tipo "Check", serán del tipo 02 = Cheque
- y los métodos de Pago que configuremos con el tipo "Others", serán del tipo 04 = Otros.

![](https://docs.etendo.software/latest/assets/drive/6RIBz5XNdlOJZfAYW9noDPVGUdVjzgJ-odzlxR_I1kl4zuYXuKJeVqJ-oFz2l39Lk3LFBcIOpFh-JT6v4sa4TseyUaT6AXWHwV7_uD-XTTRasQSsjYBhZUzzVR12IJXodchVfGWSmlPZRVFQ8Zs.png)

##### **Causas de exención**

Tratándose de una operación de venta exenta, la AEAT permite consignar la causa de exención dentro del bloque “Desglose Factura” como “Sujeta” y “Exenta”, utilizando una de las siguientes claves:

“E1: exenta por el artículo 20”

“E2: exenta por el artículo 21”

“E3: exenta por el artículo 22”

“E4: exenta por los artículos 23 y 24”

“E5: exenta por el artículo 25”

“E6: exenta por otros”

En Etendo existen dos opciones para indicar la causa de exención junto con la base imponible:

- En la **ventana Factura (Cliente)**, dentro del grupo de campos AEAT SII, se cumplimentará la causa de exención relacionada con las bases exentas de la factura. El usuario tendrá que asignar un valor del desplegable de forma manual que trasladará al XML la clave que hace referencia a la base imponible exenta en factura.
- En la **ventana "Causa de exención"** existe la opción de establecer una clave por defecto que se asignará en factura cuando se incorporen líneas que utilicen un impuesto configurado como exento. Es decir, cuando en una factura de venta se introduzca una línea exenta, automáticamente en la cabecera se seleccionará la causa asignada por defecto, siendo modificable si el usuario quisiera elegir otra.

![](https://docs.etendo.software/latest/assets/drive/68wFWHAUwNPb9pxqJ74XV0_7GWE9NTOwLRq_zcsu_25D9eEKbCC0yAZGot3P-LRyMP3m9ofSVHjHV_ayL7VWhPK_FCONObalaYedgxtIYblbAHMwbOQxRJxU94A9dUIyPYu3cvxn397kT5FKRK0.png)

##### **Configuración alta de factura de compra sólo tras su contabilización**

Para organizaciones que desean dar de alta una factura de compra sólo tras su contabilización, existe la opción de controlarlo mediante la activación del check "Alta en SII facturas de compra tras su contabilización" ubicado en la ventana Configuración SII, de manera que la fecha registro contable únicamente se rellenará en el momento que la factura sea contabilizada con el día en el que se produzca el asiento contable independientemente de la fecha imputada en el libro diario, completando así la información necesaria para dar de alta la factura en SII.

![](https://docs.etendo.software/latest/assets/drive/wDYzHV8OVfCzUR5nY9mJRuHgfVRARdfad7C_5joSfI3YHj-oIZ5jlqbHpoEAnmFdR2foIajkDQ4kWPpS7263-7CMJnIGChmJVinY3s7Pan3paaZYYICZgySArMwH4Aa1QKNgveg43dODi9zPD5I.png)

!!! info
    Si se decide optar por esta funcionalidad, es conveniente que la organización no tenga activo el proceso de contabilización automático, ya que imputará la fecha registro contable en el momento de realizar la contabilización.

##### Configuración de rangos de impuestos - Prorrata SII

Los rangos de impuestos para la prorrata se tendrán que crear siempre de manera manual
(tanto el rango “padre” como los rangos “hijos” necesarios). Esto es debido a que el
porcentaje de deducción varía año a año al no ser un porcentaje fijo.

En la ventana “Rango impuesto” se ha creado un nuevo check denominado “Is prorate”:

![screenhunter_01_sep._01_11.08.gif](https://docs.etendo.software/latest/assets/legacy/enduserdocumentation/screenhunter_01_sep._01_11.08.gif)

Al tener activo este check, se mostrará un segundo check nuevo, dentro de la cabecera en
el detalle de “More Information” que se llamará “Prorrata SII - XML” que estará marcado por
defecto como “Si”:
![screenhunter_02_sep._01_11.09.gif](https://docs.etendo.software/latest/assets/legacy/enduserdocumentation/screenhunter_02_sep._01_11.09.gif)

Estos check permitirán, con la configuración correcta que realicemos, enviar al SII
información sobre facturas de compra afectadas por la prorrata del IVA.

A continuación, utilizaremos como ejemplo el iva del 10%, para mostrar la configuración que
debe realizarse para que la información se envíe de forma correcta al SII:

![unnamed.gif](https://docs.etendo.software/latest/assets/legacy/enduserdocumentation/unnamed.gif)

1 – Crear un rango padre “Prorrata Gener.22 (77%) IVA 10%”:
Lo haremos con la misma configuración que puede tener cualquier rango nacional de la
misma categoría, por ejemplo “Prestación servicios nacional 10%“. Las únicas
particularidades que debemos tener en cuenta serán las de indicar en el campo “Indice” el
valor total del impuesto (en los rangos “padres” estándar es un campo en el que se indica 0)
y activar el check “Is Prorate”. En nuestro ejemplo indicaremos en el campo “Indice” el valor
10 y posteriormente marcaremos el check de “Nivel de agrupación”.

![screenhunter_04_sep._01_11.16.gif](https://docs.etendo.software/latest/assets/legacy/enduserdocumentation/screenhunter_04_sep._01_11.16.gif)

![screenhunter_05_sep._01_11.16.gif](https://docs.etendo.software/latest/assets/legacy/enduserdocumentation/screenhunter_05_sep._01_11.16.gif)

2 – Crear un rango hijo deducible “Prorrata Gener.22 (77%) IVA 10% (+77%)”:
Al igual que en el punto anterior, crearemos un rango “hijo” con la misma configuración que
puede tener cualquier rango nacional de la misma categoría, por ejemplo “Prestación
servicios nacional 10%“ e indicaremos cual es el rango “padre” (el creado en el punto 1).
Las únicas particularidades que debemos tener en cuenta serán las de indicar en el campo
“Indice” el valor del porcentaje de impuesto deducible (según nuestro ejemplo indicaremos
7,7) y activar el check “Is Prorate”:

![screenhunter_06_sep._01_11.17.gif](https://docs.etendo.software/latest/assets/legacy/enduserdocumentation/screenhunter_06_sep._01_11.17.gif)

3 – Crear un rango hijo no deducible “Prorrata Gener.22 (77%) IVA 10% (-23%)”:
Crearemos el segundo rango “hijo” de la misma manera que el anterior. Además de indicar
en el campo “Indice” el valor del porcentaje de impuesto no deducible (según nuestro

ejemplo indicaremos 2,3) y activar el check “Is Prorate”, tendremos que marcar el check de
“Impuesto no deducible” que se encuentra dentro del detalle “More Information”:
![screenhunter_07_sep._01_11.18.gif](https://docs.etendo.software/latest/assets/legacy/enduserdocumentation/screenhunter_07_sep._01_11.18.gif)
![screenhunter_08_sep._01_11.19.gif](https://docs.etendo.software/latest/assets/legacy/enduserdocumentation/screenhunter_08_sep._01_11.19.gif)

#### **Envío de registros de facturas a SII**

Una vez configurados todos los parámetros de envío a SII, ya es posible dar de alta/modificar los registros de facturas emitidas/recibidas en SII.

Desde Etendo podremos enviar estos registros (alta/modificación) de forma manual o automática conforme a los requerimientos de la AEAT, según se explica a continuación.

##### **Envío Manual**

**Alta en SII**

####### **Facturas de Venta**

Desde la ventana "Factura (Cliente)" se crea una nueva factura de venta, tal y como se crean las facturas de venta en Etendo.

Dentro del grupo de campos "AEAT SII" debemos indicar, tal y como se muestra en la siguiente imagen:

![](https://docs.etendo.software/latest/assets/drive/9JpfQqGKF7-_z1OT14yslxXsujho_F52LKKra1oEchhjCvNqSuKeeAFl-I_8R9ZLicY5kC7xFZWE0pKjKoL37cWY460b3-oxGq8rCAF0jeNDnY9zW-1kx3JeANgejmqgjvbjC3dOTHStPYt8ag8.png)

- la "**Fecha Operación**" que por defecto se informa con la misma fecha que la "Fecha de la factura", si bien el usuario la puede modificar.
- la **Clave Tipo Factura**, que por defecto se informará con el valor "**Factura**", clave tipo factura "F1".  
   Otros valores posibles son: - "**Factura simplificada**", clave tipo de factura "F2", respecto de las facturas simplificadas creadas desde cada ticket/pedido registrado. - "**Factura rectificativa**", clave tipo de factura "R1 a R5", según el "Motivo de la rectificación" seleccionada. - "**Asiento resumen facturas simplificadas**", clave tipo de factura "F4", respecto de facturas simplificadas que agrupan tickets/pedidos registrados.


!!! info
    No es posible informar este campo de forma automática como "Factura Rectificativa" al crear facturas del tipo "Reverse Sales Invoice", debido a que es posible la creación de Facturas Rectificativas por "Sustitución" como "AR Invoice" (no Reverse).
 

Se validará que al crear una factura de tipo "Factura Rectificativa" "Por Diferencias", el documento de la transacción sea del tipo "Reverse".

- La **Descripción maestro SII** de la operación, ya que en los ficheros XML no incluiremos información sobre las líneas de factura. En este caso seleccionamos una descripción del maestro.
- O bien introducimos directamente una descripción de la operación en el campo de texto libre "**Descripción SII**".  
  Si seleccionamos una descripción del maestro, ésta se muestra en el campo "Descripción SII" por defecto para que se pueda modificar/completar para esa operación/factura.
  - Si la factura se crea desde un pedido y ese pedido incluía una "Descripción SII", dicha descripción se incorporará de forma automática en la factura, siempre que el campo "Descripción SII" de la factura esté vacío.
  - Si la factura se crea desde varios pedidos, y en todos ellos hay una "Descripción SII", sólo se incorporará en la factura la del primer pedido seleccionado.

Es importante recalcar que en el caso de las facturas de venta, debemos considerar dos fechas para el envío (alta) en SII:

- **la fecha factura**, ya que ésta es la fecha a partir de la cual se debe contar el plazo de alta en SII, que en 2017 es de 8 días (sin incluir sábados, domingos ni festivos nacionales).
- la **fecha de la operación**, ya que ésta es la fecha a considerar como fecha de devengo del impuesto correspondiente a la operación que se registra.

Las facturas expedidas deben de enviarse a SII (alta en SII) en el plazo de 8 días (4 días a partir del 01-01-2018) desde la fecha de expedición de la factura y, en todo caso, antes del día 16 del mes siguiente a aquel en el que se hubiera producido el devengo del impuesto correspondiente a la operación que se registra.

Por ejemplo, un empresario A presta un servicio a otro empresario el 2 de agosto de 2017 (fecha de operación), expidiendo la correspondiente factura el 13 de septiembre de 2017 (fecha de factura). El plazo para expedir la factura y remitir el registro de esta factura a través del SII finaliza el 15 de septiembre.

En este ejemplo, el periodo será agosto (fecha de operación) y el ejercicio 2017.

Una vez introducida esta información, podemos completar y contabilizar la factura, o sólo completarla.

En este momento el botón "**Alta en SII**" se muestra habilitado.

![](https://docs.etendo.software/latest/assets/drive/7cFVkpUUzmAnQ82GFakllefI21kNGCJOtphTnAVpQM-249bn8AgShm_73EiSU6YnkQ2Th2bfw7xfX36ohWf7LMrZP_CbAAjUv8E3Sns6qsP5BZXOzjP-wQ9TsS_Fu_ncK0Gfg1pFoOW_Pdu4yUU.png)

Al hacer click en ese botón, iniciamos el proceso de alta del registro de esa factura en SII (Tipo de comunicación A0).

Etendo nos muestra un mensaje indicando que:

"_Esta acción no reversible (salvo error en la comunicación o error registral) genera el "alta" de la factura en la sede electrónica de la AEAT. Una vez dada de alta sólo será posible "Contabilizar" y "Descontabilizar" la factura, sin permitirse más cambios que las cuentas contables a tener en cuenta en la contabilización, y la fecha contable sólo en el caso de las facturas emitidas. Una vez dada de "alta" en SII de forma correcta, será posible "modificar" la factura en caso de error registral si se habilita el campo de la factura "modificada por error registral". En ese caso ya sólo será posible el envío a SII del registro de "modificación" de la factura"_.

Es decir, siempre es posible contabilizar/descontabilizar la factura después de darla de alta en SII, pero sólo será posible reactivarla en los siguientes casos:

- **Error en la comunicación** - el alta en SII ha resultado "Incorrecta" debido a algún error aceptado o debido a error de conexión. En ese caso será posible reactivar la factura para subsanar dicho error y volver a dar de "alta en SII".
- **Error registral** - el estado del alta en SII de la factura es "Correcto", sin embargo se produjo un error registral que se debe subsanar. En ese caso será posible reactivar la factura, seleccionando el campo "Modificada error registral", realizar los cambios oportunos y enviar la "modificación" del registro de la factura. Ver sección: Modificación en SII.

En la pestaña "Datos SII" de la factura, tendremos acceso a los siguientes datos:

- "**Tipo de Comunicación**", con el valor "Alta".
- número de "**Conexión SII**" que también quedará reflejada en la ventana "Conexiones SII".
- el "**Código CSV**" o código seguro de verificación que la AEAT nos ha indicado relacionado con el alta de esta factura en SII.  
  La AEAT responde con un CSV para cada factura enviada. Si se envía un fichero XML con varias facturas, en el XML de respuesta aparecerá un CSV para cada una de ellas.
- el "**Estado registro SII**", que en este punto puede ser:
  - "**Correcto**" - la factura se ha registrado de forma satisfactoria en la sede electrónica de la AEAT.
  - "**Incorrecto**" - la factura se ha rechazado totalmente y, por tanto, no está registrada. En este caso, la AEAT nos informará de los datos erróneos. Debemos subsanarlos y volver a enviar la factura.
  - "**Aceptado con errores**" - la factura se ha registrado pero contiene errores que debemos subsanar y volver a enviar. Igualmente, la AEAT nos indicará los errores que se deben subsanar.
  - "**Error al enviar**" - la factura no está registrada, ya que se ha producido un error en la conexión online con la AEAT. Debemos volver a enviar la factura.
  - "**Anulado**" - se trata de un estado que podemos obtener en las respuestas recibidas al hacer una "Consulta a SII". Se ha añadido este estado para poder "gestionarlo" igualmente.
  - "**No Declarable en SII**" - la factura no está registrada, ya que todas sus líneas están asociadas a un impuesto configurado como "No Declarable en SII"

**Para la AEAT los errores "Admisibles"** son aquellos que serán admitidos por la AEAT.

Se corresponden con errores derivados de las validaciones de negocio de facturas o registros.

Estos errores deberán ser corregidos a través de una nueva petición correcta de modificación sobre aquellas facturas o registros aceptados con errores.

**Para la AEAT los errores "No Admisibles"** son aquellos errores que en ningún caso podrán ser admitidos por la Agencia en la presentación de facturas o registros de cada libro de registro.

Se corresponden con los errores provocados al no superar las validaciones estructurales y sintácticas del envío y con errores ya tipificados por la AEAT.

Estos errores deberán ser corregidos a través de una nueva petición correcta de envío de las facturas o registros incorrectos.

- **Motivo error SII**, comunicado por la AEAT

Esta pestaña también incluye información sobre el "cuadre" de la factura, enviado por la AEAT tras realizar la correspondiente "Consulta". Los campos de cuadre son:

- **Estado cuadre SII**
- y **Fecha de cuadre**

Y, en el grupo de campos "**Archivos Adjuntos**", podremos encontrar los ficheros XML de alta y respuesta de la AEAT, si hemos configurado la organización para que se guarden estos ficheros.

Finalmente, en la cabecera de la factura de venta enviada a SII de forma manual o automática, tendremos información del "**Ejercicio**" y del "**Periodo**" que se incluyeron en el alta en SII de dicha factura.

![](https://docs.etendo.software/latest/assets/drive/g2N7zkHFiQI0VRRrWd1wUiRbD_YMkUTZbPjj55rc-J27t0yuKU8a53rk49H79ww5LD3qEXTg6YF5TReKkRhcxZYX4ZN2e7_G_LsptRjA5Wm5jDmezbpqjEJXtxGIFho5QDNvJEKSpLX4FNfcO5Q.png)

####### **Facturas Rectificativas de Venta**

Es posible rectificar una factura de venta dada de alta en SII de forma correcta, si se produce una devolución de mercancía, descuentos posteriores a la venta (Rappels de venta) o situaciones de deuda incobrable o concurso.

La rectificación de facturas de venta se deben gestionar y dar de alta en SII bien sea "Por Diferencias" o "Por Sustitución", tal y como se explica a continuación:

**Por Diferencias**, en este caso se registra una factura de tipo "Reverse" por el importe negativo correspondiente.

Sería el caso en el que se realizó una venta por valor de 1527.77 € que se dio de alta en SII de forma correcta y, con posterioridad, se devuelve mercancía por parte del cliente por un valor de -27.77 € (15 unidades de producto).

En este caso, al registrar la factura rectificativa por diferencias, dentro del grupo de campos "AEAT SII" deberemos indicar la siguiente información:

- **Clave tipo factura** = Factura Rectificativa
- **Tipo Rectificativa** = Por Diferencias
- **Motivo de la rectificación** = R1...R4, a seleccionar por el usuario según el motivo de la rectificación.

Este tipo de facturas rectificativas se deben crear con documentos del tipo "Reverse" (por ejemplo: "Reverse Sales Invoice"), e importes negativos, tal y como se muestra en la pantalla. Etendo mostrará un error en caso contrario.

![](https://docs.etendo.software/latest/assets/drive/vTuKPdCz4_8FyY4_zSO6LA157zXc_9Nr_D8zgcKv0O4rP5aKXnKOTp6T4ga6SwbHN29oEgD3MZBP_lEyZ4uTmZY43pXsiFapBmKqvowAp_z9xCeRLmituMo4UW7FG0zv2wbDhZuUvIiRR2diRP0.png)

Al dar de Alta esa factura en SII, el fichero XML registrará de forma automática la siguiente información:

- Tipo Factura = R1
- Tipo Rectificativa = I
- Importe total = -27.77

![](https://docs.etendo.software/latest/assets/drive/SeBxMk8qhA3rmNFmPr8rDLDp0Te2HvbQ6RS9HV_BlXMUelz5MFQEFTIvC_pg7HDHeh4joNbWJekXn4gGPcPBVhqE4JWeIrEuGE-vXyWDbF0EYfTQVeXUS_9SIqTt-hIk5IGmO4BKrjnfCwV7cVs.png)

**Por Sustitución**, en este caso se produce una anulación de la factura original (ya dada de alta en SII) y la creación de una nueva factura con los importes correctos.

La anulación de la factura original se puede realizar a través de la opción "**Reactivar-Anular**" de Etendo. Esta acción creará una factura del tipo "Reverse" con los siguientes datos:

- **Tipo de documento** = Reverse Sales Invoice
- **Fecha de operación** = fecha de operación de la factura original
- **Clave tipo factura** = Factura

Al dar de Alta esa factura de anulación en SII, el fichero XML registrará de forma automática la siguiente información:

- Tipo Factura = F1
- Importe total = -185.13

Posteriormente, se crea la nueva factura con los importes correctos y con los siguientes datos:

- **Tipo de documento** = AR Invoice (no reverse)
- **Clave tipo factura** = Factura Rectificativa
- **Tipo Rectificativa** = Por Sustitución
- **Motivo de la rectificación** = R1...R4, a seleccionar por el usuario según el motivo de la rectificación.
- **Fecha de operación** = fecha de operación de la factura original

![](https://docs.etendo.software/latest/assets/drive/rdC0SMKqwDEIs85X9vxqT-gH-nz2YhzthhfKlLB_r9C21y2DwmdHFH5IAjvQSuPjMhDh68W3XBvEA1suciw55sUz01nQtcCjXQLCPLy4GM79hmE-0TnTPJWtlT9wqsIQiSjLi7NSbJQYNjLoePI.png)

Al dar de Alta esta factura rectificativa por sustitución en SII, el fichero XML registrará de forma automática la siguiente información:

- Tipo Factura = R1
- Tipo Rectificativa = S
- Importe total = 92.57

![](https://docs.etendo.software/latest/assets/drive/lnYFE3_FU4bzz-1q2uHRiBxo8WEjg6PJjEZxg7iqFzPwM5kUFVzoXW7eGuF7vCCciW59Ls5jRsSI6vksPNZ6nvMYFB2yBLMgqjW6oausvB8IvBPlj3mVYTv9qAbRfhLQaTat-jaFOxSIpzrRrPw.png)

Tanto en facturas rectificativas de venta por diferencias como por sustitución, el usuario deberá asignar la fecha de operación correspondiente a la factura original (devengo de la operación). Sin embargo, **en facturas rectificativas el periodo de alta en SII será el correspondiente a la fecha factura**, incorporándose a la declaración de IVA en dicho mes.

####### **Facturas de Compra**

El proceso de registro y alta en SII de este tipo de facturas es muy similar al de las facturas de venta.

La información del alta del registro de la factura de compra en SII se recogerá de la ventana "Factura(Proveedor)", una vez que la factura de compra correspondiente esté en estado "Completado".

Dentro del grupo de campos "AEAT SII" debemos indicar, tal y como se muestra en la siguiente imagen:

![](https://docs.etendo.software/latest/assets/drive/cqDeUP_hKuC8VbLZevAo4OeHT3UwNZ3jdR2d30gp4MCdn2Gt3BmAwtXG_808xBrfS_VOHrta0oBdhRVjlUlB959b2ZuhfP4oPjpw1tL_d1VyK6m-0V7YwTkcq7Y_UvYuDQCGARgGz0hkuCdYgA0.png)

- la "**Fecha Operación**", que por defecto se informa con la misma fecha que la "Fecha de la factura", fecha actual o de creación de la factura en Etendo, si bien el usuario la puede modificar.
- la "**Fecha registro contable**", que por defecto y para las facturas que se crean de forma manual se informa con la fecha actual, o fecha de creación de la factura en Etendo y, por tanto, registro de la factura recibida en Etendo.  
  Esta fecha de registro contable no tiene por qué coincidir con la fecha contable de la factura de compra.
- la **Clave Tipo Factura**, que se debe puede informar con los siguientes valores:
  - "**Factura**", que se corresponde con una clave de tipo de Factura "F1"
  - "**Importación (DUA)**", que se corresponde con una clave de tipo de Factura "F5"
  - "**Liquidación Complementaria Aduana IVA a la importación**", que se corresponde con una clave de tipo de Factura "LC"
  - "**Justificante contable**", que se corresponde con una clave de tipo de Factura "F6"

En el caso de las facturas de compra no es necesario indicar si se trata o no de una factura rectificativa.

- La **Descripción maestro SII** de la operación, ya que en los ficheros XML no incluiremos información sobre las líneas de factura. En este caso, seleccionamos una descripción del maestro.
- O bien introducimos directamente una descripción de la operación en el campo de texto libre "**Descripción SII**".  
  Si seleccionamos una descripción del maestro, ésta se muestra en el campo "Descripción SII" por defecto para que se pueda modificar/completar para esa operación/factura.
  - Si la factura se crea desde un pedido y ese pedido incluía una "Descripción SII", dicha descripción se incorporará de forma automática en la factura, siempre que el campo "Descripción SII" de la factura esté vacío.
  - Si la factura se crea desde varios pedidos, y en todos ellos hay una "Descripción SII", sólo se incorporará en la factura la del primer pedido seleccionado.

Y además, debemos reflejar el número de factura del proveedor en el campo **"Referencia del Proveedor"**.

Las facturas recibidas deben enviarse a SII (alta en SII) en el plazo de 8 días (4 días a partir del 01-01-2018) naturales desde la fecha del registro contable de la factura, excluyendo sábados, domingos, y feriados reconocidos nacionalmente y, en todo caso, antes del día 16 del mes siguiente al periodo de liquidación en que se hayan incluido las operaciones correspondientes (período en que se deduce el IVA soportado). El periodo límite puede ser más corto que los días iniciales del plazo. Si el día 15 es Sábado, Domingo o feriado, la fecha límite se extiende al siguiente día hábil.

Por tanto, en el caso de las facturas de compra, debemos considerar la **fecha de registro contable** de la factura como fecha a tener en cuenta respecto del alta en SII.

!!! info
    Se puede utilizar la [Calculadora de Plazos de la Agencia Tributaria](https://www2.agenciatributaria.gob.es/wlpl/AVAC-CALC/LanzadorCalculadoraPlazos) para realizar simulaciones para diferentes casos y ayudar a clarificar cualquier duda respecto a los plazos de liquidación.

Y, además, tenemos que tener en cuenta las siguientes fechas para el cálculo del periodo de liquidación del impuesto que se refleja en el XML dentro de la sección "Periodo de Liquidación" (Ejercicio/Periodo):

- la **fecha de operación** de la factura
- la **fecha del registro contable de la factura**
- y la **fecha de alta en SII** de la factura.

De modo que:

- si la fecha de operación se encuentra en el mismo mes (por ejemplo, julio) que la fecha de registro contable y alta en SII, el periodo reflejado en el XML será ese mismo (julio, en nuestro ejemplo)
- si la fecha de operación se encuentra en el mes de junio, la fecha de registro contable en julio y la fecha de alta en SII es anterior al 16 de julio, el periodo reflejado en el XML será junio.
- Si, por el contrario, y con las mismas fechas anteriores, la fecha de alta en SII es posterior al 15 de julio, el periodo reflejado en el XML será julio.

Por ejemplo:

Un empresario A vende mercancía a otro empresario B el 03 de julio de 2022. El empresario A expide la factura el 04 de julio. El empresario B recibe la factura el 30 de julio y efectúa su registro contable el 10 de octubre.

Caben dos posibilidades:

- El empresario B remite los registros de la factura el 15 de octubre consignando en el Libro Registro de facturas recibidas, Ejercicio: 2022, Período: 09.
- El empresario B remite los registros de la factura el 16 de octubre consignando en el Libro Registro de facturas recibidas, Ejercicio: 2022, Período: 10.

Una vez introducida esta información, podemos completar y contabilizar la factura, o sólo completarla.

En este momento el botón "**Alta en SII**" se muestra habilitado.

![](https://docs.etendo.software/latest/assets/drive/W1rkgnVrH0mKDQ0NA-IAK1sLYniuAWMvnbMWL0uzeVoFAitGq8m9p_nu1zpcBthrvEmYnuJpHAvGF1iK6xfsCBwukRa6Si97mEssOkn6thGnWEhTyPyopkGdd-5pEsKpggQZEd4BjTqOFxy_LLY.png)

Al hacer click en ese botón, iniciamos el proceso de alta del registro de esa factura en SII (Tipo de comunicación A0).

Etendo nos muestra un mensaje indicando que:

"_Esta acción no reversible (salvo error en la comunicación o error registral) genera el "alta" de la factura en la sede electrónica de la AEAT. Una vez dada de alta sólo será posible "Contabilizar" y "Descontabilizar" la factura, sin permitirse más cambios que las cuentas contables a tener en cuenta en la contabilización, y la fecha contable sólo en el caso de las facturas emitidas. Una vez dada de "alta" en SII de forma correcta, será posible "modificar" la factura en caso de error registral si se habilita el campo de la factura "modificada por error registral". En ese caso ya sólo será posible el envío a SII del registro de "modificación" de la factura"_.

Es decir, siempre es posible contabilizar/descontabilizar la factura después de darla de alta en SII, pero sólo será posible reactivarla en caso de error en la comunicación o error registral, tal y como se explicó para las facturas de venta.

!!! info
    En el caso de las facturas de compra, no será posible cambiar la fecha contable de facturas dadas de alta en SII de forma correcta.

Finalmente, en la cabecera de la factura de compra enviada a SII de forma manual o automática, tendremos información del "**Ejercicio**" y del "**Periodo**" que se incluyeron en el alta en SII de dicha factura.

![](https://docs.etendo.software/latest/assets/drive/Qj4R1IM6iiRpAwD5W06pJn2eqh9uR_mlF5dhG82eF3WkUc7_9mVb9jrw8EinOCeDZJL2U1kSXGoHnWZQ7vTV-ykEAu_PUGcAfengKKCFtGrRR89qnQGMNryBR9kWqseAky2pyK-f5XwISH1dPl4.png)

####### **Facturas de Importación (DUA)**

Las **importaciones con DUA** se deben anotar en el Libro Registro de Facturas Recibidas con la clave tipo de factura “F5”.

Deberán consignarse, como número de factura y fecha de expedición, el número de referencia que figura en el propio DUA y la fecha de su admisión por la Administración Aduanera respectivamente.

En los datos identificativos correspondientes al proveedor se consignarán los del importador y titular del libro registro, esto es la organización de Etendo.

Finalmente, y respecto de la **factura del transitario,** se consignará únicamente la prestación de servicios sujeta y no exenta, con clave de tipo de factura "**F1**".

Para registrar en Etendo este tipo de operaciones "Importaciones con DUA" debemos seguir los pasos siguientes en la ventana "Factura (Proveedor)":

- Crear una nueva factura para el tercero "Transitario" con su número de factura o "Referencia del Proveedor", con la siguiente información en el grupo de campos "AEAT SII" e "Import (DUA):
  - Clave tipo factura: Importación (DUA)
  - DUA: número de referencia que figura en el propio DUA
  - Fecha DUA: fecha de la admisión del DUA por la Administración Aduanera respectivamente
- en la pestaña "Líneas" introducir los datos de la factura del transitario, incluida su prestación de servicios sujeta y no exenta.
- en la pestaña "Impuestos" incluir de forma manual una nueva línea de impuestos para impuestos del tipo "Importaciones 21%", que incluya la base imponible de importación y su correspondiente cuota.

Una vez completada y dada de alta en SII, obtendremos un XML con la información requerida por parte de la AEAT.

En los casos en que una operación de "Importación (DUA)", se **relacione con más de un DUA** será posible seleccionar el check "**Multiple DUA**".

Al seleccionar esta opción:

- los campos "**DUA**" y "**Fecha DUA**" de la cabecera de la factura no se muestran ya que dichos campos **se tienen que informar en la pestaña "Impuestos"**, con el fin de relacionar el DUA y su fecha, con la base imponible de importación correspondiente, tal y como se muestra en la siguiente imagen.

![](https://docs.etendo.software/latest/assets/drive/lFZBqb1lzXOH1Y1FtRibpnZJ3Rh9aXTirC2xlThC9N6okNSa2pFWBQa0582MMpvssLILoOwm27vTXyXK4Vxi0qIAN537ODDJZ8GuVDik669avGDaIn2K3ShmyjKRcwSBXiGJ6Hz_YNCazPDxOh8.png)

####### **Facturas de Compra (alta tras la contabilización)**

Aquellas organizaciones que activen el check "Alta en SII facturas de compra tras su contabilización" en la ventana Configuración SII, podrán enviar sus facturas de compra a SII tras su contabilización.

El proceso de registro y alta en SII de este tipo de facturas es muy similar al resto de facturas de compra.

La información del alta en SII del registro de la factura de compra se recogerá de la ventana "Factura(Proveedor)", una vez que la factura de compra correspondiente esté en estado **"Completado"** y **"Contabilizado"**.

Dentro del grupo de campos "AEAT SII" estarán informados los campos:

- la _"Fecha Operación"_, que por defecto se informa con la misma fecha que la "Fecha de la factura", fecha actual o de creación de la factura en Etendo, si bien el usuario la puede modificar.
- la "**Fecha registro contable**", que por defecto se consignará en blanco hasta el momento en que la factura sea contabilizada con la fecha en la que se ha realizado el asiento, independientemente de la fecha en la que se hayan imputado los apuntes contables en el libro diario. El botón de Alta en SII permanecerá deshabilitado hasta que se produzca la contabilización del documento. Si la factura se descontabiliza antes de suministrarla a SII, la fecha registro contable eliminará su contenido. En caso de que se hubiera producido ya el alta, y fuera necesaria realizar una Modificación por error registral, la fecha registro contable no cambiará al descontabilizar y reactivar la factura.
- la _Clave Tipo Factura_, que se debe puede informar con los siguientes valores:
  - "_Factura_", que se corresponde con una clave de tipo de Factura "F1"
  - "_Importación (DUA)_", que se corresponde con una clave de tipo de Factura "F5"
  - "_Liquidación Complementaria Aduana IVA a la importación_", que se corresponde con una clave de tipo de Factura "LC"
  - "_Justificante contable_", que se corresponde con una clave de tipo de Factura "F6"

En el caso de las facturas de compra no es necesario indicar si se trata o no de una factura rectificativa.

- la _Descripción maestro SII_ de la operación, ya que en los ficheros XML no incluiremos información sobre las líneas de factura. En este caso seleccionamos una descripción del maestro.
- o bien introducimos directamente una descripción de la operación en el campo de texto libre "_Descripción SII_".  
  Si seleccionamos una descripción del maestro, ésta se muestra en el campo "Descripción SII" por defecto para que se pueda modificar/completar para esa operación/factura.
  - Si la factura se crea desde un pedido y ese pedido incluía una "Descripción SII", dicha descripción se incorporará de forma automática en la factura, siempre que el campo "Descripción SII" de la factura esté vacío.
  - Si la factura se crea desde varios pedidos, y en todos ellos hay una "Descripción SII", sólo se incorporará en la factura la del primer pedido seleccionado.

Y además, debemos reflejar el número de factura del proveedor en el campo _"Referencia del Proveedor"_.

Las facturas recibidas deben de enviarse a SII (alta en SII) en el plazo de 8 días (4 días a partir del 01-01-2018) desde la fecha del registro contable de la factura y, en todo caso, antes del día 16 del mes siguiente al periodo de liquidación en que se hayan incluido las operaciones correspondientes (período en que se deduce el IVA soportado).

Por tanto, en el caso de las facturas de compra, debemos considerar la **fecha de registro contable** de la factura como fecha a tener en cuenta respecto del alta en SII.

Y, además, tenemos que tener en cuenta las siguientes fechas para el cálculo del periodo de liquidación del impuesto que se refleja en el XML dentro de la sección "Periodo de Liquidación" (Ejercicio/Periodo):

- la _fecha de operación_ de la factura
- la _fecha del registro contable de la factura_
- y la _fecha de alta en SII_ de la factura.

De modo que:

- Sólo se dará de alta en SII una factura que se encuentre en estado "Completado" y "Contabilizado".
- Cuando el usuario contabilice la factura, el campo Fecha registro contable se rellenará automáticamente con la fecha del día en que se registra el asiento en contabilidad.
- Si el documento es descontabilizado antes de realizar el alta el campo Fecha registro contable eliminará su contenido.
- Si el documento es descontabilizado tras realizar el alta para proceder a una modificación por error registral, el campo fecha registro contable mantendrá su contenido y la fecha registro contable continuará siendo la misma que se informó en la comunicación de alta.

Por ejemplo:

Un empresario A vende mercancía a otro empresario B el 26 de abril de 2022. El empresario A expide la factura el 27 de abril. El empresario B recibe la factura el 30 de abril y efectúa su registro contable el 01 de mayo remitiendo los registros de la factura el 12 de julio, por lo que el periodo asignado será 07, ejercicio 2022.

Una vez introducida esta información, podemos completar y contabilizar la factura.

Tras la contabilización del documento, el botón "**Alta en SII**" se muestra habilitado.

![](https://docs.etendo.software/latest/assets/drive/1UMsgNf7I6yPu5bwhqBTR6B6CoBqaRXmv.png)

Al hacer click en ese botón, iniciamos el proceso de alta del registro de esa factura en SII (Tipo de comunicación A0).

Etendo nos muestra un mensaje indicando que:

"_Esta acción no reversible (salvo error en la comunicación o error registral) genera el "alta" de la factura en la sede electrónica de la AEAT. Una vez dada de "alta" en SII de forma correcta, será posible "modificar" la factura en caso de error registral si se habilita el campo de la factura "modificada por error registral". En ese caso ya sólo será posible el envío a SII del registro de "modificación" de la factura"_.

Siempre es posible contabilizar/descontabilizar la factura después de darla de alta en SII, pero sólo será posible reactivarla en caso de error en la comunicación o error registral.

El día 26 de julio el empresario B se da cuenta que tuvo un error en el momento de introducir el precio del producto en la línea de la factura, por lo que es necesario realizar una modificación por error registral (Tipo de comunicación A1). El proceso a seguir es "Descontabilizar", activar el check "Modificar por error registral" y "Reactivar" el documento. Tras hacer la modificación correspondiente, de nuevo se completa y contabiliza el documento antes de pulsar el botón "Modificación en SII", manteniéndose la fecha registro contable que inicialmente se informó en SII.

![](https://docs.etendo.software/latest/assets/drive/1GfPbKvhLR_HiB8Cg0zq63hbOvKGyMtIA.png)

En el caso de las facturas de compra, tampoco será posible cambiar la fecha contable de facturas dadas de alta en SII de forma correcta.

!!! info
    Si se decide optar por esta funcionalidad, es conveniente que la organización no tenga activo el proceso de contabilización automático, ya que imputará la fecha registro contable en el momento de realizar la contabilización.

###### **Modificación en SII**

Este tipo de comunicación implica la modificación de los registros de factura ya dados de alta en SII por errores registrales que no afecten a:

- el "emisor de la factura", esto es la organización o entidad legal que emite/recibe la factura
- la "fecha de factura", esto es la fecha factura (expedición) de las facturas de venta, fecha factura en las de compra
- y el "número de factura", o "referencia proveedor" en las facturas de compra que en ningún caso podrán modificarse.

Por ejemplo, nos damos cuenta de un error en el rango de impuesto seleccionado en una factura que ya está dada de alta en SII.

En esos casos tendremos que modificar la factura y enviarla de nuevo a SII, con un tipo de comunicación diferente que es A1 "Modificación (Corrección por errores registrales).

Se ha creado un nuevo campo en la cabecera de las facturas (tanto de compra como de venta), sección "AEAT SII" denominado, "**Modificada por error registral**". Este nuevo campo sólo se habilita si:

- la factura está en estado "Completado"
- y, además, está dada de alta en SII (Alta en SII= Si) correctamente, "Estado Registro SII" = Correcto.

Al seleccionar este nuevo campo, es posible descontabilizar y reactivar la factura, modificar el error cometido, para finalmente volver a completar la factura.

En ningún caso será posible modificar:

- el emisor de la factura (Organización)
- la fecha de factura (fecha de expedición en las facturas de venta/fecha factura en las facturas de compra)
- el número de factura (Nº documento en las facturas de venta/Referencia del proveedor en las facturas de compra)

El botón "**Modificación en SII**" nos permitirá enviar la modificación del registro de la factura a SII, tal y como se muestra en la pantalla siguiente:

![](https://docs.etendo.software/latest/assets/drive/662noKMIVCrzTjC2DZyK9mKmy-suka3TFRNe707uHDJqd_LF2rhWbpV50_BnPRTsYT1cWx7KZ6JPOvO5IKs4A1KJpQLlBeYg0587HHMHVgh0zBRf-1NT1VWvysRKzeD-_Owkm-sYIYPiv8VkOAM.png)

El suministro de este tipo de registros de "modificación" deberá realizarse antes del día 16 del mes siguiente al periodo al que se refiera la declaración en la que deba tenerse en cuenta dicha modificación.

##### **Envío Automático**

Dentro de la venta "Procesamiento de Peticiones" se han creado dos nuevos procesos "Proceso de alta en SII" y "Proceso de modificación en SII por error registral", que pueden configurarse para cada organización o entidad legal.

Tal y como sucede con otros procesos de Etendo, éstos podrán configurarse para ser ejecutados de forma inmediata, planificada o programada con una cierta frecuencia.

Se recomienda que este proceso se programe con una frecuencia "diaria", ya que tal y como se explica a continuación, este proceso tendrá en cuenta el número de días de cadencia configurados tanto para el alta en SII de las facturas de compra como de las facturas de venta, para la organización.

Sería posible también que la opción diaria sólo incluyera los días de la semana y, por lo tanto, no se tuvieran en cuenta para su ejecución ni los fines de semana.

###### **Alta en SII**

Este proceso permite el "alta" masiva (tipo de comunicación A0) en SII de todas las facturas de compra y venta en estado "completado".

![](https://docs.etendo.software/latest/assets/drive/w1ekffFhD9rdzVfeuBL6r7EuYU8QgRufj8cyg-0mKZNIEPgr69BvsDWLgP6xvlBCiwe1yYbGt3ROyHqcfeOqH4aDs_2TsY2Mfxb7cOtY_pbzlL_nGXeqptJosBJWmGXWUDZ0jVARQj6PlmMA7OI.png)

En el caso de las **facturas de venta**, este proceso tendrá en cuenta:

- la "fecha de operación" y la "fecha de expedición" de las facturas
- y la "cadencia del proceso de alta en SII", establecido para las facturas de venta en la ventana "Configuración SII", para cada Organización

Por ejemplo, en el escenario siguiente:

- factura de venta con fecha de operación 01-07-2022
- fecha de expedición 05-07-2022
- cadencia de envío establecida en 8 días

aunque, programemos el proceso de alta en SII con una frecuencia diaria, esta factura sólo se dará de alta en SII de forma automática, a través de este proceso, el día 13-07-2022.

Dicho de otro modo, el día 13-07-2022 se enviarán las facturas con fecha de expedición 05-07-2022 (13-07-2022- 8 días).

El plazo límite de alta en SII de esta factura para 2022 sería el 17-07-2022, ya que en este cómputo no se deben tener en cuenta los sábados, domingos ni festivos nacionales.

En el escenario siguiente:

- factura de venta con fecha de operación 20-06-2022
- fecha de expedición 13-07-2022
- cadencia de envío establecida en 8 días

aunque, programemos el proceso de alta en SII con una frecuencia diaria, esta factura se dará de alta en SII de forma automática, el mismo día de su expedición, ya que la fecha de la operación y la fecha de factura se encuentran en periodos diferentes.

El plazo límite de alta en SII de esta factura para 2022 sería el 15-07-2022

En el caso de las **facturas de compra**, este proceso tendrá en cuenta:

- la fecha contable y la fecha de registro contable de la factura
- y la "cadencia del proceso de alta en SII", establecido para las facturas de venta en la ventana "Configuración SII", para cada Organización

Por ejemplo, en el escenario siguiente:

- factura de compra con fecha contable 05-07-2022
- fecha de registro contable 14-07-2022 (ya que la empresa decide deducir el IVA en julio)
- cadencia de envío establecida en 8 días

aunque programemos el proceso de alta en SII con una frecuencia diaria, esta factura sólo se dará de alta en SII de forma automática, a través de este proceso, el día 22-07-2022.

Dicho de otro modo, el día 22-07-2022 se enviarán las facturas con fecha de registro contable 14-07-2022 (22-07-2022 - 8 días).

El plazo límite de alta en SII para esta factura sería el 26-07-2022.

En el escenario siguiente:

- factura de compra con fecha contable 20-06-2022
- fecha de registro contable 13-07-2022
- cadencia de envío establecida en 8 días

aunque, programemos el proceso de alta en SII con una frecuencia diaria, esta factura se dará de alta en SII de forma automática, el mismo día de su fecha de registro contable, ya que la fecha contable y la fecha de registro contable se encuentran en periodos diferentes.

El plazo límite de alta en SII de esta factura sería el 15-07-2022.

#### **Gestión y envío de registros desde el "Monitor SII"**

Desde la ventana "Monitor SII" podemos realizar gestionar y realizar envíos masivos de facturas emitidas/recibidas a SII, así como de los cobros/pagos de facturas en RECC y los cobros en metálico, esta última información a enviar de forma anual.

Tal y como se muestra en la siguiente pantalla, filtramos por:

- Alta en SII = No
- Estado doc = Completado
- Tercero = Cliente España

seleccionamos varias facturas y procedemos a su Alta en SII.

![](https://docs.etendo.software/latest/assets/drive/OOCosDIgqaozTNviBVAylAHt_OtM1Xs1MCqkHr8ZwFcnzZ365gqZH7PMx4QVCXEjC6AHI7FYUQlG_HLFCToPyy4es_b5DUxJMU03G2dnnNWgmhz2LQ6lZnC_f-QSZsbRwH2h6vUZCeRfp71BG-XyKpg.png)

Lo mismo aplica para el envío masivo de modificaciones de facturas emitidas/recibidas. En ese caso, dichas facturas deberán encontrarse marcadas como "Modificada por error registral" = SI.

Tal y como se muestra en la siguiente pantalla, filtramos por:

- Alta en SII = SI
- Estado registro = Correcto
- Tercero = Cliente España

seleccionamos varias facturas y procedemos a su Modificación en SII.

![](https://docs.etendo.software/latest/assets/drive/GDKayCFFhT9bAkhr68IiFXboS51M5wwZQs89d7pc9uW3Uo1dXDTlfMgSrfBQZl6ZjHmIuJlSSTiXfOP_MdskUK7Rhbqw6l3RWQ506xpkixCHok3iH0RJ4-bd3RtElOGY0LlpuPEWUzEfAljwwuUNf4U.png)

#### **Creación automática de facturas de venta**

##### **Generar facturas (manualmente)**

El proceso "Generar facturas (manualmente)” permite crear facturas de venta del tipo "AR Invoice" en estado completado.

Debido a eso, en los pedidos de venta se han creado dos nuevos campos dentro del grupo de campos "AEAT SII", con el fin de indicar en cada pedido de venta:

- la "**Fecha de operación**", si ésta es conocida
- y la "**Descripción SII**" de la operación.

En ningún caso es posible enviar pedidos de venta a SII (alta/modificación).

Tal y como se muestra en la pantalla, es posible seleccionar los pedidos a factura, e indicar una fecha de factura:

![](https://docs.etendo.software/latest/assets/drive/Ew-3GmSHo4SC8MYPB1b_faB3t50XX3uNoBlp8hK4o8NQ_NNQGk0Rlfkgjxvmvp7QJn-acYuicdRzLB8eZ_EgDfvgBKxcOSoolmbX-kn6oROckmVoCBYZKrtoA55jIXX51NQ1-wp7DLVY5ETVjxvHSdk.png)

Al procesar, Etendo nos informa de que se han creado las facturas correspondientes, que tendrán ya un estado de "Completado".

!!! info
    Cada una de estas facturas heredará la fecha de operación y la descripción SII introducidas en el pedido. Es importante recalcar que el usuario siempre las puede modificar, si es necesario, antes de dar de alta en SII dicha factura.

!!! info
    La clave de tipo factura no se informa por defecto, por tanto el usuario, antes de dar de alta en SII, tendrá que seleccionar el valor "Factura".

![](https://docs.etendo.software/latest/assets/drive/aMgaLXe4tY4nipPDVT33nXXZCbiZiuddcE0lErcIFB-8SKN3BRIzIRw88im-00dJUrIlUoROIE7koQT9TfNhz81rTmkaR1EoLZZ_B53WfMtum0QRsdwvaxFUT3ruMFTNiMGL-m6NJVySFnQTXvyxn30.png)

Si el pedido de venta o los pedidos de venta fueran negativos, este proceso generaría facturas de tipo "AR Invoice" que tendremos que reactivar y modificar antes de dar de alta en SII:

- El tipo de documento debe cambiar a un tipo "reverse" como "Reverse Sales Invoice".
- La clave de tipo factura se debe seleccionar como "Factura Rectificativa", e introducir:
  - el tipo de rectificativa
  - y el motivo de la rectificación.

![](https://docs.etendo.software/latest/assets/drive/pwCBP_ahyxDvNz_-q3IcT0IJBo4B1r05w3AhJLrmfTGMoX9-BFL41vf4-CH6DMC_RN-pZBjBp0LlOigea-baElLEvjiaMlZt52aVaw7SmLR6EW5QwzM86iNtmfaQcygSC21OipvaKGRLLiK4v2w1YeU.png)

##### **Crear Líneas de** 

**Pedidos**

Las facturas de compra/venta pueden crearse desde pedidos con la opción "**Crear Lineas de**". Varios pedidos pueden seleccionarse para ser incluidos en una factura.

Respecto de la información de SII, tenemos que tener en cuenta que:

- Si la factura de venta/compra que se está creando **no tiene información en el campo "Descripción SII"**, se tomará la "Descripción SII" introducida en el primer pedido seleccionado de venta/compra.
- La fecha **de operación** de la factura será por defecto la fecha de la factura y no se modificará al copiar los pedidos. El usuario tendrá que modificarla de forma manual si es diferente a la fecha de factura.
- Si el **primer pedido que se copia es negativo** (en el caso de las facturas de venta), la factura de venta correspondiente se creará como "Factura Rectificativa", "Por diferencias", con el "Motivo de rectificación" R1, pudiendo el usuario cambiar esa información si fuera necesario, al añadir líneas de pedido adicionales positivas o negativas.
- Las **facturas de compra creadas desde pedidos positivos**, se crearán con clave tipo factura "**Factura**", con tipo de documento "AP Invoice".
- Las **facturas de compra creadas desde pedidos negativos**, se crearán con clave tipo factura "**Factura**", y el usuario debería crearlas con un tipo de documento reverse "Reverse Purchase Invoice", ya que en el caso de las facturas recibidas  
  no es obligatorio informar de si una factura es rectificativa o no, sea positiva o negativa.

**Albaranes** (Albarán (Cliente)/Recibo devolución de material o Albarán (Proveedor)/Devolución a albarán de Proveedor)

Las facturas de compra/venta pueden crearse desde albaranes/devoluciones con la opción "**Crear Lineas de**". Varios albaranes/devoluciones pueden seleccionarse para ser incluidos en una factura.

Respecto de la información de SII, tenemos que tener en cuenta que:

- Estos **albaranes y devoluciones no incorporan información de SII**, por tanto, la información de SII de la cabecera de las facturas deberá ser rellenada por el usuario, tanto la fecha de operación, como la clave de tipo factura y la descripción SII.

#### **Casos de uso**

Dentro de este apartado se describen diferentes casos de uso tanto para las facturas de venta (LRFE) como de compra (LRFR), y su registro de "Alta" en SII.

!!! info
    Es importante recalcar que las fechas de operación que se muestran en los XML no coinciden con las fechas descritas en los casos de uso, ya que a fecha de junio no es posible enviar facturas con fechas de julio (fechas ejemplo).

##### **Libro de Facturas Emitidas**

La información del registro de alta/modificación de las facturas de venta se obtiene de la ventana "Factura (Cliente)", que como ya se ha explicado se ha modificado para incluir información requerida por SII (fecha operación, clave tipo factura, descripción SII, etc).

El registro de alta/modificación en SII de las facturas de venta varía en función de las siguientes variables:

- la **localización del "Tercero"** (Cliente), ya sea éste extranjero, intracomunitario o nacional, que conlleva la sujeción o no al IVA y dentro de la sujeción, su exención.
- el **tipo de factura emitida**, esto es "Factura"(F1), "Factura Rectificativa"(RX), "Factura Simplificada" (F2) o "Asiento Resumen de Factura Simplificada" (F4).
- **la sujeción al RECC** de la organización
- la venta a minoristas en las que se incluye "**Recargo de Equivalencia**"
- la venta a revendedores en **Inversión del Sujeto Pasivo**

y en función de que la factura emitida incluya:

- **el arrendamiento de local de negocio** sujeto o no a retención
- **una operación sujeta a IPSI/IGIC**
- o una **transmisión de un bien inmueble** sujeta a IVA

así como que la factura emitida

- se liquide con un **cobro en metálico superior a 6000.00€**
- o tenga una **fecha de factura** (expedición) **anterior al día 1 de julio de 2017.**

En los apartados siguientes se analiza la información que debemos recoger en las facturas de venta de Etendo para cada caso de uso, así como la información relevante que el XML de alta/modificación del registro de dichas facturas debe incluir.

La principal diferencia entre los XML de alta/modificación de los registros de facturas de venta de cualquier tipo es que:

- Los XML de alta incluirán un tipo de comunicación
  \<sii:TipoComunicacion\>A0</sii:TipoComunicacion>
- Los XML de modificación incluirán un tipo de comunicación
  \<sii:TipoComunicacion>A1</sii:TipoComunicacion>, junto con los datos de la factura correcta a modificar.

####### **Tercero (Cliente) Nacional**

Factura emitida con IVA Nacional por entrega de bienes y prestación de servicios.

La organización F&B España presta un servicio a su cliente "Alimentos y Supermercados", identificado con un NIF válido de España.

La operación se realiza el 2 de agosto de 2017. F&B España emite la correspondiente factura de venta con fecha 7 de agosto de 2017.

En este caso, y dado que el IVA se ha devengado en el periodo de agosto (fecha operación 2 de agosto), el plazo límite de expedición de la factura de venta y su alta en SII sería el 15 de septiembre.

Al expedirse la factura con fecha 7 de agosto, se está en plazo. Dicha factura se tendrá que dar de alta en SII antes del día 18 de agosto de 2017 (aplica cómputo 8 días, sin incluir sábados, domingos ni festivos nacionales).

Al expedir esta factura en Etendo, los tipos de impuestos que se seleccionan por defecto serán del tipo:

- Entregas IVA 10%
- Prestación servicios nacional 21%

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave régimen especial "01" (Régimen General)
- Sujeta No Exenta "S1"
- con desglose por detalle de IVA.

![](https://docs.etendo.software/latest/assets/drive/CDES62-nQ75UdtctVvQydN6-vDcqgQcFcdf3rRCeadKiYdCTTh4dXbX70wFVbxAC4sAuX10W_4MWkj7T-Z8xzuenunrPQ3FfIy6iHs7SvZOcX7eLi5RNKQdU8g0nhLtcG-RtZCWsFxP2sPRRW-x9TnE.png)

Es importante recalcar que:

- si la factura de venta nacional incluye más de un bien/servicio al mismo tipo impositivo, en el XML la información se mostrará agrupada por dicho tipo impositivo (por ejemplo 21%)
- si la factura de venta incluye más de un bien/servicio con distintos tipos impositivos, en el XML la información se mostrará desglosada por "Detalle de IVA" o tipo impositivo.

###### **Tercero (Cliente) extranjero**

Factura emitida por la exportación de bienes y prestación de servicios en el extranjero.

La organización F&B España emite el 13 de septiembre de 2017 una factura a la Empresa Z situada en Marruecos por la venta de un equipo y el servicio de instalación. La operación se produjo el día 29 de agosto. Este tercero debe identificarse en Etendo con un "Clave NIF País Residencia", distinta de 1 (NIF) y 2 (NOI).

En este caso, y dado que el IVA se ha devengado en el periodo de agosto (fecha operación 29 de agosto), el plazo límite de expedición de la factura de venta y su alta en SII sería el 13 de septiembre.

Al expedirse la factura con fecha 13 de septiembre, opera ficha límite, es decir, esta factura tendrá que enviarse a SII antes del día 15 de septiembre.

Al expedir esta factura en Etendo, los tipos de impuestos que se seleccionan por defecto serán del tipo:

- Exportaciones (%N=>0%)
- Servicios prestados internacional (%N=>0%)

La entrega del bien es una operación sujeta pero exenta de IVA.

La prestación del servicio es una operación no sujeta por reglas de localización

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave régimen especial "02" (Exportación)
- con desglose por tipo de Operación
- prestación del servicio "No sujeto por reglas de localización"
- exportación del bien "Sujeta y Exenta", con clave de causa de exención "E2" (Exportación).

![](https://docs.etendo.software/latest/assets/drive/5zXCAlCIBhJiUvUE2u4IPU47L16nNpn96Y-FbZ5SXgiiHoocMWiyDbeUoVD8UY7LVRTxk75wW3hqZnOjC0rDk2OSh5zZgWu07ggeMiRrDfJVAY01TQ-e8SaS2IdbuHMtJ8DQPAA-1n1f9fBVVFuwepE.png)

Es importante recalcar que:

- si la factura incluye una entrega de un bien a Canarias (tipo impositivo "Entregas a Canarias,Ceuta y Melilla (%N=>0%)")
- y una prestación de servicios que se localiza en Canarias (tipo impositivo "Servicios a Canarias, Ceuta y Melilla (%N=>0%)")

el XML generado incluye igualmente:

- un tipo de Factura "F1"
- con clave régimen especial "02" (Exportación)
- con desglose por tipo de Operación
- prestación del servicio "No sujeto por reglas de localización"
- exportación del bien "Sujeta y Exenta", con clave de causa de exención "E2" (Exportación). Esta clave se puede configurar para que aparezca por defecto en la ventana "Causa de exención" o indicar en la cabecera de la factura.

![](https://docs.etendo.software/latest/assets/drive/BnMTWAUJv3Itf0gbWYlfNV0RuyNPonFy4GFIpV9Ahh81Y2KK9JiI1p7dVLY79EidOqX8eOuGrGYYwN6Y6cVERAU_iNjULVsQUU_FKxk30SLRq1Nz-WDyW2SCC_YKC1gDqGXGt87ofjEjs9ka8oiiiQY.png)

###### **Tercero (Cliente) Intracomunitario**

Factura emitida con IVA Intracomunitario por entrega de bienes y prestación de servicios.

La organización F&B España emite el día 18 de agosto de 2017 una factura por la entrega de hardware (por importe de 1000.00 €) y su instalación (por importe de 800.00 €) a un cliente localizado en Francia. La operación se realiza el día 10 de agosto de 2017.

Este cliente localizado en Francia, debe estar identificado en Etendo con una "Clave NIF País Residencia" de tipo 2 = NOI.

En este caso, y dado que el IVA se ha devengado en el periodo de agosto (fecha operación 10 de agosto), el plazo límite de expedición de la factura de venta y su alta en SII sería el 15 de septiembre.

Al expedirse la factura con fecha 18 de agosto, se está en plazo. Dicha factura se tendrá que dar de alta en SII antes del día 30 de agosto de 2017 (aplica cómputo 8 días, sin incluir sábados, domingos ni festivos nacionales).

Al expedir esta factura en Etendo, los tipos de impuestos que se seleccionan por defecto serán del tipo:

- Entregas intracomunitarias (%N=>0%)
- Servicios prestados UE (%N=>0%)

La entrega del bien es una operación sujeta pero exenta de IVA.

La prestación del servicio es una operación no sujeta por reglas de localización.

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave régimen especial "01" (Régimen General)
- con desglose por tipo de Operación
- prestación del servicio "No sujeto por reglas de localización"
- exportación del bien "Sujeta y Exenta", con clave de causa de exención "E5" (Entrega intracomunitaria). Esta clave se puede configurar para que aparezca por defecto en la ventana "Causa de exención" o indicar en la cabecera de la factura.

![](https://docs.etendo.software/latest/assets/drive/luCZJQdNJOYe_30B8lauePugxFfIgv8TCOATfe2t1uFBz-FVINtxs0KooEAXdaTMGE9o44PXUQF4lS5hwGljNUQU-1G_x5GqakdHzFPBerOuzHQr3am409yP-YwDbE1YEknU8jFIatjxrkzkuUEiCHY.png)

Es importante recalcar que:

- si la factura de venta intracomunitaria incluye más de un bien al mismo/distinto tipo impositivo, en el XML la información se mostrará agrupada, dentro del nodo "Entrega/Sujeta/Exenta".
- si la factura de venta intracomunitaria incluye más de un servicio al mismo o distinto tipo impositivo, en el XML la información se mostrará agrupada por operación no sujeta por reglas de localización, dentro del nodo "PrestaciónServicios/NoSujeta"

###### **Organización acogida al RECC**

F&B España se encuentra acogida al régimen especial de criterio de caja.

Ésta organización vende bienes y un servicio a un cliente español el día 6 de julio de 2017, expidiendo la correspondiente factura ese mismo día.

Al registrar esta factura de venta en Etendo, los tipos de impuestos que se selecciona por defecto serán del tipo:

- Entregas IVA 10% IVA de Caja.
- Prestación servicios nacional 21% IVA de Caja.

La información de estas operaciones se suministrará en los plazos generales como si a las mismas no les hubiera sido de aplicación el régimen especial, por tanto y, en este caso, al emitirse la factura en el mismo periodo en el que se produce el devengo de la operación (Julio), el plazo límite de alta en SII para la factura sería el 18 de julio de 2017.

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave régimen especial "07" (Regimen especial del criterio de caja)
- Sujeta No Exenta "S1"
- con desglose por detalle de IVA.

![](https://docs.etendo.software/latest/assets/drive/-vN1cdTs45fGesRdAFTV6SOW8rbFfLo_9e32RSYXjKQkjKOCm4htirPAxfxUPkJZiu595v01C7vEC0iKxCiz7QDmp_ihz41rxp_O563v357xtRFwjToD69L_nGu6_B_e2bX_anYMqi0WCy-w3Cce6Wg.png)

###### **Cobros de facturas en Régimen Especial de Criterio de Caja (RECC)**

Los cobros totales o parciales de facturas en RECC deben darse de alta en SII en el momento de producirse.

Desde la ventana "Monitor SII" podemos filtrar por el número de cobro y proceder a su envío a SII.

Una vez dado de alta en SII, el XML generado informa de los siguientes datos del cobro, referenciados al número de la factura de venta:

- **Fecha**
- **Importe**
- **Medio**

![](https://docs.etendo.software/latest/assets/drive/zNO7__LCn0RS6lT_b-IqOr-5UI7FWlcdIhnJAiPhseee-s6Wc1FTV4EtmD9Ujp_R_Q7WEKcPY-LBi9xWWe_hj2Q28fkR-JnyV3NVvoPKGxhptTlVq6VOhKpIVhfkkUsi6H_Dj1eCS8kcA2T6YgkonZg.png)

El Medio que en nuestro ejemplo es el 02 (Cheque), debe configurarse en el Método de Pago, campo "**Type**".

**Anulación de cobros**

En el caso de los libros registro de cobros en RECC, no se utilizará el tipo de comunicación A1 de "Modificación de facturas/registros por error registral".

La modificación de un cobro en RECC ya dado de alta en SII se efectuará enviando el cobro que se pretende anular en negativo.

Lo anterior implica que en Etendo, no podremos reactivar un cobro en RECC ya dado de alta en SII, si no que tendremos que revertirlo, con la opción "Revertir pago" que se muestra en la siguiente imagen:

![](https://docs.etendo.software/latest/assets/drive/1aPMk2pmJYGzATaN_B1dI0Ri4wunDMRoW.png)

Al revertir el cobro, Etendo genera un nuevo cobro por el mismo importe en negativo que tendremos que dar de alta en SII desde la ventana "Monitor SII", tal y como se muestra en la siguiente imagen:

![](https://docs.etendo.software/latest/assets/drive/10k-gBCn4bUmQfxOqxjngiqdb-sgzhskD.png)

El XML generado contendrá la siguiente información:

- el importe del cobro en negativo
- referido a la factura

![](https://docs.etendo.software/latest/assets/drive/pi-8xhxVCAgUYqm35_0jxct9_B8i6lAHxBLIJ0rCGmfu44v4C47P8iWd02KZ7XTF2kwbYe8F2FvU9YelFpyCORry5_1vIHqvwjuDNFIE09Ns1bA9myQEb0Ar5j01RihIO-Wk_AoTlNOxPl4tODJwAMo.png)

**Facturas en RECC no cobradas en el año natural** (en desarrollo).

Como parte de la funcionalidad del RECC, Etendo permite la "liquidación manual del IVA de Caja" para aquellas facturas en RECC que no fuesen cobradas total o parcialmente antes del 31 de diciembre del año posterior al año de su expedición, produciéndose así el devengo del impuesto.

Por tanto, las facturas en RECC de fecha 2017 que no estén cobradas a 31-12-2018, tendrán que enviarse a SII en dicha fecha, y con la siguiente información:

- **Fecha** (de cobro) = 31-12-2018 (fecha de la liquidación manual del IVA)
- **Importe** = importe pendiente de cobro de la factura
- **Medio** = 03 (No se cobra/No se paga)

Desde la ventana de "Liquidación manual del IVA de Caja" será posible enviar estas liquidaciones manuales a SII, con fecha 31 de diciembre del año posterior al año de su expedición (devengo del impuesto).

###### **Ventas con recargo de equivalencia**

F&B España realiza una venta a un cliente acogido al recargo de equivalencia.

Al expedir la factura por la entrega correspondiente el tipo impositivo seleccionado será del tipo “Entregas IVA+RE 21+5.2%.

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave regimen especial "01" (Régimen General)
- Sujeta No Exenta "S1"
- con desglose por detalle de IVA de haber más de un tipo impositivo diferente
- con información en los nodos:
  - tipo recargo de equivalencia
  - cuota del recargo de equivalencia

![](https://docs.etendo.software/latest/assets/drive/T3uUXF3GgSV_UnjkKYJeJT1TvMTg-mly1C1HdKbirdRo3sdYKRAU_-hTXitit3t6jnZoEeMHJ98cgMIHKA4u4u0wJ-eZipjPEFC6vpd89qTTwDpBcOSwNsL350kqL3WZMpUsXmeVxA3o42FhhrZJAZM.png)

###### **Operaciones de venta con ISP**

En el caso de producirse una venta por parte de F&B España a un cliente revendedor español, el tipo impositivo utilizado será:

- Entregas sin IVA por ISP

es decir:

- el vendedor emitirá la factura de venta sin aplicar el IVA
- El comprador que recibe la factura sin IVA declarará este IVA como una Inversión del Sujeto Pasivo. Ver escenario de compra Inversión del Sujeto Pasivo.

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave régimen especial "01" (Operación de régimen general.)
- y la operación dentro del bloque funcional ”Desglose factura”, "Sujeta - No Exenta – Con Inversión sujeto pasivo” (S2).
- Los campos “tipo impositivo” “cuota repercutida” se informarán con importe cero

![](https://docs.etendo.software/latest/assets/drive/ZEqqB3TgdDl7PnFVsTpM5FtOKACsXZ1wU2VmDKspeWJQCkSuqpJCREyAK2NtnDT9QweIYdz-H89Bh74hcqr1ATWVgxjZm15zPTXzGRBLkZvGnq0uFrFAJIp1HochquU5YMhUpboj3HTmXg1eJe7beRo.png)

###### **Arrendamiento de local de negocio**

F&B España emite el día 1 de septiembre de 2017 una factura por el arrendamiento de un local de negocio con una base imponible de 850 €

F&B España emite una factura con los siguientes datos:

- **Fecha de expedición de la factura** (fecha factura): 1 de septiembre de 2017
- **Fecha de operación** : 30 de Agosto de 2017 (cubriendo el alquiler del mes de Agosto).

En este caso, tenemos hasta el 13 de septiembre para dar de alta la factura emitida en SII, contando 8 días naturales desde la fecha de expedición de la factura.

En este caso, la fecha límite de expedición de la factura y de envío a SII, sería antes del día 16 del mes siguiente a aquel en que se hubiera producido el devengo de la operación, esto es el 15-09-2017.

Al registrar esta factura en Etendo, los tipos de impuestos que se seleccionan por defecto serán del tipo:

- Arrendamiento 21% (cobros)

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave regimen especial "12" (Operaciones de arrendamiento de local de negocio no sujetos a retención)
- Sujeta No Exenta "S1"
- con el detalle del Inmueble, que se obtiene de la configuración realizada para el "local arrendado" en la ventana "Producto" :
  - Situación del inmueble
  - Referencia catastral

![](https://docs.etendo.software/latest/assets/drive/mtf9dUeo9KXFMRhgM2rj868eBLugn6FjnystCp18gska41BDKkO60I5tH3m99sf-T4l0Hmo2_9-ZJvMPMvpCXSmqnSEZ5TIVEQ1CshWlVxKkItpZ_renVXmVhQIJVbdLrOOKP67AH_txpy4JoY8dKn0.png)

En el caso de que el arrendamiento incluya retención, el tipo impositivo a utilizar sería del tipo "Arrendamientos 21% -19%R (cobros)" y la información del XML la siguiente:

- un tipo de Factura "F1"
- con clave régimen especial "11" (Operaciones de arrendamiento de local de negocio sujetas a retención)
- Sujeta No Exenta "S1"

![](https://docs.etendo.software/latest/assets/drive/u3q1KqomFK1gk_RK0zXOfJ0_Rzk3WlN5GkS0mr7t0UfP_Wza_qXiAf6FXXatfzGxod5gHiJNkirgqTm8URkstrpTCBGd-TBL0O9CuYm5Jq4_s2nQd8tl_iCpOrrRtNgd1guBelPfd-kcdMXzl7yqBj8.png)

En el caso de locales arrendados sujetos a retención, no es necesario especificar la información del inmueble, por incluirse ésta en el modelo de retenciones (Modelo 180) correspondiente.

Por último recalcar que:

- Si una misma factura incluye más de un arrendamiento con y sin retención, se dará de alta en SII con la clave "13" e información (referencia catastral/situación del inmueble) del local(es) que no estén sujetos a retención.
- Si una factura de arrendamiento está sujeta al régimen especial del criterio de caja, prevalecerá la clave 07 de Operación Sujeta a RECC.

###### **Operación de venta sujeta a IPSI/IGIC**

F&B España con domicilio fiscal en Madrid, adquiere una máquina en Canarias y la vende en dicho territorio junto con un servicio de instalación de la misma, que también adquiere/presta en Canarias.

La operación se realiza el 29 de agosto. F&B España emite la factura el día 13 de septiembre.

En este caso y dado que el IVA se ha devengado en agosto, el plazo límite de expedición de la factura de venta y su alta en SII sería el 15 de septiembre (opera fecha límite).

Al registrar esta factura en Etendo, los tipos de impuestos que se deben seleccionar son del tipo:

- Entregas IGIC 13,5%
- Servicios Prestados en Canarias 13.5%

Tanto la entrega de bienes como la prestación del servicio se adquieren y localizan en Canarias, por lo que no es aplicable ningún tipo de IVA.

Esta operación está sujeta a IGIC y por tanto, debe registrarse en SII como una operación no sujeta por reglas de localización (tanto en lo relativo a bienes como servicios).

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave régimen especial "08" (Operaciones sujetas a IPSI/IGIC)
- y todo el importe de la operación (bases imponibles) tanto de bienes como servicios, en el nodo "Operación no sujeta por reglas de localización"

![](https://docs.etendo.software/latest/assets/drive/MvYNDpfiSbbn9wkjDb_pvc0rMIlv0l1_DQuAarhiNZfGz3apN6HhQaeSl_MGMhkmhXW2wMj2MimCCnviAA5U9rxNuVFcK4fG_jGtfzqLGAzJPFyfudlMA3yKBMqFMO_KIpL_Yje6DeDTIpQkN3RCWSw.png)

###### **Transmisión de bienes inmuebles**

F&B España expide el día 1 de septiembre de 2017 una factura por la venta de un bien inmueble en Madrid por 150.000 €

La operación se realiza el 1 de septiembre, expidiendo factura el día 5 de septiembre.

En este caso, la fecha límite de alta en SII sería de 8 días (hábiles) contando desde la fecha de expedición de la factura, esto es el 15 de septiembre de 2017.

Al registrar esta factura en Etendo, los tipos de impuestos que se seleccionan por defecto serán del tipo:

- Transmisión de bienes inmuebles 21%

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con un importe por transmisión de bienes inmuebles de

![](https://docs.etendo.software/latest/assets/drive/YvejK7Py-383mQDuU6vqd4psPpJzCR5oLQ3vMFcCHWdEVw33FtvP_yX8ZzHiiROQ9sQmQNYMZTaJ1E_2J9mtdaa5cIpHIYXkUY2vLnjeB9uB5FSKrfi91Qt-2onjt5AP-aSWZMI7eIOOlHFhuQKhUeU.png)

###### **Cobros en metálico**

La información correspondiente a los importes superiores a 6.000 euros percibidos en metálico durante el ejercicio de una misma persona o entidad, deberá suministrarse con carácter anual, durante los primeros 30 días del mes de enero siguiente al ejercicio al que se refieran.

En Etendo se ha creado una nueva ventana denominada "SII Cobros en metálico" que permite gestionar la generación de dichos cobros y su posterior "alta" o "Modificación" en SII.

**Alta Cobros en Metálico**

En la ventana "SII Cobros en metálico" se puede introducir la "Organización" y el Ejercicio (por ejemplo 2021), para el cual se necesita suministrar este tipo de información de carácter anual.

Una vez introducida dicha información, el botón "**Actualizar Cobros Metálicos SII**" lanza un proceso que tiene en cuenta:

- todas las transacciones del tipo **“BP Deposit”** o **“Cobro”** con estado **"Cobro depositado"** o **"Conciliado"**, realizadas en cuentas bancarias de tipo **“Caja”** con **"fecha de transacción”** durante el año natural especificado (Ejercicio).
- respecto de operaciones/transacciones bancarias relacionadas con **Facturas y Conceptos Contables**, asociadas a un “Tercero” identificado con un **Tax ID** (por ejemplo NIF)
- y que, **agrupadas por dicho tercero**, superen el importe de 6.000,00 €

![](https://docs.etendo.software/latest/assets/drive/1SFZL1-iAvHxq27c-zACBqx-a-EKd5Rzt.png)

Una vez generado el cobro/cobros, se puede realizar su "**Alta en SII**". Una vez dado de alta en SII, los campos "Alta en SII", "Estado registro SII", "Importe", "Importe enviado" e "Importe enviado" se actualizarán.

Si se produjera un error al dar de alta en SII, se mostraría el código de error y el mensaje del error para su subsanación.

**Modificación Cobros en Metálico**

La ventana "SII Cobros metálico" permite además, controlar incidencias que se podrían producir con posterioridad al alta del cobro(s). Incidencias que puedan deberse a la incorporación de nuevos cobros, modificación/eliminación de cobros existentes para un tercero.

Para ello, se diferencian los siguientes campos:

- **Importe**: corresponde a la suma total de los cobros depositados en una cuenta financiera de tipo caja, que supere la cantidad de 6.000,00 €, respecto de un tercero
- **Importe enviado** a SII
- **Importe pendiente** de envío a SII
- **Totalmente enviado**: tomará los valores, "Sí" cuando no existan diferencias entre el campo "importe" e "importe enviado"; "No" cuando un aumento/disminución del importe provoque una diferencia al ya enviado.

Por ejemplo para un tercero determinado se realizaron varias facturas durante el año 2021 que se cobran en metálico. El importe total de dichas facturas y, por tanto, el importe recibido en metálico de este tercero asciende a 151,000.00. Tanto las facturas como el cobro en metálico se han dado de alta en SII.

![](https://docs.etendo.software/latest/assets/drive/1u1oUThSf80IxxOdRGouxAHwQraXG2w1o.png)

Con posterioridad se realiza una nueva factura por importe de 1,800.00 €, que también se cobra en efectivo, y que por tanto debe darse de alta en SII.

En la ventana "SII Cobros en Metálico", tendremos que:

- actualizar la información para que se refleje el nuevo cobro creado como "Importe pendiente" de alta en SII, tal y como se muestra en la imagen siguiente:

![](https://docs.etendo.software/latest/assets/drive/1BbyKHAgfLYfW2n4tXqhw9n18lsO9eRxF.png)

- y activar el check "**Modificada error registral**" en el cobro.

Una vez hecho esto se podrá proceder a la modificación en SII de dicho cobro para el tercero, a través del botón "**Modificación en SII**".

![](https://docs.etendo.software/latest/assets/drive/1e8dQ5G3FbWKQue-E1ZCfu-LwgtpxD0PF.png)

Es importante recalcar que si de un tercero se recibiera un cobro en metálico con fecha del ejercicio a declarar (por ejemplo 2017), respecto de una factura de fecha anterior (por ejemplo 2016), dicho cobro también se incluirá en la selección, para su alta en SII, siempre que el importe total recibido/cobrado de ese tercero supere los 6000.00 €.

###### **Factura emitida con fecha de expedición anterior al 01-07-2017**

Respecto de las facturas emitidas con fecha de expedición anterior al 01-01-2017, existe también la obligación de su alta en SII, pero con un esquema XML con las siguientes particularidades:

- **Clave de régimen especial** = 16 (Primer semestre 2017).
- **Descripción de la operación**: “Registro del Primer semestre 2017”.

Y, en el caso de las facturas emitidas, con independencia de su calificación cuando son "No Exentas", se informarán bajo la siguiente clave:

- **Tipo no exenta: S1**.

Lo anterior aplica excepto para sujetos pasivos en REDEME que ya las habrán enviado en el Modelo 340 correspondiente.

En Etendo, al dar de alta en SII una factura con fecha anterior al 01-07-2017, comprobaremos que el esquema XML es del tipo siguiente:

![](https://docs.etendo.software/latest/assets/drive/4o687WK4KAze5LKKh6DcmXN0Jqu4THxG1BB-V_FpI_5XiZa81XzP251gWHKh-Cz0-rrVi4psJ8-QAlLPOpukxkxn-QYlxf1DdNzAycfo9bYHX1PIZGe6BVaO93zMFRtbn5h7BjemISBttCGvqH8s9bU.png)

En Etendo se ha desarrollado un proceso "background" que adapta las facturas de venta del primer semestre para que puedan darse de alta en SII.

Este proceso se denomina "**Proceso de adaptación a SII de Facturas de Venta del primer semestre de 2017**" y configura las facturas de venta del primer semestre, de la siguiente forma:

- como "**Factura**", es decir, con la **"Clave de tipo Factura" = F1**.
  - las facturas de venta positivas, con/sin pedido relacionado, y tercero con NIF.
- como "**Factura Rectificativa por Diferencias y error fundado"**, es decir, con la "**Clave de tipo Factura" = R1**
  - las facturas de venta negativas, con/sin pedido relacionado, y tercero con NIF.
- como "**Factura Simplificada**", es decir, con "**Clave tipo Factura" = F2**
  - las facturas positivas o negativas sin/con un ticket/pedido relacionado y tercero sin NIF.
- como "**Asiento Resumen de Factura Simplificada**", es decir, con "**Clave tipo Factura" = F4**
  - las facturas positivas o negativas con más de un ticket/pedido relacionado, y tercero sin NIF.
- añade la descripción tipo "**Registro del Primer semestre**"
- e indica como "**Fecha de operación**" la fecha de la factura tal y como requiere la AEAT.

!!! info
    El usuario siempre podrá revisar la configuración otorgada a dichas facturas antes de darlas de alta en SII.

La ventana "**Monitor SII**" incluye también una pestaña "**Facturas de Venta Primer Semestre 2017**" desde dónde se pueden gestionar estás facturas, una vez configuradas de forma correcta por el proceso.

###### **Factura emitidas rectificativa fuera de plazo**

Factura emitida rectificativa por sustitución en un periodo posterior al de presentación de la declaración de IVA - Modelo 303, de la factura original.

La organización F&B España realiza una entrega de bienes por valor de 2420 € (IVA incluido) La operación se realiza el 2 de enero de 2018. F&B España emite la correspondiente factura de venta con fecha 2 de enero de 2022.

En este caso, y dado que el IVA se ha devengado en el periodo de enero (fecha operación 2 de enero), el plazo límite de expedición de la factura de venta y su alta en SII sería el 15 de febrero.

Una vez completada la factura, se procede a su Alta en SII el día 2 de enero.

El XML de alta en SII contendrá la siguiente información:

Clave tipo factura = F1-Factura

Importe total = 2420

Fecha Factura: 02-01-2022

Fecha Contable: 02-01-2022

**Fecha de Operación: 02-01-2022**

**Periodo SII: 01 - Enero**

**Ejercicio SII: 2022**

![](https://docs.etendo.software/latest/assets/drive/HJdwEipVS4djsZugPA3zso45tgrG6enxXhlP_KOSpe4a9r2v8EcytimONV_AMoVyaMIE8oJ3f4oLSpzObpdoRRgJ3HsTjWRAijIB94bZdAt45OvJPcGz-rwKdw2x1ykj9oX6_eoMKw02eqNaAk01Tjs.png)

El día 1 de marzo, se produce una devolución por mal estado del 20% de la mercancía con un valor de 484 € (IVA incluido) por lo que F&B España procede a la anulación de la factura original y emisión de una nueva con el importe final correcto.

Se produce una anulación de la factura original (ya dada de alta en SII e incorporada a la declaración de IVA del mes de enero) a través de la opción "Reactivar-Anular" de Etendo. Esta acción creará una factura del tipo "Reverse" con los siguientes datos:

Clave Tipo Factura = F1-Factura

Importe total = -2420

Tipo de documento = Reverse Sales Invoice

Fecha Factura: 01-03-2018

Fecha Contable: 01-03-2018

**Fecha de Operación: 02-01-2018** (fecha de operación de la factura original)

![](https://docs.etendo.software/latest/assets/drive/fetQO0nNF-Q3kkLURvyOFzQ46wSUEIIjymSsJCfk9GkiUMInhKjnvjWnmvgsZdi2_oM-dpdLGenWjw9a1h6OFBxj7CUAfQBzNLrTT64XL0pA6zhIrcE8hJxoOFD-KP6Uywr6ZuOKqbzsVSUCIt3J2EE.png)

Al dar de Alta esa factura de anulación en SII, el fichero XML registrará de forma automática la siguiente información:

**Periodo SII: 07 - Julio**

**Ejercicio SII: 2022**

El periodo asignado en SII no se corresponde con la fecha de operación, si no con la Fecha Factura (julio), por lo que **pasará a formar parte de la liquidación del impuesto del mes de julio**.

![](https://docs.etendo.software/latest/assets/drive/qPqZ-pAmr6pO6ALY0z4_PrmOrkEnqWO5b-YqmEbVPZX3DSUQUEd36VwA5LmUZciyEqR4l70kFCR9QIv0u2VgUf-HJEWUEDJcp9mCuBe5J_sW6o8wC5PSAesUXAsH3e_0cOVbsnHg4LmSx3XFpJIQtfs.png)

Posteriormente, se crea la nueva factura con los importes correctos y con los siguientes datos:

Tipo de documento = AR Invoice (no reverse)

Clave tipo factura = Factura Rectificativa

Tipo Rectificativa = Por Sustitución

Motivo de la rectificación = R1...R4, a seleccionar por el usuario según el motivo de la rectificación.

Fecha Factura: 01-03-2018

Fecha Contable: 01-03-2018

**Fecha de Operación: 02-01-2018** (fecha de operación de la factura original que tendrá que seleccionar el usuario de forma manual)

![](https://docs.etendo.software/latest/assets/drive/Ln5HvZyVHOBK-JEMdCGGj7N__H5Bzn8mAm3xqW2jRUNOpDdeOdBXNWaa6F-0lWrHDbXbVFXclkYHFqsQ5e-IJWVuo_o8871Y0TTpk7apWwr7W6lwixlux5lbKxTfBsJBHP1o1RsigQrozwyHTJSuGPk.png)

Al dar de Alta esa factura de anulación en SII, el fichero XML registrará de forma automática la siguiente información:

**Periodo SII: 07 - Julio**

**Ejercicio SII: 2022**

![](https://docs.etendo.software/latest/assets/drive/WmCrqgr1mzfFPN73yfGGt5a6jseoeH0wUEAWYyzaOROUsZtcVEtmljTWDUh_CT6KpHmza0a2Oc6P1ZqnczOZF8COnXiEXg2_W2FiQU8vz_fgIINsqydZnwSpojBEjhBGMcJgJXFss9Ihy4eIjKWzgPo.png)

Al igual que la anterior factura que anula el importe de la original, el periodo asignado en SII, no se corresponde con la fecha de operación si no con la Fecha Factura (Julio), por lo que **pasará a formar parte de la liquidación del impuesto del mes de julio**.

Si la emisión de una factura rectificativa, ya sea por diferencias o por sustitución, se produce en el mismo período del devengo de la operación. Es decir, la emisión de las distintas facturas (Factura original, anulación y rectificativa con motivos R1,R2,R3 Y R4) se emiten en un mismo mes, podrán liquidarse en la declaración del impuesto del mismo periodo.

En el resto de casos en los que la fecha de operación de la factura original sea distinta a la emisión de las facturas correctivas posteriores, el periodo de liquidación será distinto.

##### **Libro de Facturas Recibidas**

La información del registro de alta de las facturas de compra se obtiene de la ventana "Factura (Proveedor)".

En todo caso, será obligatorio introducir el número de factura del proveedor en el campo "Referencia del Proveedor", con el fin de identificar y cruzar la información de las facturas.

El registro de alta en SII de las facturas de compra varían en función de las siguientes variables:

- la **localización del "Tercero"** (Proveedor), ya sea éste extranjero, intracomunitario o nacional
- el **tipo de factura recibida**, esto es "Factura", "Factura de Importación (con DUA)", "Justificante Contable".
- **la sujeción al RECC** de la operación reflejada en la factura de compra
- **la sujeción al RECC** de la organización que recibe (registra) la factura de compra.
- que la factura de compra incluya operaciones por las que los empresarios satisfacen compensaciones en las adquisiciones a **personas acogidas al REAGYP**.

y en función de que la factura recibida incluya:

- **una operación sujeta a IPSI/IGIC**
- **un arrendamiento de local de negocio** sujeta a IVA
- o **gastos de personal** que son en todo caso no declarables y, por tanto, no deben darse de alta en SII

así como que la factura recibida refleje:

- una "**Inversión del Sujeto Pasivo**"
- o su **fecha contable sea anterior al 1 de Julio de 2017**

###### **Tercero (Proveedor) Nacional**

Factura recibida con IVA Nacional por la adquisición de un bien y la prestación de un servicio.

La organización F&B España recibe una factura de un proveedor nacional, que incluye tanto bienes como servicios.

La operación se realiza el 2 de agosto de 2017 y la factura se expide con fecha 7 de agosto de 2017.

F&B España recibe la factura el día 9 de agosto de 2017 y decide consignar y deducir la cuota soportada en el modelo 303 del mes de agosto, procediendo a su registro contable el 13 de septiembre.

El plazo para remitir el registro de esa factura a través del SII finaliza el 15 de septiembre, en este caso (antes del día 16 del mes siguiente al que se devenga la operación).

Al registrar esta factura en Etendo, los tipos de impuestos que se seleccionan por defecto serán del tipo:

- Adquisiciones IVA 21%
- Prestación servicios nacional 21%

Es importante registrar:

- como fecha de factura de compra, la fecha de expedición de la factura de venta
- como referencia de proveedor, el número de factura de la factura de venta

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave regimen especial "01" (Régimen General)
- con información sobre la cuota deducible y la fecha contable.
- con desglose factura y detalle de IVA, de existir tipos de IVA diferentes.

Después de su alta en SII, es posible contabilizar y descontabilizar la factura de compra, si fuera necesario, pero no será posible cambiar la fecha contable de la factura por ser este campo obligatorio respecto de las facturas de compra.

![](https://docs.etendo.software/latest/assets/drive/AH_zdSOXyQVvw8Vxt60YW-gZbSimeZlJnn0v0oX2nrUZSpfkNn1B_sf8RCGyM5a1GP-thIUBE0HVOVI5rR_59xkcn4dWgR6JmeeqGbuG4fHFz5fPoKe_Gdg-izeDXm0f1yLl_YBFcSN7ce6s42Oto-g.png)

Es importante recalcar que:

- si la factura de compra nacional incluye más de un bien/servicio al mismo/distinto tipo impositivo, en el XML la información se mostrará agrupada por tipo impositivo, dentro del nodo "DesgloseIVA/DetalleIVA"

###### **Tercero (Proveedor) extranjero**

####### **Caso 1 - Factura recibida de un proveedor extranjero (antes del DUA)**

F&B España recibe una factura de compra de un proveedor extranjero, localizado en USA, por la adquisición de unos bienes. Todavía no se ha recibido el DUA ni la factura del transitario que realizará la importación de los bienes.

En este caso, la factura del proveedor extranjero se debe registrar con la siguiente información dentro del grupo de campos "AEAT SII":

- **Fecha de la operación** si es diferente a la fecha de la factura
- **Clave tipo factura** como "Justificante Contable" (F6)
- **Descripción SII** que corresponda

Al registrar esta factura, el impuesto seleccionado será del tipo:

- Importaciones 21%=0%

Podemos indicar el tipo de cambio de la divisa (USD) a EUR en la factura, pestaña "Tipo de cambio", ya que todas las operaciones que se registren en SII deberán estar en euros. De no indicarse tipo de cambio en esta pestaña se tomará el tipo de cambio configurado en la ventana "Rangos de conversión" para la fecha de la factura.

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F6"
- con clave régimen especial "13" (Factura correspondiente a una importación (informada sin asociar a un DUA).)
- e información en euros de la base imponible de la factura del proveedor extranjero.

![](https://docs.etendo.software/latest/assets/drive/yv6n8NS37hU1NicRu2Rw0r0TtaClew1amM4KkLpPf2jCiX6AbV1oE2XVroCIIsOOvMZRfE1phnO6hcgL_CPUyyq8bn2gUpowhkQ2WOaCotbfNO-CeFwKXv1QR-GrBsvGJctagqLNNobK8eDZMyVaQLg.png)

Es importante recalcar que habiendo registrado un DUA (Caso 3 siguiente) no es necesario registrar la factura del proveedor extranjero.

####### **Caso 2 - Factura de transitario (un DUA)**

F&B España recibe una factura de transitario, junto con el correspondiente DUA, y referenciada a la aduana de destino de la mercancía, con posterioridad recibe la factura del proveedor extranjero.

La forma de registrar en Etendo la factura de transitario que incluye el IVA de importación será la siguiente:

- en la ventana "**Factura (Proveedor)**" creamos una nueva factura de compra, y seleccionamos el "Transitario" en el campo "Tercero".  
  Introducimos en el campo "Referencia del Proveedor", el número de factura del transitario.
- en el grupo de campos "**AEAT SII**" introducimos la siguiente información:
  - **fecha de operación**, si es distinta de la fecha factura del transitario
  - **clave tipo factura** como "**Importación (DUA)**" (F5)
  - seleccionamos la "**Descripción SII**" correspondiente
- en el grupo de campos "**Import (DUA)**" introducimos:
  - el **número de DUA**
  - la **fecha de admisión del DUA**, que aparece en el DUA en la sección "Control por la aduana de destino"
- en la pestaña "**Líneas**" introducimos la prestación de servicios del transitario sujeta y no exenta, en euros, con una base imponible de 500 €, por ejemplo; así como el resto de líneas de la factura del transitario por conceptos exentos de IVA del tipo "seguro" o "flete".
- en la pestaña "**Impuestos**" creamos una nueva línea de impuestos con el tipo de impuesto "Importaciones 21%". En el campo "Base Imponible" introducimos la base imponible de importación, reflejada en la casilla 47 del DUA.

![](https://docs.etendo.software/latest/assets/drive/vQSib6h0rlB988u0S84IkPdDUQWZOVwPLTHBjgTRPXDjrmWMLf4Ix0K901j0Cw-5coy52rLVU5M-Bzki63aleZoqmv2BtYqrKxpQe7qms2C8DNJLn77KoQZpoUnBBnfLrx83uf6_HzeGpa68qGnIerU.png)

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- el alta/registro del DUA con
  - la clave tipo de factura "F5"
  - el número de DUA que se verá reflejado en la etiqueta del XML \<sii:NumSerieFacturaEmisor>
  - la fecha de admisión del DUA como fecha de registro contable, que se verá reflejado en la etiqueta del XML \<sii:FechaExpedicionFacturaEmisor>
  - F&B España como "contraparte" de la operación (Importador)
  - la clave de régimen especial 01 (Régimen General)
  - y los importes correspondientes a la base imponible, tipo y cuota del impuesto (cuota deducible) en euros

![](https://docs.etendo.software/latest/assets/drive/ZJPF4ktKtyLgWY4KCQFHWYC_C5ZQJEg0t000RLzZGUTlFRCBJFL1THMSRDs_bJADn_rImCucvOFJpYvR75hrwmrNdg77Phspx5yAfSb_skBHnDhkxueRi7cUrz5nPdqn2MaBrF2_vAPkarH6n8BYtko.png)

- el alta/registro de la factura del proveedor (Transitario) con
  - la clave tipo de factura "F1"
  - el número de referencia/factura del transitario
  - la fecha contable de la factura del transitario como fecha de registro contable
  - el "Transitario" como contrapartida de la operación
  - la clave de régimen especial 01 (Régimen General)
  - y los importes correspondientes a la base imponible, tipo y cuota del impuesto (cuota deducible) en euros, por la prestación de servicios sujeta y no exenta.

![](https://docs.etendo.software/latest/assets/drive/4pMaJ6g3yMj7fZotizXLbgwfpFLPziqoQOUdxahcLyupnKiZgG-VwpIhhDTTzXoSxbsx4-5NKG7CtYwDIDaVGWm_Hts8AiKdQQ4Vlv3zF4rFnWMwLJLZoPbkRCSnCa7K9gmxiqUCuO_RU1L9xcZHM8w.png)

Respecto de la factura del proveedor extranjero, ésta se deberá registrar también en la ventana "Factura Proveedor", en la divisa que corresponda y, con la clave de tipo de factura "Factura" (F1).

Al registrar este tipo de facturas en Etendo, el rango de impuestos utilizado será del tipo "Importaciones 21%=>0%", dado que dichas facturas de proveedor extranjero no incluyen IVA.

La AEAT no obliga a dar de alta en SII este tipo de facturas de proveedor extranjero, siempre que se reciban con posterioridad al DUA correspondiente, pero es posible enviarlas, en cuyo caso se darán de alta con la siguiente información:

- clave tipo de factura "F1"

####### **Caso 3 - Factura de transitario (Varios DUAS)**

F&B España recibe una factura de transitario, acompañada de tres DUAS que corresponden a diferentes partidas de mercancía importadas. Con posterioridad, recibe la factura del proveedor extranjero.

La forma de registrar en Etendo la factura de transitario que incluye varios documentos referentes al IVA liquidado en la aduana de destino es la siguiente:

- en la ventana "**Factura (Proveedor)**" creamos una nueva factura de compra, y seleccionamos el "Transitario" en el campo "Tercero".  
  Introducimos en el campo "Referencia del Proveedor", el número de factura del transitario.
- en el grupo de campos "**AEAT SII**" introducimos la siguiente información:
  - **fecha de operación**, si es distinta de la fecha factura del transitario
  - **clave tipo factura** como "**Importación (DUA)**" (F5)
  - seleccionamos la "**Descripción SII**" correspondiente
- en este escenario no rellenamos los campos "**Import (DUA)**" de la cabecera, ya que los datos **número de DUA** y **fecha de admisión del DUA** los vamos a asociar a la línea de impuesto correspondiente al IVA liquidado en aduana.  
  Para ello activamos el check "**Múltiple DUA**" que va a permitir introducir líneas sin haber informado los campos anteriores.
- en la pestaña "**Lineas**" introducimos la prestación de servicios del transitario sujeta y no exenta, en euros, con una base imponible de 700 €, por ejemplo; así como el resto de líneas de la factura del transitario por conceptos exentos de IVA del tipo "seguro" o "flete".
- en la pestaña "**Impuestos**" creamos tantas líneas de impuestos como DUAS, con el tipo de impuesto "Importaciones 21%" o "Importaciones 10%" con la siguiente información:
  - en el campo "Base Imponible" introducimos la base imponible de importación, reflejada en la casilla 47 del DUA.
  - el **número de DUA**
  - la **fecha de admisión del DUA**, que aparece en el DUA en la sección "Control por la aduana de destino"

####### **Caso 4 - IVA de importación Diferido (sólo un DUA)**

El diferimiento del IVA de importación permite que las empresas importadoras puedan incluir las cuotas de IVA devengadas en las importaciones en el Modelo 303 mensual de autoliquidación del IVA, como un parámetro de entrada, sin necesidad de anticipar el ingreso de dicho IVA en la aduana. La cuota de IVA se liquida en la aduana pero su pago se pospone al momento de liquidar el impuesto.

Hacienda pone a disposición de las empresas importadoras un servicio de [_Agencia Tributaria: Cómo consultar el IVA importación con diferimiento de pago_](https://sede.agenciatributaria.gob.es/Sede/ayuda/consultas-informaticas/presentacion-declaraciones-ayuda-tecnica/consulta-iva-importacion.html){target="_blank"} para su liquidación en el Modelo 303 mensual correspondiente.

En estos casos, no se registra factura de transitario, pero si DUA y, por tanto, el DUA, esto es la deducibilidad del IVA de importación soportado, debe registrarse en Etendo junto a la factura del proveedor extranjero de la siguiente forma:

- en el grupo de campos "**AEAT SII**" introducimos la siguiente información:
  - **fecha de operación**, si es distinta de la fecha factura del transitario
  - **clave tipo factura** como "**Importación (DUA)**" (F5)
  - seleccionamos la "**Descripción maestro SII**" correspondiente
- en el grupo de campos "**Import (DUA)**" introducimos:
  - el **número de DUA**
  - la **fecha de admisión del DUA**, que aparece en el DUA en la sección "Control por la aduana de destino".
- en la pestaña "**Líneas**" introducimos en euros los conceptos incluidos en la factura del proveedor extranjero relacionados con tipos impositivos del tipo "Importaciones 21%=0%".

Finalmente, el usuario de forma manual, deberá realizar los cambios que se indican a continuación, en la pestaña "Impuestos":

- creación de una nueva línea relacionada con el impuesto "**Importaciones 21%**", con el fin de reflejar la base imponible (casilla 47 del DUA) y, por tanto, el IVA de importación correspondiente.
- creación de una nueva línea relacionada con el impuesto "**Importaciones 21%=0%**", con una base imponible y cuota negativa del mismo importe que la anterior, para evitar duplicar la base imponible.

Hay que tener en cuenta que el importe del DUA vendrá indicado en euros. No es posible mezclar líneas en diferentes divisas en la misma factura, por lo que al introducir la factura de proveedor extranjero junto al DUA deberá existir una única divisa en euros.

![](https://docs.etendo.software/latest/assets/drive/hQRaZcDRImXLJ1uxBUsDD45E2fdO1ljdl_vdmoJYdQ3zxWNLNCDwiU6Nl2mXF2XA92JGyxnwkfXlOuiK9uIEv0pjGxeQF1d_jzYdZTsoreulXX2HU3ExUFsjQQE7l2td1kyuZEfOZ5LLB7nOblD44Fg.png)

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá únicamente la información de la parte correspondiente al DUA con la siguiente estructura:

![](https://docs.etendo.software/latest/assets/drive/41ktdG4IiR4yFuhrvP8jBdJPBedtzT2ibeHHHiiznkxlcR7S9cV2ZEqEbz42RLvmRO7QUkOKEJSz2D0QBGGdR_DAAwX4DtZUateDK6RV-PUIn_kcGyfdlI9t6m2jQsbfXcF0KOHytWPSLapBl_-yh_E.png)

_Al introducir la línea de impuestos del tipo "Importaciones 21" referido al IVA de importación soportado, no hay que volver a introducir esta línea en la factura del transitario si en su caso la hubiera._

_En tal caso, al registrar la factura del transitario independientemente sólo habría que indicar las líneas correspondientes a dicha factura indicando como Clave tipo factura = Factura (F1)_

###### **Tercero (Proveedor) Intracomunitario**

Factura recibida por una adquisición intracomunitaria de bienes y servicios.

La empresa F&B España compra una partida de mercancía de un país comunitario.

Dicha compra incluye también la prestación de un servicio que presta el mismo proveedor intracomunitario. Dicho servicio se localiza en TAI (Territorio de aplicación del impuesto).

La empresa F&B España recibe la factura de fecha 27-11-2017, con fecha 30-11-2017, registrando dicha operación contablemente ese mismo día. La operación se realizó con fecha 15-10-2017.

En este caso al ser la fecha contable de la factura posterior al 16-11-2017, habiéndose realizado ésta en octubre, se incluirá en el Modelo 303 de noviembre.

La fecha límite de registro y envío al SII es el 14 de diciembre, contando a partir del registro contable de la factura (30-11-2017) y teniendo en cuenta los festivos nacionales (6 y 8 de diciembre).

Al registrar esta factura en Etendo, los tipos de impuestos que se seleccionan por defecto serán del tipo:

- Adquisiciones intracomunitarias 21% (para la adquisición de la mercancía)
- Inversión Sujeto Pasivo UE 21% (para la prestación del servicio y localización del mismo en España).

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave régimen especial "09" (Adquisiciones Intracomunitarias de bienes y prestaciones de servicios)

![](https://docs.etendo.software/latest/assets/drive/mMuCVKFYyjCifvhuXcjK52_gRt7sDUvQu_W3ZOzNLJ_zm12hQcpGkPR4j1PSFUkeZiGGL2YdbtiiGZHYX-g63Wa8O0w275WkSQaoHvu5nt3ykRCXDw876iQBgNdTCtMJulXfB2J3WrmNFsuck8I74UI.png)

Es importante recalcar que:

- si la factura de compra intracomunitaria incluye más de un bien al mismo/distinto tipo impositivo, en el XML la información se mostrará agrupada por tipo impositivo, dentro del nodo "DesgloseIVA/DetalleIVA"
- si la factura de compra intracomunitaria incluye más de un servicio al mismo/distingo tipo impositivo, en el XML la información se mostrará agrupada por tipo impositivo, dentro del nodo "InversiónSujetoPasivo/DetalleIVA"

###### **Organización/Operación acogida al RECC**

F&B España se encuentra acogida al régimen especial de criterio de caja, o bien se ve afectada por este régimen al recibir facturas de compra de algún proveedor nacional acogido al criterio de caja.

Al registrar este tipo de factura de compra en Etendo, los tipos de impuestos que se selecciona por defecto serán del tipo:

- Adquisiciones IVA 10% IVA de Caja.
- Prestación servicios nacional 21% IVA de Caja.

Al igual que en las facturas de venta con IVA de Caja, la información de estas operaciones se suministrará en los plazos generales como si a las mismas no les hubiera sido de aplicación el régimen especial.

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave régimen especial "07" (Régimen especial del criterio de caja)

![](https://docs.etendo.software/latest/assets/drive/mO8mH-cFpIjIEhf7x8OIEFtgg6cbSDoi6Bma3vizcThfAP1A4BFdemNNaydfBiIG2WQkpsNn83DjhVPR5bqoAsDkk0sG6fqOpuvGn3KMcgyvVjq_DtdjZVdVOxAuWLzq3UfxQbIy794DJKj219pOy6M.png)

Es importante recalcar que:

- si la factura de compra nacional incluye más de un bien/servicio al mismo/distinto tipo impositivo de IVA de Caja, en el XML la información se mostrará agrupada por tipo impositivo, dentro del nodo "DesgloseIVA/DetalleIVA"

###### **Pagos de facturas en RECC**

Los pagos totales o parciales de facturas en RECC deben darse de alta en SII en el momento de producirse.

Desde la ventana "Monitor SII" podemos filtrar por el número de pago y proceder a su envío a SII.

Una vez dado de alta en SII, el XML generado informa de los siguientes datos del pago, referenciados al número de la factura de compra:

- **Fecha**
- **Importe**
- **Medio**

![](https://docs.etendo.software/latest/assets/drive/pTf6aP4P4yYSU7eESj_WiuFr1XYE_4hk8WEz5XcZ6g8pe7TApPwnYGTNX201Hfibrhyjd09RryZ8HEAJp0kROlrZP-88pas8JvfcfbY6wHWI-I8H0gOWndeLzJf9r23nigKinsyKyPNVnc3ew_RAUyA.png)

El Medio que en nuestro ejemplo es el 02 (Cheque), debe configurarse en el Método de Pago, campo "**Type**".

**Anulación de pagos**

En el caso de los libros registro de pagos en RECC no se utilizará el tipo de comunicación A1 de "Modificación de facturas/registros por error registral".

La modificación de un pago en RECC ya dado de alta en SII se efectuará enviando el pago que se pretende anular en negativo.

Lo anterior implica que en Etendo, al igual que se ha explicado para los cobros en RECC, no podremos reactivar un pago en RECC dado de alta en SII, si no que tendremos que revertirlo, con la opción "Revertir pago".

Al revertir el pago, Etendo genera un nuevo pago por el mismo importe en negativo que tendremos que dar de alta en SII desde la ventana "Monitor SII", tal y como se muestra en la siguiente imagen:

![](https://docs.etendo.software/latest/assets/drive/1aPMk2pmJYGzATaN_B1dI0Ri4wunDMRoW.png)

El XML generado contendrá la siguiente información:

- el importe de pago negativo
- referencia a la factura original del proveedor.

![](https://docs.etendo.software/latest/assets/drive/y6EpMi-6Kruil15GnhETYhDk_slSzWNJ9PON68Q7NnT5k1DkUiqK7izhcAOMC7Hrg5bpI3V2elPMiHTUhsCNIYVca7tBMjhr6Uytqd_Bt9Wa6_JEtOfigV6nZjbIU4rknuZoYjqOXuk1Bg_X0RSSioI.png)

**Facturas en RECC no pagadas en el año natural** (en desarrollo).

Como parte de la funcionalidad del RECC, Etendo permite la "liquidación manual del IVA de Caja" para aquellas facturas en RECC que no fuesen pagadas total o parcialmente antes del 31 de diciembre del año posterior al año de su expedición, produciéndose así el devengo del impuesto.

Por tanto, las facturas en RECC de fecha 2017 que no estén pagadas a 31-12-2018, tendrán que enviarse a SII en dicha fecha, y con la siguiente información:

- **Fecha** (de pago) = 31-12-2018 (fecha de la liquidación manual del IVA)
- **Importe** = importe pendiente de pago de la factura
- **Medio** = 03 (No se cobra/No se paga)

Desde la ventana de "Liquidación manual del IVA de Caja" será posible enviar estas liquidaciones manuales a SII, con fecha 31 de diciembre del año posterior al año de su expedición (devengo del impuesto).

###### **Compensaciones en las adquisiciones a personas acogidas al REAGYP**

Cuando se realicen operaciones por las que se satisfacen compensaciones agrarias del REAGYP se utilizarán impuestos específicos que por su naturaleza estarán configurados como REAGYP = SI.

Este tipo de impuestos de compensación agraria, están relacionados con las siguientes categorías de impuestos de terceros:

- Régimen Especial Agrario sobre "bruto" (IVA Incl.) (12%)
- Régimen Especial Agrario sobre base imponible (12%)
- Régimen Especial Agrario sobre base imponible (10,5%)

Al registrar este tipo de factura de compra en Etendo, en función del Tercero (Proveedor) seleccionado y su categoría de impuestos de tercero, los tipos de impuestos aplicables serán los siguientes:

- "Compensación REAGYP 12% -2%R (sobre bruto) SR", al calcularse el importe de la retención en el importe bruto, incluida la compensación.
- "Compensación REAGYP 12% -2%R (sobre BI) SR", al calcularse el importe de la retención directamente sobre la base imponible
- "Compensación REAGYP 10.5% -2%R (sobre BI) SR", al calcularse el importe de la retención directamente sobre la base imponible

F&B España S.A. compra una partida de mercancía a un proveedor nacional con un porcentaje de compensación del 12%. La compra se efectúa el 4 de septiembre, fecha en la que se expide la factura, recibiendo la misma cuatro días más tarde, el día 8. La empresa procede a su registro contable el día 11 de septiembre.

- Fecha de Operación: 4 de septiembre de 2017
- Fecha expedición de factura de venta: 4 de septiembre de 2017
- Fecha factura de compra: 4 de septiembre de 2017
- Fecha registro contable: 11 de septiembre
- Fecha límite de alta en SII: El plazo para emitir el registro es el 21 de septiembre, 8 días naturales desde la fecha del registro contable.

Además, este tipo de operación debe marcarse como una factura Tipo Justificante contable "F6".

Una vez completada la factura, se procede a su Alta en SII, de forma manual o automática.

![](https://docs.etendo.software/latest/assets/drive/wud2a7NpPuk_Q-UxAlIHJUjblYTHj5NyUT8K2j5mhNIWHEbsLzYEK98yd8peDWvhmzXgTRss4hXNpJqe3TcWWx0MySWmd2M6VcZMcCioQnWVYOUrVQyNGuLTtm0fPBa9dJ9nalvW2oBwWPH6CEbYT38.png)

El XML de alta en SII contiene la siguiente información específica de este tipo de operación:

- Tipo de Factura "F6" (Justificante contable)
- Clave régimen especial "02" (Operaciones sujetas a REAGYP)
- Porcentaje Compensación REAGYP
- Importe compensación REAGYP

Consignará como **Base Imponible** la base sobre la que se calcula la compensación; como **Importe total** de la factura asignará el importe total de la contraprestación.

Al no ser un impuesto de IVA, los campos _tipo impositivo_ y _cuota soportada_ no se informarán.

![](https://docs.etendo.software/latest/assets/drive/Aq-l5YH6S7ULiAFSK3xuSLR-ILBVh9mf-5nulQEGy7OQ9eAsi33K7Op31vjxp_QgXSe-zzjJkqVpWTslEHmMwTioPISRFsNrGcMRQUS4PKGUdr6Or8EcKZ30aavNtKW6BvRk3ncCf6BTZ2p_A7DdUaA.png)

En este régimen, podría producirse "autofacturación", es decir el receptor de la operación realiza la emisión de la factura en nombre del proveedor.

Para esos casos se ha creado el check "**Autofactura**" en el grupo de campos "AEAT SII" de la cabecera de las facturas de compra, que permite que el "Nº de Documento" de factura de Etendo se traslade al campo "Referencia de proveedor", tal y como se muestra en la imagen adjunta:

![](https://docs.etendo.software/latest/assets/drive/kVdQsySjrBFfrCYtwfJcPCfQMeNJBmZnZJTnnuVdNPZbq5xZ1_7wpSwMcu8xqeJUCs6ctB1MmFhRPWVpZQwxA2C53rni_TYzg8NvsYv_CvI9C4mS0Ie17IGB8YIn5EPls_HN11zCuvtSDvfvlKTIVEs.png)

###### **Operación de compra sujeta a IPSI/IGIC**

F&B España S.A. compra una partida de mercancía en Canarias a un proveedor localizado en Canarias:

- La mercancía no se transporta a TAI, se queda en Canarias
- además la operación de compra incluye la prestación de un servicio que se localiza en Canarias y que por tanto también está sujeta a IGIC.

La compra y prestación del servicio se efectúa el día 15 de julio, con esa misma fecha se expide la factura, recibiendo la factura el día 26 de julio. La empresa procede a su registro contable el día 2 de agosto.

- Fecha de Operación: 15 de julio de 2017
- Fecha expedición de la factura de venta: 15 de julio de 2017
- Fecha factura de compra : 15 de julio de 2017
- Fecha Contable: 2 de agosto de 2017
- Fecha límite de alta en SII: El plazo para emitir el registro es el 14 de agosto, contando 8 días naturales desde la fecha del registro contable.

Al registrar este tipo de factura de compra en Etendo, los tipos de impuestos que se deberán seleccionar serán del tipo:

- Adquisiciones IGIC 9.5%
- Prestación servicios en Canarias 9.5%

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave régimen especial "08" (Operaciones sujetas al IPSI / IGIC)

![](https://docs.etendo.software/latest/assets/drive/4Uai4_Y5oJDKR3tpXAPMEsJbk-D7Dd7z6tNf8OppThhAN-RpmxWBPqy24eVOrsRymKC-gG7dqkPr9Q7L0BlLiCvUvxuqRR-aqNVdGrtcg4ZXmCb4W-GTLLiLbLeaASfDoYu8DpMGkP44lSGmPTT7KPY.png)

Es importante recalcar que:

- si la factura de compra incluye más de un bien/servicio al mismo/distinto tipo de IGIC, en el XML la información se mostrará agrupada por tipo impositivo, dentro del nodo "DesgloseIVA/DetalleIVA"

###### **Arrendamiento de local de negocio**

El arrendatario del local de negocio se limitará a registrar la factura recibida por el arrendamiento en Etendo.

Incluya o no retención el arrendamiento, la factura se deberá dar de alta con la clave de régimen especial 12.

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave 12 (Operaciones de arrendamiento de local de negocio.)

![](https://docs.etendo.software/latest/assets/drive/qTvK0Nls1j9WXhnmg_GjDdVSJ3f1SoSM2ZQ4HDVfH2PJxTHz1RbsB1-SVuGGtT7lsMY0uYAwxZwqYl4TXTpqYE-JqZp8YVnZRpp4i2wH39PvRWoCi5OvgM9XfH7jHAis1XGEejjA7EqIwaNeZG30-zI.png)

!!! info
    Si una factura de arrendamiento está sujeta al régimen especial del criterio de caja, prevalecerá la clave 07 de Operación Sujeta a RECC.

###### **Gastos de personal no declarables**

En el caso del registro de facturas de compra a empleados de la organización, por gastos de personal tales como dietas, se debe tener en cuenta lo siguiente:

- los empleados de la organización que incurran en gastos a reembolsar, tienen que tener la categoría de impuestos de tercero “No declarable SII” asociada.
- los gastos (productos de tipo “Gasto”) tienen que estar relacionados con el grupo de impuesto “No Sujeto Servicios”

en ese caso, las facturas de compra creadas en la organización para el reembolso de gastos a dichos empleados, se crearán con el rango de impuesto “No declarable gastos de empleado".

El registro de estas facturas de compra no se enviarán a SII, en ningún caso.

Una vez completada, si intenta enviar dichas facturas a SII se obtendrá el siguiente error:

![](https://docs.etendo.software/latest/assets/drive/_50ZEl68hydwoSJZ27J5MrhxojDwPXnaTWRNM9OWNzJmoTTVcZBYBS70S5U82w9QE3Ln8r9EGQ_WXOeyV1mNNwRXp0Ym2gZIsgph7RVck2vAedl5DiyWn826OZtexzPRKEErqUuE6jwnd0x54Ybc604.png)

###### **Inversión del Sujeto Pasivo**

**Caso 1 = Inversión Sujeto Pasivo - Proveedor Extranjero**

La empresa F&B España adquiere de un proveedor extranjero una prestación de servicios que se localiza en TAI. Este proveedor se encuentra localizado en USA y tiene asociada una tarifa de precios en dólares.

Al registrar esta factura de compra los impuestos utilizados serán del tipo:

- Inversión Sujeto Pasivo no UE 21%.

El importe de la operación en dólares es de 500.00 USD, con un contravalor en EUR de 446.62, ya que:

- será posible utilizar el tipo de conversión según la fecha de factura configurado a nivel de sistema en la ventana "Rangos de conversión"
- o bien, el "Tipo de cambio" introducido en la propia factura de compra.

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave regimen especial "01" (Régimen General)
- con información en "EUR" de la base imponible, tipo impositivo y cuota del impuesto dentro del nodo "Desglose Factura/InversiónSujetoPasivo/DetalleIVA".

![](https://docs.etendo.software/latest/assets/drive/hrEpwYN4FiCksO7FAiQzwIZ39yOlBukNGoPtMKYvmdpGF5IXO1D_urMrMfXKD0t8aCcJlw8KCHM5J6q1gV3Ug9Y0L_e5M16s2AVszoG0iK1jOvBmI29xB45RE56Ce3d-LIK9NwdVgQT9WAoH6AxssRE.png)

Es importante recalcar que si este tipo de facturas incluyen más de un tipo impositivo igual/diferente respecto de la prestación del servicio, se agrupará por tipo impositivo dentro del nodo "Desglose Factura/InversiónSujetoPasivo/DetalleIVA".

**Caso 2 = Inversión Sujeto Pasivo - Proveedor Nacional**

F&B España recibe una factura de otro empresario que emite su factura sin IVA por producirse dicha operación bajo la figura fiscal de "Inversión del Sujeto Pasivo", de modo que F&B España registra dicha operación a través de una factura de compra con Inversión del Sujeto Pasivo.

Al registrar esta factura de compra los impuestos utilizados serán del tipo:

- Inversión Sujeto Pasivo nacional 21%.

Una vez completada la factura, se procede a su Alta en SII, bien de forma manual o automática.

El XML de alta en SII contendrá la siguiente información:

- un tipo de Factura "F1"
- con clave regimen especial "01" (Régimen General)
- con información de la base imponible, tipo impositivo y cuota del impuesto dentro del nodo "Desglose Factura/InversiónSujetoPasivo/DetalleIVA".

![](https://docs.etendo.software/latest/assets/drive/3da4kENkcjtstpllmIbdw0WajedAkdQIXOaDaagog0swox0L6wRRShSz49ALoQUizqHVOHueaLugaUmJMsC0uIrFnHxVM4uKal40DBmzs143qQSoZ0iiWf-6KfE8-68P6bM1u2P9K07zORWCNzsUwxA.png)

###### **Factura recibida con fecha contable anterior al 01-07-2017**

Respecto de las facturas recibidas antes del día 01-07-2017, existe también la obligación de su alta en SII, pero con un esquema XML con las siguientes particularidades:

- **Clave de régimen especial** = 14 (Primer semestre 2017).
- **Descripción de la operación**: “Registro del Primer semestre 2017”.

Y, en el caso de las facturas recibidas:

- la "**Fecha registro contable**" será la fecha del envío o alta en SII
- y la "**Cuota deducible**" se fija a 0.00

Lo anterior aplica excepto para sujetos pasivos en REDEME que ya las habrán enviado en el Modelo 340 correspondiente.

En Etendo, al dar de alta en SII una factura recibida con fecha anterior al 01-07-2017, comprobaremos que el esquema XML es del tipo siguiente:

![](https://docs.etendo.software/latest/assets/drive/zt8vxem5cYRQdfY3JQx8syUeoOnxML5LP-obvW0mPL9cfBSER1CL7cMmMUwuWdC33x9F4qsfeI56hCUmnkXN0Y2q-N-tDqAFQD8kp-6U5EVa3vhdokk9P9cckJmUv2D9STo_Orr-eejl2_5Yb8ZcViw.png)

En Etendo se ha desarrollado un proceso "background" que adapta las facturas de venta del primer semestre para que puedan darse de alta en SII.

Este proceso se denomina "**Proceso de adaptación a SII de Facturas de Compra del primer semestre de 2017**" y configura dichas facturas con:

- la clave tipo factura **"Factura" = "F1"**, en el caso de facturas de compra positivas y negativas
- o **"Importación (DUA)" = "F5"**, en el caso de facturas de compra que incluyan un impuesto del tipo "Importaciones", en la pestaña "Impuestos".  
  En estos casos el usuario final tendrá que informar los campos "**DUA**" y "**Fecha DUA**", antes de dar de alta en SII dichas facturas.
- añade la descripción tipo "**Registro del Primer semestre**"
- e indica como "**Fecha de operación**" la fecha de la factura tal y como requiere la AEAT.  
  El usuario siempre podrá revisar la configuración otorgada a dichas facturas antes de darlas de alta en SII

Al dar de alta en SII la factura de compra del primer semestre ya adaptada por el proceso, se informará el campo "**Fecha registro contable**" con la fecha de alta en SII.

La ventana "Monitor SII" incluye también una pestaña "Facturas de Compra Primer Semestre 2017" desde dónde se pueden gestionar estás facturas, una vez configuradas de forma correcta por el proceso.

###### **Factura recibida con IVA soportado no deducible**

Etendo permite la configuración de impuestos de compra no deducibles, tal y como se muestra en la siguiente imagen.

![](https://docs.etendo.software/latest/assets/drive/Qu8LkkDz0cuEFwv-abefDr6gMz7pBewViFk3FdE9eOSzKvZAwucoYjgDvD4zckjxG--t75cmEUxloTFi8SDuureO55V5W1XY9Xbdc3EE0TKG4LW87ZOM3DZ_Rzq7ZJXozBXIRVNwNyBAL8la_J4LTJU.png)

Las facturas de compra que incluyan ese tipo de impuestos, tendrán que darse de alta en SII, tal y como se describe a continuación:

- en la etiqueta "Cuota Soportada", se refleja la cuota soportada
- y en la etiqueta "Cuota Deducible'', se refleja un "0".

![](https://docs.etendo.software/latest/assets/drive/gpb9xZr8kbpoaTim4gGCbBGzKjz393sov8TOW8yBBqIMYfJ-4-vO9ZjaIBP6PDtFc5YiYJd8sDYupg4PeWM0dHltwqIczfMO_XxzbsCPXD-IJLEYZPyN850pc7lbBaeFBGnfZgtGEtysZ28nPehDpt8.png)

En el caso de impuestos que incluyan parte deducible y parte no deducible, la información a enviar será tal y como se muestra en la siguiente imagen:

- en la etiqueta "Cuota Soportada", se refleja la cuota soportada
- y en la etiqueta "Cuota Deducible'', se refleja el importe de esa cuota que sea deducible.

![](https://docs.etendo.software/latest/assets/drive/itUfZLKo8uBuD5Cv1_2yx5gKK7-0cSLb0MbxoEccSV_OAov_gQtTJL7Q69Inaw8SJm-moaZwoa-N2nqPwxe4SHtAQyEGu4rT5eQbemFSyUzWWYNEMzkDxRzD-nGiBFw0dhNQB1sSZKAPYyShYSA1a1k.png)

##### **Informes de comprobación SII (Consultas)**

Desde la ventana “**Consulta Facturas SII**” es posible establecer una comunicación inmediata con la AEAT. En esta comunicación, la AEAT proporciona un listado informativo de las facturas emitidas y recibidas en SII con estado “Correcto”.

Esta información es básica para poder conocer el proceso de contraste de los LFRE y LFRR.

![](https://docs.etendo.software/latest/assets/drive/7ntfirTf-NO6P8Tp-1jGiD2XKOkzSe-CanqYwZTIHgjMZ_d4oROIuvLTrf6suQ3pF50VOpJjyJoDs1Mpwxty4lBUkRL7F80m9ilSnh_Axoiv744HoOe-H2_4K7U9PenR41VVk0X-SdFZ5_a06wb7M70.png)

Seleccionando la organización que va a ser objeto de consulta, accedemos a través de “Nueva Consulta Facturas a SII” a una ventana emergente en la que filtraremos por diferentes criterios para obtener la correspondiente relación de facturas.

Los diferentes criterios que se pueden aplicar para seleccionar la información a consultar a la AEAT, son los siguientes:

- **Libro de facturas**
  - Emitidas
  - Recibidas
- **Ejercicio**: carácter anual.
- **Periodo**: carácter mensual.  
  Este periodo se refiere a la fecha de emisión de la factura.
- **Fecha presentación (desde)**
- **Fecha presentación (hasta)**
- **Estado de cuadre SII**: Una vez validado el envío de facturas presentado, de forma casi inmediata se procede a ejecutar el proceso de contraste, cuyo primer paso es tipificar la factura como contrastable o no:
  - **No contrastable**: implica que nunca va a ser contrastada. Esta circunstancia se va a producir cuando el emisor o receptor no está en el sistema SII. En estos supuestos no se va a disponer en el sistema de posibilidad de contrastar esa información. Si la factura no resulta contrastable, la factura permanece en el estado “No contrastable” y no se intenta su cuadre. Ejemplos: las facturas simplificadas o las facturas cuya contraparte no aplica el SII.
  - **Contrastable**: comprobada la posibilidad de efectuar el contraste, se procede a determinar si esa información de registro remitida por una parte ha sido remitida por la contraparte. Los estados resultantes pueden ser:
  - **No contrastada**: No está la factura de la contraparte dada de alta en SII.

Si no se localiza la factura queda en estado de **no contrastada.**

Si la factura se localiza en el sistema, se ejecuta un proceso adicional para contrastar la información contenida en ambos registros remitidos por las partes:

- Si coinciden los criterios de contraste que se determinen, se considera **Contrastada**.
- Si no coinciden todos ellos será **parcialmente contrastada**. En este último caso, se proporcionará al contribuyente los resultados de contraste no coincidentes para su revisión.

Para poder efectuar la consulta, será obligatorio completar los campos: _Libro de facturas, ejercicio y periodo_.

Tal y como se muestra en la siguiente imagen, obtenemos un listado actualizado según los filtros establecidos anteriormente, ya que una organización acogida a SII podrá consultar los datos enviados (Libros registro declarados) desde la ventana "Consultas Facturas SII"

![](https://docs.etendo.software/latest/assets/drive/FTSFjSPwCBgmtGl6WUOV-8tWW64aCeDEpEzCAWGKk4ISvRPZveZSbdG7kMVRrTmZpqm6ZGeKxdB-NN-DBH6bb36VKP-BvRtFQFemHI8AuchI7eH3SG2Dm9aXRAioiXgsZvfXWzGKy8U3wSaPlPxG8UU.png)

==ARTICLE_END==
==ARTICLE_START==
# Article Title: TicketBai y Batuz
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Spanish Localization Bundle/TicketBai y Batuz
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/spain-localization/ticketbai-batuz
## Article Content: 
#### Javapackages 

:octicons-package-16: Javapackage: `com.smf.ticketbai`

#### Introducción

Las funcionalidades de **TicketBai** y **Batuz** en Etendo ofrecen una solución integral para el cumplimiento de las normativas fiscales en el País Vasco, orientado a garantizar la **transparencia**, **reducir el fraude fiscal**, y **asegurar la correcta emisión de facturas** electrónicas certificadas.

**TicketBai** es obligatorio para las empresas y profesionales que **operen en Gipuzkoa y estén sujetos al IVA o IAE**, mientras que **Batuz** se centra específicamente en **Bizkaia**, incluyendo además del sistema TicketBai, el Libro Registro de Operaciones Económicas (LROE).

A través de este módulo, Etendo facilita la **automatización de procesos** clave como la **emisión**, **validación** y **envío en tiempo real** de facturas a las haciendas forales. El sistema garantiza la trazabilidad de las transacciones mediante la firma electrónica de las facturas y la transmisión telemática a las autoridades fiscales.

#### Descripción del Módulo

El módulo permite:

- Enviar **automáticamente** los archivos XML con las facturas a las haciendas forales (Gipuzkoa o Bizkaia).
- Recibir los XML de respuesta con la confirmación del envío de las facturas.

La implementación cubre:

1. **Cumplimiento** de las normativas fiscales tanto para TicketBai como para Batuz.
2. **Automatización** del envío de facturas emitidas a la administración tributaria.
3. **Gestión de procesos** como el registro de facturas en TBAI y el registro de facturas de compra en Batuz.
4. **Historial** de todas las facturas enviadas a las administraciones tributarias.
#### Contenido del Módulo


Al instalar este módulo, el usuario podrá comprobar que:

1. Se crearán nuevas ventanas:

    - **Configuración TBAI**, donde se podrán configurar todos los parámetros necesarios para el envío correcto de los registros de facturas a **TicketBai/Batuz**, incluyendo los destinos **Gipuzkoa** y **Bizkaia**.

    - **TBAI Facturas Enviadas**, donde se podrá revisar el historial completo de todas las facturas enviadas tanto a **TicketBai** como a **Batuz**.

2. Se crean **nuevos campos y pestañas** relativos a TicketBai/Batuz en la ventana de **Factura (Cliente)** y **Factura (Proveedor)**, para añadir la información requerida por estos sistemas para el registro de las facturas.

3. Se añade un botón en las ventanas de **Factura (Cliente)** y **Factura (Proveedor)**, con el fin de registrar las facturas de manera electrónica:

    - **En Factura (Cliente)** para Registrar factura en **TicketBai**.
    - En **Factura (Proveedor)** para Registrar factura en **Batuz**.

4. Se generan nuevos procesos en la ventana **Procesamiento de Peticiones**, denominados:

    - **Registrar facturas en TicketBai**, configurables para cada Organización o "Entidad Legal", permitiendo el alta masiva de facturas en TicketBai con la cadencia de envío configurada.

    - **Registrar facturas en Batuz**, para registrar facturas de compra en Batuz, también configurables para cada Organización o "Entidad Legal", permitiendo el alta masiva con la cadencia de envío configurada.

#### Configuración

##### Dataset

Una vez instalado el módulo, será necesario aplicar el dataset proporcionado para completar la integración de TicketBai/Batuz. Para ello, siga los siguientes pasos:

1.  Acceda a la ventana "**Gestión del módulo de Empresa**".

2.  En esta ventana, seleccione el dato de referencia "**TicketBai Integration**".

3.  Aplique este dataset a la organización *****


![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/tbai/dataset.png)

A continuación, si el proceso se ha ejecutado correctamente, el sistema mostrará una pantalla similar a la siguiente:

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/tbai/successful_dataset.png)

Este dataset proveerá los datos necesarios para gestionar el envío de facturas a Gipuzkoa y Bizkaia.

##### Configuración TBAI

La ventana de Configuración TBAI le permitirá ajustar los parámetros necesarios para comenzar a enviar facturas a través de TicketBai o Batuz. A continuación, se describen los campos principales a configurar:

- **Organización**: Seleccione la organización o entidad legal que será responsable del envío de los registros de facturas.

- **Destino**: Elija el destino Gipuzkoa o Bizkaia previamente creado por el dataset.

- **Fecha Acogido TBAI**: Especifique la fecha en la que la organización se acoge al sistema TBAI.

- **Entorno de producción**: Seleccione esta opción si los registros de facturas deben ser enviados al entorno productivo. Si está realizando pruebas, desmarque esta opción para usar un entorno de test.

- **Descripción de Facturas**: Indique el texto que se incluirá en el campo **DescripcionFactura** del XML enviado.

- **Utilizar descripción también para nombre de producto**: Si está activado, se usará el valor de DescripcionFactura en el campo **DescripcionDetalle** del XML de la factura.

- **Auto enviar facturas al completarse**: Active esta opción si desea que las facturas se envíen automáticamente cuando alcancen el estado de "Completado".

- **Ruta de Reporte Jasper**: Especifique la ubicación de la plantilla Jasper que se utilizará para imprimir el reporte de la factura.

- **Validar factura anterior**: Active esta opción para que el sistema verifique si la factura anterior fue enviada correctamente antes de enviar la actual. Si no fue enviada, se mostrará una advertencia y se cancelará el envío.

- **NIF**: Ingrese el NIF del emisor de la factura.

- **Nombre y Apellido del Emisor de Certificado**: Información requerida para el certificado que se adjunta en la configuración.

- **Contraseña del certificado**: Introduzca la contraseña del certificado adjunto.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/tbai/tbai_conf.png)

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/tbai/tbai_config_bizkaia.png)

*No olvide adjuntar el certificado necesario.*

##### Rango de impuesto

Al configurar los impuestos en el sistema, es importante completar correctamente los campos relacionados con los **regímenes de IVA** y las **causas de exención o no sujeción**. Estas configuraciones se realizan desde la ventana **Rango de Impuesto**. A continuación, se detallan los campos que deben ser completados según cada caso:

1. **Clave de Régimen Especial de IVA**
    Este campo debe completarse cuando se aplique un régimen especial de IVA. Esto permitirá que el sistema identifique el régimen aplicable en las facturas enviadas.

    *Condición de visualización: Se muestra si no aplica exención y no sujeción.*

2. **Causa de No Sujeción**
    Este campo debe completarse en aquellos casos donde el impuesto no esté sujeto a IVA. Este campo es necesario para facturas que no están sujetas a impuestos por alguna razón específica.

    *Condición de visualización: Se muestra cuando no está sujeta a impuestos*.

3. **Causa de Exención**
    En los casos donde la factura esté exenta de IVA, se deberá seleccionar la causa de exención. Este campo es obligatorio cuando la factura está exenta de impuestos y debe justificar dicha exención al enviar los datos.

    *Condición de visualización: Se muestra cuando la factura está exenta de impuestos*.


##### TBAI Facturas enviadas

En la ventana de **TBAI Facturas Enviadas**, es posible visualizar todas las facturas que han sido enviadas desde la organización en la que está trabajando. Esta herramienta permite llevar un control detallado de los **envíos realizados**, facilitando la **gestión** y el **seguimiento** de las facturas que se han transmitido a través del sistema TicketBai o Batuz.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/tbai/sent-invoice.png)


##### Secuencia de encadenamiento para TBAI 

Antes de realizar el primer envío de facturas, es esencial configurar correctamente el tipo de documento de las facturas que se enviarán.

1. Acceder a la ventana "**Tipo de Documento**": En este registro encontrará un campo denominado "**Secuencia de Encadenamiento para TBAI**". Este campo es clave para llevar un control preciso de las facturas que ya han sido enviadas o que se ha intentado enviar.

2.  Crear una nueva Secuencia de Encadenamiento para TBAI:

    - Ingrese un nombre apropiado en el campo "**Name**".
    - Active la opción **Auto Numbering**. No es necesario modificar los campos adicionales que aparecerán tras activar esta opción.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/tbai/tbai_sequence.png)


#### Proceso de Envío de Factura

=== "TicketBai"
    1. Creación de Factura de Venta
        
        Para iniciar el proceso, cree una factura de venta utilizando una organización que tenga configurada la opción de TicketBai. Esta configuración se realiza desde la ventana de "**Configuración TBAI**" en el sistema.

    2.  Registro de Factura en TicketBai

        Una vez completada la factura, se habilitará un botón titulado "**Registrar Factura en TBAI**". Al presionar este botón, se iniciará el proceso de envío de la factura a la plataforma TicketBai.
        ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/tbai/register_invoice.png)

    3.  Resultado del Proceso

        - Si el envío es exitoso, el sistema mostrará un mensaje de confirmación indicando que la factura ha sido registrada correctamente en TicketBai.
        - En caso de error, se mostrará un mensaje con una descripción detallada del fallo, permitiendo identificar y resolver el problema.

        ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/tbai/successfully_sent.png)


    ### Detalle del Envío a TicketBai

    Además del botón para registrar la factura, existe una solapa denominada "**TicketBai**" dentro de la factura. Esta sección muestra información relevante sobre el proceso de envío de la factura a la plataforma TicketBai, incluyendo:

    -   **Estado del Envío**: Indica si la factura ha sido recibida exitosamente por la plataforma.
    -   **Descripción**: Proporciona información adicional sobre el estado del envío. En caso de error, esta descripción incluirá detalles específicos que ayudarán a identificar el problema.

    En la misma pestaña, se encuentra un apartado de **Adjuntos** donde se almacena la respuesta que TicketBai devuelve. Este archivo es generado en formato XML y contiene los detalles técnicos sobre el resultado del proceso de envío.

    ### Envío Automático 

    Dentro de la ventana "**Procesamiento de Peticiones**" se ha creado un proceso "**Registrar facturas en TBAI**", que puede configurarse para cada organización o entidad legal.

    Tal y como sucede con otros procesos de Etendo, éstos podrán configurarse para ser ejecutados de forma inmediata, planificada o programada con una cierta frecuencia, donde permitirán el alta masiva de facturas en Ticketbai con la cadencia de envío configurada.
    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/tbai/process_request.png)

=== "Batuz"

    1. Creación de Factura de Compra
        
        Para iniciar el proceso, cree una factura de compra utilizando una organización que tenga configurada el destino Bizkaia. Esta configuración se realiza desde la ventana de "**Configuración TBAI**" en el sistema.

    2.  Registro de Factura en Batuz

        Una vez completada la factura, se habilitará un botón titulado "**Registrar Factura en Batuz**". Al presionar este botón, se iniciará el proceso de envío de la factura a Batuz.
        ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/tbai/register_invoice_batuz.png)

    3.  Resultado del Proceso

        - Si el envío es exitoso, el sistema mostrará un mensaje de confirmación indicando que la factura ha sido registrada correctamente en Batuz.
        - En caso de error, se mostrará un mensaje con una descripción detallada del fallo, permitiendo identificar y resolver el problema.

        ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/tbai/successfully_sent_batuz.png)


    ### Detalle del Envío a Batuz

    Además del botón para registrar la factura, existe una solapa denominada "**Batuz**" dentro de la factura. Esta sección muestra información relevante sobre el proceso de envío de la factura a Batuz, incluyendo:

    -   **Estado del Envío**: Indica si la factura ha sido recibida exitosamente por la plataforma.
    -   **Descripción**: Proporciona información adicional sobre el estado del envío. En caso de error, esta descripción incluirá detalles específicos que ayudarán a identificar el problema.

    En la misma pestaña, se encuentra un apartado de **Adjuntos** donde se almacena la respuesta que Batuz devuelve. Este archivo es generado en formato XML y contiene los detalles técnicos sobre el resultado del proceso de envío.

    ### Envío Automático 

    Dentro de la ventana "**Procesamiento de Peticiones**" se ha creado un proceso "**Registrar facturas de compra a Batuz**", que puede configurarse para cada organización o entidad legal.

    Tal y como sucede con otros procesos de Etendo, estos podrán configurarse para ser ejecutados de forma inmediata, planificada o programada con una cierta frecuencia, donde permitirán el alta masiva de facturas en Batuz con la cadencia de envío configurada.
    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/spain-localization/tbai/process_request_batuz.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Etendo BI Extensions Bundle/Overview
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/etendobi-extensions/overview
## Article Content: 
#### Overview
The Etendo BI Bundle includes functionalities connecting Etendo to Power BI.

#### Translations

#### Modules

##### Etendo BI Inclusion / Exclusion Module

:octicons-package-16: Javapackage: `com.etendoerp.powerbi.inclusion.exclusion`

<iframe width="560" height="315" src="https://www.youtube.com/embed/cEuwiUQbUAQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

This module allows users to customize and configure the information and filters in PowerBI reports. It allows the creation of different configurations that facilitate the selection and exclusion of specific entities within reports.

!!! info
    For more information, visit [Etendo BI Inclusion/Exclusion Configuration user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/etendobi-extensions/inclusion-exclusion-configuration.md).

##### Etendo BI Connector Module

:octicons-package-16: Javapackage: `com.etendoerp.integration.powerbi`

<iframe width="560" height="315" src="https://www.youtube.com/embed/z9EBff_qBDE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

This module allows the user to create base queries and customize them when needed. This process allows providing information that can be later used by Power BI. 

A background process must be set which creates CSV files that will be uploaded to a server.  

!!! info
    For more information, visit the [Etendo BI Connector Module developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/etendo-bi-extensions.md#etendo-bi-connector).

##### Base Queries for Etendo BI 

:octicons-package-16: Javapackage: `com.etendoerp.powerbi.queries`
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo BI Inclusion/Exclusion Module Configuration
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Etendo BI Extensions Bundle/Etendo BI Inclusion/Exclusion Module Configuration
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/etendobi-extensions/inclusion-exclusion-configuration
## Article Content: 
### Etendo BI Inclusion/Exclusion Configuration
:octicons-package-16: Javapackage: `com.etendoerp.powerbi.inclusion.exclusion` 

#### Overview

!!! info
    To be able to include this functionality, the Etendo BI Bundle must be installed. To do that, follow the instructions from [Marketplace](https://marketplace.etendo.cloud/?#/product-details?module=11372FBD87F34F80AAADBE1C9369CF83){target="_blank"}.

In order to allow users to customize and configure the information and filters in PowerBI reports, a new module has been developed that allows the creation of different configurations that facilitate the selection and exclusion of specific entities within reports.

A detailed description of the configuration window and its components is provided below.

#### **Etendo BI Inclusion/Exclusion Configuration** Window:

The window consists of two main tabs: "Header" and "Lines". These tabs are used to define and adjust the filters of PowerBI reports according to the user's specific requirements.

##### _Header_

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/etendobi-extensions/inclusion-exclusion-configuration/header-bi.png)

**Name and Description**: Text fields that allow the user to easily identify the configuration and understand its purpose.

**Type:** It indicates the type of entity to be included or excluded according to the configuration. This field provides additional information to understand the context of the configuration.  
The options are:

- Business Partner Category
- GL Item
- Product
- Product Category
- Document Type
- Account: If it is necessary to enter accounts, selecting this type enables an Element Level, Account Type and Account Tree selector (required)
- Business Partner
- Sales Representative

!!! note
    If the "Type" field is left empty, it is assumed that the line information is given by one of the auxiliary data (number, string or Yes/No fields). Moreover, in the lines tab, it is possible to combine all the options mentioned above to be included or excluded.

**From and To Date:** date fields to define the duration of the created configuration. If specified in the header, the lines acquire that defined period. If you want the lines to have different periods, set these dates in the corresponding lines.

**Has Number, Has String, Has Boolean:** These checkboxes allow the user to enable additional number, string, or yes/no value fields in the configuration lines. These auxiliary fields are used as needed in reports.

##### _Lines tab_

This tab contains the configuration lines associated with the header. Each line represents an element that can be used to include or exclude entities in reports. The fields in the lines are described below:

**Line No.:** Number of the line within the configuration. This number provides a reference to identify and order the lines.

**Document Type:** If the configuration is "Document Type", it allows selecting a specific document type. This field is only displayed if the entity type is "Document Type".

**Business Partner:** If the configuration is "Business Partner", it allows selecting a business partner. This field is only displayed if the entity type is "Business Partner".

**Business Partner Category:** If the configuration is "Business Partner Category", it allows selecting a business partner category. This field is only displayed if the entity type is "Business Partner Category".

**Sales Representative:** If the configuration is "Sales Representative", it allows selecting a sales representative. This field is only displayed if the entity type is "Sales Representative".

**Account**: If the configuration is  "Account", it allows selecting an account, pre-filtered by the related fields in the header. This field is only shown if the entity type is "Account".

**Product Category:** If the configuration is "Product Category", it allows selecting a product category. This field is only displayed if the entity type is "Product Category".

**Product:** If the configuration is "Product", it allows selecting a specific product. This field is only displayed if the entity type is "Product".

**G/L Item**: If the configuration is "GL Item", it allows selecting an accounting concept. This field is only shown if the entity type is "GL Item".

**Number:** Auxiliary field for entering an additional number. This field is only shown if the "Has Number" box is checked.

**String:** Auxiliary text string. It is shown only if the "Has String" check in the header is checked.

**Yes/No:** Auxiliary Yes/No check. Displayed only if the "Has Yes/No" check in the header is checked.

#### **Examples**

Etendo accounts settings to take the balances and reflect them in the financial reports in BI:

##### _Configuration in Etendo_

Main categories for account configuration:

- Cash
- Banks
- Customers
- Suppliers
- Sales
- Sales Costs

###### Configuration of cash accounts:

![cash.png](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/etendobi-extensions/inclusion-exclusion-configuration/cashpng.png)

###### Configuration of bank accounts:

![bank.png](https://docs.etendo.software/latest/assets/legacy/bank.png)

###### Configuration of customer accounts:

![customers.png](https://docs.etendo.software/latest/assets/legacy/customers.png)

###### Configuration of supplier accounts:

![suppliers.png](https://docs.etendo.software/latest/assets/legacy/suppliers.png)

###### Configuration of sales accounts:

![sales.png](https://docs.etendo.software/latest/assets/legacy/sales.png)

###### Configuration of sales costs accounts:

![sales_cost.png](https://docs.etendo.software/latest/assets/legacy/sales_cost.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Procurement Extensions Bundle/Overview
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/procurement-extensions/overview
## Article Content: 
#### Overview
This bundle includes enhancements for Procurement functionalities in Etendo.

#### Translations
-  :material-translate: Spanish: [Procurement Extensions Bundle ES](https://marketplace.etendo.cloud/#/product-details?module=F863020C58E94632A7134A8031A3AA9D){target="_blank"}

#### Modules

##### Purchase Invoice Validations

:octicons-package-16: Javapackage: `com.etendoerp.purchase.invoice.validations`

<iframe width="560" height="315" src="https://www.youtube.com/embed/_B1U-D9jQBs?si=OXAd6NSGPQC8LDGs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

This module allows users to prevent the duplication of purchase invoices within the system. This prevention will be carried out through a validation that will prohibit the saving of a duplicated purchase invoice.

!!! info
    For more information, visit [the Purchase Invoice Validations user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/procurement-extensions/purchase-invoice-validation.md).

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Purchase Invoice Validation
## Article Path: /User Guide/Etendo Classic/Optional Features/Bundles/Procurement Extensions Bundle/Purchase Invoice Validation
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/procurement-extensions/purchase-invoice-validation
## Article Content: 
### Purchase Invoice Validations
:octicons-package-16: Javapackage: `com.etendoerp.purchase.invoice.validations` 

#### Overview
<iframe width="560" height="315" src="https://www.youtube.com/embed/V80-YymMjFg?si=lYvSX9UxojxZVzTG" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

This module allows users to prevent the duplication of purchase invoices within the system, following some established rules. This prevention will be carried out through a validation that will prohibit the saving of a duplicated purchase invoice. The activation of this validation will be determined by a configurable preference.

#### Invoice duplication criteria

Etendo will consider a purchase invoice duplicated if another purchase invoice with the same key details already exists, namely:

- Business Partner
- Supplier Reference
- Invoice Date

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/procurement-extensions/purchaseinvoicevalidation1.png)

Purchase invoices in the system should have a unique supplier reference number for each business partner. This means that if two purchase invoices, for the same business partner, have the same reference number, they are considered duplicates.

#### Preference

:material-menu: `Application` > `General Setup` > `Application` > `Preference`

A configurable system preference will be used to enable or disable the validation that prevents the duplication of purchase invoices. This allows the client to decide whether to use this functionality or not. The versatility of preferences allows modifying their visibility, determining whether the validation will be active for all users, roles, organizations, etc.

From the Preference window, the user is able to create a new preference, choosing the corresponding property, which for this functionality will be Validate duplicated purchase invoices. In the Value field, it is necessary to add Y to enable the preference or N to disable it.

!!!note
    By default, there is an existing preference with the Validate duplicated purchase invoices property and the value N, which means that it is disabled. In case the user wants to enable this preference, it is necessary to create a new one and mark the selected checkbox. For more information,  visit [preference](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/application.md#preference){target="_blank"}.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/procurement-extensions/purchaseinvoicevalidation2.png)

#### Validation

The validation will prevent the saving of a purchase invoice that is considered duplicated according to the established criteria. If the system detects that the invoice being saved is duplicated, the user will be informed through a message indicating the nature of the duplication as shown here:

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/optional-features/bundles/procurement-extensions/purchaseinvoicevalidation3.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Tax Report Launcher
## Article Path: /User Guide/Etendo Classic/Optional Features/Supported Modules/Tax Report Launcher
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/supported-modules/tax-report-launcher
## Article Content: 
#### Overview
##### Purpose

The aim of this document is to describe the functional specifications for a new extension module which is the “Tax report launcher".
The tax report launcher module allows the end users to create and submit tax reports to the tax authorities as required by the in-country tax authorities.
These functional specifications will be later on implemented according to the Technical documentation. 

!!! info
    It is important to note that this functional specification is oriented to the Spanish Professional localization pack by now, mainly in relation to the setup and scenarios covered, regardless Tax Launcher report feature must be implemented as generic as possible in order to cover other countries scenarios.

 
It is also a matter of fact that the current specification is mainly related to the Spanish needs as those are the ones currently known, therefore current documentation and tax report launcher implementation will be enhanced or adjusted later on if needed.

##### Scope
Tax report launcher is an **extended tax module** which allows the end-user:
1. to set up different **“tax parameters” **as well as **"tax report parameters"** depending on the tax type and on the tax report requirements, respectively
2. to set up different **“tax reports”** in a unique window and according to the in-country tax requirements
3. to "launch" a selected tax report for a specific period
4. and to get the required **"tax output as a file"** to be submitted to the tax authorities in a valid format.

Besides, Tax report Launcher is a **framework** which will allow the end-user to develop new tax reports as required.

#### Design Considerations
##### Dependencies
As there should probably be more new tax reports to implement for the same country or others and even the existing ones might probably change, the tax report launcher module has to be implemented in a way that each tax report business logic is isolated from the rest, so in case there is a need of modifying an existing tax report, that change will not affect the rest and in case there are new tax reports to be implemented, those new ones will have its own business logic.
##### Constraints
Etendo already provides tax setup, tax transactions and in general tax related features, therefore and in order to be consistent, the existing tax related features are taken into account as part of this new module. Besides, it could be that some of the existing tax features have to be enhanced in order to get the tax information required for this extension module to work.
##### Delivery
!!! info
    This feature is going to be delivered as a module. Configuration data will be delivered as an additional module which could be imported by the end-user, containing by default setup; besides every report will be included in a particular module.

#### Functional Requirements
##### User roles & profiles
The following roles are involved:

- Accounting manager (Mary): Mary is the accounting manager. She must know which tax reports need to be submitted to the tax authorities depending on the in-country tax authorities requirements as well as the business specifics. Therefore she must be sure that once the "Configuration Data" extension delivered as an additional module to the Tax Report Launcher is installed, the default data or setup required for the specific tax reports she needs to submit to the tax authorities is properly set up in the system. Mary will do that in collaboration with Peter.
- Accounting staff (Peter): Peter is an employee part of the accounting staff. He will be responsible for helping Mary by checking or setting up the parameters needed, as well as entering the correspondent accounting transactions in collaboration with sales (Mike) and purchase staff (Alice) and launching the tax reports and finally, getting the tax report output to be submitted to the tax authorities.

##### Report types
Tax report launcher module allows to define below described type of tax reports:

- **statement tax reports**, which are the reports intended just to **list a specific type of tax transactions** so tax authorities are informed about it. For example, tax authorities need to be informed about every sales and/or purchase transaction exceeding a specific amount or the ones within EU countries.
- tax reports, which are the reports intended to collect tax base amounts, tax rates and tax amounts in a way to get the net amounts of **tax assessment or tax revenue** or any other kind of tax output.

The most common and relevant tax reports to be submitted to the tax authorities are:
- Value Added tax (VAT)
- and Withholding tax reports
in relation to those tax there are some important concepts to take into account listed below:

- **Value added tax** is an indirect tax on consumption and applicable to supplies of services or goods, goods imports and intra-community goods acquisitions, therefore VAT tax setup depends on the transaction type and the goods/services type being purchased and/or sold.
- **Withholdings** are amounts subtracted by the retainer (i.e. a company) to the tax payer (i.e and employee) for incomes paid (i.e. a salary) which are paid by the retainer as an “advance” amount to the tax which the tax payer has to pay at the end of the fiscal year to the tax authorities, therefore Withholding tax setup depends on who generates an income as well as the type of income itself.

In some countries, like Spain, there is another type of withholding commonly known as Payments on account. **Payment on account** is a withholding. It is an amount “paid” by the companies to the tax authorities for certain items of income (goods) as an advance of the tax amount to be paid by the beneficiary of that income, therefore payment on account tax setup depends on who generated an income as well as the type of income itself.
- **Income types** can be “cash” (monetary/by example a salary or a fee paid to a professional) or “goods” (not monetary/by example a company car or a company flat)
- **Withholding** term applies to **cash incomes**
and **Payment on account** term applies to **goods incomes** in some countries like Spain.

##### User stories
Mary is the Accounting manager of a Spanish located company responsible for deciding which tax reports need to be submitted to the tax authorities. For sure VAT and Withholding tax reports will have to be submitted to the tax authorities. Based on "in-country tax types" as well as in-country tax authorities requirements and the type of business running, Mary should know exactly which VAT and withholding tax reports have to be mandatory submitted to the tax authorities by her company.

Mary knows that as an overall rule **VAT** related tax reports **recognize tax liability** at the time goods are delivered and therefore invoiced or at the time services have been executed and therefore invoiced and **withholding** tax reports **recognize tax liability** at the time goods or services invoice are posted but in other countries like Spain at the time cash or goods incomes already invoiced and post are satisfied or paid.

Therefore, and having into account her company is located in Spain, Etendo has to fulfill her accounting needs which are:

**VAT tax amounts must be posted** and therefore included in accounting, **at the time an invoice** containing VAT **is posted** whenever invoice date is the same as goods expedition date or service execution date
**Withholding tax amounts must be posted** and therefore included in accounting, **at the time an invoice containing Withholding is posted** as there are some countries like Spain where withholding tax amounts must be posted at the same as VAT tax amounts, that is at the time an invoice containing withholding tax is posted, regardless tax liability for this type of taxes is recognize at the time that invoice is paid.

Mary should also be aware of the fact that most taxable transactions will be entered in the system either as a purchase or sales transaction and therefore as a purchase or sales invoice but there will also be some of them which will not have an invoice behind. Those last cases are mainly related to withholding tax, which will have to be entered in the system as **manual settlements linked to the correspondent G/L items.**
**Manual settlement will generate withholding tax posting** in the case of withholding which do not have an invoice linked to them and therefore should be entered in the system as a manual settlement which will imply a cash or bank payment afterward.
 
###### Overall system Setup
Mary lets accounting staff know which tax reports need to be submitted to the tax authorities by the company so Peter can either check or set up the tax parameters, business partner tax categories and the tax reports and tax report parameters needed; after that enter the correspondent accounting transactions in collaboration with sales and purchase staff in order to finally launch the tax reports and get the tax report output to be submitted to the tax authorities.

####### First step:
The **first** step that Peter should perform is either **to check the setup** or **to set up** the tax parameters required according to the work flow listed below:

1. Peter goes to **Financial Management / Accounting / Setup / Business Partner Tax category** to create the **business partner tax categories** needed depending on who generated a sales or purchase transaction subject to VAT or who generated an income subject to withholding. For example, he should enter as BP tax category: National Vendor, EU Vendor, International Vendor, National customer, EU Customer, International customer, Employees, Non-resident employees, Professionals, EU Professionals, International Professional, Renting, Economic Activities and so on so forth. 
2. Peter goes to **Financial Management / Accounting / Setup / Transaction code** to check that the required VAT "Transaction codes" for either purchase or sales transactions are set up by default. As already said most common ones are => Supplies (For example, this type of transaction code in Spain is ="E") and Acquisitions (For example, this type of transaction code in Spain is ="A")
3. After that, Peter goes to **Financial Management / Accounting / Setup / Tax key** to check that the required **Tax keys and sub-keys** are set up by default depending on the type of income and the business partner who generated that income. For example, in the case of the Spanish tax report 110, he should know that he has to create a Tax key = "A" for employment incomes, a Tax key = "G" for professional activities incomes, a Tax key = "K" for prizes and so on and so forth. 
4. Once the above is done Peter goes to **Financial Management / Accounting / Setup / Tax Category** as it could be new Tax categories have to be created. For example VAT (in case of purchase VAT), SalesVAT, IntraVAT, SalesIntraVAT, ImportVAT, ExportVAT, VAT+EC, SalesVAT+EC, WSalary, WProfessionals, WPrizes, PSalary, PProfessionals,PPrizes.
5. And once the above is done, Peter goes to **Financial Management / Accounting / Setup / Tax rates** as it could be new **VAT tax rates** and new **Withholding rates** have to be created. VAT tax rates depend on the type of transaction, whether it is a purchase or a sale, and the type of goods being purchased or sold and Withholding rates depends on the type of income being paid and the business partner who generated that income.

!!! info
    By using this way of withholding set up Peter has to make sure he is willing to post withholding at the time an invoice containing an income subject to withhold is posted, regardless of which withholding liability will be recognized at the payment date, and not at the time that invoice is paid. Tax rates have to be linked to the correspondent BP tax category and the correspondent accounting must be setup.



VAT rates = for example VAT21%, VAT10%, VAT4%, VAT21%+EC4%, VAT10%+EC1,5%, VAT4%+EC0,5%, SalesVAT21%, SalesVAT10%, SalesVAT4%, SalesVAT21%+EC4%, SalesVAT10%+EC1,5%, SalesVAT4%+EC0,5%, Intra-VAT21%/-21%, Intra-VAT0%, ImportVAT21%, ExportVAT0%. Besides the existing and new VAT rates will have to be **linked** to the correspondent **Transaction Codes** depending on the VAT direction. 
Withholding rates = for example WSalary35%, WPrizes18%, WProfessionals15%, WProfessionals7%. Besides the existing and new withholding and payment on account tax rates have to be **linked** to the correspondent Tributary **keys and sub-keys** depending on the tax reports those tax rates are going to be included. 


6. Above step could be also done by Peter from **Master data Management / Business partner setup / Withholding**. He will have to choose this way and not above one in relation to withholding rates in case he needs to post withholding amounts at the time an invoice is paid and not at the time the invoice is posted. For example WSalary35%, WPrizes18%, WProfessionals15%, WProfessionals7%. Besides the existing and new withholding rates have to be **linked** to the correspondent Tributary **keys and sub-keys** depending on the tax reports those tax rates are going to be included. 

####### Second step:
The **second** step that Peter should perform is to check that the **tax reports** and the **tax report parameters** are properly set up by default. To get this done he will have to navigate to **Financial Management / Accounting / Setup / Tax report.**
 
**Tax Report.** There should be a record for each tax report which needs to be submitted to the tax authorities. Each tax report should have below information:

a) **Tax Report groups.** For some countries such Spain withholding tax reports have a fixed section structure named Tax report groups. For example, in the case of Spain, withholding tax reports have 7 default section which are:
(1) Identification
(2) Accrual
(3) Tax assessment
(4) Tax revenue
(5) Negative declaration
(6) Complementary declaration and
(7) Signature.

!!! info
    In general VAT reports do not have those kinds of sections because they are not tax reports as such but statement tax reports, so a unique output section must be created for this type of reports. 

 b) **Tax report parameters**. Each tax report will have specific tax report parameters Peter should be aware of in order to get the right setup
***In parameters**. Those are specific tax report parameters which are needed by the time a tax report or a statement tax report is launched, therefore this type of parameters will have to be **manually entered** by him while launching a tax report
For example "Tax report file name", "contact person" or others more specific depending on the type of tax report.
***Constant parameters.** Specific constant tax report parameters which must be **set up by default** as there will always be the same
For example, in the case of the Spanish tax report 110, he should check that "Tax model" constant parameter is entered as "110", and "01" as page number.
***Out parameters**. Peter should know that out parameters are tax report parameters which will get information from the system, such as "Company Name", "Company Tax ID number" as well as more complex data/output related to transactions linked to a specific **"Tax keys and/or sub-keys"** for example. It is time for him to check that those output parameters are set up by default properly and linked to a specific tax report.


###### Specific setup and transactions

In collaboration with sales (Mike) and purchase staff (Alice), Peter needs to enter in the system the normal activity transactions which will be included in one or another tax report depending on the type of transaction we are talking about:

####### Purchase – Overall scenario

Alice creates a **requisition** based on the company or entity's items and / or services needs. As soon as requisitions are confirmed by Dan, the Purchase manager, she converts the requisition/s into a/some **purchase orders** and sends them to the correspondent business partner (vendor or creditor or professional).
Once the **goods have been received** by her company or once the **services have been executed** by the creditor as requested by her company, the vendor or creditor will issue an invoice. That invoice will have to be entered by Alice in the system as a **purchase invoice**.
In general, purchase transactions and therefore purchase invoice could be the result of goods acquisition or services provided by vendors located in Spain or located in the EU or located abroad, so depending on the origin of the goods and the type of goods/services exchanged, the VAT rate to pay (VAT-fiscal credit) as well as the transactions code will be different.
Besides, there are some kind of purchase transactions for which withholding tax will be applicable as well as the correspondent tributary keys depending on the type of income generated and the type of business partner who generated them.

####### Purchase - Specific scenarios & setup required

Alice could enter in the system any of the purchase invoices listed below as those are very common purchase scenarios for a small-medium size company located in an EU country like Spain. Peter and Alice will have to check that at least the information listed below per purchase invoice transaction is correctly set up before entering any purchase transaction.

1- **Goods purchase to a national vendor**
1. System path: Procurement management / Transactions / Purchase invoices
2. Business partner tax category: National vendor
3. Tax category : VAT
4. Tax rate (Purchase tax) : VAT21% and/or VAT10% and/or VAT4%
5. Tax rate - transaction code: "A" (acquisition)

2- **Goods purchase to a national vendor (EC scenario)**
1. Business partner tax category: National vendor
2. Tax category (purchase tax) : VAT+EC
3. Tax rate (Purchase tax) : VAT21%+EC4% and/or VAT10%+EC1,5% and/or VAT4%+EC0,5%
4. Tax rate - Transaction code: "A"(acquisition)

3- **Goods purchase to an EU vendor**
1. System path: Procurement management / Transactions / Purchase invoices
2. Business partner tax category: EU vendor
3. Tax category : IntraVAT
4. Tax rate (Purchase tax and Sales VAT) : IntraVAT21%/-21%
5. Tax rate - transaction code: "A" (acquisition)

4- **Goods purchase to an international vendor**

1. System path: Procurement management / Transactions / Purchase invoices
2. Business partner tax category: International vendor
3. Tax category : ImportVAT
4. Tax rate (Purchase tax) : ImportVAT21%
5. Tax rate - transaction code: "A" (acquisition)

5- **Purchase of professional services to a national professional**
1. System path: Procurement management / Transactions / Purchase invoices
2. Business partner tax category: National professionals
3. Tax category : VAT+WProfessionals
4. Tax rate (Purchase tax) : VAT21%+WProfessionals15%
5. Tax rate - Tributary key: "G-01 or G-02 or G-03
6. Tax rate - transaction code: "A" (acquisition)

6- **Purchase of professional services to an UE professional**
1. System path: Procurement management / Transactions / Purchase invoices
2. Business partner tax category: EU professionals
3. Tax category : IntraVAT+WProfessionals
4. Tax rate (purchase VAT and sales VAT): IntraVAT21%/-21%+WProfessionals24%
5. Tax rate - tributary key: "19"
6. Tax rate - transaction code: "A" (acquisition)

7- **Purchase of professional services to an international professional**
1. System path: Procurement management / Transactions / Purchase invoices
2. Business partner tax category: International professionals
3. Tax category : ImportVAT+WProfessionals
4. Tax rate (Purchase tax) :ImportVAT21%+WProfessionals24%
5. Tax rate - tributary key: "19"
6. Tax rate - transaction code: "A" (acquisition)


######## Goods Purchase invoices

While entering a Goods purchase invoice in the system, Alice must be sure VAT tax is going to be calculated properly as described above:
National vendor:
Invoice amount = 100.000 € => Tax base amount = 100.000 €
VAT21% = 100.000 € x 21% = 21.000 € => VAT amount = 21.000 €
Total invoice amount to be paid to the vendor = 121.000 €
EU vendor;
Invoice amount = 100.000 € => Tax base amount = 100.000 €
IntraVAT21%/-21% = [100.000 € x 21% = 21.000] + [100.000 € x -21% = -21.000] = 0 € => VAT amount = 0 €
Total invoice amount to be paid to the vendor = 100.000 €
International vendor:
Invoice amount = 100.000 € => Tax base amount = 100.000 €
ImportVAT21% = 100.000 € x 21% = 21.000 € => VAT amount = 21.000 €
Total invoice amount to be paid to the vendor = 121.000 €

######## Equivalence Charge

In this case, Alice's company (Etendo legal entity) is a retailer company which buys goods to National vendors only and under this specific VAT regimen.
While Alice's company is not forced to keep tracking of the VAT-fiscal credit and the VAT-fiscal debit and it is not forced to settle VAT, Alice's company is forced to tell its vendors they are subject to EC special regimen with the aim of allowing their vendors to charge them with an additional tax rate named EC tax rate.
While entering a Goods purchase invoice in the system under this specific VAT regimen, Alice must be sure VAT and EC taxes are calculated properly as described above:

Invoice amount = 100.000 € => Tax base amount = 100.000 €
VAT21% = 100.000 € x 21% = 21.000 => VAT amount = 21.000 €
EC4% = 100.000 € x 4% = 4.000 €
Total invoice amount to be paid to national vendor = 100.000 € + 21.000 € + 4.000 € = 125.000 €

######## Professional Service Purchase Invoices

While entering a services purchase invoice in the system, Alice must be sure VAT tax and withholding tax are going to be calculated properly as described above:

Invoice amount = 100.000 € => Tax base amount = 100.000 €
VAT21% = 100.000 € x 21% = 21.000 => VAT amount = 21.000 €
W-18% = 100.000 € x -15% = -15.000 => Withholding amount = -15.000 €
Total invoice amount to be paid to a professional vendor = 100.000 € + 21.000 € -15.000 € = 106.000 €

######## Reverse charge

Alice should know that an IntraVAT tax rate could be checked as “Reverse Charge” just in the case of services provided by UE professionals because it is not mandatory for UE goods acquisitions anymore. In that case the company will have to create and Auto-Invoice after receiving services purchase invoice with a VAT tax rate = 0%
Therefore, there will have to be 3 entries for each invoice under this scenario with an operation code = "I":

- the line for the Auto-invoice of the VAT-fiscal credit (IntraVAT21%=21%)
- the line for the Auto-invoice of the VAT-fiscal debit (SalesIntraVAT=-21%)
- and the line for the original purchase Invoice as import or exempt (ImportVAT = 0%).

!!! info
    Notice that the line for VAT-fiscal credit and the line for import or exempt VAT will be shown and stored as purchase/received VAT (VAT-fiscal credit) while the VAT-fiscal debit line will be shown and stored as sales/issued VAT.


####### Purchase credit notes

In case there is any error in the purchase invoices for goods or services provided by a business partner or in the case any goods have to be returned back to a vendor due to lack of quality or any other kind of error, Alice and the accounting staff will have to void the correspondent purchase invoice and create and post a new purchase credit invoice (purchase credit memo). In this case the applicable scenarios are the same as described in section above, but:
1. Purchase credit invoices amounts will be negative amounts
2. Peter needs to be sure similar purchase credit invoices are not grouped while being included in VAT tax reports.

####### Sales - Overall scenario

Mike creates a **sales order** based on a customer/s need/s. Once the **goods have been sent** by his company through a Good shipment, it is possible for him to issue a **sales invoice** and send it to the customer together with good shipment documentation, for example a packing slip.
In general, sales transactions and therefore **sales invoices** could be the result of goods shipments or services provide by a company to a customer or third party located in Spain or located in the EU or located abroad, so depending on the destination of the goods and the type of goods/services provided, the VAT rate to collect (VAT-fiscal debit) as well as the transactions code will be different.
Besides, there are some kinds of sales transactions for which withholding tax will be applicable as well as the correspondent tributary keys depending on the type of income generated.

####### Sales - Specific scenarios & setup required

Mike could enter in the system any of the sales transactions listed below as those are very common sales scenarios for a small-medium size company located in an EU country like Spain. Peter and Mike will have to check that at least the information listed below per sales invoice transaction is correctly set up before entering any sales transaction.

1- **Sales of goods to a National customer(Spain)**
1. System path: Sales Management / Transactions / Sales Invoice
2. Business partner tax category: National customer
3. Tax category : SalesVAT
4. Tax rate (Sales tax) : SalesVAT21% and/or SalesVAT10% and/or SalesVAT4%
5. Tax rate - transaction code: "E" (Supply)


2- **Sales of goods to a National retailed (EC scenario)**
1. And Business partner tax category: National retailer
2. Tax category : SalesVAT+EC
3. Tax rate (Sales tax) : SalesVAT21%+EC4% and/or SalesVAT10%+EC1,5% and/or SalesVAT4%+EC0,5%
4. Tax rate - Transaction code: "E"(supply)

3- **Sales of goods to an EU customer**
1. System path: Sales Management / Transactions / Sales Invoice
2. Business partner tax category: EU customer
3. Tax category : SalesIntraVAT
4. Tax rate (Sales tax) : SalesIntraVAT0%
5. Tax rate - transaction code: "E" (supply)

4- **Sales of goods to an international customer**
1. System path: Procurement management / Transactions / Purchase invoices
2. Business partner tax category: International vendor
3. Tax category : ExportVAT
3. Tax rate (Sales tax) : ExportVAT0%
4. Tax rate - transaction code: "E" (Supply)

5- **Service provided to National customer**
1. System path: Sales Management / Transactions / Sales Invoice
2. Business partner tax category: National customers
3. Tax category : SalesVAT+SalesW
4. Tax rate (sales tax9 : SalesVAT21%+SalesWProfessionals15%
5. Tax rate - Tributary key: not applicable
5. Tax rate - transaction code: "E" (Supply)

6- **Service provided to an UE customer**
1. System path: Sales Management / Transactions / Sales Invoice
2. Business partner tax category: EU customer
3. Tax category : SalesIntaVAT+SalesW
4. Tax rate (Sales tax) : SalesIntraVAT0%+SalesWProfessionals15%
5. Tax rate - tributary key: not applicable
6. Tax rate - transaction code: "E" (Supply)

7- **Service provided to an International customer**
1. S1. ystem path: Sales Management / Transactions / Sales Invoice
2. Business partner tax category: International customers
3. Tax category : ExportVAT+SalesW
4. Tax rate (Sales tax) :ExportVAT0%+SalesWProfessionals15%
5. Tax rate - tributary key: not applicable
6. Tax rate - transaction code: "E" (Supply)


######## Goods Sales invoices
While entering a Goods Sales invoice in the system, Mike must be sure Sales VAT tax is going to be calculated properly as described above:
National customer:
Invoice amount = 100.000 € => Tax base amount = 100.000 €
SalesVAT21% = 100.000 € x 21% = 21.000 => Sales VAT amount = 21.000 €
Total invoice amount to be collected from the customer = 121.000 €
EU vendor;
Invoice amount = 100.000 € => Tax base amount = 100.000 €
SalesIntraVAT0% = 100.000 € x 0% = 0 €=> Sales VAT amount = 0 €
Total invoice amount to be collected from the customer = 100.000 €
International vendor:
Invoice amount = 100.000 € => Tax base amount = 100.000 €
Export0% = 100.000 € x 0% = 0 € => VAT amount = 0 €
Total invoice amount to be collected from the customer = 100.000 €

######## Equivalence Charge

In this case, Mike's company sells goods to a national retailer company he must charge them with an additional tax rate named EC tax rate.
Therefore while entering a Goods sales invoice in the system under this specific VAT regimen, Mike must be sure Sales VAT and EC taxes are calculated properly as described above:
Invoice amount = 100.000 € => Tax base amount = 100.000 €
SalesVAT21% = 100.000 € x 21% = 21.000 € => Sales VAT amount = 21.000 €
EC4% = 100.000 € x 4% = 4.000 €
Total invoice amount to be collected from the retailer = 100.000 € + 21.000 € + 4.000 € = 125.000 €

######## Professional Service Sales Invoices

While entering a services sales invoice in the system, Mike must be sure Sales VAT tax and withholding tax are going to be calculated properly as described above:
Invoice amount = 100.000 € => Tax base amount = 100.000 €
Sales VAT21% = 100.000 € x 21% = 21.000 => VAT amount = 21.000 €
SalesWProfessionals15% = 100.000 € x -15% = -15.000 => Withholding amount = -15.000 €
Total invoice amount to be collected from the customer = 100.000 € + 21.000 € -15.000 € = 106.000 €


####### Sales credit invoices

In case there is an error in the sales invoices of goods or services Mike's company is providing to his customers or in case a customer wants to return back any goods due to lack of quality or any other kind of error, Mike and the accounting staff will have to void the correspondent sales invoice and create and post a new sales credit invoice (sales credit memo). In this case the applicable scenarios are the same as described in section above, but:
1. Sales credit invoices amounts will be negative amounts
2. Mike needs to be sure similar sales credit invoices are not grouped while being included in VAT tax reports.

####### Manual Settlements

Peter will have to use Etendo Manual Settlements feature for **entering in the system the rest of taxable incomes** **which can not be entered in the system** either as a purchase transaction and therefore as a purchase invoice or as a sales transaction and therefore as a sales invoice.
Peter will have to use **G/L items** while entering manual settlements as there is not going to be an invoice behind this type of transactions but a business partner and an income satisfied or paid by his company or an income collected by his company; therefore Peter will have to create as much G/L items as required depending on the **type of incomes** either collected or paid and the **type of business partners** involved in the income generation.

**G/L items creation is mainly related to Withholding tax reports** as those reports are the ones containing income taxable transactions not supported by either purchase or sales invoices.
!!! info
    Peter will have to make sure that G/L items are linked to the correspondent tax rate and withholding rates if applicable, and besides Peter will have to make sure that G/L items have the correspondent accounting setup in advance.

Scenarios below explain that Peter will have to create at least two G/L items per transaction, he will not use direct posting feature as these types of withholding tax, the ones entered in the system as manual settlement, can be only posted at the time of payment via cash journal or payment journal.

######## Employee salary payments

Peter knows that Etendo does not automate payroll payment transactions so, in order to get in the system an employee salary payment transaction, Peter will have to use the "manual settlement" feature as a first step and then settle or pay it by using either a cash payment or a bank payment.
While doing that, he needs to be sure that the transaction is linked to the specific G/L items created for that reason and besides Peter must enter the correspondent withholding tax as those kinds of payment are subject to withholding which must be submitted to the tax authorities later on.

To accomplish above scenario, Peter will have to navigate to:

- Financial Management / Accounting / setup / **Business Partner Tax Category** to create the BP tax category => "Employee" (Need to be discussed)
- Financial Management / Accounting / setup / **Tax category** to create the Tax category => "WSalary"
- Financial Management / Accounting / setup / **Tax key** to check the correspondent Tax key and sub-keys is setup by default => "A = Employment Income"
- Financial Management / Accounting / setup / **Tax rate** to create the Tax rate => "WSalary35%", in this same screen and under **"Tax parameter"** tab Peter must setup the correspondent Tax Report Parameter so the tax rate can be linked to the correspondent tax report (110), tax report group (Assessments), tax parameter (Withholding and payments on account) and tributary key (A-Employment income).
- Financial Management / Accounting / setup / **G/L Item** to create the G/L item = > "Employee income in cash withholding" which must be linked to Tax rate "WSalary35%" and the correspondent accounting setup.
- Financial Management / Accounting / setup / **G/L Item** to create the G/L item ="Outstanding salary payments" with the correspondent accounting setup.


Once the above is setup in the system Peter must navigate to Financial Management /Receivable & Payable / Transactions / Manual settlement and create a new manual settlement as described below:
Transaction date => 26-June-2021
Accounting date => 30-June-2021
Description => Alice's salary

Then Peter goes to "Create Payment" window and enter two new ones as described below:
Business Partner => Alice (previously created as and employee with BP tax category = Employee
Description => Alice's salary June
Amount => 1000
Receipt => No
Direct posting => No

Then Peter goes to "Balance Payment" window and enter a new one as described below:
G/L item => Employment income in cash withholding
Debit amount => 350
and G/L item => "Outstanding salary payments"
Debit amount => 650

Once all of the above is done, Peter process the manual settlement and navigate to Financial Management / Receivable & Payable / Transactions / Cash Journal and create a new one and enters:
Transaction date=> 30-June-2021
Accounting date=> 30-June-2021

and then go to Lines and creates a new one as:
Cash Type => Debt-payment and then click in Debt/payment feature to get into Debt Payment Selector.

Once in the Debt Payment Selector Peter has to remove "Receipt" check and search by pending ones to select the one just entered.

After that Peter processes and posts.
Peter can navigate to the journal entry and then to the cash journal lines, and then to the payment, and once there Peter can select and post the "Settlement Canceled" in order to generate and check the final posting.

Finally, Peter has to verify that the correspondent Withholding tax reports is showing a withholding amount of 350 linked to WSalary35% rate.

######## Prizes payments

Peter's company organized a competition between their employees. Alice won that prize which was an "in cash" prize of 500 €, which has to be included in the system. For doing that Peter will have to use the "manual settlement" feature as a first step and then settle or pay it by using either a cash payment or a bank payment.
While doing that he needs to be sure that the transaction is linked to the specific G/L items created for that reason and besides Peter must enter the correspondent withholding tax as those kinds of payment are subject to withholding which must be submitted to the tax authorities later on.

To accomplish above scenario, Peter will have to navigate to:

- Financial Management / Accounting / setup / **Business Partner Tax Category** to create the BP tax category => "Employee"
- Financial Management / Accounting / setup / **Tax category** to create the Tax category => "WPrize"
- Financial Management / Accounting / setup / **Tax key** to create the correspondent Tax key and sub-keys => "K_01=Prizes_01"
- Financial Management / Accounting / setup / **Tax rate** to create the Tax rate => "WPrize18%", in this same screen and under **"Tax parameter"** tab Peter must setup the correspondent Tax Report Parameter so the tax rate can be linked to the correspondent tax report (110), tax report group (Assessments), tax parameter (Withholding and payments on account) and tributary key (K_01 - Prizes 01).
- Financial Management / Accounting / setup / **G/L Item** to create the G/L item = > "Prizes income in cash withholding" which must be linked to Tax rate "WPrize18%" and the correspondent accounting.
- Financial Management / Accounting / setup / **G/L Item** to create the G/L item => "Prizes in cash" with the correspondent accounting setup.

Once the above is setup in the system Peter must navigate to Financial Management /Receivable & Payable / Transactions / Manual settlement and create a new manual settlement as described below:

Transaction date => 01-July-2021
Accounting date => 01-July-2021
Description => Alice's prize (best product X design)

Then Peter goes to "Create Payment" window and enter a new one as described below:
Business Partner => Alice (previously created as and employee with BP tax category = Employee
Description => Alice's prize
Amount => 500
Receipt => No
Direct posting => No

Then Peter goes to "Balance Payment" window and enter two new ones as described below:
G/L item => Prizes in cash
Debit amount => 450
and G/L item => Prizes income in cash withholding
Debit amount => 50

Once all of the above is done, Peter process the manual settlement and navigate to Financial Management / Receivable & Payable / Transactions / Cash Journal and create a new one and enters:
Transaction date=> 01-July-2021
Accounting date=> 01-July-2021
and then go to Lines and creates a new one as:

Cash Type => Debt-payment and then click in Debt/payment feature to get into Debt Payment Selector.

Once in the Debt Payment Selector Peter has to remove "Receipt", check and search by pending ones, so "prize" one just created can be selected.

After that Peter processes and posts.
Peter can navigate to the journal entry and then to the cash journal lines, and then to the payment, and once there Peter can select and post the "Settlement Canceled" in order to generate and check the final posting.

Finally, Peter has to verify that the correspondent Withholding tax reports is showing a withholding amount of 50 linked to WPrize18% rate.

**Building Renting in case of 3rd party building**

Peter's company rents a 3rd party owned building in which Peter's company office is located. The owner of that building issues a "statement or a receipt" to Peter's company every month in order to be paid for that rent. Peter's company has to pay that rent and enter in the system the correspondent statement and payment, therefore Peter will have to use the "manual settlement" feature as a first step and then pay it by using either a cash payment or a bank payment.

!!! info
    While doing that he needs to be sure that the transaction is linked to the specific G/L items created for that reason and besides Peter must enter the correspondent withholding tax as those kinds of payment are subject to withholding which must be submitted to the tax authorities later on.

To accomplish above scenario, Peter will have to navigate to:

- Financial Management / Accounting / setup / **Business Partner Tax Category** to create the BP tax category => "Lessor"
- Financial Management / Accounting / setup / **Tax category** to create the Tax category => "WRenting"
- Financial Management / Accounting / setup / **Tax key** to create the correspondent Tax key and sub-keys => "P -Renting"
- Financial Management / Accounting / setup / **Tax rate** to create the Tax rate => "WRenting18%", in this same screen and under **"Tax parameter"** tab Peter must setup the correspondent Tax Report Parameter so the tax rate can be linked to the correspondent tax report (115), tax report group (Assessments), tax parameter (Withholding and payments on account) and tributary key (P-Renting).
- Financial Management / Accounting / setup / **G/L Item** to create the G/L item = > "3rd party rent in cash Withholding" which must be linked to Tax rate "WRenting18%" and the correspondent accounting setup.
- Financial Management / Accounting / setup / **G/L Item** to create the G/L item => "3rd party rent" with the correspondent accounting setup.

Once the above is setup in the system Peter must navigate to Financial Management /Receivable & Payable / Transactions / Manual settlement and create a new manual settlement as described below:

Transaction date => 29-August-2021
Accounting date => 01-September-2021
Description => September renting

Then Peter goes to "Create Payment" window and enter a new one as described below:
Business Partner => Lessor BP (previously created as a creditor and with BP tax category = Lessor
Description => September renting
Amount => 2000
Receipt => No
Direct posting => No

Then Peter goes to "Balance Payment" window and enter two new ones as described below:
G/L item => "3rd party rent in cash withholding"
Debit amount => 360
G/L item => "3rd party rent in cash"
Debit amount => 1640

Once all of the above is done, Peter process the manual settlement and navigate to Financial Management / Receivable & Payable / Transactions / Cash Journal and create a new one and enters:

Transaction date=> 01-September-2021
Accounting date=> 01-September-2021
and then go to Lines and creates a new one as:
Cash Type => Debt-payment and then click in Debt/payment feature to get into Debt Payment Selector.

Once in the Debt Payment Selector Peter has to remove "Receipt", check and search by pending ones, so "rent" one just created can be selected.

After that Peter processes and posts.
Peter can navigate to the journal entry and then to the cash journal lines, and then to the payment, and once there Peter can select and post the "Settlement Canceled" in order to generate and check the final posting.

Finally, Peter has to verify that the correspondent Withholding tax reports is showing a withholding amount of 360 linked to WRenting18% rate.


######## Renting in case of a building do not linked to an economic activity
Peter's company owns a building not related to Peter's company's economic activity. That building is being rented to a 3rd party or lessee. Peter's company issues a statement or a receipt and sends it to the lessee in order to be paid on a monthly basis. Peter's company must collect the money and enter in the system the correspondent payment, in order to get that in the system, Peter will have to use the "manual settlement" feature as a first step and then get it paid by using either a cash payment or a bank payment.

!!! info
    While doing that he needs to be sure that the transaction is linked to a specific G/L item created for that reason and besides Peter must enter the correspondent withholding tax as those kinds of payment are subject to withholding which must be submitted to the tax authorities later on.

To accomplish above scenario, Peter will have to navigate to:

- Financial Management / Accounting / setup / **Business Partner Tax Category** to create the BP tax category => "Lessee"
- Financial Management / Accounting / setup / **Tax category** to create the Tax category => "WPropertyRent"
- Financial Management / Accounting / setup / **Tax key** to create the correspondent Tax key and sub-keys => "C_04-Property Rent"
- Financial Management / Accounting / setup / **Tax rate** to create the Tax rate => "WPropertyRent18%", in this same screen and under **"Tax parameter"** tab Peter must setup the correspondent Tax Report Parameter so the tax rate can be linked to the correspondent tax report (123), tax report group (Assessments), tax parameter (Withholding and payments on account) and tributary key (C_04-Property Rent).
- Financial Management / Accounting / setup / **G/L Item** to create the G/L item = > "Property Rent in cash withholding" which must be linked to Tax rate "WPropertyRent18%"
- Financial Management / Accounting / setup / **G/L Item** to create the G/L item => "Property Rent in cash" with the correspondent accounting setup.


Once the above is setup in the system Peter must navigate to Financial Management /Receivable & Payable / Transactions / Manual settlement and create a new manual settlement as described below:

Transaction date => 29-September-2021
Accounting date => 01-October-2021
Description => October renting

Then Peter goes to "Create Payment" window and enter a new one as described below:
Business Partner => Lessee BP (previously created as a creditor and with BP tax category = Lessee)
Description => October renting
Amount => -3500
Receipt => Yes
Direct posting => No

Then Peter goes to "Balance Payment" window and enter two new ones as described below:
G/L item => "Property Rent in cash withholding"
Debit amount => -630
G/L item => "Property Rent in cash"
Debit amount => -2870

Once all of the above is done, Peter process the manual settlement and navigate to Financial Management / Receivable & Payable / Transactions / Cash Journal and create a new one and enters:
Transaction date=> 01-October-2021
Accounting date=> 01-October-2021
and then go to Lines and creates a new one as:
Cash Type => Debt-payment and then click in Debt/payment feature to get into Debt Payment Selector.

Once in the Debt Payment Selector Peter has to check "Receipt" and search by pending ones, so " proprietary rent" one just created can be selected.

After that Peter processes and posts.
Peter can navigate to the journal entry and then to the cash journal lines, and then to the payment, and once there Peter can select and post the "Settlement Canceled" in order to generate and check the final posting.

Finally, Peter has to verify that the correspondent Withholding tax reports is showing a withholding amount of 630 linked to WPropertyRent18% rate.


##### Tax Report Launcher setup

As described above, Mary, the accounting manager, must decide which tax reports need to be submitted to the tax authorities depending on her company's business and in-country tax authorities requirements. Peter would help her here as he is responsible for checking the default setup and/or setting up the tax parameters, tax reports and tax report parameters as well as entering the correspondent accounting transactions in collaboration with sales (Mike) and purchase staff (Alice). Last thing for him to do will be to launch the tax reports and finally, to get the tax report output to be submitted to the tax authorities.

Once Peter knows which tax reports must be submitted to the tax authorities by talking to Mary, He will have to **install the configuration data module** delivered as part of the Tax Report Launcher module, once done he must navigate to Financial Management / Accounting / Setup / Tax Report Launcher to check that the default set up for each tax report is setup as described below:

1-Peter will have to check that there is a **new record for each tax report** which needs to be submitted to the tax authorities, containing the info below:

1. **Search key** = tax report id (in our example the Spanish tax report "110")
2. **Name** = Name of the tax report (in our example " Withholdings and payments on account of income tax (IRPF) - Spain")
3. **Description** = Description of the tax report by including tax report type and main purpose "Withholdings and payments on account made on income satisfied by Companies during a period of time "
4. **Period** = it could be either monthly, quarterly or yearly depending on tax authorities requirements and company size.
5. **Java Class Name** = separate Java class per tax report has to be entered here.
6. **Active** = set to "Yes"

2- For a specific report (the one just being created) and once the above is done, Peter will have to navigate to **"Tax Report Group"** tab and check that below 7 tax report groups are created for withholding reports, as well as 1 output tax report group is created in case of VAT reports:

1. **Identification** (1) - This tax report group must contain general data like company name, tax id number, address and so on and so forth depending on the tax report being entered in the system.
*Those data are considered **tax report parameters** for that specific tax report group; therefore Peter will have to navigate to the tax report parameter tab and check the parameters. Every parameter should be either a **"constant"**, in that case a constant value will have to be entered in the correspondent field; or an "input parameter", in that case an input type parameter will have to be selected from a list (Check box or text); or "output parameter", in that case either a Tributary key and tributary sub-key or a transaction code will have to be selected.

*Identification section will have all kind of tax parameters, **"constant"** parameters as "tax report id", **"in parameters"** to be entered by the user while launching the report, such as "contact name", as well as **"out parameters"** got from the system such as "Organization/Entity name" and "Organization/Entity tax id" as well as those tax transactions linked to a tax key and sub-key or a transaction code (in case of VAT section, see note below).

2. **Accrual** (2) - This section must contain year and period data depending on when a specific tax report has to be launched and submitted to the tax authorities.
*Those data are "in parameters" which will have to be entered by him while launching the report from Financial Management / Accounting / Analysis tools / Tax Report Launcher".

3. **Tax assessment** (3) - This section must contain tax related information such as the number of beneficiaries of an income, income type, income amounts and tax amounts for a given period. The content of this section would depend on the tax report we are entering in the system.

*Those data are considered **tax report parameters** for that specific tax report group; therefore Peter will have to navigate to the tax report parameter tab and check that the correspondent parameters are there.

*Tax assessment section will have **"in parameters"** to be entered by the user, such as "Amount to deduct only in case of complementary declaration scenario"; in general "in parameters" will be all kind of tax information needed for the tax report group which can not be obtained from the system because there is not a business logic behind. Besides, it will also have **"out parameters"** such as the sum of all the "monetary income amounts linked to a specific tax rate" regardless of the way it was entered in the system (either as a purchase or sales invoice or as a manual settlement). In general "out parameters" will be all those parameters whose value can be obtained from the system as there is a business logic behind.

4. T**ax revenue** (4) - This section must contain mainly the net tax amount to be paid to the tax authorities based on section (3) result
* Those data are considered **tax report parameters** for that specific tax report group; therefore Peter will have to navigate to the tax report parameter tab and check that the correspondent parameters are there.

* Tax revenue section will have **"in parameters"** to be entered by the user while launching a tax report, such a "X" in the case positive tax revenue is going to be paid by cash or "D" in case positive tax revenue is going to be paid by a direct debit. In general "in parameters" will be all kinds of tax information needed for the tax report group which can not be obtained from the system because there is not a business logic behind. Besides, it will also have **"out parameters"** such as "tax revenue amount" whose value will have to be a calculated value depending on section (3). In general "out parameters" will be all those parameters whose value can be obtained from the system as there is a business logic behind.

5. **Negative declaration** (5) - This section will be shown in a withholding report only in case the calculated net tax amount (Tax revenue section (4)) is = 0 , therefore this section will only have an "out parameter" based on the tax revenue value.

6. **Complementary declaration** (6) - This section will be shown in a withholding report only in case the tax report being launched is a complementary tax report to one or more tax reports already submitted to the tax authorities by the same concept and for the same period.

* Those data are considered **tax report parameters** for that specific tax report group; therefore Peter will have to navigate to the tax report parameter tab and check that the correspondent parameters are there in the case he needs to create a complementary tax report.

* Complementary declaration section will have **"in parameters"** to be entered by the user, such as "Former tax report electronic code".

7. and **Signature** (7). This section will contain a retainer/declarator (company) signature which is only needed in case of printed format not while generating an electronic format therefore there is no need for us to create this tax report group.

!!! info
    VAT tax reports do not have those kinds of above sections because they are not tax reports as such but statement tax reports, therefore a generic tax group will have to be created linked to a generic Output tax report parameter related to Transaction code parameter, for that type of VAT tax reports. 


##### Tax Report Output

Tax reports can be submitted to the tax authorities either as *.pdf files, which means a printed format or as a *.txt files, which means an electronic presentation that can be sent to the tax authorities via Internet. Both formats have to comply with tax authorities well known requirements so after getting the correspondent output files Peter will have to verify that the formats are the correct ones.

Besides *.txt files can be submitted to the tax authorities by using tax authorities web applications so Peter has to make sure he gets the correspondent tax certification required to submit the files as well as he has to make sure that the files are not rejected.

Peter has also to be aware that depending on the number of transactions to be included in a tax reports as well as the company size, presentation format should be either mandatory printed format or mandatory electronic format.

Peter will have to navigate to Financial Management / Accounting / Analysis tools / Tax Report Launcher to get tax report outputs.
Once there, the information which Peter will have to enter as input parameters is:
- Organization
- Tax report
- Accounting schema
- Year
- Period
- and *.txt file name for example as an Input Parameter
Once the above is filled-in Peter can press "Generate Electronic file" to generate the *.txt file.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to manage deferred revenue and expenses
## Article Path: /User Guide/Etendo Classic/How to Guides/How to manage deferred revenue and expenses
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/how-to-guides/how-to-manage-deferred-revenue-and-expenses
## Article Content: 
#### Introduction

In most situations, a company would want to recognize revenues as soon as an invoice is completed. For example, when a food and beverage distributor sells beverages, the revenue for the transaction is recognized as soon as the goods leave the warehouse. In Etendo, in this situation, revenue is generated as part of the accounting of the sales invoice corresponding to the transaction.

Under some circumstances, however, you need to defer revenue, either in part or in total, to subsequent periods. For example:

- A publisher selling an annual subscription to a magazine would want to recognize revenue for the value of the subscription over 12 months.
- A ski resort selling a season pass during the summer (June) for the following ski season needs to wait till the beginning of the season (December) before recognizing revenue and distributing that revenue throughout the duration of the ski seasons (December to April).
- A food and beverage distributor selling and invoicing a product that will only be able to be delivered to their customers in 3 months, needs to defer revenue recognition till the delivery.

Similarly on the expense side, in most cases companies would recognize the expense (for non asset purchases and non-stockable products) as soon as the purchase is made. For example, if you buy office supplies (a consumable product that is not capitalized), the expense is recognized at the time of purchase. In Etendo, in this situation, the expense is generated as part of the accounting of the purchase invoice corresponding to the transaction.

Under some circumstances, however, you need to defer the expense recognition. For example:

- A company purchasing business insurance for the duration of a year would want to distribute that expense over 12 months.
- A company paying rent in advance on a quarterly basis would want to distribute that expense over 3 months.

#### Overview

Etendo allows supporting these situations with the deferred revenue and expense capabilities.

On the revenue side:

- When creating sales invoices, at line level, users are able to specify:
    - Whether the revenue for this line needs to be deferred
    - If so, the number of periods across which revenue needs to be distributed
    - The starting period for revenue recognition
- The above values can be controlled on an invoice line by invoice line basis.
- For products that customarily require revenue deferral, users are able to specify at product level the revenue recognition rules
    - Whether the product requires revenue deferral
    - The duration of the deferral period
    - The most common starting period for revenue recognition, which could be defined to be either the current period, the next period after the sales invoice, or a manually specified period.
- The values specified at product level are automatically defaulted on sales invoice lines when the product is used.
- These values are also used when an invoice is created from another document (for example: the Generate Invoices process that creates invoices from sales orders).

Similarly, on the expense side:

- When creating purchase invoices, at line level, users are able to specify:
    - Whether the expenses for this line need to be deferred
    - If so, the number of periods across which expenses need to be distributed
    - The starting period for expense recognition
- The above values can be controlled on an invoice line by invoice line basis.
- For products that customarily require expense deferral, users are able to specify at product level the expense recognition rules
    - Whether the product requires expense deferral
    - The duration of the deferral period
    - The most common starting period for expense recognition, which could be defined to be either the current period, the next period after the invoice, or a manually specified period.
- The values specified at product level are automatically defaulted on purchase invoice lines when the product is used.
- These values are also used when an invoice is created from another document.

#### Example

Consider the following situation.

Company F&B Publishing sells a 1 year subscription to F&B Magazine to Healthy Foods Supermarkets on October 17th, 2022. The value of the subscription is $120 and the subscription covers the period from November 2022 to October 2023.

On October 17th, an invoice is recorded in the system with a line for the subscription. The line is flagged as requiring revenue deferral, with a deferral period of 12 months starting from November 2023.

The following accounting entries are created based on this invoice:

| Date         | Account             | Debit  | Credit |
|--------------|---------------------|--------|--------|
| 17-OCT-2022  | Account Receivables | 120.00 |        |
|              | Unearned Revenue    |        | 120.00 |
| 30-NOV-2022  | Unearned Revenue    | 10.00  |        |
|              | Revenue             |        | 10.00  |
| 31-DEC-2022  | Unearned Revenue    | 10.00  |        |
|              | Revenue             |        | 10.00  |
| ...          | ...                 | ...    | ...    |
| 31-OCT-2023  | Unearned Revenue    | 10.00  |        |
|              | Revenue             |        | 10.00  |


#### Accounting Configuration

###### General Ledger Configuration

In order to use revenue and expense deferrals, you first need to properly define the default accounts to be used to post deferred revenues and deferred expenses.

This configuration is executed in the General Ledger Configuration window.

In this window in the Default tab, you can find two relevant fields:

- Product Deferred Expense: this field stores the default account to be used to record deferred expenses. This account is typically an asset account.
- Product Deferred Revenue: this field stores the default account to be used to record deferred revenues. This account is typically a liability account.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-deferred-revenue-and-expenses/glconfiguration.png)

##### Product Category

The accounts selected in the General Ledger Configuration window are defaulted to every Product Category. Users can override these defaults at product category level allowing deferred revenues and expenses for different product groups to be posted to different accounts and appear as separate entries in the company balance sheet.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-deferred-revenue-and-expenses/productcategory.png)

#### Execution Steps - Revenues

##### Configuring Products for Revenue Deferral

In order to defer revenue, you need to properly configure the products that will generate the deferral when sold. In Etendo, products are created and maintained in the Product window.

Product window: in this window, the configuration related to revenue deferral is in the Header and in the Accounting tab of the [Product window](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#product).

Header tab:

- Deferred Revenue: this flag is visible only for products having the Sale flag checked and indicates that by default, revenues for sales of this product need to be deferred. When this flag is checked, the Revenue Plan field group becomes visible, allowing users to configure the next two fields.
- Revenue Plan Type: this field specifies the default frequency of the revenue distribution. At the moment, only monthly revenue plans are supported and additional frequencies such as quarterly or yearly are planned for future releases.
- Period Number: this field specifies the default duration of a revenue plan. For example, an annual subscription to a magazine will be defined with a revenue plan of 12 monthly periods, while a season ski pass will have a revenue plan of 5 monthly periods.

It is important to notice that the values that the revenue plan you define at product level is the default revenue plan and it can be modified on a transaction by transaction basis.

Accounting tab:

- Product Deferred Revenue: this is the account used to post deferred revenue for sales of this product. It is inherited from the product category and can be further defined at product level.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-deferred-revenue-and-expenses/product.png)

##### Manual Invoice Creation

When you create a sales invoice line, you can define at line level, whether the line is going to cause the revenue to be deferred.

The relevant fields are:

- Deferred Revenue: When this flag is checked, the Revenue Plan field group becomes visible, allowing users to configure the next three fields.
- Revenue Plan Type: this field specifies the frequency of the revenue distribution.
- Period Number: this field specifies the duration of a revenue plan.
- Starting Period: the first period in which revenue is going to be recognized.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-deferred-revenue-and-expenses/salesinvoice.png)

##### Automatic Generation of Invoices

If the invoice is created automatically, either from a sales order or from any other document, the product configuration is taken into account and, if appropriate, the revenue plan is defined for the invoice lines based on the product configuration defaults.

##### Accounting Results

Regardless of how the invoice is created - manually or automatically - when it is completed and posted,  a number of accounting entries are created:

- The first accounting entry, dated on the accounting date of the invoice, debits account receivables and credits unearned revenue.
- For each period, an additional accounting entry is created debiting unearned revenue and crediting revenue.

#### Execution Steps - Expenses

##### Configuring Products for Expense Deferral

In order to defer expenses, you need to properly configure the products that will generate the deferral when purchased. In Etendo, products are created and maintained in the Product window.

Product window: in this window, the configuration related to expense deferral is in the Header and in the Accounting tab of the [Product window](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#product).

Header tab:

- Deferred Expense: this flag is visible only for products having the Purchase flag checked and indicates that by default, revenues for sales of this product need to be deferred. When this flag is checked, the Expense Plan field group becomes visible, allowing users to configure the next two fields.
- Expense Plan Type: this field specifies the default frequency of the expense distribution.
- Period Number: this field specifies the default duration of an expense plan.

It is important to notice that the values that the expense plan you define at product level are the default expense plan and they can be modified on a transaction by transaction basis.

Accounting tab:

- Product Deferred Expense: this is the account used to post deferred or prepaid expenses for purchases of this product. It is inherited from the product category and can be further defined at product level.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-deferred-revenue-and-expenses/product2.png)

##### Manual Invoice Creation

When you create a purchase invoice line, you can define at line level whether the line is going to cause the expense to be deferred.

The relevant fields are:

- Deferred Expense: When this flag is checked, the Expense Plan field group becomes visible, allowing users to configure the next three fields.
- Expense Plan Type: this field specifies the frequency of the expense distribution.
- Period Number: this field specifies the duration of an expense plan.
- Starting Period: the first period in which expense is going to be recognized.

These fields are defaulted based on the product configuration but the Starting Date field.

##### Automatic Generation of Invoices

If the invoice is created automatically, either from a purchase order or from any other document, the product configuration is taken into account and, if appropriate, the expense plan is defined for the invoice lines based on the product configuration defaults.

##### Accounting Results

Regardless of how the invoice is created - manually or automatically - when it is completed and posted, a number of accounting entries are created:

- The first accounting entry, dated on the accounting date of the invoice, debits deferred expenses and credits account payables.
- For each period, an additional accounting entry is created debiting the product expense account and crediting the deferred expense account.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to manage prepaid invoices in payables
## Article Path: /User Guide/Etendo Classic/How to Guides/How to manage prepaid invoices in payables
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables
## Article Content: 
#### Overview

There are vendors which do not wish to extend credit to their customers:

- It could be a matter of trust at the beginning of a commercial relationship
- Or it could be a matter of a temporary lack of financial capacity.

In these situations, a particular payment term is agreed upon by the Company and the vendor which implies a payment against a Purchase Order or Purchase Invoice, otherwise the vendor will not deliver the goods to the company. The parties could agree to a total prepayment or a partial prepayment.

!!! note
        A purchase invoice created from the prepaid purchase order will inherit the payment information whatever it is, whether it is a total prepayment or a partial prepayment.

#### Recommended articles

Managing prepaid invoices requires a clear understanding on how to create a [Purchase Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#purchase-order) and a [Purchase Invoice](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#purchase-invoice) as well as how to register a [Vendor Payment](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#payment-out).

It is recommended as well to understand how to set up a [Payment Term](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/business-partner-setup.md#payment-term) and how to launch the [Payment Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/analysis-tools.md#payment-report).

#### Order prepayment: execution steps

In Etendo, the company in this example will have to acknowledge a specific payment term agreed with its vendor, create a Purchase Order and make a payment before the goods are delivered to it.

##### Payment term configuration

As already mentioned, the company in this example needs to create a specific payment term to reflect what was agreed with its vendor.

A "Prepay" payment term can be created as shown in the image below:
 
![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/paymentterm.png)

Above means that the Company will have to pay 25% of the total order amount and the rest 30 days after the vendors Invoice Date.

Please note that, prepay payment term has a header and a line:

- in the line, the 25% pre-pay is configured and the "Overdue payment days rule" is set to 0 days.
- in the header, the second part of this payment is configured; this time the "Overdue payment days rule" is 30 days for the amount remaining.

##### Purchase Order creation

As already mentioned, the first step is to create a [Purchase Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#purchase-order) which contains the goods that the company needs.

In this scenario, the parties have agreed a specific payment term which can be filled in the corresponding field of the purchase order header.

Once every required data is filled in as appropriate, the Purchase Order needs to be booked as every time an order is completed a Payment Plan is created for that Order.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/purchaseorder2.png)

!!! note
        It is not possible to record payments against orders which are not completed and therefore do not already have a payment plan linked to them.

##### Payment creation and accounting

Payments made to a vendor are registered in the [payment out](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#payment-out) window. Etendo allows to register vendor payments created against purchase orders and/or invoices.

The main fields to fill in the header section of the payment in window are:

- Business Partner, the vendor who the company is paying to
- Paying From, the financial bank account where the money is taken out from.
- and the Payment Method which in the example is "Wire Transfer"

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/paymentout2.png)

Then, it is possible to register vendor payment details by using the process button named “Add Details”.

A new window is shown where it is required to specify the "transaction type" to which the payment is related to, that could be orders and/or invoices.

The company in this example needs to choose "Orders" and then the order which is going to be partially paid.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/adddetails2.png)

Once everything is filled in, press the button Process.

The payment is made and withdrawn from the bank at the same time, that means that a withdrawal transactions is created in the [Financial Account](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#transaction) window, in the "Transaction" tab.

Just created payment can be posted in the Payment Out window by pressing the process button Post if:

- the "Payment Method" used has the proper configuration in the [Payment Method](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#payment-method) tab of the [Financial Account](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#financial-account) used to make the payment.
     - the company in this example needs to set the field "Upon Payment Use" as "In Transit Payment Account"
- besides, there should be an "In Transit Payment Out Account" in the [Accounting Configuration](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#accounting-configuration) tab of the financial account used to make the payment.

The posting will look like:

| Account                    | Debit | Credit |
|----------------------------|-------|--------|
| [Vendor Prepayment](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#vendor-accounting)          | 50    |        |
| [In Transit Payment Out Account](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#accounting-configuration) |       | 50     |


It is possible to check once more the Payment Out Plan of the purchase order in this example.

The purchase order payment plan includes the payment registered in the Payment Out Details tab.

##### Payment check

Back to the [Purchase Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#purchase-order), it is possible to check the recently created Payment Plan with its Payment Details.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/paymentdetails.png)

To summarize:

- the Payment Plan tab inform us about:
    - the Expected Amount to be paid
    - the paid amount if any
    - and the outstanding amount to be paid in case of a partial payment registered already.
- and the Payment Details tab registers every payment made against the order.

##### Pre-Paid invoice management and accounting

The company in this example can register the [Goods Receipt](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#goods-receipts) before registering the vendor invoice by using the process [Pending Goods Receipts](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#pending-goods-receipts).

This process allows introducing the exact amount of goods received from the vendor against each purchase order line.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/pendinggoodsreceipts2.png)

Once processed, Etendo informs about the Goods Receipt number just registered.

Next step is to enter the vendor invoice. There are several ways of entering a vendor invoice.

The company in this example uses, for instance, the process "Create Lines From" which can be found in the [Purchase Invoice](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/procurement-management/transactions.md#lines-4) window. This process can be used once the purchase invoice header information has been properly entered. It retrieves either order or goods receipt information to be copied to the entered invoice.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/createfrom.png)

The invoice created once completed will inherit the payment plan of the order.

In this example:

- the invoice payment plan will already reflect the amount already paid against the order, which is USD 50
- and besides, it will also reflect the outstanding amount to be paid, which is USD 60

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/purchaseinvoice.png)

Above situation it is also reflected in accounting, as purchase invoice posting will look like:

| Account              | Debit | Credit |
|----------------------|-------|--------|
| [Product Expense](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#accounting)      | 110   |        |
| [Vendor Liability](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#vendor-accounting)     |       | 60     |
| [Vendor Prepayment](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#vendor-accounting)    |       | 50     |


There is a report named [Payment Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/analysis-tools.md#payment-report) which allows monitoring every payment received or made.

In this example, this report shows in an intuitive way:

- the status of the payment made against the order and later on inherited by the invoice as "Withdrawn not Cleared", that means that the payment has been withdrawn from a financial bank account but it is not reconcile yet
- and the invoice outstanding amount to be paid as "Awaiting payment".

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/paymentreport.png)

In this example, the last step is to register the remaining amount payment of the vendor invoice 30 days after the invoice date. A payment made to a vendor invoice can be registered in the system two ways:

- in the Payment Out window, same way as described here but this time the payment must be related to a "Transaction Type" equal to "Invoices"
- or in the Purchase Invoice window, by using the process button "Add Payment".

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/addpayment.png)

Once this new payment is processed, the purchase invoice changes to fully paid. In other words, the "Payment Complete" check box of the invoice is now selected.

Finally, the "Payment Report" now shows the invoice as fully paid, in Etendo terms it is shown as "Withdrawn not Cleared".

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/paymentreport2.png)

#### Invoice prepayment: Execution steps

In Etendo, the company in this example will have to configure a payment method which allows to post the prepayment as soon as it is made, create a purchase invoice for the goods required and register the prepayment of the invoice earlier than the invoice date.

##### Payment method configuration
The payment method to be used needs to be configured in order to allow the posting of the prepayment as soon as it is made, therefore the "Withdrawn Payment Account" can be specified in the field 'Upon Payment Use'.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/paymentmethod.png)

!!! note
    The checkbox "Automatic Withdrawn" is also selected. That means that the payment will be automatically withdrawn from the financial account.

##### Purchase invoice creation

First step is to issue the purchase invoice dated on November 6th, 2023 for instance. The issued invoice can be completed as soon as it is properly filled in.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/purchaseinvoice3.png)

##### Payment creation and accounting

Next step is to register the prepayment of the invoice in an earlier date than the invoice date, for instance Novermber 1st, 2023.

Above is done by using the "Add Payment" button. The "Payment Date" field needs to be modified as required.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/addpayment3.png)

Once processed,  a payment is created in the "Payment Out" window and besides the withdrawal of that payment is automatically registered in the corresponding financial account.

The payment can be posted from the "Payment Out" window.

Payment posting looks like:

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/journalentriesreport.png)

Above posting reflects the moment in which the vendor liability is canceled by the prepayment, which is also canceled by the recognition of the payment withdrawn.

##### Purchase Invoice posting

Last step is to post the purchase invoice to the ledger.
Invoice posting looks like:

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-payables/journalentriesreport2.png)

Above posting reflects the moment in which the vendor liability is accounted, however vendor liability is already canceled by the prepayment.

##### Result

This completes the creation and processing of:

- a partially prepaid order in Etendo. As a result, an invoice has been partially paid after registering a prepayment against the corresponding order.
- a prepaid invoice in Etendo. As a result, the vendor liability is canceled at the time of registering and posting the invoice prepayment.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to manage prepaid invoices in receivables
## Article Path: /User Guide/Etendo Classic/How to Guides/How to manage prepaid invoices in receivables
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables
## Article Content: 
### How to Manage Prepaid Invoices in Receivables

#### Overview

There are companies which do not wish to extend credit to specific customers:

- It could be a matter of trust at the beginning of a commercial relationship.
- Or it could be a matter of a temporary lack of financial capacity.

In these situations, a particular payment term is agreed upon by the parties which implies a total or partial payment of an order or an invoice, otherwise the goods will not be delivered to the customer.

It is important to remark that a sales invoice created from a prepaid sales order will inherit the order payment information whatever it is.

#### Recommended articles

Managing prepaid invoices requires a clear understanding on how to create a [Sales Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#sales-order) and a [Sales Invoice](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#sales-invoice) as well as how to register a [Customer Payment](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#payment-in).

It is recommended as well to understand how to set up a [Payment Term](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/business-partner-setup.md#payment-term) and how to launch the [Payment Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/analysis-tools.md#payment-report).

#### Order prepayment: execution steps

In Etendo, the company in this example will have to agree on a specific payment term with its customer, create a sales order for the goods requested and then register a partial payment of the order before issuing later on the corresponding sales invoice.

##### Payment term configuration

As already mentioned, the company in this example needs to create a specific payment term to reflect what was agreed with its customer.

A "Prepay" payment term can be created as shown in the image below:

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/paymenttermsm.png)

Above means that the customer will have to prepay 50% of the total order amount and the rest 30 days after the invoice date.

Please note that, prepay payment term has a header and a line:

- In the line, the 50% prepay is configured as the "Overdue payment days rule" is set to 0 days.
- In the header, the second part of this payment is configured as the "Overdue payment days rule" is 30 days for the amount remaining.

##### Sales Order creation

As already mentioned, the first step is to create a Sales Order according to the customer needs.

In this scenario, the parties have agreed on a specific payment term which can be filled in the corresponding field of the [Sales Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#sales-order) header.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/salesordersm.png)

The main field that needs to be taken into account when managing prepayments is the field Invoice Terms which needs to be selected as “Immediate”, otherwise it would not be possible to prepay that order. In Etendo that means that the order will not be shown as a suitable order to be paid in the [Payment In](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#payment-in) window where customer payments are registered.

Once every required data is filled in, the Sales Order needs to be Booked as every time an order is completed a Payment Plan is created for that Order.

In other words, it is not possible to record payments against orders which are not completed and therefore do not already have a payment plan linked to them.

##### Payment creation and accounting

Payments received from the customer are registered in the [Payment In](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#payment-in) window. Etendo allows registering customer payments received against sales orders and/or invoices.

The main fields to fill in the header section of the payment in window are:

- Business Partner, the customer who is actually making the Payment.
- Amount, the exact amount paid (in our case 50% of USD 1,726.40).
- Deposit To, the financial bank account where the money has been received.
- and the Payment Method which in the example is "Wire Transfer"

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/paymentinsm.png)

Then, it is possible to register customer payment details by using the process button named “Add Details”.

A new window is shown named "Add Details" where it is required to specify the "transaction type" to which the payment is related to, that could be orders and/or invoices.

The company in this example needs to choose "Orders" and then the order which is going to be partially paid.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/adddetailssm.png)

Once everything is filled in, press the button Done.

The payment is received and deposited in the bank at the same time, that means that a deposit transaction is created in the [Financial Account](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#transaction) window, in the "Transaction" tab.

Just created payment can be posted in the Payment In window by pressing the process button Post if:

- the "Payment Method" used has the proper configuration in the [Payment Method](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#payment-method) tab of the financial account used to make the payment.
- the company in this example needs to set the field "Upon Receipt Use" as "In Transit Payment Account"
- besides, there should be an "In Transit Payment IN Account" in the [Accounting Configuration](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#accounting-configuration) tab of the financial account used to make the payment.

The posting will look like:

| Account                          | Debit  | Credit |
|----------------------------------|--------|--------|
| [In Transit Payment In Account](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#accounting-configuration)   | 863.20 |        |
| [Customer Prepayment](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#customer-accounting)              |        | 863.20 |

It is possible to check once more the Payment Plan of the sales order in this example.

The sales order payment plan includes the payment registered in the Payment Details tab.

##### Payment check

Back in the [Sales Order](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#sales-order), it is possible to check the recently created Payment Plan with its Payment Details.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/paymentplansm.png)

To summarize:

- the Payment Plan tab inform us about:

    - the expected amount to be paid
    - the received amount if any
    - and the outstanding amount to be paid in case of a partial payment registered already.

- and the Payment Details tab registers every payment received against the order.

##### Pre-Paid invoice management and accounting

There are several ways to create a sales invoice from an order, one of those is [Create Invoices from Orders](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#create-invoices-from-orders).

This process allows to enter data such as the business partner and a given data range to narrow down the orders to be invoiced.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/createinvoicesfromorderssm.png)

Once a Sales Order is selected, the Done button automatically generates the corresponding invoice.

The invoice created will inherit the payment plan of the order.

In this example:

- the invoice payment plan will already reflect the amount already paid against the order, which is USD 863.20
- and besides, it will also reflect the outstanding amount to be paid, which is USD 630.80

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/salesinvoicesm.png)

Above situation it is also reflected in accounting, as purchase invoice posting will look like:

| Account                | Debit   | Credit  |
|------------------------|---------|---------|
| [Customer Receivable](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/master-data-management/master-data.md#customer-accounting)    | 630.80  |         |
| Customer Prepayment    |         | 863.20  |

There is a report named [Payment Report](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/analysis-tools.md#payment-report) which allows monitoring every payment received or made.

In this example, this report shows in an intuitive way:

- the status of the payment received against the order and later on inherited in the invoice, as "Deposited not Cleared" which means that the payment has been deposited in a financial bank account but it is not reconciled yet
- and the invoice outstanding amount to be paid as "Awaiting payment".

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/paymentreportsm.png)

In this example, the last step is to register the customer payment of the invoice, 30 days after the invoice date. A payment received from a customer can be registered in the system two ways:

- in the [Payment In](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#payment-in) window, same way as described here but this time the payment must be related to a "Transaction Type" equal to "Invoices"
- or in the [Sales Invoice](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/sales-management/transactions.md#sales-invoice) window, by using the process button "Add Payment In/Out".

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/addpaymentsm.png)

Once this new payment is processed, the sales invoice changes to fully paid. In other words, the "Payment Complete" check box of the invoice is now selected.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/paymentcompletesm.png)

Finally, the "Payment Report" now shows the invoice as fully paid, in Etendo terms it is shown as "Deposited not Clear".

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/paymentcompletesm2.png)

#### Invoice prepayment: execution steps

In Etendo, the company in this example will have to configure a payment method which allows to post the prepayment as soon as it is received, create a sales invoice for the goods requested by its customer and register the prepayment of the invoice earlier than the invoice date.

##### Payment method configuration

The payment method to be used needs to be configured in order to allow the posting of the prepayment as soon as it is received, therefore the "Deposited Payment Account" can be specified in the field "Upon Receipt Use".

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/paymentmethodconfsm.png)

!!! note
        The checkbox "Automatic Deposit" is also selected. That means that the payment received will be automatically deposited in the financial account.

##### Sales invoice creation

First step is to issue the sales invoice dated on November 13th, 2023 for instance. The issued invoice can be completed as soon as it is properly filled in.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/salesinvoicecreationsm.png)

##### Payment creation and accounting

Next step is to register the prepayment of the invoice on an earlier date than the invoice date, for instance November 1st, 2023.

Above is done by using the "Add Payment" button. The "Payment Date" field needs to be modified as required.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/addpaymentsm2.png)

Once processed, a payment received is created in the "Payment In" window and besides the deposit of that payment is automatically registered in the corresponding financial account.

The payment received can be posted from the "Payment In" window.

##### Sales Invoice posting

Last step is to post the sales invoice to the ledger.

Invoice posting looks like:

![](https://docs.etendo.software/latest/assets/user-guide/etendo-classic/how-to-guides/how-to-manage-prepaid-invoices-in-receivables/journalentriesreportsm.png)

Above posting reflects the moment in which the customer receivable is accounted, however customer receivable is already canceled by the prepayment.

#### Result

This completes the creation and processing of:

- a partially prepaid order in Etendo. As a result, an invoice has been partially paid after registering a prepayment against the corresponding order.
- a prepaid invoice in Etendo. As a result, the customer receivables are canceled at the time of registering and posting the invoice prepayment.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to transfer funds between financial accounts
## Article Path: /User Guide/Etendo Classic/How to Guides/How to transfer funds between financial accounts
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-classic/how-to-guides/how-to-transfer-funds-between-financial-accounts
## Article Content: 
#### Overview

There are many situations in which a company needs to transfer funds to modify or adjust bank and/or cash accounts balance:


- a check deposited in the wrong bank account
- a bank account out of funds...etc.

In Etendo bank and cash accounts are represented as [Financial Accounts](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#financial-account).

There are several kinds of funds transfers depending on the financial account type used and the organization for which the transfer of funds takes place:

- From a bank account to another bank account within the same organization.
- From an organization bank account to another organization bank account.
- Same applies to cash accounts.

#### Recomended articles

Transferring funds between financial accounts requires a clear understanding on how to create a [G/L Item](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#gl-item).

It is highly recommended as well to understand how [Financial Accounts](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#financial-account) and [Account Combination](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#account-combination) work in Etendo.

#### Execution Steps

In Etendo, the company in the example will have to withdraw money from one bank or cash account and get it deposited into another bank or cash account.
In other words, the company needs to alter either bank or cash accounts balance whenever it is required. That action could or could not have fees.
Anyway, the steps to follow are:

- GL item creation
        as it is necessary to keep somewhere the funds in-transit balance from the time it is withdrawn from one financial account until the time it is deposited in another financial account.
- Creation of a withdrawal transaction
        in the bank account where funds are taken from.
- Creation of a deposit transaction
        in the bank account where funds are going to be deposited.


#### G/L Item creation

A [G/L Item](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#gl-item) is the accounting item to use for accounting in-transit funds. It is key to configure the GL item with the right debit and credit accounts in the Accounting tab. The way to do that is:

- Once the GL item has been created, click on the *Accounting tab* of the [G/L Item](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#gl-item) window.
- Create a new record for each organization's general ledger and assign the same [Account Combination](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#account-combination) for debit and credit.

For instance, the sample account combinations which could be used are:

- US General Ledger configuration:
        1140 Checking In-Transfer
- Spanish General Ledger configuration:
        55500 - Partidas pendientes de aplicación

#### Creation of the withdrawal transaction

A withdrawal transaction needs to be created in the Financial Account where the funds are going to be taken from. This step in the process could or could not have fees.

The company in this example needs to:

- navigate to the [Financial Accounts](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#financial-account) window
- select the bank to take the money from, for instance Bank A
- press the process button *Add Transaction*
- once in that new window select the *Transaction Type* GL Item
- enter a *Transaction Date*
- select the *GL Item* previously created
- and finally indicate the *Paid Out* amount, for instance 100,00 USD.

This new transaction is then shown in the *Transaction tab* of the *Financial Account* window. Etendo clearly shows the Withdrawal Amount recorded.
The next step is to post the withdrawal transaction. 

!!!note
        It is possible to manually post it by using the process button Post or it could be automatically posted if the Accounting Server Process is enabled in the [Process Request](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/process-scheduling.md#process-request) window.

The posting will look like:

| Account                          | Debit  | Credit |
|----------------------------------|--------|--------|
| [GL Item Debit](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#accounting)   | Paid Out Amount |        |
| [Bank A - Withdrawal account](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#accounting-configuration)              |        | Paid Out Amount |


##### Creation of the bank fee

The company in this example needs to create the withdrawal transaction as described previously and an additional transaction to reflect the bank fee. The way to do that is:

- press once more the process button *Add Transaction*
- select the *Transaction Type* Fee
- enter a *Transaction Date*
- and finally indicate the *Paid Out* amount, for instance 1,00 USD.

!!!info
        A bank fee can also be registered in a financial account by using a previously created G/L Item named Bank Interest.Bank Interest accounting could be configured as '7010 Interest income' for credit and '7020 Interest expense' for debit.


In this example, there will be two transactions created in the *Transaction* tab of the *Financial Account*, one for the withdrawal and one for the fee.
Fee transactions can also be posted the same way as the withdrawal transaction.



| Account                          | Debit  | Credit |
|----------------------------------|--------|--------|
| [Bank A -Bank Fee Account](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#accounting-configuration)   | Paid Out Amount |        |
| [Payment Out-Withdrawal](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#accounting-configuration)              |        | Paid Out Amount |


#### Creation of the deposit transaction

The final step is to create a deposit transaction in the Financial Account where the funds must be deposited.
The company in this example needs to:

- navigate to the [Financial Accounts](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#financial-account) window
- select the bank to deposit the money, for instance Bank B
- press the process button *Add Transaction*
- once in that new window select the *Transaction Type* GL Item
- enter a *Transaction Date*
- select the *GL Item* previously created
- and finally indicate the *Received In* amount, in this example 100,00 USD.

This new transaction is then shown in the *Transaction* tab of the *Financial Account* window. Etendo clearly shows the Deposit Amount recorded.
The next step is to post the deposit transaction. It is possible to manually post it by using the process button *Post* or it could be automatically posted if the Accounting Server Process is enabled in the [Process Request](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/process-scheduling.md#process-request) window.


The posting will look like:


| Account                          | Debit  | Credit |
|----------------------------------|--------|--------|
| [Bank B - Deposit Account](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#accounting-configuration)   | Received In Amount |        |
| [GL Item Credit](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#accounting)              |        | Received In Amount |

#### Transfer of funds between cash accounts

The company in this example needs to follow exactly the same execution steps. The only difference is the *Financial Account Type* to use. This time a *Cash* financial account type will be used while creating the withdrawal transaction and the deposit transaction.
Transfer of funds between different organizations

#### Transfer of funds between different organizations 

The company in this example needs to follow exactly the same execution steps. The only difference is the *Organization* to be used. This time:

- the *GL Item for the in-transit amount to be withdrawn* needs to be created in *Organization A*
- the *withdrawal transaction* needs to be created in a *Financial Account* of *Organization A*
- the *GL item for the in-transit amount to be deposited* needs to be created in *Organization B*
- and finally, the *deposit transaction* needs to be created in a *Financial Account* of *Organization B*

Withdrawal transaction posting in Organization A will look like:

| Account                          | Debit  | Credit |
|----------------------------------|--------|--------|
| [GL Item Debit](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#accounting)   | Paid Out Amount |        |
| [Bank A - Withdrawal account](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#accounting-configuration)              |        | Paid Out Amount |

Deposit transaction posting in Organization B will look like:


| Account                          | Debit  | Credit |
|----------------------------------|--------|--------|
| [Bank B - Deposit Account](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/receivables-and-payables/transactions.md#accounting-configuration)   | Received In Amount |        |
| [GL Item Credit](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#accounting)              |        | Received In Amount |

#### Result

This completes the transfer of funds between financial accounts. As a result:

- Bank A balance is reduced in 101,00 USD
- Bank B balance is increased in 100,00 USD

Above scenario is just a transfer of funds between financial accounts of the same organization.

In the case of transfer of funds between financial accounts of different organizations:

- Bank A balance of the organization A is reduced in 101,00 USD
- Bank B balance of the organization B is increased in 100,00 USD

Above scenario would somehow mean an expense in Organization A and a revenue in Organization B.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: ✨ Getting Started
## Article Path: /User Guide/Etendo Mobile/✨ Getting Started
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-mobile/getting-started
## Article Content: 
### Etendo Mobile

#### Overview

Etendo Mobile is a **mobile app** in which the user can access to sub-applications via mobile devices in a fast and practical way. By enabling seamless integration between Etendo Classic and mobile sub-applications, Etendo Mobile allows users to log in to Etendo Classic and configure **dynamic applications** tailored to specific user roles, enhancing productivity and efficiency.

!!!info
    To be able to access to the sub-applications, the Platform Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [_Platform Extensions Bundle_](https://marketplace.etendo.cloud/#/product-details?module=5AE4A287F2584210876230321FBEE614){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Platform Extensions - Release notes](https://docs.etendo.software/whats-new/release-notes/etendo-classic/bundles/platform-extensions/release-notes/).


Etendo Mobile is available in both Play and App Store:

=== ":simple-homeassistantcommunitystore: Play store"

    The app is available in Play Store and the download site can be accessed through [_Download the App here._](https://play.google.com/store/apps/details?id=com.smf.mobile.etendo_app_loader){target=_blank}

    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-mobile/user-interface/EtendoPlayStore.png)

=== ":simple-appstore: App Store "

    The app is available in App Store and the download site can be accessed through [_Download the App here._](https://apps.apple.com/us/app/etendo/id6451114033){target=_blank}

    <a href="https://apps.apple.com/us/app/etendo/id6451114033" target="_blank"><img src="/assets/user-guide/etendo-mobile/user-interface/EtendoAppStore.png" alt="EtendoAppStore.png"></a>
    

#### Initial Configuration

In order to use the app, the user must access Etendo Classic in `Client`>`Secure Web Service Configuration` since the app uses Secure Web Services to authentizate itself. So, as System Administrator role, generate a token by clicking on the **generate key** button, this token is used to start the session in the app.

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-mobile/getting-started/getting-started-mobile-0.png)

#### Server URL

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-mobile/getting-started/getting-started-mobile-1.jpg){ width="250" align="right" }

Once the app is downloaded, the first step will be setting up the **Etendo server URL**.

For this, the gear icon shown in the welcome window allows the user to enter the configuration window. In Settings, click the Add new Link button, enter the URL and click **Add new Link** again.


!!!info
    In the Add new link field, it is possible to add other URLs to connect the app from different servers. It is also possible to modify or remove URLs.

#### Log In
<br>

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-mobile/getting-started/getting-started-mobile-2.jpg){ width="250" align="right" }

Once the server URL is configured, the user must log in entering **the user and the password** assigned by the system administrator.

!!!info
    The user will enter with their default **Role, Organization, Client and Warehouse** setup.

!!!note
    The user will remain logged in unless the session is ended through Log out option.  

!!!info
    Etendo Mobile offers the possibility to connect to a demo server to test the app. In this case, the **Demo Try** button must be pressed so the user can enter the app without credential requirements.

#### Dynamic App Role Configuration

Etendo Mobile allows the creation and configuration of mobile sub-applications. In order to be able to configure the dynamic sub-applications, it is necessary to install the [Mobile Extensions](https://docs.etendo.software/latest/etendo-mobile/bundles/mobile-extensions/mobile-extensions.md) bundle which contains all sub-apps distributed by Etendo. 

Once installed, go to the **Role window** in `General Setup> Security> Role` and create a configuration register in the **Dynamic Apps** tab for each sub-app to be configured. This action sets the access to the sub-applications according to the role.  

Fields to note:

- **App:** This dropdown displays the available applications based on the installed modules. Selecting an application grants access to that application for the role.
- **Version:** Assign the version of the application to be used in this role.
- **Active:** Select if this application is active or not.

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-mobile/getting-started/getting-started-mobile-3.png)

==ARTICLE_END==
==ARTICLE_START==
# Article Title: User interface
## Article Path: /User Guide/Etendo Mobile/User interface
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-mobile/user-interface/user-interface
## Article Content: 
### User Interface

#### Etendo Mobile

##### Settings Screen

In the Setting screen window, the user is able to set the **language** to use in the app.

!!!note
    Remember that as soon as the app is downloaded, the server URL must be set. 

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-mobile/user-interface/user-interface-0.png)


##### Home Screen

After you have logged in, you will be redirected to Home.

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-mobile/user-interface/user-interface-1.png)

Here, by selecting the profile image, it is possible to navigate to the **Settings** and **Profile** screens.

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-mobile/user-interface/user-interface-2.png)


If the drawer is displayed, it is possible to navigate to Home and also to the sub applications previously loaded. 

!!! note
    To be able to include sub-applications, the Mobile Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Mobile Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=55A7EF64F7FA43449B249DA7F8E14589){target="\_blank"}. <br>
    For more information about the versions available, core compatibility and new features visit [Mobile Extensions Bundle - Release Notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-mobile/bundles/mobile-extensions/release-notes.md).

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-mobile/user-interface/user-interface-3.png)

##### Profile Screen

In this section, the user can see the information of the logged in person: **Name, Role, Organization, Client and Warehouse**.

In case the user has a picture, it will be shown both in this window and in the top section of the navigation menu in Etendo. 

![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-mobile/user-interface/user-interface-4.png)

!!!note
    The role can only be modified from Etendo Classic, so each user will enter with their default role setup.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /User Guide/Etendo Mobile/Bundles/Mobile Extensions/Overview
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-mobile/bundles/mobile-extensions/overview
## Article Content: 
### Mobile Extensions

:octicons-package-16: Javapackage: `com.etendoerp.mobile.extensions`

:material-store: Etendo Marketplace:  [Mobile Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=55A7EF64F7FA43449B249DA7F8E14589){target="\_blank"}

#### Overview

This bundle includes mobile sub-applications.

!!! info
    - To be able to include the sub-applications, the Mobile Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Mobile Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=55A7EF64F7FA43449B249DA7F8E14589){target="\_blank"}. <br>
    For more information about the versions available, core compatibility and new features visit [Mobile Extensions - Release Notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-mobile/bundles/mobile-extensions/release-notes.md). <br>

    - Once the bundle is installed in Etendo Classic, the dynamic apps will be configured and the apps will be available. Acces must be given to each role from the [Dynamic Apps tab](https://docs.etendo.software/latest/getting-started.md#dynamic-app-role-configuration) in the Role window. <br>
    
    - For more information read [Etendo Mobile](https://docs.etendo.software/latest/user-guide/etendo-mobile/getting-started.md). 


#### Modules

##### Etendo Classic Subapp
:octicons-package-16: Javapackage: `com.etendoerp.subapp.classic`   

The **Etendo Classic SubApp** is a mobile extension of Etendo Classic, offering users a efficient way to access key business windows based on their role. 

The Etendo Classic Sub-application allows users to access and manage their client’s information directly from Etendo Mobile, providing a quick and efficient way **to view data**. In addition, thanks to features such as **scanning assistant**, users can see a demonstration of inventory management by scanning products during physical inventory.

!!! info
    For more information, visit [Etendo Classic Subapp - User Guide](./etendo-classic-subapp.md).

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo Classic Subapp
## Article Path: /User Guide/Etendo Mobile/Bundles/Mobile Extensions/Etendo Classic Subapp
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-mobile/bundles/mobile-extensions/etendo-classic-subapp
## Article Content: 
### Etendo Classic Subapp
:octicons-package-16: Javapackage: `com.etendoerp.subapp.classic`   


#### Overview 

The **Etendo Classic SubApp** is a mobile extension of Etendo Classic, offering users a efficient way to access key business windows based on their role. 

The Etendo Classic Sub-application allows users to access and manage their client’s information directly from Etendo Mobile, providing a quick and efficient way to view data. In addition, thanks to features such as **scanning assistant**, users can see a demonstration of inventory management by scanning products during physical inventory.

!!! info
    - To be able to include the sub-application, the Mobile Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Mobile Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=55A7EF64F7FA43449B249DA7F8E14589){target="_blank"}. <br>
    For more information about the versions available, core compatibility and new features visit [Mobile Extensions - Release Notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-mobile/bundles/mobile-extensions/release-notes.md).


##### Initial Configuration

To allow Etendo windows to be visible in the sub-application, the user must enter to Etendo Classic under the **administrator** role in `Role`>`Window Access` tab and check the box **Show in mobile** in the required windows to be shown in the app.  

![](https://docs.etendo.software/latest/assets/drive/WgAVMD7_UawKp1eedwjq260FyWU41AFdrcP_bK3sS3mm1aM6ZVT7oCnfTd8eiydWSDKpSRQf9eAspqn0PCCNK2sLLd9i_77-LObYTJmA3QbSXK5I4hKxhqT-9Ux788FRmZRdBaZQ.png)

##### Welcome Window

In the Welcome window, the user can enter Profile, Settings and Navigation Menu.

![](https://docs.etendo.software/latest/assets/user-guide//etendo-mobile/user-interface/HomeSubApp.png){ width="300"}


##### Navigation Menu

In the Home option, the user can find an option menu from which they can access to different windows allowed according to their role. From this menu, it is also possible to:

- Go back (Option to Go back to Etendo Mobile)

![](https://docs.etendo.software/latest/assets/user-guide/etendo-mobile/user-interface/DrawerSubApp.png){ width="300" }

In the top section of the menu, the name and the user picture will be shown.

##### Functional Windows

The user, according to their role, will have access to certain windows. The most common ones are: Product, Business Partner, Sales Invoice, Sales Order, Purchase Invoice, Purchase Order, among others.

The access to these windows are represented by folder icons with their corresponding name.

Each window will show its content splitting the records in small boxes, which will contain a preview of main data of these records. That data is configured by default and a customization must be required in case the user wants to add more fields to eliminate some of them, considering that only a max of 5 fields can be displayed.

The same field present in the preview, will be the criteria by which it is possible to filter if the user wants to search for a record.

Considering as an example the Sales Invoice window, the preview of each record provides information regarding the document number and invoice date.

![](https://docs.etendo.software/latest/assets/drive/XZFZ8AALW9g42_1StbQnRpAvIszHoPZrp6QoLw1XUQ68kz4iU5nBYCR6XVwC0k4bGJjZFRbjaGMKfOA7lUVXCtz7At6Tt5p8sJtlYHNny4Z6yn_jfHrthRnxym2n_M0GhXLWDR2p.png){ width="300" }

By clicking any of those boxes, detailed information about the records will be displayed.

The fields will be displayed one below the other. Those with this symbol  “(\*)” in their title are mandatory and those with a pencil icon are editable.

![](https://docs.etendo.software/latest/assets/drive/PY4-klREGqUyi4CtP-0Pp3gn95-eE8hr2lCDLVA4uiYTTYNTnx3exMDsx-LHTSXK5NQBo0z0Xy4sxXera3xgCpISdVbxwMzB3QjurnDInYR5oSvUqfBYDtvbElXXneXCZi8AzJmA.png){ width="300" }

**Folders button** 

By selecting the Folders button, the user can access the different tabs of the window with information about the records being browsed.

![](https://docs.etendo.software/latest/assets/drive/Q0C8H4uO8zHgfmSaWfGMKR5tKMbWlVLOUwUMYG-_qpJBj471MxMFwx0is-MGR0WqleOE4QcqHhWhIhTfeo2xwIX-ftECC3QyeKdI-ygG7o2kGhHJ4CgAoWEgfc1KZnEHHXpaegHG.png){ width="300" }

When entering any of the tabs, the view will be the same as in the parent window, e.i., the records will be displayed in small boxes and, when entering these, the fields will be displayed one below the other.

![](https://docs.etendo.software/latest/assets/drive/XKeIfzzgutwdnJr5kmBVSifBZ1luxaWe3mqYM_U3uHurbAe_0TXkpjjvF5x0RWpIKXRsqYcEifdxpVeNHZjgHZ5-s6uGm8FjIf9RGIfAZoHXZAxlCqzC5H00RUmPBX01SvFgW8v2.png){ width="300" }

![](https://docs.etendo.software/latest/assets/drive/PAfojHNtSzl7SKh6VFDroECbrO7Y0ZSYSnyvDieVQxBZkvATVhtJtNPm6PTpeuLOjzdIB-PIRR-wD1SGCZrHJLdKnhnacGsFhWDSyuOUWlhlMnJ74guN7EsUE2sshKzFyoHn2tiT.png){ width="300" }

To navigate in different levels, the user can resort to the system buttons (Android) or the arrow in the upper left corner or gesture (both systems).

In addition, the **path or breadcrumbs** of which records and tabs are being navigated can be displayed at the top of the screen.

**Actions button**

Through this button, the user can access the list of available processes corresponding to the window being browsed and execute them.

**Attachments button** 

Through this button, the user can attach files.

##### Manage Records

**Create a record**

To create a new record, the user must click the icon with the symbol “+” and complete the desired fields. Those with the symbol (\*) are mandatory.

To edit a field, the user must click the pencil icon. If the field is a list field, click the search icon to display possible options. After selecting the correct data, press the button “Done”.

![](https://docs.etendo.software/latest/assets/drive/3tj34fwiEnwX6YiWsfv8x8ApOWqEjbtQDFERLIEqZJ6LZsXwvlkJffOm-UYEhS1y0onXLf3rtWKy75WpIqy_pn8KSITpMqW6Olqx5CNaGo5vGpex61Tj7WuCy0NxSAjdGUM0hqyt.png){ width="300" }

If the field is a date type, when selecting the search icon a calendar to select the desired date will be displayed.

![](https://docs.etendo.software/latest/assets/drive/pJrdHx58VtWi5NCkN446WAu-Fjg1rHgWe5JJLKGFn7DJxasB8uXnXAtSPrI6gAD_Oe_3ZwkK0Pw9JYVPY6GX0R1a2-mUuYESxwzPpWOf02V0T1jskkbxUy5IddR1m2glXXbcBpJd.png){ width="300" }

Free text fields are edited by selecting the field and entering the desired value.

Once the user has entered the required data, click the save icon.

When the Header is complete, data can be entered in the tabs. To do so, access through the Folders button and edit the required fields, in the same way as in the main Header.

Each time a new record is created in the App, the same record will be created in the Etendo Classic as well.

It is important to consider that the document will always remain in **Draft** status and can only be completed through the Etendo Classic.

**Delete a record**

To delete a record, press it and drag it to the left or hold it, select all the desired records and then the delete icon.

Each time a record is deleted in the App, the same record will be deleted in the Etendo Classic as well.

![](https://docs.etendo.software/latest/assets/drive/dGqkvbLqxGUxpuU75pgKmYjRffl9bHRLmydMSokrcPVdjhBcnIrUNzxvHzGCvCD_2QDmdE2NlAmc0FuXi11ZeNoUPvwhavOdv1jvTD1IyRgA4MKF9mhD6nCmIU-xV7mEV8DrFnb7.png){ width="300" }

**Edit a record**

To edit a record, select the record and then the field to be edited.

Once the changes have been made, press the save icon.

Each time a record is edited in the App, the same record will be edited in the Etendo Classic as well.

**Search a record**

Records can be searched by inserting a value or keyword in the top **Search** bar. This search bar is located both in the main view of each window and in each tab.

Each window will have certain filters available by field which will match those fields configured by default to be displayed in the preview of each record.

In case the user needs to add more filters or to remove some of them, customization will be required.

Continuing with the example of the Sales Invoice window, the available filters are the document number, which will be entered in the search bar together with the invoice date.

![](https://docs.etendo.software/latest/assets/drive/akwqHJKCawDOW20SxB5sxjm_wPN2hW8PfKsU8wAgfYqebtFGAbyTib-mQcX_fUuRhCz9RTDX0Utt1pY0GUF1HuzfwGig3LaOdFdHHLMK2p0DjLUWcvxxYW2agJCmHTx_JRB-8sgp.png){ width="300" }

#### Mobile App Scanning Helpers

:octicons-package-16: Javapackage: `com.smf.mobile.scan`

##### Overview

The **Mobile App Scanning Helpers** allows to use the camera to scan codes in [Etendo Mobile](https://docs.etendo.software/latest/user-guide/etendo-mobile/getting-started.md) App.

##### Usage Examples

 The module has the Inventory Scan process by default, which is responsible for scanning this code from a mobile and thus, change values of the Physical Inventory lines.

 Now, an example will be shown from the Etendo Mobile application:

 When entering the Physical inventory window and select a record, it will be possible to see the **Actions** button.

 ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/PhysicalInventoryActions.jpeg)

In this button, it is possible to see the process it incorporates, called Inventory Scan.

 ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/ActionsInventoryScan.png)

 When pressing this action, it performs the scanning functions to be able to modify values of the physical inventory item that has been selected.
 
 ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/CameraScanner.png) 

When the arrow to continue is selected, the code of the storage bin in which the product is located must be entered manually or scanned.

 ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/StorageBinBarCode.png) 

 After selecting the storage bin, the product to be modified must be scanned or selected.

 ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/ProductBarcode.jpg) 

 Finally, enter the amount needed to add of that product, press Done and Save.

 ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/ProductQuantity.png) 

 In the meantime, in Etendo Classic a line will be added in the **Scan** tab of the physical inventory line, about the scan and the amount that has been set.

 ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/QuantityCount.png) 

In the physical inventory header, by selecting a scan line, the Process Inventory Count can be run. This takes care of adding to the stock the quantity that has been set on the scanned product.

 ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/Process.png) 

And here, the quantities will be observed before the process:

 ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/QuantityBefore.png) 

 And after:

 ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/QuantityAfter.png) 

It will also be noticed that the Product's Stock has been updated in the indicated storage bin with the quantity of the product:

 ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/ProductStockAfterProcess.png) 

==ARTICLE_END==
==ARTICLE_START==
# Article Title: ✨ Getting Started
## Article Path: /User Guide/Etendo Copilot/✨ Getting Started
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-copilot/getting-started
## Article Content: 
### Etendo Copilot

#### Overview

Etendo Copilot is a powerful tool integrated into the Etendo Classic interface, or accessible via API, that provides an efficient way to interact with assistants and use tools developed to solve specific problems. It is an innovative project designed to streamline your processes by harnessing the power of Artificial Intelligence. This page will guide you through the main features of Etendo Copilot.

!!! info
    To install Etendo copilot, you can read the [Copilot Installation](https://docs.etendo.software/latest/developer-guide/etendo-copilot/installation.md) guide in the developer's guide section.

!!! note
    Remember that, to use this functionality, it is necessary to configure an API Key. For this, you can use one of your own, or you can contact the Etendo support team to purchase one.

#### What is Etendo Copilot?

![Copilot Chat](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/getting-started/copilot.png){align=right  width="300"}

At its core, Etendo Copilot is a groundbreaking initiative that redefines how developers and users interact with tools and information. It revolves around a central component, the *Assistant* which acts as the mastermind behind task delegation. This Agent has secondary modules referred to as *Tools*. The seamless communication between these components is facilitated via a RESTful API, ensuring a stateless and scalable interaction model.


#### Assistant

The Assistant serves you making on-the-fly decisions about which Tool is best suited to respond to a particular query. This intelligent decision-making ensures that you receive the most accurate and efficient assistance.

Each assistant has defined instructions, as well as the possibility to configure a knowledge base and a set of skills or tools.
The assistant is able to make decisions based on a question, using the most appropriate knowledge base or tool set to answer a particular query.

In turn, it is possible to configure assistant managers, able to delegate a specific query to other specialized assistants and coordinate between the different assistants in your team to achieve an assertive response.  This intelligent decision-making ensures that you receive the most accurate and efficient assistance. Assistants can be distributed in Etendo modules as datasets or created per environment.

#### Tools

Each tool represents a dedicated and self-contained project, meticulously designed to excel at specialized tasks. Whether it involves code translation, text analysis, or data manipulation, the diverse suite of tools operates in seamless coordination.  

!!! info 
    For a overview of the available tools and their technical details, please refer to the [Available Tools - Developer Guide](https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/overview.md).


####  Key Features


- **Effortless Integration**: Etendo Copilot seamlessly integrates into your environment, adding an extra layer of intelligence to your workflow.

- **On-Demand Assistance**: Send your queries to Etendo Copilot, and the Agent will guide you towards the most suitable Tool for the job.

- **Diverse Expertise**: Our ever-growing selection of Tools covers a wide range of domains, ensuring you always have the right solution.

- **Open AI Assistants**: Copilot is integrated with the Assistants technology developed by Open AI, allowing you to set up your assistants, trained with your own knowledge base, able to generate and interpret new code, and use the specific tools already distributed by Etendo or new ones.  

- **LangGraph**: In this case, this option works as a manager of other assistants and allows to select team members. 

- **Langchain Agent**: These assistants can perform specific tasks in natural language and provide contextualized responses, enabling the implementation of multiple AI models, the use of a proprietary vector database and internal memory management.
- **Multi-Model Assistant** This type of assistant can be used with multi-vendor models such as *Anthropic* and *Gemini*, in addition to existing *OpenAI* models.
- **Attach Files** Etendo Copilot allows users to attach one or multiple files for assistants.

#### Copilot Interface
---

![Copilot Navbar](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/getting-started/copilot-navbar.png)

In the Etendo Classic navigation bar, you'll find a Copilot icon that leads you to the chat pop-up.

Here, you can select an Assistant and engage in a conversation with it. Copilot facilitates communication with `Langchain Agent`, `Multi-Model Assistant`, `LangGraph` and `Open AI Assistant` types, for more information visit [Assistant Windows](https://docs.etendo.software/latest/etendo-copilot/setup-and-usage.md#assistant-window) documentation.

##### Attach Files
---

![Attach-Files](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/getting-started/attach-files.png){align=right  width="300"}

Etendo Copilot allows users to attach one or multiple files for assistants to process. This feature supports any file format, enabling flexibility in use cases. However, the ability to interpret and process these files depends on the specific assistant configuration, the defined tools, and the underlying model used.

This functionality ensures that users can seamlessly incorporate external data into their workflows, whether it involves parsing documents, analyzing spreadsheets, or processing images. Assistants and tools can be tailored to address specific requirements based on the type of attached files, providing contextualized and intelligent responses.

<br>
<br>

##### Visualization Mode
---
<figure markdown>
![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/getting-started/regular-size-copilot.png){align=right width=300}
<br><br>
Copilot, by default, can be used as a pop-up window. This is comfortable to use as an integrated assistant available in any window you are using.
</figure>
---

<figure markdown>
![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/getting-started/full-screen-copilot.png)
<br><br>
Select the fullscreen mode for a more comfortable use when having long conversations.
</figure>

---
<figure markdown>
![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/getting-started/minimized-copilot.png){align=right width=200}
<br><br>
It can also be minimized. In this case, the logo will be shown in the lower-right section of the screen.
</figure>
---
When asked something, Copilot informs the user about the assistants and tools used when processing each message.

!!!note
    When closed and opened again, by default, Copilot will select the last assistant previously used.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Setup and Usage
## Article Path: /User Guide/Etendo Copilot/Setup and Usage
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-copilot/setup-and-usage
## Article Content: 
### Copilot Setup and Usage

#### Initial Configuration

In order to use Copilot, the user must access the Etendo Classic under the role *System Administrator* and generate a token in `Client`>`Secure Web Service Configuration`, clicking **generate key**.

![](https://docs.etendo.software/latest/assets/drive/FsABaJyI_6qxEtcAclALLbHXvoZbuMyyj9Md6M4_7ohvisQ3GVMEjCX05xjdPzRmvgcNqbMku306aaQTxrh34HckHZHBnXcy9iOXQypHsJSGLroa2lGI4Mzr_qPEOiWVc7JYEEGl.png)

#### How to Set up Assistants

In this case, Etendo Copilot has two alternatives:

1. *Dataset installation*: Etendo provides dataset options to install predetermined assistants. In case of installing Etendo Copilot, for example, **Etendo Copilot** dataset is available, which includes Bastian assistant to answer your questions about Etendo documentation.


    ![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/setup/dataset-installing.png)

    !!!info
        To check the list of available assistants, visit [Default Assistants](https://docs.etendo.software/latest/user-guide/etendo-copilot/bundles/overview.md#default-assistants).

    Once the reference data is applied, it is necessary to go to the **Assistant Window**, select the corresponding Assistant and click [Sync Assistant](#sync-assistant-button).

2. *Create your own Assistant*: Use the Assistant window to set up a new assistant with all the specific necessary characteristics.

#### Assistant Window

:material-menu: `Application` > `Service` > `Copilot` > `Assistant`

The Assistant window allows you to define and configure assistants:

![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/setup/assistant-window.png)

- **Name**: Assistant name
- **Description**: Assistant description
- **App Type**:

    **Open AI Assistant**

    These assistants leverage OpenAI technology to provide assistance with a variety of tasks, from natural language processing to complex calculations. The assistants are able to train themselves with their own knowledge base and customized instructions.

    **Langchain Agent**

    These assistants can perform specific tasks in natural language and provide contextualized responses, enabling the implementation of multiple AI models, the use of a proprietary vector database and internal memory management. As well as the use of tools developed to solve specific problems. Some examples of these tools are XML Translation Tool, DB Query Tool, etc. The difference between Langchain and Open AI is that Langchain can save the information locally and it is a multiprovider agent.

    **Multi-Model Assistant**
    This type of assistant extends the “Langchain” type with the particularity that it can be used with models from various vendors such as “Anthropic” and “Gemini”, in addition to the existing “OpenAI” models. In the future, Langchain assistants will be replaced by this type of multi-model agents.

    **LangGraph**

    This option works as a manager of other assistants and allows to select team members. As a library, LangGraph typically works as a software tool designed to help developers and researchers work with linguistic data in a structured, graph-based format. The default maximum amount of interactions between the manager and the assistants is 50, though a different amount can be configured.


=== "Open AI Assistant"

    In case of defining an **Open AI Assistant** type app, the following fields will be enabled: 

    - **Prompt**: Specific instructions of the assistant. These instructions can be written in English or Spanish. 
    - **Description**: The description of the assistant so that the manager can choose the appropriate assistant for each case.
    - **Model**: Dropdown with the Open AI models available from the [AI Models](#ai-models-window) window. If none of the options are selected, the model defined by default for the `Copilot Default Model for OpenAI Provider` [preference](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/application.md#preference) window is to be used.
    - **Retrieval**: If this checkbox is selected, the assistant can retrieve information from the app source. 
    - **Open AI Assistant ID**: Read-only field in which the ID of the assistant once created is displayed.
    - **Code interpreter**: Code Interpreter enables the assistant to write and run code. This tool can process files with diverse data and formatting, and generate files such as graphs.
    - **Open AI Vectordb ID**: Read-only field in which the ID of the vector database is displayed.
    - **Temperature**: This controls randomness, lowering results in less random completions. As the temperature approaches zero, the model will become deterministic and repetitive.

=== "Langchain Agent or Multi-Model Assistant"

    In case of defining an **Langchain Agent** type app, the following fields will be enabled: 

    - **Prompt**: Specific instructions of the assistant. These instructions can be written in English or Spanish.
    - **Description**: The description of the assistant so that the manager can choose the appropriate assistant for each case. 
    - **Model**: Dropdown with the models available,from the [AI Models](#ai-models-window) window.
    - **Temperature**: This controls randomness, lowering results in less random completions. As the temperature approaches zero, the model will become deterministic and repetitive.

=== "LangGraph"

    In case of defining an **LangGraph** type app, the following fields will be enabled: 

    - **Prompt**: Specific instructions of the assistant. These instructions can be written in English or Spanish. 
    - **Description**: The description of the assistant so that the manager can choose the appropriate assistant for each case.
    - **Graph Preview**: It shows the tree of assistants under a certain manager.
    - **Model**: Dropdown with the models available, from the [AI Models](#ai-models-window) window.
    - **Temperature**: This controls randomness, lowering results in less random completions. As the temperature approaches zero, the model will become deterministic and repetitive.

        !!!info
            If this option is chosen, the **Refresh Preview** button is shown, allowing the user to refresh the Graph Preview when changes to the team members are introduced.

!!!info
    The **Prompt** field can have the following dynamic variables: @ETENDO_HOST@, @ETENDO_HOST_DOCKER@ and @source.path@
    These variables will be replaced with the values defined in the properties.
If the App types Open AI Assistant or Langchain Agent are chosen, the tabs shows are [Knowledge](#knowledge-tab) and [Skill and Tools](#skills-and-tools-tab). If the LangGraph option is chosen, the [Team Members tab](#team-members-tab) is shown.

##### Check hosts
This button check the configuration of Etendo Classic and Copilot, to ensure that de comunication between them is correct. In case of any error, a message will be shown.

##### Sync Assistant Button

This process takes care of updating or creating a new assistant, in case it does not exist. In addition to creating the assistant based on the configurations, it initially gets or updates the list of models, and finally gets and/or uploads the files used as knowledge base.

##### Knowledge Tab

In this tab, you can define the files that will be used by the assistant as knowledge base, in prompts or questions. 

!!!warning "File Limitation for Code Interpreter"
    If an assistant has the Code Interpreter check enabled, a maximum of 20 files is supported. Although it is possible to include more files in the knowledge base, exceeding this limit means that some files must be excluded. To do this, use the **Exclude from Code Interpreter** option on the files that you do not want to be processed by the Code Interpreter.

!!!info
    When configuring files for Langchain agent assistants, remember the supported formats are `.zip`, `.txt`, `.pdf` and `.md`. For `.zip` files, note that these are the only formats that the wizard will read: `.txt`, `.pdf`, `.md`, `.py`, `.java` and `.js`.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/setup/knowledge-tab.png)

!!!info
    To load new files, you must do it from the [Knowledge Base File](#knowledge-base-file).

Fields to note:

- **File**: The file selected as knowledge base.
- **Behaviour**: The way in which the assistant will use the file. It has three available options:
    - Add to the assistant as knowledge base: before using this option, it is necessary to synchronize the assistant with the [Sync Assistant](#sync-assistant-button). This behaviour is possible only with **Retrieval** checked.
    - Append the file content to the prompt: In this option, Etendo fails if the file is too large and exceeds the token limit allowed by the assistant. Then, this option is suitable for small files only. The file must be in text format.
    - Add content to each question: In this case, the same restrictions from the previous option apply. 
- **Type**: read-only field showing the type of file selected in the [Knowledge Base File window](#knowledge-base-file-window).
- **Active**: checkbox to activate the knowledge base file.
- **Exclude from Code Interpreter**: Checkbox to exclude files from being processed by the Code Interpreter during synchronization. This checkbox is only editable if the assistant has the Code Interpreter option enabled.
- **Exclude from Retrieval**: Checkbox to exclude files from being considered in the Retrieval process during synchronization.This checkbox is only editable if the assistant has the Retrieval option enabled.
- **OpenAI File ID** Read-only field with Open AI file ID, if applicable.
- **Alias** In case you select behaviour,  `Append the file content to the prompt`, by default it adds the file content to the end of the prompt, the alias can be used to replace the file content inside the prompt, using the wildcard @<alias>@, with the alias you define in this field. 

##### Skills and Tools Tab

In this tab, you can define the tools to be used by the assistant.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/setup/skills-and-tools-tab.png)

Fields to note:

- **Copilot Tool**: The user can select any of the options available in this field, as many as necessary but one at the time.
- **Description**: Read-only field. It shows the description of the tool, used by the assistant to choose the appropriate tool for each case.


!!!info
    To enter new tools, you must do it from the [Skill/Tool window](#skilltool-window).

##### Team Members Tab

In this tab, only present if the LangGraph App type is selected, the LangGraph's assistants are defined. Remember that LangGraph works as a manager of other assistants.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/setup/team-members-tab.png)

Fields to note:

- **Member**: The user can select one or more assistants for the manager. 

    !!! warning
        Remember that you can only select assistants to which you have defined access in the [Assistant Access window](#assistant-access-window).

- **Description**:  Read-only field. It shows the description of the assistant, used by the manager to choose the appropriate assistant for each case.

    !!! warning
        Remember that it is not possible to select an assistant without a description.

#### Knowledge Base File Window

:material-menu: `Application`>`Service`>`Copilot`>`Knowledge Base File`

In the Knowledge Base File window, you can define the files with which the assistants can interact.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/setup/knowledge-base-file-window.png)

- **Name**: File Name.
- **Description**: File description.
- **Type**:
    - **Attached File** 
    This allows you to upload files directly into Copilot for later use during interactions with the assistants.
    - **HQL Query**
    This allows using an HQL query result as a file for knowledge base file.
    - **Remote File** 
    You can provide a public URL from which Copilot will retrieve the file when needed. This makes it easy to access text documents and external text resources.
    - **Code Index** 
    Only available as System Administrator, as access to the source code is required.This type allows assistants to access and consult indexed code files. It enables options related to file path configuration which can be defined in the File Path tab.
    - **Text**
    This allows you to write the content of the file directly in the text area. This option is useful for small texts that must be versioned in the system.
- **Open AI File ID**: Read-only field showing the Open AI ID of the file once it is created.
- **Last Synchronization**: Read-only field displaying the date of the last update with OpenAI.
- **File name**: Name of the remote file in case you want to modify it. This name must include the file format. For example, `example.pdf`.
- **URL**: Source file URL. Only shown if the **Remote file** option is chosen in the Type field.
- **HQL**: Only shown if the **HQL Query** option is chosen in the Type field.
- **Text**: Text content of the file. Only shown if the **Text** option is chosen in the Type field.
- **Skip Splitting**: Checking this box allows you to tell Copilot not to split the file into parts when indexing it. This is necessary when the entire contents of the file are needed when reading the file, while maintaining the context of the entire file.


##### File Path Tab 

!!! warning 
    Only available as System Administrator, as access to the source code is required.

The **File Path Tab** appears when **Code Index** is selected as the file type. 

![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/setup/knowledge-base-file-path.png)

**Path File**: Specify the path where the code files you need the assistant to read are located. 

!!!info
    It is also possible to use other variables such as `@source.path@:` so that the system automatically replaces it with the path where EtendoERP is installed. 
    Besides, wildcards like `*` can be used to access all files of the same type in a directory (e.g., `test/*.java` will access all Java files in the `test` folder), and this one `**`, to include subdirectories (e.g., `test/**/*.java` will access all Java files within `test` and its subdirectories).

!!!note
    If Etendo Classic is a JAR instance, the source code is located in the following path: `@source.path@/build/etendo/`.


#### Skill/Tool Window

:material-menu: `Application`>`Service`>`Copilot`>`Skill/Tool`

In this window , the user can find available tools, distributed in the Copilot bundle, to be used in Copilot assistants.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/setup/skill-tool-window.png)

Some tools require to communicate with Etendo through WebHooks. Their configuration can be found in the Webhooks tab.

!!!info
    In case you want to define new tools, visit [How to Create Copilot Tools](https://docs.etendo.software/latest/developer-guide/etendo-copilot/how-to-create-copilot-tools.md).


#### Assistant Access Window

:material-menu: `Application`>`Service`>`Copilot`>`Assistant Access`

In this window, it is possible to configure access roles for each Assistant. This means you can control who has permission to interact with each assistant. This feature is useful for ensuring that users only have access to functions relevant to their responsibilities. This possibility depends on the role level you have.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/setup/assistant-access-window.png)

!!!info
    This configuration is also possible from the Role window.

!!!note
    In case of deleting an assistant, the related assistant access records are also deleted.

#### Process Request Window

:material-menu: `Application`>`General Setup`>`Process Scheduling`>`Process Request`

In this window, the user can schedule Etendo Copilot background processes by selecting the Assistants Schedule option in the Process field and using all the provided options such as timing, start date, frequency, etc.

!!!info
    For more information, visit [Process Request](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/process-scheduling.md#process-request).

##### Assistant Tab 

!!! Info
    This tab is only visible when an **Assistants Schedule** process is selected.

In this tab, the process to be scheduled can be configured. 

![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/setup/process-request-window.png)

Fields to note:

- **Name**: Name description.
- **Assistant**: Corresponding assistant for the process.
- **Prompt**: Instruction for the process.
- **Active**: Checkbox to select if this tool is active or not.

#### Conversations Window

:material-menu: `Application`>`Service`>`Copilot`>`Conversations`

In this window, the user can find and access all interactions had with Copilot. These records show specific information about these conversations, such as user, creation date and assistant.

![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/setup/conversations-window.png)

Fields to note:

- **User/Contact**: The user that interacted with Copilot
- **ExternalID**: External provider conversation ID
- **Creation Date**: The date of the conversation
- **Visible**: Checkbox to mark to make the record visible
- **Last Message**: Date of the last message of the conversation
- **Assistant**: Assistant selected to interact

##### Messages Tab

In this tab, the different messages included in each specific conversation are shown.

Fields to note:

- **Message**: Exact message used in the conversation
- **Time**: Time of the message
- **Creation Date**: Date of the message


#### AI Models Window

:material-menu: `Application`>`Service`>`Copilot`>`AI Models`

In this window, the user can find and add AI models to be used by the assistants, Available in the drop-down list of models

!!!info 
    - Automatically, the window will be populated with the OpenAI models available, after the first assistant synchronization.
    - Models from other vendors must be entered manually. 

Fields to note:

- **Code**: The code name of the model. It must be in lowercase.
- **Name**: The human-readable name of the model.
- **Provider**: The provider of the model. It must be in lowercase.
- **Max Tokens**: The maximum number of tokens that can be generated by the model. This is a field required in some models, that can be used to limit or expand the model's capabilities, depending of the nature of the model.

##### Examples

![](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/setup/ai-models-windows.png)

**GPT-4**:

- **Code**: gpt-4
- **Name**: GPT-4
- **Provider**: openai
- **Max Tokens**: Not needed

**Anthropic Claude 3.5 Haiku**:

- **Code**: claude-3-5-haiku-latest
- **Name**: Claude 3.5 Haiku
- **Provider**: anthropic
- **Max Tokens**: 8000



==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /User Guide/Etendo Copilot/Bundles/Copilot Extensions/Overview
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-copilot/bundles/overview
## Article Content: 
### Copilot Extensions

:octicons-package-16: Javapackage: `com.etendoerp.copilot.extensions`

:material-store: Etendo Marketplace:  [Copilot Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="_blank"}

#### Overview

The Copilot Extensions Bundle includes functionalities that help you streamline your daily tasks using artificial intelligence.

#### Default Assistants

The apps described below belong to preconfigured reference data included in the corresponding modules.

- :material-robot: **Bastian**
    This **Assistant** is able to answer questions with indexed information from the official Etendo documentation.

- :material-robot: **Purchase Expert**
    This assistant is capable of performing operations related to loading purchase orders by chat interaction or through images or `PDF` files.

    !!! info
        For more information, visit [Purchase Expert user guide](https://docs.etendo.software/latest/user-guide/etendo-copilot/bundles/copilot-purchase-expert.md).

- :material-robot: **SQL Expert**
    This assistant is capable of help users read information from the database. It allows users to ask questions in natural language and get the SQL query that retrieves the information they need.

    !!! info
        For more information, visit [SQL Expert user guide](https://docs.etendo.software/latest/user-guide/etendo-copilot/bundles/sql-expert.md).


#### Modules

##### Etendo Copilot

:octicons-package-16: Javapackage: `com.etendoerp.copilot`

Etendo Copilot is a platform that optimises development time with AI-enabled tools to reduce development time and improve development quality.

!!! info
    For more information, visit [Etendo Copilot user guide](https://docs.etendo.software/latest/user-guide/etendo-copilot/setup-and-usage.md).


##### Etendo Copilot SubApp

:octicons-package-16: Javapackage: `com.etendoerp.subapp.copilot`

The **Etendo Copilot Subapp** is designed to integrate seamlessly with the existing features of Etendo Copilot, extending its functionality to mobile and tablet devices. This subapplication allows users to interact with AI-driven copilot assistants directly from their mobile devices, enhancing productivity and accessibility on the go.

The Etendo Copilot Subapp offers key features such as the ability to **attach files, interact with Copilot assistants, and access specific windows** based on the user’s role. The assistants dynamically appear according to the user’s assigned role, ensuring a personalized experience tailored to their responsibilities within the system.

With compatibility for both mobile phones and tablets, this subapplication ensures flexibility in how users can access and leverage the Copilot assistants, facilitating smoother workflows across different devices.

!!! info
    For more information about sub-application configurations, visit [Dynamic App - Role Configuration](https://docs.etendo.software/latest/etendo-mobile/getting-started.md#dynamic-app-role-configuration).


![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/bundles/overview/etendo-copilot-subapp2.png){ width="500" }
![alt text](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/bundles/overview/etendo-copilot-subapp1.jpg){ width="170" }


##### Copilot OCR Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.ocrtool`

This module implements the Optical Character Recognition (OCR) tool, capable of reading images and PDF and returning a JSON object with the extracted information.
 
!!! info
    For more information, visit [Copilot OCR Tool](https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/ocr-tool.md) developer guide.

##### Copilot OpenAPI Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.openapi`

This Etendo Copilot tool allows interacting with APIs taking the platform to another level.

!!! info
    For more information, visit [Copilot OpenAPI Tool](https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/openapi-tool.md) developer guide.

##### Copilot Purchase Expert

:octicons-package-16: Javapackage: `com.etendoerp.copilot.openapi.purchase`

This module includes an assistant capable of performing operations related to the purchasing module, such as loading purchase orders. 
!!! info
    For more information, visit [Copilot Purchase Expert](https://docs.etendo.software/latest/user-guide/etendo-copilot/bundles/copilot-purchase-expert.md) user guide.

##### Database Query Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.dbquerytool`

This tool allows the user to connect to an SQL Database and generate and/or execute SQL Queries from a natural language input.

!!! info
    For more information, visit [Database Query Tool](https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/database-query-tool.md) developer guide.

##### Dev Assistant

:octicons-package-16: Javapackage: `com.etendoerp.copilot.devassistant`

The **Dev Assistant** is designed to develop other assistants to facilitate processes of creating windows, tabs, fields, background processes, Event Handlers, Jasper reports and much more.

!!!info
    For more information, visit: [Dev Assistant](https://docs.etendo.software/latest/developer-guide/etendo-copilot/bundles/dev-assistant.md) developer guide.



##### XML Translation Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.xmltranslationtool`

This tool allows the user to translate the content of an XML file from one language to another, as specified within the XML.

!!! info
    For more information, visit [XML Translation Tool](https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/xml-translation-tool.md) developer guide.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Copilot Purchase Expert
## Article Path: /User Guide/Etendo Copilot/Bundles/Copilot Extensions/Copilot Purchase Expert
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-copilot/bundles/copilot-purchase-expert
## Article Content: 
### Copilot Purchase Expert

:octicons-package-16: Javapackage: `com.etendoerp.copilot.openapi`

:octicons-package-16: Javapackage: `com.etendoerp.copilot.openapi.purchase`


#### Overview

By using certain tools and a prompt that gives the Assistant appropriate context, it is possible to make an assistant able to perform a certain task in an efficient way.

For this particular case, we have configured an assistant with the functional methodology of creating purchase orders, and we have equipped it with 3 tools:

- [**OCR Tool**](https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/ocr-tool.md): This tool is capable of reading images and PDF and returning a JSON object with the extracted information.

- **Etendo API Tool**: This tool explains to the assistant how to interact with the Etendo API, and what are the available endpoints and their descriptions.

- **API Call Tool**: This tool allows Copilot to make a call to an API, and read and write data in Etendo. This tool will be responsible for calling the API endpoint, and will return the response.


#### Setup

 - In the module `com.etendoerp.copilot.openapi.purchase` there is a dataset with the basic configuration of the **Copilot Purchase Expert**. It can be imported in the `Application`>`General Setup` > `Enterpice Model` > `Enterprise module management` window. 
 
 - After importing the configuration, it is necessary to configure the OpenAI model for the imported **Assistant** and click [Sync Assistant](https://docs.etendo.software/latest/setup.md#sync-open-ai-assistant-button) button to create the corresponding assistant.
 
 - Finally, give access to the role and configure the permissions in [Role](https://docs.etendo.software/latest/setup.md#role-window) Window.

!!! warning
    In the last paragraph of the prompt, the link "http://localhost:8080/etendo/?tabId=294&recordId={ORDER_HEADER_ID}" is a link for localhost, it is necessary to replace it with the real link of the Etendo system.

!!! info
    For more information about how to import the dataset (referencedata) and configure the assistant, see [How to Setup Assistants](https://docs.etendo.software/latest/setup.md#how-to-set-up-assistants) page.

#### Functionality

![CreateOrder](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/bundles/copilot-purchase-expert/createorder.gif){align=right  width="300" }

1. When interacting with the assistant, you may be asked to insert a purchase order to a Business Partner, indicating the date and other general data, the items and their quantities. 
2. The assistant will then make calls to Etendo API to search and read the info needed to create the purchase order. 
3. After that, the assistant will call the API to insert the purchase order in Etendo.
4. For the items, the assistant will search the items in the Etendo API for the products' information, and will insert the items in the purchase order.
5. Finally, the assistant will return the link to the purchase order created in Etendo.


!!! Info "Technical Details for Developers"
    More information about how to integrate Copilot with other APIs can be found in the [OpenAPI interaction with Copilot](https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/openapi-tool.md) page.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: SQL Expert
## Article Path: /User Guide/Etendo Copilot/Bundles/Copilot Extensions/SQL Expert
## Article URL: 
 https://docs.etendo.software/latest/user-guide/etendo-copilot/bundles/sql-expert
## Article Content: 
### SQL Expert

:octicons-package-16: Javapackage: `com.etendoerp.copilot.dbquerytool`

#### Overview

This Assistant is designed to help users read information from the database. It allows users to ask questions in natural language and get the SQL query that retrieves the information they need. The tool uses the [DB Query Tool](https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/database-query-tool.md) to infer the necessary information to generate the SQL query. The user can ask questions about the database, and the Assistant will determine whether to return a SQL query or execute the query and return the obtained result.

#### Components

The SQL Expert Assistant is composed of the following components:

- **DBQueryGenerator Tool**: This tool allows querying Etendo for available tables in the database and the columns of each table. It also enables the Assistant to execute SQL queries in the database that are generated by the Assistant.

- **DBQueryExec Webhook**: This Webhook allows the Assistant to execute SQL queries in the database. The DBQueryGenerator tool sends the SQL query to the Webhook, and the Webhook executes the query in the database and returns the result to the Assistant. This is a secure way to execute SQL queries in the database, as Etendo handles the security of the database connection and query execution.


#### Installation

This module is included in the Copilot Extensions Bundle

!!! info
    To be able to include this assistant, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).


In addition, you can install only the module containing the **SQL Expert** by following the guide on [How to install modules in Etendo](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/install-modules-in-etendo.md), looking for the GitHub Package `com.etendoerp.copilot.dbquerytool`.
   
After install the module: 

1. It is necessary to add the ```gradle.properties``` file with the following configuration:
    ``` properties
    ETENDO_HOST=http://localhost:8080/etendo
    ```

    !!! warning
        Replace http://localhost:8080/etendo with the real url of the Etendo system.

2. Do a compilation with a database update, to register the tool and the assistant in the database.
    ``` bash title="Terminal"   
    ./gradlew update.database smartbuild --info
    ```

3. Restart Tomcat and check that a new assistant named **SQL Expert** has been created in the `Application` > `Service` > `Copilot` > `Assistant` window.

4. Run **Sync Assistant** process.

5. Restart Docker image using `./gradlew resources.down` and `./gradlew resources.up` tasks.

    !!! note 
        If you have problems with shutting down the container, you can use the `docker ps` command to see the container id and then use `docker stop <container_id>` to stop it manually.

7. You can use the **SQL Expert** assistant as a **System Administrator**. In case of using this assistant with other roles, first, you need to configure the coplilot app access in the **Role** window as described in the [initial assistant configuration](https://docs.etendo.software/latest/etendo-copilot/setup.md#role-window) and also configure access to the role in the [WebHooks](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/etendo-webhooks.md#assign-allowed-roles) window for the WebHook **DBQueryExec**, this webhook is automatically added when the module is installed.

#### Examples

##### Examples of questions for information retrieval

1. 
    <figure markdown>
    ![DBQueryGenerator tool](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/bundles/sql-expert/sql-assistant.png){align=right width=300}
    <br><br>
    **What is the amount of the last F&B España - Región Sur organization sales invoice?**
    </figure>

2.  

    <figure markdown>
    ![DBQueryGenerator tool](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/bundles/sql-expert/sql-assistant-2.png){align=left width=300}
    <br><br>
    **Can you tell me which is the invoice  with the highest registered amount?**
    </figure>
 
3.
    <figure markdown>
    ![DBQueryGenerator tool](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/bundles/sql-expert/sql-assistant-3.png){align=right width=300}
    <br><br>
    **Can you execute the sum of the orders in the last month of 2016?**
    </figure>

##### Examples of SQL query generation

1. 
    <figure markdown>
    ![DBQueryGenerator tool](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/bundles/sql-expert/sql-assistant-3.png){ align=right width=300 }
    <br>
    **Can you execute the sum of the orders in the last month?**
    </figure>

2.  <figure markdown>
    ![DBQueryGenerator tool](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/bundles/sql-expert/sql-assistant-4.png){ align=right }
    <br>
    **Query to know the name of the best 5 customer of junuary 2011?**
    </figure>
    
3.  <figure markdown>
    ![DBQueryGenerator tool](https://docs.etendo.software/latest/assets/user-guide/etendo-copilot/bundles/sql-expert/sql-assistant-5.png){ align=right }
    <br>
    **Query to obtain which is the invoice with the highest registered amount?**
    </figure> 

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /Developer Guide/Overview
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/overview
## Article Content: 
#### Welcome to the Developer's Section

Welcome to the Developer's Documentation Corner, a dedicated space crafted exclusively for you! Here, you'll find insights, resources, and guidelines tailored to fuel your creative endeavors and empower you to customize Etendo according to our specific product types.

Discover how you can wield the power of Etendo to craft unique experiences. From insightful APIs to advanced integration techniques we've meticulously adapted to your development needs.

So, roll up your sleeves and ignite your creativity.

---

<figure markdown>
![etendo-classic.png](https://docs.etendo.software/latest/assets/developer-guide/overview/etendo-classic.png){align=right width=400}
<br><br>
##### Here you will find exclusive information for developers, from key concepts to how-to guides, as well as how to install enhancements for Etendo platform features.
</figure>


---

<figure markdown>
![etendo-rx.png](https://docs.etendo.software/latest/assets/developer-guide/overview/etendo-rx.png){align=left width=400}
<br><br>
##### This section is exclusively dedicated to our reactive platform capable of executing microservices with database interaction and asynchronous actions: Etendo RX.                                          
</figure>

---

<figure markdown>
![etendo-mobile.png](https://docs.etendo.software/latest/assets/user-guide/overview/etendo-mobile.png){align=right width=400}
<br><br>
##### You will find information on how to develop the Etendo mobile subapplications and Etendo RX based subapplications.
</figure>


---

<figure markdown>
![etendo-copilot.png](https://docs.etendo.software/latest/assets/user-guide/overview/etendo-copilot.png){align=left width=400}
<br>
##### In this section, you will find everything about our Copilot project. Currently, you have getting started information as well as data about the XML Translator tool, and also, how to develop new copilot tools. 
</figure>

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Install Etendo Development Environment
## Article Path: /Developer Guide/Etendo Classic/✨ Getting Started/Installation/Install Etendo Development Environment
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/install-etendo-development-environment
## Article Content: 
### Install Etendo Development Environment

#### Overview

This section explains how to install and run a new local Etendo environment.


#### Install Etendo in local Environment

To install Etendo in a development environment, follow the same steps as described in the [Etendo Installation Guide](https://docs.etendo.software/latest/getting-started/installation.md), the only difference is that we open the project with intelliJ and run Tomcat locally.


#### Run Etendo Development Environment

=== "IntelliJ IDEA Community Edition"

    1. Download and install [IntelliJ IDEA Community Edition](https://www.jetbrains.com/idea/download){target="_blank"}

    2. Open Etendo source directory with IntelliJ:
        ![open-project.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-etendo-development-environment/open-project.png)

    2. Install Smart Tomcat plugin:
        To install, go to `Settings` >> `Plugins` and search for `“Smart Tomcat”`
        ![install-smart-tomcat.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-etendo-development-environment/install-smart-tomcat.png)

    3.  Download [Apache Tomcat](https://tomcat.apache.org/download-90.cgi){target="_blank"} and unzip it in the project directory

    4. Setting up Tomcat
        
        - Go to Current File >> Edit configurations.
        ![edit-configurations.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-etendo-development-environment/edit-configurations.png){ align=right }
        - Add new Smart Tomcat Configuration, clicking "+"
        - Name: Tomcat
        - Tomcat Server: Select unziped Apache Tomcat directory
        - Deployment directory: Select `WebContent` directory in the project
        - Context path: define the same context path defined in gradle.properties file (by default "/etendo" )
        - Before launch: Remove all default tasks

        ![add-new-configuration.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-etendo-development-environment/add-new-configuration.png) 

    5. Start the Tomcat 

        ![edit-configurations.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-etendo-development-environment/start-tomcat.png)

        !!! success
            Now you have a new Etendo environment running in [http://localhost:8080/etendo](http://localhost:8080/etendo)

        !!! tip "Default credentials"
            User: admin  
            Password: admin



=== "IntelliJ IDEA Ultimate"

    1. Download and install [IntelliJ IDEA Ultimate](https://www.jetbrains.com/idea/download){target="_blank"}

    2. Open Etendo source directory with IntelliJ:

        ![open-project-ultimate.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-etendo-development-environment/open project-ultimate.png)

    3. Seting up Tomcat
        
        - Go to Current File >> Edit configurations.
            
            ![edit-configurations.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-etendo-development-environment/edit-configurations.png)
        
        - Select the Tomcat configuration that appears first in the list, check the Tomcat server configuration on your machine.
            
            ![add-new-configuration-ultimate.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-etendo-development-environment/add-new-configuration-ultimate.png)
        - In the Deployment section, add external sources 

            ![add-new-configuration-ultimate.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-etendo-development-environment/add-external-source.png)
        - Selec the C `${env.CATALINA_HOME}/webapps/etendo` folder  or  the and then click the OK button.

            ![config-deployment-folder.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-etendo-development-environment/config-deployment-folder.png)

    4. Start the Tomcat

        ![edit-configurations.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-etendo-development-environment/start-tomcat.png)

        !!! success
            Now you have a new Etendo environment running in [http://localhost:8080/etendo](http://localhost:8080/etendo)

        !!! tip "Default credentials"
            User: admin  
            Password: admin



#### Enable Etendo Logs (Optional)

1.  Open the file `config/log4j2-web.xml`, find the line `<!-- <AppenderRef ref="Console"/> -->` and uncomment it:

    ``` XML title="config/log4j2-web.xml"
    ...
    <Loggers>
        <Root level="info">
        <AppenderRef ref="RollingFile"/>
        <!-- Add this appender to show log messages in console i.e Eclipse: -->
        <AppenderRef ref="Console"/>  << UNCOMMENT THIS LINE
        </Root>
    ...
    ```
2. Run smartbuild task

    ``` bash title="Terminal"
        ./gradlew smartbuild --info 
    ```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: IntelliJ Code Formatting
## Article Path: /Developer Guide/Etendo Classic/✨ Getting Started/Installation/IntelliJ Code Formatting
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/intellij-code-formatting
## Article Content: 
#### Overview

This document covers how IntelliJ IDEA  is capable of importing code formatter settings.

#### Code Formatting

1. First, download the following [IntelliJ formatting file](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/code-formatting-style-in-intellij/etendo.xml){: download="etendo.xml"}.
2. Open :simple-intellijidea: IntelliJ IDEA Settings 
3. Search Code Style → Java
4. Click the gear icon → Import Schema → IntelliJ IDEA code style XML. 

    ![code-style-java](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/code-formatting-style-in-intellij/code-style-java.png)

5. Select the file downloaded first and import the schema.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Use of Repositories in Etendo
## Article Path: /Developer Guide/Etendo Classic/✨ Getting Started/Installation/Use of Repositories in Etendo
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/use-of-repositories-in-etendo
## Article Content: 
### Use of Repositories in Etendo

#### Overview

While Etendo supports any Maven package repository, we will focus on explaining how to configure Etendo's standard repositories credentials.

By default, Etendo Core and extension packages will be downloaded from the GitHub repositories.

#### Using a Personal Access Token in Etendo Projects

When working with Etendo projects, it is important to have the necessary credentials to access GitHub repositories. One way to do this is by using a Personal Access Token. In this guide, we will walk through the steps of setting up and using a Personal Access Token in an Etendo project.

##### Generating a Personal Access Token

!!! info
    Along your Etendo License, you will receive an email to join the **Etendo Partners Team** in GitHub, you have to create or associate a GitHub account with the email invited, and your user will have read access to all the Etendo Repositories.

To generate a Personal Access Token, follow these steps:

1. Log in to your GitHub account.
2. Click on your profile picture in the top right corner and select *Settings.*
3. Select *Developer settings* from the left menu and click on *Personal access tokens.*
4. In the developer settings page, click on *Personal access tokens*

    ![personal-access-tokens.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/use-of-repositories-in-etendo/personal-access-tokens.png) 

5. Click the *Generate new token (classic)* button. 

6. Give your token a name and select the permissions you want to grant it. In this case, select *read:packages* check.

    !!! warning
        It is strongly recommended to set an expiration date, but it is also posible to set an undefined expiration.

    ![new-personal-access-token.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/use-of-repositories-in-etendo/new-personal-access-token.png) 

6. Click *Generate token* and take note of the token value.

    !!! warning
            You will not be able to see this value again, so be sure to copy it and keep it in a secure location.

##### Setting Up the Personal Access Token in Etendo Projects

Once you have generated a Personal Access Token, you will need to set it up in your Etendo project. Follow these steps:

1. Open the `gradle.properties` file in your project.
2. Add the following lines to the file, replacing `YOUR_GITHUB_USERNAME` and `YOUR_PERSONAL_ACCESS_TOKEN` with your actual GitHub username and Personal Access Token:
        
    ``` bash title="gradle.properties"
    nexusUser=
    nexusPassword=
    githubUser=YOUR_GITHUB_USERNAME
    githubToken=YOUR_PERSONAL_ACCESS_TOKEN
    context.name=etendo
    bbdd.sid=etendo
    bbdd.port=5432
    ```

3. Save the `gradle.properties` file.

##### Using the Personal Access Token in Gradle Tasks

With the *Personal Access Token* set up in your Etendo project, you can now use it to access GitHub repositories in your Gradle tasks. For example, if you are using the task

``` bash title="Terminal"
./gradlew dependencies
```

to resolve dependencies, it will use your *Personal Access Token* to authenticate with GitHub.

##### Revoking a Personal Access Token

If you no longer need a personal access token or believe it has been compromised, you should revoke it immediately. To do so, follow these steps:

1. Go to your *Settings* page in GitHub.
2. Click *Developer settings* in the left-hand sidebar.
3. Click *Personal access tokens*.
4. Find the token you want to revoke and click the *Revoke* button.
5. Confirm that you want to revoke the token.

Your token will be immediately invalidated and will no longer work.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Install Modules
## Article Path: /Developer Guide/Etendo Classic/✨ Getting Started/Installation/Install Modules
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/install-modules-in-etendo
## Article Content: 
#### Overview
This page explains how to install modules either from the Etendo Marketplace or by searching for the dependencies on GitHub, taking into account that these can be installed in JAR or Sources format. 

#### 1. Dependency resolution

It is important to mention that the dependencies are resolved from GitHub, so you must have the credentials properly configured as explained in the [Etendo installation guide](https://docs.etendo.software/latest/getting-started/installation.md). Depending on the level of access your GitHub user has, you have access to packages in public or private repositories.

!!! success "Info"
    Along your license, you have access to all packages distributed by Etendo.


#### 2. Search for dependencies
There are two ways to search for and install modules on Etendo: 

=== ":material-store: Marketplace"

    Install bundles from the Etendo Marketplace: In this case, you will install bundles that include a set of modules grouped by functionality.

    ![](https://docs.etendo.software/latest/assets/drive/LWaskO0G5UdmwGWdwZy5nHf4FcCTMBcgObbWv_PSjtMPCOAeqBPNSoLKrqheTLiNqc_aiqbVrJYYJlCQ_o7rGGofcqN0-myRi3u3YpXYNuVt1FYIli0RbiWYD8hYGcDLMpRYVS_dHOGGOLY117nmB2o.png)
    
    1.  First, go to [Etendo Marketplace](http://marketplace.etendo.cloud){target="_blank"}.
    2.  Search for the bundles that you want to install.
    3.  Click on the bundle to see its details, such as the version, description, and compatibility.
    4.  Check the requirements for the module, such as any dependencies or system configurations needed to run the module.
    5.  Select the format for the installation of the module, Source or JAR, and copy the corresponding dependency. E.g
    ![marketplace-dependency.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-modules-in-etendo/marketplace-dependency.png)


=== ":simple-github: GitHub Packages"

    In case you only need to install one package or a set of packages separately, you can do so by resolving the dependencies from GitHub.

    First, you can search within the [Etendo Software organization packages](https://github.com/orgs/etendosoftware/packages){target="_blank"} section for the necessary javapackage. Or if it is your own repository, search for the packages associated with it.

    Exploring the bundles and modules documentation, you find the javapackages of each one. E.g. [Banking Pool](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/overview/#banking-pool) documentation.
    
    ![search-packages.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-modules-in-etendo/search-packages.png)

    When you select a package, you see the related information, e.g. 

    ![package.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-modules-in-etendo/package.png)

    You should use this information to include the dependency, in our case in Gradle format.

#### 3. Set dependencies

Based on the modules format you want to work with, you need to specify different configurations.

- In your Etendo project, open the `build.gradle` file.
- In the dependencies area, declare your modules.

=== ":octicons-package-16: Sources Format"

    If you want to work with source modules, declare your dependencies using the *moduleDeps* configuration. (notice the @zip extension)

    ```groovy title="ModuleDeps Template"
        moduleDeps('<groupId>:<artifactId>:<version>@zip'){ transitive = true }
    ```

    E.g:

    ```groovy title="build.gradle"
    dependencies {
        // Add your dependency here
        moduleDeps('com.etendoerp:bankingpool:1.4.1@zip'){ transitive = true }
    }
    ```

===  ":material-language-java: JAR Format"

    If you want to work with JARs modules, declare your dependencies using the *implementation* configuration.

    ```groovy title="Implementation Template"
        implementation('<groupId>:<artifactId>:<version>')`
    ```
    E.g:

    ```groovy title="build.gradle"
    dependencies {
    // Add your dependency here
        implementation('com.etendoerp:bankingpool:1.4.1')
    }
    ```


!!! info
    You can declare a specific version (e.g. '1.0.0') or an interval of versions: <br>
    \[begin, end\] - Both versions are included <br>
    (begin, end) - Both versions are not included <br>
    \[begin, ) - From a base version to the latest one <br>
    And any other possible combination

??? info "Gradle Exclusion Rules"
    You can make use of Gradle exclusion rules to prevent downloading a specific transitive module. Refer to [Gradle documentation](https://docs.gradle.org/current/userguide/dependency_downgrade_and_exclude.html#sec:excluding-transitive-deps){target="_blank"}


#### 4. Resolve (download) and Install Dependencies


=== ":octicons-package-16: Sources Format"

    To work with sources, you must expand manually the modules with a *Gradle* task.

    ``` bash title="Terminal" 
    ./gradlew expandModules
    ```  
    
    This task will try to download or update the modules declared as *moduleDeps* in the `build.gradle` file.   
    
    A menu is displayed showing the modules that will be expanded, you have to confirm manually to continue with the expansion.

    ![expand.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/install-modules-in-etendo/expand.png)

    You can manually exclude the expansion of modules adding it in the *sourceModulesInDevelopment* list.

    ```groovy title="build.gradle"
    etendo {
        sourceModulesInDevelopment = ['com.test.custommodule']
    }
    ```

    ??? warning 
        *Transitive dependencies* (not declared in the *moduleDeps* configuration), by default will be extracted, updating or overwriting the source modules if exists. To prevent this behavior, you can set in the plugin extension the flag *overwriteTransitiveExpandModules* to false.

        ```groovy title="build.gradle"
        etendo {
            overwriteTransitiveExpandModules = false
        }
        ```

    To expand only a specific module, you can use the `-Ppkg` flag and have defined the module in the *moduleDeps* configuration.

     ```bash title="Terminal"
     ./gradlew expandModules -Ppkg=com.etendoerp.custommodule
     ```

    !!! info
        Only the defined module will be updated or installed.
        *Transitive dependencies* will *not* be updated or installed.

===  ":material-language-java: JAR Format"

    To work with JAR modules, you need to resolve the dependencies running

    ``` bash title="Terminal"
    ./gradlew dependencies 
    ```
    When a new Etendo *JAR dependency* (implementation) is added or the version is updated, it is necessary to run an *update.database* before executing any *compilation* task (smartbuild, compile.complete, etc).
    You can force the compilation tasks adding to the Etendo extension the ignore flag

    ```groovy title="build.gradle"
    etendo {
        ignoreConsistencyVerification = true
    }
    ```

    Or run the tasks with the `-PignoreConsistency=true` flag.

    By default, Etendo does not allow you to add a *JAR dependency* with an old version to the current installed one.
    You can ignore this behavior adding the module name to be updated with an old version in the

    ```groovy
    etendo {
        ignoredArtifacts = ['com.etendoerp.mymodulename']
    }
    ```

Finally, update the database and compile the new modules.

```bash title="Terminal"
./gradlew update.database smartbuild 
```

!!! success ":simple-apachetomcat: Restart the Tomcat"
    Restart the Tomcat server and check the installation. <br>
    The module is ready to use in Etendo!


#### Installing translation modules

If you want to install translation modules, you have to follow some more steps.The translation modules are installed automatically when you compile the code for the first time. E.g. after running `./gradlew install` command to create a new client's instance.  
But if you want to update a translation module version, you can execute:

```bash title="Terminal"

./gradlew install.translation -Dmodule=<javapackage>
./gradlew update.database smartbuild
```

??? info
    The `install.translation` task changes the status of the module and the translations is installed on the next run of `update.database`.

Another option to force the installation of all the translation modules is to add the `forceRefData=true` property in the `gradle.properties` file and then running:

```bash title="Terminal"
./gradlew setup
./gradlew update.database smartbuild
```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Install Translation Bundles
## Article Path: /Developer Guide/Etendo Classic/✨ Getting Started/Installation/Install Translation Bundles
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/install-translation-bundles-in-etendo
## Article Content: 
### Install Translation Bundles in Etendo

#### Overview
This page will explain how to install translation bundles, as their process is different from that of the other bundles. 
These bundles require the correct version of the ones they translate to be installed manually.

#### Installation steps

To install a bundle, follow the corresponding section of the documentation on how to [Install Modules in Etendo](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/install-modules-in-etendo.md).

!!! warning
    Remember to add both the translation bundle and the correct version of the bundle it translates as dependencies! Otherwise, the environment's compilation will fail. For example:


    === ":material-language-java: JARs"

        ```groovy

        dependencies {
            // Add your dependency here
            implementation ('com.etendo:example.module:1.0.0')
            implementation ('com.etendo:example.module.es_es:1.0.0')
        }
        ```

    === ":octicons-package-16: Sources"

        ```groovy
        dependencies {
            // Add your dependency here
            moduleDeps ('com.etendo:example.module:1.0.0@zip'){ transitive = true }
            moduleDeps ('com.etendo:example.module.es_es:1.0.0@zip'){ transitive = true }
        }
        ```

#### Bundle Compatibility

For information on what bundle version is compatible with which translation bundle, the documentation and [Release Notes](https://docs.etendo.software/latest/whats-new/overview.md){target="_blank"} for each bundle can be referred to.

#### Troubleshooting

- **Access to dependencies not allowed**: check you have your GitHub credentials and their access level correctly configured. Refer to the [Etendo installation guide](https://docs.etendo.software/latest/getting-started/installation.md) for more information.
- **Fields, columns, etc. not found**: check you have set the translated bundle version compatible with the version of the translation bundle you want to install. Refer to the translation bundle's [Release Notes](https://docs.etendo.software/latest/whats-new/overview.md){target="_blank"} for a list of the compatible bundle versions.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: PostgreSQL Configuration
## Article Path: /Developer Guide/Etendo Classic/✨ Getting Started/Installation/PostgreSQL Configuration
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/postgresql-configuration
## Article Content: 
### PostgreSQL Configuration 

#### Overview

This section explains how to set up postgres to work properly with Etendo Classic, once you have installed postgres, you need to make sure that the configuration is set up properly.

#### System User configuration
When you [install postgres](https://www.postgresql.org/download/){target="_blank"}, it creates a system user called `postgres`, if you not set up a password for this user, you can do it by running the following command

```bash title="Terminal"
sudo -u postgres psql
```
You will inmediatly enter the postgresql shell, then you can set up the password by running the following example:

``` sql title="Postgresql Shell"
ALTER USER postgres PASSWORD 'syspass';
```

!!! info
    Etendo Classic has `syspass` preconfigured as the default password for the postgres user. In case of changing the system password, this configuration variable should be changed by following the Etendo Classic [installation guide](https://docs.etendo.software/latest/getting-started/installation.md).

#### Etendo Classic User configuration

!!! warning
    In case of installing Etendo from scratch by executing the command `./gradlew install`, the installation process creates the default user and password `tad` automatically, and they are already includes preconfigured. In case you do not need to change the `tad` user, you can skip this section.

If you need to create a Postgres user and password for the Etendo application, you can do it by running the following command

```bash title="Terminal"
PGPASSWORD=system_password psql -U postgres -d postgres -h localhost
```

You will inmediatly enter the postgresql shell, then you can create the user by running the following example:

``` sql title="Postgresql Shell"
CREATE ROLE tad LOGIN PASSWORD 'tad'  CREATEDB CREATEROLE VALID UNTIL 'infinity';
```

!!! note
    The user and password created can be configured in the `gradle.properties` file, as can be seen in the Etendo Classic [installation guide](https://docs.etendo.software/latest/getting-started/installation.md#install-etendo).


#### Required Configuration
Make sure you have the following PostgreSQL configuration in your `postgresql.conf`, this file is located wherever you have postgresql installed

``` title="postgresql.conf"
lc_numeric = 'en_US.UTF-8'
max_locks_per_transaction = 128
```        

##### Required PostgreSQL extensions
Etendo Classic currently requires two PostgreSQL extensions to be available:

**uuid-ossp** to generate UUID's
**pg_trgm** to have index support for fast contains search

**Since version 10 those are part of the normal PostgreSQL server installation.**

!!! note
    After modifying the file restart postgresql service

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Dependency Manager
## Article Path: /Developer Guide/Etendo Classic/✨ Getting Started/Installation/Dependency Manager
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/dependency-manager
## Article Content: 
### Dependency Manager

:octicons-package-16: Javapackage: `com.etendoerp.dependencymanager`

#### Overview

<iframe width="560" height="315" src="https://www.youtube.com/embed/du8EYoSsZ68?si=HDmwg-JxPg7gJ2sT" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

With this module, the user can access from the Etendo Classic interface all Etendo packages published in Etendo Software repositories. 

In addition, from the Module Management window you can query packages, available versions, dependencies and install new packages. 

Then, from the Dependency Management window you can update, remove and change the format of already installed modules. 

#### Installation 

To install this package that will allow you to manage other packages directly from the Etendo Classic interface you must add in the `build.gradle` file the following dependency:


``` groovy title="build.gradle"
dependencies {
// Add your dependency here
    implementation('com.etendoerp:dependencymanager:latest.release')
}
```
!!! warning
    You must make sure to use Gradle plugin version `1.5.1` or higher, check the plugins section also in the `build.gradle` file.

    ``` groovy title="build.gradle"
    plugins {
    id 'java'
    id 'war'
    id 'groovy'
    id 'maven-publish'
    id 'com.etendoerp.gradleplugin' version '1.5.1'
    }
    ```

Then, to install the module run the command gradle : 

``` bash title="Terminal"
./gradlew update.database smartbuild
```

!!! info 
    For more information visit [Install Modules](./install-modules-in-etendo.md#2-search-for-dependencies) guide. 

#### Module Management
:material-menu: `Application` > `Etendo Dependencies Management` > `Module Management`

Logged as System Administrator role, in the `Module Management` window, the user can see all the modules to be added and select the corresponding version in the **versions** tab. Once one of the versions is selected, the dependencies of such version can be found in the **dependencies** subtab.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/dependency-manager/dependencymanager1.png)

!!!info
    The fields in this window are read-only.

Fields to note:

- **Active**: Checkbox to select if this module is active or not.
- **Group**: the identifier of the artifact.
- **Artifact**: the unit of deployment fetched and used.
- **Installed Version**: the version of the module if it is installed.
- **Is bundle**: Field to filter if this module is a bundle or not.

This window presents two buttons that can be used: **Add dependency** and **Update Packages**.

##### Add Dependency 

This button allows you to add the dependencies associated with a specific version of the selected module. When clicked, a pop-up window will display all the dependencies and modules that will be installed.

- **If a package bundle is selected**: you will have the option to add all the modules within the bundle or select only the ones you need. Below, a new read-only grid will appear, showing the dependencies of the selected modules. This grid is for informational purposes, allowing you to see which dependencies will be added.

- **If a non-bundle package is selected**: the grid will be read-only, displaying only the necessary dependencies for the module to work correctly. If no dependencies are displayed, it means that the module has no additional dependencies.

!!!note
    A warning notification is shown to inform the user about versions compatibility before installing the dependencies shown.

!!!info
    Consider that by default, all dependencies are added in Source format.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/dependency-manager/dependencymanager2.png)

Once the process is done, the **Dependency Management** window is opened and all the installed dependencies are shown.

###### Dependency Version Handling Rules

1. **If the dependency version is greater than the installed version:**:

    - No installed module and no record in `Dependency Management`window: New dependency record added. 
    - No installed module but record exists in `Dependency Management`window: Update the existing record version.
    - Installed module and the dependency record exists in `Dependency Management`window: Update the existing record version.
    - Installed module but no dependency record exists in `Dependency Management`window: The local dependency is deleted, and a new record is added in `Dependency Management`. 

    

2. **If the dependency version is less than the installed version:**

    - Display error and disable the process, preventing installation of an older version to avoid compatibility issues. This approach ensures that dependencies are handled properly, maintaining compatibility and minimizing the risk of functionality loss. In case you need to install the dependency version anyway, you must downgrade the version from the `Dependency Management` window with the [change version](#change-version) button.  

##### Update Packages

This button is used to execute the Update Packages process which updates the list of available packages with the latest information.

#### Dependency Management
:material-menu: `Application` > `Etendo Dependencies Management` > `Dependency Management`

Logged as System Administrator role, in the `Dependency Management` window, the user can find all the dependencies installed in the previous step.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/dependency-manager/dependencymanager3.png)

Fields to note:

- **Active**: Checkbox to select if this dependency is active or not.
- **Group**: The identifier of the artifact.
- **Artifact**: The unit of deployment fetched and used.
- **Version**: Version of the module
- **Format**: Describes the dependency format. They can be `Source`, `JAR` or `local`.
    - `Source`: In this case, the source code is available, to download the dependencies the user must excecute the `./gradlew expandModules` Gradle task and then compilation is required.
    - `JAR`: In this case, a standard format for java packages distribution, these include the compiled Java classes, and the dependencies resolution is dynamic.
    - `Local`: The local format implies that the module is installed but it is not declared as a repository dependency. 
- **Installation Status**: It describes the dependency current status.
    - Pending download: This is the status by default when a new dependency is added or updated.  To be installed, it is necessary to compile the environment and, in such case, the dependency is in `source` format. 
    - Installed: Used once the dependency is already installed.
- **Module**: A reference that appears to the module when it is installed.
- **Version Status**: It describes the dependency version status.
    - Untracked: Only for external and local dependencies.
    - Update Available: In case there are new available versions.
    - Updated: The latest available version is installed.
- **External Dependency** (Only available for `JAR` dependencies): Checkbox that identify an external library or module required by the project, managed by Gradle. These dependencies are retrieved from remote repositories during the build process.

This window presents buttons that can be used: **Change Version**, **Change Format** and **Delete Dependency**. 

##### Change Version 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/dependency-manager/dependencymanager4.png)

This button is used to update or downgrade versions. 

When the version of a module is modified, its related dependencies could be modified as well. In this case, it is possible to add new, update or delete versions. 

!!!note
    A warning notification is shown to inform the user about versions compatibility before executing the process.

##### Change Format 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/dependency-manager/dependencymanager6.png)

This button is used to change the format of the module.  This process needs to be executed when it is necessary to migrate from a local format to a gradle dependency, while keeping the modules updated.  The options are `source`, `JAR` or `local`.

- In case the module is originally in `local` format, the options in the **Change format** popup window are `JAR` or `source`.

- In case the module is originally in `source` format, the only option in the **Change format** popup window is `JAR`.

- In case the module is originally in `JAR` format, the only option in the **Change format** popup window is source. In this case, the window shows a warning notification to remind the user that the original directory is deleted once the process is finished.

##### Delete Dependency

This button is used to delete dependencies.

- **If a format is Jar**: In case you need to remove a dependency to actually complete the action, the environment must be compiled.

    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/dependency-manager/dependencymanager7.png)

- **If a format is Local or Souce**: In case you need to remove a dependency to actually complete the action, the environment must be compiled. Also, note that both `Source` and `Local` dependencies must be manually removed from the `/modules` folder prior to compilation.

    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/dependency-manager/dependencymanager8.png)

    !!!note
        A warning notification is displayed to inform the user of the steps to remove it.

#### Add Local Dependencies 
:material-menu: `Application` > `Etendo Dependencies Management` > `Add Local dependencies`

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/getting-started/instalation/dependency-manager/dependencymanager5.png)

This process, in `Add Local dependencies` window, also part of the **Dependencies Management**, is in charge of identifying all the locally installed modules without related dependencies, add them to the Dependency Management window with the `local` format.

!!! note
    The main objective of this process is to add the dependencies in `local` format, so that in case of being distributed as an Etendo module it can be easily migrated to `Sources` or `Jar` format. 

#### Update Packages Information
:material-menu: `Application` > `Etendo Dependencies Management` > `Update Packages Information`

Since the information about packages is daily updated, the user can execute manually the process from `Update Packages Information` window to update the list of packages with the latest information.

!!!info
    The same process can be executed from the **Module Management** window, selecting one record and clicking the **Update packages** button.

!!!note
    Each time the server is restarted, the update process is executed automatically.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Migrating to Etendo (from Openbravo)
## Article Path: /Developer Guide/Etendo Classic/✨ Getting Started/Migration from Openbravo/Migrating to Etendo (from Openbravo)
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/migration-from-openbravo/migrating-to-etendo-from-openbravo
## Article Content: 
### Migrating to Etendo (from Openbravo)

#### Overview

This guide provides the necessary information to migrate an existing Openbravo instance to a new Etendo instance (in its latest release). 

##### Requirements

Before the migration process begins, either if it is done on Linux or on Windows, make sure to have the following items:

!!! info
    - Current Openbravo instance updated to 21Q3.2 ([How to upgrade?](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/migration-from-openbravo/upgrading-to-openbravo-21q3-2.md))
    - If previous installation had custom patches applied, they must be ready to be applied in an 21Q3.2 updated environment.
    - Database should not have local changes.
    - Enough disk space for new installation.
    - Environment license and GitHub name and token (Create the credentials by following this [guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/use-of-repositories-in-etendo.md)).

!!! warning
    - The server where the database is hosted needs to have enough free space to hold a copy of the current database.  
    - The server where the sources are hosted also needs to be able to hold a copy of the current sources.  
    - Attachments are kept in the same place as they were before.



#### Instructions for the Migration Process

##### Before starting the migration
It is necessary to ensure following the next steps:

1.  Stop the Tomcat Server.

    ``` bash title="Terminal" 

    sudo /etc/init.d/tomcat stop
    ```

    !!! info
        Depending on your server, this command may need to be changed.


2. Create a backup of your instance.


##### Manual Migration Process

These are the steps to follow for the manual migration from OpenbravoERP to Etendo Classic:

1. Create and enter the folder Etendo Classic.

2. Insert the **etendo_base** sources in the Etendo Classic folder. They can be extracted after downloading Etendo from [Resources](https://etendo.software/es/recursos){target="_blank"}. To do this, use your gitHub user and token.

3. The `gradle.properties` file has default params but if needed this can be changed.  

    ???+Note
        Remember to set up the GitHub user and token since they are used to expand private modules. Create the credentials by following the [Use of Repositories technical guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/use-of-repositories-in-etendo.md).
        

    ``` groovy title="gradle.properties"
    githubUser=
    githubToken=

    context.name=etendo

    bbdd.sid=etendo
    bbdd.port=5432
    bbdd.systemUser=postgres
    bbdd.systemPassword=syspass
    bbdd.user=tad
    bbdd.password=tad
    ```

    !!! info
        Check if it is necessary to keep the Openbravo database or create a new one for Etendo. In case of creating a new one, use the previous Openbravo one as a base.



4. In a new terminal opened in `EtendoERP` folder, run in the 
    ``` bash title="Terminal" 
    ./gradlew expandCore
    ```
5. Run in the terminal 
    ``` bash title="Terminal"
    ./gradlew setup
    ```
6. Move the existing modules from `Openbravo/modules` folder to the `EtendoERP/modules` folder, except for the following ones:

    !!! warning
        com.smf.securewebservices<br>
        com.smf.smartclient.boostedui<br>
        com.smf.smartclient.debugtools<br>
        org.openbravo.advpaymentmngt<br>
        org.openbravo.apachejdbcconnectionpool<br>
        org.openbravo.base.weld<br>
        org.openbravo.client.application<br>
        org.openbravo.client.htmlwidget<br>
        org.openbravo.client.kernel<br>
        org.openbravo.client.myob<br>
        org.openbravo.client.querylist<br>
        org.openbravo.client.widgets<br>
        org.openbravo.financial.paymentreport<br>
        org.openbravo.reports.ordersawaitingdelivery<br>
        org.openbravo.service.datasource<br>
        org.openbravo.service.integration.google<br>
        org.openbravo.service.integration.openid<br>
        org.openbravo.service.json<br>
        org.openbravo.userinterface.selector<br>
        org.openbravo.userinterface.skin.250to300Comp<br>
        org.openbravo.userinterface.smartclient<br>
        org.openbravo.utility.cleanup.log<br>
        org.openbravo.v3<br>
        org.openbravo.v3.datasets<br>
        org.openbravo.v3.framework<br>

        
        These modules will already be in the `EtendoERP/modules_core` folder since they are core modules in Etendo. 

7. Run
    ``` bash title="Terminal" 
    ./gradlew update.database compile.complete.deploy --info
    ```
!!! info
    Compilation errors associated with API changes may occur due to the version change in custom modules. If this happens, make sure to fix them by using the [documented GitHub issues](https://github.com/etendosoftware/etendo_core/issues?q=is%3Aissue+){target="_blank"}. 



#### Post Migration Configuration

##### Remove previous instance deployed context

``` bash title="Terminal"
rm -r /var/lib/tomcat/webapps/openbravo
```
!!! warning
    Make sure this step is done before starting Tomcat, otherwise you will risk having two environments running at the same time, which can cause problems (especially when background processes are involved).


##### Start Tomcat

!!! info
    Depending on your server, this command may need to be changed.

  
``` bash title="Terminal" 

sudo /etc/init.d/tomcat start
```



##### Attachments Configuration

!!! warning
    Before removing your previous instance, make sure you migrate your attachment files.


In the migration process, the attachments directory configuration is not changed. To move them to a new folder (for example `/opt/EtendoERP/attachments`), you must edit the `Openbravo.properties` file:

``` bash title="Terminal" 
vi /opt/EtendoERP/config/Openbravo.properties
#### Change the attach.path property like this (do not include the #):
#### attach.path=/opt/EtendoERP/attachments
```

 and move the attachments manually: 

``` bash title="Terminal" 
mv /opt/OpenbravoERP/attachments /opt/EtendoERP/attachments
#### Deploy changes to tomcat
./gradlew smartbuild
```
!!! info
    Special consideration may have to be taken into account if your attachment folder is in a network drive, or a different partition (with or without a symbolic link in place).  
    Be careful when changing the attachment configuration, and make sure you have a recent backup available.


##### Customizations to Core

Reapply patches to core if necessary, and compile.

!!! info
    Compilation tasks now can be made with the Gradle Wrapper.


``` bash title="Terminal" 

patch -p1 < customPatchToCore.patch
#### Apply other patches as needed
./gradlew smartbuild
sudo /etc/init.d/tomcat restart
```

##### Apache Configuration

1.  If necessary, change apache configuration to use jkmount in the correct context ("openbravo" by default in old installation).  
    Configuration file should be in `/etc/apache2/conf-enabled/openbravo.conf`, `/etc/apache2/conf-available/openbravo.conf`or `/etc/apache2/sites-available/000-default.conf` / `/etc/apache2/sites-available/000-default-le-ssl.conf`<br>
    Replace `jkMount /openbravo* ajp13_worker` by `jkMount /etendo* ajp13_worker`
    
2.  Change apache configuration to redirect to new context ("openbravo" by default in old installation).  
        Configuration file should be in `/var/www/html/index.html`.  
        Replace `<META HTTP-EQUIV="Refresh" CONTENT="0; URL=openbravo">` by `<META HTTP-EQUIV="Refresh" CONTENT="0; URL=etendo"> `  
        
    !!! warning
        Make sure to replace  by the context you chose when in the `gradle.properties`file.


3.  Restart apache:
    

``` bash title="Terminal" 

sudo service apache2 restart
```

##### Activate your instance

1.  Login as System Administrator and use the Instance Activation window to activate your instance.
2.  Use Refresh Online
3.  Enter your instance purpose and your activation key.

!!! success
    Your instance is activated!


##### Change backup and restore script

1.  Make sure that the backup script now obtains its data from the correct `Openbravo.properties`, for example in folder `/opt/EtendoERP/`  
        The backup script is usually located in `/usr/share/openbravo/backup/backup`. You should change the lines to point to the actual `Openbravo.properties` file. For example:
        

    ```bash title="Terminal"

    db_login=$(awk -F = '/^bbdd.user/ {print $2}' /opt/OpenbravoERP/config/Openbravo.properties)
    ```

    Should be changed for something like this:

    ```bash title="Terminal"

    db_login=$(awk -F = '/^bbdd.user/ {print $2}' /opt/EtendoERP/config/Openbravo.properties)
    ```

    This will vary depending on the path that has been selected for the migration.

    !!! warning
        Remember that in the current state `Openbravo.properties` does not change its name. This should not be changed until further notice from the development team. Also, you must not change the Openbravo name anywhere else. Do it only in the paths for the properties file.


    !!! info
        A dedicated backup tool is in development.


2.  The same should be done for `/usr/bin/openbravo-restore`. Given that the scripts are highly hardcoded, you have to change some lines manually.

The database to be dropped should be the Etendo database, but the script will drop the openbravo db. This should be changed to drop the Etendo database. 

- Change:

    ```bash

    su - postgres -c "psql -U postgres -c "drop database openbravo"" || true
    ```

    for:
    ```bash

    su - postgres -c "psql -U postgres -c "drop database etendo"" || true

    ```

- Change the line that creates the database:

    ```bash

    su - postgres -c "psql -U postgres -c "create database openbravo WITH ENCODING='UTF8' OWNER=TAD;""

    ```

    for

    ```bash

    su - postgres -c "psql -U postgres -c "create database etendo WITH ENCODING='UTF8' OWNER=TAD;""

    ```

- Change the target database on the lines that the pg\_restore is done, for example:

    ```bash

    PGPASSWORD=tad pg_restore -U tad -h localhost -d openbravo -O $TEMP_FOLDER/db_backup.dmp || true

    ```

    for

    ```bash

    PGPASSWORD=tad pg_restore -U tad -h localhost -d etendo -O $TEMP_FOLDER/db_backup.dmp || true

    ```

- Change the line which erases the tomcat files:

    ```bash

    rm -rf /var/lib/tomcat/webapps/openbravo || true

    ```

    for

    ```bash

    rm -rf /var/lib/tomcat/webapps/etendo || true

    ```

- Change the path of the sources for the new path created for Etendo, for example:

    ```bash

    sudo chown openbravo:openbravo /opt/OpenbravoERP/

    ```

    for

    ```bash

    sudo chown openbravo:openbravo /opt/EtendoERP/

    ```
!!! warning
    The same warning for the backups applies here. Be careful with what you rename. If you see an error, please ask for support.


##### Change initial directory on login

Inside `~/.bashrc` you may have a command that lets you log in directly to the `/opt/OpenbravoERP` folder. Change it so it points to your new instance folder:

``` bash title=".bashrc" 

#### Change
cd /opt/Openbravo
#### To
cd /opt/EtendoERP
```

##### Change server user

You may change the current user from Openbravo to Etendo, if you want. This guide does not cover how to do so.

##### Remove previous installation

1.  Remove Openbravo context from Tomcat folder:

    ``` bash title="Terminal"

    rm -r /var/lib/tomcat/webapps/openbravo
    ```

2.  Remove Openbravo installation:

    ``` bash title="Terminal"

    rm -r /opt/OpenbravoERP
    ```

3.  Remove Openbravo database:

    ``` bash title="Terminal"

    psql -h localhost -U postgres -d etendo -c "DROP DATABASE openbravo;"
    ```
!!! warning
    Make sure above commands are pointing to the correct databases, user and host, and that you have done a backup before executing the command.

##### Apply 303 Taxes and Tax Report Fixes

This step is only necessary if the following conditions happen in your environment:

* The `org.openbravo.module.aeat303.temporal.taxes.es`, `org.openbravo.module.aeat303.temporal.taxparameters.es`, `org.openbravo.localization.spain.referencedata.taxes.es` and `org.openbravo.module.aeat303.es` modules are installed and their datasets applied in the ERP
* You want to update the `Spain Localization Extensions` bundle to version `1.8.0` or higher, otherwise, you want to update the afforementioned modules to these versions:
    * `org.openbravo.localization.spain.referencedata.taxes.es`: version `1.8.0` or higher
    * `org.openbravo.module.aeat303.es`: version `1.14.0` or higher

To solve issues with taxes arising from these modules being migrated from Openbravo to Etendo, refer to the related [Known Issue](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/known-issues.md/#ee-808-problem-when-trying-to-import-the-taxes-configuration-for-spain-dataset-if-the-environment-already-has-imported-the-dataset-related-to-the-303-temporary-taxes-of-openbravo) 

##### Apply 390 Taxes and Tax Report Fixes

This step is only necessary if the following conditions happen in your environment:

* The `org.openbravo.module.aeat303.temporal.taxes.es`, `org.openbravo.module.aeat303.temporal.taxparameters.es`, `org.openbravo.localization.spain.referencedata.taxes.es` and `org.openbravo.module.aeat390.es` modules are installed and their datasets applied in the ERP
* You want to update the `Spain Localization Extensions` bundle to version `1.8.0` or higher, otherwise, you want to update the afforementioned modules to these versions:
    * `org.openbravo.localization.spain.referencedata.taxes.es`: version `1.8.0` or higher
    * `org.openbravo.module.aeat390.es`: version `3.9.0` or higher

To solve issues with taxes arising from these modules being migrated from Openbravo to Etendo, refer to the related [Known Issue](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/known-issues.md/#ee-856-390-tax-report-dataset-duplicates-data-for-2022-when-applied-on-a-server-migrated-from-ob-to-etendo-after-01-2023) 

#### Conclusion

!!! info
    With these steps, you should have successfully migrated your Openbravo data to Etendo either on a Linux system or on a Windows system. If you encounter any problems during the process, please reach out to the [Etendo support team](https://etendoproject.atlassian.net/servicedesk/customer/portals){target="_blank"} for assistance.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Upgrading to Openbravo 21Q3.2
## Article Path: /Developer Guide/Etendo Classic/✨ Getting Started/Migration from Openbravo/Upgrading to Openbravo 21Q3.2
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/migration-from-openbravo/upgrading-to-openbravo-21q3-2
## Article Content: 
###Upgrading to Openbravo 21Q3.2

#### Overview

This guide explains how to upgrade your current Openbravo environment to version 21Q3.2. This involves two main steps:

-   Identify and extract custom patches made to your current version of Openbravo
-   Upgrade to Openbravo 21Q3.2

!!! info
    This upgrade is required in order to migrate Openbravo to Etendo.

#### How to upgrade to Openbravo 21Q3.2

!!! info "Requirements"
    - Git  
    - A diffing/merging tool if patches need to be generated
    

##### Identify and extract custom patches made to your current version of Openbravo

1.  Clone core repository in the new version

    ``` bash title="Terminal" 

    git clone --depth 1 --branch YOURVERSIONTAG git@gitlab.com:openbravo/product/openbravo.git
    ```

    !!! info
        Replace *YOURVERSIONTAG* tag with your current Openbravo version, e.g.: 3.0PR19Q4

2.  Identify patches applied to core in current installation, to be re-applied later:

-   Use a diffing tool like Meld or Kdiff3 to compare the differences between your environment and the standard Openbravo you just cloned.
-   Extract custom patches (avoid generating patches for changes that are bugfixes, since they should be included in the new version).

##### Upgrade to Openbravo 21Q3.2

1.  Clone core repository in the new version:

    ``` bash title="Terminal" 

    git clone --depth 1 --branch 3.0PR21Q3.2 git@gitlab.com:openbravo/product/openbravo.git
    ```

2.  Configure Openbravo.properties and other files to match your current installation.
3.  Copy all modules from your previous installation to the new environment.
4.  Apply patches extracted on previous steps (they may need to be adapted to the new version).
5.  Do a full compilation:

    ``` bash title="Terminal" 

    ant update.database compile.complete.deploy
    ```

6.  Fix problems with custom modules.

    !!! warning
        Check [Openbravo’s Release Notes](http://wiki.openbravo.com/wiki/Release_Notes/3.0PR21Q3.2){target="_blank"} for API changes and other considerations when upgrading.

7.  Start server.
8.  Test for functional or runtime errors and fix them.


!!! success
    Your environment is ready to be migrated to Etendo.

    Check the [Migration Tool’s guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/migration-from-openbravo/migrating-to-etendo-from-openbravo/).
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Upgrade Etendo to Any Version
## Article Path: /Developer Guide/Etendo Classic/✨ Getting Started/Upgrade/Upgrade Etendo to Any Version
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/upgrade/upgrade-etendo-to-any-version
## Article Content: 
#### Overview

This guide explains how to upgrade your Etendo environment to the latest version, or any version you want.

#### Upgrade Etendo

!!! warning
    In case of upgrading the Core to 23.1.0 or newer, you must run `./gradlew wrapper --gradle-version 7.3.2` to upgrade the Gradle version.

!!! warning
    In case of upgrading the Core from Etendo 21Q4.X, you must remove the modules `com.smf.securewebservices`, `com.smf.smartclient.boostedui`, `com.smf.smartclient.debugtools`, as they are distributed in the Core.

!!! warning
    From Etendo 22Q1, the Nexus credentials should not be required interactively. You must set them in the `gradle.properties` file, since Gradle resolves and checks dependencies periodically.
    `githubUser=USER` > `githubToken=TOKEN`

##### Resolving the Etendo Gradle Plugin

From Etendo 22Q1, Etendo uses a standard gradle plugin to execute all the gradle tasks.
To work with the plugin you need to specify in the root project from where the plugin will be resolved.

1. Update the `settings.gradle` file with the next content.

    ```groovy title="settings.gradle"
    pluginManagement {
        repositories {
            mavenCentral()
            gradlePluginPortal()
            maven {
                url 'https://maven.pkg.github.com/etendosoftware/com.etendoerp.gradleplugin'
                credentials {
                    username "${githubUser}"
                    password "${githubToken}"
                }
            }
            maven {
                url 'https://repo.futit.cloud/repository/maven-public-snapshots'
            }
        }
    }

    // Add modules subprojects
    new File("${this.rootDir}/modules").listFiles().each {
        if (it.directory && new File(it, 'build.gradle').exists()) {
            include(":modules:${it.name}")
        }
    }

    rootProject.name = "etendo"
    ```

2. Add in the `build.gradle` file the Etendo Gradle Plugin

    ```groovy title="build.gradle"
    plugins {
        id 'com.etendoerp.gradleplugin' version 'latest.release'
    }
    ```

3.  Delete if the old plugin exists removing the "apply from" line:

    ``` bash title="Terminal"
    apply from: 'https://repo.futit.cloud/repository/static-public-releases/com/etendo/etendo/latest/etendo-latest.gradle'

    ```

=== "JAR Core"

    !!! warning
        If you upgrade from a source Etendo instance, read [Core Format Migration](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/upgrade/core-format-migration/), because some directories must be deleted.

    1. Create a backup of your environment, following the [Etendo Backup and Restore Tool](https://docs.etendo.software/latest/developer-guide/etendo-classic/developer-tools/etendo-backup-restore-tool/).
    2. Verify the target version inside `build.gradle`

        ```groovy title="build.gradle"
        dependencies {
        implementation('com.etendoerp.platform:etendo-core:<version>')
        }
        ```

    3. Compile your environment:

        ``` bash title="Terminal"
        ./gradlew update.database compile.complete smartbuild
        ```

    4.  Verify any compilation errors that may arise due to incompatible customization or modifications.

        !!! success
            Your Etendo environment is now updated!

=== "Source Core"

    1.  Verify the target version inside `build.gradle`

        ```groovy title="build.gradle"

        // latest.release will download the most recent stable version
        // Any other Gradle/Maven version sintax works, for example : [22.1.0,)
        etendo {
            coreVersion = "latest.release"
        }
        ```

        !!! info
            You can declare a specific version (e.g. '1.0.0') or an interval of versions:<br>
                    - [begin, end] - Both versions are included<br>
                    - (begin, end) - Both versions are not included<br>
                    - [begin, ) - From a base version to the latest one<br>
            And the other possible combinations.


    2.  Create a backup of your environment.
    3.  Run the following command to update the core:

        ``` bash title="Terminal"

        ./gradlew expandCore
        ```

    4.  Compile your environment:

        ``` bash title="Terminal"

        ./gradlew update.database compile.complete smartbuild
        ```

    5.  Verify any compilation errors that may arise due to incompatible customization or modifications.

    !!! success
        Your Etendo environment is now updated!

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Core format migration (JAR- Sources)
## Article Path: /Developer Guide/Etendo Classic/✨ Getting Started/Upgrade/Core format migration (JAR- Sources)
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/upgrade/core-format-migration
## Article Content: 
### Core format migration

=== "From Sources to JAR"

    !!! warning
        In JAR format, patchs can not be applied because the Core is resolved dinamically as a dependency.


    1. To migrate from an environment with sources, you need to add to the build.gradle, the Etendo core dependency 
    `implementation('com.etendoerp.platform:etendo-core:<version>')`


    2. You need to remove all the folders and files leaving the ones belonging to attachments,gradle, modules and config directories:

        - gradle/
        - attachments/
        - config/
        - modules/ 
        - build.gradle
        - gradle.properties
        - gradlew
        - gradlew.bat
        - settings.gradle

    3. To update the environment you have to execute the task
        ``` bash title="Terminal" 
        ./gradlew update.database --info
        ```
        and run
        ``` bash title="Terminal" 
        ./gradlew compile.complete smartbuild --info
        ```

=== "From JAR to Sources"

    1. To migrate from an environment with JARs to sources, you have to remove the Etendo core dependency from your build.gradle and run
        ``` bash title="Terminal" 
        ./gradlew clean
        ```

    2. To work with sources, you need to specify the version to use in the Etendo plugin extension block inside the build.gradle

        ``` groovy title="build.gradle"
        etendo {
            coreVersion = "22.1.0"
        }
        ```

         By default, Etendo tries to resolve the artifact `com.etendoerp.platform:etendo-core`


        !!! info
            Notice the `supportJars` flag. This is used to indicate if the current core version support JARs or not. By default is set to `true`.

    3. Finally, to download the sources you need to run the expand core task.

        ``` bash title="Terminal"
        ./gradlew expandCore --info
        ```

    4. Recompile
        ``` bash title="Terminal"
        ./gradlew compile.complete smartbuild --info
        ```

    5. Update the database
        ``` bash title="Terminal"
        ./gradlew update.database
        ```

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Resolving Dependencies on GitHub
## Article Path: /Developer Guide/Etendo Classic/✨ Getting Started/Upgrade/Resolving Dependencies on GitHub
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/upgrade/resolving-dependencies-on-github
## Article Content: 
#### 🔄 Migrating and Resolving Dependencies of Bundles and Modules on GitHub

Hello, Etendo Partner 👋. We've moved the bundles and modules from Nexus to GitHub. This allows us to take advantage of the stability of GitHub, and have the packages associated with each bundle and the releases in the same repository. Here we provide a step-by-step guide to help you make the transition.
##### 📝 Tutorial

<iframe width="560" height="315" src="https://www.youtube.com/embed/OhiV6ObyGG4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

---

##### 📦 Migrated Bundles

The following bundles have been migrated to GitHub, along with all their versions, check the Etendo Core compatibility, in case that you have a old Etendo version you must update before:
We recommend migrating to Etendo 23.2.0 or grather and the dependencies to the latest supported versions. 

|Bundle|Javapakage|Version|From Core | To core|
|--|--|--|--|--|
|Sales Extensions						|com.etendoerp.sales.extensions							|1.5.0|22.1.0	|23.2.x	|
|Sales Extensions ES		|com.etendoerp.sales.extensions.es_es				|1.4.0|22.1.0	|23.2.x	|
|Financial Extensions			|com.etendoerp.financial.extensions					|1.8.0|23.1.4	|23.2.x	|
|Financial Extensions ES	|com.etendoerp.financial.extensions.es_es		|1.2.0|23.1.4	|23.2.x	|
|Production Extensions		|com.etendoerp.production.extensions.				|1.3.0|22.1.0	|23.2.x	|
|Production Extensions ES	|com.etendoerp.production.extensions.es_es	|1.1.0|22.1.0	|23.2.x	|
|Platform Extensions			|com.etendoerp.platform.extensions					|1.6.0|23.2.0	|23.2.x	|
|Platform Extensions ES		|com.etendoerp.platform.extensions.es_es	|1.2.0|22.1.0	|23.2.x	|
|Warehouse Extensions			|com.etendoerp.warehouse.extensions					|1.3.0|23.1.4	|23.2.x	|
|Warehouse Extensions ES	|com.etendoerp.warehouse.extensions.es_es		|1.2.0|23.1.4	|23.2.x	|
|Essential Extensions			|com.etendoerp.essentials.extensions				|1.1.0|23.1.4	|23.2.x	|
|Essential Extensions ES	|com.etendoerp.essentials.extensions.es_es		|1.0.0|23.1.4	|23.2.x	|
|Localizacion Española		|com.etendoerp.localization.spain.extensions|1.4.0|22.4.3	|23.2.x	|



##### 🚀 Migration Process
 
1. **Update `settings.gradle` File**: You'll need to update your `settings.gradle` file to add the new GitHub repository.

    ```groovy title="settings.gradle"
    pluginManagement {
        repositories {
            mavenCentral()
            gradlePluginPortal()
            maven {
                url 'https://maven.pkg.github.com/etendosoftware/com.etendoerp.gradleplugin'
                credentials {
                    username "${githubUser}"
                    password "${githubToken}"
                }
            }
            maven {
                url 'https://repo.futit.cloud/repository/maven-public-snapshots'
            }
        }
    }

    // Add modules subprojects
    new File("${this.rootDir}/modules").listFiles().each {
        if (it.directory && new File(it, 'build.gradle').exists()) {
            include(":modules:${it.name}")
        }
    }

    rootProject.name = "etendo"
    ```

2. **Update Etendo Gradle Plugin**: You need to update `com.etendoerp.gradleplugin` to version 1.1.0 or later. Alternatively, you can use `latest.release` to always get the latest version, in this case the gradle version should be 7.3.2, to check the gradle version execute './gradlew --version' and to upgrade execute ./gradlew wrapper --gradle-version 7.3.2 

    ```groovy title="build.gradle"
    plugins {
        id 'java'
        id 'war'
        id 'groovy'
        id 'maven-publish'
        id 'com.etendoerp.gradleplugin' version 'latest.release' 
    }
    ```

3. **GitHub Setup**: You need to set up your GitHub username and token to have read access to Etendo packages. You can create the token by following the [Use of Repositories technical guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/use-of-repositories-in-etendo.md).

    ```groovy title="gradle.properties"
    nexusUser=
    nexusPassword=
    githubUser=<User>
    githubToken=<Token>

    context.name=etendo

    bbdd.sid=etendo
    bbdd.port=5432
    bbdd.systemUser=postgres
    bbdd.systemPassword=syspass
    bbdd.user=tad
    bbdd.password=tad
    ```

4. **Dependency Check**: Review the dependencies in your Etendo `build.gradle` file to make sure there are bundles that can be upgraded to versions published on GitHub. If you are not ready to migrate yet, that's OK, Nexus will be available until March 2024.

5. **Resolve New Dependencies**

##### Considerations

One restriction that GitHub has is that published packages must have a lowercase javapackage, so we had to refactor the translation modules, which previously ended with the suffix "_ES", now all packages including bundle translations have their artifact in lowercase.  

!!! warning
    A special consideration are the modules `org.openbravo.module.invoiceTaxReportEnhanced30` and `org.openbravo.module.invoiceTaxReportEnhanced30.en_ES` which belong to the Spain Localisation bundle and were refactored as well.


This affects the current environments, to fix this we have to: 

=== "Dependencies in Sources"

    1. If the environment has the dependencies as "moduleDeps", in sources, we will have to remove from the `/modules` folder all the ones ending in "_ES". 

        We provide a script to delete all modules that could be resolved from Nexus and then re-download them from GitHub. 

        ```bash
        #!/bin/bash

        ## Define the list of modules to be deleted
        modules=("com.etendoerp.accounting.templates"
        "com.etendoerp.accounting.templates.es_ES"
        "com.etendoerp.advanced.financial.docs.processing"
        "com.etendoerp.advanced.financial.docs.processing.es_ES"
        "com.etendoerp.advanced.financial.docs.processing.template"
        "com.etendoerp.advanced.intercompany"
        "com.etendoerp.advanced.intercompany.es_ES"
        "com.etendoerp.advanced.work.effort"
        "com.etendoerp.advanced.work.effort.es_ES"
        "com.etendoerp.asyncprocess"
        "com.etendoerp.bankingpool"
        "com.etendoerp.bankingpool.es_ES"
        "com.etendoerp.bulk.posting"
        "com.etendoerp.bulk.posting.es_ES"
        "com.etendoerp.etendorx"
        "com.etendoerp.financial.extensions"
        "com.etendoerp.financial.extensions.es_ES"
        "com.etendoerp.financial.reports.advanced"
        "com.etendoerp.financial.reports.advanced.es_ES"
        "com.etendoerp.gljournal.advanced"
        "com.etendoerp.gljournal.advanced.es_ES"
        "com.etendoerp.localization.spain.extensions"
        "com.etendoerp.payment.removal"
        "com.etendoerp.payment.removal.es_ES"
        "com.etendoerp.payment.removal.template"
        "com.etendoerp.platform.extensions"
        "com.etendoerp.platform.extensions.es_ES"
        "com.etendoerp.printdocumentws"
        "com.etendoerp.production.extensions"
        "com.etendoerp.production.extensions.es_ES"
        "com.etendoerp.quotation"
        "com.etendoerp.quotation.es_ES"
        "com.etendoerp.quotation.template"
        "com.etendoerp.reactivate.warehouse.documents"
        "com.etendoerp.reactivate.warehouse.documents.es_ES"
        "com.etendoerp.reactivate.warehouse.documents.template"
        "com.etendoerp.reactor"
        "com.etendoerp.sales.extensions"
        "com.etendoerp.sales.extensions.es_ES"
        "com.etendoerp.stock.history"
        "com.etendoerp.stock.history.es_ES"
        "com.etendoerp.warehouse.extensions"
        "com.etendoerp.warehouse.extensions.es_ES"
        "com.etendoerp.webhookevents"
        "com.exos.erp.reportcachemanagement"
        "com.smf.asset.amortization.report"
        "com.smf.currency.apiconfig"
        "com.smf.currency.apiconfig.es_ES"
        "com.smf.currency.conversionrate"
        "com.smf.currency.conversionrate.es_ES"
        "com.smf.gljournal.reverse"
        "com.smf.gljournal.reverse.template"
        "com.smf.jobs.defaults.es_ES"
        "com.smf.ws.printdocument"
        "org.openbravo.advpaymentmngt.es_ES"
        "org.openbravo.alerts.accounting30"
        "org.openbravo.alerts.accounting30.es_ES"
        "org.openbravo.client.application.es_ES"
        "org.openbravo.client.htmlwidget.es_ES"
        "org.openbravo.client.kernel.es_ES"
        "org.openbravo.client.myob.es_ES"
        "org.openbravo.client.querylist.es_ES"
        "org.openbravo.client.widgets.es_ES"
        "org.openbravo.finance.checkprinting"
        "org.openbravo.finance.checkprinting.es_ES"
        "org.openbravo.financial.bpsettlement"
        "org.openbravo.financial.bpsettlement.es_ES"
        "org.openbravo.financial.paymentreport.es_ES"
        "org.openbravo.localization.spain30"
        "org.openbravo.localization.spain.referencedata.accounts"
        "org.openbravo.localization.spain.referencedata.accounts.pymes"
        "org.openbravo.localization.spain.referencedata.taxes"
        "org.openbravo.localization.spain.referencedata.translation.esES"
        "org.openbravo.module.aeat190.es"
        "org.openbravo.module.aeat303.es"
        "org.openbravo.module.aeat347apr.es"
        "org.openbravo.module.aeat347apr.es.es_ES"
        "org.openbravo.module.aeat349.es"
        "org.openbravo.module.aeat390.es"
        "org.openbravo.module.bptaxidkey"
        "org.openbravo.module.cifnifvalidator"
        "org.openbravo.module.cifnifvalidator.es_ES"
        "org.openbravo.module.countryisocode"
        "org.openbravo.module.cuaderno43.es"
        "org.openbravo.module.epigrafes.iae.es"
        "org.openbravo.module.eucountries"
        "org.openbravo.module.finactvalidator.es"
        "org.openbravo.module.incoterms"
        "org.openbravo.module.intrastat"
        "org.openbravo.module.intrastat.es_ES"
        "org.openbravo.module.intrastat.spain"
        "org.openbravo.module.invoicesregisterbook"
        "org.openbravo.module.invoicesregisterbook.es_ES"
        "org.openbravo.module.invoicesregisterbook.estaxes"
        "org.openbravo.module.invoiceTaxReportEnhanced30"
        "org.openbravo.module.invoiceTaxReportEnhanced30.es_ES"
        "org.openbravo.module.organization.representative.es"
        "org.openbravo.module.paymentmethod.type"
        "org.openbravo.module.remittance"
        "org.openbravo.module.remittance.es_ES"
        "org.openbravo.module.sii"
        "org.openbravo.module.sii.es_ES"
        "org.openbravo.module.sii.template"
        "org.openbravo.module.taximprovements.ES"
        "org.openbravo.module.taximprovements.es_ES"
        "org.openbravo.module.taxreportlauncher"
        "org.openbravo.module.taxreportlauncher.es"
        "org.openbravo.numbertoword"
        "org.openbravo.numbertoword_en"
        "org.openbravo.numbertoword_es"
        "org.openbravo.numbertoword.es_ES"
        "org.openbravo.proflocalization.spain.dataset"
        "org.openbravo.reports.ordersawaitingdelivery.es_ES"
        "org.openbravo.service.datasource.es_ES"
        "org.openbravo.service.integration.google.es_ES"
        "org.openbravo.service.integration.openid.es_ES"
        "org.openbravo.spain.regions"
        "org.openbravo.spanishdefaultdata.paymentmethods"
        "org.openbravo.spanishdefaultdata.paymentterms"
        "org.openbravo.userinterface.selector.es_ES"
        "org.openbravo.userinterface.smartclient.es_ES"
        "org.openbravo.utility.multiplebpselector"
        "org.openbravo.utility.multiplebpselector.es_ES"
        "org.openbravo.util.javax.xml.soap"
        "org.openbravo.util.saaj.impl"
        "org.openbravo.v3.translation.pack.es_ES")

        ## Define the modules directory
        module_directory="./modules"

        ## Iterate over each module and delete it
        for module in "${modules[@]}"; do
        if [ -d "${module_directory}/${module}" ]; then
            echo "Deleting ${module_directory}/${module}..."
            rm -rf "${module_directory}/${module}"
        else
            echo "Directory ${module_directory}/${module} does not exist"
        fi
        done

        echo "Modules deletion has been completed."

        ```


        !!! warning
                Make sure the modules have no customizations, otherwise local changes will be deleted.
        
        
        Copy this code and create a file `deleteNexusDependencies.sh` in the Etendo root project, run `chmod +x deleteNexusDependencies.sh` to give execution permissions and then run `./deleteNexusDependencies.sh` to delete the dependencies. 

    2. Modify the build.gradle of our project and change the dependencies to lowercase. For example:
        ```groovy title="build.gradle"
        moduleDeps('com.etendoerp:financial.extensions.es_ES:latest.release@zip') {transitive = true}
        // Replace by
        moduleDeps('com.etendoerp:financial.extensions.es_es:latest.release@zip') {transitive = true}

        ```
    3. Execute `./gradlew expandModules` task to download the new dependencies. 
    4. Run `./gradlew update.database smartbuild` to recompile the environment. 

=== "Dependencies in JAR"

    If the dependencies are declared as implementation, this means that they are in JAR format, just change the uppercase to lowercase. 
    For example:

    ``` groovy
    implementation('com.etendoerp:financial.extensions.es_ES:latest.release')
    // Replace by
    implementation('com.etendoerp:financial.extensions.es_es:latest.release')

    ```

    Then run `./gradlew update.database smartbuild`, this will dynamically download the dependencies and compile the environment again.

!!! info
    It is also possible that in the build.gradle there is a combination of both types of dependencies, you should follow both steps.

!!! success
    We recommend using the dependencies in JAR format, having a cleaner workspace and a simpler update process.
    This is a good opportunity to migrate. 


!!! failure
    Remember, Nexus will still be available until March 2024, so you have time to make this transition 🕑. We hope you find this guide useful.

If you find any issues or need additional help, do not hesitate to reach out to our [support service](http://support.etendo.software){target="_blank"}🚑.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Alerts
## Article Path: /Developer Guide/Etendo Classic/Concepts/Alerts
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/alerts
## Article Content: 
### Alerts


####  Overview

Alerts are the way Etendo Classic can inform users about virtually any event
that happens in the system (if an appropriate alertrule is created). It can be
defined by the System Administrator (and exported to a module) or by a Client/Organization Administrator.

This notifications are shown in the top bar, just beside the Application menu.

![]( ../../../assets/developer-guide/etendo-classic/concepts/Alerts-0.png)


####  Alert Rules

The definition of the _Alert Rules_ is made in the _Alert_ window (`General Setup` > `Application ` >`Alert`).

####  Data Driven

The Administrator can define a query to test a particular scenario, e.g. Products without defined price, Products under stock, Customers with exceeded credit, etc.

The flow for data driven alerts is as follows:

  * The Administrator creates *alert rules* , which include a SQL clause defining the event that is going to be monitored, and the *recipients* for the alerts. 
  * A *background process* is permanently checking if the condition defined in each of the active alert rules return any record, in this case a new *alert instance* will be created for each one of the returned record. 
  * When a user logs in the application there is another process that constantly checks whether there are alert instances for this user and shows them. 

!!!info
    For more information, read [how to create an alert](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/How_to_create_an_Alert.md).

#####  Definition

  * SQL: Example of 'Products without defined price' rule 

    
    
  ```sql
    SELECT m_product_id AS referencekey_id,
           p.name AS record_id,
           '0' AS ad_role_id,
           NULL AS ad_user_id,
           p.name ||' is not in any Purchase price list' AS description,
           'Y' AS isActive,
            ad_org_id, 
            ad_client_id, 
            now() AS created,  
            '0' AS createdBy,  
            now() AS updated,
            '0' AS updatedBy
     FROM m_product p
    WHERE p.ispurchased='Y'
    AND NOT EXISTS (SELECT 1 
                        FROM m_productprice pp,
                             m_pricelist_version pv,
                             m_pricelist pl
                      WHERE p.m_product_id = pp.m_product_id
                      AND pv.m_pricelist_version_id = pv.m_pricelist_version_id
                      AND pv.m_pricelist_id = pl.m_pricelist_id
                      AND issopricelist='N')
    UNION                  
    SELECT m_product_id AS referencekey_id,
           p.name AS record_id,
           '0' AS ad_role_id,
           NULL AS ad_user_id,
           p.name ||' is not in any Sales price list' AS description,
           'Y' AS isActive,
            ad_org_id, 
            ad_client_id, 
            now() AS created,  
            '0' AS createdBy,  
            now() AS updated,
            '0' AS updatedBy
     FROM m_product p
    WHERE p.ispurchased='N'
    AND NOT EXISTS (SELECT 1 
                        FROM m_productprice pp,
                             m_pricelist_version pv,
                             m_pricelist pl
                      WHERE p.m_product_id = pp.m_product_id
                      AND pv.m_pricelist_version_id = pv.m_pricelist_version_id
                      AND pv.m_pricelist_id = pl.m_pricelist_id
                      AND issopricelist='Y')
  ```

  * The SQL query must have the following columns: 
    * referencekey_id 
    * record_id 
    * ad_role_id 
    * ad_user_id 
    * description 
    * isactive 
    * ad_org_id 
    * ad_client_id 
    * created 
    * createdby 
    * updated 
    * updatedby 

  * Tab: From the Alert management window you can navigate directly to a record. From the Tab it can be defined to which tab you will navigate to. 

  * Filter clause: This is a non-mandatory SQL whereclause which will be used to filter the alerts which will be shown to the user. 

#####  Performance

The sql commands defined in alert rules will be executed periodically in
your system. Therefore, it is very important to define them as performance-efficient.

If they are not, they will slow down your system noticeably.


####  Alert Recipient

The Alert Recipient tab handles the alert recipients management. You can
define the Role whom will be notified, or an specific user. Also you can
define if the user(s) should be notified by email.

---

This work is a derivative of [Alerts](https://wiki.openbravo.com/wiki/Alerts){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}. 

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Application Menu
## Article Path: /Developer Guide/Etendo Classic/Concepts/Application Menu
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/application-menu
## Article Content: 
### Application Menu

#### Overview

Application Menu is shown in the window's left side. It is used to make all the application elements accessible to the user.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Application_Menu-0.png)

##### Managing the menu

Menu is managed from `General Setup` > `Application` > `Menu` window.

To create a new menu entry:

  1. Create a new record in this window.
  2. Select the element type for the entry, this is done setting the **Action** field, the elements callable from menu are **Window**, **Report**, **Process**, **Form**, **Workflow**, **Internal/External link** and **Task**.
  3. Depending on the selected action, a different drop down list will be shown to select one element of the selected type. Note that name and description will be overwritten when synchronize process is executed.
  4. Place the new menu entry in the correct position, this is done by:
    * Selecting a record in the grid.
    * Opening the tree window clicking in tree menu icon ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Application_Menu-1.png)
    * Select the entry to relocate and select the new position.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Application_Menu-2.png)

Folders are created checking the **Summary Level** field.

##### Security

Although a menu entry is defined, it will not be displayed in case the role that has log in the application has not granted permission for that element.

##### Information folder

In the bottom of the menu, there is an **Information Folder** which contains links to the **Searchs**. The elements displayed in this folder are the ones that are used in at least one accessible window for the current role.

---
This work is a derivative of [Application Menu](http://wiki.openbravo.com/wiki/Application_Menu){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Constraints
## Article Path: /Developer Guide/Etendo Classic/Concepts/Constraints
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/constraints
## Article Content: 
### Constraints

#### Overview

Both check constraints and triggers are objects defined physically in database. This document will not explain the basis for constraints but just the particularities Etendo Classic has in their usage.

####  Naming

When adding a check constraint, triggers and indexes modularity naming rules have to be taken into account. This is necessary because triggers and indexes are global objects for a database. 

The modularity naming rule is as follows: 
the constraint, index or trigger name must start with the DB Prefix of the module the constraint belongs to. 

For instance,`MYMODULEDBPREFIX_CONSTRAINTNAME`.

In the case of indexes and constraints, if the index/constraint is added to a
table of another module then an additional `EM_` prefix is required:

`EM_MYMODULEDBPREFIX_CONSTRAINTNAME`.

By following this naming rule, the index/trigger/constraint is exported to the
module directory and packaged with the module.

!!!info
    The name of the constraints must not exceed the 30 characters as the maximum length of an object name in oracle is 30 characters.  

####  Constraints

Check constraints do not have any particularity in Etendo, except for how they should be named and how the back-end treats them to show messages.

!!!info
    For more information, read [How to add a Constraint](https://docs.etendo.software/latest/how-to-guides/How_to_add_a_Constraint.md).

#####  Messages

It is possible to define a message to be shown when the rule defined by the constraint is not satisfied. 

!!!info
    How to do that is explained in the [Messages](Messages.md#checks) documentation.

#####  Backwards compatibility

Modules should allow compatibility for other ones built on top of them at least between minor versions, additionally there could be user data already in the application if it is in a productive environment. 
This means that user data or other module's could rely on the current database model and in case a new constraint is added or an existent one is modified to be more restrictive
than it was, backwards compatibility could be broken. Therefore, it should be avoided to add new constraints or to modify existent ones to make them more restrictive during between versions.

####  Indexes

#####  Operator Classes

  
In PostgreSQL [Operator Classes](https://www.postgresql.org/docs/9.3/indexes-opclass.html){target="\_blank"} certain operator classes (`text_pattern_ops`,
`varchar_pattern_ops`, and `bpchar_pattern_ops`) enables using indexes in queries
involving pattern matching expressions. For instance, the following query:

    
```sql   
    SELECT name
    FROM c_bpartner
    WHERE name LIKE 'John%'
```
would not use an index created like this:

    
```sql   
    CREATE INDEX c_bpartner_name
      ON c_bpartner
      USING btree
      (name COLLATE pg_catalog."default");
```

but would use an index defined with an operator class:

    
```sql 
    CREATE INDEX c_bpartner_name
      ON c_bpartner
      USING btree
      (name COLLATE pg_catalog."default" varchar_pattern_ops);
```

Operator Classes are not needed in Oracle to use an index in the previously defined query, in that case if the index column defines an operator class, the operator class will have no effect.

#####  Function based indexes

  
Etendo  supports the use of functions in indexes. For instance, this along with the use of an operator class, would enable the use of indexes in case insensitive queries that use the iStartsWith operator, like this one:

    
```sql
    SELECT name
    FROM c_bpartner
    WHERE UPPER(name) LIKE 'JOHN%'
```

The following index could be used by the previous query:

    
```sql
    CREATE INDEX c_bpartner_name
      ON c_bpartner
      USING btree
      (upper(name) COLLATE pg_catalog."default" varchar_pattern_ops);
```

Any function can be used in the indexes, as long as it is deterministic. Even
needed functions are supported:

    
```sql 
    CREATE INDEX c_bpartner_name
      ON c_bpartner
      USING btree
      (UPPER(REPLACE(name, 'a', 'b')));
```
The following index can also be used.

    
```sql
    CREATE INDEX c_bpartner_name_id
      ON c_bpartner
      USING btree
      (UPPER(REPLACE(name, 'a', 'b')),
       UPPER(c_bpartner_id));
```


  
#####  Partial indexes
  
`PostgreSQL` supports the definition of [partial indexes](https://www.postgresql.org/docs/9.3/indexes-partial.html){target="\_blank"}. A partial index is an index where it is possible to specify the rows that are indexed. This kind of indexes are useful for commonly used _WHERE_ conditions that use constant values.

Thus, with a partial index it is possible to index just the table data that is most commonly used, helping to reduce the amount of disk space used by the index.

A partial index can be created as follows:

    
```sql
    CREATE INDEX a_amortization_active 
      ON a_amortization (isactive)
      WHERE isactive = 'Y';
```

Oracle does not support the creation of partial indexes in an explicit way yet. For this reason, if a partial index is found in the Etendo XML model when using an Oracle database, the partial index definition is not taken into account and it is created as a regular index.
  
######  Not Null Partial Indexes On Nullable Columns

In an Oracle database, it does not include rows in an index if the indexed columns are NULL. That means that for the case where we are indexing a nullable foreign key column every index is a partial index.

This is not the behavior in `PostgreSQL databases`, where we will need to define the index as partial to get the same behavior. For example:

    
```sql 
    CREATE INDEX c_order_return_reason 
      ON c_order (c_return_reason_id)
      WHERE c_return_reason_id IS NOT NULL;
```

#####  Indexes for Contains Search

  
The indexes for *contains* search are those intended to provide fast searching of sub-strings within the values stored in a particular database column.

In PostgresSQL we can define a contains search index as follows:

    
```sql
    CREATE INDEX c_bpartner_value_basic ON c_bpartner USING gin (value gin_trgm_ops);
```

!!!note
    To define this kind of indexes, we have to make use of the ` gin `
    access method together with the ` gin_trgm_ops ` operator class for
    the indexed column. Both elements are available thanks to the ` pg_trgm `
    extension which is included in Etendo distribution by default.

Besides, this feature allows defining a [function based index](#function-based-indexes) to improve icontains (case-insensitive) searching:

    
```sql
    `CREATE INDEX c_bpartner_value_basic ON c_bpartner USING gin (UPPER(value) gin_trgm_ops);`
```

!!!info
    This kind of indexes are not supported in Oracle yet: if they are present in the XML model, they will be created as regular indexes in the database.

---

This work is a derivative of [Constraints_and_Triggers](http://wiki.openbravo.com/wiki/Constraints_and_Triggers){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}. 
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Data Access Layer
## Article Path: /Developer Guide/Etendo Classic/Concepts/Data Access Layer
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/data-access-layer
## Article Content: 
### Data Access Layer
  
####  Overview

The goal of the Etendo Data Access Layer (DAL) development is to strengthen the middle-tier in the application, i.e. to implement business logic in Java. The DAL provides the
application developer with the following functionality:

  * Type safe querying and retrieval of business objects from the database. 
  * A convenient API to update or create new data in the database. 
  * A type safe interface to update information of a business object, increased productivity by making the properties of a business object directly visible through getters and setters (in the IDE). 
  * Transaction and context handling. 
  * Security and validation checking. 
  * Automatically maps new entries in the Application Dictionary to database tables and columns. 
  * Generates Java class business objects (and their associations) on the basis of the Application Dictionary model. 

The DAL consists of a development-time and runtime part. The development-time
part takes care of generating Java business object classes. The runtime part
takes care of mapping Java classes to the database and supporting
functionality such as security and validation.

####  A 'Hello World' Example

As a first simple example, let's create a new business partner group and store
it in the database:
``` java
     // create the object through the factory
      final Category bpg = OBProvider.getInstance().get(Category.class); 
     
     // set some values
     bpg.setDefault(true);
     bpg.setDescription("hello world");
     bpg.setName("hello world");
     bpg.setValue("hello world");
     bpg.setActive(true);
     
     // store it in the database
     OBDal.getInstance().save(bpg);
```

There are a number of things which are important to note:

  * The above code does not set an explicit user context. The user context is set automatically when running the above code in Etendo Classic. However, in other environments, it has to be set explicitly, see [here](#user-context) for more information. 
  * There is a BPGroup class which models the data of the _c_bp_group_ table. This class has type safe getters and setters for all the data in this table. 
  * A factory (the OBProvider) is used to create an instance of the BPGroup class. 
  * The OBDal service is the main entry point into the Data Access Layer, it offers save, remove and query functionality. The OBDal API is discussed in more detail below. 

The code snippet above also shows that you do not need to work with SQL or JDBC
to work with the data from the database. As a developer, you work
directly with objects and the available data is directly visible through the
getters and setters.

As a next step, let's query for the business partner group, and change its
description:
```java
     // create an OBCriteria object and add a filter
     final OBCriteria<Category> obCriteria = OBDal.getInstance().createCriteria(Category.class);
     obCriteria.add(Restrictions.eq("name", "hello world"));
     
     // perform the actual query returning a typed list
     final List<Category> categories = obCriteria.list();
     final Category cat = categories.get(0);
     
     // and set a new name
     cat.setName("another hello world");
     OBDal.getInstance().save(cat);
```
This code snippet introduced a number of new concepts:

  * The OBDal service is used to create an OBCriteria object. 
  * The OBCriteria object represents the query, implements the Hibernate Criteria interface and can be used as a standard Hibernate Criteria object. The OBCriteria object also supports sorting and paging parameters. The OBCriteria API is discussed in more detail below. 
  * The OBCriteria list method performs the actual query, it returns a type safe list of the requested objects. 
  * After changing the name of the business partner group, you don't need to do an explicit save. At commit time Hibernate will automatically detect _dirty_ objects and save those. 

This was a short introduction which shows how the DAL can be used to create,
store and retrieve one (simple) business object. The rest of this section
will describe the Data Access Layer functionality in more detail.

####  DAL Architecture

The image below shows the envisioned architecture for the data access layer in
Etendo Classic.

  
![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Access_Layer-0.png)

  
This architecture is implemented:

  * Runtime model: the runtime model is the main driver for generating the business objects and the Hibernate mapping. It's also used extensively in security, export/import and in webservices implementations. 
  * Hibernate Mapping: from the runtime model the DAL (during initialization) generates a Hibernate mapping. This Hibernate mapping is used to initialize Hibernate. 
  * Database Schema: the runtime model (actually the application dictionary) can be used to update the database schema. This is not available as part of the DAL but as part of the DBSourceManager product. 
  * Data Access Layer: the Data Access Layer (DAL) provides an API to store, query and remove business objects from the database. 
  * Business Model/Logic Layer : the business model/logic layer contains the implementation of the business processes. 
  * Business Services: the service layer exposes the business logic to the outside world. I

The complete architecture runs inside of a context which provides security and
transaction handling.

####  Business Object

This document uses the term business object to denote an entity and its
dependent information. A business object can be a simple entity such as a
currency which just has basic primitive fields. On the other hand it can also
be a structure of entities, for example an order header with its order line.

A business object structure always has one business object which is the owner
of all the business objects in that structure, for example, for a sales order
the sales order header business object is the owner of the complete structure
(i.e. of the sales order lines). Another way of describing this is that the
sales order lines depend on the sales order header, a sales order line can not
exist without its sales order header and when a sales order header is removed
also its sales order lines should be removed.

The DAL uses the foreign keys from the child to parent to create the parent-
child association in Java and Hibernate. More specifically: the foreign key
columns which have the field isParent set to yes (checked/true) define the
business object parent-child relations, other foreign key columns define
standard many-to-one associations. For example the foreign key field
_c_order_id_ in _c_order_line_ is used to create the one-to-many association
(in the in-memory runtime model) from _c_order_ to _c_order_line_ . This one-
to-many association is then used to generate a List<OrderLine> member in the
Java Order class and a one-to-many mapping in Hibernate.
  
It is possible not to generate those one-to-many associations in the parent
entity. This can be avoided by setting *Child Property in Parent Entity* field to
false in Column tab. 

!!!note
    Generated one-to-many properties in the parent
    entity, load all children in memory when invoked, so they should be only
    generated when the expected amount of child records is low, otherwise it
    might cause an `OutOfMemoryError`.

In order to keep a backward compatible API, `hb.generate.all.parent.child.properties=true` preference can be set in etendo.propeties, in this way all foreign key columns will generate a one-
to-many property in the parent entity.

####  DAL Main Interfaces

The DAL offers three main services to instantiate, create and query Etendo Classic business objects: OBDal, OBCriteria and OBProvider. The service classes
can all be found in the _org.openbravo.dal.service_ package.

#####  OBDal

The  [OBDal](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/dal/service/OBDal.java){target="\_blank"}  instance (available through _OBDal.getInstance()_ ) is the main
entrance point for retrieving and storing business objects in the database in
a validated and secure way. It provides the following functions:

  * save: stores a new business object in the database or an existing business object is updated. For existing business objects, it is not required to call this method as Hibernate does automatic _dirty_ checking. 
  * get: retrieves a single business object using its ID. There are two versions: one using the class name (of the generated business object) and one using the entity name. 
  * remove: delete a business object from the database, the actual database delete is done at commit time. 
  * create OBCriteria: [OBCriteria](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/dal/service/OBCriteria.java){target="\_blank"} objects are used for querying. 
  * commitAndClose and rollbackAndClose: these methods can be used to implement custom transaction handling. Normally, this is done by the environment (Etendo web container or Etendo test). 

The OBDal API makes extensive use of the  [OBCriteria](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/dal/service/OBCriteria.java){target="\_blank"}  and  [OBQuery](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/dal/service/OBQuery.java){target="\_blank"}  classes to support querying.
  
The OBDal class allows accessing to the  read-only database (pool). In
this case, the instance must be retrieved with the
_OBDal.getReadOnlyInstance()_ method. It is important to note that if the
read-only pool is not configured, this method will use the standard pool to
get the database connections.
  
Once the read-only pool is configured, there are two ways to override
_OBDal.getReadOnlyInstance()_ behavior:

  * Creating a record in _Data Pool Selection_ , which associates a database pool with a particular report. 
  * Using the _Default DB Pool used by reports_ Preference, which defines the default pool returned by _OBDal.getReadOnlyInstance()_ if no entry in Data Pool Selection is made for the current Process. 

#####  OBCriteria

The  OBCriteria  class implements the [Hibernate Criteria](https://docs.jboss.org/hibernate/core/3.5/reference/en/html/querycriteria.html){target="\_blank"} interface. It
extends the standard Hibernate Criteria functionality for filtering on active,
client and organization. In addition, it offers convenience methods to set
orderby and to perform count actions.

Summarizing, the OBCriteria object supports all Hibernate Criteria features:

  * Setting the where-clause of a filter using the Hibernate Criterion concept. 
  * Setting paging parameters such as first row and maximum number of results. 
  * Setting order by on the query. 
  * Specifying joins for performance reasons. 
  * Performing counts, average etc. 

For more information, see the [Hibernate Criteria](https://docs.jboss.org/hibernate/core/3.5/reference/en/html/querycriteria.html){target="\_blank"} on Criteria queries.

The functionality of OBCriteria is illustrated with a number of code snippets:

An OBCriteria instance is created as follows:
``` java
final OBCriteria obc = OBDal.getInstance().createCriteria(Currency.class);
```
Query on the name property:
```java
obc.add(Restrictions.eq("name", "testname"));
```
Restrictions.eq is an instance of the Hibernate Criterion class. The Hibernate
Criterion concept is an expression language coded in Java supporting most
commonly used expressions (and, or, equal, not-equal, in, between, etc.).

Setting a descending order by on the name property:
``` java
obc.addOrderBy("name", false);
```
Or another one: order by the name property of a referenced business object
product:
``` java
obc.addOrderBy("product.name", false);
```
Set some paging parameters, return 10 objects, beginning with the 100th:
``` java
     obc.setFirstResult(100);
     obc.setMaxResults(10);
```
Also return inactive objects (as a default only active objects are returned):
``` java
obc.setFilterOnActive(false);
```
Count the number of Currency objects in the database:
``` java
final int bpGroupCount = obc.count();
```
Retrieve the list of Business Objects:
``` java
     final List<BPGroup> bpgs = obc.list();
```
Get a specific currency:
``` java
     final OBCriteria<Currency> obc = OBDal.getInstance().createCriteria(Currency.class);
     obc.add(Restrictions.eq("isoCode", "USD"));
     final List<Currency> cs = obc.list();
     final Currency c = cs.get(0);
```
#####  OBQuery

The [OBQuery](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/dal/service/OBQuery.java){target="\_blank"}  class is an extension of the  [Hibernate Query](https://docs.jboss.org/hibernate/orm/3.5/reference/en/html/queryhql.html){target="\_blank"} object. It
extends the standard Hibernate Query functionality for filtering on active,
client and organization.

The OBQuery object is created through the _OBDal.createQuery_ method. The
first argument of the createQuery is a class or an entity name, the second
argument is the where-clause. The where-clause can be a simple one:
``` sql
    name='test'
```

or one which also declares an alias:
``` sql 
    as ol where ol.order.id='abc'
```

In code:
``` java
final OBQuery<Category> obQuery = OBDal.getInstance().createQuery(Category.class,"name='testname' or searchKey='testvalue'");
final List<Category> bpgs = obQuery.list();
```
#####  OBProvider

Etendo business objects should not be instantiated directly using the
new operator. Instead the  [OBProvider](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/base/provider/OBProvider.java){target="\_blank"}  class should be used to create an
instance of the required business object. The OBProvider is located in the
_org.openbravo.base.provider_ package and can be retrieved using the method
OBProvider.getInstance(). The OBProvider offers methods to instantiate using a
class name or using an entity name. Some code examples:
``` java
      final Category bpg = OBProvider.getInstance().get(Category.class); 
     
     // The ENTITYNAME constant is created by the business object generation logic
     final BPGroup bpg = (BPGroup)OBProvider.getInstance().get(BPGroup.ENTITYNAME);
```
####  Etendo Business Objects

The DAL generates, instantiates and uses Etendo business objects. This
part of the development manual describes their structure and main interfaces.

#####  BaseOBObject

All Etendo Classic business objects inherit from the [BaseOBObject](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/base/structure/BaseOBObject.java){target="\_blank"}  class. This
class is located in the _org.openbravo.base.structure_ package.

The BaseOBObject class offers the following functionality:

  * Direct access (called the dynamic API) to all the properties and values of the data within the business object through the get(String propertyName) and set((String propertyName, Object value) methods. These methods are particularly useful when working with generic functions such as security and logging. 
  * Access to the Entity describing the type and properties of the business object. 
  * Security and validation checks when getting and setting values. 
  * Access to the ID of the object through the getId method. 
  * Access to the identifier of the object: the getIdentifier method of the BaseOBObject uses the identifier properties of the object to create a displayable title for that object. 

The section on runtime model and dynamic API below, gives an example on how
the dynamic API and the runtime model can be used.

As all Etendo Classic business objects should extend this class, it is safe to
cast an object to this class when required.

#####  Generated Business Object Classes

At development time, the DAL will generate business object classes for each
table defined in the application dictionary. This is done as part of the
compile.complete ant tasks or can be done separately through the
generate.entities ant task. These generated classes are the classes which are
normally used by a developer because they offer compile-time-checked typed
access to properties. The generated classes are created in the _src-gen_
folder in the Etendo Classic development project and are part of the
_org.openbravo.base.model_ package and its subpackages.

The generated classes extend the BaseOBObject and offer typed wrapper getters
and setters around the generic set and get method of the parent BaseOBObject
class:
``` java
     public String getRecord() {
      return (String) get("record");
     }
     
     public void setRecord(String record) {
      set("record", record);
     }
```
In addition, the generated Java classes set default values (in the constructor)
and have a static ENTITYNAME variable which must be used when it is required
to refer directly to an entity name of an entity.

#####  Entity, Property and Column Naming

The Data Access Layer uses names defined in the Application Dictionary for
different purposes:

  * xml tag names in REST web services and import export 
  * class names of generated Entity classes 
  * member names of members of generated Entity classes 
  * to detect that a certain Entity implements/supports a certain interface (see [here](#important-interfaces)) 

The application dictionary historically allows many different types of names
(also ones that are illegal for xml/java). Therefore, the data access layer
applies specific conversion logic to always ensure that names are allowed and
unique for xml/Java.

For a full listing of all entity and property names, see the [Data Model
Reference](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/data-model) section.

######  Entity Naming

An entity (corresponds to a table in Etendo Classic) has different names,
relevant for different situations:

  * A table name (stored in _AD_Table.tablename_ ) which is the database table name in the physical database. 
  * An entity name (present in _AD_Table.name_ ) which is a globally unique name. It corresponds to the XML tag name used for that entity. It is, for example, used in [REST webservices](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/XML_REST_Web_Services.md) and client export/import. 
  * A Java class name (stored in _AD_Table.classname_ ), the classname is used when generating the Java business object. It is unique within the data package of the table. 

Each table (i.e. entity) in Etendo Classic belongs to a data package. A data
package has a Java package field which defines the Java package in which the
entity Java class is generated.

!!!warning
    AD_Table.name shouldn't contain blank spaces. If the name of the table
    contains spaces, the process of building the entity name will remove those
    spaces, e.g. 'My Table' will be converted to 'MyTable'.  
  
######  Property Naming

For property naming, the logic is slightly different. The property naming logic
has two distinct steps: 

  1) first determine an initial property name, and

  2) correct/convert this property name.

The initial property name is determined as follows:

  * Properties for standard primitive type (varchar, numeric, etc.) and foreign key columns: for these properties the value in _AD_Column.name_ is used as the start of the property name calculation. 
  * Properties which model a list of child entities: the so-called one-to-many or list properties. For example, the Order class has a property _OrderLineList_ . The initial name of this property is set as follows: 
    * (common case) if the column name on the other side (from the child to the parent) is the same as the primary key column name of the parent, then use the entity name of the child plus the suffix 'List'. For example, the c_orderline table has a foreign key c_order_id to the c_order table. This results in a property orderLineList in the Order entity. 
    * (non-common case) if the column name, which points from the child to the parent, is different than the primary key column name of the parent, then the following naming rule is used: target entity name + "_" + referenced property name + "List". For example, if the c_orderLine table has a column: c_orderheader_id with property name orderHeader then the resulting list property in the Order would be: OrderLine_orderHeaderList. 

Next, the property name generation performs the following steps:

  * Spaces are removed and used to camelcase, for example the name 'Enable in Cash' is converted to: EnableInCash (note the uppercased I). 
  * Underscores are removed and used to camelcase: for example the name 'C_Poc_email_ID' is translated to CPocEmailID. 
  * 'illegal' characters are removed: only characters from a to z and A to Z and numbers (not as prefix) are maintained, so 'G/L Item' will be translated to 'GLItem'. 
  * The first character is lowercased: AccountingFact is converted to accountingFact. 

######  Property Naming and Supported Interfaces

The data access layer automatically detects that an entity supports a certain
interface by analyzing the name of the properties of that entity. It is
therefore very important to be precise in naming of properties. The naming
of properties and the interfaces supported by specific properties are
discussed in the following section.

#####  Important Interfaces

The generated classes implement a set of interfaces which can be used to check
if a certain instance of a class has specific functionality available:

* [ClientEnabled](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/base/structure/ClientEnabled.java){target="\_blank"}  : flags an object as having a getClient/setClient method and as an object which is stored by Client.

!!! note 
    Etendo automatically detects that a table (==Entity) implements this interface if it has a column with the name: client (defined in the ad_column.name field). When this interface is implemented/detected then the client property is used to automatically filter objects (on the readable clients) when querying and to do security checks when persisting an object.


* [OrganizationEnabled](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/base/structure/OrganizationEnabled.java){target="\_blank"}: an object implementing this interface has getOrganization/setOrganization methods. 

!!!note
    Etendo automatically detects that a table (==Entity) implements this interface if it has a column with the name: organization (defined in the ad_column.name field). When this interface is implemented/detected, then the organization property is used to automatically filter objects (on the readable organizations) when querying and to do security checks when persisting an object. 

* [ActiveEnabled](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/base/structure/ActiveEnabled.java){target="\_blank"}: an object implementing this interface has an active flag (boolean) which can be reached through the isActive/setActive methods. 

!!!note
    Etendo automatically detects that a table (==Entity) implements this interface if it has a column with the name: active (defined in the ad_column.name field). When this interface is detected/implemented then the active field is used in automatic filtering of objects when querying through the data access layer. 

* [Traceable](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/base/structure/Traceable.java){target="\_blank"}: a Traceable object has audit information: created and updated (date fields), and createdby and updatedby (contain a User). This audit information is reachable through corresponding accessors. 

!!!note
    Etendo automatically detects that a table (==Entity) implements this interface if it has the following columns (all are required): creationDate, created, updated, updatedBy (set in the ad_column.name field). See specifically the name of the date of creation property, it should be: creationDate. When this interface is implemented/detected then the data access layer will automatically set audit fields when an object is persisted. 

#####  Client and organization and Audit information

The above interfaces are used by the DAL when an object is saved for the first
time or updated in the database:

  * a ClientEnabled object for which the Client is not set will get the current Client of the user (present in the user context). 
  * an OrganizationEnabled object for which the Organization is not set will get the current Organization of the user (present in the user context). 
  * a Traceable object: when saved for the first time, the created, createdby, updated and updatedby are set. When an object is updated, then the updated and updatedby are set. 

So, a developer does not need to explicitly set this information in a new or
existing object. 

!!!note 
    For the data access layer to detect that a table supports the above interfaces, the column names (AD_Column.name) need to adhere to specific standards, see [here](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/Data_Access_Layer.md#property-naming-and-supported-interfaces) for more information.

#####  Creating a new instance of a Business Object

A business object may never be created using the Java new operator. All business objects should be created using the  [OBProvider](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/base/provider/OBProvider.java){target="\_blank"}  factory class:
``` java
     // create the object through the factory
      final Category bpg = OBProvider.getInstance().get(Category.class);
```
Hibernate will detect that a business object is new when:

  * the ID of the business object is not set 
  * when the flag newOBObject is set to true explicitly 

So, if you want to create a new business object with a specific ID (by calling
setId(...)) then you explicitly need to call
businessObject.setNewOBObject(true). Otherwise, Hibernate will throw an
exception ('count of batch update operation....').

####  User Context

The DAL operates within a user context. The user context is implemented in the
[OBContext](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/dal/core/OBContext.java){target="\_blank"}  class in the _org.openbravo.dal.core_ . The OBContext is
initialized using a userId. On the basis of this userId, the OBContext computes
the role, clients, organizations and accessible entities. This information is
used by the DAL for security checking and automatic filtering on client and
organization.

The OBContext is stored as a ThreadLocal variable and the DAL always assumes
that there is one available. The OBContext can be retrieved using the call
_OBContext.getOBContext()_.

Normally a developer can assume that there is always a user context available.
The following sections discuss this in detail.

#####  User Context in a running Etendo Classic Instance

When the code runs inside of an Etendo Classic application then the user
context is always set. This is done through a request filter (the
_DalRequestFilter_ in the _org.openbravo.dal.core_ package). This request
filter ensures that the OBContext ThreadLocal is set to the current user (of
Etendo), puts the OBContext in the http session and cleans up the OBContext
when the thread ends (as the thread may be reused by another user).

#####  User Context in a Test environment

The DAL uses a base class for its test cases (see topic Testing further
below). This base class takes care of setting the user context when running
tests.

#####  User Context in a Standalone situation

The user context can also be set by calling _OBContext.setOBContext(userId)_
with a userId which exists in the ad_user table. This will setup a user
context and place it in the OBContext ThreadLocal member to be used by the
DAL.

#####  Administrator Mode

As was just mentioned, DAL operates within a user context, and provides
automatic security checking mechanisms to prevent the user from accessing data
which according to the Etendo Security Model should not be accessed.

However, in most cases, the piece of code developed is contained within an
object which in itself automatically provides part of the security checking,
in particular the entity access. For example, if the piece of code is part of
a process which is called from a button, the user will only be able to click
that button if he is already in the window (and therefore, has access to that
entity). The same happens when the code is part of a callout (the callout will
only be fired if the user is already in the window).

The OBContext provides an Administrator Mode which can be used to perform
administrative actions even if the user does not have enough privileges. This
mode bypasses the Entity Access checking, and it does not filter by Client
or Organization.

An additional Administrator Mode is provided, which bypasses the Entity Access
checking, but it does filter by Client Organization. It is encouraged to use
this restricted Administrator Mode, as it conveniently filters by Client and
Organization, something that is usually needed on Business Logic code.

The syntax to activate the restricted Admin Mode:
``` java
    try {
      OBContext.setAdminMode(true);
     
      // do administrative things here
     
    } finally {
      OBContext.restorePreviousMode();
    }
```

In some cases, it is necessary, though, to prevent also client/organization
check, this can be done using ` OBContext.setAdminMode(false) ` .

!!!note 
    The calls to setAdminMode/restorePreviousMode are balanced, meaning
    that for each call to setAdminMode there is also exactly one call to
    restorePreviousMode. If in one request the number of calls to setAdminMode is
    unequal to the number of calls to restorePreviousMode then a warning is
    displayed: _Unbalanced calls to enableAsAdminContext and resetAsAdminContext_.

######  Cross Organization Reference Administrator Mode
  
Validation for referenced object's organization in columns [supporting it](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/Data_Access_Layer.md#cross-organization-references) can
be bypassed by using a special Administrator mode: `
setCrossOrgReferenceAdminMode ` . Restoring previous mode is done by `
restorePreviousCrossOrgReferenceMode ` . Similarly to standard admin mode,
calls must be balanced for this mode, independently from standard admin mode.
``` java
      OBContext.setCrossOrgReferenceAdminMode();
      try {
     
        // cross organization references are allowed here
     
      } finally {
        OBContext.restorePreviousCrossOrgReferenceMode();
      }
```

####  Transaction and Session

The DAL implements the so-called open-session-view [https://developer.jboss.org/docs/DOC-13954] pattern. With a
slight variation that the DAL will automatically create a Hibernate Session
and start a transaction when the first data access takes place (if none
existed). So not when the HTTP requests begins. The Session and Transaction
are placed in a ThreadLocal and re-used for subsequent data access actions in
the same thread.

An important thing to be aware of is that normally all database actions are
flushed to the database when the session is committed. In a web environment,
this is at the end of the http request. To perform flush on demand, call the
_OBDal.getInstance().flush()_ method.

Normally a developer does not need to explicitly commit or rollback a Session
or Transaction:

  * Within Etendo Classic: the open-session-view [https://developer.jboss.org/docs/DOC-13954] pattern is used, when running the code in the Etendo Classic application, the transaction commit and session close takes place at the end of the http request (see the [DalRequestFilter](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/dal/core/DalRequestFilter.java){target="\_blank"}). If an exception occurs, then a rollback is performed. 
  * In the Etendo Classic test environment: The DAL base test class ([OBBaseTest](https://github.com/etendosoftware/etendo_core/blob/main/src-test/src/org/openbravo/test/base/OBBaseTest.java){target="\_blank"}) takes care of committing or rollingback transactions. 
  * Standalone: if the code is running standalone, then an explicit commit or rollback needs to be performed. This can be done through the OBDal methods: _OBDal.getInstance().commitAndClose()_ or _OBDal.getInstance().rollbackAndClose())_ . 

!!!warning
    SQLC and DAL: The standard Etendo Classic database access
    (through Windows) works outside of the DAL. This means that,
    database access uses a different connection than the DAL. If both connections
    update the database, then it is possible that a deadlock situation happens.
    So, when working/updating through both the DAL and SQLC one should always
    first commit/close the connection of the DAL explicitly before continuing with
    SQLC or the other way around.

####  Security and Validation

The DAL performs many different security and validation checks, in both read
and write mode. A security violation results in a  [_SecurityException_](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/base/exception/OBSecurityException.java){target="\_blank"} , a
validation error in a  [_ValidationException_](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/base/validation/ValidationException.java){target="\_blank"}. Different exceptions are thrown at different points: some Security Exceptions are thrown when reading a business object (e.g. read security violations), others are thrown when the session commits or flushes (write security violations) or when a setter is called (ValidationException).

If you need to work without this security checks, you should use the
Administrator Mode, or the restricted Administrator Mode.
You can find more information about them in [Administrator Mode](#administrator-mode).

#####  Write Access

Write access checks are done when the OBDal save or remove methods are called
or when a business object is saved by hibernate (at flush/commit). For write
access, the following checks are performed:

  * The user must have access to a window/tab which displays the entity. See the  AD_Window_Access  table. 
  * The organization of the business object must be in the list of writable organizations of that user. Writable organizations are organizations directly linked to the role of the user. 
  * The client of the business object must be in the list of writable clients of that user. 

If any of the above checks fails, then a _SecurityException_ is thrown.

#####  Read Access

A user can only view information from their own clients and accessible
organizations. This is ensured by the DAL by automatically adding filter
criteria in the OBCriteria object.

Read access is checked for both direct read access and derived read access.
Direct read access allows a user to see all the information of a certain
entity. With derived read access only the active property, audit info and the
ID and identifier may be read by a user.

Direct read access is based on the window access tables, i.e. a user can read
all the information of a certain entity if the user has access to a window
displaying that entity. The read access for a certain table/entity can be
overridden using the ad_table_access table. The set of directly readable
entities is computed by the  [EntityAccessChecker](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/dal/security/EntityAccessChecker.java){target="\_blank"}  in the
`org.openbravo.dal.security` package.

Derived read access is computed as follows: For each directly readable entity
it is determined to which other entities it refers. These other entities are
derived read accessible. For example, if a user may directly read an invoice
entity, and an invoice refers to a currency then the user has derived read
access to a currency. The derived readable entities are also computed in the
EntityAccessChecker.

Direct and derived read access are checked at different points:

  * Direct read access is checked when a method on the OBDal instance is called. 
  * Derived read access is checked when a getter is invoked or the generic get method is called. 

#####  Delete Check

A user may delete a business object if:

  * They have write access to the entity of the business object. 
  * The entity is not set as not-deletable, this is defined in the _ad_table_ . 

Both security checks are done when the session is committed or flushed. See
the  [OBInterceptor](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/dal/core/OBInterceptor.java){target="\_blank"} class for more details.

#####  Table Access Validation

Different tables in Etendo Classic have different access levels. Some tables
only allow information from client 0 and organization *. Other tables allow
objects from any organization.

When a business object is saved, a check is done if the client and organization
of that business object are valid for the table access level of the table. The
check has been implemented in the  AccessLevelChecker  in
`org.openbravo.base.validation` . This check is performed when the session
commits or is flushed.

#####  Validation

Property values are validated when the setter is called or the generic set
method on the BaseOBObject is called. The following checks are performed:

  * a check is done if the instance of the value is valid for that property 
  * for String values, a check is done on length or on the allowed String values (list/enumerate values) 
  * for numeric values, the min and max are checked 
  * for mandatory values, a check is done if the value is unequal to null 

The property validation is performed by the classes in
`org.openbravo.base.validation`  . The validation structure is initialized when
the runtime model is created. For each property a corresponding
PropertyValidator is created. Different types of properties have different
types of PropertyValidators.

#####  Entity Organization Validation

A business object may only refer to other business objects which belong to the
natural tree of the organization of the business object. This validation is
done when a business object is saved (i.e. when the session commits/flushes).

######  Cross Organization References
  
Entity Organization validation can be bypassed if the following conditions are
all fulfilled:

  * The foreign key column that references to the other object is marked as _Allow Cross Organization Reference_ . This can be set in Tables and Columns > Column tab. 
  * Context is in [Cross Organization Reference Administrator Mode](#cross-organization-reference-administrator-mode). 

#######  Cross Organization references in UI

Columns allowing cross organization references allow users to select records from organizations not included in the tree of the record they are referenced from.

####  DAL support for Database Views

The DAL supports views in practically the same way as normal
tables defined in the application dictionary. This means that:

  * database views are considered as normal business objects 
  * entities are generated for database views 
  * database views can be queried using HQL and the DAL query apis 
  * database views can be accessed through the  [XML](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/XML_REST_Web_Services.md)  and  [JSON](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/JSON_REST_Web_Services.md) REST web service apis 

There is one difference between a database view and a database table: the DAL
does not support updates on views, view business objects can be read and
queried but not inserted or updated.

!!!note
    For the DAL to consider a view as a business object it needs to have
    a primary key column defined in the application dictionary. This column does
    not need to be a real primary key in the database but it must hold unique
    values for each record of the view.

####  SQL Functions in HQL

To use SQL Functions in HQL, you first must make sure that Hibernate knows
about your function. So in your java code you have to register the function.
This is done by creating a class that implements the **SQLFunctionRegister**
interface and annotated as _@ApplicationScoped_ .
``` java
    @ApplicationScoped
    public class ExampleSQLFunctionRegister implements SQLFunctionRegister {
      @Override
      public Map<String, SQLFunction> getSQLFunctions() {
        Map<String, SQLFunction> sqlFunctions = new HashMap<>();
        sqlFunctions.put("ad_column_identifier_std", new StandardSQLFunction("ad_column_identifier_std",
            StandardBasicTypes.STRING));
        sqlFunctions.put("now", new StandardSQLFunction("now", StandardBasicTypes.DATE));
        return sqlFunctions;
      }
    }
```

The _getSQLFunctions()_ method should be implemented providing a map with the
SQL functions to be registered. This map will be retrieved during the DAL
layer initialization in order to perform the registration automatically.

Please note that there are several SQL functions being already registered by default in core. See  [here](https://github.com/etendosoftware/etendo_core/blob/main/modules_core/org.openbravo.client.kernel/src/org/openbravo/client/kernel/KernelSQLFunctionRegister.java){target="\_blank"}  and  [here](https://github.com/etendosoftware/etendo_core/blob/main/modules_core/org.openbravo.advpaymentmngt/src/org/openbravo/advpaymentmngt/utility/APRMSQLFunctionRegister.java){target="\_blank"}.
  
After registering the function you can use it directly in an HQL like this:
``` java
    final Session session = OBDal.getInstance().getSession();
    final String qryStr = "select bc.id, ad_column_identifier_std('C_BP_Group', bc.id) from " + Category.ENTITY_NAME + " bc";
    final Query qry = session.createQuery(qryStr);
```
####  Executing Native SQL Queries

The DAL also allows the execution of native SQL queries:
``` java
      String documentNo = (String) OBDal.getInstance().getSession()
            .createNativeQuery("SELECT documentNo FROM c_order WHERE c_order_id = :id")
            .setParameter("id", orderId)
            .uniqueResult();
    
    
     
      // retrieving several records with multiple columns
      @SuppressWarnings("unchecked")
      List<Object[]> warehouseInfo = OBDal.getInstance().getSession()
            .createNativeQuery("SELECT name, value FROM m_warehouse WHERE ad_org_id = :id")
            .setParameter("id", orgId)
            .list();
```
!!!note
    The _createNativeQuery_ method accepts a second argument where the
    returning result type may be specified. But this is NOT supported due to a
    bug  in Hibernate. 
  
####  Runtime Model and the Dynamic API

The DAL makes the model (defined in the Application Dictionary) available at
runtime. The runtime model is especially useful in generic functionality such
as import and export and security and validation.

The runtime model consists of two main concepts:

  * [Entity](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/base/model/Entity.java){target="\_blank"}: an entity models a database table and its associations to and from other tables (i.e. entities). An entity has an _Entityname_ which is globally unique. In addition, an entity has a runtime Java class which is used for the runtime Java representation. The entity class has methods to retrieve the full list of properties, the ID properties or the identifier properties. 
  * [Property](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/base/model/Property.java){target="\_blank"}: a property corresponds to a column in the database. Some property specifics: 
    * A property can be a primitive property (String, Date, numeric) or a reference to another entity (which can be retrieved through the _getTargetEntity_ method). 
    * A property can be part of the primary key ( _isId() == true_ ). 
    * A property can be part of the identifier of an entity ( _isIdentifier() == true_ ). 

The runtime model is available through the  [ModelProvider](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/base/model/ModelProvider.java){target="\_blank"}  class (in
_org.openbravo.base.model_ ) which can be retrieved by calling
_ModelProvider.getInstance()_ . The ModelProvider offers several methods to
retrieve Entities from the in-memory model (the full list, by entity name or
by Java class).

The runtime model makes it possible to use model-driven development techniques
also at runtime. For example, the runtime model together with the dynamic API
offered by the BaseOBObject makes it possible to iterate through all
properties (and their values) of a business object without knowing the exact
type of the business objects.

The example below illustrates how to do this. This method below will translate
any Etendo Classic business entity into a simple XML document using the runtime
model and the dynamic API:
``` java
      private void printXML(BaseOBObject bob) {
        // used to print a bit nicer xml
        final String indent = "\t ";
        
        // get the entity from the runtime model using the entity name of the object
        final String entityName = bob.getEntityName();
        final Entity e = ModelProvider.getInstance().getEntity(entityName);
        // Note: bob.getEntity() also gives the entity of the object
     
        
        // print the opening tag
        System.err.println("<" + e.getName() + ">");
        
        // iterate through the properties of the entity
        for (Property p : e.getProperties()) {
          
          // and get the value through the dynamic api offered by the BaseOBObject
          final Object value = bob.get(p.getName());
          
          // handle null, just create an empty tag for that
          if (value == null) {
            System.err.println(indent + "<" + p.getName() + "/>");
            continue;
          }
          
          // make a difference between a primitive and a reference type
          if (p.isPrimitive()) {
            // in reality some form of xml conversion/encoding should take place...
            System.err.println(indent + "<" + p.getName() + ">" + value + "</" + p.getName() + ">");
          } else {
            // cast to the parent of all openbravo objects
            final BaseOBObject referencedObject = (BaseOBObject) value;
            // assumes that the id is always a primitive type
            System.err.println(indent + "<" + p.getName() + ">" + referencedObject.getId() + 
    		"</" + p.getName() + ">");
          }
        }
        
        // and the closing tag
        System.err.println("</" + e.getName() + ">");
      }
```
This example executes the following steps:

  * Get the _entityname_ from the object and retrieve the Entity from the runtime model through the ModelProvider instance. 
  * Create an opening tag and iterate through all properties of the entity (i.e. all columns of the table). 
  * For each property, do the following: 
    1. Get the value for the property from the business object through the dynamic API. 
    2. Handle null values and check if the property is a primitive type or not. 
    3. For a primitive type, just print the value. 
    4. For a reference type, cast the value to a BaseOBObject and print the ID of the referenced object. 

The above method will print the following output for a business partner group
like the one stored in the hello world example above:
``` xml
    <CoreBPGroup>
    	 <deflt>true</deflt>
    	 <description>hello world</description>
    	 <name>hello world</name>
    	 <value>hello world</value>
    	 <updatedby>1000001</updatedby>
    	 <updated>Sat Oct 04 12:31:57 CEST 2008</updated>
    	 <createdby>1000001</createdby>
    	 <created>Sat Oct 04 12:31:57 CEST 2008</created>
    	 <active>true</active>
    	 <org>1000000</org>
    	 <client>1000000</client>
    	 <id>ff8081811cc769b4011cc769e49b0002</id>
    </CoreBPGroup>
```
In general, when you are working with very generic code (cross-cutting
concerns) which applies to all business objects, then using the runtime model can be considered.

####  Testing

It is of vital importance to follow a test-driven development approach for
every development project. This applies especially to backend process
development (a little less for UI development which is more difficult to test
automatically). The Data Access Layer is tested using many JUnit test cases.
These can be found in the _src-test_ folder in the Etendo Classic project.

As a developer, you can make use of the same test infrastructure as the Data
Access Layer test cases. The only thing you need to do is to let your test
class inherit from the [OBBaseTest](https://github.com/etendosoftware/etendo_core/blob/main/src-test/src/org/openbravo/test/base/OBBaseTest.java){target="\_blank"}  class. The OBBaseTest class takes care of
managing transactions, the context and initializing the DAL.

You can choose to run the test cases for specific users, see the methods in
the OBBaseTest class for more information.
``` java
      public void testMyStuff() {
       setTestUserContext();
     
        // do your test here
      }
```
For more information, visit [How to develop test cases](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/How_to_create_testcases.md). 

####  Test your HQL: the HQL Query Tool

There is an Etendo HQL Query Tool which allows you to try an HQL query directly in the Etendo Classic interface. The module can be found in the [Github repository](https://github.com/etendosoftware/org.openbravo.utility.hqlquerytool){target="\_blank"}. 

This module creates a System Administrator window in which you can enter an HQL query and see the result. This window includes a list of all entities and their properties. The HQL Query Tool is a very useful tool to test HQL queries and to see the result of the query.

####  Calling Processes/Stored Procedures from the DAL

Sometimes, it makes sense to call a stored procedure from the DAL using the
same db connection as it is being used by the DAL. For this purpose, the DAL
includes two utility classes which make it easier to call processes and stored
procedures through the DAL:

  * [CallProcess](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/service/db/CallProcess.java){target="\_blank"} 
  * [Call Stored Procedure](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/service/db/CallStoredProcedure.java){target="\_blank"}

These classes make use of the same database connection as the DAL, in addition
instead of working with String parameters, you can work with the java
(primitive) objects directly.

Both classes contain javadoc with a detailed description on how to use the
class.

Another interesting part when working with direct database updates (outside of
Hibernate) is the following section in the trouble shooting guide: [changes
not visible in the DAL after calling stored procedure](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/Common_Issues_Tips_and_Tricks/#dal-queries-do-not-return-or-do-not-see-changes-in-the-database).

####  The DalConnectionProvider

To access and make use of classic Etendo code, it is often needed to have a
ConnectionProvider object available. When combining DAL actions with classic
Etendo operations, it makes sense to use one overall database connection and
commit all actions in one step.

To support this, the DAL provides a special ConnectionProvider implementation
which makes use of the DAL database connection: the [DalConnectionProvider](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/service/db/DalConnectionProvider.java){target="\_blank"}.
This class is simple to use, check out the javadoc for more information. The
class can simply be used by instantiating it:
``` java
    ConnectionProvider cp = DalConnectionProvider();
```
No additional information is needed for it to work properly.
  
For those queries that want to use the read-only pool, the connection provider
must be defined as follows:
``` java 
    ConnectionProvider cp = DalConnectionProvider.getReadOnlyConnectionProvider();
```
####  Using the Data Access Layer in an Ant task

To ease the use of the DAL in Ant, a base Ant task class is offered by the
DAL: the DalInitializingTask in the _org.openbravo.dal.core_ package. This
class is in charge of of initializing the DAL layer and other details (i.e. using
the correct classloader).

To make use of this class, the following changes need to be made to the Ant
task and the custom Java Ant task implementation:

  * The custom Ant task Java class should inherit from the _DalInitializatingTask_ . 
  * The custom Ant task Java class should implement a _doExecute_ method instead of the execute method in the custom Ant Java class (renaming the execute method to _doExecute_ is enough). 
  * Two additional properties are required in the ant task definition (in the build.xml): 
    * propertiesFile= `${base.config}/Openbravo.properties`. 
    * userId="100". 

The first property configures the location where the _Openbravo.properties_
file can be found. The second property sets the user under which the task is
performed.  

####  Important Information

#####  Hibernate Proxies

To improve performance of single-ended associations, the DAL makes use of the
Hibernate proxy functionality. The Hibernate proxy functionality wraps an
object inside a Hibernate proxy object. This is done at runtime using cglib.
The Hibernate proxy object takes care of loading the business object when it
is actually accessed. The advantage of this approach is that if an object is
never accessed then it is neither loaded, saving performance.

However, the Hibernate proxy is very visible when a developer debugs through
an application because the instance of an object at runtime will not be the
exact class (for example BPGroup) but an instance of a Hibernate proxy class.

To understand what the consequence of using Hibernate proxies, it is essential
that a developer using the DAL reads [this part](https://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/performance.html#performance-fetching-proxies){target="\_blank"} of the Hibernate manual.

#####  Performance: getting the ID of a BaseOBObject

The previous section discussed the Hibernate proxy concept. A Hibernate proxy
will load its wrapped business object when one of the methods on the business
object is called. In many cases, a developer just wants access to the ID or
entityname of an object. To prevent loading of the business object when
retrieving just this information, the DalUtil class in
_org.openbravo.dal.core_ offers a _getId_ method and a _getEntityName_ method.
These methods work directly with the HibernateProxy object and do not load the
underlying business object.

#####  Hibernate inner workings

To understand how Hibernate operates internally, it is strongly encouraged to
read chapter 21 of the Hibernate manual: [Improving Performance](https://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/performance.html){target="\_blank"}.

#####  Classloading

The DAL loads classes when initializing the DAL. The DAL as a default uses the
context class loader of the thread. In some cases, this does not work correctly
(for example when using the DAL in Ant). The DAL uses the OBClassLoader class
to make the classloader configurable. By calling _OBClassLoader.setInstance_
with your own OBClassLoader, you can control the class loader used by the DAL.

#####  Creating a new business object with a specific ID

Hibernate will detect that a business object is new when:

  * the ID of the business object is not set 
  * when the flag newOBObject is set to true explicitly 

So if you want to create a new business object with a specific ID (by calling _setId(...)_) then you explicitly need to call
_businessObject.setNewOBObject(true)_. Otherwise, Hibernate will not detect the business object as being new and throw an exception ('count of batch update operation....').

####  Coding Practices when using/extending the DAL

This section discusses a number of essential coding practices which should be
followed when using or extending the DAL.

#####  Exception Structure

All exceptions thrown by the DAL extend the base OBException class. The
OBException is a _RuntimeException_ so no explicit catch and throw statements
are required.

The OBException class takes care of logging the exception in a correct way.

When creating your own exception class, it is best to extend OBException so
that you can make use of the standard logging capabilities in the OBException
(the logging capabilities will be extended over time).

#####  Runtime Invariants: The Check class

The Data Access Layer in various locations performs assertions or runtime invariant checks. For example, to check if arguments are not null or that a certain condition is met. Implementing these type of checks helps to make your system much more robust. To make implementing these type of checks more convenient the Data Access Layer uses the Check class which is located in the _org.openbravo.base.util_ package. The Check class offers methods to check for _instanceof_ , _isNull_ , _isNotNull_ , etc.

Using a common class for assertions throughout your code makes your code more readable and easier to understand (compared to implementing your own assertion checking).

#####  Code Formatting

The source code, which is part of the Data Access Layer, is formatted using one formatting template. It is essential that when developing code in or using the Data Access Layer that this same code format template is used.

A common code format has the following benefits:

  * All Etendo Classic code gets a uniform look and feel, looks cleaner/tidier and, therefore, is more professional. 
  * The code will be easier to understand, less mistakes will be made. 
  * It is possible to do diff's on different versions of the code in mercurial (through your IDE), it is easier to understand changes over time. 
  * Solving mercurial conflicts is easier. 

The code formatting template and his configuration can be found in the following article: [IntelliJ Code Formatting](https://docs.etendo.software/latest/etendo-classic/getting-started/installation/intellij-code-formatting.md).

####  Tips & Tricks and Troubleshooting

!!!info
    For tips and tricks and common issues (and solutions) you may find, please visit the [troubleshooting](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/Common_Issues_Tips_and_Tricks.md#data-access-layer) section.

---

This work is a derivative of [Data Access Layer](http://wiki.openbravo.com/wiki/Data_Access_Layer){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}. 

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Data Model
## Article Path: /Developer Guide/Etendo Classic/Concepts/Data Model
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/data-model
## Article Content: 
### Data Model

#### Overview

Etendo Data Model is defined in Application Dictionary. At data model, Application Dictionary maps physical database tables and columns in its own tables (`AD_Table` and `AD_Column`) and on top of this it is built the rest of the system (Windows, tabs, fields, etc.).

This document explains how tables and columns are defined in physical database and how they are mapped in Application Dictionary's Data Model.

#### Tables in Application Dictionary

Once [tables](https://docs.etendo.software/latest/concepts/Tables.md) are physically defined in database, they must be mapped with Application Dictionary. This mapping is done through `Application Dictionary` > `Tables and Columns` > `Table` tab, which populates `AD_Table` table.

##### Table Naming

A table defined in the application dictionary has several names which are used by Etendo in different ways:

- Logical name (`AD_Table`.name): used by the [Data Access Layer](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md) in [XML](https://docs.etendo.software/latest/concepts/XML_REST_Web_Services.md) and [JSON](https://docs.etendo.software/latest/concepts/JSON_REST_Web_Services.md) REST web services. See [here](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md#entity-naming) for more information.
- Physical name (`AD_Table`.tablename): is the name of the table in the database.
- Class name (`AD_Table`.classname): the name of the [generated entity java class](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md#generated-business-object-classes).

#### Columns in Application Dictionary

After defining the table in Application Dictionary, the next step is to add columns to it. There's a process which reads columns from database and inserts them as columns in the table. This process is invoked from the Create columns from DB button in `Application Dictionary` > `Tables and Columns` > `Table` tab.

After that it is possible to check all the columns in the table in the `Application Dictionary` > `Tables and Columns` > `Table` > `Column` tab, and fine tune them if needed. There is a detailed explanation for all fields in that tab in the documentation about `AD_Column` table.

The following sections explain some details to be taken into account when defining a column.

##### Column Naming

A column defined in the application dictionary has several names which are used by Etendo in different ways:

- The logical name (`AD_Column`.name): this name is used by the Data Access Layer for [automatically detecting supported interfaces](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md#property-naming-and-supported-interfaces) and [XML and Java property naming](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md#property-naming).
- The physical column name (`AD_Column`.columnname): is the name of the column in the database table.

!!!important
    When naming columns related to audit info, client/organization and active it is very important to be precise in the name. If a wrongly spelled name is used then Etendo will not be able to detect that an entity [supports a certain interface](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md#important-interfaces) and specific automatic behavior is disabled. See [here](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md#important-interfaces) for a list of interfaces and their expected logical column names.

##### Defining Business Objects: the isParent

The column definition in the application dictionary is also used to define business object structures in Etendo. If the `isParent` field of a foreign key column is set (checked/true) then this foreign key models an association from a child to a parent. With this information the [Data Access Layer](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md) will automatically create an association (in-memory) from the parent to the child.

For example the `C_OrderLine` table has a column `c_order_id`. In the application dictionary this column is flagged as `isParent` (so the `c_order_id` points to the parent of the order line: the order header). The data access layer will translate this foreign key column in two association in the entity model:

- A many-to-one association from the order line entity to the order (its parent)
- A one-to-many association from the order to the order lines, in java this results in a member of type `java.util.List`.

For more information, see [here](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md#business-object).

##### References

References are used in Etendo Application Dictionary for two purposes:

  - **Define the type of data stored in a column**:
  Depending on the reference a column has, this column will hold different data types, for example numeric values, plain text, links to other columns, etc.

  - **Define how the fields linked to a column will be represented in the UI**:
  A column's reference also indicates how the fields associated to that column will be represented within tabs, for example a drop down list, a text box with a button to show a selector, etc.
  Thus each column in Application Dictionary has one and only one reference.

###### Types of References

There are two basic types of references: **Base** and **Subreferences**. References are set in `Application Dictionary` > `Tables and Columns` > `Table` > `Column` tab using `Reference` field for data type references and `Reference Search Key` for sub types.

####### Base References

These references can be directly associated to a column. Examples of data references are date, price, list, etc.

###### Subreferences

Some base references require another reference to completely define the data the column will contain. This is when sub references are used. The base references defined in core that require a sub reference are: `List` , `Search` and `Table`. Thus when one of these base references is associated to a column it is necessary to also associate to that column another subtype reference. For example, to set a column to a Business Partner search it is necessary to set the main reference for this column to `Search` and the secondary one to `Business Partner Search`.

!!!info
    When columns in Application Dictionary are automatically created based on their database physical description using the `Application Dictionary` > `Tables and Columns` > `Table` > `Create Columns from DB` process, it sets the references that are prone to be the proper ones, but in some cases they need to be changed. It is a good practice to review all the automatically assigned references for new columns after executing this process.

###### Core Base References

The following sections describe the base references defined in core.

####### Numeric references

`Integer` , `Number` , `Amount` , `Quantity` and `General Quantity` are used to maintain numeric values. When defining one of these references, it is possible to include the minimum and/or the maximum value for the column if wanted, notice that the check for this values will be done just in UI but not a database level, so it would be possible to add data out of range using any process. To enforce this restrictions in database, use database check constraints.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-1.png)

When there is a field in a tab associated to a column with one of these references, the way it is represented will look like the picture below.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-2.png)

The physical description of columns using this references must be `number`.

!!!note
    The way decimal numbers are represented is defined in `config/Format.xml` file with these equivalences:  
    - `euroEdition`: Amount
    - `qtyEdition`: Quantity
    - `priceEdition`: Price
    - `IntegerEdition`: Integer
    - `generalQtyEdition`: General Quantity and Number

####### Price

`Price` reference is similar to the previous numeric ones and is intended to store monetary quantities. When defining it, it does not allow maximum and minimum values.

The physical description of columns using this references must be `number`.

####### Text References

`String` , `Text` and `Memo` references are used for text columns. The difference between them is the text length they are supposed to store.

- **String** is for short text and it will always be displayed in UI as a one line text box.
- **Text** and **Memo** are displayed in multiple lines depending on the length defined in the `Length` field.

The physical description of columns using this references must be `char`, `varchar` or `nvarchar`.

This is how a **text** reference looks like in UI:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-3.png)

####### URL link

`Link` reference is used to represent URL links. Columns with this reference are text columns.

The UI for this reference is:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-4.png)

When clicking on the button next to the text box, a new browser is opened with the link in the box.

####### Time References

`Date` , `Time` , `DateTime` `Absolute Time` and `Absolute DateTime` are used for columns storing date or time values. **Date** displays a date without hours; **Time** displays time without date, this is just hour, minutes and seconds; **DateTime** displays date with time.

When defining a column of type **Date** maximum and minimum values are accepted.

In Oracle, physical database columns for these references must be `DATE` or `TIMESTAMP` types. In PostgreSQL the data type is `Timestamp without timezone`.

An example of how a field for a column with reference date is represented is as follows:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-5.png)

Notice that a calendar button is displayed next to the text box, this facilitates the dates selection, when clicking on it a calendar poup-up is opened:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-6.png)

And this is an example of a DateTime field:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-7.png)

The date-picker for this reference is like the Date reference one but also it adds a time-picker. If the input value is empty, this time picker value is the current time.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-8.png)

The format for displaying time and dates is defined in `config/Openbravo.properties` file by the `dateFormat.sql` and `dateTimeFormat.sql` using SQL format. Example:

```java
dateFormat.sql=DD-MM-YYYY
dateTimeFormat.sql=DD-MM-YYYY HH24:MI:SS 
```

**Time** and **DateTime** are relative references, that means that the stored value is loaded from the backend with the backend/server timezone and displayed in the client/browser with the own client timezone:

- The value is stored with server timezone.
- When loading into the client, the server transforms the value to UTC and it sends it to the client. The client transforms this UTC value to client timezone.
- When saving in the server, the client timezone value is transformed to UTC and sent to the server. The server reads this UTC value, it transforms it to server timezone and stores it in the database.

`Absolute Time` and `Absolute DateTime` are, as their name indicates, absolute references, that means that the stored value in the backend/server is exactly the same than is displayed in the client/browser:

- When passing the time/datetime from the client to the server, the value is passed as it is read from the database, so there is no UTC conversion. There are some mechanisms in the client to display the value as it comes, so there are no convesions here.
- When receiving a value from the client, it is stored also as it comes from the client without any UTC conversion.

####### Yes/No Reference

`YesNo` reference is used for columns accepting boolean values (yes or no). In the UI a checkbox is shown, when it is checked the column will take 'Y' as value, when it is not it will take 'N'.

Physical database columns for these references must be `CHAR(1)` .

UI for this reference is:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-9.png)

####### Image

**Image BLOB** reference is used to store images in the database. All images are physically stored in a binary field of the table `AD_IMAGE`, and the table column used must be a reference to this table. Image types supported are the raster types: **PNG**, **JPEG** and **BMP**, and the vector type **SVG**.

!!!info
    **SVG** images are fully supported in the browsers Chrome, Firefox, Safari and Microsoft Edge. Not in Internet Explorer. In this browser, **SVG** images may be clipped and not properly displayed.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-11.png)

The image column can have an associated action that defines a validation and a transformation to be done for images saved in the database based on the original size of the image. Note that vector images _SVG_ never apply for these actions.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-12.png)

The image size values actions defined are:

- **None** . Any image can be saved and no transformation is done to the image
- **Allowed - Exact size** . Only images with the size defined in the fields **Image width** and **Image height** are allowed.
- **Allowed - Minimum size** . Only images with at least the size defined in the fields **Image width** and **Image height** are allowed.
- **Allowed - Maximum size** . Only images with a maximum of the size defined in the fields **Image width** and **Image height** are allowed.
- **Recommended - Exact size** . If the image does not have the size defined in the fields **Image width** and **Image height** a warning is displayed to the user.
- **Recommended - Minimum size** . If the image does not have at least the size defined in the fields **Image width** and **Image height** a warning is displayed to the user.
- **Recommended - Maximum size** . If the image size is larger than size defined in the fields **Image width** and **Image height** a warning is displayed to the user.
- **Resize - Exact resize (without maintaining the aspect ratio)** . The image saved is resized to the size defined in the fields **Image width** and **Image height**. The aspect ratio is not maintained and may change.
- **Resize - Closest to the maximum size (maintaining aspect ratio)** . The image saved is resized to the size defined in the fields **Image width** and **Image height** . But the aspect ratio is maintained adjusting the width or the height of the image to keep in the size defined.
- **Resize - Closest to the maximum size only if larger image** . Similar to the previous action but the resize it is performed only if the image size is larger than the size defined in the fields **Image width** and **Image height**.

When there is a field in a tab associated with one of these references, the way it is represented will look like the following picture:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-13.png)

####### Button

Buttons in Etendo must also be contained in a column though the value for this column is not directly modifiable by the user. Buttons are used to call processes.

When a column is assigned with `Button` reference the following additional fields are displayed: `Process` and `Ref Search Value`.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-14.png)

In **Process** list, we will select the process that is called when the button is clicked, this field is mandatory when the reference is button.

An optional **Ref Search Value** field is also available, here it is possible to select a reference list (see reference list below). If no value in this field is selected the text inside the button will be static (the process name), but if a reference list is selected the text in the box will be the name of the list having the same value as the current value in the list. For example if we define a list with the pairs value, name like: [{'N', 'Process'}, {'Y','Unprocess'}] and we select it, when the columns value is 'N', 'Process' will be displayed but 'Unprocess' when it is 'Y'.

When displaying a tab with a button it looks like:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-15.png)

!!!note
    When clicking on it a popup with the process interface is opened. By default, before opening this popup, the modifications for the current record are autosaved, after the execution of the process, current record is refreshed. This is the reason not to show the buttons while not all mandatory fields are not filled. These defaults are skipped in case the column is unmarked as `Triggers Autosave`.

######## DocAction buttons

Action buttons are a special kind of buttons used to perform process actions on certain documents (such as invoices, orders, etc.). These buttons have as column name **DocAction**.

When they are clicked a popup as follows is opened:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-17.png)

The available actions shown in this popup depend on the document status, and are calculated by `org.openbravo.erpCommon.ad_actionButton.ActionButtonUtility.docAction` method.

######## Post buttons

Another special button is the one issued in documents that support accounting to post/unpost. The column name must be `Posted`, and the process is left empty. These buttons call directly the accounting process.

####### List

`List` reference is used to limit the values a column can take to those ones defined in a list. When a column is defined as list reference, it is necessary to select a sub reference among the existing lists in Application Dictionary, this is done selecting the correct value in the `Reference Search Key` field.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-18.png)

Physical columns for this reference must be `VARCHAR(60)`.

The actual values the column will get are the ones defined as **Search Key** in the list, for more information see [defining lists](#defining-lists) section.

The UI for lists is a drop down list.

######## When to use lists

List are useful to maintain list of fixed values that rarely need to include new ones and which maintenance can be done by a System Administrator role, not by a standard user.

Let us explain through an example. There are 3 types of Modules: **Modules**, **Templates** and **Packages**. This definition is not going to change very often, it is possible that in future releases a new module type to be added but is nothing that is going to change daily, apart of that if it changes for sure no standard user would have to do the modification but **System Administrator** would have to. There are two possible solutions for this:

1. Create a table for module types and add in module table a foreign key column to this table.
2. Create a list of module types and add in module table a column of list reference using this new reference.

The second approach is easier to implement and maintain, additionally it does not create a database table with just 3 fixed records. In fact, behind the scenes, all data for all lists in Etendo is stored in a single database table (`AD_Ref_List`).

Furthermore lists are translatable, this means that the drop down lists can be displayed in the user's language, so following the 1st approach would have required to create a new additional table to hold translations.

######## Defining lists

List references, as the rest of references, are managed from `Application Dictionary` > `Reference` > `Reference` tab.

To create a new one click on **New**, insert a name for it and select **List** as **Parent reference**. This step creates the header for the list.

In this header, it is possible to select `Display value` field. In case this is selected, the list items will be represented by concatenating their value and their name, if not, only name will be displayed.

The next step is to add values to the list. To do so, go to **List Reference** tab, and create the values you need. Here there are three important fields to take into account:

- **Search Key** this is the value (not visible in UI) that the column using this reference will take when it is selected.
- **Name** it is the name that will be displayed in the drop down list.
- **Sequence Number** it is the position of the element when the drop down list is rendered. This field is nullable, depending on the values it has in the elements of the list, the sorting is done as follows:
  - If the value of this field is null for all the elements in the list, the list will be sorted alphabetically.
  - If all the elements have this value set, they will be ordered taking it into account.
  - If some of the elements have it and some have not, the ones having it will be shown at the beginning of the list sorted by this number, the rest of them will be shown at the end ordered alphabetically.

Just an additional consideration, it is possible to add elements in a module different to its header one, in this case the **Search Key** for the values must start with the module's DBPrefix to avoid naming clashes.

####### ID

Etendo uses UUID as primary key for its tables. The standard name for a primary key column is **TableName_ID** , so for example for `HR_Salary` table its primary key column would be name `HR_Salary_ID`.To be able to store UUIDs the physical type for the column must be `VARCHAR2(32)`. In addition, that column must be set as primary key in database.

`ID` reference is used for primary key columns. Usually, it should not be displayed to the user because this key is senseless for them (use identifiers instead), but if it shown the UI for this reference is like **String** reference, a one-line textbox.

####### TableDir

`TableDir` reference stands for **Table Direct**. As explained in the previous section the standard name for a primary key column is **TableName_ID**, in the same way the standard name for a foreign key column is the name of the foreign primary key column. For example if we create a new table named `HR_MyTable` and we want add a foreign key to `HR_Salary` , the column should be named `HR_MyTable.HR_Salary_ID`. If this naming rule is followed the `Create columns from DB` process will set this new column as **TableDir** reference. When the UI for this column is created a drop down list is generated with all the elements in the foreign table that can be referred from the current record. If the column name is not the same of the foreign key table's primary key column's name TableDir reference will not work, it will be necessary to define a **Table** reference for that column.

Physical columns for foreign keys must be `VARCHAR(32)` type to be able to store UUIDs. It is also required the physical table defines a foreign key to the other table.

This is the UI for **TableDir** reference:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-19.png)

It is a dropdown list, note that the label is a link, clicking on it the user will navigate to the selected foreign element. Note also that although the actual value the column will take is the UUID of the selected element, UUIDs are not displayed, instead of that the shown values are the identifiers defined in the foreign table.

####### Table

`Table` reference is similar to **TableDir** but does not have the naming limitation it also allows to define a `where clause` to limit the number of records that will be displayed as well as and **order by clause** to show it in certain order. When **Table** reference is selected for a column the `Reference Search Key` field becomes visible containing a list of all the available **table dir** subtypes, it is necessary to select one of them. These subtypes define the table the column makes reference to.

As the column for this reference is also a foreign key it must be in database physically identical to the ones defined for **TableDir** references.

Visually the UI for this reference is identical to the one for **TableDir**.

######## When to Use Table Reference

Usually **Table** references are used when the column name does not match with the name for the column it is linked to. In this case is mandatory to use this reference (or **Search** reference if it is available for that table).

Other cases is when the default order in **TableDir** reference is not appropriate.

!!!info
    It is not required to define a **Table** reference to limit the records that are displayed in a **TableDir** since it is possible to do it using a **Validation**.

######## Defining a Table reference

As all the references **Table** references are defined in `Application Dictionary` > `Reference` > `Reference` tab.

To create a new one:

1. Click on **New**, insert a name for it and select **Table** in **Parent Reference** field. This step creates the header for the table.

2. The next step is define the table to link to. To do so, go to **Table Reference** tab, and create a new record.

3. In **Table** field select the table the column is linked to in `Key column` field the value to be stored in the column (usually it its the primary key column), and in **Displayed column** the column that will be shown in the drop down list, note that here only one column can be selected and it is not possible to select the table's record identifier. `SQL where clause` and **Order by** are optional fields that can be used in case we want to restrict the records to be displayed or if we want to order them in some specific manner.

!!!note
    It is highly recommendable to look in the already defined Table references for one that fits our requirements before creating a new one.

####### Search

`Search` reference, as **Table** and **TableDir**, is used to define column that are foreign keys to other tables.

When a column is defined to use a **Search** reference, it is necessary to define which of the available search subtypes is going to call, this is done setting the **Reference Search Key** field.

As the columns using search reference store foreign keys (this is UUIDs) they must be defined in database as **VARCHAR(32)** and a foreign key constraint added to the table.

Visually the difference in UI with **Table** and **TableDir** is that, instead of displaying a drop down list with all the values in the referred table, it is shown the currently selected value using some filters.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-21.png)

When the button next to the text box is clicked a pop-up is opened, this pop-up allows to select one value from the available ones.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Data_Model-22.png)

######## When to use Search reference

Search reference are specially useful when the foreign table has a big number of records because it facilitates a lot the task of selecting one record.

It is only possible to use one of the existent selectors, the ones defined in core. In case none of this fits our requirements, it is possible to create new ones:

| Search name           | Referred table       |
| --------------------- | -------------------  |
| Account               | `C_ValidCombination` |
| Business Partner      | `C_BPartner`         |
| Debt/Payment          | `C_Debt_Payment`     |
| Invoice               | `C_Invoice`          |
| Invoice Line          | `C_InvoiceLine`      |
| Location              | `C_Location`         |
| Locator               | `M_Locator`          |
| Order                 | `C_Order`            |
| Order Line            | `C_OrderLine`        |
| Product               | `M_Product`          |
| Product Complete      | `M_Product`          |
| Project               | `C_Project`          |
| Shipment/Receipt      | `M_InOut`            |
| Shipment/Receipt Line | `M_InOutLine`        |

####### Password (not decryptable)

Columns with this reference are stored in database as a hash of the value the user entered; although it is not possible to recover the original plain text value, it can be checked whether a plain text corresponds to a hashed value.

SHA-512 with a random salt is used to hash passwords. Previously, SHA-1 was used.

To verify a plain text matches a hash (this is backwards compatible and checks both algorithms), use:  

```java
boolean matches = PasswordHash.matches(plainTextPassword, hashedPassword);
```
To generate a new hash use:

```java
String newPassword = PasswordHash.generateHash(plainText);
```

####### Password (decryptable)

The value of the password is encrypted when being saved, however in a way that the clear text password (as entered) can be recovered. Example use-case is to store a password which needs to be passed later as clear text to some external service (i.e. a email server password).

###### References in modules

It is allowed for modules to define base references.

Prior to this, release modules only could define subreferences for the base ones provided in core, this means that new **List**, **Table** and **Selector** references could be added to modules.

##### Validations

Validations allow to filter the records that appear in generated drop down lists. Validations are applicable to the following data references **List**, **Table**, **TableDir** and **Button**.

When a column has a validation, WAD generates a [callout](#callout) for it (`ComboReload`) to implement the validation.

###### Defining a validation

Validations are defined in `Application Dictionary` > `Setup` > `Validation Setup` > `Validation` , they consist in a **where** sql clause that will be applied to the query that generates and retrieves the data for the drop down list.

It is possible to do reference to columns within the foreign table in the code of the validation, to do it include the full table name. In case the reference is **List** type the table is `AD_Ref_List` and the column where values are stored in is **Value**.

It is also possible to use session variables in the filter, session variables are surrounded by `@`, thus `@AD_Client_ID@` referrers to the client the user has log in the application with.

##### Record identifier

Etendo uses UUIDs to unequivocally identify each record internally within a table. These values are stored in a column in the table that is defined as the primary key in the database and a key column inside Application Dictionary. UUIDs are 32 character strings that are automatically generated by the system, thus these strings are of very little use to the end-user when it comes to identifying records. Consequently, these values are used only internally by the application and are not displayed in the UI. Instead, users always see a friendly representation of a record called **record identifier**.

A **record identifier** is a simple **concatenation** of the values of one or several columns of a record within a table. Each table defined within the Application Dictionary **MUST** have at least one column set as a record identifier.

When one of the columns that are part of the record identifier is a foreign key to another table, instead of concatenating the column's actual value (which is a UUID), the record identifier for corresponding foreign key table record is taken and concatenated.

As record identifiers are used to identify a single record, they should include a set of columns that is known to be unique. This can be guaranteed at the database level adding a unique constraint to these columns.

###### Defining a Record Identifier

Record Identifiers are defined in `Application Dictionary` > `Tables and Columns` > `Table` > `Column`. To set a column as part of the record identifier for its table mark the `Used as Record identifier` check.

As many columns in the same table can be part of the record identifier, the way to define the order they will be displayed in it is set in the `Sequence number` field.

##### Callout

A **Callout** is a piece of code that is triggered when a field is modified. The callout is associated to the column which associated field will trigger the action.

####### What Callouts can do

Callouts are implemented by Java classes, so they can do virtually anything. But it must be taken into account that they are triggered when the field for the column they are associated with is modified. This happens before saving it to database, so it is possible the record in database does not already exist. Taking this into account, they should query in database for the current record.

They are typically used to:

- Load or change dynamically information in UI after a user change. For example, set a default price when a product is selected.
- Show messages after modifying a field.
- Execute a Javascript function.
- Move the cursor to a field.

######## Callouts vs Triggers

Both callouts and triggers are executed when there are changes in data. The main difference between callouts and database triggers is that callouts are executed in the front end whereas triggers are in the back end. This means that callouts should affect primary to data displayed in UI and triggers to data in database, additionally callouts are only executed when the user is modifying data manually through UI but they are not exectued in case the same data is modified by any other process.

!!!important
    Due to all these reasons, data integrity should not be relied only on callouts. It should be also implemented in database, through triggers or constraints.

####### Defining a Callout

There is a [guide](https://docs.etendo.software/latest/how-to-guides/How_to_create_a_Callout.md) related to callouts you can read to have an step by step example for a callout creation.

######## Application Dictionary

Callouts are defined in `Application Dictionary` > `Setup` > `Callout` window and then associated with the column that will invoke them when it is modified.

######## Java Implementation

Callouts are implemented by a Java Servlet.

!!!note
    The simplest way to implement a callout is using the `SimpleCallout` class, that keeps you out from the 'plumbing' of building the response.

The things to consider are:

- The **command** callouts are invoked with is always **DEFAULT**.
- Callouts receive a parameter called `inpLastFieldChanged`, this parameter has the name of the field that triggered the callout. Using this parameter, it is possible to reuse the same callout for different columns, this makes sense in case the action for both columns is related.
- Callouts should use the `org/openbravo/erpCommon/ad_callouts/CallOut` xmlEngine template.
- This template must receive a parameter called **array** with the following Javascript syntax:

 ```javascript
  var calloutName='MyCalloutName';
  var respuesta = new Array(
  new Array("inpfieldName", "value"),
  new Array('MESSAGE', "Message to display"),
  new Array("EXECUTE", "displayLogic();"),
  new Array("CURSOR_FIELD", "inpfieldName")
  );
 ```
After executing a callout with the previous output, the result would be:

- The field called `inpfieldName` would take the value `value`.
- A message would be displayed.
- The `displayLogic()` Javascript function would be executed.
- The field `inpfieldName` would take the focus.

!!!info
    The type of available messages: `MESSAGE`, `INFO`, `ERROR`, `SUCCESS`, `WARNING`. `MESSAGE` and `INFO` are equivalents.

######## Execute on New

By default, all callouts associated with drop down lists are exectued whenever a new record is created. This is done to guarantee all the logic implemented in callouts are executed for the default values that are presented in new record.

In case there is a big number of dropdown lists with callouts or **ComboReloads**, this can cause performance issues.

In case it is known the validations and the callouts for a column will not do any change when creating a new record, the callout execution for that column can be disabled while new record creation. This can be done by unchecking the **Validate on New** field in **Column** tab.

##### Dynamic expressions

Default Value, Read only logic and Transient condition are values that allow a dynamic expression. Visit [this document](https://docs.etendo.software/latest/concepts/dynamic-expressions.md) explaining how dynamic expressions are defined.

---

This work is a derivative of [Data Model](http://wiki.openbravo.com/wiki/Data_Model){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Datasets
## Article Path: /Developer Guide/Etendo Classic/Concepts/Datasets
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/datasets
## Article Content: 
### Datasets
  
#### Overview

The Dataset concept allows you to define sets of data from different tables and export this data in one step. Datasets are especially useful for managing reference data for a module, for example tax rates or default data in new
tables added by a module. The reference data is published, distributed and
installed together with the program code implementing the module.

The content of a Dataset is defined by its Dataset Tables and Dataset Columns.
The first defines which tables are exported, the second one which columns from
those tables are exported.

Datasets can be defined at System, Organization, or Client/Organization
levels. System-level datasets are applied when the module containing them is
installed in the system. Their data is system-level.

Organization-level datasets can be applied in `Initial Organization Setup` (when
creating a new organization), or can also be applied to an existing
organization using the `Enterprise Module Management` window. They contain
Organization level information.

Client/Organization-level datasets work like Organization-level datasets, but
can also be applied on [Initial Client Setup](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-run-an-initial-client-setup-process.md) when creating a new client. They
contain Organization/Client level information.

#### Main Concepts

##### Dataset

A Dataset is a grouping of different tables (entities) which are exported
together. Datasets are defined through the `Dataset` menu in the Application
Dictionary. Below there is an example of a Dataset.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/datasets-0.png)

  
Some important things to note:

  * A Dataset belongs to a module, so modules can add new datasets to an Etendo instance. 
  * Data Access Level: filter the tables which can be selected for this dataset, only tables with the set data access level can be included in the data set.
 

If the `export allowed` column is flagged, then an `export` button is displayed.
When clicking this button the data is exported to the modules directory of the
module to which the Dataset belongs:

```
modules
└── org.openbravo.localization.spain.referencedata.taxes
    └── referencedata 
        └── standard
            ├── Impuestos_ES.xml
            └── Spanish_Tax_Alerts.xml
```

#####  DatasetTable

The DatasetTable defines which data of one table is to be exported. It defines
both the records (through a where clause) and the columns per record. 

!!!note
    A Dataset should have one or more Dataset Tables, a Dataset Table always belongs to exactly one Dataset.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/dataset-2.png)


Some important aspects:

  * A Dataset Table has a module, so you can add a new Dataset Table to an existing Dataset (of another module). 
  * The HQL where clause is an [HQL](https://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/queryhql.html){target="_blank"} where Clause. The properties which can be used in the clause are the properties of the table **entity** of the DatasetTable. 
  * `Include all columns`: if flagged, all columns are exported, except the ones excluded in the DataSet Column, if not flagged then the DatasetColumn definition is used. 
  * `Exclude Audit Info`: only relevant if include all columns is flagged, in that case this field can be used to exclude audit info. In most situations, *it makes sense to activate this flag* , as audit info (information about which user created and updated every record, and in which date this happened) is most of the times irrelevant, when exporting business data to a dataset which is meant to be generic and used in several different systems. 
  * `IsBusinessObject`: if flagged then also the 'child-records' of the table are exported, for example if the Dataset Table is defined for the `C_Order` table and this field is flagged then also the related `C_OrderLines` are exported. 
  
!!!info
    For more information read how [Business Object](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/Data_Access_Layer.md#etendo-business-objects) structures are defined. 

######  DatasetTable where clause

To select specific objects from the table to be included in the data set, it is possible to define a where clause in the DatasetTable. The HQL where clause is an [HQL](https://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/queryhql.html){target="_blank"} where Clause. The properties which can be used in the clause are the
properties of the table **entity** of the DatasetTable. The entity and
property names give an overview of all properties by their entity. There are two standard parameters which can be used in the HQL clause:

  * `ClientID`: denoting the current client of the user exporting the data 
  * `moduleid`: the id of the module for which data is exported 

The syntax of using these parameters in the where-clause is the same as for
named parameters in HQL in general.

Here are some examples of where clauses:

  * `client.id = :ClientID`, export all objects from the current client 
  * `client.id = '0'`, export only objects from the '0' client 
  * `processed = true and chargeAmount > 0`, export only objects which have been processed and for which the charge amount > 0 
  * `client.id in ('0', '1000000')`, select all objects with a client '0' or '1000000' 
  * `name like '%Product%'`, select objects with a name which contains the string Product 

The clause can contain inner-selects and other more advanced HQL features.
However, **order-by, group-by and having clauses are not supported**, so the
content of this field should just be the where-clause and nothing more.

#####  DatasetColumns

The Dataset Columns defines the columns/properties which are exported for a
certain business object. A Dataset Column always belongs to
one Dataset Table, and a Dataset Table can have zero or more Dataset Columns.
The Dataset Column concept can be used in two ways:

  * Check the `Include all columns` in the Dataset Table and define exclusions in the Dataset Column 
  * Do not check the `Include All Columns` in the Dataset Table and define the exact Columns to export in the Dataset Column 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/dataset-3.png)

  
The main fields:

  * A Dataset Column has a module, so you can add a new Dataset Column to an existing Dataset Table (of another module). 
  * Excluded: if flagged then this column is defined to not be exported. 

####  Usage of Datasets

The main purpose of Datasets is to define _reference data_ for modules. 

To export a dataset, it is very important to follow these steps:

  * First click on the `Export Reference Data` button in the `Dataset` window. This will export the dataset contents to an xml file, and will also generate the checksum of this dataset. 
  * Then, execute `./gradlew export.database` to export the checksum information to the module source data. 

After this, you can [publish your module](https://docs.etendo.software/latest/how-to-guides/how-to-publish-modules-to-github-repository.md), which now will include the contents of the dataset. 

!!!note
    The reference data is inserted when a module is applied (built and installed). Or can be imported separately.

####  Data ownership

Data defined by a dataset is owned by this dataset. This means when there is
an update of this dataset, any change on this data will be overwritten again to match the definition in the new version of the dataset.

It is possible to mark a dataset as `Default Values Data Set` . Having this flag makes the dataset not to take ownership of the data it inserts, but moving this ownership to the instance. So, new records provided by the dataset are inserted, even in newer versions of this dataset, but any changes done in the instance will be preserved. 

!!!note
    In case a record provided by one of these datasets is deleted from the instance, it will be recovered back in the next update, the correct way of getting rid of undesired records is by marking them as inactive.

####  Importing Reference Data on Organization level

The module reference data can be imported into an organization using the `Enterprise Module Management` function. It is available in the menu here: `General Setup > Enterprise > Enterprise module management > Enterprise module management`.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/datasets-4.png)


In this list, only the relevant modules containing datasets will be shown. This means that if a dataset has not changed from the last time it was applied to the selected organization, it will not be shown.

  
Select the organization and the module from which to import the reference data into the organization. Then press ok. After a while the result page is displayed:


![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/datasets-5.png)


!!!note
    If a dataset is defined as Organization/Client level, then it can also be imported when using the [Initial Client Setup](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-run-an-initial-client-setup-process.md) utility to create a new client.

---
  
This work is a derivative of [Datasets](http://wiki.openbravo.com/wiki/Datasets){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Development Build Tasks
## Article Path: /Developer Guide/Etendo Classic/Concepts/Development Build Tasks
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/development-build-tasks
## Article Content: 
### Development Build Tasks

#### Overview

This document discusses the **gradle tasks** used during the build process of Etendo. It explains what the gradle tasks are used for and which properties can be used to control their behavior. 

!!!note
    Notice that Gradle is **case sensitive**.

#### Main Build Tasks

This section explains the main build tasks following the steps as illustrated in the image.

In most of the cases, it is only necessary to use 3 tasks (`install` , `smartbuild` and `export.database`). There are a number of other tasks that can be used but they are not required for the standard process. 

!!!info
    For more information, see [Detailed Build Tasks](#detailed-build-tasks) section.

The main task for the standard process is `smartbuild` which performs all the required processes as explained below. This task accepts an optional property:

  * `local` for local or remote developments which by default is set to **yes** . 

The difference between `local` and `remote` development is illustrated in the diagram. Local development are changes by the developer him/herself. Remote developments are changes done by other developers. Changes by remote developments are pulled from the source code revision system.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Development_Build_Tasks-0.png)

!!!info
    `remote` means that the user is bringing changes to the workspace from an external location, e.g. with a `git pull`.
    
##### Initial installation

After downloading the Etendo ERP source files. It is necessary to install and deploy it. Check our guide about [Etendo Install](https://docs.etendo.software/latest/getting-started/installation.md#install-etendo)

##### Database export

In most cases developments include modifications on the database. This modifications can be persisted in `xml` files using the **DBSourceManager** tool. **DBSourceManager** exports to `xml` files only the modules (including core) that are set as `In Development`. To export the database execute:

``` bash title="Terminal"
./gradlew export.database
```

After this step, the changed model `xml` files can be pushed/committed to the source code revision system, so that other developers can pick them up and continue working on top of it.

When a module is exported using the `export.database` task, it is first validated to check for common errors. If the validation fails then the `export.database` task will also fail and export is not possible.

The following checks are currently done:

  * A table defined in the Application Dictionary should be present in the database and vice versa. 
  * Column definitions in the database and the Application Dictionary are compared, any mismatch is reported. The column datatype, default value and length are checked. 
  * Tables should have a primary key. 
  * Foreign key fields should be part of a foreign key constraint. 
  * Names of tables, columns and constraints are checked for their length (Oracle and PostgreSQL has a 30 character limit there). 

##### Update database

**Database model** changes are distributed by committing the database schema as `xml` to `SCM`. Other developers pull the changes from `SCM` and can apply them to update their own database. After updating the database the process is exactly the same as the local one, that is compile and deploy the elements that have been modified since last build.

``` bash title="Terminal"
./gradlew update.database
./gradlew smartbuild
```

All the required actions (update database, compile last modifications and deploy them) can be done with only the `smartbuild` command:

``` bash title="Terminal"
./gradlew smartbuild -Dlocal=no -Dforce=yes
```

The only difference with the local development is in the `local` parameter which makes the process to update the database in case the `xml` files were changed.

##### Module Consistency Check

An instance is **consistent** in case the dependencies of all the modules it has installed are satisfied. Development instances can define inconsistencies (for example by creating a dependency on a module version which is not installed) whereas production instances where all the modules are installed through obx or Central Repository should not be inconsistent because it is guargradleeed by the installation process.

**Inconsistent instances** can be in a situation where it is not possible to update any of the modules (including core) they have installed. This is due the fact that Central Repository only proposes updates to consistent sets of versions and it is possible the inconsistency cannot be resolved by any.

#### Detailed Build Tasks

This section contains a detailed listing of all available build tasks.

##### Libraries build tasks

|  Task      |  Description  |  Notes  |
|------------|---------------|---------|
|  `core.lib`  |  Compiles and generates a `.jar` file from the `src-core` project. Which is needed by `wad.lib` and the rest of build tasks.  |  **Required by**: wad.lib  |
|  `wad.lib`   |  Compiles and generates a `.jar` file from the `src-wad` project. Which is needed by the build tasks. This project contains the WAD, the automatic window generator.  |  **Requires**: `core.lib`, database created **Required by**: compile.*  |
|  `trl.lib`   |  Compiles and generates a `.jar` file from the `src-trl` project. Which is needed by the translate task. This project allows to translate to different languages manual windows.  | **Requires**: core.lib  |
  
##### Build tasks

|  Task                 |  Description   |  Notes  |
|-----------------------|----------------|---------|
|  `install`            |  Installs the whole application: creates the database, compiles it and generates a war file to be deployed or copies the classes to Tomcat's directory (depending on the `deploy.mode` property set in Openbravo.properties).  |  **Calls**: `create.database`, `core.lib`, `wad.lib`, `trl.lib`, `compile.complete.deploy`, `applyModule`.
|  `smartbuild`         |  Makes an incremental build of the application. Including: <br> `update.database` <br> compile <br> deploy <br> All these tasks are done only if needed.  |  **Requires**: Database must be created and populated with data **Properties**: <br> `local`: (`yes/no` default as `yes`) when this property is set to no `update.database` task is executed, otherwise it is not executed. <br> `tr`: (`yes/no` default as `yes`) if set to no, translation process is not executed. <br> `force`: (`yes/no` default as `no`) used with `local=no`. If set to yes it will overwrite the changes in the database with the XML information. Note: All un-exported changes will be lost.
|  `compile.complete`  |  Compiles all modified classes (including the generated ones) but before removes all the generated and built files, so the whole application is built  |  **Requires**: `wad.lib`, `trl.lib`, database created and populated. **Calls**: translate <br> **Properties**: <br> **tab**: specifies the window name(s) to be generated, to specify more than one window add them as a list of comma separated values. Note that even window is specified by this property, its 2.50 code will not be generated unless it is required or forced. <br>  **tr**: if set to "no" it will not call the translation process. <br>  **module**: a list of comma separated javapackages of modules to generate just the windows containing objects for those modules. <br>
|  `generate.entities`  |  Generates the Java files for `src-gen` directory, and compiles them. They are used by DAL to access to the database information.  |   **Requires**: Database must be created and populated with data.
|  `translate`          |  Checks in the manual windows User Interface files the translateable elements that have not been yet registered and registers them, this is necessary to be able to translate those interfaces to different languages.  |  **Requires**: `trl.lib` **Called by:** This task is called by the compile.* tasks in case the tr property is not set to "no". 
|  `antWar`                |  Generates a war file from the existing built code. In fact it only zips the application in a single war file.  |  **Requires:** compile.*: the application must be built before calling this task.
|  `deploy.context`     |  Deploy the existing war file in the tomcat context using the tomcat manager.  |  **Requires:** <br> war file must be created <br> Tomcat manager must be running <br> These properties must be properly set in the `Openbravo.properties` file: <br> `tomcat.manager. url` <br> `tomcat.manager.username` <br> `tomcat.manager.password` 

##### Database tasks

|  Task               |  Description  |  Notes  |  Sub Tasks  |
|---------------------|---------------|---------|-------------|
|  `create.database`  |  Creates the database from the `xml` files, note that the database is first removed. If the `apply.on.create` property is set, masterdata and sampledata will be inserted in the database. If not, only sourcedata will be inserted.  |  **Properties:** <br> `apply.on.create`: If is set to **true** and there are modules they will be applied, otherwise they will be set as **In process** status.  |  `create.database.script`: The same as `create.database.structure` but does not affect the database it only generates the `sql script` file with all the statements that would be executed by the other tasks. 
|  `update.database`  |  Synchronizes database with the current database xml files. By default it checks that no changes in application dictionary in database are done, if so the process stops.  |  **Properties:**  <br>  `force`: (`yes/no` default as `no`) Do not check for database modification and update directly. This can cause lose of database data.  |   `update.database.script`: It is the same as `update.database.structure` but does not modify the database. It only generates a `sql` script file with the statements that would be executed by the other tasks.
|  `export.database`  |  Synchronizes xml files with the database current contents. By default they are only exported in case there are modifications in the database. In addition performs database validations for the modules which are exported.  |  **Properties:** <br> `force`: (`yes/no`default as `no`) Forces the export skipping the check of which files had been modified since last `update.database`. <br> `validate.model`: (`yes/no` default as `yes`) Checks the model that is being exported fulfills a series of rules related to modularity, `oracle-postgreSQL` compatibility, etc. In case any of these rules is not complied, export will not be done and an error message will be raisen.

!!!info

    ` update.database ` and ` export.database ` tasks support multi-thread parallel execution for some of their actions such as index creation or function standardization. By default, the number of threads used is calculatedas the half of the available number of cores in the machine where the task isexecuted. This value can be set by adding the `-Dmax.threads=numOfThreads` parameter. 

##### Test Tasks

|  Task     |  Description  |  
|-----------|---------------|
|  `test`  |  By default, all Etendo tests are run. You can use the `--tests "<package>"` to specify which tests you want to run.

!!!info
    For more information about execution test in Gradle visit [Test Filtering in Gradle](https://docs.gradle.org/current/userguide/java_testing.html#test_filtering)

##### Other Tasks

|  Task                   |  Description  |
|-------------------------|---------------|
|  `migrate.attachments`  |  Migrates the attachments to the new attachment model.

This work is a derivative of [Development Build Tasks](http://wiki.openbravo.com/wiki/Development_Build_Tasks){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Element and Synchronize Terminology
## Article Path: /Developer Guide/Etendo Classic/Concepts/Element and Synchronize Terminology
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/element-and-synchronize-terminology
## Article Content: 
### Element and Synchronize Terminology

#### Element

Elements  define the text in the label to be displayed for each field in the
application as well as its related help. Each column in the Application
Dictionary is linked to an element, note that more than one column can be
linked to a single element, this is the way to reuse the same text for
different columns (and finally fields) in the application. 

For example, `C_BPartner_ID` is the name for a number of columns in the application, all of them are a reference to a business partner thus, the text to be displayed as
well as the help for all of them is the same; instead of maintaining that
information redundantly in each column all these columns use the same element.

##### Element maintenance

Elements can be edited in `Application Dictionary` > `Setup ` >`Element` 
window (as *System Administrator*); but, usually, elements are not directly
created using this window but by the *Synchronize terminology* . Once the
element is created, this window is used to edit its contents.

##### Synchronize Terminology

It is the process that creates the elements for the columns that do not
already have an associated one and copies the information in the elements to
the columns and fields which are linked to them.

To run it, go to  `Application Dictionary` > `Synchronize Terminology ` as
*System Administrator* . 

Basically, this process looks for all the columns that
have no linked element. In case there is an element with the same column
name that the orphan column's one, this element is linked to that column, other
case a new element is created with the same column name the column has. 

All that is done taking into account module, thus an element is only reused if it
is defined in the same module as the column's one, or in another one dependent
from the column's module. It also copies the text in the elements to the
fields that represent the columns for those elements.

!!!info
    When creating/editing fields is worthless to write a good text for name,
    description and help fields since they will be overwritten with the ones in
    the element. When this process is run, just leave them empty (or with
    some letters for mandatory ones). On the other hand, when creating a new
    column, if a new element from this column is created, the element will have
    the contents of those fields in the column. 

!!!note 
    Note that once the element is created the changes in the column fields will also be overwritten in this process.  

  
###### In detail

Here are all the steps the *Synchronize Terminology* process executes.

  1. For all the columns and process parameters in the dictionary without element, create an element in case there is no element with the same column name in the same module or in a dependent one, copying to the new element name, help and description from the column/parameter. 
  2. Delete all the elements that are not used anymore. 
  3. For the rest of columns and process parameters without elements, associate the existent element in the same module or in a dependent one having the same column name. 
  4. Update columns and process parameters with the name, help and description values in their associated elements. 
  5. Update centrally maintained fields with the name, help and description for the elements associated with their associated columns. 
  6. Update workflow nodes with the name and description in their linked windows. 
  7. Update menu entries with the name and description in their linked windows, processes, forms or workflows. 

#####  Central Maintenance for fields

In most cases, the previously defined process fits all the requirements for
field labels. But in some occasions, it is wanted to have a field with a
different set of label, help and description than the rest of fields
associated to the same column. 

!!!info
    For these cases, it is possible to set no to the *Central Maintenance* check in `Application Dictionary` > `Windows, Tabs and Fields` >`Window >> Tab >> Field`, doing so, name, help and description in the field will not be overwritten with the element's ones.

Let's see how it is used with an example:

A very common column name is `AD_Language` , these columns are a reference to languages stored in `AD_Language` table. The name for the `AD_Language` element is *Language* and its help is *The Language identifies the language to use for display* which is very general. 

Modules have a language (which might be different to English)
which they have the UI defined in. The label and help for `AD_Language` field
in `Application Dictionary` > `Module` are *Module Language* and this language
defines the language used as base for the user interface elements in the
module. This is done by setting the field for `AD_Language` column in
*Module* tab as not centrally maintained and writing directly in the field the
name and help.

##### Translations

As elements are used to define text to be displayed in UI, they can be
translated to different languages. 

The text in the element must be written in the language its module defines, and then it can be translated to other ones.

!!!note
    The standard way to translate is by creating a new module with no additional
    functionality but just translations for the module.

##### Purchase entries

If you observe the fields in the `Application Dictionary` > `Setup` >`Element` 
you will notice there are standard fields (name, help...) and similar ones
but for purchases.

In Etendo, there are some tables that are used for sales and purchases
transactions, for example `C_Invoice` table contains both sales and purchases
invoices. This means that `Purchase Invoice` > `Header`  and `Sales Invoice` > `Header` tabs use the same table. But, it is very usual to label fields for the
same column in a different way depending on whether it is a sales or purchase
window. 

Instead of doing it, setting all the fields in the purchase windows as
`not centrally maintained`. This is achieved by populating in the correspondent
elements, the standard names and the purchase ones. Then, the windows are
distinguished between sales and purchases using the *Sales Transaction* check
in the `Application Dictionary `  > `Windows, Tabs, and Fields` >  `Window` >  tab.

---
  
This work is a derivative of [Element and Synchronize Terminology](http://wiki.openbravo.com/wiki/Element_and_Synchronize_Terminology){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.


==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo Jars
## Article Path: /Developer Guide/Etendo Classic/Concepts/Etendo Jars
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/etendo-jars
## Article Content: 
#### Overview

The new version of Etendo comes with a new plugin which is focused on JARs.

A [JAR](https://docs.oracle.com/javase/8/technotes/guides/jar/jarGuide.html){target="_blank"} (Java ARchive) is a packaged file format containing compiled classes, metadata information and resources for a Java application in a single file. 

A JAR file provides multiple benefits:

-   Security
-   Portability
-   Compression
-   Packaging
-   Distribution


One common case of JAR uses are libraries.

With [Gradle](https://gradle.org/){target="_blank"} you can make use of libraries to incorporate new functionality to your application.

Using the 'implementation' configuration provided by gradle you can define multiple dependencies:

`implementation 'groupId:artifactId:version'`

For example, to make use of the [Javax email library](https://mvnrepository.com/artifact/javax.mail/mail/1.4.7){target="_blank"} you need to define the next block of code in the gradle build file.
``` groovy
dependencies {
	// https://mvnrepository.com/artifact/javax.mail/mail
	implementation group: 'javax.mail', name: 'mail', version: '1.4.7'
}
```


The Etendo plugin tries to use this approach, managing all libraries and dependencies that you need to run your Etendo environment.

---

##### Etendo JAR Modules

Modules are an important aspect of Etendo, they let you create and introduce new functionality to your application.

To acquire all the benefits of a JAR file, the new plugin allows the user to create a JAR version of a module with all the configuration needed to be published and distributed.


###### Permissions
To obtain permissions to  publish a new version of a module you need to run:

`./gradlew registerModule -Ppkg=<package name> -Prepo=<repository rame>`

This task gives you privileges to publish in the specified repository. It also executes internally the **createModuleBuild** task to generate the **build.gradle** file.

!!! warning
    If you already have permissions to publish and the **build.gradle** file already exists you do not have to run this task.

The **build.gradle** is a file that holds all the configuration and information used when the module is published.

Modules containing a **build.gradle** file are now recognized as Gradle subprojects, creating a [multi-project build](https://docs.gradle.org/current/userguide/multi_project_builds.html){target="_blank"}.


!!! info
    If you only want to generate the **build.gradle** file you can run
    `./gradlew createModuleBuild -Ppkg=<package name> -Prepo=<repository rame>`
    This command will **overwrite** the build.gradle file if is already present.

###### Publishing

To publish a new version of a module you need to run

`./gradlew publishVersion -Ppkg=<package name> -Prepo=<repository rame>`


This task creates the JAR and ZIP version of the module, and tries to publish it in the specified repository.

!!! info
    The module needs to be compiled before published. You have to be working in a compiled environment with all the autogenerated entities created.

!!! info
    For more information refer to the [How to Publish Modules to a GitHub Repository guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-publish-modules-to-github-repository.md)


<br>

###### JAR File Structure
Etendo JARs **modules** contains a special structure. All content of the ***src*** dir will be contained in the root of the JAR, with the compiled java classes. 
Others directories like ***src-db***, ***src-util*** etc, will be stored in the '***META-INF/etendo***' location.


###### Using an Etendo JAR Module
To use a published version of a module in your Etendo enviroment, you need to define the dependency in the '**build.gradle**' file of the root project.

Just like a library, using the implementation configuration:

`implementation 'moduleGroupId:moduleArtifactId:moduleVersion'`

The Etendo plugin will try automatically to resolve the artifact. If the dependency is a Etendo module, it will be located in the '**build/etendo/modules**' directory.

The '**build/etendo/modules**' directory is a new special location. Etendo development tasks now will use this place as a new modules location to search.

##### Etendo Core JAR

With the new version of Etendo, you can still work with the code in sources or the new **JAR** format.

The new Etendo core JAR contains a structure similar to JAR modules.

To make use of the Etendo core JAR, same as a library, you need to define the dependency in the **build.gradle** of the root project

``` groovy
dependencies {
  implementation group: 'com.etendoerp.platform', name: 'etendo-core', version: '22.1.0'
}
```

Once the artifact is resolved, the Etendo plugin will identify that the dependency is the Etendo core, and will be located in the '**build/etendo**' directory.

A config directory will be created in the root project. This directory contains the configurations templates used by Etendo to run the application.

You need to set your own configurations using a **gradle.properties** file and run:

`./gradlew setup`

Once the configurations files are created, you can install the application.

`./gradlew install`

All the Etendo development tasks used with the core in sources should still be working with JARs.


!!! info
    Etendo Core, (**Sources** and **Jar**), allows the user to work with  modules in both formats.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Format xml
## Article Path: /Developer Guide/Etendo Classic/Concepts/Format xml
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/format-xml
## Article Content: 
### Format XML

#### Overview

`Format.xml` is a configuration file for Etendo installation that allows configuring the format output for numeric values. It is used by the different **numeric references** in Application Dictionary, but also can be used in **manual** code. By default, Etendo ships a `Format.xml.template` that can be copied as it is without any modification.

!!!info
    If you are building Etendo from sources, the setup-properties binary makes a copy of it for you.

#### Format.xml example

```xml
    <?xml version="1.0" encoding="UTF-8" ?>
    <!-- license -->
    <Formats>
    <!-- other formats -->
       <Number name="euroEdition"
           decimal="." grouping="," formatOutput="#0.00" formatInternal="#0.00" />
    <!-- other formats -->
    </Formats>
```

##### Attributes

  * **name**: Name of the format, used to identify it.
  * **decimal**: Symbol (character) to be used as decimal separator.
  * **grouping**: Symbol (character) to be used as grouping separator (used in thousands).
  * **formatOutput**: Format mask used to mask and print numeric inputs. It must be `DecimalFormat` output format type: For more information, see [DecimalFormat](https://docs.oracle.com/javase/tutorial/java/data/numberformat.html){target="\_blank"} class.
  * **formatInternal**: Used internally by `XmlEngine`.

#### Application dictionary - format name mapping

| AD Reference     | Output format       |
|------------------|---------------------|
| Decimal, Amount  | `euroEdition`       |
| Quantity         | `qtyEdition`        |
| Price            | `priceEdition`      |
| Integer          | `integerEdition`    |
| Number           | `generalQtyEdition` |
| Others numeric   | `generalQtyEdition` |

#### Important Notes

Ultimately, copy `$EtendoERP/config/Format.xml.template` as `Format.xml` and `./gradlew compile.complete -Dtab=xx -Dtr=no` because this way the changes will be permament and will not be lost upon the next rebuild.

#### Export to CSV format

The export to CSV functionality uses the `Format.xml` information to format the data (specifically, it uses the decimal separator defined for the system for numeric values).

This can be overwritten in case it is needed, by using the following preferences:

  * **CSV Decimal Separator**: If this preference is defined, this will be used as the decimal separator for numbers.
  * **CSV Field Separator**: If this preference is defined, this will be used as the field separator. Otherwise, a single comma `,` will be used.
  * **CSV Text Encoding**: If this preference is set, this will be used as the encoding type of the generated file. The default encoding used is the Windows iso-8859-1, which will work correctly in Windows environments which use Microsoft Excel. Other popular encodings such as UTF-8 can be used in Linux or Mac environments which use other spreadsheets.

This work is a derivative of [Format xml](http://wiki.openbravo.com/wiki/Format.xml){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Inventory Status
## Article Path: /Developer Guide/Etendo Classic/Concepts/Inventory Status
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/inventory-status
## Article Content: 
#### Overview

This section explains the Inventory Status concept that is part of Etendo.

#### Configuration

The Inventory Status will be available and configured as part of Etendo.

By default, all the Bins will be in an undefined Inventory Status. There are two possibilities:

-   **Undefined**. Available and Nettable, but not possible to go to Over Issue.
-   **Undefined OverIssue**. Available and Nettable and possible to go to Over Issue.

The initial status of the Bins will depend on the previous configuration of the Client. For those clients which were configured to Allow Negative Stock, the Undefined OverIssue Inventory Status will be set. For the rest, it will be the Undefined Inventory Status. 

!!! info
    For more information, visit the [Allow Negative Stock user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/client.md).

#### Functionality

The Inventory Status concept is part of the inventory management of Etendo and includes the dimensions for Available, Nettable, and OverIssue to the storage bin and all stock in this bin has the same Inventory Status. The semantics of the Inventory Status refers to the condition of a specific inventory and can be configured. See examples at the end of this section.

The master data for inventory status is maintained on system-level and the most typical values come predefined with the Etendo dataset. It is possible to add new and/or translate existing inventory status.

!!! info
    To have access to this window, it is necessary to log in as system administrator.


![](https://docs.etendo.software/latest/assets/drive/0n3Ivd3Cp7mA5Q7vAbIhorgapjwAxb6ybg6_fqwlpmzwe4FcL3RV2o6AIqsR2cFEdXKSRtzToRe9E5lLZsdoDCGZmM0toNmJZKURGVZxNStUoQW_ocSMxgcB4KjV_ARl4TTg0GWncx0ONJ1GzIfAHsJxNIs38iEekvloTzKkUdFIjICAn0YUklI1ThE-tg.png)

In the image above, the various Inventory Status values that are supplied with the installation of the software are shown.

The inventory status allows or disallows certain business processes.

-   Ability to create/modify/delete Inventory Status with the following attributes:
    -   **Available**: Inventory that is available for reservations and picking.
    -   **Nettable**: Inventory that is available for planning of future supply (MRP).
    -   **OverIssue**: Inventory that is allowed to go negative during the Issue of stock (not during the picking).
        -   Note: It is not possible to go to negative if there are reservations against a particular stock. The reservation is always respected, regardless of the inventory status.
-   Add an Inventory Status value to each location or bin record.
-   Add the possibility to manually update the Inventory Status of a Storage Detail by moving it to a virtual, AdHoc created, bin.
-   A new process that identifies affected reservations when a change of the inventory status reduces/increases the quantity available. (Once identified, the relevant users could receive an alert about the consequence of the change in availability).

##### Inventory Status Change

In the Warehouse and Storage Bins window, It is possible to check the Inventory Status of a Storage Bin and also to modify it.

By selecting a Storage Bin in this window, it is possible to check its current Inventory Status.

![](https://docs.etendo.software/latest/assets/drive/J6y4kVfAaNOLqMAlBOJxByWBUkIA-lgdT1RM4HHn2jLkwJhzf0efsUgT78F77DEvT9UT9j_8RCRLnaNFVm-kWhGMRRaYf9thzTnAWN2fvBVsKx4aJX6xc4mb1qPlwH46AUwHc5D3v8Xye_ONWikm3ZKGaCTojkJMeTxkBBoLvSEnXoy_Gp85Ws-FY_1yAQ.png)

Also, by selecting a Storage Bin, a button named Change Status appears. By clicking it, it is possible to select a different Inventory Status for the selected Storage Bin.

There are some restrictions:

-   If there are existing Reservations against the Stock of the Storage Bin, this Storage Bin can not be changed to an Inventory Status that does not have the Available flag checked
-   If there is negative stock in the Storage Bin, it is not possible to change the Inventory Status to one that does not have the Over Issue flag checked

![](https://docs.etendo.software/latest/assets/drive/tchXpNhj5d5jez97SiLuvXUJJNbHIhHgLfDfU4e2hw2Q5tCqACZLE_daLM920HKiFuYVgQAwZoKpTkdw-pICFn8MVz3Y7TuM04CaWGjxclVXTzqz03ZNxpxj3PWkKwX8KB259JYTGJNeWTIRr1rkzAkaAQppROV4yfDIa6qBWHZVfgJA4xjFO84kb41EjQ.png)

##### Examples

Examples of inventory status values:

-   **Available** (YYN -> Available, Nettable, Not OverIssue, Owned/Not-Owned) can be set for all inventory that is free to be picked, for sales, production or any other purpose.
-   **In Transit** (NYN) is not free to be sold or shipped but is expected within a limited time and for that, we will take it into account for planning.
-   **Quarantine or Blocked** (NNN) is not available nor nettable since we expect a larger duration of this status.
-   **Inspect** (NYN) is also not available but is expected to be freed in a limited time and for that reason visible for planning/MRP.
-   **BackFlush** (YYY) will allow going negative due to unexpected waste in manufacturing environments.
-   **Public** (YYY) will allow going negative due to unexpected stock in public picking areas.
> 
!!! info
    The inventory status does not have an effect on the inventory value.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Naming Guideliness for Modules
## Article Path: /Developer Guide/Etendo Classic/Concepts/Naming Guideliness for Modules
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/naming-guidelines-for-modules
## Article Content: 
#### Introduction

It is important to select an appropriate name for your module in order to make it easier for users to recognize it both in the Forge and in the Enterprise Module Management window.

In the future, Etendo may also use these naming conventions to automatically categorize modules based on tags, therefore it is important that these naming conventions are followed.

Here is a set of naming guidelines that we ask module authors to follow:

#### Branding rules

- The module name should match the project name in the Forge (optional)
- Module names should not be longer than 5 or 6 words and less than 60 character long (optional)
- Module names cannot contain the word "Etendo"
    - JSON REST Web Services: :white_check_mark:
    - Etendo JSON REST Web Services: :no_entry:
- Exception to the previous rule: modules that Etendo decides to market as products rather than modules:
    - Etendo QuickStart Template: :white_check_mark:
- You do not need to specify the Etendo version in the module name:
    - Translation: Arabic Saudi Arabia (ar_SA): :white_check_mark:
    - Translation: Arabic Saudi Arabia (ar_SA) for Etendo 2.50: :no_entry:
- Module names should not contain the word "Module"
    - Copy Role: :white_check_mark:
    - Copy Role Module: :no_entry:

#### Language and grammar conventions

- All module names must be in English. The module description and help can be in any other language.
- Non English proper nouns are accepted as part of a module name specified in English
    - Tax Report: Modelo 349 (Spain): :white_check_mark:
    - Tax Report: Form 349 (Spain): :no_entry: (rationale: Modelo 349 is a proper noun and should not be  translated)
    - Informe Fiscal: Modelo 349 (Spain): :no_entry:
- The module help must differ from the module description
- Grammatically, module names should be treated as proper nouns and you should capitalize the first letter of every word in the module name (with the exception of short words and acronyms)
    - Initial Data Load: :white_check_mark:
    - Initial data load: :no_entry:
    - Direct Debit Form of Payment: :white_check_mark:
    - Direct Debit Form Of Payment: :no_entry:
    - Three Digits ISO Country Codes: :white_check_mark:
    - Three Digits Iso Country Codes: :no_entry:
- You should avoid using numeric characters to express quantities (they are OK in codes and dates)
    - Three Digit ISO Country Codes: :white_check_mark:
    - 3 Digit ISO Country Codes: :no_entry:
    - Chart of Accounts - PGC 2007 General: Spain: :white_check_mark:
    - Tax Report: Modelo 349 - Spain
- Module names should not end with a full stop:
    - Initial Data Load: :white_check_mark:
    - Initial Data Load.: :no_entry:
- Module description should end with a full stop
    - Generador de declaraciones de impuestos. Traducción al español (español España) del módulo Tax Report Launcher.: :white_check_mark:
    - Generador de declaraciones de impuestos. Traducción al español (español España) del módulo Tax Report Launcher: :no_entry:

#### Specific Types of Modules

- Core translations (translation of Etendo Core) should follow the convention:
    - "Translation: $LANG $COUNTRY ($CODE)"
    - Translation: Arabic Saudi Arabia (ar_SA) :white_check_mark:
- Module translations (translations of modules other than Etendo Core) should follow the convention:
    - "$MODULE NAME Translation: $LANG $COUNTRY ($CODE)"
    - Tax Report Launcher Translation: Spanish Spain (es_ES) :white_check_mark:
- The description for module translations should include an appropriate translation of the module name in the target language as well as both the name of the language and the name of the country in the target language:
    - + Name: Tax Report Launcher Translation: Spanish Spain (es_ES) + Description: Generador de declaraciones de impuestos. Traducción al español (español España) del módulo Tax Report Launcher. :white_check_mark:
- Chart of accounts modules should follow the convention:
    - "Chart of Accounts: $COUNTRY"
    - Chart of Accounts: France :white_check_mark:
- For countries with multiple charts of accounts, use the conventions
    - "Chart of Accounts: $TYPE - $COUNTRY"
    - Chart of Accounts: PGC 2007 General - Spain :white_check_mark:
    - Chart of Accounts: PGC 2007 PYMEs - Spain :white_check_mark:
- Tax configuration modules should follow the convention:
    - "Tax Configuration: $COUNTRY"
    - Tax Configuration: France :white_check_mark:
- Tax report modules should follow the convention:
    - "Tax Report: $FORM_NAME - $COUNTRY"
    - Tax Report: Modelo 347 - Spain :white_check_mark:
- Region modules should follow the convention:
    - "Regions: $COUNTRY"
    - "Regions: Brazil" :white_check_mark:
    !!! note
        Whenever the regions of a country are called something other than regions, you can use the :white_check_mark: term in the module description. Example: + Name: Regions: United States of America + Description: US states.
- Report modules (other than tax reports) should follow the convention:
    - "Report: $REPORT_NAME"
    - Report: Shipments Awaiting Invoice :white_check_mark:
- Skin modules should follow the convention:
    - "Skin: $SKIN_NAME"
    - Skin: Blue Sea :white_check_mark:
- Tutorial modules (provided as examples to illustrate how to develop modules) should follow the convention:
    - "Tutorial: $TUTORIAL NAME"
    - Tutorial: Solitaire :white_check_mark:

#### Bundles

- Do not use "module" in bundles, everything is a module (including core) so this would be redundant.
- In general modules should not use subpackages of other modules since it might create a conflict. In particular do not use subpackages for modules included in a pack (eg. several modules in the spanish localization pack use as a package that is a subpackage of the spanish localization pack package). That inclusion is declared in the pack itself and using subpackaging would create a kind of redundancy (the module could be taken out from the pack later) or modules originally not designed for the pack could be included later.
- The only case where a subpackage makes sense are translations since that relationship can not be changed.
For translations, do not use the word "translation" but directly the language code: translatedmodulepackage.languageCode (eg. org.openbravo.document.massinvoicing.es_ES).
- For translations of core, it does not work (org.openbravo.es_ES) because the core package is not clear enough. In that case, use org.openbravo.coretranslation.es_ES or just org.openbravo.core.es_ES)
- Do not use the "type of artifacts" included in the module for packaging (eg. org.openbravo.report.xxx or org.openbravo.callout.xxx are wrong). The content of a module should not be defined by the "technical components" used to implement them but by the functional objective of the module. It might happen that the functional objective can be reached in a different manner and it should not force repackaging.
- In some cases, functional and technical categories are the same (eg. report) - in this case, put the word "report" in the name of the module but not as a package (eg. org.openbravo.financial.taxreportXX instead of org.openbravo.financial.report.taxXX)
- A package for a module developed by Etendo and staff should be:
org.openbravo.functionalcategory.modulename

    - In some cases, it makes sense to use an additional level:
        org.openbravo.functionalcategory.functionalsubcategory.modulename

    - Use a common set of functional categories and subcategories (when needed). Each scrum team defines their own list of categories and subcategories. This is a starting point (split by teams):

        - applicationdictionary (platform)
        - kernel (platform)
        - utility (platform)
        - setup (erp engineering)
        - common (erp engineering)
        - document (erp engineering)
        - warehouse (erp engineering)
        - project (erp engineering)
        - production (erp engineering)
        - mrp (erp engineering)
        - financial (erp engineering)
        - erputil (erp engineering)
        - localization (localization) ->  subcategories for each country (eg. localization.spain)
        - localizationutil (localization)
        - quickstart (industry templates / verticals are a category by itself)
        - quickstartspain (industry templates / verticals are a category by itself)

#### Choosing a db_prefix

##### Modules created by Partners
- Use a db_prefix that do not begin with the letters ET
- EM is a reserved word not allowed as a db_prefix

##### Modules created by Etendo and staff
- Use a db_prefix ETX where X: from one to 5 characters for the module itself

##### Customization modules
- Use a db_prefix beginning with CUST

Usually customization modules are not intended to be published in Central Repository. In this case, DBPrefix should start with CUST. Modules with these kind of DBPrefixes cannot be registered in Central Repository but are collision safe because no other module in Central Repository can use this DBPrefix. This is an important decision to be taken before starting the module development: in case there is any chance of publishing the module at some moment, it should follow the standard rule, if it is absolutely sure that it will not be published you can use CUST and do not register it.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Processes
## Article Path: /Developer Guide/Etendo Classic/Concepts/Processes
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/processes
## Article Content: 
### Processes
  
#### Overview

A process is a systematic series of actions directed to some end.  A process receives some parameters and taking them into account performs some actions to obtain a result. Etendo defines two main kinds of processes _SQL Processes_ and _Java Processes_.

All processes (as well as [Reports](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Report.md)) are managed from the same window: `Application Dictionary > Report and Process`. 

Once a process is defined it can be added to the menu to be called directly from there, it can be invoked through a button or it can be scheduled to be executed in the background.

Background processes can be set as _Prevent Concurrent Executions_ . Before a process with this attribute is about to be executed, it is checked there are no other instances of the same process in execution at the same time, in this case another execution is aborted.

##### Parameters

When a process (SQL or Java) or a Jasper Report is set as _Standard_, a pop-up message is automatically generated and displayed when invoking it, this message looks like this:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Processes-0.png)

This pop-up has a section with information about the process, this information is obtained from the _Help_ field in the _Report and Process_ tab.

It also prompts for a number of parameters, and finally there are two buttons, _OK_ to start the process and _Cancel_ to close the pop-up and not to do anything else. In case the process did not require any parameter that section would be empty.

When this kind of process requires parameters they must be defined in the `Application Dictionary > Report and Process > Parameter`tab.


![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Processes-1.png)

Parameters are defined in a very similar way than columns are. Depending on the _Reference_ field, the generated UI assigned for the parameter will be different.

Let's overview some of the most important fields in this tab:

  * *DB Column name* : This is the name the parameter will be passed with to the process. When the process is going to use this parameter, it will have to use this name. 
  
!!!note
      Notice that `Postgresql` is case-sensitive. In case the parameter references an existing column in database (for example, it is a parameter of type search), then the _DB Column name_ field must be cased the same way as the column in the Application Dictionary. 
  
  * *Sequence* : It is a numeric value to order the parameter in the pop-up. 
  * *Application Element* : It is the [Element](Element_and_Synchronize_Terminology.md)  that will be used to get the label from, in this way parameters are translatable. 
  
!!!note 
    It is also possible to set or not this element as *Centrally Maintained*. 

  * *Reference* , *Reference Search Key* and *Validation*: These three fields work exactly like the same ones when defining references for columns. 
  * *Range* : If it is checked, the pop-up will display two parameters in order to define a range, the first parameter will be named as specified in _DB Column name_ field and the second one will have the same name with a _TO_ suffix. 

##### Defining Processes

Processes can be of two different types: _SQL Processes_ and _Java
Processes_ . SQL processes are implemented in the SQL language and are executed by the database engine. Java proceses are implemented in the Java language and are executed by the application server.

###### SQL Processes

_SQL Processes_ are implemented by database stored procedures. 

!!!info
    For more information, read [How to create a Stored Procedure](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/.How_to_create_a_Stored_Procedure.md).

SQL processes are defined in `Application Dictionary > Report and Process`. The only field to take into account for this kind of processes is *Procedure*: It is the procedure name in the database. 

!!!note
    As SQL procedures are assigned to modules, they must be named according to following the naming rules: the name of the procedure must start with the module's
    DBPrefix.

As the pop-up for SQL processes is always automatically generated, the *UI
Pattern* field must be set as _Standard_ .

In case the process requires any parameter, it is possible to define them. 

!!!info
    To learn more about how to do it read [Parameters](#parameters).

###### Java Processes

Java processes are implemented by java classes. 

!!!info
    For more information, read [How to create a Java Process](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/.How_to_create_a_Java_Based_Process.md)   .

Java processes are also defined in the `Application Dictionary > Report and Process` window. Depending on the _UI pattern_ they use, they can be split into _Standard_ and _Manual_. Additionally, if the _UI Pattern_ is set to _Manual_, it is necessary to include an entry in the *Process Mapping* to make it accessible in the `web.xml`.

!!!note
    The pop-up used to invoke Java processes defined with _Standard_ _UI pattern_ is automatically generated in the same way the interface for SQL processes is done.

To set a Java process to be have Standard UI just set the _UI Pattern_ field to _Standard_ in the `Application Dictionary > Report and Process` header.

It is also necessary to indicate the Java class that is going to implement the process. This is done by adding a new record in the *Process Class* tab. At least, one record in this tab must be checked as default.

!!!info
    If the process requires parameters they can be defined in the *Parameter* tab as explained in the [Parameters](#parameters) section of this document.

##### Executing processes

!!!note
    It is required to define the process compilation in order to be able to
    execute it. This step can be performed executing ` ./gradlew smartbuild ` and
    restarting Tomcat afterwards.  

  
Processes can be executed from the user interface from a menu or with a button. It can also be scheduled to be executed in the background without any user interaction.

###### Executing a process from a menu option

To execute a process from a menu option, you need to define a new menu option that executes the process. Menus are defined in `General Setup > Application > Menu`. In the *Action* field the *Process* entry must be selected, then in the *Process* field select the process. it will be executed immediately and then saved.

Finally, press the *Tree* button to organize the new menu option in the menu tree, and now the process defined can be executed selecting this new menu created.

###### Executing a process from a button

To execute a process with a button you need to define a column that references a button. In `Application Dictionary > Tables and Columns`, go to the column you want to use to execute the process and in the field *Reference* select the *Button* entry, then in the *Process* field select the process you want to execute and save.

When executing a process with a button, the record ID of the current record selected of the table will be passed to the process. This allows to execute functions for specific records.

###### Executing a process in the background

Backgroung processes are defined in `General Setup > Process Scheduling > Process Request`. 

!!!info
    For more information, read [How to create a Background Process](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Background_Process.md).

In this window you can define a background process. The process to be executed can be selected in the *Process* field. Then you define the scheduling for the background process and it is then ready to use.

!!!note
    There is no user interaction necessary to execute the process, thus, no pop-up will appear prompting for additional parameters.

####### Kill a background Process
 
  
A button *Kill Process* is shown in the Process Monitor window on that processes that implement the KillableProcess interface while a process is being executed (Status = Processing). The interface KillableProcess will let you kill your process using a kill mechanism.

**Mechanism to Kill**

The mechanism that your background process uses to kill itself might vary between implementations. However, the main idea in any implementation should be to check some flag perodically during execution to see if a kill has been requested, and if the flag is set, somehow abort the execution of the rest of the job's work.


Let's see an example,

here we have a dummy process which simply prints the identifier in the log for all the business partners:

```java    
    package com.openbravo.example.killprocess.process;

    import org.apache.log4j.Logger;
    import org.hibernate.ScrollMode;
    import org.hibernate.ScrollableResults;
    import org.openbravo.dal.service.OBCriteria;
    import org.openbravo.dal.service.OBDal;
    import org.openbravo.model.common.businesspartner.BusinessPartner;
    import org.openbravo.scheduling.ProcessBundle;
    import org.openbravo.service.db.DalBaseProcess;
    import org.openbravo.service.db.DbUtility;
    import org.quartz.JobExecutionException;

    public class DummyProcess extends DalBaseProcess {
     
      private static final Logger log4j = Logger.getLogger(DummyProcess.class);
     
      @Override
      protected void doExecute(ProcessBundle bundle) throws Exception {
        try {
     
          // Get all business partners
          final OBCriteria<BusinessPartner> bpCri = OBDal.getInstance().createCriteria(
              BusinessPartner.class);
          bpCri.setFetchSize(1000);
          final ScrollableResults partnerScroller = bpCri.scroll(ScrollMode.FORWARD_ONLY);
          int i = 1;
          // Loop all business partners using a ScrollabeResults to avoid performance issues
          while (partnerScroller.next()) {
            final BusinessPartner bp = (BusinessPartner) partnerScroller.get()[0];
            // Print the Identifier for every business partner
            log4j.info(bp.getIdentifier());
     
            if ((i % 100) == 0) {
              OBDal.getInstance().getSession().clear();
            }
            i++;
     
          }
          partnerScroller.close();
        } catch (Exception ex) {
          Throwable e = DbUtility.getUnderlyingSQLException(ex);
          log4j.error("Error in DummyProcess", e);
          throw new JobExecutionException(e.getMessage(), e);
        }
     
      }
     
    }
```

*Killable Process*

Now, we will see the same process but with Interface `KillableProcess` implemented with the kill method.

```java
    package com.openbravo.example.killprocess.process;

    import org.apache.log4j.Logger;
    import org.hibernate.ScrollMode;
    import org.hibernate.ScrollableResults;
    import org.openbravo.dal.service.OBCriteria;
    import org.openbravo.dal.service.OBDal;
    import org.openbravo.model.common.businesspartner.BusinessPartner;
    import org.openbravo.scheduling.KillableProcess;
    import org.openbravo.scheduling.ProcessBundle;
    import org.openbravo.service.db.DalBaseProcess;
    import org.openbravo.service.db.DbUtility;
    import org.quartz.JobExecutionException;
    
    public class DummyProcessKillable extends DalBaseProcess implements KillableProcess {
     
      private static final Logger log4j = Logger.getLogger(DummyProcessKillable.class);
     
      // Add a variable 'stop' to control the kill implementation and set false by default
      private boolean stop = false;
     
      @Override
      protected void doExecute(ProcessBundle bundle) throws Exception {
        try {
     
          // Get all business partners
          final OBCriteria<BusinessPartner> bpCri = OBDal.getInstance().createCriteria(
              BusinessPartner.class);
          bpCri.setFetchSize(1000);
          final ScrollableResults partnerScroller = bpCri.scroll(ScrollMode.FORWARD_ONLY);
          int i = 1;
          // Loop all business partners using a ScrollabeResults to avoid performance issues
     
          // Only continue with the process if the variable 'stop' is false
          while (partnerScroller.next() && !stop) {
            final BusinessPartner bp = (BusinessPartner) partnerScroller.get()[0];
            // Print the Identifier for every business partner
            log4j.info(bp.getIdentifier());
            // Add a timeout of 30 seconds
            Thread.sleep(30000);
     
            if ((i % 100) == 0) {
              OBDal.getInstance().getSession().clear();
            }
            i++;
     
          }
          partnerScroller.close();
        } catch (Exception ex) {
          Throwable e = DbUtility.getUnderlyingSQLException(ex);
          log4j.error("Error in DummyProcess", e);
          throw new JobExecutionException(e.getMessage(), e);
        }
     
      }
     
      @Override
      public void kill(ProcessBundle bundle) throws Exception {
        bundle.getLog().log("process killed")
        // When kill is called set variable 'stop' to true so the process will be interrupted in the
        // next iteration: while (partnerScroller.next() && !stop)
        stop = true;
      }
     
    }
```

Let us comment the code. First, we need to implement the KillableProcess interface.

```java
    
    public class DummyProcessKillable extends DalBaseProcess implements KillableProcess {
```

We create a variable `stop` that will be used to check the continuity of the execution.

    
    
    // Add a variable 'stop' to control the kill implementation and set false by default
      private boolean stop = false;

In the main loop of the process, we add the check to stop the execution when the variable is set to true.

    
    
          // Only continue with the process if the variable 'stop' is false
          while (partnerScroller.next() && !stop) {

We have also added a sleep (30 seconds) to make the execution time longer.

  
```java
            Thread.sleep(30000);
```

Finally, we implement the kill method that sets `stop` to true.

```java
    
    
      @Override
      public void kill(ProcessBundle bundle) throws Exception {
        bundle.getLog().log("process killed")
        // When kill is called set variable 'stop' to true so the process will be interrupted in the
        // next iteration: while (partnerScroller.next() && !stop)
        stop = true;
      }
```

Now, we are able to kill the process from the Process Monitor. 

When a process is killed, the status in the process monitor will be *Killed by User*.

---

This work is a derivative of [Processes](http://wiki.openbravo.com/wiki/Processes){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}. 
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Selectors
## Article Path: /Developer Guide/Etendo Classic/Concepts/Selectors
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/selectors
## Article Content: 
### Selectors

#### Overview

In this section, the process to define selectors in the Etendo system is described.

Selectors combine a suggestion box with a popup window with filter and sorting capabilities. They have a number of important features:

  * They can be completely defined without manual coding.
  * The selector definition (columns, search criteria, where clause) can be changed at runtime without re-compiling or re-starting the system.
  * The selector makes it very easy to show linked information of a selected entity or search, sort and filter on linked information.
  * The selector suggestion box, as well as the popup grid, support paging with lookahead. This makes them also suitable for large datasets.

#### Selector Concept

A selector is defined within the Application Dictionary, as part of a Reference definition (a domain type) and is used to represent foreign key references in the Etendo user interface.

A selector consists of three parts:

  * The reference definition.
  * The selector header defining which table to select from and the where clause to use.
  * The selector fields which define which columns are searched and what columns are shown in the popup window.

#### Defining a Selector

To define a new selector go to `Application Dictionary` > `Reference` window.
Defining the selector is a three-step procedure:

  1. Create a new reference.
  2. Create a selector header.
  3. Create zero or more selector fields.

This section guides you through all three steps.

##### Step 1: Define a Reference

The reference is used in the column definition. The definition is shown below in the screenshot.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Selectors-2.png)

A description of the fields:

  * Name, Description and Help should be set to a specific value for the reference you are creating.
  * Base Reference **must** be set to false.
  * Parent Reference **must** be set to `OBUISEL_Selector_Reference`.
  * Model, WAD and Runtime UI Implementation can be left empty most of the time.

##### Step 2: Define the Selector

After defining the reference, the selector information can be entered. This is also done in the reference window. Make sure that the reference window shows the reference you have created in step 1 then click **Defined Selector** in the top right of the window and press the **new** button.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Selectors-3.png)

A description of the fields:

  * **Name and Help/Comment**: set these to values describing the selector.
  * **Description**: this is used as the title of the popup window.
  * **Template**: there should normally be only one option: Selector Template. Multiple options are possible if additional templates have been installed for selectors.
  * **Table**: normally a selector selects from a table, select the relevant table from the list.
  * **Column**: the column in the referenced table to which the foreign key column points. If nothing is set here (the default) then the primary key column is used.
  * **Datasource**: can be set when no table is selected. A data source can be used to provide data which is not read from the database but is, for example, computed at runtime. For more information on Datasources, see the [Datasource](https://docs.etendo.software/latest/concepts/datasources.md) Developers Manual.
  * **HQL Where Clause**: this where clause is used to filter the data read from the database.

!!! Note
    Currently it is not possible to use session variables in the where clause.

!!! Note
    When using properties of the entity in the whereclause always the prefix `e.` has to be used, for example `e.seqno`

  * **Display Field**: this selector field is displayed in the drop-down of the suggestion box. Some specific aspects:
    * An empty value (the default one) means that the identifier columns of the referenced table are used to display information in the suggestion box. This default value is often a good choice.
    * Initially, when creating a selector, it is not possible to select a field here as no selector fields have been defined yet (see next section). After defining one or more selector fields, it is possible to choose one of these fields here.
  * **Value Field**: this selector field is set as the value and stored in the database as the foreign key field. Some specific aspects:
    * An empty value (the default one) means that the primary key column of the referenced table is used. This is by far the most common case and therefore a good choice for most if not practically all cases.
    * Initially, when creating a selector, it is not possible to select a field here as no selector fields have been defined yet (see next section). After defining one or more selector fields, it is possible to choose one of these fields here.
  * **Sort By Field**: this selector field is used to sort the records in the drop-down of the suggestion box. Some specific aspects:
    * An empty value (the default one) means that the records are ordered by the values of the display field. And in case the display field is neither defined, the identifier columns of the referenced table are used to sort information in the suggestion box. This default is often a good choice.
    * initially, when creating a selector, it is not possible to select a field here as no selector fields have been defined yet (see next section). After defining one or more selector fields, it is possible to choose one of these fields here.

##### Step 3: Defining Selector Fields

After defining the selector header, the next step is to define the selector field. A selector field is used for the following things:

  * To define a column in the popup search grid.
  * To define a column of the target table which is searched for the suggestion box.
  * To define the display field of the suggestion box (what gets displayed when a user types in values in the field).
  * To define the value field, the column which is used to set the value in the foreign key column.
  * To define the sort by field of the suggestion box.

A selector can have zero or more selector fields. It is possible to define a selector without selector fields. The system will use the default which is to show the identifier in the suggestion box and use the primary key of the referenced table as the value. The suggestion box is shown in the field but no popup window is shown. So this is a light-weight selector definition.

To define a selector field click on the **Defined Selector Field** link shown in the top-right of the Defined Selector tab.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Selectors-6.png)

The description of the fields of the Defined Selector Field:

  * **Name**: use a descriptive name here.
  * **Property**: is a column/property from the table set in the selector header. This field is implemented using the selector itself. This makes it easy for a user to select the correct model property. It is possible to enter a property path. For the business partner table, it is possible, for example, to specify `name` which will show the name of the bank of the bank account of the business partner. See the [next section](#property-paths-showing-linked-information) on Property Paths for more information.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Selectors-7.png)

  * **Description and Help/Comment**: set these to meaningful values for your specific case (see also the **Central Maintenance** field below). The description field is for future usage.
  * **Show in grid**: if checked, then the field is visible in the popup grid. If not checked then the field is not shown in the popup grid. It can still be used as the value field, display field, sort by field or as a search field for the suggestion box.
  * **Sorting of columns in a grid**: the order in which the columns are shown in the popup grid. Only relevant if **Show in grid** is checked.
  * **Sortable**: determines if the user can sort on this column in the popup grid. Only relevant if **Show in grid** is checked.
  * **Filterable**: determines if the user filter on this column in the popup grid. Only relevant if **Show in grid** is checked.
  * **Central Maintenance**: if checked then the name, description and help/comment are copied/used from the column. This is handled by the [Synchronize Terminology](https://docs.etendo.software/latest/concepts/Element_and_Synchronize_Terminology.md) process.
  * **Search in suggestion box**: as a default, the suggestion box will use the string entered by the user to search in the display field (set in the selector header) or identifier. You can select additional fields to search in by setting this field (Search in suggestion box) to yes/checking it. To make search field invisible just uncheck the field **show in grid**, then the field is only used to search and not displayed in the popup grid.

!!! note
    * If none of the selector fields have **show in grid** checked/set to yes, then no popup grid is available and the magnifier icon is not shown, the user can only select data through the suggestion box.
    * when setting a column to filterable or sortable, it is possible that a decreasing performance is encountered with a table with many thousands of records. If this happens, contact the database administrator to optimize the table by adding indexes. Note that these new indexes have to be exported to the Etendo metadata using standard `export.database` procedures.

##### Property Paths, Showing Linked Information

The selector has a very powerful feature that makes it easy to show linked information in the suggestion box and popup windows.

To give an example of linked information. For a business partner selector, it is quite easy to show the identifier of the business partner category. This linked information can take multiple steps, so it is possible to show the name of the bank of the bankaccount of the business partner. These two examples are entered like this in the property field of the Defined Selector Field:

  * `businessPartnerCategory._identifier`
  * `name`

By using the dot (.), the path takes the next step in the model. The suggestion box in the Defined Selector Field window gives support in entering the correct path.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Selectors-8.png)

This is then displayed like this:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Selectors-9.png)

##### Table and Datasource

A selector can retrieve its content from a table or from a Datasource. When in the selector definition a table is defined then on the server Etendo will create a datasource for this table. So internally for Etendo there is no real difference between a table or datasource for the selector.

There are a number of use-cases for which using a datasource makes sense:

  * When the data for a selector requires preprocessing after retrieval from the database.
  * When the data in a selector is not even read from the database but computed in memory by the system.

A datasource is implemented by a developer and then defined in the Application Dictionary. After this, it can be used to define selectors.

!!!note
    For more information on how to implement a datasource, see its [Datasources](https://docs.etendo.software/latest/concepts/datasources.md) page.

##### Translated information

The Selector and Selector Fields also allow you to specify translated versions of names and titles shown in the user interface. To use translated names and titles, go to the **Defined Selector translation** and **Defined Selector Field Translation** tabs. These tabs are available at the top of the window when editing a Selector or Selector Field.

#### Using a Selector

The next step is making use of the selector in the data model. The selector is the same as any other Reference in Etendo. The Reference is used in the definition of a Column. To use the defined selector and set it in a column, go to `Application Dictionary` > `Tables and Columns`. Then select the table and the column you want to set the reference for.

Then, in the reference field, choose `OBUISEL_Selector` Reference. Then in the next combo box **Reference Search Key**, select the specific selector. In the screenshot below a Business Partner Selector is chosen.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Selectors-11.png)

The column can be used to define a field in the Etendo window in a standard way. So in the Etendo Window/Tab/Field definition there is no special setting or handling required for the selector.

After setting the reference in the column and using it in a specific window, you need to restart Etendo to see it in action.

#### Changing a Selector at Runtime

The selector definition itself can be changed at runtime without re-compiling the system. There are no real limits to what part of the selector definition which can be changed at runtime, a non-excluding list:

  * Add/remove columns from the popup grid.
  * Change the where clause.
  * Change the fields which are searched as part of the suggestion box display.

!!! note
    In order to change a selector, the module it belongs to needs to be in development.
    If not, then it is possible that the client-side javascript (representing the selector) is not refreshed automatically.

#### Defining Out Fields

The usual return values from a Selector is the record **id** and **indentifier**. In some cases the developer wants to return more fields and not only these two. You can mark a Selector Field as **Out Field** and will be part of the JavaScript returned object.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Selectors-13.png)

!!! note
    By default the **id** and **identifier** fields are part of the returned object.

##### Using Out Fields in Manual Code (Advanced)

You can use the New Selectors in manual code (not generated by WAD). You must include all the necessary JS imports. There is an empty hook function `onValueChanged` that you can override in your manual window, to perform any custom action. When the user picks a row, this function gets executed. By default it does not do anything.

###### Example of Function

!!! note
    To test this code, you must have a browser with console enabled, e.g. Firefox with Firebug.

```javascript
    isc.OBSelectorLinkWidget.addProperties({
      onValueChanged: function(selected) {
        // selected is an object with members id and _identifier
        // plus all Out Fields
        window.console.log("%o", selected); 
      }
    });
```

In this case, all instances of the OBSelectorLinkWidget will execute the same function, this example function just prints the object passed as parameter.

You can also only override the function on a particular instance.

```javascript
    // sc_C_Bpartner_One_ID is an instance of OBSelectorWidget or OBSelectorLinkWidget
    sc_C_Bpartner_One_ID.onValueChanged = function(selected) {
      window.console.log("%o", selected);
    };
```

#### Providing a New Selector Template (Advanced)

The selector definition is converted to javascript code using a template. The template is selected in the selector (see step 2 above). It is possible for a module to add a new template which can be used for creating selectors.
Creating a new template needs to be done by a developer with a good understanding of Etendo.

Also to implement a new template it is necessary to understand the template processing and template handling functionality used by Etendo. The [Etendo Architecture](https://docs.etendo.software/latest/concepts/etendo-architecture.md) page provides detailed information. It discusses both template processing, caching, i18n and also gives pointers on how to implement a custom template.

The template used for the selector can be found in the source tree of the `org.openbravo.userinterface.selector` module inside the `org.openbravo.userinterface.selector.templates` package in the `selector.ftl` file.

A custom template should be created inside a separate module. To make use of it, define it inside `Application Dictionary` > `Templates`.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Selectors-15.png)

The main fields to set:

  * The TemplateClasspathLocation should point to the location in the source tree of the custom template.
  * The ComponentType **must** be set to selector. The ComponentType determines if the template can be selected in the selector definition.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Selectors-16.png)

When defining selectors, the user can select the custom template.

#### Customizing the Look and Feel of the Selector

The styling of the selector is mostly automatically derived from the styling of other components. Only the icon on the right of the field needs to be styled, see [this page](https://docs.etendo.software/latest/concepts/skins.md#selector) for more information.

#### Troubleshooting

##### The Suggestion Box does not Filter

**Symptom** : When typing in values in the selection box it does not filter, all records are shown.

**Cause** : This can happen when you have accidentally added boolean/yes/no fields to be **search in suggestionbox**.

**Solution** : uncheck the **search in suggestionbox** fields for the boolean/yes/no fields, searching these fields is not supported by the selector in the suggestion box.

##### The Suggestion Box is Always Empty

**Symptom** : When typing values in the selection field the suggestion box is empty or shows much less results than expected, also selecting the direct drop down results in an empty/smaller than expected list.

**Cause** : this happens because there are **search in suggestionbox** fields which require a join to a table while the foreign key is not always set. Only the records which have a value in the foreign key are shown.

**Solution** : if the foreign key selection field is the only one on which is filtered this is fine, however if there are multiple search fields then searching on non-mandatory foreign key fields is not supported by the selector.

#### Advanced Topics

##### HQL Transformers

It is possible to modify an HQL query entirely via java and dependency injection using transformers. To implement the new functionality, visit [HQL Transformers](https://docs.etendo.software/latest/how-to-guides/How_to_create_a_HQL_Based_Table.md#HQL_Transformers).

##### Using foreign keys in HQL Custom queries

In order to do that, the HQL select clause for that property needs to point to an entity (i.e. e.organization, instead of e.organization.name). Then in the definition of the selector field we have to select a Table reference that points to the target entity.

---
This work is a derivative of [Selectors](http://wiki.openbravo.com/wiki/Selectors){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}. 
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Standard Windows
## Article Path: /Developer Guide/Etendo Classic/Concepts/Standard Windows
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/standard-windows
## Article Content: 
### Standard Windows

#### Overview

**Standard Windows** are the windows completely defined in **Application Dictionary**. They allow viewing and editing records in tables.

After defining (or modifying) a standard window, the system must be rebuilt (`./gradlew smartbuild`). During this process `WAD` generates automatically the `Java`, `XSQL`, `HTML` and `XML` code for that window and it is compiled. This means that the complete definition for standard windows is within Application Dictionary without any need of manual developments. This has a number of benefits:

  * No need to write manual code: This reduces the possibility of introducing bugs.
  * Faster development: As a window creation consists only in defining it in Application Dictionary, it is faster that doing it manually.
  * Automatic inclusion of new features and bug fixes: Whenever `WAD` fixes a bug or adds a new feature, this is automatically propagated to all standard windows when the system is rebuilt without needing to re-code or re-define anything.

#### Structure: Windows, Tabs and Fields

The structure for standard windows consists in `Windows`, `Tabs` and `Fields`.

  * [**Windows**](#windows): Windows are holders for tabs. Their main purpose is to group a set of related tabs. They can be added to the application's menu.
  * [**Tabs**](#tabs): Tabs are placed inside windows and can be ordered hierarchically. Each tab is linked to a unique [Application Dictionary Table](https://docs.etendo.software/latest/concepts/data_model.md#tables-in-application-dictionary) and contains a number of fields.
  * [**Fields**](#fields): Fields are contained within tabs. Each field is associated to a [Column](https://docs.etendo.software/latest/concepts/data_model.md#columns_in_application_dictionary) in the same table than its tab.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Standard_Windows-0.png)

The following sections explain how **Windows**, **Tabs** and **Fields** are defined. They are managed from `Application Dictionary` > `Windows, Tabs, and Fields` window.

#### Windows

Windows are generated automatically by `WAD` from their definition in Application Dictionary, all windows have a common layout.

##### Menu

Windows can be added to [Application Menu](https://docs.etendo.software/latest/concepts/application_menu.md).

#### Tabs

`Tabs` are included within `Windows`. Each tab is limited to a single Application Dictionary `Table`. The following subsections detail some important topics to be taken into account when creating a tab.

##### Tabs Hierarchy

`Tabs` are shown hierarchically, they are defined in a tree way. This means that a tab can have subtabs (it is the parent tab for them), consequently a tab can also be a child for another one and it is possible to have several tabs at the same level.

This hierarchy is specified using two fields in the tab:

  * `Tab Level`: Indicates the level in the hierarchy, being 0 the top level, 1 child tabs for ones in 0, etc. Usually there is a single tab at 0 level and the rest of tabs in the window are subtabs for this one. 
  * `Sequence Number`: It is a number that defines the order tabs are displayed. They are sorted ascendantly, so lower ones and in the left side and higher ones in the right. It is a good idea not to use consecutive numbers in order to allow new tabs inclusions between existent ones. 

The conjunction of these two values gives the position and hierarchy for each tab. Let's see through an example how the following tab structure could be defined:

```
     A
     |-A1
     |  |-A11
     |-A2
     |  |-A21
     |  |-A22
     |     |-A221
     |-A3
```

| Tab | Sequence number | Tab level |
|-----|-----------------|-----------|
| A   | 10              | 0         |
| A1  | 20              | 1         |
| A11 | 30              | 2         |
| A2  | 40              | 1         |
| A21 | 50              | 2         |
| A22 | 60              | 2         |
| A221| 70              | 3         |
| A3  | 80              | 1         |

When creating subtabs, it is necessary to set which column in the parent column is going to be the master for the subtab. In order to show in the subtabs only the records that are linked to the current record in the parent one. For example let's suppose tab A is a tab for `C_Invoice` table and tab A1 is for `C_InvoiceLine` , in this case `C_Invoice.C_Invoice_ID` in tab A must be the master column for tab A1, showing in A1 only the records linking to the selected record in A.

There are three possible ways of setting which is the master column in the parent tab:

  1. Using the `AD_Column.IsParent` check in the table used in the subtab. When a table in a tab contains columns checked as `Link to Parent Column`, it is looked in the parent tab a column with the same name and if found that one will be the master.
  2. By `name`. In case the table in subtab has a column with the same name as the parent's `primary key` one, the link will be generated using them.
  3. Using `AD_Tab.WhereClause`. In case it is not possible to use #1 or #2, the relation must be set in the child tab's `Where Clause` field. For more info about this clause, read the document about [Dynamic Expressions](https://docs.etendo.software/latest/concepts/dynamic_expressions.md). In these cases, it is possible to mark the `Disable Parent Key Property` flag, doing so only where clause will be used to create the relationship not adding any other criteria.

###### Locking mechanism

All `WAD` generated tabs implement a simple [Optimistic locking mechanism](https://en.wikipedia.org/wiki/Optimistic_concurrency_control){target="\_blank"}.

When a record is loaded in edition mode, its updated `timestamp` is stored. If the record is modified and saved, this stored timestamp is compared with the current one in database for that record. In case they are different, that record has been modified by another user or process and the application does not allow to save the current modifications. Because otherwise, the modifications done from the record was loaded till the current time would be overwritten.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Standard_Windows-1.png)

####### Transactional Windows

Windows for documents can be set as `Transactional`. Documents have a status, which initially is **Draft**.
When a transactional window is accessed, it appears filtered by default. This is visualized using a `message` and a small `funnel` icon on the top right.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/concepts/Standard_Windows-2.png)

The applied filter is all the documents with status Draft or which date is in the defined `Transaction Range`. To clear the filter, click the `funnel` icon.

To define a window as transactional, go to `Application Dictionary` > `Windows, Tabs, and Fields` > `Window` tab and select the `Window Type` as `Transaction`.

To define the **Transaction Range**, go to `General Setup` > `Application` > `Session Preferences` and define in the `Transaction Range` the maximum number of days that processed documents will be shown in.

####### High Volume Tables

When a table is set defined as `High Volume` (in `Application Dictionary` > `Tables and Columns` > `Table` tab) and the tab that displays it is set to by default be shown in edition mode ( `Default Edit Mode` in `Application Dictionary` > `Windows, Tabs, and Fields` > `Window` > `tab` tab), when the tab is accessed a filter is shown.

####### Filter Clause in Tab

In `Application Dictionary` > `Windows, Tabs, and Fields` > `Window` > `tab` tab there is a **Filter Clause** field,  `HQL Filter Clause`. This field allows `HQL where clauses` to be used as default filter for the tab. When the tab is accessed this filter is applied, to remove it just click on the `funnel` filter icon.

!!!note
    This field is different than the `HQL Where Clause` which also accepts where clauses, but this clause is permanent and cannot be removed by the user.

#### Fields

`Fields` are contained in tabs, each field has a `column` (from the same `table` as the tab's one) associated. It displays and allows editing the column's value. The way a field is displayed within the tab is determined by the [reference](https://docs.etendo.software/latest/concepts/data_model.md#references) its associated column has.

Some of the things to take into account when configuring a field are:

  * `Read Only Logic` which allows determining if field is read only (applies only when field is read-write).The Read Only indicates that this field may only be Read. It may not be updated. Note that it is defined at Column level in the Application Dictionary. It is a [Dynamic Expression](https://docs.etendo.software/latest/concepts/dynamic_expressions.md).
  * `Display Logic` which allows showing or hiding the field depending on other fields' values. It is a [Dynamic Expression](https://docs.etendo.software/latest/concepts/dynamic_expressions.md).
    * Display logic is taken into account in `grid view` as read only logic, being only applied when a record is edited in grid view. 
  * `Central Maintenance`, how it works is explained in the document about [Elements and Synchronize Terminology](https://docs.etendo.software/latest/concepts/Element_and_Synchronize_Terminology.md).
  * [`Callout`](https://docs.etendo.software/latest/concepts/data_model.md#callout), although it is not defined in the fields, it affects them directly becuse they are raised when fields' values are modified.
  * `Field group`, fields can be assigned to a field group, when a group of fields has a field group, a separator is shown in the tab. Field Groups are defined in `Application Dictionary` > `Setup` > `Field Category` tab.

---

This work is a derivative of [Standard Windows](http://wiki.openbravo.com/wiki/Standard_Windows){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Tables
## Article Path: /Developer Guide/Etendo Classic/Concepts/Tables
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/tables
## Article Content: 
### Tables

  
#### Overview

Physical database tables are the basis  Application Dictionary Data Model  is
built on. This document discusses the particularities all tables in Etendo
ERP must have.

#### Common Columns

All tables in Etendo must have some common columns. All these columns
must be defined as not nullable.

##### Primary Key

All tables in Etendo have a single column primary key. This column will
be automatically populated with a generated  UUID  therefore the type for this
column must be _VARCHAR2(32)_ .

Primary Key column must be named like its table with an ID suffix. Thus, the
primary key column for *HT Salary* table would be *HT Salary ID*.

This column must be also set as primary key in database, it is not enough with
defining it as ID in Application Dictionary.

##### Client/Organization

As Etendo ERP is a [multi client and multi organization](Multi_Client_and_Multi_Org.md) application, all
data belongs to a client and an organization, so all tables must have these
two columns:  

  * _AD_Client_ID_
  * _AD_Org_ID_

These columns are a foreign key to *AD Client*  and  *AD Org*  tables. So, their
types must also be *VARCHAR2(32)* , and there must be a foreign key to these
tables.

##### Audit Information

Finally, there are some columns that store information about whether a record
is active and when and who created and last modified it. This information is
maintained in the following columns:

  * _IsActive_ : It is a boolean value (Y/N) indicating whether the record is active or not. Its type must be _CHAR(1)_ and generally, its default value is 'Y'. It is also good practice to create a check constraint forcing its value to be either 'Y' or 'N'. 
  * _Created_ : It contains the date and time when the record was created. Its type is _DATE_ . 
  * _CreatedBy_ : Indicates the user that created the record. It is a foreign key to  *AD User*  so its type is _VARCHAR2(32)_ . 
  * _Upated_ : It contains the last date and time when the record was modified (or created if no modification was performed later). Its type is _DATE_ . 
  * _UpdatedBy_ : Indicates the last user that updated the record. It is a foreign key to  *AD User*  so its type is _VARCHAR2(32)_ . 

#### Naming conventions

When creating new tables it is necessary to pay special attention to the names
given to tables and columns, particularly regarding modularity.

##### Tables

The only element to take into consideration is the module's  DB Prefix  . The
table's name must start with this DB prefix followed by underscore character
(_).

The following table prefixes are used by Etendo and are not allowed to be
used by any modules:

  

Table prefix  |  Description  
---|---  
A  |  asset management  
AD  |  application dictionary  
C  |  core functionality  
I  |  import temporary tables and processes  
M  |  material management  
FACT  |  accounting  
GL  |  general ledger  
MA  |  manufacturing  
MRP  |  material resource  
S  |  service management  
AT,AU,EM,FIN,I,MA,R,RV,T  |  other Core prefixes  
CUS, PD, US, ZZ  |  personal developments  
APRM  |  Advanced Payables and Receivables Mngmt  
OBUIAPP, NAVBA  |  User Interface Application  
OBCHW  |  HTML Widget  
OBCLFRE, OBCLKER  |  User Interface Client Kernel  
OBKMO  |  Workspace & Widgets  
OBCQL  |  Query/List Widget  
OBSERDS  |  JSON Datasource  
OBJSON  |  JSON REST Webservice  
OBUISEL  |  User Interface Selector  
OBUISC  |  Smartclient  
FINPR  |  Orders Awaiting Delivery  
  
##### Columns

###### Modularity

In case the column belongs to the same module than its table no special rule
must be followed for its name. But if the column is going to be added to a
table belonging to a different module, the column name must start with *EM 
plus* the *DB Prefix* of the module the column belongs to. For instance,
`EM_MYMODULEDBPREFIX_COLUMNNAME`.

!!!note
    The column name must not exceed the 30 characters long, that includes the
    EM plus the DB Prefix of the module.

!!!info
    In PostgreSQL, all column names must be defined in lower case.  
  

  
This restriction also applies for naming constraints, triggers and functions.

###### Primary Key Column

!!!info
    Naming for primary key column is explained in [Primary Key](#primary-key) section of this document.

###### Foreign Key Columns

It is a best practice to name, if possible, foreign key columns in the same
manner than the primary key column of the table they link to. The reason for
this is that in Oracle, foreign key (and the rest of the db contraints) names
must be unique at a database-level. So, for example if we have in our table a
column that contains a business partner it should be named *C_BPartner_ID*
because it is a foreign key to  *C_BPartner*.*C_BPartner_ID* column. This is
not possible when there is in the same table more than one column linking to the
same table or when adding columns in a different module than the table's one.

Following this naming rule allows to define standard references as *TableDir*
when the column is defined in Application Dictionary.

###### Naming of Columns and the Data Access Layer

In Etendo, Java classes are generated from the tables definition. A DAL
entity is generated from every table defined in the Application Dictionary.

!!!info
    For more information, visit [Data Access Layer](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md).

It is important you take this into account when thinking about the names for
your columns. The columns you define in a table will correspond to Java
properties in a generated Java class. Therefore, *you must not choose names
which collide with Java keywords* , such as *class* , *if* , *int* , ...

!!!info
    Here you can find a list of the [Java keywords](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html){target="\_blank"}.

#### Supported Column Data types

`DBSourceManager`, the utility that Etendo uses to manage database related
operations, supports a subset of the datatypes that Oracle and PostgreSQL
databases support. Below we include the currently supported data types:


Oracle  |  PostgreSQL  
---|---  
(n)char  |  char  
(n)varchar(2)  |  varchar  
blob  |  bytea  
date  |  timestamp  
number  |  numeric  
clob  |  text  
  
---
  
This work is a derivative of [Tables](http://wiki.openbravo.com/wiki/Tables){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.


==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Add a Button to the Toolbar
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Add a Button to the Toolbar
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-add-a-button-to-the-toolbar
## Article Content: 
### How to Add a Button to the Toolbar

####  Overview

This section discusses how a button can be added the main toolbar shown in grids and forms. The toolbar contains two types of buttons, the application buttons on the left (visualized using an icon) and the custom buttons on the right (shown with a label). 

This section describes how to add a button to the left part: the application buttons.
  
To follow this section, develop javascript as well as server-side java and understand [Data Access Layer](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md) concepts.

####  Example Module

This section is supported by an example module which shows example of the code shown and discussed here.

![Header](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_a_button_to_the_toolbar-0.png)

!!! info
    The example module also contains implementations of other sections.  
 
  
####  Implementing a toolbar button

!!! info
    When implementing your own components, it often makes sense to extend existing components. Make sure that your module then depends on the module that provides the base types. This ensures that the javascript is loaded in the correct order.  
  
The button to be implemented, will compute and show the sum of a set of selected orders to the user. 

This section is divided in 2 parts:

- the first part
focuses on visualizing the button in the correct windows and tabs and making sure the button is enabled/disabled appropriately. 

- The second part will discuss how to implement backend logic and how to call the server side logic when the button gets clicked and show its results.

The first part consists of the following steps:

  * an icon for the visualization 
  * a `css` style and javascript linking the icon to the button 
  * javascript implementing the buttons click/action method and to register the button in the global registry 
  * add javascript to enable/disable the button when records are selected in the grid 
  * a `ComponentProvider` java class to register the javascript and `css` in Etendo.

These steps will visualize the button but not actually do anything yet. The follow up steps will add logic:

  * a server side actionhandler to implement the server side logic (summing the orders and returning the result to the client) 
  * client side javascript to call the server and process the result 

Each of these steps is described in more detail below.

####  Visualizing the button - Implementation steps

#####  Defining the icon and a css

The icon and its related style is defined through an icon file. 

!!!info
    For standard visualization using the Etendo style the icon should be 24x24 without a background colour.


The icon should be placed in a specific directory in your module:
`web/com.etendoerp.userinterface.smartclient/etendo/skins/Default/[modulename]`.

Normally, it makes sense to store the icon in a subfolder. The example module has the icon file in:

`web/com.etendoerp.userinterface.smartclient/etendo/skins/Default/
com.etendoerp.client.application.examples/images`.

    com.etendoerp.client.application.examples
    ├── reference data
    ├── src
    ├── src-db
    └── web
        ├── com.etendoerp.client.application.examples
        │   └── js
        │       ├── example-toolbar-button.js
        │       └── example-view-component.js
        └── com.etendoerp.userinterface.smartclient
            └── etendo
                └── skins
                    └── Default
                        └── com.etendoerp.client.application.examples
                            ├── images
                            │   └── iconButton-sum.png
                            └── example-styles.css

  
Then add a `css file` which links this icon to a specific `css` style. The `css` file must also be located in this directory in your module:
`web/com.etendoerp.userinterface.smartclient/etendo/skins/Default/[modulename]`.

In the example module, the `css` file is located here:

`web/com.etendoerp.userinterface.smartclient/etendo/skins/Default/
com.etendoerp.client.application.examples/example-styles`



Within the `css` file add a style defined like this:

    
    
    .ETToolbarIconButton_icon_etexapp_sum {
      background-repeat: no-repeat;
      background-position: center center;
      background-image: url(./images/iconButton-sum.png);
    }

!!!note
    The name of the `css` class is important, it should start with
    `ETToolbarIconButton_icon_`, the part after that (etexapp_sum) is used later in this tutorial. It makes sense to use the module's dbprefix in this last part to prevent name collisions with other modules.

#####  The javascript to create and register the button

The next step is to implement the javascript which defines the button and registers it to be shown on tabs. Start by creating a javascript file in this location: `web/com.etendoerp.client.application.examples/js/example-toolbar-button.js`.

This is the overall javascript for `toolbar-button`:


```js title="example-toolbar-button.js"
    
    (function () {
      var buttonProps = {
          action: function(){
            alert('You clicked me!');
          },
          buttonType: 'etexapp_sum',
          prompt: OB.I18N.getLabel('ETEXAPP_SumData'),
          updateState: function(){
              var view = this.view, form = view.viewForm, grid = view.viewGrid, selectedRecords = grid.getSelectedRecords();
              if (view.isShowingForm && form.isNew) {
                this.setDisabled(true);
              } else if (view.isEditingGrid && grid.getEditForm().isNew) {
                this.setDisabled(true);
              } else {
                this.setDisabled(selectedRecords.length === 0);
              }
          }
        };
      
      // register the button for the sales order tab
      // the first parameter is a unique identification so that one button can not be registered multiple times.
      ET.ToolbarRegistry.registerButton(buttonProps.buttonType, isc.ETToolbarIconButton, buttonProps, 100, '186');
    }());
```
Let's walk through the different parts. The javascript starts and ends with this part:

``` javascript
    
    (function () {
    ...
    }());
```

This is done to prevent the local variables to be available globally. It creates a function and executes it immediately.

Then the first part of the buttonprops"

``` javascript
          action: function(){
            alert('You clicked me!');
          },
          buttonType: 'etexapp_sum',
          prompt: OB.I18N.getLabel('ETEXAPP_SumData'),
```


  * Sets the action method which gets called when the user clicks the button. 
  * The buttonType maps back to the name used in the css style, it controls the icon and styling and is used as an identification also 
  * The prompt is shown when the user hovers over the button with the mouse, the label is retrieved through the OB.I18N.getLabel method to support translation, add a label in the Messages table to correctly visualize it: 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_a_button_to_the_toolbar-4.png)

The updateState function is called to enable and disable the button when the
user navigates through the system.

```javascript   
    
         updateState: function(){
              var view = this.view, form = view.viewForm, grid = view.viewGrid, selectedRecords = grid.getSelectedRecords();
              if (view.isShowingForm && form.isNew) {
                this.setDisabled(true);
              } else if (view.isEditingGrid && grid.getEditForm().isNew) {
                this.setDisabled(true);
              } else {
                this.setDisabled(selectedRecords.length === 0);
              }
          }
```
The function enables/disables the button if the form or grid is new and if there are no records selected.

Then this code registers the button for the tab with id '186':


``` javascript
      OB.ToolbarRegistry.registerButton(buttonProps.buttonType, isc.OBToolbarIconButton, buttonProps, 100, '186');
```

Note:

  * the first parameter is a unique identification so that one button can not be registered multiple times. 
  * as the second parameter the button javascript class is passed in, as a default always use `isc.ETToolbarIcon`Button 
  * the buttonProps define the button characteristics 
  * the third parameter defines the order in the toolbar, the standard buttons are placed with an interval of 10, so you can place your button in between other buttons. 
  * The last parameter is the tabId (a String), you can pass null to register a button for all tabs. It is also possible to pass in an array of tabIds (strings) to register a button for multiple tabs. 
  * To register a button for multiple tabs call the registerButton multiple times for different tabs 


#####  The ComponentProvider

The previous steps added static resources (javascript and css) to the system.

Now Etendo should know where to find these resources when initializing and generating the user interface. For this, the `css` and javascript and resources have to be registered. This is done through a ComponentProvider. 

!!!info
    For more detailed information, visit [ComponentProvider](https://docs.etendo.software/latest/concepts/Etendo_Architecture#component-provider.md).


```javascript
     
    @ApplicationScoped
    @ComponentProvider.Qualifier(ExampleComponentProvider.EXAMPLE_VIEW_COMPONENT_TYPE)
    public class ExampleComponentProvider extends BaseComponentProvider {
      public static final String EXAMPLE_VIEW_COMPONENT_TYPE = "ETEXAPP_ExampleViewType";
     
      /*
       * (non-Javadoc)
       * 
       * @see com.etendoerp.client.kernel.ComponentProvider#getComponent(java.lang.String,
       * java.util.Map)
       */
      @Override
      public Component getComponent(String componentId, Map<String, Object> parameters) {
        throw new IllegalArgumentException("Component id " + componentId + " not supported."); 
        /* in this howto we only need to return static resources so there is no need to return anything here */
      }
     
      @Override
      public List<ComponentResource> getGlobalComponentResources() {
        final List<ComponentResource> globalResources = new ArrayList<ComponentResource>();
        globalResources.add(createStaticResource(
            "web/com.etendoerp.client.application.examples/js/example-toolbar-button.js", false));
        globalResources.add(createStyleSheetResource(
            "web/com.etendoerp.userinterface.smartclient/etendo/skins/"
                + KernelConstants.SKIN_VERSION_PARAMETER
                + "/com.etendoerp.client.application.examples/example-styles.css", false));
     
        return globalResources;
      }
     
      @Override
      public List<String> getTestResources() {
        return Collections.emptyList();
      }
    }
```
A short explanation:

  * The annotations in the top of the class are related to [Weld](https://docs.etendo.software/latest/concepts/Etendo_Architecture.md#introducing-weld-dependency-injection-and-more.md).
  
  The annotations define that only one instance of this class is created (a singleton) and define an identifier for this instance. 

  * The getGlobalResources is important here, it shows how to register the global resources defined in the example module. 
  
!!!note
      For your own module just follow the same path structure and approach. 

!!!info
    To explain how Etendo can find the ComponentProvider: Etendo/Weld will analyze the classpath and find all the classes which have a @ComponentProvider annotation.


#####  The result

To see the result, restart Tomcat, clear the cache of the browser (sometimes `css` styles are not picked up) and go back to the application and then specifically to the sales order window. 

You should see this:

!!!note
    The button is not visualized in other windows/tabs because it is
    registered for only the sales order header tab.

  

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_a_button_to_the_toolbar-5.png)

  

####  Adding server side logic - Implementation steps

The next step in this how to is to add the server side logic and calling this logic from the client. The server side logic is implemented using the action handler concept. 
The action handler concept allows you to create classes on
the server which are callable from the client. 

#####  Implement the server side action handler

The server side action handler (`SumOrderActionHandler.java`) receives an array of order numbers of the selected orders. It will sum the order values and then return the total as a JSON string.

This is the implementation of the server side:

```java title="SumOrderActionHandler.java"
     */
package org.openbravo.client.application.examples;

import java.math.BigDecimal;
import java.util.Map;

import org.codehaus.jettison.json.JSONArray;
import org.codehaus.jettison.json.JSONObject;
import org.openbravo.base.exception.OBException;
import org.openbravo.client.kernel.BaseActionHandler;
import org.openbravo.dal.service.OBDal;
import org.openbravo.model.common.order.Order;

/**
 * Sums the orders passed in through a json array and returns the result.
 */
    public class SumOrderActionHandler extends BaseActionHandler {
     
      protected JSONObject execute(Map<String, Object> parameters, String data) {
        try {
     
          // get the data as json
          final JSONObject jsonData = new JSONObject(data);
          final JSONArray orderIds = jsonData.getJSONArray("orders");
     
          // start with zero
          BigDecimal total = new BigDecimal("0");
     
          // iterate over the orderids
          for (int i = 0; i < orderIds.length(); i++) {
            final String orderId = orderIds.getString(i);
     
            // get the order
            final Order order = OBDal.getInstance().get(Order.class, orderId);
     
            // and add its grand total
            total = total.add(order.getGrandTotalAmount());
          }
     
          // create the result
          JSONObject json = new JSONObject();
          json.put("total", total.doubleValue());
     
          // and return it
          return json;
        } catch (Exception e) {
          throw new OBException(e);
        }
      }
    }
```
Notes:

  * The BaseActionHandler is extended, this is often the best approach when implementing an ActionHandler, in this case only the execute methods needs to be implemented. 
  * Data can be send in 2 ways to server: as parameters and as part of the request body. Therefore the execute method has 2 parameters. In this example the request body is used.
  * Use a BigDecimal for numbers, as this far more precise than a double, unfortunately json only supports doubles. In the core Etendo system numbers are therefore send from client-server (and vice versa) as strings. 
  * the logic iterates over the order ids and retrieves the order using the [Data Access Layer](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md). 
  * the result is returned as json again.

#####  Calling the server side from the client, displaying the result

Then, on the client, the action method of the button has to be implemented to call the server. Here is the implementation. 

```javascript
    
          action: function(){
            var callback, orders = [], i, view = this.view, grid = view.viewGrid, selectedRecords = grid.getSelectedRecords();
            // collect the order ids
            for (i = 0; i < selectedRecords.length; i++) {
              orders.push(selectedRecords[i].id);
            }
            
            // define the callback function which shows the result to the user
            callback = function(rpcResponse, data, rpcRequest) {
              isc.say(OB.I18N.getLabel('ETEXAPP_SumResult', [data.total]));
            }
            
            // and call the server
            OB.RemoteCallManager.call('com.etendoerp.client.application.examples.SumOrderActionHandler', {orders: orders}, {}, callback);
```

Note:

  * the selectedRecords contain the full record information of the order (businessPartner etc.), in this case we only use the id 
  * the call to the server is asynchronously therefore a callback is used, which is called when the server returns the result. The callback gets 3 parameters, the data parameter contains the JSONObject returned by the server's execute method. 
  * the call to the RemoteCallManager has these parameters: 
    * the class name of the action handler 
    * the data being sent as the request body 
    * request parameters (in this case nothing there) 
    * and the callback 


Then when the server returns, the callback is called which will display a prompt. 

!!!note
    The label used in the callback, uses parameter substitution.
    Parameters are specified using a %0, %1 etc.:

  

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_a_button_to_the_toolbar-6.png)

#####  The result

The result shows the sum of the 2 selected order headers:


![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_a_button_to_the_toolbar-7.png)

---

This work is a derivative of [How to add a button to the toolbar](https://wiki.openbravo.com/wiki/How_to_add_a_button_to_the_toolbar){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Add a Canvas Field to a Form or Grid
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Add a Canvas Field to a Form or Grid
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-add-a-canvas-field-to-a-form-or-grid
## Article Content: 
###  How to add a canvas field to a Form or Grid

#### Overview

This guide explains how to integrate canvas fields into forms and grids within Etendo, enabling the addition of customized visual components such as buttons, links, and calculated labels. 
Canvas fields offer dynamic data presentation and interaction, leveraging JavaScript development expertise for implementation.

####  Introduction

A canvas field allows the user to add any visual component to a form or a row in a grid. 
This concept can be used to add a calculated field to a form and grid. 
Visual components which can be added are for example buttons, links and (computed) labels.

In this section, we will be adding a button and a calculated field to the form and to every row in the grid.
We will illustrate how information from the record and form can be used to get dynamic information from the Form/Grid.

The implementation of canvas fields requires javascript development experience. 
See the following concept pages for background information on javascript development:

  * [Client Side Development and API](https://docs.etendo.software/latest/concepts/Client_Side_Development_and_API.md)
  * [JavaScript Coding Conventions](https://docs.etendo.software/latest/concepts/JavaScript_Coding_Conventions.md) 

It also makes sense to study the following page: [Etendo Architecture](https://docs.etendo.software/latest/concepts/Etendo_Architecture.md).

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_a_canvas_field_to_a_Form_or_Grid-0.png)

####  Example Module

This section is supported by an example module which shows examples of the code shown and discussed.

The code of the example module can be downloaded from this repository: [com.etendoerp.client.application.examples](https://github.com/etendosoftware/com.etendoerp.client.application.examples)

####  Main development steps for creating a new canvas field

The development consists of 2 steps:

  1. Implement the canvas itself, normally this is done in javascript. 
  2. Specify the canvas javascript class in the field definition of the tab/window 

#####  Implementing your canvas in javascript

The first step is to implement your canvas class in javascript. This is done in 2 steps:

  * Create a  [javascript](https://docs.etendo.software/latest/concepts/Client_Side_Development_and_API.md#adding-javascript-to-etendo) file with your javascript class and place it in the correct directory, the convention is to place js files in the following directory in your module: web/[module.java.package]/js 
  * Register the javascript file (and other static resources such as css files) in Etendo using a [ComponentProvider](https://docs.etendo.software/latest/concepts/Etendo_Architecture.md#component-provider) 

The example module implements a button and a calculated field in the `example-canvas-field.js` file.

The first example in the file implements a button which shows the identifier of the current record:

    
```javascript title="example-canvas-field.js"
isc.defineClass('OBEXAPP_SalesOrderActionButton', isc.OBGridFormButton);
 
isc.OBEXAPP_SalesOrderActionButton.addProperties({
  noTitle: true,
  title: OB.I18N.getLabel('OBUISC_Identifier'),
  click: function() {
    var info = '';
    if (this.record) {
      info = this.record._identifier;
    } else if (this.canvasItem) {
      info = this.canvasItem.form.getValue(OB.Constants.IDENTIFIER);
    }
    isc.say(info);
  }
});
```

The second example shows a calculated field which divides 2 values from the current record and displays the result in a formatted way. 
It also illustrates several methods which are called when the context/environment changes (for example when a value on the form changes):

    
```javascript title="example-canvas-field.js"
isc.defineClass('OBEXAPP_SalesOrderCalculated', isc.Label);
 
isc.OBEXAPP_SalesOrderCalculated.addProperties({
  height: 1,
  width: 1,
  overflow: 'visible',
  contents: '',
  initWidget: function() {
    if (this.canvasItem) {
      this.computeContents(this.canvasItem.form.getValue('grandTotalAmount'), this.canvasItem.form.getValue('summedLineAmount'));
    }
 
    this.Super('initWidget', arguments);
  },
  
  // is called when the form gets redrawn
  redrawingItem: function() {
    this.computeContents(this.canvasItem.form.getValue('grandTotalAmount'), this.canvasItem.form.getValue('summedLineAmount'));
  },
  
  // is called when a field on the form changes its value
  onItemChanged: function() {
    this.computeContents(this.canvasItem.form.getValue('grandTotalAmount'), this.canvasItem.form.getValue('summedLineAmount'));
  },
  
  // is called in grid-display mode when the canvas is created/used
  // for a record
  setRecord: function(record) {
    this.computeContents(record.grandTotalAmount, record.summedLineAmount);
  },
  
  computeContents: function(val1, val2) {
    var num;
    if (!val2) {
      this.setContents('');
    } else {
      num = OB.Utilities.Number.JSToOBMasked(val1/val2, 
          OB.Format.defaultNumericMask,
          OB.Format.defaultDecimalSymbol,
          OB.Format.defaultGroupingSymbol,
          OB.Format.defaultGroupingSize);
      
      this.setContents(num);
    }
  }
});
```

The javascript file is registered in the example modules' [ComponentProvider](https://docs.etendo.software/latest/concepts/Etendo_Architecture/#component-provider) like this:

    
```java title="ExampleComponentProvider.java"
@Override
public List<ComponentResource> getGlobalComponentResources() {
  final List<ComponentResource> globalResources = new ArrayList<ComponentResource>();
  globalResources.add(createStaticResource(
      "web/org.openbravo.client.application.examples/js/example-canvas-field.js", false));
.....
```

#####  Defining the canvas in the Tab-Field (ADField)

The next step is to create a new field in the tab, and set its client class field:  

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_a_canvas_field_to_a_Form_or_Grid-1.png)

It is also possible to add in-line properties in the `"Clientclass"` field, for example, 'OBEXAPP_SalesOrderActionButton {"title": "My Action Button"}'

#####  The result

The result is shown in both the grid and the form:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_a_canvas_field_to_a_Form_or_Grid-2.png)

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_a_canvas_field_to_a_Form_or_Grid-3.png)

####  Javascript events passed to the canvas

When implementing your canvas, you should take into account that the canvas is used in 3 different situations:

  * When displaying a row in the grid 
  * When editing a row in the grid 
  * In form view, when editing a record 

The last 2 cases are similar.

In grid-display mode the following applies:

  * In grid mode the following properties are set on the canvas: 
    * `grid`: the grid object 
    * `rowNum`: the row number/record index for which the canvas is used 
    * `record`: the record for which the canvas is used 
    * `colNum`: the column in which the canvas is shown 
    * `field`: the field where the canvas is used 
  * A canvas can be created and pooled, so over time it is created once and re-used when records are scrolled into view. 
  When a canvas is used for a record, then the setRecord method on it is called (if the canvas has this method). 

In form-edit or grid-edit mode, the following applies:

  * The canvasItem property will be set pointing to the form item the canvasItem can be used to get to the form itself and to the grid (if editing in the grid): 
    * `this.canvasItem.form`: the form instance 
    * `this.canvasItem.form.grid`: in case of grid editing 
  * If the canvas has a property noTitle with the value `true` then in form mode no title/label is displayed 
  * Form changes: the canvas can capture form/value change events by implementing 2 methods (both without arguments): 
    * `onItemChanged`: is called when a value on the form changes 
    * `redrawingItem`: is called just before the form is redrawn 

####  Adding server side actions

The button implementation can easily be extended with a server side action. Etendo Classic supports the [action handler concept](https://docs.etendo.software/latest/concepts/Etendo_Architecture.md#actionhandler-server-side-calling-from-the-client)  for this purpose.

---

This work is a derivative of ["How to add a canvas field to a form or grid"](http://wiki.openbravo.com/wiki/How_to_add_a_canvas_field_to_a_Form_or_Grid){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}. 
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Add a Field to a Window Tab
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Add a Field to a Window Tab
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-add-a-field-to-a-window-tab
## Article Content: 
### How to Add a Field to a Window Tab

#### Overview

The objective of this section is to show how you can add a new field to a tab in Etendo Classic.

It is closely related to the previous [How to add Columns to a Table](how-to-add-columns-to-a-table.md) section.

The task of adding columns to an existing window is now very simple since most of the work (like defining references, elements) has already been done when adding the columns to the table.

On this page we will show an example of how to place the `example_column` field in the `Production Run` window using the `create fields` button.

##### Add the fields to the window example

The process to add new fields to an existing window is the same as the one to add fields to a new (empty) window. Going to `Application Dictionary` > `Window, Tabs and Fields`, we need to search for the `Production Run` window. Then, for that window, mark its `Incidence` tab.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_a_field_to_a_Window_tab_0.png)

Now, we use the Create Fields process on this tab to let it add all columns
of the underlying _MA_WEIncidence_ table to this tab if they have not been previously
added.

This will then add one new field to the tab matching the new column
and automatically place the field into the module.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_a_field_to_a_Window_tab_1.png)

As a last step, the Synchronize Terminology process should be run to synchronize our newly added fields to the elements created for the columns they are based on, so that the UI labels for the new fields get the names defined in those elements.

If this window should also be used in _classic UI mode_ then now `./gradlew smartbuild` should be execute to compile the changed window.

To see the changes in the new user interface just change the `System Administrator` role used for this section (Select a role where you have access to the window) and go to the modified window to see that it has the new field as shown here:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_a_field_to_a_Window_tab_2.png)

---

This work is a derivative of [How to add a field to a window tab](http://wiki.openbravo.com/wiki/How_to_add_a_field_to_a_Window_Tab){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Add a Rich Text Field and Column
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Add a Rich Text Field and Column
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-add-a-rich-text-field-and-column
## Article Content: 
### How to Add a Rich Text Field and Column
  
#### Overview

This How-to section explains how to add a rich text field and column to the Etendo Classic.

The steps to get a rich text field in your window consists of two steps: 

- [Add a column to a table](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-add-columns-to-a-table.md)
- [Add a field to a tab](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-add-a-field-to-a-window-tab.md)

You can also create a new table and a new window/tab ofcourse.
This how-to will only focus on the specific part of a rich text field.

  
####  Example 

For this how-to, we will use the redefine the description field in the sales order window. So, you may need to do a *smartbuild* after the changes to see the result.


  
#####  Adding a column

First, you have to [add a column to the existing table](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-add-columns-to-a-table.md).


!!!note
    As rich text is stored as HTML inside the database, the varchar column type
    should be used. What is more, the developer needs to keep in mind that 100
    characters of rich text requires more that 100 chars of storage inside the
    database due to html markup. Usually, a factor of 2 will suffice, for example,
    if one wants to allow the user to enter 1000 characters of rich formatted
    text, the database column should have a type of varchar(2000).  

  
When introducing the new column to the application dictionary, the correct
reference must be selected, i.e. the new _Rich Text_ reference:


![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how_to_add_a_rich_text_field_and_column-1.png)

#####  Create a field - set col and rowspan

Then [create a field](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-add-a-field-to-a-window-tab.md) within the tab/window. For a rich text field you can also set the col and rowspan (these are only shown when the corresponding column is defined as rich text):

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_a_rich_text_field_and_column-2.png) 


#####  The result

The result is visualized as a rich text editor in form view:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_a_rich_text_field_and_column-3.png) 

  

!!!info
    Rich text fields can not be edited in grid mode (a hoover shows the content). They are always displayed as read-only fields.  

  
---

This work is a derivative of [How to add a rich text field and column](http://wiki.openbravo.com/wiki/How_to_add_a_rich_text_field_and_column){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}. 
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Add Columns to a Table
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Add Columns to a Table
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-add-columns-to-a-table
## Article Content: 
###  How to Add Columns to a Table 

####  Overview

In this section, the user can find information about how to extend the table created in the [How to Create a Table](how-to-create-a-table.md) section to include additional fields.

Three different fields will be added to show how to configure some of the possible references:

  1. _ValidTo_ , a simple date-field matching the ValidFrom date already present in this table 
  2. _Payment Schedule_ , shown as a combobox to the user to be able to choose from three values defined in a list-reference. 
    1. First day of the month 
    2. Mid of the month 
    3. Last day of the month 
  3. _Payment Category_ , a link to another existing table which allows selecting among the values present in that table. 

  
These changes can be done in two different locations:

  1. Add columns to the *original* module (dbprefix `HT` ) 
  2. Create a *second* module (dbprefix `HT2` ) which adds the columns to the first module 

The first option can be chosen if the original module author wants to add more columns to their module. The second option is possible for anyone as the columns are added by a new module to the existing one which is not changed directly.

The main difference between these two methods is the names which need to be chosen for the columns to comply with the modularity naming rules.

  1. Adding column to same module: Any valid column name can be picked 
  2. Via second module: New column name must comply to the pattern `EM_<DBPREFIX>` where `<DBPREFIX>` must be the dbprefix if the new module contaning the column to be added. In this example: `EM_HT2`

From now on, we follow this second approach and will place all new elements into a new module with dbprefix `HT2` .

To show how different types of column are configured, we will be adding 3 new columns:

  * _Valid To_ a simple column of type date 
  * _Payment Schedule_ a list-reference containing a list of values: _Start of Month_ , _Mid of Month_ , _End of Month_
  * _Salary Category_ a reference pointing to the existing _Salary Category_ table. 

#####  Creating the new module

This section only lists the main important elements needed for the new module. More details can be found in the [How To Create a Module](How_To_Create_a_Module.md)

  * dbprefix: `HT2`
  * Dependencies: 
    * Core as usual 

#####  Creating the columns in the database

| Column name     | Type   | Length | Note                                                                                                                                   |
| --------------- | ------ | ------ | -------------------------------------------------------------------------------------------------------------------------------------- |
|`em_ht2_validto`  |  DATE  |  |  Date that this salary is valid to.  
|`em_ht2_payment_schedule`  |  VARCHAR  |  60  |  When the salary is paid  
|`em_ht2_c_salary_category_id`  |  VARCHAR  |  32  |  Link to the Salary Category  
  
To create the above table within the database, use one of the following `ALTER TABLE` statements depending on the DB you are using:

```sql title="SQL script"
ALTER TABLE ht_salary ADD COLUMN em_ht2_validto timestamp without time zone;
ALTER TABLE ht_salary ADD COLUMN em_ht2_payment_schedule VARCHAR(60);
ALTER TABLE ht_salary ADD COLUMN em_ht2_c_salary_category_id VARCHAR(32);
ALTER TABLE ht_salary ADD CONSTRAINT "em_ht2_c_salary_category" FOREIGN KEY (em_ht2_c_salary_category_id) REFERENCES c_salary_category(c_salary_category_id);
```

As can be seen in the SQL, a foreign key is added along with the new field linking to the `c_salary_category` table. This ensures that only existing categories can be selected and also that no salary category can be deleted as long as it is used in the `ht_salary` table.

#####  Adding & Configuring the columns in the Application Dictionary

In this part, we will add the newly added column to the list of columns already defined for the `ht_salary` table and then configure those column definitions to match the description giving in the objective section above.

######  Adding the new column to the Application Dictionary

The steps to follow are:

  1. In the `Tables and Columns` window search for the entry of the `ht_salary` table. 
  2. With this record selected, run the *Create columns from DB* process. As the table already contains several columns only column which are not yet present in the Application Dictionary definition of that table will be added. In this section, this process will add our newly created 3 columns to the list. Notice that those new entries are automatically associated with the new module with prefix `HT2` as the process detected this via the naming of the database columns. 

Taking a look at the folder structure of the module after running `./gradlew export.database`, it shows that the new columns have been exported into a file in a 'modifiedTables' folder instead of the usual 'tables' to indicate that this module does not create the `ht_salary` table but instead is adding new elements to it.

```
org.openbravo.howtos2
└── src-db
    └── database
        └── model
            ├── functions
            └── modifiedTables
            │       └── HT_SALARY.xml
            ├── sequences
            ├── tables
            ├── triggers
            └── views
        └── sourcedata
            ├── AD_MODULE_DBPREFIX.xml
            ├── AD_MODULE_DEPENDENCY.xml
            ├── AD_MODULE.xml
            └── AD_PACKAGE.xml
```  

######  Configuring the new columns

Before starting to configure the new columns, two preparatory steps need to be done.

  1. Create a _List Reference_ for the column _Payment Schedule_ to define the 3 values which should be allowed for this list. 
  2. Create _Table_ reference for the `em_ht2_c_salary_category_id` column as the standard _TableDir_ reference cannot be used with `em` _type columns_.

When adding these new elements remember to place them in the new module with prefix `HT2`.

The first step is to create a new *Reference* to hold the list of values for the _Payment Schedule_ column. Important values to configure here are:

  * _Parent Reference_ = *List* in the Reference definition itself, to define it as a List Reference. 
  * For each entry in the _List Reference_ tab 
    * _Search Key_ The value stored in the database field when this entry is selected by a user in the ComboBox. 
    * _Name_ The user visible (translatable) text shown in the UI. 
    * _Sequence_ to define the order of the entries which should be used in the UI. 

The following screenshot shows how the defined reference will look like.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_Columns_to_a_Table-1.png)

  
The second step is to create a *Table Reference* to define how the new *Salary Category* field is linked with the `c_salary_category` table.

For this, a new *Reference* needs to be created. In this case, the important values for it are the following:

  * _Parent Reference_ = *Table* to denote this is a Table Reference. 
  * In the _Table Reference_ Tab: 
    * _Table_ = `c_salary_category` as this is the target table our new column will be pointing to.
    * _Key Column_ = `c_salary_category_id` as this is the primary key of the target table 
    * _Display Column_ = `Name` to denote the field of this table which should be shown in the UI for this column. 

The following screenshot shows how the defined reference will look like.  

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_Columns_to_a_Table-2.png)

  
After this two previous steps, we can finally configure the new columns to use the reference we just created.

In the *Tables and Columns* window, we search for the entry to the `ht_salary` table. In the column tab we make the following changes for our new columns:

  1. _Payment Schedule_, change the *Reference* of this column from _String_ to *List* and change the *Reference Search Key* to our newly created List Reference with name `EM_Ht2_Payment_Schedule`. 
  2. _Salary Category_ , change the *Reference* of this column from _TableDir_ to *Table* and change the *Reference Search Key* to the new `ht_salary_c_salary_category` . 

  
The final step would be to run the *Synchronize Terminology* process and update the created elements to have useful names for the UI.

However as long as issue  10886  is unfixed this process will not map existing elements correctly for columns following the `EM_` naming rules.

To work around this and reuse the existing core elements for the two columns for which such exists ( _validto_ , _Salary Category_ ) assign the existing elements manually to those two columns.

For this, the following changes are needed in the same open window *Tables and Columns* still open from the last step and in the *Columns* tab of the `ht_salary` table.

  1. _ValidTo_ change the *Application Element* to _ValidTo - Valid To Date_
  2. _Salary Category_ change the *Application Element* to _C_Salary_Category_ID - Salary Category_

  
Now run the *Synchronize Terminology* process to set element for the last column which does not yet have a matching element.

After this, the new columns should look like shown in the following screenshot:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_add_Columns_to_a_Table-3.png)
  
As a final step, we now update the newly created `EM_Ht2_Payment_Schedule` element to have a useful label for the UI.

Navigating to `Application Dictionary` > `Element` we search for the new element and to the following updates:

  1. *Name* change from `EM_Ht2_Payment_Schedule` to *Payment Schedule*
  2. *Print Name* change from `EM_Ht2_Payment_Schedule` to *Payment Schedule*

Those updates are needed to have useful labels in the UI for any windows defined on this table and to avoid those having internal names using the technical `EM`-terminology.

#####  Rebuilding the system

Finally, to make the newly added columns available at runtime `./gradlew generate.entities` needs to be called and the changes deployed to tomcat. Those two steps can be done together by calling `./gradlew smartbuild`. After that, Tomcat must be restarted to refresh the DAL In-Memory Model so it knows about the newly added columns.

Once the columns are added to the table, the user can [export](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/How_To_Create_a_Module.md#exporting-a-module) the module.

To add the new columns to the window defined on top of this table, visit [How to add a field to a Window Tab](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-add-a-field-to-a-window-tab.md).

---

This work is a derivative of [How to Add Columns to a Table](http://wiki.openbravo.com/wiki/How_to_add_Columns_to_a_Table){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Change an Existing Window
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Change an Existing Window
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-change-an-existing-window
## Article Content: 
###  How to Change an Existing Window

####  Overview

Application elements ([windows, tabs and fields](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/Modularity_Concepts.md#windows-tabs-and-fields.md)) are liable to change repeatedly during the development or maintenance phases of a project.
Etendo is able to cope with these changes because its architecture is suited to iterative development. The definitions of all generated Windows, tabs and fields are stored as metadata in the Application Dictionary (AD).

Changing the window of an existing application is a simple process of changing the AD definition.

When using the Etendo UI, the changes can be seem immediately when switching role and then by opening the changed window again.

When using classic Window a compile step is needed.  

This How-To explains how to modify existing elements of a window. If only new elements (like new fields) should be added to a window the use of a Template is not needed. Instead, those new elements can just be
added using a normal module as explained in the other How-To on [How to add a field to a window Tab](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-add-a-field-to-a-window-tab.md). 
 


####  Objective

The objective of this how-to is to illustrate how to make changes to existing generated windows in terms of appearance and behavior. The window used in the example is the Physical Inventory window and the changes illustrated will be:

  * Hide a field 
  * Re-sequence the layout 

[Physical Inventory](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/warehouse-management/transactions.md#physical-inventory) is a window that belongs to Etendo Classic.
It comprises of:

  * 1 Window - Physical Inventory. 
  * 2 Tabs - Header and Lines. 
  * A Header Tab has 19 Fields 10 of which are displayed (A few are displayed conditionally).

Before any changes the header tab has the following appearance:


![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_change_an_existing_Window-1.png)


!!!info
    To customize these window in a Modularity Context a new module of Type
    *Template* is needed.



####  Changing the window

Navigate to the `Application Dictionary` > `Windows, Tabs and Fields` window and select the record for _Physical Inventory_ .

In the _Fields_ tab we can now make the changes needed to adapt the layout as
wanted:

  * _Description_ field, unmark the _Displayed_ checkbox to hide the field from the tab. 
  * _Organization_ field, change sequence number to _200_ and mark the _Start in new line_ checkbox. This moves the field below all other normally displayed. 

  
For testing the changed layout, switch away from the *System Administrator* role to e.g. the *F &B International Group Admin* role and open the *Physical Inventory* window again. As the instance contains our module marked as *InDevelopment* the window layout is reloaded each time the window is opened, so
we can see the changed layout immediate as seen below:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_change_an_existing_Window-2.png)


  
To apply the same layout changes to the window in *classic UI mode*, the windows need to be recompiled, the changes deployed to tomcat and tomcat restarted. The compile & deploy step can be done by using `./gradlew smartbuild` which will recompile all changed windows and deploy the changes.

  

####  Exporting the changes

The final step is to export the changes into the module so they are persisted.

!!!note
    When exporting changes into a template, it is important that only the *template is in development* and the module which contains the changed object (i.e. window) is not.

After ensuring that, the export of the changes consists of the following two
steps:

``` bash title="Terminal"
  1. _./gradlew export.database_ , same steps as for any other module 
```

``` bash title="Terminal"
  2. _./gradlew export.config.script_ , analyses the changes done and creates a special file _configScript.xml_ in the module to contain them. 
```

---

This work is a derivative of [How to change an existing window](http://wiki.openbravo.com/wiki/How_to_change_an_existing_Window){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.   
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Change the Size of a Column
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Change the Size of a Column
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-change-the-size-of-a-column
## Article Content: 
### How to Change the Size of a Column

#### Overview

This section explains **how to change the size of a column** inside the database. It enables the user to have a certain amount of flexibility within the database.

#### Execution Steps

In Etendo, it is possible to **change the size of a column**. To achieve this, these steps must be followed:

  1. Create a template and set its status as **In Development**.
  2. Modify the column size within the database with the **ALTER TABLE** SQL command.

    !!!info
        The new value must be greater than the old one.

    - Postgres:
    ```SQL
    ALTER TABLE <table_name> ALTER COLUMN <column_name> type <type>(<new_size>)
    ```
    - Oracle:
    ```SQL
    ALTER TABLE <table_name> MODIFY <column_name> <type>(<new_size>)
    ```

  3. Update the new column size in the **Application Dictionary**. For this, go to the **Tables and Columns** window, find the column definition and specify the new size there.
  4. Export the database: `./gradlew export.database` (with this action, the template definitions are being exported).
  5. Export the configuration script: `./gradlew export.config.script` (with this action, the core changes into the template are being exported).
  6. Check the generated configuration script and verify that the change regarding the new column size appears in the first lines.

!!!note
    If the column that has been modified is being used by a database function by giving its value to another variable, this variable must have an equal or greater size (at least the size of the new modified column). Since if not, the process would fail. This means, if the variable's size was not enough to store the columns content, the function as well must be modified by adjusting the size of the variable in question and exporting this change into the template.

As a last consideration, **verify that the new column size does not affect** functions or triggers working with the database.

---

This work is a derivative of [How To Change The Size of a Column](https://wiki.openbravo.com/wiki/How_To_Change_The_Size_of_a_Column){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Copy and Paste Images in Etendo
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Copy and Paste Images in Etendo
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-copy-and-paste-images-in-etendo
## Article Content: 
#### Copy and Paste Images in Etendo

##### Overview

This section explains how to use rich text areas to save images in Etendo.

##### How to include images with rich text areas

First, the user must define a column in the database where the corresponding image is saved.

!!! info
    To do this, it is important to remember that this column must have the enough size to store a codified image in base64 format. For example: a 2 MB image contains 3 million characters.


![](https://docs.etendo.software/latest/assets/drive/wO0NOA64kTnYqRjQ8KTrcBJiMmq2AGvuS6oYHOQ75hZ13OvUYgFkAK2S7iE-SGeRh5PcE5eNA8rgbpzg0LwgGGh-R4fk1yHCI9orYLKJJXDD9noH4K0ernCNFMkZCKBo_4owHCPkqrpxgOcFN2NjHMI0NchPj0r1VminCsMvbp0begvcFdO8FI8DjE5jAA.png)

Once the column is defined, the user must log in with the System Administrator role, go to Application Dictionary | Windows, Tables and Columns, find the corresponding table, in our case “product” and create columns from the database with the “Create column from DB” button. 

In the recently created column, the reference “rich text area” must be selected. 

Also, a field for the corresponding image must be created. 

Finally, it is necessary to compile executing:

```bash title="Terminal"
./gradlew smartbuild
```


![](https://docs.etendo.software/latest/assets/drive/zd0NYsbcmx0ehnHRsCxb21zazxL6sYuBxqjAOoH74QmK1CTccI-dDyqzmMrTiJDrusrcdifTRiiCPPomRAdduh1LipsA2FHTP84kstjAI8SwL3a7-DkSSmCqbVYsyXF_d1El8Z9QqPqphc4oqIB-wFYadh3OODSzp8QCHSyGBAGZSX8OczGKNApmreM8eg.png)

As seen in the image above, the “image” field was created, in which it is possible to paste content to store in base64 format in the database. In this way, this information is available for later.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Background Process
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Background Process
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-background-process
## Article Content: 
###  How to Create a Background Process

####  Overview

Background Processes are [Processes](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/Processes.md) that are executed without the direct
action of the user. There can be set different rules to schedule when the
process is executed.

This document discusses about the Etendo infrastructure for Background
Processes. How to define, schedule and monitorize Background Processes.

####  Defining a Background Process

Background Processes are defined in the window `General Setup` > `Process Scheduling ` >`Process Request`. First in the field *Process* select
the process to execute and, in the *Timing* field, when it will be executed.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Background_Process-0.png)
Depending on the *Timing* selected, it is needed to define more fields to
define this timing:

#####  Run Immediately

This timing option will execute the Background Process only once at the moment
the button to schedule the process is pressed. After being scheduled, it
can be rescheduled as many times as needed.

This option is very similar to executing a process from a menu option. The
difference is that when scheduling a _Run Immediately_ Background Process,
there will not be any pop-up that indicates when the execution finished and
instead, its execution  will be registered in the *Process Monitor*.

##### Run Later

This option is similar to the previous option. In this case, the Background
Process will be executed only one time in one moment in the future.

The moment when the Background Process will be executed is defined in the
fields *Start Date* and *End Date*.

#####  Schedule

This is the most versatile option that allows to execute a Background Process
periodically. These are the fields used to define the schedule plan of a
Background Process:

  * *Start Date* and *Start Time*: Defines the moment when the schedule plan for this Background Process will start. 
  * *Frequency*: Defines the frequency to execute the Background Process. It can be *Every n seconds* , *Every n minutes* , *Hourly* , *Daily* , *Weekly* , *Monthly* , or *Cron expression*. Depending on the option selected you can define the specific details for each frequency option. 
  * *Finish Date* and *Finish Time*: These fields can be defined only when the option *Finished* is selected. And it defines when to stop the schedule plan for this Background Process. 

#####  Schedule and Unschedule a Background Process

After the Background Process has been completely defined it can be scheduled
pressing the button *Schedule Process*. When a process is scheduled, it
will be executed according the *Timing* options selected, and every
execution will be registered in the Process Monitor.

To stop future executions of an Background Process just press the button
*Unschedule Process*. After a Background Process has been unscheduled it
can be scheduled again in any moment pressing the button *Reschedule
Process* .

#####  Monitoring executions of Background Processes

All the executions of Background Processes can be monitored in `General Setup` > `Process Scheduling ` >`Process Monitor`.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Background_Process-1.png)


In this window, there is one entry for each Background Process execution and
the information of each execution. The most important fields are:

  * *Process*: The Process executed. 
  * *Start Time* , *End Time* and *Duration*: When the execution started, when finished and the time it took to complete. 
  * *Status*: The final result of the execution of the Process. 
  * *Process Log*: The information logged during the execution of the Process. For example if the *Status* of the execution is _Error_ here in the *Process Log* the reason of the error can be detected. 


This work is a derivative of [How to Create a Background Process](http://wiki.openbravo.com/wiki/How_to_create_a_Background_Process){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.



==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Callout
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Callout
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-callout
## Article Content: 
### How to Create a Callout

####  Overview

The objective of this article is to show you how to create a new  callout . A callout is a piece of Javascript code associated with a particular field on a tab. This code is executed whenever the field changes. It is a type of Ajax substitute, changing parts of a tab/window without the need of refreshing it.

It works by calling the FIC when a field with an associated callout is changed. The FIC (Form Initialization Component) refreshes the needed fields based on the callout logic.

This section implements the following new functionality: When entering a new product, one has the option of entering the _Search Key_ for the product, the _Name_ and the _Category_ it belongs to. But what if our client wants the search key to be constructed automatically by taking the product's name, removing all spaces, appending the underscore (_) and the category name it belongs to?

For example, the Search Key of a product that has the Name _Bon Fountain_ and belongs to the _Water_ Product Category would become _BonFountain_Water_. Let's see how this could be done using a callout.

The steps involved in creating a new callout are:

  1. Create the source file(s) of the callout (usually a java file). 
  2. Define the new  callout  within the application dictionary (`Menu` > `Application Dictionary` > `Setup` > `Callout`). 
  3. Associate this callout with a table  column  ( `Application Dictionary` > `Table and Column: Callout field within Column tab`). 
  4. Compile the window/tab(s) where this Column is used. 

!!!Important
    Developments related to points (1) and (2) must belong to
    a module that is not the _core_ module. Please follow the [How to create a module](How_To_Create_a_Module.md)  section to create a new module. For the development related
    to point (3) about modifying a _core_ located column, a new template is
    needed. You can read the [How to Change an Existing Window](How_to_change_an_existing_Window.md) article to obtain more information.

!!!Note
    This article assumes you have created both module and template according to the articles just mentioned.  

  
####  Creating the Callout

Existing callouts are located in [src/org/openbravo/erpCommon/ad_callouts](https://github.com/etendosoftware/etendo_core/tree/main/src/org/openbravo/erpCommon/ad_callouts){target="_blank"}.

The right way to create a callout is by extending the SimpleCallout class.
This class simplifies the callout code, hides some of the internals of the
callout and keeps you focused on the operations required. To access database
data, DAL is used.

#####  Theory

To develop a new callout based on this class, you only have to create a new
java class that extends SimpleCallout and overwrite the following method:
```java
  protected void execute(CalloutInfo info) throws ServletException;
```
In this method you can develop the logic of the callout and use the info
object of class CalloutInfo to access window fields, database and other
methods. The most important are:

  * public String `getStringParameter(String param, RequestFilter filter)` : Returns the value of a field named param as an String using the filter to accept values. 
  * public BigDecimal `getBigDecimalParameter(String param) throws ServletException` : This method returns the value of of a field named param as a BigDecimal. 
  * public void `addResult(String param, String value)` : This method sets the value of a field named param with the String value indicated. 
  * public void `addResult(String param, Object value)` : This method sets the value of a field named param with the value indicated. This method is useful to set numbers like BigDecimal objects. 
  * public void `addSelect(String param)` : Starts the inclusion of values of a field named param of type select. 
  * public void `addSelectResult(String name, String value)` : Adds an entry to the select field and marks it as unselected. 
  * public void `addSelectResult(String name, String value, boolean selected)` : Adds an entry to the select field. 
  * public void `endSelect()` : Finish the inclusion of values to the select field. 
  * protected void `showMessage(String value)` : Shows a message in the browser with the value indicated. 
  * protected void `showError(String value)` : Shows an error message in the browser with the value indicated. 
  * protected void `showWarning(String value)` : Shows a warning message in the browser with the value indicated. 
  * protected void `showInformation(String value)` : Shows an information message in the browser with the value indicated. 
  * protected void `showSuccess(String value)` : Shows a success message in the browser with the value indicated. 
  * protected void `executeCodeInBrowser(String value)` : Executes the javascript code indicated in the value in the browser. 
  * public String `getLastFieldChanged()` : Returns the name of field that triggered the callout. 
  * public String `getTabId()` : Returns the Tab Id that triggered the callout. 
  * public String `getWindowId()` : Returns the Window Id that triggered the callout. 
  * public `VariablesSecureApp vars` : This instance field contains the VariablesSecureApp associated to the callout servlet. 

It is important to keep coherence with each expected data type (String, BigDecimal, ...)

See the following class as an example of a class that currently uses
SimpleCallout: [SL_Project_Service](https://github.com/etendosoftware/etendo_core/blob/main/src/org/openbravo/erpCommon/ad_callouts/SL_Project_Service.java){target="_blank"}. This callout simply takes the numeric value of two fields, calculates the sum and writes it into another field. This
is the interesting part of the code that performs the logic:
```java
  @Override
  protected void execute(CalloutInfo info) throws ServletException { 
    BigDecimal serviceSerCost = info.getBigDecimalParameter("inpservsercost");
    BigDecimal serviceOutCost = info.getBigDecimalParameter("inpservoutcost"); 
    BigDecimal serviceTotalCost = serviceSerCost.add(serviceOutCost);
    info.addResult("inpservcost", serviceTotalCost);
  }
```
#####  Extend a Callout

It is possible to implement a callout that extends from another callout. For
more information visit this [How to create a callout that extends from another callout](How_to_create_a_callout_that_extends_from_another_callout.md) tutorial.

  
#####  Product Search Key Calculation using SimpleCallout

Let's define the tasks that need to be performed by the callout:

  1. Retrieve the name of the product as entered by the user 
  2. Retrieve the ID of the category selected from a dropdown by the user 
  3. Get the name of the product category inside the database using the product category ID retrieved 
  4. Strip spaces out of the product and category names 
  5. Construct the Search Key 
```java
    // the package name corresponds to the module's manual code folder 
    // created above
    package com.etendoerp.customer.example.ad_callouts;
     
    import javax.servlet.ServletException;
     
    import org.openbravo.utils.FormatUtilities;
    import org.openbravo.erpCommon.ad_callouts.SimpleCallout;
    import org.openbravo.base.secureApp.VariablesSecureApp;
    // classes required to retrieve product category data from the 
    // database using the DAL
    import org.openbravo.dal.service.OBDal;
    import org.openbravo.model.common.plm.ProductCategory;
     
    // the name of the class corresponds to the filename that holds it 
    // hence, modules/modules/org.openbravo.howtos/src/org/openbravo/howtos/ad_callouts/ProductConstructSearchKey.java.
    // The class must extend SimpleCallout
    public class ProductConstructSearchKey extends SimpleCallout {
     
      private static final long serialVersionUID = 1L;
     
      @Override
      protected void execute(CalloutInfo info) throws ServletException {
     
        // parse input parameters here; the names derive from the column
        // names of the table prepended by inp and stripped of all
        // underscore characters; letters following the underscore character
        // are capitalized; this way a database column named
        // M_PRODUCT_CATEGORY_ID that is shown on a tab will become
        // inpmProductCategoryId html field
        String strProductName = info.getStringParameter("inpname", null);
        String strProductCategoryId = info
                        .getStringParameter("inpmProductCategoryId", null);
     
        // inject the result into the response
        info.addResult("inpvalue", getConstructedKey(info.vars, strProductName, strProductCategoryId));
      }
     
      protected String getConstructedKey(VariablesSecureApp vars,
            String strProductName, String strProductCategoryId) {
     
        // Retrieve the product category name
        final ProductCategory productCategory = OBDal.getInstance().get(ProductCategory.class,
                strProductCategoryId);
        String strProductCategoryName = productCategory.getName();
     
        // construct full key
        String generatedSearchKey = FormatUtilities.replaceJS(strProductName
                    .replaceAll(" ", ""))
                    + "_" + strProductCategoryName.replaceAll(" ", "");
     
        // return generated key
        return generatedSearchKey;
      }
    }
``` 

#### Defining the Callout within the Application Dictionary

!!!note
    You need to have only your module as "In Development" at this stage.

Using the role _System Administrator_, navigate to `Application Dictionary` > `Setup` > `Callout`. Create a new  record as indicated by the screenshot below:

!!!warning
    The name of the callout should not have spaces or illegal javascript characters.  

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Callout-3.png)

  
Save and navigate to the _Callout Class_ tab of the same window. You will
notice that the Java Class Name was automatically generated for you,
however, not correctly since the name could not match the _Callout_ name you
have provided. Correct it in line with your callout package/class name. See
screenshot below:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Callout-4.png)

  
Now Etendo Classic knows that a callout exists and is implemented by the class you
have just specified.

!!!warning 
    Remember to perform
    ```./gradlew export.database```
    in order to persist your changes in your module.  
 
  
####  Associating the Callout with a Column

!!!note
    You need to have ONLY your template as "In Development" at this stage.

Using the role _System Administrator_ navigate to `Application Dictionary` > `Tables and Columns` > and find the _M_Product_ DB Table. This is the underlying table of the main tab of the _Product_ window.

Go to Column tab, find the _Name_ record and edit it. Find the  Callout
dropdown  that should at this point be empty. Select our
_Product_Construct_SearchKey_ callout and save the record:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Callout-6.png)

  
Do the same for the _Product Category_ record since a change in any of them
should also regenerate the Search Key.

!!! warning
    Remember to perform
    ```./gradlew export.database```

    and

    ```./gradlew export.config.script```

    in order to persist your changes in your template.  
  
  
####  Compiling the Window

Finally, for the callout to take effect, the window that uses it needs to be
recompiled and deployed to Tomcat. Do:
  ``` bash
    ./gradlew smartbuild 
  ```

!!!info
    Once the compilation has finished, restart Apache Tomcat server.  
  

####  The Result

Using the role _Group Admin_ (or your defined 'administrator' role),
navigate to the `Master Data Management` > `Product` window. Enter a new
product with Name = _Bon Fountain_ and leave the Name field. Notice
how the Search Key changes. Then, change the Product Category to something
else and see how the change is reflected inside the Search Key field.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Callout-8.png)

Last, save changes.

---

This work is a derivative of [How to Create a Callout](http://wiki.openbravo.com/wiki/How_to_create_a_Callout){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Callout that Extends from Another Callout
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Callout that Extends from Another Callout
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-callout-that-extends-from-another-callout
## Article Content: 
###  How to Create a Callout that Extends from Another Callout
  
####  Overview

This section discusses how to implement a callout that extends from another callout. The main important elements needed for the new feature are explained. More details about callouts can be found in [How to create a Callout](How_to_create_a_Callout.md).
  
####  Example Module

This section is supported by an example module which shows examples of the code shown and discussed.

The code of the example module can be downloaded from this public GitHub repository: [com.etendoerp.client.application.examples](https://github.com/etendosoftware/com.etendoerp.client.application.examples){target="_blank"}.

####  Defining Callouts

Two callouts will be shown. One of them is the parent callout and the other one is the child callout. In this example, these two callouts are working in **Assets** window.

######  Defining Parent Callout

The following example follows [this guide](How_to_create_a_Callout.md) to implement the callout. The example shows a callout that edits value of the **Name** field.

```java
  package com.etendoerp.client.application.examples.callouts;
  
  import javax.servlet.ServletException;
   
  import org.openbravo.erpCommon.ad_callouts.SimpleCallout;
   
  public class OBEXAPP_Assets_Name extends SimpleCallout {
   
    protected static final String MODIFIED_FIELD = "_UPDATED";
   
    @Override
    protected void execute(CalloutInfo info) throws ServletException {
   
      // get value of field name and update value
      final String name = info.getStringParameter("inpname");
      info.addResult("inpname", name + MODIFIED_FIELD);
   
      // Combo example. Added three currencies to currency combo.
      info.addSelect("inpcCurrencyId");
      // USD currency is selected.
      info.addSelectResult("100", "USD", true);
      info.addSelectResult("102", "EUR", false);
      info.addSelectResult("103", "DEM", false);
      info.endSelect();
    }
   
  }
```

As you can see, the callout gets the value of **Name** field and concatenates the following string: `_UPDATED`. Besides you can see a code that defines a combo. This code will be explained in the following section.

######  Defining Child Callout

This example callout extends from the parent callout that is defined above. Combo example is explained in next section.

```java
  package com.etendoerp.client.application.examples.callouts;
  
  import javax.servlet.ServletException;
   
  public class OBEXAPP_Assets_Desc extends OBEXAPP_Assets_Name {
   
    @Override
    protected void execute(CalloutInfo info) throws ServletException {
   
      // OBEXAPP_Assets_Name callout is executed
      super.execute(info);
   
      // Combo example. Removed USD currency from combo and select DEM currency.
      info.addSelect("inpcCurrencyId");
      info.removeSelectResult("100");
      info.addSelectResult("103", "DEM", true);
      info.endSelect();
   
      // Checks if name field has been updated by parent callout.
      String name = info.getStringParameter("inpname");
      String message = "Feature 'Extends a Callout' works as expected.";
      if (name.endsWith(MODIFIED_FIELD)) {
        info.addResult("inpdescription", message);
        info.addResult("MESSAGE", message);
      } else {
        message = "Feature 'Extends a Callout' not works as expected.";
        info.addResult("inpdescription", message);
        info.addResult("ERROR", message);
      }
   
      // Now it is possible to update the 'name' field again and the value will be overwritten
      info.addResult("inpname", "UPDATED...");
    }
  }
```

First of all, `OBEXAPP_Assets_Desc` callout extends from `OBEXAPP_Assets_Name`. In this situation, you should take into account the following sections in this callout:

  * Run parent callout. 
  
  ```java
      // OBEXAPP_Assets_Name callout is executed
      super.execute(info);
  ```

  * Operations for **combo** field are executed. This code is explained in the next section. 
  
  ```java
      // Combo example. Removed USD currency from combo and select DEM currency.
      info.addSelect("inpcCurrencyId");
      info.removeSelectResult("100");
      info.addSelectResult("103", "DEM", true);
      info.endSelect();
  ```
  
  * Operations **after** parent callout is executed. In this case, child callout checks if name is been modified by parent callout. Then, child callout takes two actions. Update the description field with a message and shows an information or failure message. Finally, the name field is updated again. 

  ```java
      // Checks if name field has been updated by parent callout.
      String name = info.getStringParameter("inpname");
      String message = "Feature 'Extends a Callout' works as expected.";
      if (name.endsWith(MODIFIED_FIELD)) {
        info.addResult("inpdescription", message);
        info.addResult("MESSAGE", message);
      } else {
        message = "Feature 'Extends a Callout' not works as expected.";
        info.addResult("inpdescription", message);
        info.addResult("ERROR", message);
      } 
        
      // Now it is possible to update the 'name' field again and the value will be overwritten
      info.addResult("inpname", "UPDATED...");
  ```

In the following screenshot, you can see how a failure message is displayed.

!!!note
    For the purpose of this example, a new column named 'EM_Obexapp_Callout' was created to trigger the callout.  

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_callout_that_extends_from_another_callout-1.png)

####  Working with Combos

As you can see in above sections, the `OBEXAPP_Assets_Name` callout builds a currency combo. This combo is populated with 3 currencies and one of them is selected.
  ```java
      // Combo example. Added three currencies to currency combo.
      info.addSelect("inpcCurrencyId");
      // USD currency is selected.
      info.addSelectResult("100", "USD", true);
      info.addSelectResult("102", "EUR", false);
      info.addSelectResult("103", "DEM", false);
      info.endSelect();
  ```

You can see the currency combo with 3 currencies and **USD** as selected currency.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_callout_that_extends_from_another_callout-2.png)

  
Then, child callout `OBEXAPP_Assets_Desc` removes a currency and select another one. This child callout extends `OBEXAPP_Assets_Name` and change the currency combo.
  ```java
      // Combo example. Removed USD currency from combo and select DEM currency.
      info.addSelect("inpcCurrencyId");
      info.removeSelectResult("100");
      info.addSelectResult("103", "DEM", true);
      info.endSelect();
  ```
In this screenshot, you can see how currency combo is displayed when child callout is executed.

!!!note
    The DEM currency is selected and USD currency has been removed.    
  
![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_callout_that_extends_from_another_callout-3.png)

####  Using getStringParameter method

This method is used in callouts to get values of any field of the window (e.g. value of name field in Assets window).

Now, with the inclusion of this project this method takes into account if a parent callout modified a value. If a value was modified,
`getStringParameter()` method returns value modified by parent callout. If not, `getStringParameter()` method returns the initial value of the parameter. 

---

This work is a derivative of [How to Create a Callout that Extends from Another Callout](http://wiki.openbravo.com/wiki/How_to_create_a_callout_that_extends_from_another_callout){target="blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Chart of Accounts Module
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Chart of Accounts Module
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-chart-of-accounts-module
## Article Content: 
### How to Create a Chart of Accounts Module

#### Overview

The chart of accounts (also called account tree) is a list of the accounts available to post entries which can be structured in a way to get meaningful financial reports such as Balance Sheet and P&L.

In some countries, it is required to have a specific chart of accounts to be used in the statutory books; in some other countries this legal requirement does not exist and a “sample” chart of accounts should be enough. Finally it should also be possible for a country to have more than one official chart of accounts, depending for example on the organization's size or main activity.

!!!important
    A Chart of Accounts Module for Etendo can only contain one chart of accounts. So, if you are working in a localization project for a country where several chart of accounts can be used, you must create independent modules including each chart of accounts CSV file. It will be up to the user to install and apply the chart of accounts module that fits particular needs.

#### Creating the CSV file

The first step for creating a chart of accounts module is to write the CSV file with the list of accounts we want to include. All the information can be found in [How to Create Accounts Files](how-to-create-accounts-files.md).

#### Testing the CSV file

Before creating the Chart of Accounts module, we should first check that the CSV file has no structural or logical errors. This can be easily done in two steps:

1. The first one is using a testing spreadsheet provided by Etendo that will detect any structural error, like missing search keys, wrong values in Element Level, Parent_Value or Show Value Condition columns, etc.

2. The second check can be directly executed through the ERP. It just consists on importing our CSV file when running the Initial Client Setup process.
Finally, there is also recommended to create some accounting entries for every transactional document and ensure the accounting report information is OK.

#### Creating the Chart of Accounts module

The remaining step is clearly the easiest one, which is just including the CSV file into our Chart of Accounts module.

A Chart of Accounts module is like any other module, but it has just the following considerations:

- The CSV file must be included into the `referencedata/accounts/` directory of our module.

- The file must be renamed to `COA.csv`. So the directory structure for our module should look like:

```
 <module java package name>
   ├── referencedata 
   │   └── accounts 
   │       └── COA.csv 
   └── src-db 
       └──  database 
           └── sourcedata 
             ├── AD_DATASET.xml 
             ├── AD_MENU.xml 
             ├── AD_MODULE_DBPREFIX.xml 
             ├── AD_MODULE_DEPENDENCY.xml 
             ├── AD_MODULE.xml 
             ├── AD_PACKAGE.xml 
             ├── AD_PROCESS_PARA.xml 
             ├── AD_PROCESS.xml 
             └── AD_TREENODE.xml            
```

- When defining the module inside the Application Dictionary, the only important considerations we must have are:

    - Set the module type to *Module*

    - Set the *Has Chart of Account* checkbox

    - Remember to add the *dependency to Core*

##### Publishing the Chart of Accounts Module

The way to package a chart of accounts module is similar to the [how to publish modules to github repository](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-publish-modules-to-github-repository.md) process.

The summarized process is:

- Create the module's definition in the Application Dictionary. You should follow the [Naming guidelines for modules](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/naming-guidelines-for-modules.md). Remember to register the module in case you want to publish it in the Forge.

- Set the *Has Chart of Account* checkbox and add a *dependency to Core*.

- Export the database to create the file structure

``` gradle title="Terminal"
  ./gradlew export.database
```

- Save the `COA.csv` file inside the module's `referencedata/accounts/` directory. You should manually create this directory structure if necessary.

- Publish the chart of accounts module

``` gradle title="Terminal"
  ./gradlew publishVersion -Ppkg=<module javapackage>
```
#### Translating a Chart of Accounts

In some countries it can be useful to have the same chart of accounts translated into several languages. Unfortunatelly Etendo does not support yet the translation of chart of accounts.

If you are in this situation, you have two possible workarounds:

- Create several chart of accounts modules for different languages. The structure of the chart of accounts file will be exactly the same, just changing the account names and descriptions for each language. This solution is perfect for companies that want to work in just one language, although there are several official languages in the country. In this case the administrator must decide at the beginning of the ERP implementation, the language to use for the chart of accounts and he will not be able to change it in the future.

- The other possibility is to create just one chart of accounts module and, once applied in an instance, manually translate the elements value inside the Account Tree window. The drawback of this method is that the translation can't be distributed to other instances and the process of translating must be repeated manually, or by the implementation of a script that automatically translates the elements based on the Element Value search key.

---

This work is a derivative of [How to create a chart of accounts module](https://wiki.openbravo.com/wiki/How_to_create_a_Chart_of_Accounts_Module){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Clone Hook
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Clone Hook
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-clone-hook
## Article Content: 
#### Introduction

Etendo allows for any window or tab to have a Clone button. By default, it will use the Dal.copy() method, but this can be overridden using hooks, to implement custom Cloning logic for specific entities.

![](https://docs.etendo.software/latest/assets/drive/0MigjYdnUWzz7TltzquaKnHZBJkr6dhSt8o-c6WbrEYVqHL8R8SNC3lvoTFs-_XOI1qhnCopBhqqzL1THLQ61n4sYhGsRGyT-BtGPes-kykNZO79OUtW55PAmcjxNOA-i9gEK2uaDivHwfJTUdYykeDqL5-qk0UzbVmuGJIpaVufYYmX02sjk3fr.png)

#### How to create a Clone Hook?

To create a Clone Hook, you only have to follow a few steps:

1. Create a Java Class of type CloneRecordHook
2. Use the @Qualifier annotation to define which entity this class will clone
3. Override the required methods and implement their logic according to your needs
4. Enable the clone button inside the tab associated with the Entity used in the hook ExampleCloningHook.java

```java
@ApplicationScoped

@Qualifier(Invoice.ENTITY_NAME)

public class ExampleCloningHook extends CloneRecordHook {

  @Override
  public boolean shouldCopyChildren(boolean uiCopyChildren) {
    //Implementation
  }

  @Override
  public BaseOBObject preCopy(BaseOBObject originalRecord) {
  	//Implementation
  }

  @Override
  public BaseOBObject postCopy(BaseOBObject originalRecord, BaseOBObject newRecord) {
    //Implementation
  }
}

```

#### Clone Hook API

To create a Clone Hook, you only have to follow a few steps:

1. ### `boolean shouldCopyChildren(boolean uiCopyChildren)`

    This method will return a boolean indicating if the Hook will use the DalUtil.copy() to copy the children entities.
    For example, cloning an Invoice and its children will mean that Lines, Taxes, etc. are also cloned into the new document.

2. ### `BaseOBObject preCopy(BaseOBObject originalRecord)`

    This method must return the original object, which is the parameter received.
    Here you can make special validations or extra logic involving the original record, before it is cloned.

3. ### `BaseOBObject postCopy(BaseOBObject originalRecord, BaseOBObject newRecord)`

    Here you have access to the newly created record, a result of the DalUtil.copy().
    This method is where you should implement special logic after the record is cloned.
    For example, if the method shouldCopyChildren returns false, then here you would copy the children with all special considerations needed.

4. ### `BaseOBObject copy(BaseOBObject bob, boolean copyChildren)`

    Optional: Only override this method when the existing functionality is not enough, here you must implement the cloning functionality manually and call postCopy()on your own.

5. ### `boolean shouldResetId()`

    Override this method when you don’t want the DalUtil.copy()to reset the copied objects IDs. Refer to the DalUtil.copy() documentation for more information. This method returns true by default.

6. ### `int getPriority()`

    Override this method when there is an existing hook for your selected Entity (for example, there is a cloning process already implemented for Invoices and Orders), and you want your own hook to be used instead.
    The hook with the lowest priority per Entity will be selected and executed. It returns 100 by default.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Computed Column
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Computed Column
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-computed-column
## Article Content: 
### How to Create a Computed Column

#### Overview

A computed column is a column of a table which is computed using an _SQL_ expression and which does not exist explicitly in the database schema.

Computed columns have these characteristics:

  * Computed when a record is read from the database.
  * Not persisted, there is no real column in the database schema for a computed column.
  * Is computed using an SQL expression which can use columns from the application dictionary table definition in which the column is defined.
  * Can be used in the definition of a field (in the same way as a 'normal' column), it is sortable and filterable but not editable.

#### Example Module

This section is supported by an example module which shows examples of the code shown and discussed.

The code of the example module can be downloaded from this repository: [com.etendoerp.client.application.examples](https://github.com/etendosoftware/com.etendoerp.client.application.examples)

!!!Note
    The example module also contains implementations of other guides.

#### Defining a Computed Column

Defining a computed column is simple.

1. Go to the **Tables and Columns** window.
2. Go to the table in which you want to add the computed column.
3. Then, in the column child tab, create a new column and set the sqllogic field.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Computed_Column-1.png)


The sqlLogic field must be an SQL expression:

  * If it is a select sql expression, then all the tables in the from clause need to use an alias.
  * You can refer to other columns of the table using their non-aliased name.

This is an example of the total line quantity column shown above:

```hql
(SELECT sum(ol.qtyOrdered) FROM c_orderline ol WHERE ol.c_order_id=c_order_id)
```

What you can see is that the from clause uses an aliased table, the `c_order_id` at the end is the non-aliased column of the main table.

!!!Note
    * A computed column can be used in the definition of a field for an Etendo column, just like every other column.
    * A computed column that uses a _String reference_ should have a length greater than zero. Because this is the number of characters which are going to be displayed in form view.
    * The field is always read-only, it is recomputed/set automatically when updating or inserting a record.
    * Filtering and sorting on computed columns/fields is possible.

#### Use case: show totals on a header

In the 'Defining a computed column' section an example sql expression was shown. The above example computes the sum of the quantities of a line. You can add a computed column as a field to a tab/window:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Computed_Column-2.png)

and display it in the grid:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Computed_Column-3.png)

or the form:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Computed_Column-4.png)

#### Performance Implications

##### Filtering and Sorting

When computed columns are used to filter or sort the grid, their value needs to be computed for all existing rows before any pagination limit can be applied, this can have a very important impact in terms of performance.

In general, when defining computed columns, they should be made not filterable nor sortable. The only exception to this rule is when it is guaranteed the number of records in the table they are created for is going to be always reduced or it will always be displayed as a subtab, where the number of rows per parent record cannot be big.

##### Lazy Evaluation

Computed columns are lazily evaluated. This means their query is not executed when the entity they are defined in is retrieved but when one of them is accessed.

For example, **Delivery Status** is a computed column of **Order** entity:

```java
// load one order
OBCriteria<Order> qOrder = OBDal.getInstance().createCriteria(Order.class);
qOrder.setMaxResults(1);
Order order = qOrder.list().get(0);
```

The code above loads an order, at this stage **Delivery Status** is not already computed meaning the SQL has not been executed in database.

If afterwards we have this code:

```java
// load computed columns
System.out.println(order.getDeliveryStatus());
``` 

is at this point when the computed column query is executed in database and **Delivery Status** property takes value.

!!!Note
    In case there are many computed columns in the same entity, they are evaluated all together when the first one is calculated.

###### Limitations

In order to make computed columns lazy, they are mapped in their entity as a `many-to-one` property (named `computedColumns`) linked to a virtual entity, is this virtual entity where the actual computed columns are located as hibernate formula properties.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to- guides/How_to_create_a_Computed_Column-6.png)

This extra complexity is transparent when working with generated _DAL_ Java classes, as seen before, `order.getDeliveryStatus()` populates the value of the computed column, though behind the scenes it is retrieving it from the virtual entity.

But this model imposes also some limitations to be taken into account when manipulating computed columns in filters or sorting.

!!!Note
    When using computed columns in HQL to do filtering or sorting, they are evaluated. This needs to be done carefully (or even avoided if possible) because it might have performance implications.

When working with HQL (i.e. `OBQuery`), computed columns cannot be directly accessed as they are not properties of the entity.

---
This work is a derivative of [How to Create a Computed Column](http://wiki.openbravo.com/wiki/How_to_create_a_Computed_Column){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Dataset
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Dataset
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-dataset
## Article Content: 
### How to Create a Dataset
  
####  Overview

This how-to will focus on creating a dataset in Etendo Classic and also will give some examples in detail under Examples section. Dataset will export both reference data as well as default data.

#####  Introduction to Dataset Concept

First of all we need to understand the dataset concept, which allows to export
the sets of data from different tables in one step. This is especially useful
to manage and distribute the module along with _reference data_ , for instance
tax rates, regions or _default data_ in a new table(s) added by a module.

A dataset is defined by its Dataset Tables and Dataset Columns. This detailed
configuration leads to which tables to be exported, and which columns of each
table are executed and exported.

There are some important things to note:

  * A Dataset belongs to a module, so modules can add Datasets and define their own Datasets. 
  * Data Access Level: filters the tables which can be selected for this dataset, only tables with the set data access level can be included in the data set.   
  
#####  Reference Data

The reference data is published, distributed and installed together with the
program code implementation of the module.

In Etendo, the concept of reference data is generalized and any data
in the instance can be exported in a module and imported when installing /
applying the module.

!!!note
    You can find the _Has reference data_ field / option at the time of module
    creation.

!!!info
    For detailed theoretical concepts on datasets please have a look at [Datasets](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/Datasets.md). 
 
####  Data structure to define Dataset

There are mainly three tables referred to as data structure to define datasets. They
are:

1. 
    * DataSet with the following columns: _Value, Name, Description, Module
and DataAccessLevel_
    * Data sets have a name and a description to describe the content of the data set. 
    * The value is used to get a dataSet object from the factory provided by DAL (eg. DBSourceManager gets the AD dataSet). 
    * A data set is owned by a module in the same way that all Application Dictionary components. 

    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Dataset-2.png)

    !!!note
    If the export allowed column is flagged, then an **Export Reference Data** button is displayed. 
    

2. 
    * DataSet_Table* with the following columns: _DataSet, Table, fullBusinessObject, includeAllColumns, excludeAuditInfo and whereClause (HQLexpression)_
    * A data set can have one or many tables from the ones registered in the `AD_Table`. For each of them developers can decide to include only records in that table or export the full business object using the check `fullBusinessObject`. 
    * Developers can also define for each table the columns that are included in the dataset. They can include all columns using the `includeAllColumns` check and then remove some of them in the column definition or only include the ones that are explicitly defined in the column definition. 
    * The whereClause is a *HQL expression* to filter the rows that are included in the DataSet. Details on this expression will be provided in the DAL project. 
    * Developers can exclude the audit information column like _created, createdby, updated, etc._ by checking the `excludeAuditInfo` column. 

    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how_to_create_a_Dataset-3.png)  
    
    !!!note 
        If IsBusinessObject field is flagged then the ` child-records ` of the table are exported.
        For example if the Dataset Table is defined for the ` C_Order ` table and this field is flagged then also the related ` C_OrderLines ` are exported. 
  
    !!!info
        A full business object is a record including all its one-to-many relationships
        as defined in the AD through the isParent attribute of a column. An example of
        a full business object is a product with its vendors, prices, etc. A complete
        description of business objects is provided in the DAL project.

3. 
    * Dataset_column* with the following columns: *DataSet_Table, Column, isExcluded and conditionClause(Java expression).
    * For each table in a data set, developers can decide what columns to include from the ones registered in the AD for that table. 
    * They can exclude columns using the `isExcluded` check if they have marked the table as _Include all columns_ . Typically audit info will be removed from the dataset. 

    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Dataset-4.png)   

#####  Data Access Level

The Data Access Level is used to define how to import / install the module at
various levels, like System level, Client level, Organization level, etc. This
access level value is available at `Dataset` table. 

This is a detailed explanation at each access level.

  * _System Only:_ data will be imported at module installation time at System level without any user interaction. 
  * _Client:_ data will be imported at `Initial Client Setup` if the user chooses the module where the DataSet is included. 
  * _Organization:_ data will be imported at `Initial Organization Setup` if the user chooses the module where the DataSet is included. 
  * _Client/Organization:_ data will be imported at `Initial Client Setup` or `Initial Organization Setup` if the user chooses the module where the DataSet is included. The module can not be applied at both levels at the same time because it would lead to data redundancy. So if the module is applied to a Client it will not be available to apply in its Organizations and if the module is applied in an Organization it will not be available to apply in its Client. 
    
!!!info
    - The relationship between each entry data imported, the DataSet where it came 
    from, and the original ID it has in the DataSet's XML can be found in 
    the `AD_Ref_Data_Loaded` table.
    - Data from a DataSet being imported for the first time will be created 
    **with the ID set in its XML file**. A new ID will be created 
    for each entry from then on.
    - The `AD_Orginfo` table has information on which DataSet has ben imported 
    for which client and/or organization


####  Exporting Module

Before publishing, we need to export the module which creates a directory in the
module under Etendo Classic root directory and the appropriate XML files for
inclusion in the finished module. 

!!!note
    Modules that are not flagged as being in development are not exported, so remember that you must select the InDevelopment checkbox when you define a new module.

When the development of the module is finished, open a command window/shell
and navigate to the Etendo development project, execute the `export.database` command.

    
```bash title="Terminal"   
./gradlew export.database
```  

####  Publishing a Module

The last step in the process is to publish the module and distribute across to
the end user.

!!!info
    For a detailed guide on how to do so, visit [How to Publish Modules to a GitHub Repository](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-publish-modules-to-github-repository.md)


####  Examples

Please find below the examples to know how to create a dataset and to export
it along with the reference data.

#####  Dataset of roles and accesses

In this section you can find the example of a dataset of roles and access. It
basically covers the definition of the role in the organization and the
privileges they require.

**Create a Role and Assign Privileges**

  * Change to the admin role of your client. 
  * Click on `General Setup` and Navigate to `Security` > `Role`. 
  * Create a new record. Fill up the mandatory fields that required for this record. They are: 
    * `Name`: the name of the role in the customer organization e.i., Sales Clerk, Production Manager, Forecaster, etc. 
    * `Active`: Select Option to ensure this role appears in the generated application. During development you may require the role only to appear when it is complete. 
    * `User Level`: This controls which organizations the role has access to. There are four options, the most common are: 
        - `Organization`: the role only has access to organization specific data. 
        - `Client and Organization`: the role has access to organization specific data and client shared data. 
    * `Manual`: The controls if all existing privileges are automatically given to the role or if they are manually associated on a peer need basis. Selecting this option for manual control is recommended. 
  * Save the record. 
  * Now you need to assign some privileges by clicking on `Grant Access` button. 
  * select the module and access type to assign the privileges to the newly created role. 

###### Create a User and assign the user to the Role

  * Click on `General Setup` and navigate to `Security` > `User`. 
  * Create a new record. The `Client` field will show the name of your client by default. 
  * Select the Organization (This can be for access to one or all organizations in a client). 
    - First Name. 
    - Last Name. 
    - Name (Default). 
    - Select Active (Default). 
    - Username (The default is a concatenation of first and last name). 
    - Enter the user Password (Remember this). 
  * Save the record. 

  * Focus in the `User` window again
  * Select the `User Roles` tab. 
  * Create a new record and select a role. 
  * Save the record. 
  * Add all roles this new user will be able to have/use (one line for each role). 
  * Logout from the current role. 

###### Create a new module

  * Log into Etendo ERP as a System Administrator. 
  * Click on `Module` menu from the Application Dictionary. 
  * From the `Module Type` list, select Module. 
  * In the `Name` field, type the java package name of the module(proper naming convention). 
  * Complete the `Description` and `Help` fields. Supply the information about chart of accounts. 
  * Select the `Has reference data` option. 
  * Clear the `Has chart of accounts`, `Translation required` and `Is translation module` options. 
  * Select the In development option. Remember that you cannot work on a module unless the `In development` option is selected. 
  * On the `Dependencies` tab, select Core. 
  * Save the module 

###### Create a Dataset of roles and access

  1. From the Application menu, select `Application Dictionary` > `Dataset` 
  2. Click New. 
  3. From the `Module` list, select the module above created. 
  4. Specify a search key, name and description. 
  5. From the `Data Access Level` list, select the Data access level as *Organization*. 
  6. Select the `Export allowed` option. 
  7. Select the `Table` Tab.
  8. From the `Table` list, select the table whose content you want to include in the module. For example, ad_role_org_access, ad_role, ad_user_roles. 
  9. In the SQL where clause field, specify the SQL "WHERE" statement that will identify the set of rows to be exported, in DAL notation. For example, adrole.id='2EA831D59184490E9BA858E9745EF89F' 
  10. Select the `Include All Columns` option. 
  11. Select `isBusinessObject` option.
  12. Click Save. 
  13. Click the `Export Reference Data` button to export the reference data to an .xml file that you can include in the module. 

###### Exporting and Publishing Module

After completing all the steps successfully. Run the below gradle task to export the module:

    ./gradlew export.database
    

And publish the module.

!!!info
    For more information, see [How to Publish Modules to a GitHub Repository](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-publish-modules-to-github-repository.md).

  
###### How to Install - Organization Access Level Reference Data

  * Install the module following the [Install Modules in Etendo](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/install-modules-in-etendo.md) guide.
  * At this point the reference data will not be installed. 
  * Log into the ERP as admin.
  * Click on `General Setup` and navigate to `Enterprise` > `Enterprise module Management`. 
  * Select the `Organization type` then select the appropriate module and click Ok to install the reference data. 

#####  Dataset of taxes or alerts

In this section you can find the example on dataset of taxes or alerts. The
process for creating a standard reference data module for taxes and alerts,
you have set up Etendo ERP in a particular way to meet local requirements,
you can export this data and convert it to a module, so that you can share it
with other users.

###### Registering a data module for taxes and alerts:

  * Log into Etendo ERP as a System Administrator. 
  * Click on `Module` menu from the Application Dictionary. 
  * From the `Module Type` list, select Module. 
  * In the `Name` field, type the java package name of the module(proper naming convention). 
  * Complete the `Description` and `Help` fields. Supply the information about chart of accounts. 
  * Select the `Has reference data` option. 
  * Clear the `Has chart of accounts`, `Translation required` and `Is translation module` options. 
  * Select the `In development` option. Remember that you cannot work on a module unless the `In development` option is selected. 
  * On the `Dependencies` tab, select Core. 
  * Save the module.

###### Defining and exporting the dataset

  1. From the Application menu, select `Application Dictionary` > `Dataset` 
  2. Click New. 
  3. From the `Module` list, select the module above created. 
  4. Specify a `search key`, `name` and `description`. 
  5. From the `Data Access Level` list, select the Data access level as System only. 
  6. Select the `Export allowed` option. 
  7. Select the `Table` Tab.
  8. From the `Table` list, select the table whose content you want to include in the module. 
  9. In the `SQL where clause` field, specify the SQL WHERE statement that will identify the set of rows to be exported, in DAL notation. For example, client.id='1000001' 
  10. To export all columns, select the `Include All Columns` option. To include only the columns you specify, select the `Columns` tab and create a new record for each column you want to export. 
  11. To include the security audit columns (created, createdby, updated and updatedby) in the export, clear the `Exclude Audit Info` checkbox. 
  12. Clear the `Is Business Object` option. 
  13. Click Save.
  14. Click the `Export Reference Data` button to export the reference data to an .xml file that you can include in the module.

  
###### Exporting and Publishing Module

After completing all the steps successfully. Run the below gradle task to export
the module:
    
    ./gradlew export.database
    

And publish the module. 

!!!info
    For more information, see [How to Publish Modules to a GitHub Repository](how-to-publish-modules-to-github-repository.md).


  
###### How to Install - System/Client Access Level Reference Data

  * Install the module following the [Install Modules in Etendo](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/install-modules-in-etendo.md) guide.
  * At this point the reference data will not be installed. 
  * Log into the ERP as admin.
  * Click on `General Setup` and navigate to `Client` > `Initial Client Setup`.
  * Fill up all the mandatory fields and then select the appropriate module. 
  * Finally click Ok to install the reference data. 

#####  Dataset of regions

In this section you can export the reference data with the examples on
regions. Find below the steps to create the Dataset for this module:

  * Log into Etendo ERP as a System Administrator. 
  * Create a new module called _Indian States_ for this example. 
  * Make sure that you have selected or flagged for the field `Has Reference Data`. 
  * Now expand the `Application Dictionary` menu. 
  * Click on `Dataset` menu and create a new record for the for this module. 
  * For example, here the Name `Indian States` has been given. You can give a name as you wish to select the region. 
  * Fill up the Dataset form using the below mentioned values. 
    
    Field              |  value for the field   
    ---                |          ---  
    Active             |  make it flagged/put a tick mark  
    Module             |  select the value from the drop down _Indian States - 1.0.0_  
    Search Key         |  Indian States  
    Name               |  Indian States  
    Data Access Level  |  System Only  

  * Before assigning the tables to Dataset. Please execute the below query in sqldeveloper or postgres IDE to find the `C_country_Id` for INDIA. After executing the below query the result of `c_country_id` would be 208 for the below query. 

    ```sql
    select * from c_country where countrycode like 'IN%';
    ```

  * Navigate to `Table` Tab and create 2 new records for the dataset. 
  * Fill up the form by using the values below for the following Table: `C_Country`

    Field                |  value for the field   
    ---                  |          ---   
    Table                |  `C_Country`  
    Active               |  Default it is flagged. Leave as it is  
    Module               |  Indian States - 1.0.0  
    SQL Where Clause     |  id='208'  
    Include All Columns  |  Remove the flag or tick mark (Individual columns will be added in later steps)
    Exclude Audit Info   |  Mark it as flagged or put tick mark for this check box  

  * Fill up the form by using the values below for the following Table: `C_Region`

    Field                |  value for the field   
    ---                  |          ---  
    Table                |  `C_Region`  
    Active               |  Default it is flagged. Leave as it is  
    Module               |  Indian States - 1.0.0  
    SQL Where Clause     |  country.id='208'  
    Include All Columns  |  Mark it as flagged or put tick mark for this check box  
    Exclude Audit Info   |  Mark it as flagged or put tick mark for this check box  

  * Select the `C_Country` table from the table grid view and navigate to `Column` Tab. 
  * Click on create a new record button for the above table. You need to select three columns for this table. 
  * Those columns are:
      - Name
      - CountryCode
      - HasRegion 
  * Fill up the following values in the form. 

    Field   |  value for the field   
    ---     |          ---  
    **Column 1:**   
    Column  |  Name  
    Active  |  It has benn flagged. Leave as it is  
    Module  |  Indian States - 1.0.0  
    **Column 2:**  
    Column  |  CountryCode  
    Active  |  It has benn flagged. Leave as it is  
    Module  |  Indian States - 1.0.0  
    **Column 3:**  
    Column  |  HasRegion  
    Active  |  It has benn flagged. Leave as it is  
    Module  |  Indian States - 1.0.0  

  * Finally navigate to `Dataset Tab` of Indian States and Click on `Export Reference Data` button to export the data. 

  
###### Exporting and Publishing Module

After completing all the steps successfully, run the below gradle task to export
the module:
    
    ./gradlew export.database
    

And publish the module.

!!!info
    For more information, see [How to Publish Modules to a GitHub Repository](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-publish-modules-to-github-repository.md). 
  
###### How to Install - System Only Access Level Reference Data

  * Install the module following the [Install Modules in Etendo](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/install-modules-in-etendo.md) guide.
  * It will install along with the reference data. 


This work is a derivative of [How to Create a Dataset](http://wiki.openbravo.com/wiki/How_to_create_a_Dataset){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.


==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Page in Etendo Documentation
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Page in Etendo Documentation
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-page-in-etendo-documentation
## Article Content: 
### How to Create a Page in Etendo Documentation

#### Overview
This guide contains basic rules, tips, and suggestions for people intending to develop documentation for Etendo. When different documents use the same guidelines, they are more user friendly, consistent and more simple to combine and reuse. We therefore strongly encourage all contributors to follow these guidelines for the benefit of the readers.


#### Requirements
- Python version ^3.10. To install it, follow [the Python installation guide](https://www.python.org/downloads/){target="\_blank"}.


#### Steps

1. Clone the [docs](https://github.com/etendosoftware/docs){target="\_blank"} repository 
	
    ```bash title="Terminal" 
    git clone git@github.com:etendosoftware/docs.git
    ```

2. Install dependencies

    ```bash title="Terminal" 
    python3 -m venv venv
    source venv/bin/activate
    pip install mkdocs-material
    pip install pillow cairosvg
    pip install mkdocs-glightbox
    pip install mike
    pip install mkdocs-rss-plugin
    ```

3. Create a new branch with [GitFlow](https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow){target="\_blank"}, where the related pages, assets and configurations are stored.

    ```bash title="Terminal" 
	# This command should be executed only the first time after cloning the repository.
	git flow init 
    ```

    ```bash title="Terminal" 
    git flow feature start <task key>
    ```

4. To run the Etendo documentation locally, execute:

    ```bash title="Terminal"
    source venv/bin/activate
    mkdocs serve
    ```

5. Etendo documentation is structured in sections, in general the sections where most of the documentation is found are user guide and developer guide, within these there are subsections according to products and categories, you must decide the location within the structure and create a file with the `.md` format, the name must be in lowercase separated by hyphens. 

    ``` title="Documentation Structure" 
    └── docs
    ├── developer-guide 
    │   └── etendo-classic
    │       └── how-to-guides
    │           ├── new-page.md
    │           ├── ..
    │           ├── ..
    │           └── ..
    ├── user-guide
    │   └── basic-feature
    ```

    In order to display the page in the menu, add this page in the `mkdocs.yml` file in the **nav** section.
    
    !!!important
        - When adding pages to the navigation structure, remember to organize them in alphabetical order.
        - The directory and navigation structure must be the same.

    Example

    ``` title="mkdocs.yml"
    nav: 
    - Home : index.md
    - User Guide:
        ...
        - How-To:
            ...
            - New Page: developer-guide/etendo-classic/how-to-guides/new-page.md
            ...
    - Developer Guide
    ...
    ```

    The documentation should be worked on following the [page format](#page-format) described in the next section.

    Once the documentation is finished:


6. Create a PR to `develop` with all the related changes.
7. Once all the comments are resolved, and you have two approved, merge the PR.
8. A new version of the documentation will be automatically deployed in [https://docs.etendo.software](https://docs.etendo.software){target="\_blank"}.

#### Page format

##### Page structure

```
---
tags: 
  - Tag example 1
  - Tag example 2
---
 
### Title
  
#### Overview


(General description of the section)


#### Title 1


##### Subtitle
```
!!!note
    If the page was extracted from OB wiki, for copyright reasons, add the following footer editing the title and the link of the original page:
    ```
    ---
    
    This work is a derivative of [Datasets](http://wiki.openbravo.com/wiki/Datasets){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
    ```

##### Useful References

###### Bold

Use sparingly for emphasis, or to highlight option names, for example:
From the **Sales order** window, select **New**

```
**Bold**
```

This is shown as: **Bold**

###### Italics 

Use it when quoting a piece of a text from another source, a piece of text in another language or to give an example, such as sample text to be typed in a text field.

```
*Italic*
```

This is shown as: *Italic*

###### Backticks

Use them to refer to paths, inline code and for menu navigation. For example:

- Path:
    ```
    `/directory/filename.txt`
    ```
    This is shown as: `/directory/filename.txt`
- Inline Code:
    ```
    `./gradlew update.database --info`
    ```
    This is shown as: `./gradlew update.database --info`

- Menu navigation:
    ```
    `Document`>`New`>`Template`
    ```              
    This is shown as: `Document`>`New`>`Template`

###### Admonitions

Admonitions are used to include extra content without interrupting the flow of the page. As shown below, there are different types: 

```
!!!note
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod
    nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor
    massa, nec semper lorem quam in massa.

!!!success
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod
    nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor
    massa, nec semper lorem quam in massa.

!!!warning
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod
    nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor
    massa, nec semper lorem quam in massa.

!!!error
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod
    nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor
    massa, nec semper lorem quam in massa.
```
This is shown as:

!!!note
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod
    nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor
    massa, nec semper lorem quam in massa.

!!!success
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod
    nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor
    massa, nec semper lorem quam in massa.

!!!warning
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod
    nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor
    massa, nec semper lorem quam in massa.

!!!failure
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod
    nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor
    massa, nec semper lorem quam in massa.

It is also possible to edit the title of the blockquote by adding:

```
!!!failure "Edited title example"
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod
    nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor
    massa, nec semper lorem quam in massa.
```
This is shown as:

!!!failure "Edited title example"
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod
    nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor
    massa, nec semper lorem quam in massa.

For more information, visit [Admonitions](https://squidfunk.github.io/mkdocs-material/reference/admonitions/){target="\_blank"}.

###### Content Tabs

When documenting a feature with different options (JAR or Source, Windows or Linux, C or C++ for example), use the following tabs to include information relevant for each option. Readers can then choose the corresponding tab with the necessary information and skip reading non-relevant information.

```bash title="Content Tabs"
=== "C"

    ``` c
    #include <stdio.h>

    int main(void) {
      printf("Hello world!\n");
      return 0;
    }
    ```

=== "C++"

    ``` c++
    #include <iostream>

    int main(void) {
      std::cout << "Hello world!" << std::endl;
      return 0;
    }
    ```
```
This is shown as:

=== "C"

    ``` c
    #include <stdio.h>

    int main(void) {
      printf("Hello world!\n");
      return 0;
    }
    ```

=== "C++"

    ``` c++
    #include <iostream>

    int main(void) {
      std::cout << "Hello world!" << std::endl;
      return 0;
    }
    ```

###### Directory Structure

In order to the directory structure, it is necessary to apply the following format:

```
modules
└── org.openbravo.localization.spain.referencedata.taxes
    └── referencedata 
        └── standard
            ├── Impuestos_ES.xml
            └── Spanish_Tax_Alerts.xml
```


###### External Links

To include external links in the documentation, use the following path format: 

```
[Google Example](https://google.com){target="_blank"}
```

This is shown as: [Google Example](https://google.com){target="_blank"} 

###### Internal links (Redirection)

To include internal links, use the relative paths from the current page such as the following example:

```
[Internal Link](https://docs.etendo.software/latest/how-to-guides/example-page.md)
```

This is shown as: [Internal Link](https://docs.etendo.software/latest/how-to-guides/example-page.md)

It is also possible to refer to a specific section inside a page using

```
[Specific section](https://docs.etendo.software/latest/how-to-guides/example-page.md#specific-section)
```

This is shown as: [Specific section](https://docs.etendo.software/latest/how-to-guides/example-page.md#specific-section)

###### Lists

To include lists in the documentation, use the following formats:

Bullet points:

```
List:

- Bullet point a
- Bullet point b
```

This is shown as:

List:

- Bullet point a
- Bullet point b

Numbered list:

```
List:

1. Numbered option 1
    - item 1
    - item 2
2. Numbered option 2
```
This is shown as:

List:

1. Numbered option 1
    - item 1
    - item 2
2. Numbered option 2

!!!info
    Remember respecting the tabs is essential for the continuity of lists, this means that the content of different items must be tabulated.  

###### Images

To include images in the documentation, use the relative paths from the current page with the following format: 

```
![](https://docs.etendo.software/latest/assets/developer-guide/how-to-guides/new-page/new-image.png)
```

!!!info
    Remember to upload the image to the **assets** folder with the corresponding specific location.

For example, if the image location is `developer-guide`> `how-to-guides` >`new-page`, the location of the image should be:

```

 assets 
    └── developer-guide
         └── how-to-guides
                └── new-page
                    └── new-image.png
```
###### More references

For more information about mkdocs, visit [Mkdocs reference](https://squidfunk.github.io/mkdocs-material/reference){target="_blank"}.

#### Writing Rules

##### Keep it simple
Use short sentences and punctuation to keep ideas clear and simple. Introduce a single idea, concept or action per sentence.

- **Wrong**<br>
*The manufacturing module allows users to define the process plans, work requirements and work efforts; this is how the processes that produce intermediate and final goods work.*

- **Correct**<br>
*The manufacturing module allows users to define the process plans, work requirements and work efforts. This section describes how processes that produce intermediate and final goods function.*


##### Tenses
Always use the present tense. Avoid past or future tenses if possible.
In addition, try to refrain from using must, have to, need to, will, should and similar forms.
Keep in mind that a manual describes mandatory procedures to follow to accomplish a certain task.

- **Wrong**<br>
*You will have to press return to reboot the system.*
- **Correct**<br> 
*Press return to reboot the system.*


##### Use third person
*Where possible, use the third person imperative.* 

- **Wrong**<br>
*You should run the installation script*
- **Correct**<br>
*Run the installation script*

However, as long as you do not overdo it, it is accepted to address the user directly using *you* if it makes the documentation easier to follow or use *the user* when necessary.

##### Avoid gender discrimination
Readers of software documentation are men and women. Avoid using expressions that refer to specific gender forms.
You can avoid gender forms or use *they*/*their* as a generic third-person singular pronoun to refer to a person whose gender is unknown or irrelevant to the context of the usage.

- **Wrong**<br>
*Every user has his home directory.*

- **Correct**<br>
*Every user has a home directory.*<br>
*Every user has their home directory.*


##### Only describe current functionality
Avoid talking about future features or plans for a product or an application.

- **Wrong**<br>
*Graphics can be saved as a GIF image. Support for new formats will be added in future versions.*

- **Correct**<br>
*Graphics can be saved as a GIF image.*


##### Writing for a global audience
Keep in mind that people from all over the globe can use Etendo and its related documentation.
Some important recommendations:

- Avoid using names of people, addresses, and other sample information that are not common in the English language.
- Remember that currencies and formats to represent dates and numbers are not the same in every part of the world.

##### Other conventions

- If you have a list of items (for example a list of files to be downloaded) order them alphabetically unless there is a more obvious logical order.
- Do not use contractions (don't, you're, etc).

---

This work is a derivative of [Documentation Style Guide](https://wiki.openbravo.com/wiki/Documentation_Style_Guide){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to create a HQL Based Table
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to create a HQL Based Table
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-hql-based-table
## Article Content: 
### How to create a HQL Based Table

#### Introduction

There are three available data origin in the definition of a table in the application dictionary:

  * Table: A table actually defined in a DBMS.
  * Datasource: A manual datasource will be used for the data origin of this table.
  * HQL Table.

The _HQL Table_ data origin allows to define a table without the need of a physical table in the database and without having to define a manual datasource.

HQL Based Tables must define a HQL select query, that will be used to obtain the proper records when a request to its datasource is done.

#### Defining a HQL Based Table in the Application Dictionary

##### Table Definition

When a HQL based table is defined in the application dictionary, there is no need to fill in the _DB Table Name_ and _Java Class Name_ fields. There are two new fields that must be set for these tables:

  * HQL Query: The HQL query that will be used to fetch the records for this table.
  * Entity Alias: The alias of one of the tables used in the HQL Query. It will be used to add automatically the mandatory client and organization filters.

Design considerations for HQL queries:

  * Use alias for all the columns and tables used in the query. It will simplify the column definition in the application dictionary.
  * Include the string _@additional_filters@_ inside a where clause in the HQL Query. That string will be replaced with the mandatory client and organization filters, and with the filters generated from the criteria included in the datasource request.
  * All HQL queries should include a column that acts as its primery key. The alias of this column should be _id_.
  * If a HQL query contains several from clauses because it uses subqueries in the select clause or in the where clause, then the MAINFROM text must be used instead of FROM in the main from clause.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_HQL_Based_Table-1.png)

##### Column Definition

The _Create Columns from DB_ process does not apply to HQL based tables, so they have to be created manually.

Considerations in the definition of columns of HQL tables in the application dictionary:

  * The _DB Column Name_ and the _Name_ of the column must be the alias used for the column in the HQL Query.
  * The _Clause Left Part_ field must be filled with the left part definition of the column in the HQL query. For instance, if a column is defined in the HQL query is `e.name as countryName` , then the _Name_ and _DB Column Name_ of the column must be `countryName` and its _Clause Left Part_ must be `e.name`.

To include a foreign key in a column of a HQL table, the column must point to the referenced entity itself, not to its id. Then, when that column is defined in the application dictionary, the _Table_ reference must be used, and the proper table instance must be selected in the _Reference Search Key_ field.

For instance, if `e` is the alias of the Country table and we want to include its currency, we must enter `e.currency as countryCurrency` in the HQL query. Then we must select the _Table_ reference in the definition of that column in the application dictionary and `c_currency` in the _Reference Search Key_ field.

#### Tab and Fields Definition

The tab and the fields of a HQL based table are defined in the application dictionary in the same way as with standard tables.
The only restriction is that all tabs associated with HQL based tables will be read only.

#### Advanced Topics

##### HQL Inserters

HQL Inserters allow to add code to a HQL query at a point specified in the HQL Query defined in the application dictionary.

###### HQL Insertion points in the HQL Query

To define a HQL Insertion point in your HQL query you need to use the `@insertion_point#@` string, `#` being the index of the insertion point. The
index of the first injection point must be 0, the index for the second must be 1, etc. There cannot be gaps in the indexes of insertion points.

Insertion points can only be defined in `where clauses`. If the HQL Query defines an insertion point but then there are no `HQLInserter` defined for it, then the insertion point will be replaced by `1 = 1` in the HQL query.

For instance, this HQL Query defines a place to enter the additional filters and an HQL insertion point:

```HQL
SELECT 
  e.id, 
  e.name, 
  e.eDICode, 
  e.costingPrecision, 
  e.client, 
  e.client.organization, 
  e.active
FROM 
  UOM AS e
WHERE 
  @additional_filters@
AND 
  @insertion_point_0@
```

###### Defining a HQL Inserter

Custom HQL inserters must extend the `HQLInserter` class. Subclasses of the `HQLInserter` class must implement this method:

```java
/**
  * Returns some code to be inserted in a HQL query, and adds query named parameters when needed
  * 
  * @param requestParameters
  *          the parameters of the request. The inserted code may vary depending on these
  *          parameters
  * @param queryNamedParameters
  *          the named parameters of the hql query that will be used to fetch the table data. If
  *          the inserted code uses named parameters, the named parameters must be added to this
  *          map
  * @return the hql code to be inserted
  */
public abstract String insertHql(Map<String, String> requestParameters,
    Map<String, Object> queryNamedParameters);
```

The string returned by this method will be used to replace the @insertion_point_#@.

`HQLInserter` are instantiated using dependency injection. A particular `HQLInserter` is used to replace a specific injection point of a particular table. For instance, the following `HQLInserter` is used to replace the `@insertion_point_0@` defined in the HQL query of the table with ID `59ED9B23854A4B048CBBAE38436B99C2`:

```java
  @HQLInserterQualifier.Qualifier(tableId = "59ED9B23854A4B048CBBAE38436B99C2", injectionId = "0")
public class AddPaymentCreditToUseInjector extends HqlInserter {
 
  @Override
  public String insertHql(Map<String, String> requestParameters,
      Map<String, Object> queryNamedParameters) {
    final String strBusinessPartnerId = requestParameters.get("received_from");
    final BusinessPartner businessPartner = OBDal.getInstance().get(BusinessPartner.class,
        strBusinessPartnerId);
    boolean isSalesTransaction = "true".equals(requestParameters.get("issotrx")) ? true : false;
    queryNamedParameters.put("bp", businessPartner.getId());
    queryNamedParameters.put("issotrx", isSalesTransaction);
    return "f.businessPartner.id = :bp and f.receipt = :issotrx";
  }
}
```

##### HQL Transformers

While HQL Inserters only allow to add some criterion on a point predefined by the user that created the HQL Query, HQL Transformers allow to modify the whole structure of the query.

To implement a HQL transformer, you have to subclass the HqlQueryTransformer class.
This class has an abstract method that must be implemented in the custom HQL transformer:

```java
/**
  * Returns the transformed hql query
  * 
  * @param hqlQuery
  *          original hql query
  * @param requestParameters
  *          the parameters of the request
  * @param queryNamedParameters
  *          the named parameters of the hql query that will be used to fetch the table data. If
  *          the transformed hql query uses named parameters that did not exist in the original hql
  *          query, the named parameters must be added to this map
  * @return the transformed hql query
  */
public abstract String transformHqlQuery(String hqlQuery, Map<String, String> requestParameters,
    Map<String, Object> queryNamedParameters);
```

This function receives a HQL query, a map with the parameters sent in the request and a map with all the named parameters that are used in the HQL query. It returns the transformed HQL query, and if in the transformation some named parameters have been added to the query, they must be included in the queryNamedParameters map.

HQL transformers are instantiated using dependency injection. To apply a HQL transformer to a HQL table you must include the table id in the qualifier, for instance:

```java
@ComponentProvider.Qualifier("58AF4D3E594B421A9A7307480736F03E")
public class AddPaymentOrderInvoicesTransformer extends HqlQueryTransformer {
```

---
This work is a derivative of [How to create a HQL Based Table](http://wiki.openbravo.com/wiki/How_to_create_a_HQL_Based_Table){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Module
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Module
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-module
## Article Content: 
###  How to Create a Module

####  Overview

Etendo uses the concept of Modularity. Modularity provides developers with the means to be able to develop, publish and distribute their work in a structured and controlled manner. For users of Etendo Classic, Modularity makes it possible to download, install and update custom developments.

This section describes how to create a new module. It is of particular interest as it describes the first steps which should be followed in all of the other sections in this developer's guide and in Etendo Classic custom development in general.

####  Introduction to Modularity

The objectives of modularity are:

  * To make it easier to contribute to Etendo Classic by allowing distributed and decoupled development and maintenance of optional features. 
  * To provide the community with a rich set of extensions to meet their unique business requirements without bloating the core product. 
  * To shorten the implementation cycles by enabling system integrators to develop very specific functionality to meet the unique needs of a particular market. 

A module is a piece of additional functionality that can be deployed optionally and independently on top of Etendo Classic. Examples of modules are:
additional reports, additional windows, connectors, content packs (translations, chart of accounts, list of tax codes, product categories, etc).

!!!info
    For a detailed description on the Etendo Classic modularity concept, see the [Modularity Guide](https://docs.etendo.software/latest/concepts/Modularity_Concepts.md).

This section explains only the standard module type, because that is most relevant for the other sections.

All new development should be done as a part of a module. Only modules which are marked as _In Development_ can be used in the development process. A module can consist of the following software artifacts:

  * Application dictionary components: all new application dictionary artifacts must be associated with a module. Application dictionary windows have a field that enables you to link an application dictionary component to a module. 
  * Software resources: these are artifacts not defined in Etendo Classic itself but, for example, Java classes, libraries, web resources (images, etc.), configuration files, etc. To maintain the relationship with the module, software resources need to be located in the module's directory inside the Etendo Classic development project. Each module has its own unique directory. 
  * Reference data: modules can be distributed with their own set of reference business data, for example, product categories, tax code, etc. The reference data is defined in datasets which can be related to a module. 

The process of developing a module has three main steps:

  1. Register your module in the Application Dictionary and in your github repository.
  2. Develop the artifacts included in your module. Depending on the functional specification and technical design of your module, it might include only one type of artifacts or a combination of them. In following sections, each type of artifact is described in detail. 
  3. Publish the module in your github repository.

!!!Important
    Every piece of Etendo Classic code belongs to a module, including Etendo Classic core itself. You should do all your developments through modules, including customizations. You can make changes directly in other modules -including Etendo Classic core- but it is highly recommended not to do that. It makes it much easier to maintain Etendo Classic if you restrict code changes to modules.

A module can be distributed and downloaded by other Etendo Classic users via the central repository. For more information about the central repository and distribution of modules, visit the [Modularity Guide](https://docs.etendo.software/latest/concepts/Modularity_Concepts.md).

The following sections discuss the main topic of this section: create and setup a module, and [publish it for distribution](how-to-publish-modules-to-github-repository.md).

####  Creating a Module

The first step in the development process is to create a new module. From the Application menu, select `Application Dictionary` > `Module`.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_To_Create_a_Module-0.png)

Note the following important fields: (for more details see the `AD_Module` table description):

  * The format of the Version field is three numbers separated by two dots. 
  * The Java Package is a unique identifier of your module and has to match the Java package naming rules as described in the  Java Naming Conventions  (names and package names). Be careful when setting this value as you are not allowed to change it once your module is registered in the central repository. If your module includes Java files, they have to be packaged within your module's Java package or in its sub-packages. Examples of Java packages for a module are _org.etendo.howtos_ , _com.etendoerp.examples.helloworld_ , _com.yourcompany.yourPackage_ , _org.yourfoundation.yourPackage.yourSubpackage_ , etc. 
  * The In Development option informs the system that you are developing the module. Only modules in development are exported by development tools and the system will raise an error if you try to modify a component of a module that is not in development. 
  * The Default field option for a module marks that module as the one which is selected by default when developing and when editing components in the Application Dictionary. You may be developing more than one module at any one time, and specifying a default enables the module you want to be selected by default. 
  * Select the Translation Required option if your module contains UI artifacts (window, field) with translatable elements. 

The tabs at the bottom of the window enable you to define the module further:

  * Dependency: defines the module's dependency on other modules. 
  * Include: is used by industry templates/packs. 
  * DB Prefix: relates database schema artifacts to modules. 
  * Data Package: allows you to groups tables together. Data packages are used to determine the Java package generated Java code (business objects). 
  * Naming Exceptions: is used during upgrades of previous versions of Etendo Classic. It should not be used for any other purpose. 
  * Merges: If this module A does now include the content of another module B previously published independently (So module B was merged into module A). 
  * Translation: is used for supporting translations. 

  
In this section, we create an example module, called _Etendo Howtos_ .
We will define the module using the following three tabs of the `Application Dictionary` > `Module` window:

  * Dependency
  * DB Prefix
  * Data Package

Dependency: Etendo Classic core functionality is in itself a module, called _Core_. All modules have a dependency on User Interface Application and in turn, it has a dependency on Etendo core. In the Dependency window, specify that the module is dependent on User Interface Application. (see also the  `AD_Module_Dependency` description):

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_To_Create_a_Module-1.png)

  
DB Prefix: at least one db prefix is required when a module also contains database artifacts (table, column, constraints, etc.). Etendo Classic determines the module of a database artifact by checking to see if its name starts with one of the defined db_prefixes. If database artifacts will be added to the module, at least one DB prefix must be specified.

!!!important
    DB Prefix can only contain uppercase [A-Z0-9] and the first letter is required to be from [A-Z] only.  

  
![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_To_Create_a_Module-2.png)

!!!info
    For more information, see the `AD_Module_Dbprefix` table description.

  
Data Package: Tables are linked to a module through the Data Package. The generated business object for the new table will use the Java Package defined in the  Data Package. If new tables are to be added to the module, a data package must be specified as illustrated in the image below.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_To_Create_a_Module-3.png)


####  Develop your software artifacts

Now, let's see how to develop the software artifacts required for the functionality of the module. While developing, the relation to the module is maintained in different ways:

  * Direct: for example, a Window is directly related to a specific module. 
  * Indirect: a table belongs to a data package which again belongs to a module. 
  * By name: a new stored procedure is linked through a module by prefixing it with the _DB\_Prefix_ of the module. 

When the custom development is ready, the next step is to export the module.

####  Exporting a Module

Exporting a module creates a directory for your module under Etendo Classic root directory and the appropriate XML files for inclusion in the finished module. Modules that are not flagged as being in development are not exported.

!!!note
    Remember that you must select the In Development checkbox when you define a new module, otherwise it will not be exported.

When the development of the module is finished (or to deliver intermediate results), open a command window/shell and navigate to the Etendo Classic development project execute the `./gradlew export.database` command.

!!!important
    Export database task will export all and only the modules set as in Development  
    `./gradlew export.database`
    
Since we do not have any additional developments yet, only the corresponding
folder structure and the module descriptor XML files have been created at this
point.

```
modules
    └── org.etendo.howtos
        └── src-db 
            database
               └── sourcedata
                   ├── AD_MODULE_DBPREFIX.xml
                   ├── AD_MODULE_DEPENDENCY.xml
                   ├── AD_MODULE.xml
                   └── AD_PACKAGE.xml
```

  
Etendo Classic validates the database and module artifacts of a module when the module is exported and its build file is created. See more information on the [database validation step](https://docs.etendo.software/latest/concepts/development-build-tasks.md).

!!!info
    For a detailed description of this `export.database` task and other relevant Module related gradle tasks, see the [database gradle tasks](https://docs.etendo.software/latest/concepts/development-build-tasks.md#database_tasks)


####  Creating a Source Directory

To develop manual Java code you need a _src_ directory inside of your specific module:

```
modules
    └── org.etendo.howtos
        ├── src 
        │   └── org
        │       └── etendo
        │           └── howtos
        │                └── 
        └── src-db
            └──[...]
```
  
The Java package in the source directory should start with the Java package of the module.

#### Publishing a Module

Once the module is created and documented, the next step is to publish it for it to be available.

For detailed information about this process, visit the [How to Publish Modules to Github Repository guide](how-to-publish-modules-to-github-repository.md)

####  The Result

The result of this section is a correctly set up module, which can be installed in an Etendo Classic instance that meets the module's requirements.

---

This work is a derivative of [How to Create and Package a Module](http://wiki.openbravo.com/wiki/How_To_Create_and_Package_a_Module){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Module that Adds an Accounting Process
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Module that Adds an Accounting Process
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-module-that-adds-an-accounting-process
## Article Content: 
#### Introduction

This module is not to change the accounting entries generated by Etendo, but to run any additional process to be executed at posting time.
 
From the functional side, there is no special requirement for the development of this module. It is just recommended to understand the role of  [Accounting Schemas](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#glconfig) in the general accounting configuration for Etendo.

Etendo allows running processes just after the posting logic for any document which has been successfully completed. These kinds of processes are called Accounting Post-Processes because they are executed after the normal accounting process.

From a development point of view, this feature gives us the possibility to fulfill any possible requirement specific for our country, like for example to keep an up-to-date log of the documents that have been posted, create some kind of official reports each time a document is posted, send data to a webservice, etc.
 
!!! note
    Depending on the country's requirements, these Accounting Post-Processes may not be necessary. These kinds of modules are not part of the core for a localization, like translations, chart of accounts or taxes, and must be included into a localization extension just in case they are really needed.

####  Creating the module definition

Each time a new module is developed, the first step must always be to create the module's definition and to register it in the Central Repository.

These are the special considerations for the module:

- Try to follow the [Naming guidelines for modules](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/naming-guidelines-for-modules.md)
- The flag Has reference data must be set because the module [will contain a dataset](#dataset-definition) with the Accounting Post-Process configuration. Remember to write any useful information inside the Reference Data Description field.
- Define the mandatory dependency to Core.
- Include a DB Prefix for the module in case it is necessary. For example, the module will probably define new messages that will require a DB Prefix.
- If the module has UI elements that can be translated (like messages), set the Translation Required checkbox and specify the necessary Module Language.

![](https://docs.etendo.software/latest/assets/drive/1GUwtOTGd6LoJPGLquBJJrSTsh4jVXiD6.png)

!!! info
    Now export the database to generate the file structure inside the module folder     ant export.database

 
Finally, inside the modules accounting post-process java package directory, create the src folder, where the Java class that implements the accounting post-process code is stored.

  ![](https://docs.etendo.software/latest/assets/drive/18i01Ilr0UNLViWoeUAbrJy_qcRhE6koC.png)

#### Creating the Accounting Post-Process Configuration
  
The Java class that implements the Accounting Post-Process logic is defined at the Accounting Process window. The definition is quite simple and only requires a name and the Java class name, which must be inside the java package of the module.

![](https://docs.etendo.software/latest/assets/drive/1gzkW_cziu4nYBGnOqLo3LFoHNupaFH0N.png)

This Accounting Post-Process will be later on associated with an Accounting Schema. So in this step it is important to define as many Java classes as Accounting Post-Processes we want to include in our module, although it is usually recommended to include just one process per module to keep the general rule of isolating features in separate modules.
 
##### Dataset definition
  
Dataset definition is a key step in this process. A wrong dataset definition can waste all our previous work, so it is important to follow all these considerations:

- The dataset must belong to your accounting post-process module.
- Try to avoid strange characters in the dataset name. This string is used for generating the XML file name that stores the dataset.
- The Data Access Level must be set to System/Client, which means we allow users to apply the configuration only at Client level (Organization *).
- The Export allowed flag must be set.
- Inside the Table tab we must include the AD_AcctProcess table, which is the one that stores the Accounting Process configuration.
- The HQL/SQL Where clause is an important field, because it allows filtering the records necessary  to include into the dataset. In the example all the records that are inside our module java package name are filtered.

![](https://docs.etendo.software/latest/assets/drive/1J7nXqk7o0-CB9aE7fPpvs23PoB8HJD4J.png)

The dataset definition is ready, so the user just needs to export it to a file pressing the Export Reference Data button. This process queries the previous tables and gets all the records that fulfill the HQL/SQL Where clause, generating a XML file inside the module's referencedata/standard directory. As a fast check, this file can be opened using any plain text editor and the user can verify that it contains several lines.
  
!!! info
    In case the file is empty, the user should double check the dataset definition, specially the HQL/SQL Where clause used for each table. 
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to create a Navigation Bar Component
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to create a Navigation Bar Component
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-navigation-bar-component
## Article Content: 
###  How to create a Navigation Bar Component
  
####  Overview

This section explains how a component can be added to the Etendo main navigation bar. Navigation bar components are shown in the top of the Etendo Classic layout. They are positioned from left to right.

Some main features of the Etendo Classic navigation bar components:

  * A navigation bar component can be any [Smartclient](https://smartclient.com/product/documentation.jsp){target="blank"} canvas. 
  * Modules can provide new navigation bar components. 
  * The position of a navigation bar component can be controlled. 
  * Navigation bar components can be enabled by role. 

  
![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Navigation_Bar_Component-0.png)

####  Example Module

This is supported by an example module which shows examples of the code shown and discussed.

  The code of this module can be downloaded from [this repository](https://github.com/etendosoftware/com.etendoerp.client.application.examples/tree/main/src/com/etendoerp/client/application/examples).


####  Main Flow of the Navigation Bar Generation

The navigation bar generation goes through a number of steps:

  1. The user logs in, and navigates to the start page.
  2. The start page builds the main layout consisting of the navigation bar and the main content area (with tabs).
  3. The navigation bar is generated on the server as JavaScript (which is send to the browser). 
  4. this is done by the main layout component. This component creates the overall JavaScript structure and then reads the navigation bar components from the navigation bar component table (using role information). 
  5. Each navigation bar component is instantiated, its template is set and the generate method is called which generates the JavaScript of that component (using the template). 
  6. The JavaScript of each component is assumed to create a single canvas or an array of Smartclient canvasses. The JavaScript (i.e. navigation bar component) is placed as a member of the horizontal layout, which builds the navigation bar. 

This main flow illustrates that each navigation bar component can implement its own visualization by providing/using a custom template and component.

####  Implementing a Navigation Bar Component

To create a component which is shown in the navigation bar, the following parts need to be implemented:

  * Create a Java class (the component) which represents the navigation bar component on the server 
  * Create a template which generates the JavaScript which creates the component on the client 
  * Register the navigation bar component in the navigation bar component table

Each of these steps is described in more detail below.

The example module contains a **Hello World** component with a template. This example adds a button to the navigation bar which (when clicked) will say hello to the current user.

``` 
modules
└── com.etendoerp.client.application.examples
    ├── referencedata
    └── src
        └── com
            └── etendoerp
                └── client
                    └── application
                        └── examples
                            └── templates
                            │   └── hello_world.js.ftl
                            └── HelloWordlComponent.java
```

#####  Creating a Component

A component is useful when you want to add runtime information to the navigation bar component JavaScript when it gets generated. For example, the user name or other role or user information.


!!!info
    If you do not have the requirement to use dynamic information in the generated JavaScript of your component, then you do not need to implement a component (only a template). You can make use of the standard Etendo template component: org.openbravo.client.kernel.BaseTemplateComponent, in the navigation bar component definition table.

The example module has a hello world component which provides the current logged in user to the template. The component can be found in the module's src directory. Here is the code:
    
  ```java title="HelloWorldComponent.java"
  package com.etendoerp.client.application.examples;
   
  import org.openbravo.client.kernel.BaseTemplateComponent;
  import org.openbravo.dal.core.OBContext;

  /**
   * Provides a widget which shows a hello world message when clicked.
   * 
   * @author mtaal
   */
  public class HelloWorldComponent extends BaseTemplateComponent {
   
    public String getUserName() {
      return OBContext.getOBContext().getUser().getName();
    }
  }
  ```

#####  Creating a Template

The template contains the actual JavaScript. A template consists of two parts:

  1. A template file (the template source) ending on `.FTL` (a [freemarker](https://freemarker.sourceforge.io/docs/){target="blank"} extension) which is located in the source tree (in the classpath). 
  2. A record in the template table.

The template is a powerful mechanism of Etendo as it makes it possible to combine dynamic generated information and allows overriding of templates by other modules.

######  The Template Source

To create the template for your navigation bar component, create a `.FTL` file in the source tree of your module. The `.FTL` file should contain plain JavaScript with possible freemarker constructs to read information from the component. The JavaScript should create one Smartclient canvas or a JavaScript array with Smartclient canvas instances.

As an example, the **Hello World** template can be found in the `com.etendoerp.client.application.examples` package, it creates a button which can be clicked to say hello. The content of the template is this:
    
  ```javascript title="hello_world.js.ftl"
  /* jslint */
  isc.Button.create({
    baseStyle: 'navBarButton',
    title: OB.I18N.getLabel('OBEXAPP_HelloWorld'),
    overflow: "visible",
    width: 100,
    layoutAlign: "center",
    showRollOver: false,
    showFocused: false,
    showDown: false,
    click: function() {
      isc.say(OB.I18N.getLabel('OBEXAPP_SayHello', ['${data.userName?js_string}']));
    }
  })
  ```

Some aspects to note in this JavaScript source:

  * The /*jslint*/ tells Etendo to do a check on the generated JavaScript. Errors are printed in the console or output log. 
  * As you can see, the templates create a canvas (the Button). It is also allowed to create an array of canvasses. 
  * The title of the button is retrieved through the `OB.I18N.getLabel` method. This is to support translation, see a section below in this article for more information. 
  * See the `${data.userName?js_string}'` part, this is a [freemarker](https://freemarker.sourceforge.io/docs/){target="blank"} template construct whereby information is retrieved from a Java object. In the Etendo templating system, the component instance is available as the **data** object. The `${data.userName?js_string}'` will call the accessor `getName` on the HelloWorldComponent. 

######  Template Record

The next step is to let Etendo know that the template exists. This is done by registering the template in Etendo in the Template table. The template maintenance function can be found here: `Application Dictionary` > `User Interface` > `Template`.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Navigation_Bar_Component-2.png)

#####  Registering the Component as a Navigation Bar Component

The last step is to add the component to the navigation bar. This is done through the navigation bar components table/window. You can find it through quick launch or in the menu here: `Application Dictionary` > `User Interface` > `Navigation Bar Components`.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Navigation_Bar_Component-3.png)

#####  The Result

After executing the above steps, you should see a **Hello World** button in the navigation bar. Clicking it will popup a small hello message.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Navigation_Bar_Component-4.png)

#####  Static Navigation Bar Components
  
By checking the **Static Component** flag of a a navigation bar component in `Application Dictionary` > `User Interface` > `Navigation Bar Components` it is declared as **static** . This kind of components differ from their counterparts in the way they are created. **Static Navigation Bar Components** are loaded at the beginning of the **JavaScript** content used within the application and they do not require an extra request to be loaded.

Besides, the content of the template of a **Static Navigation Bar Components** is defined in a slightly different way:

  ```javascript    
  /* jslint */
  {
    className: 'OBApplicationMenuButton',
    properties: {
      title: 'UINAVBA_APPLICATION_MENU',
      initWidget: function () {
        this.Super('initWidget', arguments);
        this.baseData = isc.clone(OB.Application.menu);
      }
    }
  }
  ```

!!!note
    The template defines a JSON object with two properties:

      * **className** : the class name of the navigation bar component. 
      * **properties** : contains the set of attributes and functions that will be used to configure the component. 

---

This work is a derivative of [How to Create a Navigation Bar Component](http://wiki.openbravo.com/wiki/How_to_create_a_Navigation_Bar_Component){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Pick and Execute Process
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Pick and Execute Process
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-pick-and-execute-process
## Article Content: 
### How to Create a Pick and Execute Process

#### Overview

**Pick and Execute (P&E)** is a case of **Process Definition** with **Standard UI pattern**.

This section will add a new Pick and Execute process and associate it with the **Sales Order window**.

The implementation requires development experience.

The following concept pages provide background information on action handlers and javascript
development:

- [Action Handler](how-to-create-client-event-handler-actions.md)
- [Client Side Development and API](https://docs.etendo.software/latest/concepts/client-side-development-and-api.md)
- [JavaScript Coding Conventions](https://docs.etendo.software/latest/concepts/javascript-coding-conventions.md)

#### Steps to implement the Process

##### Overview

The P&E processes take advantage of the same foundation concepts in the Application Dictionary. The **Window, Tabs and Fields** will be used for defining the editable grid that will be shown, a new **Reference** for the parameter of the process; and then implementing an **action handler** that will get executed when the user hits the **Done** button.

##### Implementation

###### Defining the Window

1. Create a new window
2. Fill the required fields
3. Select **Pick and Execute** as window type

    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Pick_and_Execute_Process-1.png)

4. Following the same concepts, a **Table** is required as data-source.

    - In case it is needed to mix information from several tables, there are different options:

      - A database view used to create a table in [Application Dictionary](how-to-create-a-table.md).
      - A table based on an [HQL query](how-to-create-a-hql-based-table.md).
      - A table based on a [manual datasource](how-to-create-a-table-based-on-a-user-defined-datasource.md).

    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Pick_and_Execute_Process-2.png)

5. Create the necessary fields that will turn into the columns of the grid. Pick a **Column** and pay attention to some important properties:

    - **Displayed:** This must be checked in order to generate a field. If Displayed is unchecked no field will be generated.
    - **Read Only:** Most of the times all the fields will be read-only. If you want a user to be able to modify some data, e.g. quantity, leave it unchecked.
    - **Show in Grid View:** Defines if the field will be shown in the grid. A Field as displayed can be defined but not shown in grid, so a field will get generated but not shown. This is useful for retrieving data to the grid and send it to the process.
    - **Grid Position:** Defines the sequence of the fields in the grid.

    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Pick_and_Execute_Process-3.png)

###### Defining the Reference

After defining the window, a new Reference needs to be defined.

1. Create a new Reference
2. Select in the Base Reference drop down: Window Reference
3. Save

    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Pick_and_Execute_Process-4.png)

4. Move to Window tab
5. Create a new record
6. Select your newly created window
7. Save

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Pick_and_Execute_Process-5.png)

###### Defining the Process

There is a new window for processes: **Process Definition**

1. Open the Process Definition window
2. Create a new record
3. Define the UI pattern: Standard (Parameters defined in Dictionary)
4. Set the Handler (Java class implementing the process)
5. Save

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Pick_and_Execute_Process-6.png)

####### Parameters

Window Reference is an implementation of a **rich parameter**.

1. Move to Parameters tab
2. Create a new record
3. Fill the required fields. The name of the parameter will be the name shown in the title of the running process.
4. Select Window Reference
5. Pick the Window you defined previously
6. Save

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Pick_and_Execute_Process-7.png)

###### Adding a button to Sales Order

####### Create a Column

A new column is required to be associated to a button.

!!!info
    For more information, visit [How to add a field to a Window Tab](how-to-add-a-field-to-a-window-tab).

1. Create a new column in the `C_Order` table. `PostgreSQL` syntax:

    ```
    ALTER TABLE c_order ADD COLUMN em_obexapp_pick1 character(1);
    ALTER TABLE c_order ALTER COLUMN em_obexapp_pick1 SET DEFAULT 'N'::bpchar;
    ```

2. Go to: Tables and Columns
3. Open the `C_Order` record
4. Execute: **Create Columns from DB** process
5. Move to the Columns Tab
6. Pick the newly created column
7. Change the reference from: Yes/No to Button
8. Pick your defined process

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Pick_and_Execute_Process-8.png)

####### Create a Field

1. Go to Windows, Tabs and Fields
2. Search for Sales Order
3. Create a new Field associated with the column

  ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Pick_and_Execute_Process-9.png)

###### Java Implementation

In the case of a Pick and Execute action handler, extend from **BaseProcessActionHandler** and implement the **doExecute** method.

```java title="PickExampleActionHandler.java"
/*
  *************************************************************************
  * The contents of this file are subject to the Openbravo  Public  License
  * Version  1.1  (the  "License"),  being   the  Mozilla   Public  License
  * Version 1.1  with a permitted attribution clause; you may not  use this
  * file except in compliance with the License. You  may  obtain  a copy of
  * the License at http://www.openbravo.com/legal/license.html
  * Software distributed under the License  is  distributed  on  an "AS IS"
  * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  * License for the specific  language  governing  rights  and  limitations
  * under the License.
  * The Original Code is Openbravo ERP.
  * The Initial Developer of the Original Code is Openbravo SLU
  * All portions are Copyright (C) 2011 Openbravo SLU
  * All Rights Reserved.
  * Contributor(s):  ______________________________________.
  ************************************************************************
  */
package org.openbravo.client.application.examples;
 
import java.util.Map;
 
import org.apache.log4j.Logger;
import org.codehaus.jettison.json.JSONArray;
import org.codehaus.jettison.json.JSONObject;
import org.openbravo.client.application.ApplicationConstants;
import org.openbravo.client.application.process.BaseProcessActionHandler;
 
/**
  * @author iperdomo
  *
  */
public class PickExampleActionHandler extends BaseProcessActionHandler {
 
  private static final Logger log = Logger.getLogger(PickExampleActionHandler.class);
 
  @Override
  protected JSONObject doExecute(Map<String, Object> parameters, String content) {
    try {
      JSONObject request = new JSONObject(content);
 
      log.info(">> parameters: " + parameters);
      // log.info(">> content:" + content);
 
      // _selection contains the rows that the user selected.
      JSONArray selection = new JSONArray(
          request.getString(ApplicationConstants.SELECTION_PROPERTY));
 
      log.info(">> selected: " + selection);
 
      // _allRows contains all the rows available in the grid
      JSONArray allRows = new JSONArray(request.getString(ApplicationConstants.ALL_ROWS_PARAM));
 
      log.info(">> allRows: " + allRows);
 
      // A Pick and Execute process can have several buttons (buttonList)
      // You can know which button was clicked getting the value of _buttonValue
      log.info(">> clicked button: " + request.getString(ApplicationConstants.BUTTON_VALUE));
 
      return request;
    } catch (Exception e) {
      log.error("Error processing request: " + e.getMessage(), e);
    }
    return new JSONObject();
  }
}
```

#### Testing the Process

Since the structure of some Entity has been changed by adding a new column, it is needed to restart the tomcat server.

- After restarting, it should be able to go to the Sales Order window and see a new button.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Pick_and_Execute_Process-10.png)

#### Advanced Topics

##### Selecting by default

The data-source (table or view) defined in the Tab, can set which rows will be selected by default when the user launches the process. It is just needed to create a column `c_ob_selected`, this will turn into a `obSelected` property in the generated entity. When the value of this column is **Y** , the row will be selected by default. Here you have an working example:
`M_RM_RECEIPT_PICK_EDIT.xml`.

!!!note
    When registering the column in the Application Dictionary the **Yes/No** reference must be used.

##### Validation Function

Define at Field level, a JavaScript validation function. In an editable field when the user enters a value, this function will get executed.

1. Go to Window, Tabs and Fields
2. Pick your window and the tab
3. Go to the Quantity field

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Pick_and_Execute_Process-11.png)

###### JavaScript Definition

- The Component Provider needs to register a new global resource.
- If the function returns false, the cell will be marked with an error.
- In the JavaScript, define a validation function e.g.

```javascript
OB.OBHT = {};
OB.OBHT.validate = function (item, validator, value, record) {
  // item has access to grid: item.grid
  // from the grid you can get all selected records and edited values, e.g.
  //   * item.grid.getSelection()
  //   * item.grid.getEditedRecord()
  // grid has access to view: grid.view
  // view has access to parentWindow: view.parentWindow (the window running the process)
  // parentWindow has access to currentView
  // currentView has getContextInfo
  // debugger;
  if (window.console) {
    console.log("validation function!", value);
  }
  return true;
};
```

##### Selection Function

A selection function can be defined at Tab level. This function will get called when the user select/unselect a row.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Pick_and_Execute_Process-12.png)

And define a JavaScript function in your loaded static `.js` file:

```javascript
OB.OBHT.selectionChanged = function (grid, record, recordList) {
  if (window.console) {
    console.log("selection function!");
    console.log(grid, record, recordList);
  }
};
```

If you want to change any value of the selected record, use the following instruction:

```javascript
grid.setEditValue(grid.getRecordIndex(record), columnName, newColumnValue)
```

##### Performing Several Actions after Execution

After the process is executed, a series of actions can be taken.

!!!info
    For more information about several actions after execution, see [How to create a Standard Process Definition](how-to-create-a-standard-process-definition.md).

This work is a derivative of [How to create a Pick and Execute Process](http://wiki.openbravo.com/wiki/How_to_create_a_Pick_and_Execute_Process){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Report
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Report
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-report
## Article Content: 
###  How to Create a Report
  
####  Overview

In this section, the user can find information about the steps required to create a new report in Etendo Classic. The example explained is a simple report with a list of products.

####  Setting up Jaspersoft Studio
  
!!!note
    It is recommended to use the latest version of Jaspersoft Studio.  
  
  
First, you need to download Jaspersoft Studio, a graphical tool that allows you to create and modify JasperReports templates (.jrxml files).

  * Download  [Jaspersoft Studio](https://www.jaspersoft.com/products/jaspersoft-community){target="\_blank"}. 
  * On Linux: just download the .tgz file and uncompress it, execute the binary _Jaspersoft Studio_ located inside the main folder.
  * On Windows: Download and execute the .exe file.

#####  Configuring Jaspersoft Studio Library Version
!!! warning
    Etendo supports Jasper Reports compatible with JasperReports 6.0.0. So, if you are using a newer version of Jaspersoft Studio, you need to make sure that the version of the JasperReports library is 6.0.0. It is very important to use the correct version of JasperReports library,so the jrxml file has the syntax compatible with Etendo.

* Go to `Settings` > `Jaspersoft Studio` > `Compatibility` > `Source .jrxml Version` and set it to 6.0.0.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Report-1.png)

#####  Configuring Jaspersoft Studio Properties

Some properties of Jaspersoft Studio need to be modified in order to work properly. In short, you need to make sure:

  * You modified the JasperReport property _net.sf.jasperreports.awt.ignore.missing.font_ and set it to *true*. It can be changed in `Properties` > `Jaspersoft Studio` > `Properties` 
  * Do not use any *Scriplet* class 
  * Use *Java* as default expression language 


  
#####  Setting up Classpath

In Jaspersoft Studio, each report is supposed to be part of a project. So, you first need to create a new project (`File` > `New` > `Project`).

The project has a classpath, and here is where you can add the jars you need.

  * Right-click on the project name: `Properties` > `Java Build Path`
  * Move to *Libraries* tab 
  * Click *Add External Jars* button 
  * Add the desired library. 
  * Click *OK*

####  Creating the Template

  * Go to `File` > `New`
  * Pick *Jasper Report*
  * The *New Report Wizard* will be opened 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Report-2.png)

  * Select a Report Template, (_Blank_ following our example) 
  * Define a Report Name 
  * Define the file Location in the project. 

Later on, we will copy this .jrxml file inside our Etendo module that is going to keep our Report and also the required configuration in the Application Dictionary.

  * Define the Report Data Source: by clicking on "New", a new database connection can be configured using the *Data Adapter Wizard*
  * Click *New*
  * Pick *Database JDBC Connection* and click _Next_
  * Fill all the fields 
    * *Name:* Etendo (or any name you like, e.g. pi) 
    * *JDBC Driver:* PostgreSQL (`org.postgresql.Driver`). In this case, we'll use PostgreSQL 
    * *JDBC URL:* `jdbc:postgresql://localhost:5432/etendo` where _5432_ is the port where PostgresSQL is running and _etendo_ is the SSID of our database 
    * *Username:* tad (you can check your username/password in gradle.properties configuration file. For more information about gradle.properties, visit [Install Etendo](https://docs.etendo.software/latest/getting-started/installation.md#install-etendo)) 
    * *Password:* tad 
  * Click the Finish button to generate the JDBC Connection 
  * Test your connection 
  * Save 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Report-3.png)

Now we have to configure the query: we are going to list the products present in the database.

  * Right-click on the Report Outline menu, and select *Dataset and Query*. Here is where we have to set the query of the report and it is also possible to switch between the available database connections in case we want to test the query. 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Report-4.png)

  * The products are stored in the `M_Product` table 
    
        SELECT m_product_id, value, name FROM m_product

  * We have to add the fields based on your query which we want to use in the report, so we are going to add: 
    * `m_product_id` 
    * `value` 
    * `name` 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Report-5.png)

  * Click *OK* 
  * Remember to clear the Scriptlet class and modify the Language for expressions 
  * Right-click on the Report Outline menu, and select *Show Properties*. 
  * In the report properties in the right, look for the following: 
    * Clear the Scriptlet class 
    * Choose Java as Language 
  * Save your changes 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Report-6.png)

Let's now design the Report Layout

  * Put a static text as report title: _Product List_
  * Place the fields in the *Detail* band and a title in the *Column Header* band 
  * Save your changes 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Report-7.png)

  * Switch to the *Preview* subtab to get a report preview 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Report-8.png)

!!!note
    It is recommended to use Dejavu fonts in jasper reports because these
    fonts support most of the characters in almost all languages​​. Besides,
    Dejavu typography is the family of fonts that Etendo included in
    jasperreports-fonts library.   
  
#####  Etendo Runtime Environment

The standard reports in Etendo (`src/org/openbravo/erpReports`) make use of several methods that reside inside the *Etendo Runtime Environment*, which cannot be executed at design time. For this reason, we provide a .jar file that encapsulates the following adapted methods of the `org.openbravo.erpCommon.utility.Utility` Class:

  * `public static BufferedImage showImageLogo`: returns a logo image that is already included in the JAR archive 
  * `public static String applyCountryDateFormat`: always returns the date formatted in this pattern dd-MM-yyyy 
  * `public static DecimalFormat getCountryNumberFormat`: just returns the same DecimalFormat received as parameter 

For this, to be able to preview the standard Etendo reports from *JasperStudio*, it suffices just to import the .jar file into the classpath of the project within JasperStudio.

#####  Adding images and logos to a report using the ShowImage API

You can use the Image BLOB reference to display an image for a specific report, or one of the Company logos in the application. 

To do so:

1. Add an image object to your report

2. set the expression class to "java.awt.Image" and the expression image to a call to the ShowImage function of the Utility class (if you want it to display a standard ImageBLOB image reference, that corresponds to a field added to a tab), or to the ShowImageLogo function if you want to display the logo of an Organization or Client.

Images loaded with this method must not have alpha channel. A transparency layer is not supported by the function that loads images in Jasper Reports.

  * If you want to use the ShowImage function, you need to make the expression image look like: 
    * `org.openbravo.erpCommon.utility.Utility.showImage("IMAGEID")` 

IMAGEID needs to be the UUID of the image you want to show. You could set this value using a Jasper parameter.

  * If you want to use the ShowImageLogo function to show one of the logos, you have several options. 
    * This one will show the Company logo at System level: 
        * `org.openbravo.erpCommon.utility.Utility.showImageLogo("yourcompanylogin")` 
    * This one will show the Company log at Client level (the client used will be the one the user logged at): 
        * `org.openbravo.erpCommon.utility.Utility.showImageLogo("yourcompanymenu")` 
    * This one will show the Company logo at Organization level: 
        * `org.openbravo.erpCommon.utility.Utility.showImageLogo("yourcompanydoc", "ORGANIZATIONID")`

ORGANIZATIONID needs to be the UUID of the Organization whose log you want to show. You could set this value using a Jasper argument. An example could be `org.openbravo.erpCommon.utility.Utility.showImageLogo("yourcompanydoc","4387D62C6486481AB3D148442A6AD34E")̣` being `4387D62C6486481AB3D148442A6AD34E` the organization ID.

####  Registering the Report in Application Dictionary

#####  Creating the Report

It is possible to create a report using a process definition. For more information, visit [this section](How_to_create_a_Report_using_Process_Definition.md).

  * Using the System Administrator role 
  * Using the quick-launch, open: *Process Definition* window 
    * You can find it in the menu: `Application Dictionary` > `Process Definition` 

  * Create a new record 
  * Fill all required fields 
    * *Module:* Pick your module 
    * *Search Key:* ETPF_ProductList (It is a best practice to start with your module's [DB_Prefix](https://docs.etendo.software/latest/concepts/Modularity_Concepts.md#DB_prefix)) 
    * *Name:* Product List 
    * *UI Pattern:* Report (Using JR templates) 
    * *Data Access Level:* Client/Organization 
    * *Handler*: use the default `org.openbravo.client.application.report.BaseReportActionHandler`

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Report-9.png)

We must copy the .jrxml template file generated with Jaspersoft Studio into our module. When using Process Definition to generate a Report, templates need to be stored in the web folder of the module. In our example, we place it in the following location: `/web/com.etendoerp.platform.features/jasper`

  * Navigate to the *Report Definition* tab 
  * Fill the PDF template field with the location of the .jrxml file 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Report-10.png)

#####  Creating the Menu record

  * Using the System Administrator role 
  * Open the Menu window 
  * Create a new record 
  * Fill all required fields: 
    * *Module:* Your module 
    * *Name:* Name of the menu entry (Product List) 
    * *Description:* Description of the action related to the menu entry 
    * *Action:* Pick `Process Definition` 
    * *Process Definition:* Pick your Process Definition (Product List) 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Report-11.png)

####  Compiling

After you have registered the report and menu entry in the Application Dictionary, you need to compile to generate the necessary code.

``` bash title="Terminal"
./gradlew smartbuild
```

Once the compilation has been completed, restart your Tomcat server.

####  Testing the Report

If you have completed all the steps, you should be able to open your Product List report form the quick-lauch, or menu entry.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Report-12.png)

####  Further Details

#####  Layout

For information on how JasperReports handles the layout, check [Making HTML,XLS or CSV friendly reports](https://community.jaspersoft.com/knowledgebase/tips-n-tricks/making-html-xls-or-csv-friendly-reports/){target="\_blank"}.

Also, a tutorial with the basics of how to design a report can be found [here](https://community.jaspersoft.com/knowledgebase/tips-n-tricks/designing-report-jaspersoft-studio/){target="\_blank"}.

#####  Configuring Cell Type in XLS Reports

By default, Etendo Classic reporting engine exports the XLS data as strings. This is done in order to ensure that the exported data can be read after opening the report with the vast majority of spreadsheet applications.

If we want to have a particular format in a cell of our XLS report, and for example, display numbers inside a numeric cell, this default configuration can be overridden at template level.

To override this configuration, the following must be done inside the .jrxml report template:

  1. Add the *net.sf.jasperreports.export.xls.detect.cell.type* property with true as its value. 
  2. Add a *pattern* for the text field that will be displayed in the XLS cell. With the `<pattern>` tag, a fixed pattern can be set and with the `<patternExpression>` tag, it is possible to define a dynamic pattern. 

!!!note
    The decimal and thousands *separators* used for the numeric
    cells exported in this way, will be those defined inside the spreadsheet
    program itself (LibreOffice Calc, Excel,etc).

#####  Creating a Report Using Report and Process

In [this section](How_to_create_a_Report_with_iReport.md#Registering_the_Report_in_Application_Dictionary.md), you can find an example about how to create a Report in this way.

#####  Report Compilation
  
When printing a report in the application, it is previously compiled at runtime. The result of this report compilation is cached if there are no modules in _in development_ status.

Besides, it is possible to handle the state of this cache through a JMX extension. Thus, this extension allows to:

  * See if the cache is enabled. 
  * Enable/Disable the cache. 
  * See the list of reports whose compilation is stored in cache. 
  * Clear the cache contents. 

#####  Barcodes

It is possible to generate barcodes from JasperReports, using barcode4j or barbecue libraries. These libraries are included in [Barcode generation in reports](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/org.openbravo.service.reporting.barcode.zip){target="\_blank"} module.

In Platform Features module, there is an example of a report making use of different barcode styles, see the [jrxml template](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/Barcodes.jrxml){target="\_blank"}.

---

This work is a derivative of [How to create a Report](http://wiki.openbravo.com/wiki/How_to_create_a_Report){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Standard Process Definition
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Standard Process Definition
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-standard-process-definition
## Article Content: 
###  How to Create a Standard Process Definition
  
####  Overview

**Standard UI pattern of Process Definition** allows to create Parameter Windows defined in Application Dictionary, the UI for this windows is generated on demand so once defined those parameters, developer only needs to take care about process implementation.

This section will add a new **Standard Process Definition** and create a menu entry to invoke it.

The implementation requires development experience. See the following concept pages for background information on action handlers and javascript development:

  * [Action Handler](https://docs.etendo.software/latest/concepts/Etendo_Architecture.md)
  * [Client Side Development and API](https://docs.etendo.software/latest/concepts/Client_Side_Development_and_API.md)
  * [JavaScript Coding Conventions](https://docs.etendo.software/latest/concepts/JavaScript_Coding_Conventions.md)


####  Steps to implement the Process

#####  Overview

**Standard Process Definition** processes take advantage of the same foundation concepts in the Application Dictionary, allowing to define parameters for the process as meta data that generates the UI when it is required without the need of generating code, compile or restart tomcat to apply the changes when developing.

This example process will have the following parameters:

  * Min and Max Qty: two mandatory integer fields. 
  * Orders: a search that allows to select several orders at the same time. 
  * Business Partner: a regular business partner selector. 

When **Done** button is clicked the process is executed:

  * It verifies in backend `max qty` field is greater than `min qty`. In case they are not, a validation error is sent back to the client asking the user to fix the values before continuing. 
  * If previous validation is satisfied: 
    * Total amount of all selected orders is summed and displayed in a message in the **parameter** window. 
    * If a business partner is selected, **Business Partner** window is opened within the selected one and a message is shown in this window. 

#####  Implementation

######  Defining the Process

  * Open **Process Definition** window 
  * Create a new record 
  * Define the UI pattern: **Standard (Parameters defined in Dictionary)**
  * Set the Handler: `org.openbravo.client.application.examples.StandardProcessActionHandler`. This is the Java class implementing the process that will be invoked when user clicks on the action button. 
  * Save 

######  Adding Parameters

  * `Min Qty` parameter 
    * Move to **Parameters** tab 
    * Create a new record 
    * Name: `Min Qty`. This is the name that will be shown in UI for this parameter. 
    * Internal Name: min. It is the internal name that will be used to retrieve the value in the java class. 
    * Sequence Number: 10. Defines the position of this field in the **Parameter window** in relation with the rest of fields. 
    * Reference: Integer. Defines both the data type the parameter will hold and how this parameter is visualized and behaves in the UI. 
    * Mandatory: true. Will force the parameter to have a value before allowing to submit the info to the process. 
    * Default value: 0. It is the value that will take the parameter by default. It is a javascript expression evaluated in the server side, like  Default Filter Expressions  used in selectors. 
  * Follow similar steps to create **Max Qty** field 
  * **Orders** multi selector 
    * Create a  Multi Order  selector 
    * Create a new parameter 
    * Reference: `OBUISEL_Multi Selector Reference` 
    * Reference Search Key: Multi Order Selector 
  * Business Partner parameter has `OBUISEL_Selector Reference` as Reference and **Business Partner not filtered by default by customer/vendor** as Reference Search Key 

######  Adding it to the Menu

Adding a process to the menu allows to open it from menu as a new tab.

  * In **Menu** window create a new entry 
  * Action: Process Definition 
  * Process Definition: Example Parameter Process 

######  Java Implementation

In the case of a Process Definition action handler, extend from `BaseProcessActionHandler` and implement the `doExecute` method.

    
    
```java
/*
  *************************************************************************
  * The contents of this file are subject to the Openbravo  Public  License
  * Version  1.1  (the  "License"),  being   the  Mozilla   Public  License
  * Version 1.1  with a permitted attribution clause; you may not  use this
  * file except in compliance with the License. You  may  obtain  a copy of
  * the License at http://www.openbravo.com/legal/license.html
  * Software distributed under the License  is  distributed  on  an "AS IS"
  * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  * License for the specific  language  governing  rights  and  limitations
  * under the License.
  * The Original Code is Openbravo ERP.
  * The Initial Developer of the Original Code is Openbravo SLU
  * All portions are Copyright (C) 2013 Openbravo SLU
  * All Rights Reserved.
  * Contributor(s):  ______________________________________.
  ************************************************************************
  */
package org.openbravo.client.application.examples;
 
import java.math.BigDecimal;
import java.util.Map;
 
import org.apache.log4j.Logger;
import org.codehaus.jettison.json.JSONArray;
import org.codehaus.jettison.json.JSONException;
import org.codehaus.jettison.json.JSONObject;
import org.openbravo.client.application.process.BaseProcessActionHandler;
import org.openbravo.dal.service.OBDal;
import org.openbravo.erpCommon.utility.OBMessageUtils;
import org.openbravo.model.common.order.Order;
 
public class StandardProcessActionHandler extends BaseProcessActionHandler {
  private static final Logger log = Logger.getLogger(StandardProcessActionHandler.class);
 
  @Override
  protected JSONObject doExecute(Map<String, Object> parameters, String content) {
    try {
      JSONObject result = new JSONObject();
 
      JSONObject request = new JSONObject(content);
      JSONObject params = request.getJSONObject("_params");
 
      // Do validations on param values
      double min = params.getDouble("min");
      double max = params.getDouble("max");
 
      if (max < min) {
        // In case validations are not satisfied, show an error message and allow user to fix
        // parameters
        result.put("retryExecution", true);
 
        JSONObject msg = new JSONObject();
        msg.put("severity", "error");
        msg.put(
            "text",
            OBMessageUtils.getI18NMessage("OBEXAPP_MinGtMax", new String[] { Double.toString(min),
                Double.toString(max) }));
        result.put("message", msg);
        return result;
      }
 
      // Execute process and prepare an array with actions to be executed after execution
      JSONArray actions = new JSONArray();
 
      // 1. Sum amounts of all orders and show a message in process view
      JSONArray orders = params.getJSONArray("orders");
      BigDecimal totalAmnt = BigDecimal.ZERO;
      for (int i = 0; i < orders.length(); i++) {
        String orderId = orders.getString(i);
        Order order = OBDal.getInstance().get(Order.class, orderId);
        totalAmnt = totalAmnt.add(order.getGrandTotalAmount());
      }
      JSONObject msgTotal = new JSONObject();
      msgTotal.put("msgType", "info");
      // XXX: these two messages should be translatable, like OBEXAPP_MinGtMax above
      msgTotal.put("msgTitle", "Selected Orders");
      msgTotal.put("msgText", "Total amount: " + totalAmnt.toString());
 
      JSONObject msgTotalAction = new JSONObject();
      msgTotalAction.put("showMsgInProcessView", msgTotal);
 
      actions.put(msgTotalAction);
 
      // 2. If business partner is not null, open it in BP window and show a message in new tab
      if (!params.isNull("bp")) {
        String bpId = params.getString("bp");
        JSONObject recordInfo = new JSONObject();
        recordInfo.put("tabId", "220");
        recordInfo.put("recordId", bpId);
        recordInfo.put("wait", true);
 
        JSONObject openTabAction = new JSONObject();
        openTabAction.put("openDirectTab", recordInfo);
 
        actions.put(openTabAction);
 
        JSONObject msgInBPTab = new JSONObject();
        msgInBPTab.put("msgType", "success");
        msgInBPTab.put("msgTitle", "Process execution");
        msgInBPTab.put("msgText", "This record was opened from process execution");
 
        JSONObject msgInBPTabAction = new JSONObject();
        msgInBPTabAction.put("showMsgInView", msgInBPTab);
 
        actions.put(msgInBPTabAction);
      }
 
      result.put("responseActions", actions);
 
      return result;
    } catch (JSONException e) {
      log.error("Error in process", e);
      return new JSONObject();
    }
  }
}
```

#######  Response

`ActionHandler` return a `JSONObject` with the actions to be performed after execution.

########  Validations

It is possible to do validations in the backend before executing the actual process, when these validations are not satisfied, a message can be shown in the UI to allow the user to fix the problematic values.

When validations are not satisfied `retryExecution: true` property is included in the response. This allows the user to fix data and resubmit again.
Additionally, a message can be added to show more information about the issue.

The response would look similar to this:

```json
{
  "retryExecution": true,
  "message": {
    "severity": "error",
    "text": "Min value (80.0) cannot be greater than Max value (10.0)"
  }
}
```

########  Returning Several Actions

After executing the process, it is possible to perform a series of actions.

!!!info
    For more information, see [Pick & Execute process extension](how-to-create-a-pick-and-execute-process.md). 

The response should look like:

```json
{
  "responseActions": [{
    "showMsgInProcessView": {
      "msgType": "info",
      "msgTitle": "Selected Orders",
      "msgText": "Total amount: 3020482.63"
    }
  }, {
    "openDirectTab": {
      "tabId": "220",
      "recordId": "A6750F0D15334FB890C254369AC750A8",
      "wait": true
    }
  }, {
    "showMsgInView": {
      "msgType": "success",
      "msgTitle": "Process execution",
      "msgText": "This record was opened from process execution"
    }
  }, {
    "refreshGrid": {
    }
  }, {
    "refreshGridParameter": {
      "gridName": "gridParameterName"
    }
  }]
}
```

  * `responseActions`. It is the name of the `JSONArray` that indicates a series of actions will be performed after execution. Each of the items in the array is one action, different kinds of actions can be executed. It is also possible to  extend through modules  the possible actions to be performed: 
  * `showMsgInProcessView`. Shows a message in the same tab the process was invoked from. In case the process is opened from menu, this message will be seen in the window where the values for the parameters are provided; if the process is invoked from a button in a tab, the message will be shown in that tab. 
  * `openDirectTab`. Opens a new tab. `tabId`, it is possible to indicate the record to open in that tab (`recordId`). The `wait: true` property indicates next action will not be started till this one finishes. Optionally, you can also include a criteria object to automatically add a removable filter to the open tab. A criteria is an object which describes a filter in a grid. 

!!!info
    For more information, visit [Smartclient](https://smartclient.com/smartgwt/javadoc/com/smartgwt/client/data/AdvancedCriteria.html){target="\_blank"}.

  * `showMsgInView`. Shows a message in the recently opened tab. 
  * `refreshGrid`. Refreshes the grid where the process button is defined. Grids are not automatically refreshed after invoking a standard process, only the selected record is refreshed. If the process adds or removes records from that grid, then it must add the `refreshGrid` to the list of response actions to see the updated data in the grid. 
  * `refreshGridParameter`. Refreshes the **grid parameter** with name ` gridName ` present in the standard process parameter window. This kind of response is specially useful for those parameter windows which are not closed after the execution of the **action handler** (the parameters are visible after the process execution), for example those process definitions which are directly opened from the menu. 

  
The `getResponseBuilder()` method is available for classes extending `BaseProcessActionHandler`. This method returns a helper that can be used to build the result of the process with the desired standard response actions in an easy way. For example:
    
    
```java
@Override
protected JSONObject doExecute(Map<String, Object> parameters, String content) {
  ...
  ...
  return getResponseBuilder()
      .showMsgInProcessView(MessageType.INFO, "Message Title", "This is a sample message")
      .openDirectTab("220", false).build();
}
```

####  Testing the Process

Now, it's needed to compile and deploy (because a new java class is added, note this is not needed in case of just editing/adding paramters).

After compile and deploy, there will be a new entry in the menu: **Example Param Process**, this entry opens the parameter window where all defined parameters are shown and a **Done** button is presented to submit values set for them. When the process is executed:

  * If `Max Qty` is greater the `Min Qty`, a message is shown and the process can be submited again. 
  * A message in the parameter window is shown summing the amounts of all selected orders. 
  * If a business partner is selected, it is opened in a new tab displaying a message on it. 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Standard_Process_Definition-2.png)

####  Advanced Topics

#####  Invoke the Process from a Tab

Standard Process Definition processes can be opened as a tab from the menu or as a modal popup from a button in a tab. This second option can be achieved by adding an extra column to the table used in the tab. 

!!!info
    More details about this process visit [How to create a Pick and Execute Process](how-to-create-a-pick-and-execute-process.md). 

#####  Read Only and Display Logic

Parameters in Process Definition support display and read only logic. This allows to show or hide and to make editable or read only parameters based on values entered for other parameters.

#####  Subordinated Combos
  
The data that can be selected within a combo (selector) can be restricted based on values other parameters take using **Validation Rules**. Logic of these validations is a HQL that is appended to its datasource. This is written in javascript being posible to use `OBBindings`, in the same way default value is written.

#####  Parameter Grouping
  
It is possible to do groups of parameters in the UI, by using the **Field Group** property when defining the paramter.

#####  Showing results in the process window itself

It is possible to show the result of a process directly in the process window itself. This makes sense if the parameter section is small and you want to display directly.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Standard_Process_Definition-6.png)

To accomplish this, the data/json object returned from the server handler should set this parameter `showResultsInProcessView` to true. It also makes sense to `retryExecution` parameter to true:

```json
{
  "retryExecution": true,
  "showResultsInProcessView": true
}
```

The called `javascript` method gets an object with a `processView` property which refers back to the overall process view. From the process view you can get to the resultLayout to show the result. The resultLayout is a `SmartclientHLayout`.

For example, a return action:

```javascript
OB.Utilities.Action.set('openSaikuReport', function(paramObj) {
  var i, queries = paramObj.queries,
      processView = paramObj._processView,
      mainLayout = processView.resultLayout, reportView;
 
  reportView = isc.OBANALY_ShowSaikuReport.create({
    parameters: paramObj,
    queries: queries
  });
  mainLayout.addMember(reportView);
```

#####  Placing a parameter in a particular column
  
The **Column Number** field of the Parameter tab allows specifying the column where the parameter should be placed. Grid parameters use always the four columns of the form, so this field does not apply to them.

#####  Invoking a client side validation before calling the action handler

The **Client Side Validation** field of the Process Definition tab allows defining a function that will be executed before the request to the action handler is done. This function can be used to do **client side validations**.

This function must accept 3 parameters:

  * the parameter window object. i.e., if you name this parameter **view**, then the form of the parameter window will be accessible via `view.theForm`. The value of a particular parameter can be retreived using `view.theForm.getItem(parameter_name).getValue() `
  * a validation success callback. If the current values of the form passes the validation, this callback must be invoked
  * a validation failure callback. If form values do not satisfy the validation, invoke this callback. 

For instance:

```javascript
OB.Utilities.TestClientSideValidation = function (view, actionHandlerCall, failureCallback) {
  var minNumber, maxNumber;
  minNumber = view.theForm.getItem('min_number').getValue();
  maxNumber = view.theForm.getItem('max_number').getValue();
  if (maxNumber >= minNumber) {
    // only execute the callback if the form values pass the validation
    actionHandlerCall();
  } else {
    failureCallback();
  }
```

In addition, client side validation functions support a fourth parameter that contains additional information, like the pressed button:  

```javascript
OB.Utilities.TestClientSideValidation = function (view, actionHandlerCall, failureCallback, additionalInfo) {
  if (additionalInfo.buttonValue === 'OK') {
    // execute validations related to the 'OK' button
  } else {
    // do another validations
  }
```

!!!info
    To learn how to define new buttons in a standard process definition window, see [Adding new buttons](how-to-create-a-standard-process-definition.md#adding-new-buttons).


Additional information can be added to the payload the process will receive. For example, this code would add a new parameter named `myParam`:

```javascript
view.externalParams = { myParam:'value' };
```

#####  Invoking a function when a non-grid parameter is changed

The **On Change Function** field of the Parameter tab allows defining a function that will be executed when a non-grid parameter is updated, after the parameter loses its focus. This function can be used to do validations or to implement **client side callouts**, among other things.

The function must accept four parameters:

  * item: the item that has been modified 
  * view: the parameter window object 
  * form: the form that contains the item 

#####  How to set the value of non-grid parameters programmatically

It is possible to execute an **On Change Function** , besides when the parameter loses its focus, when setting the parameter value programmatically.

When setting the value of a parameter from code, it is recommended to use the **setValueProgrammatically()** function. This way, if the parameter has an **OnChange Function**, it will be executed after setting the parameter value.

```javascript
var issotrx = form.getItem('issotrx');
// Set the value for the item
// If the 'issotrx' parameter has an 'On Change Function' it will be executed also
issotrx.setValueProgrammatically('Y');
```

#####  Invoking a function when all the non-grid parameters have been initialized

The **On Load Function** field of the Process Definition tab allows defining a function that will be executed once the parameters have been initialized.

#####  Invoking a function when the process needs to be refreshed

The **On Refresh Function** field of the Process Definition tab allows defining a function that will be executed when the parameter window refresh action be invoked.

For example, if the process has a child-process, once the child-process finishes, it will invoke a refresh of the parent process.

!!!note
    Since each process has its particularities, a custom refresh function should be defined in case the process is susceptible of being refreshed/reloaded.

The function must accept, at least, one parameter:

  * view: the parameter window object 

#####  Invoking when a grid parameter is loaded for the first time

The initialization of the grid parameters is done asynchronously, so when the general **onLoadFunction** is invoked, it is not certain whether all the grid parameters have been loaded with their initial data. If you need to execute some code right after a grid is loaded for the first time, use the **On Grid Load Function** field. The function used here must accept one parameter, the grid itself.

For example:

```javascript
OB.Utilities.TestOnGridLoad = function (grid) {
  var nRecordsReceived = grid.getData().getLength(),
      messageBar = grid.view.messageBar;
  messageBar.setMessage('info', 'The grid has been loaded with ' + nRecordsReceived + ' records');
    }
```

#####  Specifying the number of rows displayed in a grid parameter

You can set the number of rows that should be shown at the first time in a grid parameter using the **Number of Displayed Rows** field. This field is used just for setting the height of the grid, if the grid has actually more rows than the Number of Displayed Rows, a scrollbar will be shown. The default value for this field is 5.

!!!note
    It is not possible to define the colspan of the grid parameters, because they always use the four available columns of the form.

#####  Defining a display logic for the fields of a grid parameter

The **Display Logic for Grid Column** field in the Field tab allows to define a display logic for the fields of grid parameters.

For instance, suppose that you have defined a parameter window with two parameters:

  * a boolean called Show Advanced Columns, column name `showAdvancedColumns` 
  * a grid. 

Let's suppose the grid has some fields that should be displayed only if the **Show Advanced Column** flag is checked. The Display Logic for Grid Column field of these fields should be set to:

```
@showAdvancedColumns@='Y'
```

#####  Specifying a default value for the filter of a parameter grid field

The **Default Filter Expression** field of the Field tab allows to define a default value for the filter of a field. This default value can be a constant, dependent from another parameter or use `OBBindings`.

#####  Hiding the parameter name of a grid parameter

Although it is possible to define several grid parameters in a parameter window, it is likely that most of the times there will be at most one (for instance in pick and execute windows). In those cases, consider not showing the name of the grid parameter. Do this by unckecking the flag **Show Title** in the Parameter tab.

#####  Adding new buttons

By default, process definitions have a single **Done** button (and a **Cancel** one in case they are shown in a popup from a standard window). It is possible to change that button or to add new ones.

To do it:

  1. Create a new **Reference with Button List** as **Parent Reference**. In the **List Reference** add as many records as buttons to be displayed in the process. The name of these elements will be seen in the button's label whereas the **Search Key** is the value that will be sent to the **Handler** in the backend within the `buttonValue` field. 
  2. Add a new parameter to the process with **Button List** as reference and the new reference just created as **Reference Search Key**. 
  
!!!note
    There should be, at most, only one parameter of **Button List** type. 


#####  Multi Record Process

A standard process can be defined as multi record process to be able to execute it for more than one record.

#####  Uploading files

:octicons-package-16: Javapackage: `com.etendoerp.upload.file`

This section describes the Etendo **Upload File module** included in the Platform Extensions bundle.

!!! info
    To be able to include this functionality, the Platform Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [_Platform Extensions Bundle_](https://marketplace.etendo.cloud/#/product-details?module=5AE4A287F2584210876230321FBEE614){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Platform Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/platform-extensions/release-notes.md).

The **File reference** enhances the Etendo Classic capabilities by enabling file uploads directly within process definitions. 

This functionality, which can be used in processes as well as in windows, introduces an **intuitive file upload element** in the process form. Users can upload a **single file** for processing which is then used by the system as specified in the process definition.

!!!info
    The maximum file size users are allowed to upload are limited by default to 10MB. This is set in the preference `Maximum file upload size (MB)`. This file size check is performed both on the client's and on the server's side. 
    For more information about preferences visit the [Preference section in the User Guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/application.md#preference).


###### Example in Process Definition

The proposed solution involves incorporating a **File Upload** Reference as a process parameter in process definitions.

This reference has a User Interface Definition which calls the process, this can be seen in the **Process Definition tab**:

`com.etendoerp.upload.file.definition.ProcessFileUploadUIDefinition`

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/upload-file-2.png)

This definition calls a process `OBProcessFileUpload` that executes a JavaScript that has all the definitions, rules and configurations to make the reference work, and allows to select a file for later upload.

!!!info
    Any file can be selected since this module was thought as a base so that programmers can use it for their needs. 

This is an example of a `Process Definition` created, it is defined as follows:

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/upload-file-1.png)

After creating the `Process Definition`, a **Menu** is created to visualize the process which, in its corresponding window, allows choosing a file to upload. 

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/upload-file-0.png)

#####  Downloading files

Process definition has the ability to generate and download a file.

In this case of Process Definition, extend from `FileExportActionHandler` and implement the **generateFileToDownload** and **getDownloadFileName** methods.

```java
/**
 * Action handler example to export a file from a process definition
 */
public class ExportFileExample extends FileExportActionHandler {
  private static final String FILE_PREFIX = "Test";
  private static final String FILE_EXTENSION = ".txt";
 
  @Override
  protected Path generateFileToDownload(Map<String, Object> parameters, JSONObject data)
      throws IOException, JSONException {
    String tmpFileName = UUID.randomUUID().toString() + FILE_EXTENSION;
    File file = new File(ReportingUtils.getTempFolder(), tmpFileName);
    try (FileWriter outputfile = new FileWriter(file)) {
      outputfile.write("Hello World!");
    }
    return file.toPath();
  }
 
  @Override
  protected String getDownloadFileName(Map<String, Object> parameters, JSONObject data) {
    return FILE_PREFIX + FILE_EXTENSION;
  }
}
```

!!!info
    If the process definition is launched from a button in a standard window with a header and lines and it is not configured as multi-record, the generated file will be attached to the header by default.

This behavior can be modified overriding the method uploadAttachment.

```java
@Override
protected void uploadAttachment(Path originalFile, Map<String, Object> parameters,
    JSONObject data) throws IOException, JSONException {
}
```

!!!info
    As an example:

    ```java
    protected Path generateFileToDownload(Map<String, Object> parameters, JSONObject data)
        throws IOException, JSONException {
      String tmpFileName = UUID.randomUUID().toString() + ".txt";
      File file = new File(ReportingUtils.getTempFolder(), tmpFileName);
      try (FileWriter outputfile = new FileWriter(file)) {
        outputfile.write("Hello World!");
      }
      return file.toPath();
    }
    ```

####  Limitations

#####  References

Currently, not all references available in **Standard windows** are available in **Process Definition**. The following ones cannot be used as parameters:

  * Button: the mechanism to add new buttons is described in [Adding new buttons](how-to-create-a-standard-process-definition.md#adding-new-buttons). 
  * Image 
  * Masked String 
  * Table 
  * TableDir 
  * Tree

#####  UI Logic

Callouts are not implemented for parameters.

####  Migrating old Processes

Process Definitions support several parameters. In order to implement this support, the way grid parameter value is sent to backend was changed and a new **Compatibility with Legacy Grids** flag was added.  

To migrate grid legacy compatible processes to new format, set **Compatibility with Legacy Grids** to false and depending on the case:

  * If the process **UI Pattern** is **Manual** , no other change is needed. 
  * If the process has no parameter, no other change is needed. 
  * If the process has a (grid) parameter, the `JSON` that `doExecute` method receives changes these are the required modifications: 

```java title="Old Code"
JSONObject gridInfo = new JSONObject(content);
JSONArray gridSelection = gridInfo.getJSONArray("_selection");
JSONArray gridAllRows = gridInfo.getJSONArray("_allRows");
```

```java title="New code" 
JSONObject params = new JSONObject(content).getJSONObject("_params");
// Replace here gridColumnName with the actual DB Column Name for your grid parameter
JSONObject gridInfo = params.getJSONObject("gridColumnName");
JSONArray gridSelection = gridInfo.getJSONArray("_selection");
JSONArray gridAllRows = gridInfo.getJSONArray("_allRows");  
```

This work is a derivative of [How to Create a Standard Process Definition](http://wiki.openbravo.com/wiki/How_to_create_a_Standard_Process_Definition){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.


==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Stored Procedure
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Stored Procedure
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-stored-procedure
## Article Content: 
### How to create a Stored Procedure

#### How to create a Stored Procedure

Stored procedures are one of the mechanisms Openbravo ERP provides in order to implement business logic. Stored procedures are executed by the database engine and are implemented in the standard PL/pgSQL (for PostgreSQL) or PL/SQL (for Oracle) language. One must understand the particularities about how these PL/SQL procedures are integrated with the rest of the application. It is also necessary to follow some coding rules in order to make it possible to export/import to XML files using DBSourceManager.

This document discusses the Openbravo infrastructure for stored PL/SQL procedures. These act as Processes in the Application Dictionary.

#### AD_PInstance and AD_PInstance_Para tables

Before implementing a PL/SQL procedure it is important to understand how it will be called from the application.

When a PL/SQL procedure is called a new record is created inside the _AD_PInstance_ table. This record contains the information about the ID of the record that the PL/SQL procedure was called from (in case the process is invoked from a button inside a window/tab). This record in the _AD_PInstance_ table is also used by the user interface to retrieve and display the resulting message the procedure generates when it completes (error or success).

In case the process has additional parameters entered by the user a new record is created for each of them inside the _AD_PInstance_Para_ table. Each record contains the information related to one of the parameters such as its name (_DB Column name_) and the value the user assigned to it.

Finally, note that the ID of the newly created record in _AD_PInstance_ table is the ONLY parameter passed to the PL/SQL procedure. It is the stored
procedure's responsibility to read the AD_PInstance and AD_PInstance_Para record(s) to obtain any parameters it requires and writes the resulting message back into the _AD_PInstance_ table.

#### Procedure definition

The header for a PL/SQL procedure implementing a process looks like:

**PostgreSQL**

```
CREATE OR REPLACE FUNCTION HR_TEST(p_PInstance_ID character varying) RETURNS void
```

**Oracle**

```
CREATE OR REPLACE PROCEDURE HR_TEST(p_PInstance_ID IN VARCHAR2)
```

First of all take a look to the PL/SQL procedure name, it follows the modularity naming rules, this is, it starts with the module's _DBPrefix_.

Note that the only parameter the PL/SQL procedure receives is a string one, it will contain the UUID for the key of the _AD_PInstance_ record generated for its invocation.

#### Retrieving parameters

**PostgreSQL** and **Oracle**

```
SELECT 
  Record_ID, 
  CreatedBy
INTO 
  v_Record_ID, 
  v_User_ID
FROM 
  AD_PInstance
WHERE 
  AD_PInstance_ID = p_PInstance_ID;

FOR Cur_Parameter IN 
(
  SELECT 
    p.ParameterName,
    p.P_String,
    p.P_Number,
    p.P_Date
  FROM 
    AD_PInstance_Para p
  WHERE 
    AD_PInstance_ID=p_PInstance_ID
  ORDER BY 
    p.SeqNo
)
LOOP
  IF(Cur_Parameter.ParameterName='DateFrom') THEN
    v_DateFrom:=Cur_Parameter.P_Date;
  ELSIF(Cur_Parameter.ParameterName='Activate') THEN
    v_Activate:=Cur_Parameter.P_String;
  END IF;
END LOOP; -- Get Parameter
```

The snippet of code above is an example of how the parameters can be retrieved.

The first select obtains from _AD_PInstance_ the IDs (UUIDs) for the user that invoked the process and the record ID it was called from. The record ID only makes sense in case the process is called using a button in a tab. In this case this ID identifies the record in the table that the tab with the button is based on. This is used for processes that affect the current record.

Afterwards, a loop obtains all the parameters and iterates only in case the process has parameters defined. Notice that the parameter is identified by _ParameterName_ which matches _DB Column name_ defined in the parameter. Depending on its type the actual value is stored in one of the following columns: `P_String` , `P_Number` or `P_Date` . The stored procedure needs to know what to expect and retrieve it accordingly.

#### Updating _AD_PInstance_

_AD_PInstance_ table has a `IsProcessing` column, which indicates whether an instance is currently being processed or not. At the beginning of the process the instance should be set as processing with:

```
AD_UPDATE_PINSTANCE(p_PInstance_ID, NULL, 'Y', NULL, NULL);
```

Once the process is finished, the instance should be set again to not processing. Not only that, this instance will be used to display the result of the process which will be shown in the user interface. This is done with:

```
AD_UPDATE_PINSTANCE(p_PInstance_ID, v_User_ID, 'N', v_Result, v_Message);
```

Here the `v_Result` parameter is a numeric value, it can be 0 for error or 1 for success. The `v_Message` is the message that will be shown, for further information about how to manage messages read the section below.

#### Managing exceptions

The exceptions in a PL/SQL procedure should be captured in order to insert the proper message in the _PInstance_ table to be correctly displayed to the user. Thus is a good practice to have an _EXCEPTION_ section to catch all the exceptions in the body of the procedure.

This would be a complete procedure with the _EXCEPTION_ section.

**PostgreSQL**

```
CREATE OR REPLACE FUNCTION HR_TEST(p_PInstance_ID character varying)
RETURNS void
$BODY$
  BEGIN
  -- Your code here

  EXCEPTION
  WHEN OTHERS THEN
    v_ResultStr:= '@ERROR=' || SQLERRM;
  RAISE NOTICE '%',v_ResultStr;
  IF(p_PInstance_ID IS NOT NULL) THEN
    PERFORM AD_UPDATE_PINSTANCE(p_PInstance_ID, NULL, 'N', 0, v_ResultStr);
  END IF;
  RETURN;
  END; 
$BODY$
LANGUAGE 'plpgsql' VOLATILE
```

**Oracle**

```
CREATE OR REPLACE PROCEDURE HR_TEST(p_PInstance_ID IN VARCHAR2)

BEGIN

  -- Your code here

  EXCEPTION
  WHEN OTHERS THEN
    v_ResultStr:= '@ERROR=' || SQLERRM;
  DBMS_OUTPUT.PUT_LINE(v_ResultStr);
  IF(p_PInstance_ID IS NOT NULL) THEN
    ROLLBACK;
    AD_UPDATE_PINSTANCE(p_PInstance_ID, NULL, 'N', 0, v_ResultStr);
  ELSE
    RAISE;
  END IF;
END HR_TEST;
```

As all exceptions in the body are caught to correctly take the message from it and add it to the _PInstance_ setting it to result 0 (error), it is possible to raise custom exceptions when some logical error happens during the execution, because they will also be caught. For example the following piece of code does some checks and in case they fail an exception is thrown.

**PostgreSQL**

```
IF checkFails THEN
  RAISE EXCEPTION '%', '@HR_SomeNiceMessage@';
END IF;
```

**Oracle**

```
IF checkFails THEN
  RAISE_APPLICATION_ERROR(-20000, '@HR_SomeNiceMessage@');
END IF;
```

For further explanations on messages read the Messages documentation.

#### Functions

Database functions are also supported.

##### Volatility

Functions can define different volatility levels. Note Oracle does not implement any equivalent for stable functions, in case a function is marked in
PostgreSQL as stable, it will be implemented as a standard function in Oracle adding a comment so that the exported xml keeps this information.

PostgreSQL - Oracle equivalences:

| PostgreSQL         | Oracle        |
|--------------------|---------------|
| Volatile (default) | Default       |
| Stable             | N/A           |
| Immutable          | Deterministic |

---
This work is a derivative of [How to Create a Stored Procedure](http://wiki.openbravo.com/wiki/How_to_create_a_Stored_Procedure){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Table
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Table
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-table
## Article Content: 
### How to Create a Table

#### How to create a new table

More generic documentation about tables and their characteristics in Etendo can be found in the [Tables](https://docs.etendo.software/latest/concepts/Tables.md) page. That page explains common columns needed for all tables in Etendo, naming rules and more important info.

First of all, the underlying database structures that will hold the data need to be created. In other words, using a database administration tool (e.g., [pgAdmin 4](https://www.pgadmin.org/){target="\_blank"} or [phpPgAdmin](https://github.com/phppgadmin/phppgadmin){target="\_blank"} for PostgreSQL and [Oracle SQL Developer](https://www.oracle.com/database/sqldeveloper/){target="\_blank"}) one needs to first `CREATE TABLE` that will be used to hold data of the new window/tabs.

##### Objective

Imagine we are developing an HR module and we need a window that will enable the user to input salaries of employees. We also need to track the employee's salary so history records need to be preserved. Each salary record needs to have a Valid From Date field that indicates when a particular salary came into being. The record belonging to a particular employee with the latest Valid From Date is the salary that is valid today. Note that employees are already inside the system contained in the `C_BPARTNER` database table and indicated by the `C_BPARTNER ISEMPLOYEE` column. Therefore, we only need to create a database table that will hold the actual salaries.

##### Modularity

All new developments must belong to a module that is not the _core_ module. Please follow the [How to create a module](How_To_Create_a_Module.md) section of the Modularity Developer's Manual to create a new module.

Once you have registered the module, you need to decide on the database prefix that will indicate DB items that belong to this module. This is done by adding DB prefix(es) to the module That way, any database artefact(table, trigger, stored procedure) that belongs to that module will need to have the name prefixed with it. In our case, add the `HT` _DB prefix_.

Finally, the data package needs to be entered in the _Data Package_ tab of the _Module_ window. Enter a new record there with HR Data as the _Name_ and _{modulePackage}.data_ (note that this package must be a subpackage of the one you entered on the level of module), for example com.etendoerp.howtos.data in case com.etendoerp.howtos is the package of the module.

##### Create new tables in the database

Let's introduce a new database table called `ht_salary` that will hold the required data. Notice the `HT` prefix of the table name indicating the module this table belongs to.

The new `ht_salary` table must include the `AD_Client_ID`, `AD_Org_ID`, `IsActive`, `Created`, `CreatedBy`, `Updated` and `UpdatedBy` fields that are `mandatory` and required for security and auditory purposes of the application.

| Column name     | Type   | Length | Note                                                                                                                                   |
| --------------- | ------ | ------ | -------------------------------------------------------------------------------------------------------------------------------------- |
| `HT_SALARY_ID`  | CHAR   | 32     | The primary key of the table that must follow the table name followed by the \_ID.                                                     |
| `AD_CLIENT_ID`  | CHAR   | 32     | Indicates which client (company) the record belongs to (multitenancy).                                                                 |
| `AD_ORG_ID`     | CHAR   | 32     | Indicates which organization (city/department/location) within a client a record belongs to.                                           |
| `ISACTIVE`      | CHAR   | 1      | This is intended for deactivating records that are not valid anymore but are referenced within the system and hence cannot be deleted. |
| `CREATED`       | DATE   |        | Date/time of creation of a record.                                                                                                     |
| `CREATEDBY`     | CHAR   | 32     | Foreign key to `AD_USER` indicating the user that created this record.                                                                 |
| `UPDATED`       | DATE   |        | Date/time of last update of a record.                                                                                                  |
| `UPDATEDBY`     | CHAR   | 32     | Foreign key to `AD_USER` indicating the user that last updated this record.                                                            |
| `C_BPARTNER_ID` | CHAR   | 32     | Employee this salary belongs to.                                                                                                       |
| `AMOUNT`        | NUMBER | 10     | The actual amount of the salary.                                                                                                       |
| `C_CURRENCY_ID` | CHAR   | 32     | Foreign key to `C_CURRENCY` indicating the currency the amount is in.                                                                  |
| `VALIDFROM`     | DATE   |        | Date that this salary is valid from.                                                                                                   |

To create the above table within the database, use one of the following `CREATE TABLE` statements depending on the DB you are using:

!!!note
    All identifiers in the SQL must be written in lowercase. So they can be used later without quoting them.

```sql title="SQL table creation script"
CREATE TABLE ht_salary
(
  ht_salary_id  CHARACTER VARYING(32)		NOT NULL,
  ad_client_id  CHARACTER VARYING(32)		NOT NULL,
  ad_org_id     CHARACTER VARYING(32)		NOT NULL,
  isactive      CHARACTER(1)                   NOT NULL        DEFAULT 'Y',
  created       TIMESTAMP WITHOUT TIME ZONE 	NOT NULL 	DEFAULT now(),
  createdby     CHARACTER VARYING(32)		NOT NULL,
  updated       TIMESTAMP WITHOUT TIME ZONE 	NOT NULL 	DEFAULT now(),
  updatedby     CHARACTER VARYING(32)         	NOT NULL,
  c_bpartner_id CHARACTER VARYING(32)         	NOT NULL,
  amount	 NUMERIC 	      	        NOT NULL,
  c_currency_id VARCHAR(32)         	        NOT NULL,
  validfrom     TIMESTAMP WITHOUT TIME ZONE    NOT NULL,
    CONSTRAINT ht_salary_isactive_check CHECK (isactive = ANY (ARRAY['Y'::bpchar, 'N'::bpchar])),
    CONSTRAINT ht_salary_key PRIMARY KEY (ht_salary_id),
    CONSTRAINT ht_salary_ad_org FOREIGN KEY (AD_ORG_ID) REFERENCES AD_ORG (ad_org_id),
    CONSTRAINT ht_salary_ad_client FOREIGN KEY (AD_CLIENT_ID) REFERENCES AD_CLIENT (ad_client_id),
    CONSTRAINT ht_salary_c_bpartner FOREIGN KEY (C_BPARTNER_ID) REFERENCES C_BPARTNER (c_bpartner_id),
    CONSTRAINT ht_salary_c_currency FOREIGN KEY (C_CURRENCY_ID) REFERENCES C_CURRENCY (c_currency_id)
);
```

##### Registering the table within the Application Dictionary

The following steps register the newly created table within the Etendo Classic Application Dictionary.

For this purpose, first log into Etendo Classic using a username with access to `System Administrator` > `Role`. Navigate to `Application Dictionary`> `Tables and Columns` and create a new record as shown in the screenshot below:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Table-1.png)

Main fields of this window are (for more information, see the `AD_Table` table description):

- _Data Package_ specifies to which java data package within the module the table will belong when used within [DAL](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md) (Data Access Layer).
- _Name_ Defines the name that Etendo Classic uses to recognize the defined database table. This name is used in [REST webservices](https://docs.etendo.software/latest/concepts/XML_REST_Web_Services.md) and in the [Data Access Layer](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md#entity-naming).
- _Description_ Gives a small description of the table.
- _Help/Comments_ Defines the text that is displayed in Help window.
- _DB Table name_ Defines database table name as it was defined by the `CREATE TABLE` during its creation.
- _Java Class Name_ This will be the actual Java class within the Data Package of the module through which you will be able to access this table when using DAL.
- _Data Access Level_ determines what kind of data will the table contain due to the multitenancy functionality
  - _System only_: Only system records can be inserted into this table (`AD_CLIENT_ID=0`, `AD_ORG_ID=0`), for example `AD_TABLE`.
  - _System/Client_: System or client specific records can be inserted here (`AD_CLIENT_ID=anything`, `AD_ORG_ID=0`), for example `AD_ROLE`
  - _Organization_: Only client and organization specific data can be inserted into this table (`AD_CLIENT_ID<>0`, `AD_ORG_ID<>0`), for example `C_INVOICE`
  - _Client/Organization_: Only client specific data can be inserted here, however, it can belong to a specific organizations within that client or be shared among all (`AD_CLIENT_ID<>0`,`AD_ORG_ID=anything`), for example `C_BPARTNER`
  - _All_: Any combination of `AD_CLIENT_ID` and `AD_ORG_ID` can be inserted into this table.

Save this record then press the _Create columns from DB_ button to create columns within the Column tab automatically.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Table-2.png)

Once the creation process has finished, you will be informed of the number of columns that have been added to this table.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Table-3.png)

Switch to _Column_ tab to see all the columns (for more information, see the AD*Column table description) that were created according to their definition within the database. You can now additionally alter the properties of each column. Each column is assigned a reference (which defines the data type) depending on its name and its data type. Run \_Synchronize Terminology* process (`Application Dictionary` > `Synchronize Terminology`). Two tricky details before you run it:

- Check you have defined dependencies from your module to core and any other needed module. Synchronize Terminology will link your columns to Elements in your module or in modules it depends on. If you don't declare the dependency to core, the system will create new elements for standard columns like IsActive, CreatedBy, etc.
- Do not set the Elements linked to your columns, let the Synchronize terminology to do the job. This way, the process will find the appropiate elements and will set the proper column names for the standard columns (IsActive, CreatedBy, etc.).

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Table-4.png)

This process tries to find an existing application element (within the currently developed module) and thus its label, help and description and if one is not found, a new one is created. This enables a centralized translation of the application/module.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_a_Table-5.png)

Each table must have at least one column marked as an identifier. The actual values of identifier columns later get concatenated to be shown to the user as a representation of a particular record (see the link to the Sales Order within the Sales Invoice window). These identifiers will also be used to construct dropdown lists of records of that particular table. By default all columns with column name _Name_ are set as an identifier. In case there is no column with this _Name_ , no identifier is set and needs to be done so manually or compilation will fail.

The name is used by the [Data Access Layer](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md) and in [REST webservices](https://docs.etendo.software/latest/concepts/XML_REST_Web_Services.md). For specific columns (audit info, client/organization, active) it is important to be precise in the naming.

!!!note
    The columns that are named `line` or `seqNo` are used to contain the sequence number of a record (i.e. the number of a line in an invoice They take a default value like:

    ```
    @SQL=SELECT COALESCE(MAX(ColumnName),0)+10 AS DefaultValue FROM TableName
    WHERE xxParentColumn=@xxParentColumn@
    ```

    The `WHERE` part of this clause needs to be replaced with the required values. The code that should appear here is the name of the column which links with the _id_ of the parent one For example, each record of the `C_InvoiceLine` belongs to a particular `C_Invoice` record and they are all sequenced. `C_Invoice` is the parent table for the lines saved in `C_InvoiceLine` . This table has a column named line and the default value that it takes is:

    ```
    @SQL=SELECT COALESCE(MAX(LINE),0)+10 AS DefaultValue FROM C_INVOICELINE
    WHERE C_INVOICE_ID=@C_INVOICE_ID@
    ```

Most of the columns in our specific `HT_SALARY` case will be automatically detected correctly, however, some need revising:

- _Amount_ : Reference = _Amount_ , Length = _10_
- _C_BPartner_ID_ : Reference = _Search_ , Reference Search Key = _Business Partner_ , Length = _32_ , Link To Parent Column = _Y_
- _Valid From_ : Identifier = _Y_
- _Amount_ : Identifier = _Y_

Etendo Classic now knows about the new HT_SALARY database table and how to treat it in terms of its definition and the representation to the user.

##### Rebuilding the system

Finally to make the newly added table available at runtime `./gradlew generate.entities` needs to called and the changes deployed to Tomcat. Those two steps can be done together by calling `./gradlew smartbuild` . After that, Tomcat must be restarted to refresh the DAL In-Memory Model, so it knows about the newly added columns.

---

This work is a derivative of [How to Create a Table](http://wiki.openbravo.com/wiki/How_to_create_a_Table){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create a Window
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create a Window
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-window
## Article Content: 
### How to Create a Window

#### Overview

The objective of this section is to show how you can create a new window from scratch. 

!!!info
    This section builds on top of two previous sections which explain
    [How to Create a Module](https://docs.etendo.software/latest/how-to-guides/How_To_Create_a_Module.md)  and [How to Create a Table](https://docs.etendo.software/latest/how-to-guides/How_to_create_a_Table.md).

#### Module & Table

As mentioned above, this tutorial is based on two previous tutorials and assumes that the following objectives have been already completed:

  * Creation of a new module
  * Creation + Registration in the AD of a new table

####  Creating the New Window

Using the *System Administrator* role navigate to `Application Dictionary` > `Windows, Tabs and Fields `. 
Create a new record as indicated by the screenshot below:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Create_a_Window_0.png) 


The main fields of this window are:


  - *Module*: defines the module for which this element will belong to.
  - *Name*: defines the name that Etendo uses to recognize this window. 
  - *Description*: gives a small description of the table. 
  - *Help/Comments*: defines the text that is displayed in Help window. 
  - *Window Type*: defines some user interface specifics for a window: 
    - _Maintain_ : is used for windows with few entries. 
    - _Transaction_ : for transactional windows. It's the type of window that's used for showing the information of tables with a large volume of data. By default this window filters out old (n days – `General Setup` > `Application ` >`Session Preferences` window setting) and processed documents. The header tab's underlying table must contain the PROCESSED and UPDATED columns (for the data filters to work).
    - _Query Only_ : for read-only windows that only enable viewing of data. 

  
Save this record and move to *Tab* tab. Create a new record as shown
below, creating the first tab:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Create_a_Window_1.png)  


Main fields of this window are:

  * *Module*: defines the module for which this element will belong to.
  * *Name*: defines the name that Etendo uses to recognize this tab. 
  * *Description*: gives a small description of the table. 
  * *Help/Comments*: defines the text that is displayed in Help window. 
  * *Table*: specifies the table that the tab will show the data from. 
  * *Table Level*: defines the hierarchy of tabs, _0_ being the highest level. 
  * *UI Pattern* This dropdown offers the following options: 
    * _Standard_ \- standard interface where multiple records can be added, viewed and edited 
    * _Read Only_ \- this option disables any editing/creating capabilities for any user within this tab 
    * _Single Record_ \- this option enforces a one-to-one relationship between a parent and a child tab, allowing the user to enter maximum one record in the tab 
  * *HQL Where Clause*: by using this HQL filter, the user will never be able to see data that does not fit the criteria. When referring to properties of the entity shown in the tab then use the prefix *e* . In our case, we use this field to display only business partners that are our employees (using the _employee_ property). 
  * *SQL Where Clause* Same like HQL Where Clause but using SQL syntax and used for filtering in _classic windows_ . 

The *Copy Tab Fields* button can be used to copy fields from an existing tab into our new
one.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Create_a_Window_2.png) 

The *Create Fields* button can be used to create fields for the new tab based on its associated table
  
Move to *Field* tab to see the created fields.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Create_a_Window_3.png)  
  
If required, changes to these fields could be made or new ones could be added manually. 

!!!note
    For not header tabs, it is very important to not remove the field
    that points to the ID field of its parent tab, as it would made not possible to create records in this tab using the grid view. 


Now, go back to *Tab* tab and create a new record that will represent the
child tab of the Employee tab where salaries will be managed:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Create_a_Window_4.png) 

Most importantly, make sure you select:

  * *Table* = `HT_Salary`
  * *Tab Level* = _1_


By clicking and confirming the *Create Fields* dialog, the application will
automatically insert the columns of the selected table into the fields tab of
the *Salary* one.

  
To arrange the columns according to common look and feel of other windows, we now change a view field properties as can be seen in following screenshot.

  * Hide field _c_bpartner_id_
  * Reorder fields (using sequence), to have _isactive_ after all other fields 
  * Mark _amount_ and _isactive_ as *Start in new line*

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Create_a_Window_5.png) 


  
For Etendo, to create links (labels that appear blue) to table elements, the system needs to know which window represents the table where a certain element resides.

To indicate that, go to the `Application Dictionary` > `Tables and Columns` window, find the corresponding table and set the *Window* as indicated below:

  
![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Create_a_Window_6.png)

####  Creating the Menu Item

A menu item is required for the user to be able to call up the new window. Using the System Administrator role navigate to `General Setup` > `Application` >`Menu` and create a new record:

  
![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Create_a_Window_7.png)
  
Main fields of this window are:

  * *Module*: defines the module for which this element will belong to.
  * *Name*: defines the name that Etendo uses to recognize this menu item. 
  * *Description*: gives a small description of the table. 
  * *Summary level*: defines a folder containing menu items (windows, processes, reports and so on). 
  * *Action*: defines the type of menu item. 
  * *URL* If _Action_ is _External link_ or _Internal link_ , defines the _URL_ to be linked. 
  * *Special Form*: If _Action_ is _Form_ , defines the form to be linked. 
  * *Process*: If _Action_ is _Process_ , defines the process to be launched. 
  * *Report*: If _Action_ is _Report_ , defines the report to be linked. 
  * *Window*: If _Action_ is _Window_ , defines the window to be linked. 

Save this record then click on _Tree_ icon ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Create_a_Window_8.png)


Here you can drag and drop the new menu item to any of the
other menu groups.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Create_a_Window_9.png)


####  Compiling the Application with the New Window

Finally, the application needs to be recompiled in order to generate the new window's code and deploy it to Tomcat. 

```bash
./gradlew smartbuild
```

####  The Result

Using the *F&B International Group Admin* role, select the link to the new window from the menu. 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Create_a_Window_10.png)
  
!!!success
    You have now successfully created your own new window and seen how it came to life within Etendo. 

---

This work is a derivative of [How to create a window](http://wiki.openbravo.com/wiki/How_to_Create_a_Window){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.



==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create Accounts Files
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create Accounts Files
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-accounts-files
## Article Content: 
### How to Create Accounts Files

#### Overview
Etendo supports importing the Chart of Accounts through a [CSV](https://en.wikipedia.org/wiki/Comma-separated_values){target="\_blank"} (comma-separated values) file with a concrete structure. This CSV file is afterward included into a module that can be distributed and installed from [Etendo marketplace](https://marketplace.etendo.cloud/#/){target="\_blank"}.

To create the CSV file, it is recommended to use any spreadsheet sofware that supports exporting to CSV, like [LibreOffice Calc](https://www.libreoffice.org/){target="\_blank"}.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/CSVfile.png)

#### File Structure

The file is a plain text file, with commas (,) as field separator, that defines all the accounts. To ensure that your chart of accounts is imported correctly, the file must be encoded using [UTF-8](https://en.wikipedia.org/wiki/UTF-8){target="\_blank"} charset.

For creating your own CSV file, you can either download the [Spanish Chart of Accounts CSV file](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/COA.csv) and use it as a template to adapt it to your needs, or you can create the entire file from scratch.

Each field of the file comprises one line.

| Field Name          | Description                                                       | Mandatory | Length and type                |
|---------------------|-------------------------------------------------------------------|-----------|--------------------------------|
| Search key           | This is the unique identifier that defines the account.           | Yes       | Up to 20 alphanumeric characters |
| Name                | The name of the account                                           | Yes       | Up to 60 characters            |
| Description         | Brief description for the account                                 | No        | Up to 255 characters           |
| Account Type        | Defines the type of the account. Defines the type of the account. It can contain any text, but only the first character is used. This first character must be one of the following:  <ul><li>A:Asset</li><li>L:Liability</li><li>O:Owner's equity</li><li>E:Expense </li><li>R:Revenue</li><li>M:Memo</li></ul>                                | Yes       | Any length but only the first character is used. |
| Account Sign        | Defines the sign of the account in the reports. An account has got two columns: debit and credit. Amounts are added to one of the columns in each entry. At the end of the day, one account will have got two amounts: debit and credit amounts. The sign of the whole account (due to debit and credit movements) can be established following one of the next rules: <ul><li>N: Natural (Sign is always positive) </li><li>D: Debit (Sign is positive if debit amount is higher than credit one; negative in other case)</li><li>C: Credit (Sign is positive if credit amount is higher than debit one; negative in other case)</li><li>E: Empty</li></ul>                  | Yes       | Any length but only the first character is used. |
| Document Controlled | If this is a default account used in the general ledger configuration type "Yes". Otherwise, type "No". The fields with this field set to Yes are processed during the Initial Client Setup process | Yes | Must be Yes, No or Empty |
| Account Summary     | This field is defines the account as a summary account.           | Yes       | Must be Yes, No or Empty      |
| Default Account     | See below for details.                                             | Yes       | See below the set of valid values |
| Parent_Value        | Defines the account's parent account. The parent is ignored during the Initial Client Setup process.                             | No        | Must be the search key of a valid summary account |
| Element Level       | Defines the level of the account.  The last level that correspond with Account Summary = N, must be S (Subaccount). Any other level can be added to the existing ones. As they are defined in the dictionary as a reference list, you can edit this list and modify the values shown for this field, setting all the new values you need. The only thing that must be noted is that the lowest level must be 'S' Subaccount, as accounting reports uses this value.Following levels are defined by default in the Etendo Classic:<ul><li>C: Account</li><li>D: Breakdown</li><li>E: Heading</li><li>S: Subaccount</li></ul>                                 | No        | Unlimited but only the first letter is used. |
| Operands            | If the account is the product of a calculation between other accounts, you can define the operands here. For example, if the value of account A is the result of adding the value of accounts B and C, the value of the operand column in the chart of accounts would be B+C. This feature works only if referred operands are already inserted before, otherwise system can not find them when trying to insert them. | No | Unlimited |
| Show Value Condition | User can, optionally, set here the value for "Show Value Condition" field of the Element Value tab. | No | Positive, Negative, Algebraic (default value if empty cell) |
| Title Node          | User can, optionally, activate here the flag "Title Node" of the element value tab. | No | Yes, No (default value if empty cell) |

#### Which accounts must be defined?

How you define your accounts file depends primarily on whether there are official rules in your country. For example, in countries like France or Spain there are standard charts of accounts and general accounting reports. In this case you must define a chart of accounts with the structure of the general accounting reports that include all the accounts. Other countries such as the USA have no defined plan, so you must define a general plan that suits your enterprise. The structure of the file must include the Balance Sheet (with Assets, Liabilities and Owner’s Equity) and a Profit and Loss report (with Expenses and Revenues).

#### Accounts hierarchy

The general accounting report has a hierarchical structure. The Balance Sheet has two sides, following the equation Assets = Liabilities + Owner’s equity. The Asset side of the balance sheet is composed of different types of assets: Current Assets and Long Term Assets, and each one can have different sub-accounts.

The levels of this hierarchy can differ from one account tree to another; the only requirement is that the last level, where the accounting is done, must start with the letter S (from Sub-account).

The *Parent_Value* column of the accounts file creates the hierarchical relationship between accounts. This column specifies which account is the parent of the account.

#### Default accounts

Etendo Classic makes most account entries automatically. To enable automatic account entries, it is necessary to define the default accounts. With this information, Etendo Classic builds the accounting entry with the account number defined in the chart of accounts.

The mandatory default accounts are defined in the chart of accounts file with a constant that must be written literally in the *Default Account* column. The following table has an explanation of these accounts.

| Default                 | Type           | Description                                                             | Example of name of the account                                   |
|-------------------------|----------------|-------------------------------------------------------------------------|-------------------------------------------------------------------|
| A_ACCUMDEPRECIATION_ACCT | Asset          | Account used by the amortization process to show the depreciation of an asset | Accumulated Depreciation                                        |
| A_DEPRECIATION_ACCT      | Expense        | Account used by the amortization process to define the lost of value caused by the depreciation of an asset | Depreciation Expense                                             |
| B_ASSET_ACCT             | Asset          | The account used for the movements of a bank account                    | Bank Account                                                     |
| B_EXPENSE_ACCT           | Expense        | Charges made by the bank                                                | Bank charge                                                      |
| B_INTRANSIT_ACCT         | Asset          | Account used for the period between the settlement and the bank statement registration | Bank in transit                                                  |
| B_REVALUATIONGAIN_ACCT   | Revenue        | Account for the revenues due to gain for revaluations of foreign money | Bank revaluation gain                                            |
| B_REVALUATIONLOSS_ACCT   | Expense        | Account for the expenses due to loss for revaluations of foreign money | Bank revaluation loss                                            |
| C_RECEIVABLE_ACCT        | Asset          | Account for the payments to be received from an invoice. They are created in the invoice process and canceled when the payment is made or canceled.                | Accounts receivable                                              |
| C_PREPAYMENT_ACCT        | Asset          | The Customer Prepayment account indicates the account to be used for recording prepayments from a customer. Any payment against an order or any payment generating credit is considered as a prepayment. | Customer Prepayment                                              |
| CB_ASSET_ACCT            | Asset          | Account for the petty cash used by the company                         | Petty Cash                                                       |
| CB_CASHTRANSFER_ACCT     | Asset          | Account used for the money transferred from or to petty cash           | Petty Cash In-Transfer                                           |
| CB_DIFFERENCES_ACCT      | Expense        | Accounts for differences in petty cash                                 | Petty Cash differences                                           |
| CURRENCYBALANCING_ACCT   | Expense        | Account used for currency balancing (rounding)                         | Currency balancing                                               |
| DEFAULT_ACCT             | Expense        | Account used when there is not a defined account for other default     | Default account                                                  |
| INCOMESUMMARY_ACCT       | Owner's Equity | Account used to calculate the income for the period. Also it is used to show the income in the balance sheet before the closing process | Income summary                                                   |
| NOTINVOICEDRECEIPTS_ACCT | Liability      | Account used for the receipts that haven't been invoiced yet. It is used only if the company is configured to account shipments | Not invoiced receipts                                            |
| P_ASSET_ACCT             | Asset          | Account used for fixed assets                                          | Product asset                                                    |
| P_COGS_ACCT              | Expense        | Account for the cost of the good sold. It is used in the shipment of the product | Cost of goods sold                                               |
| P_COGS_RETURN_ACCT       | Expense        | Account for the cost of the good return. It is used in the shipment of a return of a product | Cost of goods returned                                           |
| P_EXPENSE_ACCT           | Expense        | Account used for the expenses from purchase invoices                   | Service costs                                                    |
| P_INVOICEPRICEVARIANCE_ACCT | Expense     | Invoice price variance                                                  | Invoice price variance                                           |
| P_REVENUE_ACCT           | Revenue        | Account used for the revenues from sale invoices                       | Sales                                                            |
| P_REVENUE_RETURN_ACCT    | Revenue        | Account used for the returns from sale invoices                        | Returns                                                          |
| RETAINEDEARNING_ACCT     | Owner's Equity | Account used for profits and losses of previous periods. It receives the value of income summary if it is defined | Retained earnings                                                |
| SUSPENSEBALANCING_ACCT   | Memo           | Account used in the accounting process if the accounting entry is not balanced and it is defined to produce an accounting entry | Suspense Balancing                                               |
| SUSPENSEERROR_ACCT       | Memo           | Account used when the accounting process produces an error and it is defined to produce an accounting entry | Suspense Error                                                   |
| T_CREDIT_ACCT            | Asset          | Tax that is due to the company                                         | Tax Receivables                                                  |
| T_CREDIT_TRANS_ACCT      | Asset          | Transitory Account for the Cash VAT that is not yet paid to the company | Tax Transitory Receivables                                       |
| T_DUE_ACCT               | Liability      | Tax owed by the company                                                 | Tax Due                                                          |
| T_DUE_TRANS_ACCT         | Liability      | Transitory Account for the Cash VAT that is not yet collected by the company | Tax Transitory Due                                               |
| V_LIABILITY_ACCT         | Liability      | Account for the payments due for an invoice. They are created in the invoice process and cancelled when the payment is made or cancelled | Accounts payable                                                 |
| V_PREPAYMENT_ACCT        | Liability      | The Vendor Prepayment Account indicates the account used to record prepayments from a vendor. Any payment against an order or any payment generating credit is considered as a prepayment. | Vendor Prepayment                                                |
| W_DIFFERENCES_ACCT       | Expense        | Gains or losses due to differences in the inventory                    | Inventory loss                                                   |
| W_INVENTORY_ACCT         | Asset          | Account used for recording the value of your inventory                 | Inventory Asset Account                                          |
| WRITEOFF_ACCT            | Expense        | Account used for irrecoverable amounts                                 | Bad debts                                                        |

#### Exporting the Chart of Accounts to the CSV file

Once we have entered all the accounts into our spreadsheet, it is time to export it to a CSV file. When exporting, the software will allow you to configure the concrete CSV format to use. It is important to ensure the following values are entered:

- Character set: *UTF-8*
- Field delimiter: , (comma)
- Text delimiter: " (double quote)

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/CSVfile_Export.png)

!!!note
    If you afterward want to edit this CSV file in your spreadsheet software, remember to use this configuration when opening it.

#### Chart of accounts in Etendo Classic

After the [Initial client setup process](how-to-run-an-initial-client-setup-process.md), the user can find the corresponding Chart of accounts in the *Account Tree* window of Etendo Classic.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/chartofaccountsics.png)

---

This work is a derivative of [Creating Account Files](https://wiki.openbravo.com/wiki/Creating_Accounts_Files){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create an Alert
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create an Alert
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-an-alert
## Article Content: 
###  How to Create an Alert

####  Overview

The objective of this how-to is to illustrate how you can add new  alerts  to
Etendo. Alerts are non-intrusive informational messages to individual users
or groups (roles) about everything within the system. One can define unlimited
number of alerts for various statuses, errors, informative purposes, reminder
etc. 

Some examples are:

  * Errors in the application dictionary that the System Administrator needs to be alerted about (e.g. a table without a an identifier)‏ 
  * Errors in master data (e.g. a Business partner without an address)‏ 
  * Notifications about critical situations (e.g. overdue payments)‏ 

and many more.

####  Defining the alert

First of all, the condition under which the alert appears needs to be defined.
This is done using a SQL statement that needs to follow certain conventions.

To create a new  alert  rule, use the role _*System Administrator*_ to navigate
to `General Setup` > `Application ` >`Alert` window. Depending on how you
installed Etendo, you might already have some alerts here. If you do, try
to find the _Customers with exceeded credit_ one and double click it. If not,
create a new record as indicated below:

  
![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how_to_create_an_alert-0.png)


where this is the exact code for the *SQL* field:

    
    
     
     SELECT c_bpartner_id AS referencekey_id,
         ad_column_identifier('C_BPartner', c_bpartner_id, 'en_US') AS record_id,
         0 AS ad_role_id,
         NULL AS ad_user_id,
         ad_column_identifier('C_BPartner', c_bpartner_id, 'en_US') ||' has '||SO_CreditLimit||' as limit and has reached '||SO_CreditUsed AS description,
         'Y' AS isActive,
          ad_org_id, 
          ad_client_id, 
          now() AS created,  
          0 AS createdBy,  
          now() AS updated,
          0 AS updatedBy
     FROM c_bpartner 
     WHERE SO_CreditLimit < SO_CreditUsed
     AND iscustomer='Y'
     AND SO_CreditLimit!=0

The fields in question here are:

  * *Name* is a user friendly name for an alert 
  * *SQL* is the actual SQL statements whose results (individual records) will be items alerted about 
  * *Tab* is a tab of a specific window where the user should be taken to be shown the item in question generated by the SQL statement 


####  Defining recipients

Switch to the role _*System Administrator*_ (or your defined 'administrator'
role), navigate to _`General Setup` > `Application ` >`Alert`_ , select
_Customers with exceeded credit_ alert and switch to the  *Alert Recipients*
tab. Add a new record as indicated below:

  
![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how_to_create_an_alert-1.png)

  
!!!note
    Notice that a role can be added (that includes several users) or a specific
    user.

####  Scheduling the alerting background process

For the alerts to be evaluated and triggered, the background process needs to
be scheduled. Using the role _*System Administrator*_ (or your defined 'administrator' role) navigate to _`General Setup` > `Process Scheduling ` >`Process Request`_ and enter a new record:

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how_to_create_an_alert-2.png)

####  The Result

Finally, log out and back in and select the role _*System Administrator*_ (or
your defined administrator role). You should be able to see an alert in the
navigation bar. By clicking on it, you will automatically be taken to the
_*Alert Management*_ window that should look something like:

  

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how_to_create_an_alert-3.png)

  

####  SQL code explained

In order to write any kind of alert, the approach is very similar. Let's take
another look at the SQL code that describes the condition:

    
    
     
     SELECT c_bpartner_id AS referencekey_id,
         ad_column_identifier('C_BPartner', c_bpartner_id, 'en_US') AS record_id,
         '0' AS ad_role_id,
         NULL AS ad_user_id,
         ad_column_identifier('C_BPartner', c_bpartner_id, 'en_US') ||' has '||SO_CreditLimit||' as limit and has reached '||SO_CreditUsed AS description,
         'Y' AS isActive,
          ad_org_id, 
          ad_client_id, 
          now() AS created,  
          '0' AS createdBy,  
          now() AS updated,
          '0' AS updatedBy
     FROM c_bpartner 
     WHERE SO_CreditLimit < SO_CreditUsed
     AND iscustomer='Y'
     AND SO_CreditLimit!=0

Each SQL statement basically simulates an Etendo table which is why it
needs to have all the columns defined above:

  * *referencekey_id* \- this is ID (primary key) of the record that needs attention and is the cause of the alert. In our case, this would be the C_BPartner_ID of Neil Reiley. 
  * *record_id* \- this is a user friendly label for the item that is in questions with the referencekey_id. Use the _ad_column_identifier_ function as shown to retrieve all column values required to uniquely identify the problematic record within the specific table. 
  * ad_role_id - should always be set to 0 
  * ad_user_id - should always be set to null 
  * *description* \- this is the message shown to the user describing what the problem is. You need construct this message according to what the alert is all about, indicating to the user what caused the alert and what the problem is. Again, use the _ad_column_identifier_ function as shown to retrieve all column values required to uniquely identify the problematic record within the specific table. 
  * isActive - should always be set to 'Y' 
  * ad_org_id - should be inherited from the actual record that triggers the alert, in this case, the record from the C_BPartner table 
  * ad_client_id - should be inherited from the actual record that triggers the alert, in this case, the record from the C_BPartner table 
  * created - should always be set to now() 
  * createdBy - should always be set to 0 
  * updated - should always be set to now() 
  * updatedBy - should always be set to 0 

Finally, the WHERE clause describes the condition that triggers the alert. In
our case the SELECT statement will return all Business Partners (FROM
c_bpartner) that are customers (iscustomer='Y') and have exceeded their credit
limit (`SO_CreditLimit < SO_CreditUsed`) which needs to be different from zero
(`SO_CreditLimit!=0`).

In other words, anything you can describe in a SQL statement can be defined as
an alert. 


This work is a derivative of [How to create an alert](http://wiki.openbravo.com/wiki/How_to_create_an_Alert){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.


==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create and Update Business Entities Using Web Services
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create and Update Business Entities Using Web Services
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-business-entities-using-web-services
## Article Content: 
### How to Create and Update Business Entities Using Web Services

#### Overview

The aim of this section is to show how to use some of **Etendo's available web services** to create business entities and/or to update them.

Therefore, these web services features will be explained in detail:

  * **JSON REST**
  * **Secure Web Services**

#### Execution Steps

To add or update entities, use `HTTP` commands. To execute any `HTTP commands`, a [**Java class**](https://docs.etendo.software/latest/how-to-guides/how-to-call-an-etendo-webservice-from-java.md) could be created and use the available classes related to the HTTP protocol.

!!!note
    We could do the same for any other protocol or scripting language like PHP.

Alternatively, use any plugin or application like [**Postman**](https://www.postman.com/downloads/){target="\_blank"} which allows executing any HTTP command on an URL of your choice. In the following examples we will make use of this plugin and we will assume that our Etendo environment is running on a local machine via `http://localhost:8080/etendo`.

##### JSON REST

We are about to create a new **invoice header**, so that the URL for this case will be:

    http://localhost:8080/etendo/org.openbravo.service.json.jsonrest/Invoice

In `Authorization` we have to select the **Basic Auth** type and add the credentials which we use to get access to the **Web Service** (which are by the way the same that we use to get into the application). Take into account that the visibility of the data within the web service will be the same as if you logged into the application with the default role of this user. The `Content-Type` of the Request will be `application/json` and the **body** content of the request will be as follows, where the `ID`s will be replaced by those needed to be present in the invoice. 


We have set the attribute `salesTransaction` to `true`, indicating that this is a sales invoice:


```json
    {
      "data":
      {
        "entityName":          "Invoice",
        "active":              true,
        "organization":        { "id": "E443A31992CB4635AFCAEABE7183CE85" },
        "salesTransaction":    true,
        "documentType":        { "id": "7FCD49652E104E6BB06C3A0D787412E3" },
        "transactionDocument": { "id": "7FCD49652E104E6BB06C3A0D787412E3" },
        "documentNo":          "1000050",
        "accountingDate":      "2012-05-29",
        "invoiceDate":         "2012-05-29",
        "currency":            { "id": "102" },
        "priceList":           { "id": "AEE66281A08F42B6BC509B8A80A33C29" },
        "businessPartner":     { "id": "9E6850C866BD4921AD0EB7F7796CE2C7" },
        "partnerAddress":      { "id": "BFE1FB707BA84A6D8AF61A785F3CE1C1" },
        "paymentTerms":        { "id": "66BA1164A7394344BB9CD1A6ECEED05D" },
        "paymentMethod":       { "id": "A97CFD2AFC234B59BB0A72189BD8FC2A" }
      }
    }
```

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Create_And_Update_Business_Entities_Using_Web_Services-0.png)

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Create_And_Update_Business_Entities_Using_Web_Services-1.png)

We use the HTTP `POST` command with this data. We will get a `200 OK` response back, indicating that everything went well with the invoice data that was just created.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Create_And_Update_Business_Entities_Using_Web_Services-2.png)

To make an update, we will use the `PUT` command. For instance, to update a Business Partner's name, we will execute that command on this URL:

  `http://localhost:8080/etendo/org.openbravo.service.json.jsonrest/BusinessPartner`

with the following content:

```json
    {
      "data":
      {
        "entityName": "BusinessPartner",
        "id":         "A6750F0D15334FB890C254369AC750A8",
        "name":       "New Name"
      }
    }
```

##### Secure Web Services

!!!note
    To know more about how Etendo introduces its own Secure Web Services with unique features, visit [How to Use Secure Webservices](https://docs.etendo.software/latest/how-to-guides/how-to-use-secure-webservices.md).

---

This work is a derivative of [How to Create and Update Business Entities using Web Services](https://wiki.openbravo.com/wiki/How_to_Create_And_Update_Business_Entities_Using_Web_Services){target="\_blank"} by [Openbravo Wiki](https://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create and Update Translation Modules
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create and Update Translation Modules
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-translation-modules
## Article Content: 
### How to Create and Update Translation Modules

#### Overview

This section describes the process of creating and updating translation modules in Etendo, including the Core's module. 

#### Creating a new translation module from scratch

##### Create module definition

The first thing to do is to create the translation module definition into the Application Dictionary.

Logged as System Administrator role, the user selects the `Application Dictionary` > `Module` window from the Application menu and creates a new record.

Translation modules are a special kind of modules. They have to be marked as Is translation module in the Module window, and they must define the translation language in the Module Language field.

No other contents than translations are allowed in translation modules. A translation module can only contain the translation for one module. For example, in the screenshot below, we are creating a *Spanish (Spain)* translation module for the User Interface Application module whose declared language is English (USA).

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-translation-modules/how-to-create-and-update-translation-modules-0.png)

Apart from checking the Is translation module and setting the Module Language, we need to add a dependency to the module and version we are translating. In the example, our *User Interface Application Translation Spanish (Spain)* module in version 1.0.0 depends on the *User Interface Application* module version 2.1.0.

##### Prepare strings to be translated

Logged with the *System Administrator* role, select the `General Setup`> `Application` > `Language` window from the Application menu. Find the language in which the user wants to create the translation module and check the System Language checkbox field. This checkbox allows this language to be selected in the user interface (Change role popup) in the next login.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-translation-modules/how-to-create-and-update-translation-modules-1.png)

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-translation-modules/how-to-create-and-update-translation-modules-2.png)

##### Verify Languages

Each time it is necessary to create a translation for a new language, it is necessary to prepare the strings to be translated. There is an automatic process, called Verify Languages (available as well in the Language window), in which the ERP creates the necessary copies of the original strings of all the modules available in the system from their base languages to the corresponding translation language.

For example, in the case of creating a *Spanish (Spain)* translation for the core's module, whose base language is *English (USA)*, the system will copy all the original English strings to the Spanish translation. The same is extended to the rest of the modules installed in the system with their respective base languages.

Using the Verify Languages button, the application will display the number of records created. If this number is equal to 0, it means that something was wrong, and the probable cause is that we have forgotten to check the System Language field.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-translation-modules/how-to-create-and-update-translation-modules-3.png)

##### Export the translation

Exporting the translation is an automatic process available in the `General Setup` > `Application` > `Import/Export Translations` window.

With the System Administrator role, select the language in which the user wants to export translation files. Export Reduced Version flag can be set to Yes to have a reduced translation version. This would exclude all translation candidates that are linked directly or indirectly to the Menu having translation strategy as "Exclude From Reduced Translation". The user could set this flag as No to have a full translation version by pressing the Export button. The process takes several seconds to export all the XML files.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-translation-modules/how-to-create-and-update-translation-modules-4.png)

Inside the attachments folder of Etendo, a new directory called lang is found, and inside it, a new one with the lowercase two-letter language code and the uppercase two-letter country code separated by an underscore character ('\_'). Example: `/home/EtendoERP/attachments/lang/es_ES`

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-translation-modules/how-to-create-and-update-translation-modules-5.png)

Inside this directory, the user can find the translation files for all the available modules into the instance. The core's translation files are stored directly into the root directory, the rest of the modules have their own folder named as their java packages. So, the user only needs to find the folder of the *original module* to be translated (*not the translation module*) and get its XML files.

##### Translate the module

Module translation can be done by manually modifying the exported XML files, which is a convenient method for modules with few strings to translate, or by using the Etendo Copilot wizard, [Module Translation Creator](https://docs.etendo.software/latest/etendo-copilot/bundles/dev-assistant.md#module-translation-creator).

###### Translate directly into the XML files

If this method is chosen, it is only necessary to open each XML file that is inside the module's directory to be translated and edit it. It is very important to open these files with a text editor.

The text to be changed for making a translation is the content of each value tag. It is not necessary to edit any attribute because they will be automatically updated when importing and exporting the files into the ERP in a next step.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-translation-modules/how-to-create-and-update-translation-modules-6.png)

##### Import and Export the translations

After the translation is completed, or even in the middle of a translation process, it is a good practice to import the XML files into the ERP to review the translation in context.

Finally, once the translation is OK, it is necessary export it again. Doing so, it is ensured the XML files have the final structure, with all the attributes properly set.

!!! info
    All the XML files to be imported must be inside their correspondent module's folder of your *attachments* directory, overwriting the original XML files exported at the beginning of this process.

Now, at the `Import/Export Translations` window, we can select the language used for the translations and press the Import button. Then, the process is completed and the Export button is pressed, that will export the XML files again.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-translation-modules/how-to-create-and-update-translation-modules-4.png)

!!! info
    During this process, it is highly recommended to keep a backup of your translated XML files.

##### Specific information if you are translating Core

###### buildstructure.xml file

Etendo's Core provides an additional file called `buildStructure.xml`. This file contains the information related to the names of the different stages through which the Etendo build process passes, and the error and warning messages that can be shown during a rebuild. It is also necessary to translate this file.

The structure of this file is a bit different compared to the standard Etendo XML translation files, but it is also very easy to understand. You just need to translate the content of all the attributes that start with “translated”, like *translatedName*, *translatedErrorMessage*, etc. This is an example of the `buildstructure.xml` file translated into Spanish.

```xml title="buildstructure.xml"
<?xml version='1.0' ?>
<BuildTranslation>
  <language>es_ES</language>
  <mainStepTranslations>
    <mainStepTranslation code="RB11" originalName="Initial Build Validation" translatedName="Validación de la construcción del sistema" translatedErrorMessage="La validación ha fallado. El sistema no se ha modificado y continua estable, pero los problemas descritos en la parte inferior de la ventana deberían resolverse (ya sea desinstalando los módulos afectados, o resolviendo los problemas de la forma descrita), y una nueva construcción del sistema debería iniciarse.">
      <stepTranslations/>
    </mainStepTranslation>
    <mainStepTranslation code="RB20" originalName="Build" translatedName="Construcción del sistema" translatedSuccessMessage="La construcción del sistema se ha completado con éxito." translatedWarningMessage="Se produjeron alertas durante la compilación. La aplicación se ejecutará, pero debería comprobarlas para ver si son importantes. Ir a &lt;a href=&quot;http://wiki.openbravo.com/wiki/ERP/2.50/Update_Tips&quot; target=&quot;_blank&quot; class=&quot;MessageBox_TextLink&quot;&gt; este enlace &lt;/a&gt; para más información. &lt;b&gt;Ahora debe reiniciar el contenedor de servlets&lt;/b&gt; para que los cambios tengan efecto." translatedErrorMessage="Ha ocurrido un error durante la construcción del sistema. Para saber qué pasos realizar a continuación, vaya a &lt;a href=&quot;http://wiki.openbravo.com/wiki/ERP/2.50/Update_Tips&quot; target=&quot;_blank&quot; class=&quot;MessageBox_TextLink&quot;&gt;este enlace&lt;/a&gt;">
      <stepTranslations>
        <stepTranslation code="RB12" originalName="Database update" translatedName="Actualización de la base de datos"/>
        <stepTranslation code="RB31" originalName="Reference data" translatedName="Datos de referencia"/>
        <stepTranslation code="RB43" originalName="Compilation" translatedName="Compilación"/>
      </stepTranslations>
    </mainStepTranslation>
  </mainStepTranslations>
</BuildTranslation>
```

###### Masterdata dataset

All the XML files exported through the *Import/Export Translation* window and the buildstructure.xml represents all the available user interface strings in the ERP. If we translate all these files, we will have a fully translated application. However, the ERP includes some other strings not related to the UI that can be also translated. Inside this group, called Masterdata, we include: country names, currencies, units of measure and month names. All this data is not exported into the XML files, however this does not mean we cannot translate it.

The way for translating masterdata is creating a system level dataset that only contains the translated strings for countries, currencies, units of measure and months.

As *System Administrator*, we create a new record inside the Dataset window for our core's translation module. It is important to define this dataset at System only level to ensure it will be automatically applied when we install the module.

As you can see in the screenshot, the tables to be included are: `AD_Month_Trl C_Country_Trl`, `C_Currency_Trl` and `C_UOM_Trl`. All of them have a filter clause that uses the language column, in the example `es_ES`.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-translation-modules/how-to-create-and-update-translation-modules-7.png)

Now, our Core's translation module has a dataset, so we must remember to check the Has reference data flag into the module's definition.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-translation-modules/how-to-create-and-update-translation-modules-8.png)

The dataset definition is ready, but it is pending the translation itself. To translate this dataset, we have two possibilities:

-   In the ERP, as System Administrator, we can go to the Country Region and City, Currency, Unit of Measure and Month windows and translate the corresponding record inside the Translation tab (recommended method).  
    When finished, export the dataset using the Export Reference Data button at the Dataset window.  

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-translation-modules/how-to-create-and-update-translation-modules-9.png)

-   Export the dataset with the untranslated strings and edit the XML file using a text editor. The dataset XML file will be stored inside the referencedata/standard directory of your translation module.
 

##### Translation bundle

As you probably know, Etendo is a distribution of modules, including Core. That means that to have a fully translated application, you must translate all the modules that are part of the distribution. 

It is a good idea to create a translation bundle that covers all the modules.

###### Publishing the translation module

The process of publishing a translation module is similar to the standard publishing process with just one important consideration: we need to copy the translated XML files to the corresponding module's `referencedata/translation` folder within your module folder.

The summarized process is:

1.   *Core only:* If we have translated the masterdata dataset directly in the ERP, we need to export it through the Export Reference Data button at the Dataset window.
2.   Export the database running
    ```bash title="Terminal"
    ./gradlew export.database 
    ```

3. Copy the translated XML files to the translation module's referencedata/translation folder. 
The structure of the translation module's directory should be:

    ```plaintext
    <translation module java package name>
    ├── referencedata
    │ ├── standard
    │ │ └── Masterdata.xml (only for core)
    │ └── translation
    │     └── es_ES
    │         ├── AD_ELEMENT_TRL_es_ES.xml
    │         ├── AD_FIELDGROUP_TRL_es_ES.xml
    │         ├── AD_FIELD_TRL_es_ES.xml
    │         ├── AD_FORM_TRL_es_ES.xml
    │         ├── AD_MENU_TRL_es_ES.xml
    │         ├── AD_MESSAGE_TRL_es_ES.xml
    │         ├── AD_MODULE_TRL_es_ES.xml
    │         ├── AD_PROCESS_PARA_TRL_es_ES.xml
    │         ├── AD_PROCESS_TRL_es_ES.xml
    │         ├── AD_REFERENCE_TRL_es_ES.xml
    │         ├── AD_REF_LIST_TRL_es_ES.xml
    │         ├── AD_TAB_TRL_es_ES.xml
    │         ├── AD_TEXTINTERFACES_TRL_es_ES.xml
    │         ├── AD_WF_NODE_TRL_es_ES.xml
    │         ├── AD_WINDOW_TRL_es_ES.xml
    │         ├── AD_WORKFLOW_TRL_es_ES.xml
    │         ├── buildStructureTrl.xml
    │         ├── C_DOCTYPE_TRL_es_ES.xml
    │         ├── CONTRIBUTORS_es_ES.xml
    │         ├── OBKMO_WIDGET_CLASS_TRL_es_ES.xml
    │         ├── OBUIAPP_PARAMETER_TRL_es_ES.xml
    │         ├── OBUISEL_SELECTOR_FIELD_TRL_es_ES.xml
    │         └── OBUISEL_SELECTOR_TRL_es_ES.xml
    └── src-db
       └── database
           ├── model
           │ ├── functions
           │ ├── sequences
           │ ├── tables
           │ ├── triggers
           │ └── views
           └── sourcedata
               ├── AD_DATASET_TABLE.xml (only for core)
               ├── AD_DATASET.xml (only for core)
               ├── AD_MODULE_DEPENDENCY.xml
               └── AD_MODULE.xml
    ```

4. Finally, remember to publish the module. For more information, see [Publish Modules to a GitHub Repository](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-publish-modules-to-github-repository.md).

###### Updating Translation Modules

These are the first considerations for updating a translation module:

-   We need to install/update in our instance the last version of the original module and its translation modules. To do so, find more information in [Install Modules in Etendo](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/install-modules-in-etendo.md). 
-   The already translated strings for this module are kept. Only the new or modified ones will be untranslated, so all the previous work done is not lost.
-   Before publishing the translation module, remember to update the First Version dependency to the new version of the translated module, as we saw in the “Create module definition” chapter. Also, it is necessary to update the original module version in the build.gradle file. Apart from that, it is also a good practice to include a description of the changes of this new version inside the Update Information field of the Module window.
-   To apply the updates, it is necessary to execute the command 

``` bash title="Terminal"
./gradlew install.translation -Dmodule=javapackage
./gradlew smartbuild -Dlocal=no
```

The main steps for updating a translation module are almost the same as when creating a new translation module from scratch. The only difference is that it is not necessary to declare the System Language and to run the Verify Languages process. The rest of the process is exactly the same, starting by the “Export the translation” section.

##### Tips and Tricks

This section tries to provide a set of useful translation tips and tricks. Take into account that some of these tricks may require development knowledge.

###### Finding the context

Making a good translation requires knowing the exact context where the string we are translating appears. Unfortunately, the context in the XML file is not clear at all, and sometimes it is necessary to dive into the application to get the exact context. Here you have a list of tips for finding it:

-   The first obvious thing you must take into account is the file you are translating. `AD_MENU_TRL` represents the Application menu entries, `AD_MESSAGE_TRL` has all the messages, `AD_PROCESS_TRL` is in charge of the process and reports, `AD_PROCESS_PARA_TRL` is the process parameters, etc.
-   The Etendo Linked Items feature can give you all the places where a record is used. In the screenshot below, you can get the places where the element with the name “General Ledger Currency Credit” is used. In this case, linked items show that the element is only used in one column, so the user can navigate to this column and later on navigate to the related field, that will show the window where it is used.  
     
    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-translation-modules/how-to-create-and-update-translation-modules-10.png)

---

This work is a derivative of [How to Create and Update Translation Modules](https://wiki.openbravo.com/wiki/How_to_Create_and_Update_Translation_Modules){target="\_blank"} by [Openbravo Wiki](https://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create Build Validations and Module Scripts
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create Build Validations and Module Scripts
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-build-validations-and-module-scripts
## Article Content: 
###  How to Create Build Validations and Module Scripts

####  Overview

This section provides information about how to create both a **Build Validation** and a **Module Script**. They are both very similar concepts, and are also implemented in a very similar way.

####  Build Validations

A build validation in Etendo is a Java class which is **executed at the beginning** of the `update.database` task.

The build validations main use is to **stop the build** because the instance is in such a state that rebuilding the system cannot be safely done. In modules, validations can be used to stop the build in case the module cannot be installed safely in the system for some reason.

So, for example, a validation could be used to check if **the user has done a necessary manual setup step that cannot be automated**. Or a validation could also be used to **check if the user has filled some data which is needed for the module to be installed correctly**.

Build validations are a different piece of code in Etendo, in that they are distributed as binaries (compiled classes), which are executed directly without them being compiled on the run. 

!!!note
      Build validations should not be a common case. Normally, they should only be needed when there was a mistake in a previous version of the module, or Core. The ultimate result for a validation is that, if it detects what it was meant to detect, the user will need to do manual actions to fix the problem, and this should be avoided if possible by all developers. 

#####  Introduction to the implementation of build validations

The main steps to create a build validation are:

  1. Write it (Create a Java class for each validation you want to do). 
  2. Compile it (Build Validations are compiled separately from the rest of the Etendo code, using a specific gradle compile task). 
  3. Test it (Carefully test the validation before including it in your module, or in Core). 

To create a build validation, first create a class which extends the `org.openbravo.buildvalidationBuildValidation class`. This is an abstract class which has one abstract method: `List<String> execute()`

This method needs to be implemented. The class will be loaded at the beginning of the `update.database` task, and this method will be called. A **List of Strings** must be returned. If the list is empty, the build will continue. If the list contains at least one string, every string will be shown to the user, and the build will stop. Every string is supposed to be a meaningful error message, which shows the user what it needs to fix in his system for the validation to pass.

#####  Writing the build validation

As was just explained, a build validation is nothing more than a class which extends the `org.openbravo.buildvalidation.BuildValidation` class, and implements the **abstract execute method**. Let's see an example:

```java title="ValidationExample.java"
public class ValidationExample extends BuildValidation {
 
  public List<String> execute() {
    try {
      ConnectionProvider cp = getConnectionProvider();
      PreparedStatement ps = cp
          .getPreparedStatement("SELECT COUNT(*) FROM C_Bpartner WHERE name IS NULL");
      ps.execute();
      ResultSet rs = ps.getResultSet();
      rs.next();
      ArrayList<String> errors = new ArrayList<String>();
      if (rs.getInt(1) > 0) {
        errors
            .add("There are business partners which don't have a defined name. Please fill the name of every business partner before installing the module MyModule.");
      }
      return errors;
    } catch (Exception e) {
      return handleError(e);
    }
  }
}
```

In this example, the main points of any build validation can be seen:

  * The class implements the **BuildValidation** class, and its corresponding execute method. 
  * In the **method**, the validation can be done (i.e. check if the Etendo instance complies with some specific rule). There is a convenient `getConnectionProvider()` method, provided by the abstract superclass, which allows doing direct queries to the database. It is important to remark that **validations should only do queries to the database, they should never change the contents of the database**. Module Scripts can be used to change the database if needed. 
  * Finally, the method returns a **List of error Strings**, which can be empty if the validation went well, or can contain one or more errors if the system did not comply with the validation. 

You can also use `SqlClass` if it is necessary to do the database operations.

```java  title="ValidationExample2.java"
public class ValidationExample2 extends BuildValidation {
 
  public List<String> execute() {
    try {
      ConnectionProvider cp = getConnectionProvider();
      ArrayList<String> errors = new ArrayList<String>();
      int numBpartners=Integer.parseInt(ValidationExample2Data.queryBPartners(cp));
      if (numBpartners > 0) {
        errors.add("There are business partners which don't have a defined name. Please fill the name of every business partner before installing the module MyModule.");
      }
      return errors;
    } catch (Exception e) {
      return handleError(e);
    }
  }
}
```

This needs the following `xsql` file:

```xml title="ValidationExample2Data.xsql"
<?xml version="1.0" encoding="UTF-8" ?>
 
<SqlClass name="ValidationExample2Data" package="org.openbravo.buildvalidation">
  <SqlMethod name="queryBPartners" type="preparedStatement" return="string">
      <SqlMethodComment></SqlMethodComment>
      <Sql><![CDATA[
          SELECT COUNT(*) FROM C_Bpartner WHERE name IS NULL
          ]]>
      </Sql>
  </SqlMethod>
</SqlClass>
```

!!!info
      The class source files should be inside the module folder, in: `src-util/buildvalidation/src`. And they should follow the standard **Java package rules**. The folder will not exist if it is the first validation, so it will be needed to create it.


#####  Compiling the build validation

Build Validations should be compiled using, at most, the latest supported **JDK version**.
  
To compile the build validation, use the following command:

```bash
./gradlew compile.buildvalidation -Dmodule=javapackageofmodule
```

!!!info
      In case of compiling the validations of **Etendo Core**, the module property needs to be set to `org.openbravo`. 

This task will compile the Java classes, and copy them to the correct **build** folder in the module, or in the `src-util/buildvalidation` of Core.

#####  Executing the build validation

The build validations will be automatically executed in the `update.database` task, or in `update.database.mod` if the module is being applied. 

!!!warning
      Validations will not be compiled in this task, they need to have been compiled previously to be executed.


Another important point to remark is that the build validations will be executed in every version of the module, or Core, in which they are present. The developer needs to take this into account (it is advisable not to design validations which are **version-dependant**, they should always be designed to be **generic**).

!!!note
      When adding a validation to Etendo Core, remember to **include the binary classes** contained in 
      `src-util/buildvalidation/build/classes/` to the repository as any source files are added. If not, they will not be executed (because the classes are not compiled by default in the build process, they are executed only if the binary files are there).

#####  Defining the build validation execution limits
  
The build validations provide by default a couple of mechanisms that allow to control when they should be executed:

######  Build Validation version limits

It is possible to define a dependency with two versions of a particular module to identify when the build validation should be executed:

  * **First Execution Version**: defines the first version since the build validation should be executed. Before an upgrade, if the dependent module has a version lower or equal than this version, the build validation will **NOT** be executed. By setting this limit, it is being ensured that this version and previous ones do not require the build validation execution. 

  * **Last Execution Version**: defines the last version of the dependent module for which the build validation should be executed. Before an upgrade, if the dependent module has a version higher or equal than this version, the build validation will **NOT** be executed. 

This way, the build validation can be executed only when it is really needed, avoiding extra time calculations when updating database.

The dependent module and its limit versions can be set by overriding the
`getBuildValidationLimits()` method in our `BuildValidation` subclass:

```java
@Override
protected ExecutionLimits getBuildValidationLimits() {
  return new ExecutionLimits("0", new OpenbravoVersion(3, 0, 28207), new OpenbravoVersion(3, 0, 29495));
}
```

Following this code example, we are setting that our build validation should only be executed when upgrading core module (id = "0") from a version between _3.0.28207_ (first execution version) and _3.0.29495_ (last execution version). This way, we are avoiding the execution of the build validation in those cases which it does not apply.

######  Executing just once

In case it is necessary to execute the build validation just once, this can be covered by setting just the **Last Execution Version** .

For example, if adding a check in version _1.7.0_ of a module, we want to execute the build validation when upgrading from versions previous this version. So we can define its limits as follows:

```java
@Override
protected ExecutionLimits getBuildValidationLimits() {
  return new ExecutionLimits(ad_module_id, null, new OpenbravoVersion(1, 7, 0));
}
```

Where `ad_module_id` is the **UUID** of the module.

This way the build validation will be executed when upgrading the module from any version prior to _1.7.0_ and it will not be executed anymore.

######  Execute on install

It is also possible to configure whether the build validation should be executed when installing the dependent module defined with the `getBuildValidationLimits()` method. By default, the build validation will be executed when installing the dependent module.

But in case we do not want to execute it, the `executeOnInstall()` method should be overridden as follows:

```java
@Override
protected boolean executeOnInstall() {
  return false;
}
```

####  Module Scripts

A **module script** is a task that is executed when a module is being applied in the **database**. This task is supposed to do operations that need to be done in the database, and cannot be done in a different way.

Conceptually, they are extremely similar to **Build Validations**, and the main steps involved to create a **Module Script** are virtually the same, so it is advisable to read the previous section before this one. 

The main points of module scripts are the following ones:

  * Whereas build validations are executed at the beginning of update.database, module scripts are executed in the middle of the process, when the foreign keys and triggers of the database have been disabled. 
  * As with build validations, module scripts will be executed every time an update.database or update.database.mod for that particular module is called. This means that **the script must be built in such a way that can be repeatedly executed without problems** , and this is a very important consideration that the developer needs to take into account. 
  * The module script should never fail. If it fails, the build will be stopped, but as it has already been started, **the system will be in an inconsistent state** (for example, all the foreign keys and triggers will be down). The developer must avoid this at all costs if possible. 

#####  Introduction to the implementation of module scripts

As with build validations, a module script is a Java class which extends the abstract class `org.openbravo.modulescript.ModuleScript`, and implements the `execute()` method. This execute method will be called by the `update.database` task. This method will include the logic of the module script, here all the operations will be done.

#####  Writing the module script

Here goes a very simple **Module script**, which just sets the value of some column to a default in case the column value is null:

```java title="ModuleScriptExample.java"
public class ModuleScriptExample extends ModuleScript {
 
  public void execute() {
    try {
      ConnectionProvider cp = getConnectionProvider();
      PreparedStatement ps = cp
          .getPreparedStatement("UPDATE mytable SET mycolumn=0 WHERE mycolumn IS NULL");
      ps.executeUpdate();
    } catch (Exception e) {
      handleError(e);
    }
  }
}
```

The main two important points to take into account when building the script are:

  * The script should never fail. Failure will leave the user in a very unfriendly situation (with the build stopped in the middle), and **should be avoided at all costs**. In this case, this script will not fail unless the table does not exist. 
  * The script needs to be designed so that it can be executed an **indefinite number of times**. This example script, for example, can be executed several times without problems (the first time will set all rows which have a null value, and after that, only the new rows which have been inserted before will be modified, but the previously modified rows will not be modified again unless they have the supposedly wrong null value again). 

  
!!!info
      The class source files themselves should be inside the module folder, in the folder: `src-util/modulescript/src`. And they should follow the standard **Java package rules**. The folder will not exist if it is the first script, so it will be needed to create it.


#####  Compiling the module script

Module scripts should be compiled using, at most, the latest supported **JDK version**.

To compile the module script, use the following command:

```bash
./gradlew compile.modulescript -Dmodule=<javapackage>
```

!!!info
      In case of compiling the scripts of **Etendo Core**, the module property needs to be set to `org.openbravo`.

This task will compile the Java classes, and copy them to the correct **build** folder in the module, or in the `src-util/modulescript` of Core.

#####  Executing the module script

The **module scripts** will be automatically executed in the `update.database` task, or in `update.database.mod` if the module is being applied. 

!!!warning
      Module scripts will not be compiled in this task, they need to have been compiled previously to be executed.

Another important point to remark is that the module scripts work as **build validations** in regards to execution criteria; that is, they will be executed in every version of the module, or Core, in which they are present. The developer needs to take this into account (it is advisable not to design scripts which are **version-dependant**, they should always be designed to be **generic**).

And, as it was explained above, scripts should also be designed to produce the same result if executed multiple times, because they will be executed every time the system is rebuilt, or the module is updated.

!!!info
      If you are adding a module script to Etendo Core, remember that you need to **include the binary classes** contained in `src-util/modulescript/build/classes/` to the repository as any source files are added. If not, they will not be executed (because the classes are not compiled by default in the build process, they are executed only if the binary files are there).

#####  Defining the module script execution limits

The module scripts provide by default a couple of mechanisms that allow to control when they should be executed:

######  Module version limits

It is possible to define a dependency with two versions of a particular module to identify when the module script should be executed:

  * **First Execution Version**: defines the first version since the module script should be executed. Before an upgrade, if the dependent module has a version lower or equal than this version, the module script will **NOT** be executed. By setting this limit we are ensuring that this version and previous ones do not require the module script execution. 

  * **Last Execution Version**: defines the last version of the dependent module for which the module script should be executed. Before an upgrade, if the dependent module has a version higher or equal than this version, the module script will **NOT** be executed. 

This way, the module script can be executed only when it is really needed, avoiding extra time calculations when updating database.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_build_validations_and_module_scripts-0.png)

The dependent module and its limit versions can be set by overriding the`getModuleScriptExecutionLimits()` method in our `ModuleScript` subclass:

```java
@Override
protected ModuleScriptExecutionLimits getModuleScriptExecutionLimits() {
  return new ModuleScriptExecutionLimits("0", new OpenbravoVersion(3,0,27029), 
      new OpenbravoVersion(3,0,27050));
}
```

Following this code example, we are setting that our `modulescript` should only be executed when upgrading core module (id = "0") from a version between _3.0.27029_ (first execution version) and _3.0.27050_ (last execution version). This way, we are avoiding the execution of our `modulescript` in those cases which it does not apply.

######  Executing just once

One typical case of `modulescripts` usage, is to populate the values of a newly added column. So, it is necessary to execute the `modulescript` once. This can be covered by setting just the **Last Execution Version**.

For example, if we add a new column in version _1.5.0_ of a module, we want to execute the `modulescript` when upgrading from versions previous this version. So, we can define its limits as follows:

```java
@Override
protected ModuleScriptExecutionLimits getModuleScriptExecutionLimits() {
  return new ModuleScriptExecutionLimits(ad_module_id, null, 
      new OpenbravoVersion(1,5,0));
}
 ```

Where `ad_module_id` is the **UUID** of the module.

This way the `modulescript` will be executed when upgrading the module from any version prior to _1.5.0_ and it will not be executed anymore.

######  Execute on install

It is also possible to configure whether the module script should be executed when installing the dependent module defined with the `getModuleScriptExecutionLimits()` method or during the `install` gradle task. By default, the module script will be executed in the following cases:

  * When installing the dependent module 
  * On `install` task 

But in case we do not want to execute it in these cases, the `executeOnInstall()` method should be overridden as follows:

```java
@Override
protected boolean executeOnInstall() {
  return false;
}
```

######  Executing just on `install`

In case we want to configure a `modulescript` to be executed just on every `install`, we **do not** override the `executeOnInstall()` method and we define the execution limits as follows:

```java
@Override
protected ModuleScriptExecutionLimits getModuleScriptExecutionLimits() {
  return new ModuleScriptExecutionLimits(ad_module_id, null, 
      new OpenbravoVersion(0,0,0));
}
```

This work is a derivative of [How to Create Build Validations and Module Scripts](http://wiki.openbravo.com/wiki/How_to_create_build_validations_and_module_scripts){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create Client Event Handler Actions
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create Client Event Handler Actions
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-client-event-handler-actions
## Article Content: 
###  How to Create Client Event Handler Actions
  
####  Overview

  This section discusses how to implement client-side functions that are executed before or after an event is fired in a standard window of the User Interface.
  
####  Example Module

  This is supported by an example module which shows examples of the code shown and discussed.

  The code of this module can be downloaded from [this repository](https://github.com/etendosoftware/com.etendoerp.client.application.examples/blob/main/src/com/etendoerp/client/application/examples/GreetingEventHandler.java).

####  Defining Client Event Handler Actions

  A **Client Event Handler is a component that allows developers to respond to specific events in Etendo**, such as the creation, update or deletion of entities. These handlers are essential for implementing custom business logic that executes when certain changes occur in the database.

####  Defining the Event Handler Class
  In this step, the key methods needed to handle event actions will be implemented:

  * `Method getObservedEntities()` : This method defines the entities that will be observed by the Event Handler. This information is essential for the event handler to know what kind of entities it should react to.

  * `Method onUpdate()` : It is executed when a watched entity is updated.

  * `Method onSave()` : It is executed when a new entity is created.

  * `Method onDelete()` : It is executed when an observed entity is eliminated.

#### Examples

##### `getObservedEntities()`
This section defines the entities that will be observed by the Event Handler. In this case, the Greeting entity is observed.
```java 
class GreetingEventHandler extends EntityPersistenceEventObserver {
  private static Entity[] entities = {
      ModelProvider.getInstance().getEntity(Greeting.ENTITY_NAME) };
  private static final Logger logger = LogManager.getLogger();

  @Override
  protected Entity[] getObservedEntities() {
    return entities;
  }
}
```   

##### `onUpdate()`
This method intercepts record updates in the Greeting entity. It validates that thetitle of the entity ends with a dot (“.”) and adds it if necessary.
```java
public void onUpdate(@Observes EntityUpdateEvent event) {
  if (!isValidEvent(event)) {
    return;
  }
  final Greeting greeting = (Greeting) event.getTargetInstance();
  final String title = greeting.getTitle();
  if (title != null && !title.endsWith(".")) {
    final Entity greetingEntity = ModelProvider.getInstance().getEntity(Greeting.ENTITY_NAME);
    final Property greetingTitleProperty = greetingEntity.getProperty(Greeting.PROPERTY_TITLE);
    event.setCurrentState(greetingTitleProperty, title + ".");
  }
  logger.info("Greeting {} is being updated", event.getTargetInstance().getId());
}
```
##### `onSave()`
In this method, the creation of a new record in the Greeting entity is intercepted. A validation similar to that of the update event is performed, adding a dot to the title if it does not have one. In addition, a translation record (GreetingTrl) is created for the greeting in a specific language (in this example, the language with ID 171, which is Dutch, is used).
```java 
public void onSave(@Observes EntityNewEvent event) {
  if (!isValidEvent(event)) {
    return;
  }
  final Entity greetingEntity = ModelProvider.getInstance().getEntity(Greeting.ENTITY_NAME);
  final Greeting greeting = (Greeting) event.getTargetInstance();
  final String title = greeting.getTitle();
  if (title != null && !title.endsWith(".")) {
    final Property greetingTitleProperty = greetingEntity.getProperty(Greeting.PROPERTY_TITLE);
    event.setCurrentState(greetingTitleProperty, title + ".");
  }

  final GreetingTrl greetingTrl = OBProvider.getInstance().get(GreetingTrl.class);
  greetingTrl.setGreeting(greeting);
  greetingTrl.setLanguage(OBDal.getInstance().get(Language.class, "171"));
  greetingTrl.setName(greeting.getName());
  greetingTrl.setTitle(greeting.getTitle());
  greetingTrl.setTranslation(false);

  final Property greetingTrlProperty = greetingEntity.getProperty(Greeting.PROPERTY_GREETINGTRLLIST);
  @SuppressWarnings("unchecked")
  final List<Object> greetingTrls = (List<Object>) event.getCurrentState(greetingTrlProperty);
  greetingTrls.add(greetingTrl);

  logger.info("Greeting {} is being created", event.getTargetInstance().getId());
}
``` 

##### `onDelete()`
The following method is executed when a greeting is deleted and records the deletion in the log.
```java 
public void onDelete(@Observes EntityDeleteEvent event) {
  if (!isValidEvent(event)) {
    return;
  }
  logger.info("Greeting {} is being deleted", event.getTargetInstance().getId());
}
```

!!!note
    This Event Handler shows how to intercept creation, update and deletion events in an entity. It allows you to perform automatic validations and actions, such as adding a dot at the end of a title or creating an associated translation automatically when creating a new greeting.
  

!!!info
    This example can be adjusted for other entities or events according to the requirements of your implementation.

---

This work is a derivative of [How to Create Client Event Handler Actions](http://wiki.openbravo.com/wiki/How_to_create_client_event_handler_actions){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create Client Side Callout Onchange Function
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create Client Side Callout Onchange Function
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-client-side-callout-onchange-function
## Article Content: 
### How to Create Client Side Callout OnChange Function

#### Overview

This section discusses how to implement **client side (javascript) functions** which are executed when a field value in the user interface changes. The onChange concept corresponds to the traditional [callout](How_to_create_a_Callout.md), the main difference is that the **onChange functionality is implemented on the client**. This gives the following advantages:

- better performance as for many actions no server side call is needed
- direct access to user interface components such as field, the form and the grid

In addition the onChange function has all the benefits of the classic callout, you can still **call the server** to execute more performance intensive actions or do queries.

#### Example Module

This section is supported by an example module which shows examples of the code shown and discussed.

The code of the example module can be downloaded from this repository: [com.etendoerp.client.application.examples](https://github.com/etendosoftware/com.etendoerp.client.application.examples)

The example module is available through the Central Repository (See 'Client Application Examples'), for more information see the Examples Client Application project page.

#### Defining OnChange Functions

An `OnChange` function is a function in javascript available through a global ID.

!!!note
    The global ID should be unique, it is strongly adviced to use the module's db prefix.

The `OnChange` function has to be defined in a javascript file located in the module.

!!!info
    For more information read [how to add javascript code](https://docs.etendo.software/latest/concepts/client-side-development-and-api.md#adding-javascript-to-etendo) to Etendo.

Here is an example of an `OnChange` function defined in the example module:

```javascript
OB.OBEXAPP = {};
OB.OBEXAPP.OnChangeFunctions = {};
 
OB.OBEXAPP.OnChangeFunctions.Note_Name = function(item, view, form, grid) {
  // set a message
  view.messageBar.setMessage(
    isc.OBMessageBar.TYPE_INFO,
    'Changed!',
    'You changed the name to ' + item.getValue()
  );

  // set the value for the description and make sure that the
  // onchange handlers are called
  form.setItemValue('description', 'Description ' + item.getValue());
};
```

As you can see the `OnChange` function is placed in a global object, in this case the module's dbprefix is used for that.

!!!note
    It is important to note that you should not use var before the global object definition, otherwise your var is not global.

This is because the global javascript code included in Etendo is in fact executed within a function.

An onchange function receives four arguments:

- item: the FormItem that changes.
- view: the standard view ( OBStandardView ) which provides access to the complete window and tab structure in a loaded window.
- form: the OBViewForm which contains the fields, the form can also be the form used in inline grid editing.
- grid: the OBViewGrid which contains the list of records loaded for the tab.

This example onchange sets a message in the message bar and sets the value of another field.

!!!note
    Note that the form's setItemValue method is used to trigger other onchange functions. The form also has a setValue method but that one will not trigger an onchange event.

!!!info
    If your onchange function does not work or is not called or if your window does not load anymore after defining an onchange then check the console.

#### Registering, setting an OnChange for a specific field

There are two ways to link an `OnChange` function to a specific field:

- Through the application dictionary
- Programmatically using javascript code

The first approach allows you to define the `OnChange` directly in the Field definition. For the second approach you need to use javascript, but it offers additional flexibility.

##### Setting an OnChange function through the AD

The Application Dictionary allows you to set the `OnChange` for a specific field, see the `OnChange` function field in the `Window, Tabs and Fields` window.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_client_side_callout_onchange_function-0.png)

The value should be the unique global ID mentioned above.

##### Programmatic registration of OnChange functions

It is also possible register an **OnChange function through javascript**. This offers more flexibility than defining through the Application Dictionary:

- you can add `OnChange` functions to existing Fields without changing the information in the table
- you can add more than one `OnChange` function to a field
- you can override/overwrite the `OnChange` function defined in the Application Dictionary

An `OnChange` function is registered through the `OB.OnChangeRegistry.register` method. It expects 4 parameters:

- tab id
- field: the name of the field for which the onchange is registered
- callback function: the onchange function itself
- id: can be used to overwrite an existing `OnChange` function registered using the same id

An example of a registration:

```javascript
OB.OnChangeRegistry.register('FF8081813290114F0132901EB0A2001A', 'value', OB.OBEXAPP.OnChangeFunctions.Note_Value, 'OBEXAPP_Value');
```

###### Multiple OnChange Functions per Field, call order

The `OnChange` function can have a sort property to control the call-order if there are multiple `OnChange` functions for one field.

It is for example set like this:

```javascript
OB.OBEXAPP.OnChangeFunctions.Note_Value.sort = 20;
```

Some notes on sorting:

- the `OnChange` defined in the Application Dictionary has sort 50 and id: default
- if an `OnChange` does not have a sort defined it gets the sort 100

###### Overriding/replacing an OnChange

An `OnChange` can be registered using an id. If there is already an `OnChange` with the same id then it is replaced by the new registration.

The `OnChange` defined through the Application Dictionary has the id **default**. So by registering a new `OnChange` using that id you will overwrite the `OnChange` defined through the Application Dictionary.

#### Example: OnChange calling a server side action

This section shows an example of an `OnChange` which calls a server side action:

```javascript
OB.OBEXAPP.OnChangeFunctions.Note_Value = function(item, view, form, grid) {
  // the callback called after the server side call returns
  var callback = function(response, data, request) {
    form.setItemValue(item, data.upperCased);
    view.messageBar.setMessage(
      isc.OBMessageBar.TYPE_WARNING,
      'Uppercased!',
      'The value has been uppercased'
    );
  };

  // do a server side call and on return call the callback
  OB.RemoteCallManager.call(
    'com.etendoerp.client.application.examples.OnchangeExampleActionHandler',
    {
      value: item.getValue()
    },
    {},
    callback
  );
};
OB.OBEXAPP.OnChangeFunctions.Note_Value.sort = 20;
```

The above example calls an ActionHandler class: OnchangeExampleActionHandler. The result is returned and set in a field and a message is shown in the message bar.

!!!info
    It is possible to disable the form during the server side action, call the setDisabled method on the form with the value true as a parameter.

#### OnChange and the Classic Callout

If a field has both an `OnChange` and a classic callout defined, then the following applies:

- in the Openbravo 3 UI the `OnChange` function will be used and the callout will be disabled
- in the classic UI the callout is used and the `OnChange` functions are ignored

#### Example Module: example window

The Example Module has an example window with several examples of a callout/onchange function. You can find the example window in `Application Examples` >`Callout/OnChange Function`.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_client_side_callout_onchange_function-1.png)

To test out the onchange, create a new record and set some values in the fields. You should see automatic behavior.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_create_client_side_callout_onchange_function-2.png)

You can **enable/disable** different onchange functions by going into the web/com.etendoerp.client.application.examples/js/example-onchange.js file and uncomment some of the commented lines.

---

This work is a derivative of [How to create client side callout onchange function](http://wiki.openbravo.com/wiki/How_to_create_client_side_callout_onchange_function){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create Jobs and Actions
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create Jobs and Actions
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-jobs-and-actions
## Article Content: 
#### Overview

Etendo introduces the concept of Jobs which is about one or more Actions executed in sequence. These Actions are standard processes which enable the user to create and store Jobs for later usage. Jira Automations and iOS Shortcuts are similar concepts.

!!! note
    The GUI to create and execute jobs is coming soon to a newer version of Etendo. At present, it is only possible to define Actions which act as standard processes available in the existing UI nevertheless, they will also support the newer UI when released.

#### Create an Action

!!! info
    Actions are based on the existing Standard Process architecture.

1.  Create a new record in the Process Definition window:

    ![createjobs1.png](https://docs.etendo.software/latest/assets/legacy/technicaldocumentation/platform/createjobs1.png)

2.  Define UI Pattern as Action. The process has to be marked as multi record. All actions must support multi record input. The rest of the definitions are analogous to any Standard Process. Parameters, onLoad functions, etc. are supported.
3.  Create a column and a field to run the Action from a button in the current UI, or a menu entry to run the process from the menu.
4.  The Java class associated with the new Action must extend the Action type (`com.smf.jobs.Action`).

Your IDE of choice should prompt you to fill the required methods:

- `ActionResult action(JSONObject parameters, MutableBoolean isStopped)`
- `Class<T> getInputClass()`

The first `action()` method is where the main process logic happens. You will receive the process parameters in a json object, and a boolean to check if the process was requested to stop. Once the logic is done, your code should return an `ActionResult` type detailing if the execution was successfully finished or not. There will also be a message for the user.

The `getInputClass()` method must return the class type this Actions supports as an input. For example `Invoice.class:`

```plaintext

import org.openbravo.model.common.invoice.Invoice;
/* ... */
@Override
protected Class<Invoice> getInputClass() {
    return Invoice.class;
}
```

The input data (the user selected record(s), or the result of another Action) can be obtained with the method `getInputContents()`. By default, this method will return a list of `BaseOBObject`, but it can be parametrized using the previous `getInputClass()` method (or the class directly).
For example:

```plaintext

// Assuming getInputClass() returns Invoice.class
List<Invoice> invoices = getInputContents(getInputClass());
```

The `ActionResult` type can be used to show a message to the user:

```plaintext

result.setType(Result.Type.ERROR);
result.setMessage(OBMessageUtils.getI18NMessage("Success"));
/* ... */
return result;
```

The result object can also set an output to be used as input for the next job, when the new Job UI is implemented:

```plaintext

List<Invoices> invoices = processInvoices();
result.setOutput(invoices);
```

For more complex operations present in standard processes, the `setResponseActionsBuilder()` method can be used to set a response builder. This follows the same existing logic when using a `BaseProcessActionHandler` class.

The main logic of the process can be constructed as any process which previously extended the `BaseProcessActionHandler` class. It should be trivial to port existing processes to Actions.

Examples of other Actions implemented in Etendo are usually present in the `com.smf.jobs.defaults` package.

A full example of an Action java class is shown below:

```java

package com.smf.jobs.defaults;

import com.smf.jobs.ActionResult;
import com.smf.jobs.Result;
import com.smf.jobs.Action;
import org.apache.commons.lang.mutable.MutableBoolean;
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;
import org.codehaus.jettison.json.JSONException;
import org.codehaus.jettison.json.JSONObject;
import org.openbravo.advpaymentmngt.ProcessInvoiceUtil;
import org.openbravo.base.weld.WeldUtils;
import org.openbravo.client.kernel.RequestContext;
import org.openbravo.erpCommon.utility.OBDateUtils;
import org.openbravo.erpCommon.utility.OBError;
import org.openbravo.model.common.invoice.Invoice;
import org.openbravo.service.db.DalConnectionProvider;
import org.openbravo.service.json.JsonUtils;

import javax.inject.Inject;
import java.text.ParseException;

/**
 * Action for processing invoices.
 * Allows for the same actions available in the UI as part of a Job.
 */
public class ProcessInvoices extends Action {
    Logger log = LogManager.getLogger();

    @Inject
    private WeldUtils weldUtils;

    @Override
    protected ActionResult action(JSONObject parameters, MutableBoolean isStopped) {
        var result = new ActionResult();

        try {
            var input = getInputContents(getInputClass());
            var documentAction = parameters.getString("DocAction");
            var voidDate = parameters.isNull("VoidDate") ? null : parameters.getString("VoidDate");
            var voidAcctDate = parameters.isNull("VoidAccountingDate") ? null : parameters.getString("VoidAccountingDate");
            var processMessages = new StringBuilder();
            int errors = 0;

            result.setType(Result.Type.SUCCESS);

            for (Invoice invoice : input) {
                var message = processInvoice(invoice, documentAction, voidDate, voidAcctDate);
                if (message.getType().equals("Error")) {
                    errors++;
                }
                if (message.getMessage().isBlank()) {
                    processMessages.append(invoice.getDocumentNo()).append(": ").append(message.getTitle()).append("\n");
                } else {
                    processMessages.append(invoice.getDocumentNo()).append(": ").append(message.getMessage()).append("\n");
                }
            }

            if (errors == input.size()) {
                result.setType(Result.Type.ERROR);
            } else if (errors > 0) {
                result.setType(Result.Type.WARNING);
            }

            if (input.size() > 1) {
                // Show the message in a pop up when more than one invoice was selected, for better readability.
                var jsonMessage = new JSONObject();
                jsonMessage.put("message", processMessages.toString().replaceAll("\n",""));
                result.setResponseActionsBuilder(getResponseBuilder().addCustomResponseAction("smartclientSay", jsonMessage));
            }

            result.setMessage(processMessages.toString());
            result.setOutput(getInput());


        } catch (JSONException | ParseException e) {
            log.error(e.getMessage(), e);
            result.setType(Result.Type.ERROR);
            result.setMessage(e.getMessage());
        }

        return result;
    }

    private OBError processInvoice(Invoice invoice, String docAction, String _strVoidDate, String _strVoidAcctDate) throws ParseException {

        var processor = weldUtils.getInstance(ProcessInvoiceUtil.class);
        var strVoidDate = "";
        var strVoidAcctDate = "";

        if (_strVoidDate != null && _strVoidAcctDate != null) {
            // Convert from the JSON date format to the OBProperties date format
            var voidDate = JsonUtils.createDateFormat().parse(_strVoidDate);
            var voidAcctDate = JsonUtils.createDateFormat().parse(_strVoidAcctDate);

            strVoidDate = OBDateUtils.formatDate(voidDate);
            strVoidAcctDate = OBDateUtils.formatDate(voidAcctDate);
        }

        return processor.process(
                invoice.getId(),
                docAction,
                strVoidDate,
                strVoidAcctDate,
                RequestContext.get().getVariablesSecureApp(),
                new DalConnectionProvider(false)
        );
    }

    @Override
    protected Class<Invoice> getInputClass() {
        return Invoice.class;
    }
}
```

##### Extend and Execute Actions

It is also possible to extend actions by adding new functionality.  
The following is an example of extending the `com.smf.jobs.defaults.ProcessOrders` class found inside the standard actions distributed with Etendo.

```Java
public class ExtendProcessOrder extends com.smf.jobs.defaults.ProcessOrders {

  public ExtendProcessOrder() {
    super();
  }

  public ActionResult run(Data input, JSONObject param, MutableBoolean stopped) {
    setParameters(param);
    return super.run(input, stopped);
  }

}

public static void executeProcessOrderAction(Order order) {
    try {
      ExtendProcessOrder process = WeldUtils.getInstanceFromStaticBeanManager(ExtendProcessOrder.class);
      JSONObject jsonData = new JSONObject();
      jsonData.put("DocAction", "CO");
      Data data = new Data(jsonData, Order.class);
      List<BaseOBObject> orderList = new LinkedList<>();
      OBDal.getInstance().refresh(order);
      orderList.add(order);
      data.setContents(orderList);

      final MutableBoolean mutableBoolean = new MutableBoolean(false);
      var result = process.run(data, jsonData, mutableBoolean);
      if (result.getType().equals(Result.Type.ERROR)) {
        throw new OBException(result.getMessage());
      }
    } catch (Exception e) {
      throw new OBException(e.getMessage());
    }
  }
```

It is necessary to implement a method that gets and executes the current action, in our example we implement `executeProcessOrderAction(Order order)` which dynamically gets an instance of the `ExtendProcessOrder` class and executes it.
It is also possible to add validations and override the original methods.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create Scan Process
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create Scan Process
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-scan-process
## Article Content: 
#### Overview

This document explains how to define a scanning process that can be executed from the mobile application to scan codes using the mobile camera.

It is important to note that any scanning process **must have** these specific steps:

- **Grouper:** The items that are going to be scanned must be grouped under a container.
- **Items**: Here you can scan different types of barcodes (in all encodings) or QR representing different items such as products, invoices, assets, etc...

Optional:

- Quantity: It is possible to specify the quantity of the scanned items.

#### Scanning process definition in Etendo

!!! warning
    The environment must have at least one module under development, and the process identifier must include the prefix of that module.

1. First of all, you have to create a process. Log in as "System administrator. Open the `Application` > `Application Dictionary` > `Process Definition` window and create a new record.

    ![scanprocessdefinition.png](https://docs.etendo.software/latest/assets/legacy/technicaldocumentation/platform/scanprocessdefinition.png)

    - **Module**: It refers to the module where the process will be added.
    - **Identifier**: It is the identifier used to save the process in the database.
    - **Name**: It is the name assigned to the process, which will be shown in the application.
    - **UI pattern**: you must select standard.
    - **Handler**: here you enter the Java class that is executed when the process is invoked.
    - **Data access**: you must select Entity/Organization.
    - **Help/Comment**: This section is displayed when the process is started. It briefly describes to the user what the process will be about.
    - **Parameter**:
    - **Module**: Module to which the parameter belongs, by default it is the same as the one assigned to the parent process.
    - **Name**: It is the name that will be shown inside the entries in the mobile application.
    - **DB Column Name**: It is the name with which the parameter is stored in the database.
    - **Sequence**: It is an identifier of the order in which the fields are displayed.
    - **Reference**: It is an identifier of the type of reference stored.
    - **Key Reference**: It is the specific type of the referenced data.
    - **System element**: This field refers to the type of data associated to the parameter.
    - **Help/Comment**: Must be completed in case you want to show help on how the process continues when the parameter is displayed.


    !!! info
        It is important to define all the parameters specified in the screenshot, and with the same types of references for the mobile process to behave properly.  
        The name of each parameter must be customized for each process.
        Optional: It is posible to add a selector (in case the element to scan has selectors defined) and quantity parameter (to define the amount of items scanned).

2. Define a db column in the table in which you want to add a scan process, to add a button to execute the process. E.g.: 

    ```sql
    ALTER TABLE a_asset ADD COLUMN smfms_scan_process CHARACTER(1);
    ```

3. To associate the process with the button,open `Aplication` > `Aplication Dictionary` > `Tables and Colums`, search the table and press **CREATE COLUMNS FROM DB**. This process will create the column.

4. Change the **reference** to Button and in **Process Definition** select the process created recently.

    ![scanprocess2](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/scanprocess2.png)

5. In `Application` > `Application Dictionary` > `Windows,Tabs and Fields`, search for the windows where you want the process.
   E.g. Search **asset windows** and then **assets scan field** in the main tab search. Uncheck "Displayed" (because the scan should only be shown in the mobile app).

    ![sacnprocess1](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/scanprocess1.png)


!!! success
    When the process is executed from the mobile application, a Json will be sent to the backend with all the scanned information. This data must be processed from the Java class defined in the handler and the expected functionality must be performed.
    An Example of this Java class is `InventoryScan`, which can be found in the `com.smf.mobile.scan` module.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create Jest Test Cases
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create Test Cases/How to Create Jest Test Cases
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-testcases/how-to-create-jest-testcases
## Article Content: 
### How to Create Jest Test Cases
  
####  Overview

[Jest](https://jestjs.io/){target="_blank"} is a testing framework created by Facebook and currently used as the default testing framework in  [create-react-app](https://github.com/facebook/create-react-app){target="_blank"}  . Unlike Mocha, it is an opinionated test runner and provides its own assertion and mocking methods. The main advantage is that it runs out-of-the-box and has good integration with technologies like React, Babel or Typescript.

####  Installation

All dependencies can be installed just by
running:
    
    npm install

####  Creating a Test Case

!!! info
    Tests should be placed in `web-test` folder, and files should have the
    suffix `.test.js` .

    This is a valid path for a test class:

    `modules/com.etendoerp.mymodule/web-test/mycomponent.test.js`  

Now you can require() your subject under test and start creating test cases. See  [Jest documentation](https://jestjs.io/docs/getting-started){target="_blank"}  for reference.

######  Sample test file

```javascript title="org.openbravo.client.application/web-test/ob-utilities-date.test.js"
require('../web/org.openbravo.client.application/js/utilities/ob-utilities-date');
 
describe('org.openbravo.client.application - OB.Utilities.Date', () => {
  beforeEach(() => {
    // Execute this before each test
  });
 
  afterEach(() => {
    // Execute this after each test
  });
 
  it('The year where we should change century in 2 digits year format is 50', () => {
    expect(OB.Utilities.Date.centuryReference).toEqual(50);
  });
 
  // Describe blocks can be nested to group test cases
  describe('OB.Utilities.Date.normalizeDisplayFormat', () => {
    it('function works', () => {
      const normalizedFormat = OB.Utilities.Date.normalizeDisplayFormat('DD-MM-YYYY');
      expect(normalizedFormat).toEqual('%d-%m-%Y');
    });
 
    it('function works with other input', () => {
      const normalizedFormat = OB.Utilities.Date.normalizeDisplayFormat('DD-MM-YY');
      expect(normalizedFormat).toEqual('%d-%m-%y');
    });
  });
});
```

####  Run tests/coverage

To run all unit tests available in an Etendo instance (both Core and all installed modules), run the following command:

    npm test

Testing can be limited to a particular module adding the path at the end of the command:    
    
    npm test modules/com.etendoerp.mymodule/

If, along with the test, you want to see a coverage report, run:
    
    npm run coverage

This work is a derivative of [How to Create Jest testcases](https://wiki.openbravo.com/wiki/How_to_create_Jest_testcases){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
  

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create JUnit Test Cases
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Create Test Cases/How to Create JUnit Test Cases
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-testcases/how-to-create-junit-testcases
## Article Content: 
### How to Create JUnit Test Cases

####  Overview

This how-to will focus on creating a test case making use of the `OBBaseTest` and `WeldBaseTest` classes. The test case will check that our system has at least one User with password. For this, we'll use the new DAL approach to access the database.

In computer programming, **unit testing** is a software design and development method where the programmer gains confidence that individual units of source code are fit for use. A unit is the smallest testable part of an application. In procedural programming a unit may be an individual program, function, procedure, etc., while in object-oriented programming, the smallest unit is a method, which may belong to a base/super class, abstract class or derived/child class.

All new developments must belong to a module that is not the _core_ module.

####  Preparing development environment

!!! info
    Make sure that in the root `build.gradle` you have the line `apply from: 'tests.gradle'`. In case it is not there, add it and reload Gradle from your IntelliJ.

First of all you need to create a src-test directory in your module package directory in Etendo ERP.

``` 
modules
└── com.etendoerp.example
    └── src-test                <-- source of the test cases 
        └── src
            └── com.etendoerp.example
                └── EtendoTest.java
```

Now, you are ready to work with test cases.

####  Creating the test case

#####  Inheriting from OBBaseTest

All the core test cases are subclasses from `OBBaseTest`. (org.openbravo.test.base.OBBaseTest). This class handles all the necessary steps to initialize the Data Access Layer, takes care of transaction handling and provides a set of utilities (methods) for working with the Openbravo context (OBContext).

!!! info
    When writing test cases for Etendo that involve dependency injection or require the execution of DAL event observers, it is recommended to extend `org.openbravo.base.weld.test.WeldBaseTest` instead of `org.openbravo.test.base.OBBaseTest`.
    `OBBaseTest` has limitations related to CDI, and it does not support certain features that are available when using WeldBaseTest tests. The latter is a subclass of `OBBaseTest` and provides access to the complete DAL infrastructure, making it more suitable for scenarios involving CDI and event observers.
    Make sure to use `WeldBaseTest` to leverage the full capabilities of dependency injection and DAL event observers in your test cases.


#####  Execution order of test methods

Until now, the methods were simply invoked in the order returned by the reflection API. However, using the JVM order is unwise since the Java platform does not specify any particular order. Of course, well-written test code would not assume any order, but some does, and a predictable failure is better than a random failure on certain platforms.

#####  Creating the Java class

  * Open your IntelliJ IDE. 
  * Create a new folder structure under the ``modules`` folder: ``modules/com.etendoerp.examples/src-test/src/com.etendoerp.example`` . 
  * Create a new Java class with the following content: 

    
```java title="ExampleTest.java" 
package com.etendoerp.example;
 
import static org.junit.Assert.assertTrue;
 
import java.util.List;
 
import org.junit.Test;
import org.junit.Before;
import org.openbravo.dal.core.OBContext;
import org.openbravo.dal.service.OBCriteria;
import org.openbravo.dal.service.OBDal;
import org.openbravo.model.ad.access.User;
import org.openbravo.base.weld.test.WeldBaseTest;
import org.openbravo.test.base.TestConstants;
import org.openbravo.client.kernel.RequestContext;
import org.openbravo.base.secureApp.VariablesSecureApp;


public class ExampleTest extends WeldBaseTest {

  @Override
  @Before
  public void setUp() throws Exception {
    super.setUp();
    OBContext.setOBContext(TestConstants.Users.SYSTEM, TestConstants.Roles.SYS_ADMIN,
        TestConstants.Clients.SYSTEM, TestConstants.Orgs.MAIN);
    VariablesSecureApp vsa = new VariablesSecureApp(
        OBContext.getOBContext().getUser().getId(),
        OBContext.getOBContext().getCurrentClient().getId(),
        OBContext.getOBContext().getCurrentOrganization().getId(),
        OBContext.getOBContext().getRole().getId()
    );
    RequestContext.get().setVariableSecureApp(vsa);
  }
 
  @Test
  public void testUsersCount() {
    final OBCriteria<User> uCriteria = OBDal.getInstance().createCriteria(User.class);
    final List<User> uList = uCriteria.list();
    int userCount = 0;
    for (User u: uList) {
      if (u != null && u.getPassword() != null && !u.getPassword().isEmpty())
        userCount++;
    }
    assertTrue(userCount > 0);
    System.out.println("Total of users with password: " + (userCount));
  }
}
```
     

######  Understanding the class

You have just created a new class named Example that extends from the `WeldBaseTest` class.

```java
public void testUsersCount() {}
```

This class has a testUsersCount function. Note that all testing methods _must_ start with test in the function name. e.g. ``testAllWarehouses()``, ``testMyFirstTest()``, etc        

```java

@Override
@Before
public void setUp() throws Exception {
  super.setUp();
  OBContext.setOBContext(TestConstants.Users.SYSTEM, TestConstants.Roles.SYS_ADMIN,
      TestConstants.Clients.SYSTEM, TestConstants.Orgs.MAIN);
  VariablesSecureApp vsa = new VariablesSecureApp(
      OBContext.getOBContext().getUser().getId(),
      OBContext.getOBContext().getCurrentClient().getId(),
      OBContext.getOBContext().getCurrentOrganization().getId(),
      OBContext.getOBContext().getRole().getId()
  );
  RequestContext.get().setVariableSecureApp(vsa);
}
```

Sets the context as if a System Administrator is logged in the application. You can also set the context as if another user is logged in the application.

```java
final OBCriteria<User> uCriteria = OBDal.getInstance().createCriteria(User.class);
final List<User> uList = uCriteria.list();
```

Uses the `OBDal` instance to create a new `OBCriteria` object, and uses it for listing all (since we are not filtering) the Users in the database.

```java
int userCount = 0;
for (User u: uList) {
  if (u != null && u.getPassword() != null && !u.getPassword().isEmpty())
    userCount++;
}
```

We loop trough the uList collection, and we increment the userCount variable if the user has a password.

```java
assertTrue(userCount > 0);
```

We assert that the userCount is more than 0.

```java
System.out.println("Total of users with password: " + (userCount));
```

Finally, we print a total of users with password just for the record.

#####  Transaction Handling

A question which might pop-up when looking at the above code: where is the database transaction handling done? The answer is that this is handled by the `WeldBaseTest` class and the Etendo data access layer:

  * a transaction is automatically started at first database access in the test cases. This is done by the Data Access Layer. 
  * a transaction is either committed (when no exception happened) or rolled-back (when an exception happened). 

The `WeldBaseTest` class detects automatically if an exception happened or not.

There are certainly cases whereby it makes sense to have more control over the database transactions. There are a number of relevant methods which can be useful then:

  * `OBDal.getInstance().flush()`: flushes the update/insert queries in hibernate to the database. 
  * `OBDal.getInstance().commitAndClose()`: commits the transaction and closes the session. A new session/transaction is automatically started at the next database access. 
  * `OBDal.getInstance().rollbackAndClose()`: rolls back and closes the transactions. A new session/transaction is automatically started at the next database access. 

!!! info
    DAL event observers  are not triggered within test cases extending `OBBaseTest` class. They to work require of test cases extending `WeldBaseTest`. 

#####  Side-Effect Free

A test case will often change the data in the underlying database. Most of the time, it is not feasible to setup a completely new test database for each test run. Therefore test-cases should be developed such that they are side effect free. This means:

  * When the test-case changes data then it should have a test method which is run as the last test method which cleans up/repairs the data. 
  * This clean-up method should also clean up data which is left from previous test runs. For this common issue should be used `@AfterClass` notation. This method runs automatically at the end of the class.

This last point is important because there can be always reasons why during a test the clean-up step is not performed. For example because the test run is stopped before the clean-up is done.

#####  Approach to features of JUnit

######  Parameterized Tests

!!! info
    For more information, visit:  [Parameterized-Test](https://github.com/junit-team/junit4/wiki/Parameterized-tests){target="_blank"}

######  Rules

!!! info
    For more information, visit:  [Rules](https://github.com/junit-team/junit4/wiki/Rules){target="_blank"}

######  Assertions and Hamcrest 1.13

!!! info
    For more information, visit:  [Hamcrest](https://hamcrest.org/){target="_blank"}

Hamcrest is a framework for writing matcher objects allowing 'match' rules to be defined declaratively. There are a number of situations where matchers are invaluble, such as UI validation, or data filtering, but it is in the area of writing flexible tests that matchers are most commonly used.

When writing tests it is sometimes difficult to get the balance right between overspecifying the test, and not specifying enough (making the test less valuable). Having a tool that allows you to pick out precisely the aspect under test and describe the values it should have, to a controlled level of precision, helps greatly in writing tests.
  

#####  JSON Matchers
  
Etendo provides a set of matchers that can be useful when asserting JSONObjects or JSONArrays.

######  equal

Matches when the examined `JSONObject` has exactly the same number of properties with the same values as the expected one. The order of the keys is not taken into account. Supports matcher properties.

```java  
   
@Test
public void testEqual() {
  JSONObject json1 = new JSONObject(Map.of("p1", 1, "p2", "abcd"));
  JSONObject json2 = new JSONObject(Map.of("p1", 1, "p2", "abcd"));
  JSONObject json3 = new JSONObject(Map.of("p2", "abcd", "p1", 1));
  JSONObject json4 = new JSONObject(Map.of("p1", 1, "p2", "efgh"));
  JSONObject json5 = new JSONObject(Map.of("p1", 1));
  JSONObject json6 = new JSONObject(Map.of("p1", greaterThan(0), "p2", startsWith("abc"))); // matcher properties
 
  assertThat("JSON objects are equal", json1, equal(json2));
  assertThat("JSON objects are equal", json1, equal(json3));
  assertThat("JSON objects are not equal", json1, not(equal(json4)));
  assertThat("JSON objects are not equal", json1, not(equal(json5)));
  assertThat("JSON objects are equal", json1, equal(json6));
}
```

######  matchesObject

Matches when the examined JSONObject contains the properties with the same values of the expected one. The order of the keys is not taken into account. Supports matcher properties.

```java
 
@Test
public void testMatchesObject() {
  JSONObject json1 = new JSONObject(Map.of("p1", 1, "p2", "abcd"));
  JSONObject json2 = new JSONObject(Map.of("p1", 1, "p2", "abcd"));
  JSONObject json3 = new JSONObject(Map.of("p2", "abcd", "p1", 1));
  JSONObject json4 = new JSONObject(Map.of("p1", 1, "p2", "efgh"));
  JSONObject json5 = new JSONObject(Map.of("p1", 1));
  JSONObject json6 = new JSONObject(Map.of("p1", 1, "p2", "abcd", "p3", "abcd"));
  JSONObject json7 = new JSONObject(Map.of("p1", greaterThan(0), "p2", "abcd"));
 
  assertThat("JSON object match", json1, matchesObject(json2));
  assertThat("JSON object match", json1, matchesObject(json3));
  assertThat("JSON object does not match", json1, not(matchesObject(json4)));
  assertThat("JSON object match", json1, matchesObject(json5));
  assertThat("JSON object does not match", json1, not(matchesObject(json6)));
  assertThat("JSON object match", json1, matchesObject(json7));
}
```

######  hasItems

Used to match the items of a `JSONArray`. This matcher can be used with two different kind of arguments.

If an array of objects is passed, then it matches when the examined `JSONArray` contains all the received objects. The order of the objects is not taken into account.

```java   
 
@Test
public void testHasItems() {
  JSONObject json1 = new JSONObject(Map.of("p1", 1, "p2", "abcd"));
  JSONObject json2 = new JSONObject(Map.of("p2", 2, "p3", "efgh"));
  JSONArray array = new JSONArray();
  array.put(json1);
  array.put(json2);
  array.put(5);
  JSONObject json3 = new JSONObject(Map.of("p2", 2, "p3", startsWith("e")));
  JSONObject json4 = new JSONObject(Map.of("p2", 2, "p3", "ijkl"));
 
  assertThat("JSON array has items", array, hasItems(5, json3));
  assertThat("JSON array does not have items", array, not(hasItems(4, json3)));
  assertThat("JSON array does not have items", array, not(hasItems(json4)));
}
```

It also supports receiving an array of  Hamcrest  matchers. In that case, then it matches when the examined JSONArray matches with all the received matchers.

```java
 
@Test
public void testHasItems() {
  JSONObject json1 = new JSONObject(Map.of("p1", 1, "p2", "abcd"));
  JSONObject json2 = new JSONObject(Map.of("p2", 2, "p3", "efgh"));
  JSONArray array = new JSONArray();
  array.put(json1);
  array.put(json2);
  array.put(5);
  JSONObject json3 = new JSONObject(Map.of("p2", 2, "p3", startsWith("e")));
  JSONObject json4 = new JSONObject(Map.of("p1", 1));
  JSONObject json5 = new JSONObject(Map.of("p2", 2, "p3", "ijkl"));
 
  assertThat("JSON array has items", array, hasItems(greaterThan(4), equal(json3)));
  assertThat("JSON array has items", array, hasItems(greaterThan(4), matchesObject(json4)));
  assertThat("JSON array does not have items", array, not(hasItems(greaterThan(5))));
  assertThat("JSON array does not have items", array, not(hasItems(equal(json5))));
}
```

##### Run Tests

Etendo has a number of ant tasks which run the test cases:

  * `./gradlew test`: This suite contains all the test cases.
  * `./gradlew test --tests "module-name.*"`: This suite contains all the test cases of a particular module. (e.g. `./gradlew test --tests "com.etendoerp.example.*"`)

!!! info
    If tests have been implemented or modified for [etendo_core](https://github.com/etendosoftware/etendo_core.git), make sure that the class is included in the `StandaloneTestSuite` or `WebserviceTestSuite`.

#####  The Result

To be able to execute your test cases:

  * Right click on the `ExampleTest` class. 
  * Select Run `ExampleTest`. 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-create-junit-testcases/how-to-create-junit-testcases-6.png)

  * You can check the result of the test case on the JUnit view and the output of your tests in the Console view: 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-create-junit-testcases/how-to-create-junit-testcases-7.png)

Also, in the build folder you can find the report of the tests execution, and you can open it on your browser.
``` 
build
└── reports
    └── tests 
        └── test
            └── index.html
```

####  Testing Requests

In general unit tests don't require of an Etendo Classic instance running in Tomcat to be executed. But in some cases, how requests work is wanted to be tested. Depending on the request to be tested, different classes should be extended:

  * _REST Webservices_ . ` BaseWSTest ` should be extended, it deals with authentication and provides methods to execute requests, parse xml results, etc. 
  * _Other Requests_ (such as datasources). ` BaseDataSourceTestNoDal ` or ` BaseDataSourceTestDal ` classes can be extended (depending if the test case requires or not DAL). Similarly to webservices it provides authentication handling as well as utility methods to perform requests. 

####  Testing CDI
  
Default test cases extending ` org.openbravo.test.base.OBBaseTest ` class cannot make use of dependency injection. In order to use it ` org.openbravo.base.weld.test.WeldBaseTest ` class needs to be extended instead. This is also a subclass of ` OBBaseTest ` , so it makes available all DAL infrastructure.

` OBBaseTest ` uses internally  Arquillian  runner to create a Weld container.

Example of a test case injecting dependencies:

```java

public class CdiInfrastructure extends WeldBaseTest {
 
@Inject
private ApplicationScopedBean applicationBean;
 
@Inject
private SessionScopedBean sessionBean;
 
@Inject
private RequestScopedBean requestBean;
 
/** beans are correctly injected */
@Test
public void beansAreInjected() {
  assertThat("application bean is injected", applicationBean, notNullValue());
  assertThat("session bean is injected", sessionBean, notNullValue());
  assertThat("request bean is injected", requestBean, notNullValue());
}
}
```

#####  Scopes

Application and session scopes are shared among all test cases in the same class whereas a new request scope is created for each test case method. Application scope is reset for each new class.

```java

/** starts application and session scopes */
@Test
@InSequence(1)
public void start() {
  applicationBean.setValue("application");
  sessionBean.setValue("session");
  requestBean.setValue("request");
 
  assertThat(applicationBean.getValue(), equalTo("application"));
  assertThat(sessionBean.getValue(), equalTo("session"));
  assertThat(requestBean.getValue(), equalTo("request"));
}
 
/** application and session scopes are preserved but not request scope */
@Test
@InSequence(2)
public void applicationAndSessionShouldBeKept() {
  assertThat(applicationBean.getValue(), equalTo("application"));
  assertThat(sessionBean.getValue(), equalTo("session"));
  assertThat(requestBean.getValue(), nullValue());
}
```

#####  Parameterization

Because ` CdiInfrastructure ` class uses `org.jboss.arquillian.junit.Arquillian` runner, it is not possible to use other runners, which also includes ` org.junit.runners.Parameterized ` runner.

This limitation can be workarounded by adding a field annotated as ` @Rule ` with ` org.openbravo.base.weld.test.ParameterCdiTestRule ` type created with the list of the values for parameters and another field annotated as ` @ParameterCdiTest ` which will take those values. In this case each test case will be executed as many times as number of items the parameter list contains each of them the parameter field will take a different item.

```java
 
public class ParameterizedCdi extends WeldBaseTest {
  public static final List<String> PARAMS = Arrays.asList("param1", "param2", "param3");
 
  /** defines the values the parameter will take. */
  @Rule
  public ParameterCdiTestRule<String> parameterValuesRule = new ParameterCdiTestRule<String>(
      PARAMS);
 
  /** this field will take the values defined by parameterValuesRule field. */
  private @ParameterCdiTest String parameter;
 
  private static int counterTest1 = 0;
 
  /** Test case to be executed once per parameter value */
  @Test
  public void test1() {
    assertThat("parameter value", parameter, equalTo(PARAMS.get(counterTest1)));
    counterTest1++;
  }
}
```

In this example ` test1 ` test case will be executed 3 times having ` parameter ` field "param1", "param2" and "param3" value in each of these executions.

Unlike when using ` Parameterized.class ` runner, all these 3 executions are seen as a single execution ( ` Parameterized.class ` would show 3 independent executions), this causes that if, for example, first execution fails the rest will not be run.

#####  DAL event observers

Because  DAL event observers  make use of CDI to work, they are not executed in standard test cases extending ` OBBaseTest ` .

This limitation does not apply when using ` WeldBaseTest ` tests.

---

This work is a derivative of [How to Create JUnit testcases](https://wiki.openbravo.com/wiki/How_to_create_JUnit_testcases){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Define a Table as a Tree
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Define a Table as a Tree
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-define-a-table-as-a-tree
## Article Content: 
### How to Define a Table as a Tree

#### Overview

If a table contains data that is bound to be represented hierarchically using a tree, the developer can define **tree categories** for it.

Defining tree categories for a table has two advantages:

  * It enables using the tree grid view for tabs associated with that table.
  * It enables using that table in Tree Selectors.

#### Table Tree Category subtab

The Table Tree Category tab allows to **define tree categories for tables**. It is possible to define several tree categories for a table, if it can be expresses in different ways hierarchically.

##### Enabling the Table Tree Category subtab

The Table Tree Category is a subtab of the header tab of the Tables and Columns windows. It is hidden by default, in order to enable it the user has to check the table Is Tree flag.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Define_a_Table_as_a_Tree-1.png)

##### Tree Structures

There are three tree structures available:

###### AD Tree Structure

If this structure is used, the information needed to handle the hierarchy of the tree data will be stored internally by Etendo in the `AD_Tree` and `AD_TreeNode` tables.

###### Link to Parent Tree Structure

This structure should be used if the table contains a column that represents the parent node of the record. For instance, consider a table called `Employee`, that has a column called `reportsTo`. This column points to the employee who the current employee must report to.

###### Custom Tree Structure

There may be other cases where the information needed to handle the hierarchy is stored within the table but by means other than a column pointing directly to the parent node. For instance, this is the case of the `AD_Tab` table, where the hierarchy of the tabs is defined using the `seqNo` and `tabLevel` columns. In this case, the user has to provide a manual datasource to handle the tree hierarchy.

##### Common Fields for all Tree Structures

The following fields apply to all trees, regardless of its tree structure:

  * **Name**: Name of the tree. This is the display field shown in the references to this table from the Tabs and the Tree Reference.
  * **Tree Structure**: Tree structure that this tree will use
  * **Is Ordered**: This flag specifies if the tree is ordered, that is, if it matters the order of the nodes within its parent node.
  * **Is Parent Selection Allowed**: If false, then in the tree references that point to this tree will only allow to pick leaf nodes. Otherwise it will be possible to select both folder and leaf nodes.
  * **Is Main Tree**: Several trees can be defined for a table, but only one of them can be the main tree. Each tree can define a different behavior for the creation and deletion of nodes, but only the behavior defined by the main tree will be taken into account.
  * **Apply HQL Where Clause to Child Nodes**: If this property is set, then if there is a HQL Where Clause defined for the table, it will be applied to all nodes. If it is unchecked, then it will be applied only to the root nodes. This field should only be unchecked in the tree grid view should show records that are not shown in the standard grid view. For instance, consider a sub tab called Children, that shows the children of a person. The HQL Where Clause of the table is in charge of showing only the children of the person selected in the parent tab. The user might decide that he wants to see all the person descendants in the tree grid view, so the HQL Where Clause should only be applied to the root nodes.
  * **Node Deletion Policy**: The are two options:
    * **Reparent Child Nodes**: If a node is deleted, all its child nodes are transfered to its parent node.
    * **Do Not Allow If Has Children**: A node with children cannot be deleted.

##### ADTree Structure Fields

  * **Handle Nodes Manually**: Each time a new record is created or deleted in a table that contains an `ADTree`, an `ADTree` node must be created or deleted respectively. The developer can define using this flag if Etendo should automatically create and delete the `ADTree` nodes, or if the new nodes are going to be handled manually (i.e. using triggers or event handlers).

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Define_a_Table_as_a_Tree-2.png)

##### LinkToParent Structure Fields

  * **Link to Parent Column**: Column that points to the parent node of the record.
  * **Node Id Column Column**: Column pointed by the Link to Parent Column. In most cases the key column of the table should be used.
  * **Has Multiparent nodes**: In some cases the table contains hierarchical data that is not strictly a tree because each record may have several parent nodes. Consider for instance a table that represents product bundles. Each bundle can contain several bundles (has several children), and be contained in several other bundlers (has several parents). Only if this is the case should this flagged be checked.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Define_a_Table_as_a_Tree-3.png)

##### Custom Tree Structure Fields

  * **Datasource**: A datasource that will handle all the tree operations. 
  
!!!info
    For more information, visit [How to Create a Custom Tree](https://docs.etendo.software/latest/how-to-guides/How_to_Create_a_Custom_Tree.md).

#### Enabling the Tree Grid View in a Tab

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Define_a_Table_as_a_Tree-4.png)

In order to enable the Tree Grid View in a Tab, the system admin has to pick a tree category in the Table Tree Category field.

By default, the root nodes will be those whose parent is null or '0'. The user can overwrite this by defining a HQL Where Clause for Root Nodes that will be used to pick the root nodes for this tab.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_Define_a_Table_as_a_Tree-5.png)

#### Defining a Tree Selector

Tables that have trees defined are bound to be used in **Tree Selectors**. Tree Selector are a variant of the Etendo selectors, that take advantage of the hierarchical data of the tables, allowing to use trees for filtering and picking records.

!!!info
    For more information, visit [How to Create a Tree Selector](https://docs.etendo.software/latest/etendo-classic/how-to-guides/How_to_Create_a_Tree_Selector.md). 

This work is a derivative of [How to define a table as a tree](https://wiki.openbravo.com/wiki/How_to_Define_a_Table_as_a_Tree){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to define Display Logic Evaluated at Server Level
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to define Display Logic Evaluated at Server Level
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-define-display-logic-evaluated-at-server-level
## Article Content: 
### How to define Display Logic Evaluated at Server Level

#### Overview

With the introduction of this functionality, it is possible to define in Openbravo Display Logic that are going to be evaluated at Server Level.

This means that the expression for this particular Display Logic is going to be evaluated while generating the code for the final Window instead of being evaluated when the Window is loaded.

By doing so, it is possible to avoid blank fields when the field should not be shown. Instead, the fields are rearranged and the Window looks more clean.

##### Usage

In the Windows, Tabs & Fields Window, there is a new field named _Display Logic Evaluated in the Server_ .

In this field, it is possible to define an expression that will be evaluated to decide whether that particular field must be shown or not.

This expression must follow the same syntactic rules that are used in the normal Display Logic. The expression can evaluate Preferences, but only those defined at System Level.

An example of an expression would be:
`@uomManagement@ = 'Y' & @enableNegativeStockCorrections@ = 'Y'`

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_define_Display_Logic_Evaluated_at_Server_Level-1.png)

##### Limitations

Since this functionality is going to be evaluated at a System Level (the visibility of the fields is going to be the same for all the Clients, Organizations and Users), it is possible to use Preferences, but only those ones that have been defined at System Level.

This work is a derivative of [How to define Display Logic Evaluated at Server Level](http://wiki.openbravo.com/wiki/How_to_define_Display_Logic_Evaluated_at_Server_Level){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Develop a DAL Background Process
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Develop a DAL Background Process
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-develop-a-dal-background-process
## Article Content: 
###  How to Develop a DAL Background Process

####  Overview

A background process is a process which runs at regular intervals. For this section we will develop a background process for the following scenario:

_Say our customer wants to have sales information for the last 6 months of each product in the description field._

A background process needs to (re)calculate the sales numbers on a regular basis and save them into the Description field of each product that is marked as being sold. Our main Product window's tab should end up similar to:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_develop_a_DAL_background_process-0.png)

Consider that this is a simple exercise and that we are demonstrating how a background process is developed. The above example would probably better be implemented by first adding a new field to the `M_PRODUCT` database table that would hold this information. However, for the purpose of this exercise, we will just store it in the Description field.

In this section, it will be shown how a java process can be implemented as a background process. A java process can however also be called directly from the user interface and have a user interface which allows entering parameters. 

!!!info
      For a generic description of java processes see [Processes](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/Processes.md).

####  Definition within the application dictionary

Background processes are defined within the `Application Dictionary` > `Report and Process` window. Use the **System Administrator** role to create a new record as indicated below:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_develop_a_DAL_background_process-1.png)
  
The following fields are vital for the definition of a background process: 

  * **Module** \- Your custom module that this new background process will belong to; note that this will consequently indicate the location on the hard drive and the package it must belong to 
  * **Search Key** \- Unique identifier of the process; a good practice is to use the class name 
  * **Name** \- A user friendly name of the process 
  * **UI Pattern** \- Should be set to Manual since Etendo ERP does not need to generate any UI windows 
  * **Background** \- Indicates that this process is a background process which consequently also displays the **Java Class Name** field 
  * **Java Class Name** \- The full specification of the class name including the package (this package must follow the package structure of your module specified above): `com.etendoerp.client.application.examples.ProductRevenueCalculation`

####  Process and DalBaseProcess

Before continuing, decide how the background process will perform the database operations. We have two options:

 - Use the XSQL file that will get converted to a Java class by the SQLC core library upon runtime. If this option is used, your background Java class should _implement_ the **Process interface** and implement the `execute` method to perform our tasks. 
  
!!!info
      Find this interface in `src/org/openbravo/scheduling/Process.java`. 

 - Use the new Data Access Layer which provides mid-tier POJOs through which we can manipulate database tables. If this method is used, your background Java class must _extend_ the **DalBaseProcess class** and implement the `doExecute` method that performs your task. This will give it access to the correct data context provided by DAL and at the same time, take care of authentication and privileges. 
  
!!!info
      Find the abstract class in `src/org/openbravo/service/db/DalBaseProcess.java` . 

Since the first method will eventually become deprecated due to database dependency, the second one is the prudent option to take.

!!!note
      Some understanding of the Hibernate Criteria API is beneficial when using the DAL. Read more information for a detailed description of this [API](https://docs.jboss.org/hibernate/core/3.3/reference/en/html/querycriteria.html){target="\_blank"}.

The Data Access Layer is discussed in several other articles and sections.

!!!info
      For more information, read the [Data Access Layer](https://docs.etendo.software/latest/developer-guide/etendo-classic/concepts/Data_Access_Layer.md) reference manual.

####  Implementation

The example module implements the background process in the `modules/org.openbravo.client.application.examples/src/org.openbravo.client.application.examples.ProductRevenueCalculation.java`

```java title="ProductRevenueCalculation.java"
// assign the background process to a package that belongs to the 
// main package of the module this custom development belongs to  
package com.etendoerp.client.application.examples;
  
import java.math.BigDecimal;
import java.util.Calendar;
 
import org.hibernate.Criteria;
import org.hibernate.criterion.Projections;
import org.hibernate.criterion.Restrictions;
import org.openbravo.dal.service.OBCriteria;
import org.openbravo.dal.service.OBDal;
import org.openbravo.model.common.order.OrderLine;
import org.openbravo.model.common.plm.Product;
import org.openbravo.scheduling.ProcessBundle;
import org.openbravo.scheduling.ProcessLogger;
import org.openbravo.service.db.DalBaseProcess;
import org.quartz.JobExecutionException;
 
// the background process needs to extend DalBaseProcess since
// we will be using DAL objects to perform database operations
public class ProductRevenueCalculation extends DalBaseProcess {
 
  static int counter = 0;
 
  private ProcessLogger logger;
 
  // abstract method doExecute needs to be implemented and carries
  // with itself the ProcessBundle object deriving from Openbravo Quartz
  // scheduler
  public void doExecute(ProcessBundle bundle) throws Exception {
 
    logger = bundle.getLogger(); // this logger logs into the LOG column of
    // the AD_PROCESS_RUN database table
    BigDecimal sumAmount = BigDecimal.ZERO;
 
    logger.log("Starting background product revenue calculation. Loop " + counter + "\n");
 
    // define time 6 months ago from today which is the timespan that our
    // calculation will consider
    Calendar timeSixMonthsAgo = Calendar.getInstance();
    timeSixMonthsAgo.add(Calendar.DAY_OF_MONTH, -180);
 
    try {
      // get all products that are sold (M_PRODUCT.ISSOLD = 'Y')
      final OBCriteria<Product> productList = OBDal.getInstance().createCriteria(Product.class);
      productList.add(Restrictions.eq(Product.PROPERTY_SALE, true));
 
      logger.log("No of products = " + productList.list().size() + "\n");
 
      // loop through all products that are sold and calculate revenues
      // for each
      for (Product product : productList.list()) {
 
        sumAmount = BigDecimal.ZERO;
 
        // select lines from C_ORDERLINE table that match the product
        final Criteria orderLineList = OBDal.getInstance().createCriteria(OrderLine.class)
            .add(Restrictions.eq(OrderLine.PROPERTY_PRODUCT, product));
 
        // filter out lines that belong to sales (as opposed to
        // purchase) and fit within the last six months
        //
        // when you want to filter on a property of an associated entity
        // then the property of that association needs an alias, see
        // here: http://www.javalobby.org/articles/hibernatequery102/
        orderLineList.createAlias(OrderLine.PROPERTY_SALESORDER, "order")
            .add(Restrictions.eq("order.salesTransaction", true))
            .add(Restrictions.gt("order.orderDate", timeSixMonthsAgo.getTime()));
 
        // Sum line amounts grouped by product
        orderLineList.setProjection(Projections.projectionList()
            .add(Projections.sum(OrderLine.PROPERTY_LINENETAMOUNT))
            .add(Projections.groupProperty(OrderLine.PROPERTY_PRODUCT)));
 
        // due to grouping and sum operation there will really only be
        // one resulting record but in theory there could be more (a
        // list)
        for (Object o : orderLineList.list()) {
          // the query returns a list of arrays (columns of the query)
          final Object[] os = (Object[]) o;
          sumAmount = (BigDecimal) os[0];
          final Product p = (Product) os[1];
          logger.log(p.getName() + " Amount " + sumAmount + "\n");
        }
        product.setDescription("6 monthRevenue = " + sumAmount);
      }
 
    } catch (Exception e) {
      // catch any possible exception and throw it as a Quartz
      // JobExecutionException
      throw new JobExecutionException(e.getMessage(), e);
    }
  }
}
```

####  Compiling the application

Using the command line compilation, use the `./gradlew smartbuild` to compile the application's manual code and deploy it to Tomcat context. Then, restart Tomcat.

####  Scheduling

In order for a background process to be executed, it first needs to be scheduled. Using the **Etendo Client Admin** role (so not the System Admin role) navigate to `General Setup` > `Process Scheduling` >`Process Request` window and enter a new record.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_develop_a_DAL_background_process-2.png)

The following fields are important:

  * **Process** \- determines which background process to schedule. Only background processes are available in the dropdown
  * **Timing** \- there are several ways of scheduling a process based on the requirement if the process needs to be run once or repetitively. Use the _Scheduled_ option for our purpose 
  * **Frequency** \- how often does the process need to run. Based on your selection the fields below will change accordingly for you to be able to enter appropriate interval. Select _02 - Every n minutes_ for us to be able to see the results immediately
  * **Interval in Minutes** \- How many minutes apart should the process be run in case _02 - Every n minutes_ was selected above. Enter _10_ 
  * **Num Repetitions** \- The number of times a process request will repeat after its first execution. Note that 10 repeats will give a total of 11 process executions. Enter _5_

Save the record and click on the **Schedule Process** button in order for the process to finally get scheduled.

!!!note
      It is needed to use the Etendo Admin role in order for the background process to have access to products of BigBazaar. The client of the role that enters the background process request is used to determine access privileges.  
  
####  Monitoring

To see the process executions, the status and the log it generated, use the `General Setup` > `Process Scheduling` > `Process Monitor` window. After a minute or two of scheduling the process, entries related to the executions of the new process should be seen.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_develop_a_DAL_background_process-4.png)

####  The Result

To be able to get meaningful results, enter and complete a Sales Order (`Sales Management` > `Transactions` > `Sales Order`) since the background process calculates revenues within the last 6 months and the demo database can contain records older than that. For example, enter a new Sales Order for a business partner, and enter a line for a certain product, then complete the sales order.

Then, navigate to the `Master Data Management` > `Product` window and find the product. After a minute or two when the process has recalculated the **Description** field, you should be able to see the following:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_develop_a_DAL_background_process-5.png)

This work is a derivative of [How to develop a DAL background process](http://wiki.openbravo.com/wiki/How_to_develop_a_DAL_background_process){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Document an Endpoint with OpenAPI
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Document an Endpoint with OpenAPI
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-document-an-endpoint-with-openapi
## Article Content: 
### How to Document an Endpoint with OpenAPI

#### Overview

This documentation details the steps to document API endpoints using the OpenAPI specification. By leveraging Swagger, developers can ensure their APIs are well-documented, standardized, and easy to integrate.

!!! info
    To be able to include this functionality, the Platform Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [_Platform Extensions Bundle_](https://marketplace.etendo.cloud/#/product-details?module=5AE4A287F2584210876230321FBEE614){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Platform Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/platform-extensions/release-notes.md).

#### Define a New OpenAPIDefaultRequest

To define a new `OpenAPIDefaultRequest`, you need to extend the abstract class `OpenAPIDefaultRequest`.

Here is an example:

```java
package com.etendoerp.etendorx.openapi;

public class ImageUploadOpenAPI extends OpenAPIDefaultRequest {
  public static final String ETENDO_ID_PATTERN = "^[0-9a-fA-F]{1,32}$";

  @Override
  protected Class<?>[] getClasses() {
    return new Class<?>[]{ com.etendoerp.etendorx.services.ImageUploadServlet.class };
  }

  @Override
  protected String getEndpointPath() {
    return "/sws/com.etendoerp.etendorx.imageUpload/";
  }

  @Override
  Operation getPOSTEndpoint() {
    Operation endpoint = new Operation();
    endpoint.setSummary("Upload an image to EtendoERP");
    endpoint.setDescription("Upload an image to EtendoERP, it can use a configuration associated with a Column ID to automatically resize the image.");

    Schema reqSchema = new Schema()
        .addProperty("filename", new StringSchema().description("The name of the file").example("image.jpg"))
        .addProperty("columnId", new StringSchema().description("The column ID where the size and resize configuration is stored").pattern(ETENDO_ID_PATTERN))
        .addProperty("base64Image", new StringSchema().description("The base64 encoded image"));
    reqSchema.required(List.of("filename", "base64Image"));

    RequestBody requestBody = new RequestBody().content(new Content()
        .addMediaType("application/json", new MediaType().schema(reqSchema)));
    endpoint.requestBody(requestBody);

    return endpoint;
  }
}
```

This class specifies a POST endpoint for uploading images. It defines the endpoint path, request body schema, and required properties.


#### Define an OpenAPI Request & Flow

An OpenAPI Request record represents a single API endpoint in your application. OpenAPI Requests are defined in the window `OpenAPI Request`.

1. **Type**: Set the type to "Default".
2. **Description**: Add the endpoint description.
3. **Java Class**: Specify the Java class created that extends the `OpenAPIDefaultRequest` class.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-document-an-endpoint-with-openapi/how-to-document-an-endpoint-with-openapi-0.png)


An **OpenAPI Flow** groups related API endpoints under a single category or "flow." These flows make it easier to organize and navigate the API documentation.

Each OpenAPI Flow record can:

- Define a flow name and description.
- Include one or more OpenAPI Requests through the `Endpoints` tab.
- Specify which HTTP methods (GET, GET by ID, POST, PUT) the endpoints support using the `Endpoints` tab fields. When these fields are checked, they generate the corresponding endpoint methods documentation.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-document-an-endpoint-with-openapi/how-to-document-an-endpoint-with-openapi-1.png)

To ensure an OpenAPI Request appears in Swagger documentation, it must be linked to an OpenAPI Flow. This ensures logical grouping and visibility.

#### Check Swagger

The new endpoint documentation should now be visible at the Swagger UI URL. The URL might vary depending on your deployment but typically follows the format:

```
http://localhost:8080/etendo/web/com.etendoerp.openapi/#/
```

Verify that the new endpoint appears under the defined tag and displays the correct request and response schemas.


#### Key Components of OpenAPI Integration

##### OpenAPIDefaultRequest

The `OpenAPIDefaultRequest` abstract class provides the base functionality for adding default API endpoints to Swagger documentation. It:

- Retrieves related tags and flows.
- Adds definitions to the OpenAPI object.
- Supports GET, POST, and PUT operations.

##### Example of an OpenAPI Endpoint Implementation

The `ImageUploadOpenAPI` class demonstrates:

- **Endpoint Path**: `/sws/com.etendoerp.etendorx.imageUpload/`
- **POST Operation**: Defines required properties (`filename`, `base64Image`) and validates input.
- **Java Class Association**: Links to `ImageUploadServlet` for handling requests.

##### OpenAPIEndpoint Interface

This interface ensures consistent API endpoint behavior by defining methods such as:

- `boolean isValid(String tag)`
- `void add(OpenAPI openAPI)`

For example, the `ImageUploadOpenAPI` class implements these methods to validate tags and add endpoint definitions to the OpenAPI object.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Embed a Widget into a Window Tab
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Embed a Widget into a Window Tab
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-embed-a-widget-into-a-window-tab
## Article Content: 
###  How to embed a Widget into a Window Tab

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_embed_a_Widget_into_a_Window_Tab-0.png) 
This document is still a work in progress. It may contain inaccuracies or errors.   

####  Introduction

This Howto assumes familiarity with both how windows, tabs and fields work and also how widgets are defined in general.
  
This HowTo describes how to embed a widget into a tab of a generated window. In detail it will show the restrictions/differences in the Widget definition itself and explains the following two examples:

  1. How to embed a simple widget into a Tab.
  2. How to embed a QueryList widget into a Tab which filters its data according to the currently displayed record.

####  How to place a Widget into a Tab

In this part we will define two simple Widgets and place them into a generated Window/Tab.

The goal of this section is to show define a generated Window/Tab which looks like in the following screenshot.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_embed_a_Widget_into_a_Window_Tab-2.png)

Widget embedded in a Tab

In this example one widget is placed next to a few normal fields in a demo tab. This widget spans a single column but four rows on the top right and does not have a field label (to use the extra space of the label for the content itself). The widget content shows twitter entries including the text "Openbravo".

The rest of this sections assumes the following action to be done:

  * Creation of a table.
  * Creation of a window & tab to show this table.

The following now concentrates on how to add the two widgets in the positions shown above to this tab. This will consist of four basic steps for each of the widgets:

  1. Define the widget itself.
  2. Define a new reference entry to use the widget.
  3. Add a new column & field to the table & tab.
  4. Configure the new field to match the layout shown above.

The third step of this uses the same flow as adding any other field and is described in detail in  these  two  other documents.

First step is to create a new widget definition which will show the twitter content matching 'Openbravo'. This widget will reuse the code from the already defined Twitter widget shipped with the Openbravo 3 distribution.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_embed_a_Widget_into_a_Window_Tab-4.png)

Twitter widget definition

One important detail in this definition is that the parameter is defined as **Fixed** as for widgets embedded in a Window/Tab there are no Widget Instances as described  here.

The next step is to define a reference which can be used in the column for the widget.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_embed_a_Widget_into_a_Window_Tab-6.png)

Reference definition for Twitter widget

The important details in this definition are:

  * On reference Tab: _Parent Reference_ = **OBKMO_Widget in Form Reference**
  * On 'Widget in Form' tab: the newly created _Widget Class' & unmark _ Show Field Title _to use the extra available space for the widget content itself._

The last step for this widget is to add a column CHAR(1) to the table and a new field to the demo tab. The column needs to be defined according to the following details:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_embed_a_Widget_into_a_Window_Tab-8.png)

Column definition for Twitter widget

The last step is to add a form field to the tab and configure this form field with the wanted UI details consisting of:

  * Sequence No: for the usual field ordering.
  * Colspan: to define how many columns the field/widget should occupy.
  * Rowspan: to define how many rows the field/widget should occupy.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_embed_a_Widget_into_a_Window_Tab-10.png)

Field definition for Twitter widget

####  How to link a Widget to the current Record

The goal of this section is to create a QueryList widget similar to the existing _Invoice to collect_ widget available for placement in the workspace which shows data for all business partners.

In order to see changes done in the widget is necessary to refresh the entire Workspace not only the tab. This can be done in the Workspace Tab - Manage Workspace - Refresh

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_embed_a_Widget_into_a_Window_Tab-14.png)

Invoice to collect in Workspace

The widget to be create here should instead be shown in the Business Partner window and only show the data for the currently displayed record.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_embed_a_Widget_into_a_Window_Tab-16.png)

Invoice to collect in Business Partner Window

Comparing to the original _Invoices to collect_ widget the following changes need to be done:

  1. Removal of the _Business Partner_ column, as instead the new widget should be filtered by the current business partner.
  2. Removal of the user-editable parameter definition.
  3. Addition of one new named parameter **businessPartnerID** linking to the current record.
  4. Changes to the HQL-Query to adjust it to the last two changes listed here.

The following shows the changed HQL in detail. Examining the HQL for the newly added named parameter it can be seen that the named parameter definition is identical to a 'normal' named parameter like it would be used for a user-editable value.

```
  SELECT
    inv.id AS invoiceId,
    inv.documentNo AS documentNo,
    inv.businessPartner.id AS businessPartnerId,
    inv.businessPartner.name AS businessPartnerName,
    inv.invoiceDate AS invoiceDate,
    inv.grandTotalAmount AS grandTotalAmount,
    inv.currency.iSOCode AS currency,
    inv.paymentTerms.name AS paymentTerms,
    inv.outstandingAmount AS outstandingAmount,
    inv.daysTillDue AS daysTillDue,
    inv.dueAmount AS dueAmount,
    inv.organization.name AS organizationName
  FROM
    Invoice AS inv
  WHERE
    inv.businessPartner.id = :businessPartnerID
  AND inv.processed = true
  AND inv.paymentComplete = false
  AND inv.salesTransaction = true
  AND inv.client.id = :client
  AND inv.organization.id IN (:organizationList)
  AND @optional_filters@
  ORDER BY
    inv.invoiceDate
```

The last and interesting difference in the definition of the new parameter **businessPartnerID** so that it automatically takes the _id_ -value of the currently displayed record.

To achieve this a new parameter entry needs to be created having the following details:

  * _DB Column Name_ = _businessPartnerID_ matching the named parameter in the query.
  * _Fixed_ = not marked.
  * _Default Value_ = ${formValues.id} to refer to the _id_ property of the currently displayed record.

This dynamic parameter definition and the naming rules for the properties are explained in more detail in  this  section of the Widgets documentation.

Copying the _Invoices to collect_ widget definition and doing the adjustments described above will lead to a parameter definition as seen in the following image:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_embed_a_Widget_into_a_Window_Tab-18.png)

Invoices Widget Parameter definition

The placement of this widget definition in the business partner definition works exactly like outlined in the previous section by following its steps of:

  * Definition new reference for the widget.
  * Adding a new column using this reference.
  * Adding a new field using this column + configuring its layout.

This concludes this HowTo which placed the information about collectible invoices the current Business Partner directly into the view of a user looking at the Business Partner tab.

---

This work is a derivative of [How to embed a widget into a window tab](http://wiki.openbravo.com/wiki/How_to_embed_a_Widget_into_a_Window_Tab){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Exclude Database Physical Objects From Model
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Exclude Database Physical Objects From Model
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-exclude-database-physical-objects-from-model
## Article Content: 
### How To Exclude Database Physical Objects From Model

#### Overview

Etendo Classic keeps track of the database physical objects (such as tables, views, functions, sequences or triggers) through an utility called `dbsourcemanager`. This utility is able to export all the database model object definitions to `XML` files, which are stored in the `src-db/database/model` folder (both in Core and in modules).

This tool is designed to work in a multiplatform environment, both supporting Oracle and PostgreSQL. This means that sometimes if specific syntax or features of a particular Database Management System are used, the tool might not support them.

In these cases, a possible approach is to create these specific objects using a Module Script (you can find more about them [here](https://docs.etendo.software/latest/how-to-guides/how-to-create-build-validations-and-module-scripts.md)), and then exclude them from the database physical model of Etendo Classic.

#### Excluding objects in modules

Objects are excluded through a file called `excludeFilter.xml`. This file should be located inside the `src-db/database/model/` folder of the module (if it doesn't exist, you will need to create it), and it follows a very simple XML format. Here is an example:

```xml
    <?xml version="1.0"?>
      <vector>
        <excludedTable name="TEST_TABLE"/>
        <excludedView name="TEST_VIEW"/>
        <excludedFunction name="TEST_FUNCTION"/>
        <excludedTrigger name="TEST_TRIGGER"/>
        <excludedSequence name="TEST\_%"/>
      </vector>
```

This file will exclude the table **TEST_TABLE**, the view **TEST_VIEW**, the function **TEST_FUNCTION**, and the trigger **TEST_TRIGGER** from the model, and therefore they will be neither exported nor removed, nor modified in any way during the normal database management tasks (`update.database` and `export.database`).

The use of [SQL Wildcards](https://www.w3schools.com/sql/sql_wildcards.asp){target="\_blank"} is supported, so the same treatment will be done to all sequences whose name begins with **TEST_**. All exclusions whose name contain the `%` character will be treated as wildcards. When defining an exclusion using a wildcard, remember to escape with a backslash the `_` characters, unless it is meant to be used as a substitute for any single character.

---

This work is a derivative of [How to Exclude Database Physical Objects from Model](https://wiki.openbravo.com/wiki/How_to_exclude_Database_Physical_Objects_From_Model){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Export Sample Data
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Export Sample Data
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-export-sample-data
## Article Content: 
### How to Export Sample Data

#### Overview

The objective of this document is to explain how the Etendo sample data is exported using the `export.sample.data` task.

#### Sample Data Dataset

The tables that will be exported when the `export.sample.data` task is run are included in the Client Definition dataset. You can read more about datasets in [Datasets](https://docs.etendo.software/latest/concepts/Datasets.md).

!!!note 
    The way the `export.sample.data` task currently works, the SQL Where Clause defined in the dataset tables of the Client Definition dataset will be ignored and replaced by a client filter.

#### Exporting the Sample Data

To export the sample data of a given client, this `export.sample.data` gradle task, available from the Etendo root folder must be run. It has the following parameters:

  * Client: The name of the client whose sample data will be exported.
  * Module: The module where the sample.data will be exported. The exported sample data will be stored in the referencedata/sampledata/clientName folder relative to the module path. To export to the core sample data folder, 'org.openbravo' must be specified in the client parameter.
  * ExportFormat (optional): It is used to specify the export format of the sample data. Currently there are two available export formats: xml (the default one) and copy. The copy export format will be only available when exporting the sample data from a PostgreSQL database. Sample data exported with the copy format can only be imported in PostgreSQL databases. If the copy parameter is used in an Oracle environment, a warning message will be shown and the xml format will be used instead.

For instance, to export the sample data of the 'F&B International Group' client to core using the COPY format, the following command must be used:

```bash title="Terminal"
./gradlew export.sample.data -Dclient="F&B International Group" -Dmodule=org.openbravo -DexportFormat=copy
```

For a more detailed info, visit [QA Sample Data Export](https://docs.etendo.software/latest/how-to-guides/QA-sampledata-export.md).

---

This work is a derivative of [How to Export Sample Data](http://wiki.openbravo.com/wiki/How_to_export_sample_data){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Implement a Business Event Handler
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Implement a Business Event Handler
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-implement-a-business-event-handler
## Article Content: 
### How to Implement a Business Event Handler

#### Overview

The  business entity event  allows you to implement business logic which reacts to specific events which are fired when entities are updated, deleted or inserted into the database. 
Business entity events correspond to triggers in the database. 
The main advantage of implementing logic using business entity events instead of in triggers is that you can code your logic in java using your IDE. 
This helps productivity and quality as you can code, debug and test in an integrated environment with the rest of your business logic.

!!! note "Some notes on business entity events:"
    * They are fired when an entity instance is updated, deleted or inserted. Before the actual operation has been done in the database, so you can change or add information which persists together with the event entity. 
    * Your event handling code runs in the same transaction as the business event, changes you make to the database persist together with the business entity event in one transaction. 
    * Business entity events only work when accessing the database through the data access layer, so they do not work for classic windows or direct jdbc calls.
    * You can make use of the full [data access layer](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md) functionality in your event handling code, you can query, create new objects, persist etc.
      
      Warning: Don't call setters on the instance itself, this does not work because when the event has been broadcasted, Hibernate has already read the state of the object. 
      So you must change the value through the special `setCurrentState` method: `event.setCurrentState(greetingTitleProperty, title + ".");`


Business events make use of the event framework provided by the [Weld](https://docs.etendo.software/latest/concepts/Etendo_Architecture.md#Introducing_Weld:_dependency_injection_and_more) framework. To register an event handler, annotations are used. 

!!!note
    In order to maximize performance, certain part of the classpath are excluded, check out [this section](https://docs.etendo.software/latest/concepts/Etendo_Architecture.md#Analyzing_the_classpath) if your event handlers are not found.

In this section, we will implement an event handler on the Greeting entity. Whenever a title is saved, a Spanish translation will be added. In addition, we will print some messages to the console for other business events.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_implement_a_business_event_handler-0.png)

####  Example Module

This section is supported by an example module which shows an example of the code shown and discussed here.

The code of the example module can be downloaded from this repository: [com.etendoerp.client.application.examples](https://github.com/etendosoftware/com.etendoerp.client.application.examples)
  
####  The event handler - A first implementation

An event handler is implemented as a normal java class in your module. The key thing is to create methods with an annotation on the parameters. Here is a first simple example of an event handler which listens to events on the Greeting entity:

    
```java title="GreetingEventHandler.java"
class GreetingEventHandler extends EntityPersistenceEventObserver {
  private static Entity[] entities = { ModelProvider.getInstance().getEntity(Greeting.ENTITY_NAME) };
  private static final Logger logger = LogManager.getLogger();
 
  @Override
  protected Entity[] getObservedEntities() {
    return entities;
  }
 
  public void onUpdate(@Observes EntityUpdateEvent event) {
    if (!isValidEvent(event)) {
      return;
    }
    logger.info("Greeting " + event.getTargetInstance().getId() + " is being updated");
  }
 
  public void onSave(@Observes EntityNewEvent event) {
    if (!isValidEvent(event)) {
      return;
    }
    logger.info("Greeting " + ((Greeting) event.getTargetInstance()).getName()
        + " is being created");
  }
 
  public void onDelete(@Observes EntityDeleteEvent event) {
    if (!isValidEvent(event)) {
      return;
    }
    logger.info("Greeting " + event.getTargetInstance().getId() + " is being deleted");
  }
}
```

!!!note
    * It makes sense to extend the [EntityPersistenceEventObserver](https://github.com/etendosoftware/etendo_core/blob/main/modules_core/org.openbravo.client.kernel/src/org/openbravo/client/kernel/event/EntityPersistenceEventObserver.java){target="\_blank"}, it helps to filter for the correct events. 
    * The name of the method is not relevant, the relevant thing is the annotation on the parameter and the parameter. Weld uses this to detect and register for which events this class listens to 
    * The event handler will be called for events occurring on all entities, therefore each method starts with the if statement with isValidEvent, to filter out unwanted events. 
    * The use of the `_org.apache.logging.log4j.Logger_` class is recommended for logging as shown above 

!!!info
    Classes extending `_EntityPersistenceEventObserver_` are defined as `_@ApplicationScoped_` by default.

#####  Result

When you add the above class to your module, restart the system, then go to the greeting window:
[http://localhost:8080/etendo/?tabId=282](http://localhost:8080/etendo/?tabId=282)

And do some actions you should see the following messages in the console:

```bash
Greeting FF8081813097E041013097E805F4000F is being updated
Greeting FF8081813097E041013097E805F4000F is being deleted
Greeting Mr is being created
```

#####  Event methods

The source code above illustrates how the event methods are implemented:
     
```java    
public void onUpdate(@Observes EntityUpdateEvent event) {
  if (!isValidEvent(event)) {
    return;
  }
  logger.info("Greeting " + event.getTargetInstance().getId() + " is being updated");
}
 
public void onSave(@Observes EntityNewEvent event) {
  if (!isValidEvent(event)) {
    return;
  }
  logger.info("Greeting " + ((Greeting) event.getTargetInstance()).getName()
      + " is being created");
}
 
public void onDelete(@Observes EntityDeleteEvent event) {
  if (!isValidEvent(event)) {
    return;
  }
  logger.info("Greeting " + event.getTargetInstance().getId() + " is being deleted");
}
```

!!!note 
    * You only need to implement a method for the event you want to listen to, so if you only need to listen to update events, then only implement a method with the @Observes EntityUpdateEvent parameter. 
    * Each method starts with a check if the event is valid, this is needed to filter for relevant events only, see the section below. 
    * Within the event handler methods, you can use the api on the event object to detect which is the entity event and to get access to the current and previous state of the entity. See [here](https://docs.etendo.software/latest/concepts/Etendo_Architecture.md#Event_Classes_and_API) for more information. 

#####  Filtering Only Relevant Events

As mentioned above, the event methods get called for all entities of all types. 
In our example, we only want to handle events on the Greeting entity.
There is specific code in the example above which takes care of this. 
It starts in the top of the class:

```java
private static Entity[] entities = { ModelProvider.getInstance().getEntity(Greeting.ENTITY_NAME) };
 
@Override
protected Entity[] getObservedEntities() {
  return entities;
}
```

The `getObservedEntities` method is called when you call the `isValidEvent` method, `getObservedEntities` returns the entities you want to handle in this event handler. 
To make use of it add this code to each event handling method in the beginning:

```java
if (!isValidEvent(event)) {
  return;
}
```

This part is needed because the event methods will be called for entities of all types. 
In this example we only want to listen to changes on the Greeting entity.

####  Adding some business logic

In this next step, we add logic to the event handler:

  * Whenever a greeting gets created/updated, add a . to the title, if it was not already there 
  * When a new greeting gets created, add a translation for it. 

!!!note
    To create a new translation for when a new greeting is added. 
    For this example, we will be adding a dutch translation.
    

#####  Changing the entity on update/insert

In this step we will be adding some simple logic to the update and save event to add a dot to the title if it not already has one.

```java
public void onUpdate(@Observes EntityUpdateEvent event) {
  if (!isValidEvent(event)) {
    return;
  }
  final Greeting greeting = (Greeting) event.getTargetInstance();
  final String title = greeting.getTitle();
  if (title != null && !title.endsWith(".")) {
    final Entity greetingEntity = ModelProvider.getInstance().getEntity(Greeting.ENTITY_NAME);
    final Property greetingTitleProperty = greetingEntity.getProperty(Greeting.PROPERTY_TITLE);
    // note use setCurrentState and not setters on the Greeting object directly
    event.setCurrentState(greetingTitleProperty, title + ".");
  }
  logger.info("Greeting " + event.getTargetInstance().getId() + " is being updated");
}
 
public void onSave(@Observes EntityNewEvent event) {
  if (!isValidEvent(event)) {
    return;
  }
  final Greeting greeting = (Greeting) event.getTargetInstance();
  // now also add the dot to the title
  final String title = greeting.getTitle();
  if (title != null && !title.endsWith(".")) {
    final Entity greetingEntity = ModelProvider.getInstance().getEntity(Greeting.ENTITY_NAME);
    final Property greetingTitleProperty = greetingEntity.getProperty(Greeting.PROPERTY_TITLE);
    // note use setCurrentState and not setters on the Greeting object directly
    event.setCurrentState(greetingTitleProperty, title + ".");
  }
 
  logger.info("Greeting " + ((Greeting) event.getTargetInstance()).getName()
      + " is being created");
}
```

Let's walk through the code. First, cast the instance and get the title:

    
```java
final Entity greetingEntity = ModelProvider.getInstance().getEntity(Greeting.ENTITY_NAME);
final String title = greeting.getTitle();
```

If the title does not end on a dot then get the entity and the relevant property:

```java
if (title != null && !title.endsWith(".")) {
  final Entity greetingEntity = ModelProvider.getInstance().getEntity(Greeting.ENTITY_NAME);
  final Property greetingTitleProperty = greetingEntity.getProperty(Greeting.PROPERTY_TITLE);
```

!!!note
    We use the generated constants to the entity name and property
    names, this gives compile time checking and is a recommended practice.

And then set the current state.

!!!note
    Don't call setters on the Greeting instance itself, this does not work because when the event has been broadcasted, Hibernate has already read the state of the object. So you must change the value through the special `setCurrentState` method:

```java
event.setCurrentState(greetingTitleProperty, title + ".");
```

The changed entity instance does not need to be saved explicitly, this is done by the [data access layer](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md) and hibernate automatically.

Then test the changes, go to the window ([http://localhost:8080/etendo/?tabId=282](http://localhost:8080/etendo/?tabId=282)), enter a new greeting without a dot in the title. 
When saving you will see a dot getting added. 
Try updating the record, you will have the same behavior.

#####  Adding a child instance

As the next step we will be adding logic to the `onSave` method to create an extra child instance (a new translation). 
This is a bit more complex. Add the following code to the onSave method at the end:

```java
final GreetingTrl greetingTrl = OBProvider.getInstance().get(GreetingTrl.class);
// set relevant translation properties
greetingTrl.setGreeting(greeting);
// 171 is dutch, choose any other language..
greetingTrl.setLanguage(OBDal.getInstance().get(Language.class, "171"));
// note we can call getters on the targetInstance, but not setters!
greetingTrl.setName(greeting.getName());
greetingTrl.setTitle(greeting.getTitle());
greetingTrl.setTranslation(false);
 
// and add the greetingTrl to the greeting
// we don't use event.setCurrentState as we get the list and add to it
// get the trl property for the greeting entity
final Property greetingTrlProperty = greetingEntity
    .getProperty(Greeting.PROPERTY_GREETINGTRLLIST);
@SuppressWarnings("unchecked")
final List<Object> greetingTrls = (List<Object>) event.getCurrentState(greetingTrlProperty);
greetingTrls.add(greetingTrl);
 
// don't need to save the greetingTrl, it is saved as the child of the greeting
// OBDal.getInstance().save(greetingTrl);
```


Let's walk through the code. First the trl object is created and some properties are set. 
Note as the object is not part of the event you can call its setters directly. 
The language is arbitrarily chosen. 
See the  [DAL](https://docs.etendo.software/latest/concepts/Data_Access_Layer.md) document for information on the api's you can use to retrieve objects from the database.

```java
final GreetingTrl greetingTrl = OBProvider.getInstance().get(GreetingTrl.class);
// set relevant translation properties
greetingTrl.setGreeting(greeting);
// 171 is dutch, choose any other language..
greetingTrl.setLanguage(OBDal.getInstance().get(Language.class, "171"));
// note we can call getters on the targetInstance, but not setters!
greetingTrl.setName(greeting.getName());
greetingTrl.setTitle(greeting.getTitle());
greetingTrl.setTranslation(false);
```

Then, as a next step, add the new trl object to the event entity. This is a bit
special as we need to update a List property of the event entity. So instead
of calling `setCurrentState` we get the list and add to it. This is a correct way of doing this:

```java
// and add the greetingTrl to the greeting
// we don't use event.setCurrentState as we get the list and add to it
// get the trl property for the greeting entity
final Property greetingTrlProperty = greetingEntity
    .getProperty(Greeting.PROPERTY_GREETINGTRLLIST);
@SuppressWarnings("unchecked")
final List<Object> greetingTrls = (List<Object>) event.getCurrentState(greetingTrlProperty);
greetingTrls.add(greetingTrl);
 
// don't need to save the greetingTrl, it is saved as the child of the greeting
// OBDal.getInstance().save(greetingTrl);
```

The trl object is a child of the Greeting event entity and will persist together with it, so it is not necessary to explicitly save it.
When you now enter a new entry in the window, you will see an additional translation child record being created.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_implement_a_business_event_handler-3.png)

#####  Interrupt the Save Action

Sometimes you need to interrupt the save action because the user is doing something wrong, this can be done throwing an exception

```java
public void onUpdate(@Observes
EntityUpdateEvent event) {
  if (!isValidEvent(event)) {
    return;
  }
  final OBSA_Orderline_Assign olineAssign = (OBSA_Orderline_Assign) event.getTargetInstance();
  if (olineAssign.getProductWithStorage().getProduct() != olineAssign.getSalesOrderLine()
      .getProduct()) {
    String language = OBContext.getOBContext().getLanguage().getLanguage();
    ConnectionProvider conn = new DalConnectionProvider(false);
    throw new OBException(Utility.messageBD(conn, "OBSA_ErrorProduct", language));
  }
}
```

####  Examples of Business Entity Event Handlers

Etendo Classic uses business entity event handlers to implement business logic in
various locations, here are some examples:

  * [ModuleHandler](https://github.com/etendosoftware/etendo_core/blob/main/modules_core/org.openbravo.client.application/src/org/openbravo/client/application/event/ModuleHandler.java){target="\_blank"}
  * [SetDocumentNoHandler](https://github.com/etendosoftware/etendo_core/blob/main/modules_core/org.openbravo.client.application/src/org/openbravo/client/application/event/SetDocumentNoHandler.java){target="\_blank"}

The complete source code of the example event handler is available here [com.etendoerp.client.application.examples](https://github.com/etendosoftware/com.etendoerp.client.application.examples)

---

This work is a derivative of [How to implement a business event handler](https://wiki.openbravo.com/wiki/How_to_implement_a_business_event_handler){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Publish Modules to a GitHub Repository
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Publish Modules to a GitHub Repository
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-publish-modules-to-github-repository
## Article Content: 
#### Overview

This article explains how to publish a module to GitHub Repositories.

Now, modules will be published in ZIP and JAR format.

A published module can be declared as a Gradle dependency, which makes installing or updating modules easier.

Using dependencies alongside with Gradle in an Etendo environment can remove the need to transfer the modules from a local machine to the server using FTP, SSH etc. The module is hosted as a package in the repository and  Gradle is in charge of downloading the correct version, and its dependencies.

Partners will have access to Etendo’s public and commercial repositories to download standard modules, in addition to this, it is possible to use their own repositories where they can privately store their modules for internal or commercial usage.

!!! info "Requirements"
    - GitHub user and token, with access to read and write packages.
    - A module to be distributed.

!!! success
    It is recommended to use [GitFlow](https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow){target="_blank"} to manage work flow, versions and tags.

#### Deployment

!!! info
    The module version, group and artifact that will deploy are those declared in the file `src-db/database/sourcedata/AD_MODULE.xml` file


###### 1.  Create build.gradle file:

To generate the `build.gradle` with all the necessary information to publish, execute the following task:

``` bash title="Terminal"
./gradlew createModuleBuild -Ppkg=<javapackage> -Prepo=<repositoryURL> --info
```
Example:
``` bash title="Terminal"
./gradlew createModuleBuild -Ppkg=com.myrepo.test -Prepo=https://maven.pkg.github.com/myrepo/com.myrepo.test --info
```

!!! warning "Important"
        - If the module depends on other modules or libraries, they need to be specified in the build.gradle file using the implementation configuration.
        Before adding an Etendo module dependency, they have to be published in the repository.
        - You need to make sure those dependencies are also published.
        - Add the dependencies manually in `build.gradle` file.
        - Add Core dependency to define the range of versions the module is compatible with.

!!! info
     To make use of the dependencies resolution approach, you should declare in the modules dependencies which version of the core your module depends on.
    If the Etendo Core dependency is omitted, the module can be installed on any version of Etendo, even if there are inconsistencies in the compilation.



Modules Dependencies example:

```groovy title="build.gradle"
/**
*   This file was generated automatically by the 'createModuleBuild' task.
*   Created at: 2022-12-16T15:41:21.426339Z.
*
*   WARNING: Do not put your credentials directly in this file.
*
*/

group          = "com.etendoerp"
version        = "1.0.0"
description    = "Test module to publish"
ext.artifact   = "test"
ext.repository = "https://maven.pkg.github.com/myrepo/com.myrepo.test"

configurations {
    moduleDependencyContainer
}

publishing {
    publications {
        "com.myrepo.test"(MavenPublication) {
            from components.java
            groupId    = group
            artifactId = artifact
            version    = version
        }
    }
    repositories {
        maven {
            url "https://maven.pkg.github.com/myrepo/com.myrepo.test"
        }
    }
}

repositories {
    mavenCentral()
    maven {
        url "https://maven.pkg.github.com/myrepo/com.myrepo.test"
    }
}

/**
* Declare Java dependencies using 'implementation'
* Ex: implementation "com.sun.mail:javax.mail:1.6.2"
*/
dependencies {
		implementation(com.myrepo:dependency.test:1.0.0)
    
   	implementation('com.etendoerp.platform:etendo-core:[22.1.0, x.y.z)')
}

```

###### 2.  In case of adding dependencies of a new repository, declare it in `build.gradle`

```groovy title="build.gradle"
repositories {
    mavenCentral()
    maven {
        url "https://maven.pkg.github.com/myrepo/com.myrepo.test"
    }
     maven {
        url "https://maven.pkg.github.com/myrepo2/com.myrepo2.test"
    }
}
```



###### 3. If your module makes use of dependency injection, you need to specify the location of the **'beans.xml'** file

Add to the build.gradle the location of the beans.xml
``` groovy
sourceSets {
    main {
        resources {
            srcDirs("etendo-resources")
        }
    }
}
```

Create the following structure in the root of your module
```
com.test.yourmodule
	|--- etendo-resources
  			| --- META-INF
        			| --- beans.xml
```

Add to the **beans.xml**

``` xml
<beans xmlns="http://xmlns.jcp.org/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/beans_2_0.xsd" bean-discovery-mode="all" version="2.0">
</beans>
```

###### 4.  Deploy the new module, running the commands :
!!! info
    Before publishing a module, it will be compiled and packaged to a JAR format.

``` bash title="Terminal"
./gradlew update.database smartbuild
```
``` bash title="Terminal"
./gradlew publishVersion -Ppkg=<javapackage>
```


!!! success
    Once Gradle finishes the deployment, your module is ready to be used as a dependency.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Run an Initial Client Setup Process
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Run an Initial Client Setup Process
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-run-an-initial-client-setup-process
## Article Content: 
###  How to Run an Initial Client Setup Process

#### Overview

<iframe width="560" height="315" src="https://www.youtube.com/embed/yGzPXU3nxpk?si=akTrp1_j8RAafSWx" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

The Initial Client Setup process is a crucial process in Etendo which allows defining information about the client and the accounting schema the organization will use. The information configured through this window sets the bases for the organizational structure and the chart of accounts to be used with every organization of the client. 

!!!info
    It can be run by logging in Etendo as *System Administrator* role.

This process allows to:

- Enter the name of the client, the client username and a password.
- Enter the base currency of the client, that is going to be the currency of the Client regardless of if an Organization which belongs to it might have a different currency.
- Include Accounting for the client.

#### Including accounting Schema

Decide on the *accounting schema* the organization will use and set the accounting using the Initial Client Set up window.

##### Include accounting

To include this data, there is a checkbox named *Include Accounting* which obligates the user to enter a specific chart of accounts. For this, there are two options:

1. Uploading a `CSV` file with the chart of accounts, as explained in the [Accounting File](#accounting-file) section below.
2. If you have a localization bundle installed, selecting one of the chart of accounts listed in the Reference data section since these datasets are already installed.

!!!info
    It is recommended to have the Include Accounting option checked if the user needs to apply the same chart of accounts to all of its organizations.
    In case of entering a different chart of accounts for each specific organization, you should run this process without checking the checkbox and then configure the Chart of Accounts in the [Initial Organization Setup](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/enterprise-model.md#initial-organization-setup) window.

!!!note
    In the Reference Data section, the existing datasets will depend on the localization installed, if any. 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_run_an_initial_client_setup_process-1.png)

If the checkbox *Include Accounting* is selected and an accounting file or reference data is selected, Etendo creates:

  - a [Fiscal Calendar](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#fiscal-calendar) which can be shared by all the *Legal with Accounting* organizations types which belongs to that Client and 
  - an [Account Tree](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#account-tree) or *Chart of Accounts* and a [General Ledger configuration](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#glconfig) which is shared by all the organizations created within the Client.

The *General Ledger Configuration* and the *Chart of Accounts* created by default can be later on customized. 

!!!info
    For more information, read [General Setup](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/getting-started.md). 


The *General Ledger Configuration* is linked to the *Account Tree* as the *Account* is a mandatory [dimension](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#dimension) of the general ledger configuration.

##### Accounting file 

Etendo also allows choosing the accounting `CSV` file with the corresponding chart of accounts ([Account Tree](https://docs.etendo.software/latest/user-guide/etendo-classic//basic-features/financial-management/accounting/setup.md#account-tree)) to upload into the system from the field *Accounting File*. 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_run_an_initial_client_setup_process-2.png)

!!!info
    For more information, read [How to Create Accounts Files](how-to-create-accounts-files.md) 

#### Module configuration

Etendo distributes accounting `CSV` files as modules which can be applied as reference data. These kinds of modules are part of the Etendo localization for a given country.

!!!info
    The list of available localization bundles is found in the [Etendo marketplace](https://marketplace.etendo.cloud/#/){target="\_blank"}.

There are some additional modules that may be important for the initial client setup.

The key modules include:

- Standard document types for orders, invoices, etc, this one is selected by default as it is necessary for creating transactional data such as orders and invoices.

- Reference data such as master data or configuration data (i.e. tax setup) created for Etendo extension modules.

These modules are useful as tax configurations generally apply to all organizations in a country, and setting standard document types helps avoid inconsistent numbering issues across different organizations.

!!!note
    It is recommended to install necessary modules for the proper operation of the client, based on their specific requirements.


!!!info
    Datasets Installation: additional modules can be added from the [Enterprise Module Management](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/enterprise-model.md#enterprise-module-management) window within the system.


Every new [Client](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/client.md) created in Etendo centrally maintains at least the mandatory accounting dimensions listed below:

- Organization
- Business Partner
- and Product

unless the *Central Maintenance* checkbox is unselected for the Client which would imply the configuration and management of all the accounting dimensions (mandatory and not mandatory) at organization level.

To conclude, it is important to carefully conduct the initial setup in Etendo, considering the organization's needs and specific requirements. Additionally, thorough documentation of the accounting structure and module configurations is essential for future reference and efficient system management.

!!!info
    Visit [General Setup](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/general-setup/getting-started.md) to continue with Etendo's initial setup.

---

This work is a derivative of [Initial Client Setup](https://wiki.openbravo.com/wiki/Initial_Client_Setup){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Use Advanced Sequences
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Use Advanced Sequences
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-use-advanced-sequences
## Article Content: 
### Sequences

#### Overview

This document covers how to use the implementation of sequences, explain all the features, and give some implementation example cases.

There are two base reference implementations defined that you can use or extend:

- Transactional Sequences: These sequences lock the table in the database to guarantee  the generation of identifiers sequentially and avoid duplicates or gaps.
- Non-Transactional Sequences: In this case, the process to create sequences uses Database Sequences and should be used in cases where the gaps between numbers is not an issue.

!!! warning "Important"
	Please be aware that both Transactional and Non-Transactional Sequences, as configured in our system, are not supported within Database Stored Procedures (PLs). This includes specific processes like POSOrder, which cannot utilize these sequences. Implementing these sequences in PLs, such as within the POSOrder process, may result in system malfunctions or errors. These sequences are tailored for the application layer and may not align with the procedural context of direct database operations.


#### Quick Sequence Setup

1. First, log-in as “System administrator”. Open the `Application` > `Application Dictionary ` >`Tables and Columns` Select the Column that you want to set as a sequence and change the Reference field to Transactional Sequence or non-Transactional sequence.
	
	!!! info
		If you want to define a new sequence reference, you must add it in **Reference Search Key** field and the parent (Base Sequence) must be in the **Reference** field.
		See how to create a new reference in [new sequence reference](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-use-advanced-sequences.md#new-sequence-reference).
	
	<figure markdown>
  ![Image title](https://docs.etendo.software/latest/assets/legacy/technicaldocumentation/platform/quicksequence.png){ width="700" }
  <figcaption>Adding transactional sequence in the invoice table</figcaption>
	</figure>


2. Then, it is necessary to run a process in `Application` > `General Setup`\> `Application`\> `Create Sequences` to generate the sequences, selecting the root Organization where they will be created.

	!!! warning
		To run this process, the user must be logged using the role which manages the sequence, not as system administrator.


	!!! warning
		This process will only generate the combinations for organization and document types, in case you want to generate sequences for the new dimensions described below, you must extend the `SequencesGenerator` action and overwrite the `generateSequenceCombination` and `setSequenceValues` methods in order to generate the relevant combinations and set the newly added dimensions.
		You can also create the required sequences manually.

	<figure markdown>
  ![Image title](https://docs.etendo.software/latest/assets/legacy/technicaldocumentation/platform/createsequencesprocess.png){ width="700" }
  <figcaption>Executing the process to create new sequences</figcaption>
	</figure>


	---

	After that, in the `Document Sequence` window you can see the sequences generated.

	<figure markdown>
  ![Image title](https://docs.etendo.software/latest/assets/legacy/technicaldocumentation/platform/sequenceslist.png){ width="700" }
  <figcaption>List of sequences generated by the process</figcaption>
	</figure>

	When you edit the record, you can see:

	<figure markdown>
  ![Image title](https://docs.etendo.software/latest/assets/legacy/technicaldocumentation/platform/formviewad_sequence.png){ width="700" }
  <figcaption>Sequence form view</figcaption>
	</figure>

	- **Organization:** Owner organization associated to the sequence.
	- **Name:** An identifier using the Table and Column associated to the sequence.
	- **Description:** Field to add information or details about the sequence.
	- **Auto Numbering:**  Check to define the increment and initial numbering.
	- **Increment By:** Numeric Value to define the sequence increment.
	- **Next Assigned Number:** Initial sequence number.
	- **Prefix:** String at the beginning of the sequence  **(**Supports masking**).**
	- **Suffix:** String at the end of the sequence  **(**Supports masking**).**
	- **Document Type :** In case that the table has document types, a sequence for each document type will have been created.
	- **Mask:** It is a string defining a parse format, with the possibility to define a dynamic date or literal substring, in addition to the formatted incremental number. 

	!!! info
		For more information about masking see [Sequences Masking user guide](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/setup.md#sequence-masking).

	- **Table:** Defines the table in which the sequence type column is located.
	- **Column:** The column where the sequence is defined.

3. In case the sequence is applied in DocumentNo field, the user has to ensure that the Document Type associated has the property `sequenced document` unchequed to avoid throwing the legacy process. To do that, first log in as a user, then open `Aplication>Finantial Management>Accounting>Setup>Document Type`, select the Document Type associated and finally, edit it.

	!!! warning
		_If the step is not followed, the legacy process will be run._

	<figure markdown>
  ![Image title](https://docs.etendo.software/latest/assets/legacy/technicaldocumentation/platform/doctypesettings.png){ width="700" }
  <figcaption>Document Type example</figcaption>
	</figure>


4. Finally, you must compile the application. To do this, run:

	```bash title="Terminal"
	./gradlew compile.complete smartbuild
	```

5. To export the changes to your module, do not forget to do a:

	```bash title="Terminal"
 	./gradlew export.database
	```

##### **New sequence reference**

If you want to define a new reference with transactional or non-transactional parent reference, you must create a new record in the Reference window (`Application` > `Application Dictionary ` >`Reference`) and set:

<figure markdown>
  ![Image title](https://docs.etendo.software/latest/assets/legacy/technicaldocumentation/platform/new_sequence_reference.png){ width="700" }
  <figcaption>New sequence reference example</figcaption>
</figure>


- **Name:** New reference identifier.
- **Description:** Field to add information or details about the reference.
- **Parent Reference:** Select transactional or non-transactional sequence.

&nbsp;
&nbsp;

###### Sequence Config tab: 

![sequence_config.png](https://docs.etendo.software/latest/assets/legacy/technicaldocumentation/platform/sequence_config.png)

- **Generator Java Class:** Class that generate the next sequence value using the document sequence definitions. (If it is empty, a default generator is used ).

When creating a non-transactional sequence, you must define:

- **DB Sequence Name:** Name of the sequence defined in Data Base.
- **DB Sequence Initial Value**: Initial sequence number.
- **DB Sequence Increment Value:** Numeric Value to define the sequence increment.

You can use a defined Sequence or create a new one using SQL:

```sql
CREATE SEQUENCE [ IF NOT EXISTS ] sequence_name
    [ AS { SMALLINT | INT | BIGINT } ]
    [ INCREMENT [ BY ] increment ]
    [ MINVALUE minvalue | NO MINVALUE ]
    [ MAXVALUE maxvalue | NO MAXVALUE ]
    [ START [ WITH ] start ]
    [ CACHE cache ]
    [ [ NO ] CYCLE ]
    [ OWNED BY { table_name.column_name | NONE } ]
```

| _Postgres syntax to create a new sequence_ |

!!! info
    In case the parent is Transactional Sequence only the Generator Java Class field will appear, but in case of the parent being a Non-Transactional Sequence you must define all the fiels.

&nbsp;

##### Dimension List

A Dimension is a new filter clause used to select the sequence to be used when creating or saving a new record. The default dimensions are:

- Client
- Organization
- Document Type

This way you can have two different sequences depending on, for example, the Organization of the record. The same applies to the other default dimensions.

!!! info
    Dimensions are currently supported only in **Transactional Sequences**.

![dimension_graph1.png](https://docs.etendo.software/latest/assets/legacy/technicaldocumentation/platform/dimension_graph1.png)

&nbsp;

###### Adding custom dimensions

If you want to add a new dimension to filter sequences, this dimension should be a column in both tables `AD_Sequence` and the table where the transactional sequence is used. You must also create a new reference, and create a new record in the `Dimension List` tab with this column (see how to create a new sequence reference above).


###### When a dimension is a foreign key column

1. To define a new dimension, you have to start adding a column in the `AD_Sequence` table, and a Foreign Key to the referenced column in an specific table. The dimension column must be created in the corresponding table (`M_Product` in this example) unless you decide to use an existing column as dimension.

	!!! warning
		The name of the columns must be the same in both tables.

	```sql
	ALTER TABLE AD_Sequence ADD COLUMN <dimension>_id varchar(32),
	ADD CONSTRAINT ad_sequence_<dimension> FOREIGN KEY (<dimension>_id) REFERENCES <table> (<dimension>_id)

	ALTER TABLE M_Product ADD COLUMN <dimension>_id varchar(32),
	ADD CONSTRAINT M_product_<dimension> FOREIGN KEY (<dimension>_id) REFERENCES <table> (<dimension>_id)
	```
	!!!note
		Remember to replace `<dimension>` with your desired name.

2. Then you have to create the corresponding `AD_Column` register in the Application Dictionary. `Application` > `Application Dictionary ` > `Tables and Columns` search the `AD_Sequence` Table and create the new column.
   Then you must set the `Reference` field of the dimension pointing to the foreign key table.

	!!! warning
		If the table with the dimension records is a new table, it should be created in `Application` > `Application Dictionary ` >`Reference`, setting the Base Reference as Table, and adding the table in the `Table Reference` tab.

3.  Also, you have to create the field in the `Document Sequence` window. `Application` > `Application Dictionary ` >`Windows, Tabs and Fields` search `Document Sequence` window and in `Sequence` tab run the process to create the new field.

4.  If the dimension is a new column, you must to repeat the previous step to create the field in the table where the sequence is used.

5.  Finally, go back to your Reference created previously and create a new register in the `Dimension List` tab, selecting the new column you just created, then execute a:

```bash title="Terminal"
  ./gradlew smartbuild
```


###### When a dimension is a List

1. First, you have to create a new column in AD_Sequence table to reference a list and do the same in the table which uses the sequence. The other option is to use an existing one.

	!!! warning
		The name of the columns must be the same in both tables.

	```sql
	ALTER TABLE public.ad_sequence
	ADD COLUMN <list_name> character varying(60);

	ALTER TABLE public.m_product
	ADD COLUMN <list_name> character varying(60);

	```
	
	!!! note
		Remember to replace `<list_name>` with your desired name.	

2. Then, you have to create the column in the `Application` > `Application Dictionary ` >`Tables and Columns` search `AD_Sequence` Table and create the new column.
   You must set the `Reference` field of the new Column to `List` and indicate the corresponding Reference Search Key (Or define a new one). In the Default field you can set the id of one of the list elements and when a new Sequence is created, the reference automatically will be set.
   You also have to do the same in the table that uses the sequence, or you can use an existing one.

3. Finally, go back to your Reference previously created and create a new register in the `Dimension List` tab by selecting the new column you have just created then, execute a:

```bash title="Terminal"
  ./gradlew smartbuild.
```


###### Change sequence when change dimension

- If you want the sequence to change automatically when you change the dimension or the configured list, you must implement a callback or extend it if it already exists.
  The following example explains how to implement the callout, taking into account that the dimension used is the Product Category and that the order is automatically entered in the Search Key field.

```java
public class ChangeSequenceAfterChangeProductCategory extends SimpleCallout {
  @Override
  protected void execute(SimpleCallout.CalloutInfo info) throws ServletException {
    final String strcProductId = info.vars.getStringParameter("inpmProductId");

    if (StringUtils.isBlank(strcProductId)) {
      try {
        OBContext.setAdminMode();
        Tab tab = OBDal.getInstance().get(Tab.class,info.getTabId());
        Field field = tab.getADFieldList()
        .stream()
        .filter(f -> ("inp" + Sqlc.TransformaNombreColumna(f.getColumn().getDBColumnName())).equals("inpvalue"))
        .findFirst()
        .orElse(null);
        String sequenceNumber = Utilities.getDocumentNo(field);
        info.addResult("inpvalue", "<" + sequenceNumber + ">");
      } finally {
        OBContext.restorePreviousMode();
      }
    }
  }
}
```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Use Property Fields
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Use Property Fields
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-use-property-fields
## Article Content: 
###  How to Use Property Fields

####  Overview

A **property field** allows you to show derived information in a grid/form. A property field is very similar to a normal field in a tab. The only difference is that instead of the column, a property (path) is defined.

Property fields make it possible to:

  * show related information in a grid/form 
  * filter and sort by this related information 
  * show parent information in a child tab and filter/sort by this parent information 
  * create Etendo windows which show a child table in the root of the window, making it for example possible to create a single grid showing all sales invoice lines accross multiple sales invoice and filter using parent as well as child information. 

####  Example Module

This section is supported by an example module which shows example of the code shown and discussed in this section.

The code of the example module can be downloaded from this repository: [com.etendoerp.client.application.examples](https://github.com/etendosoftware/com.etendoerp.client.application.examples)

####  Defining property fields

Property fields are defined in the same way as a normal field in an Etendo tab. The only difference is that instead of selecting a column a property is set.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_use_property_fields-1.png)
  
The property can consist of multiple steps separated by a dot, the system will help you to set the correct property value. If you make a typo then the system will report an error.

Property fields are not editable in the user interface, they are however automatically updated when inserting or updating a record in the system.

!!!note
      Property fields are meant to show derived information. They should not be used to show the contents of a column stored in the table associated with the tab where the property field is being defined.  

  
#####  Using in validation rules

Property fields can be used in  Validations. In this case the validation code referencing the property field should look like `@_propertyField_ _fieldName_ _columnname_@` where `fieldname` is the name of the field property (lower case and removing blank spaces) and `columnname` is the name of the referenced column.

As field properties are only computed when the record is saved, but they are not reevaluated on field changes, only in case they refer a path coming from the record header should be used in validations. Example in Order Line you could use any property field taking the data from its order header.

####  Using in display logic

You can set a display logic that references a property field. The way of setting the display logic which references a property field is the following one: `@inp_propertyField_NameOfThePropertyField_ColumnName@`. For example:

  * Imagine that you have a property field called Document with column name **DocumentStatus**. 
  * You have another field *Field A* which you want to display only when the property field **Document** has the status **DR**. 
  * In the display logic of the *Field A* field, you should write: `@inp_propertyField_Document_DocumentStatus@ = 'DR'`

####  Use case: show related information

The first usage of a property field is to show related information in the user interface. The example in the previous section showed how to define a new business partner category field in the sales invoice header window/tab. This is visualized as follows in the user interface:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_use_property_fields-2.png)

And you can sort and filter on the related/derived field:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_use_property_fields-3.png)

And also display it in the form:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_use_property_fields-4.png)

!!!note
      Note that direct linking also works for derived fields, so in this example you can 'jump' directly to the business partner category window for the business partner category.

####  Use case: show child table in top of the window

A great usage of the property field concept is to show child records (for example: sales invoice lines) in the root of a window. This then makes it possible to filter and sort the child records accross multiple parents (for example: sales invoice headers).

The screenshot below shows an example of a sales invoice line window which shows all sales invoice lines accross multiple sales invoice headers. It makes it really easy to filter and sort accross all sales invoice lines in the system.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_use_property_fields-5.png)
  
Some things to note when creating these type of windows:

  * The main restriction for these types of grids is that insertion of records is not possible, editing and deletion are however no problem. So, for these types of windows/tabs set the UI pattern to **Edit Only**. 
  * For editing it is possible that certain fields need parent or other context information. This context information needs to be added as fields to the tab. If you do not want these context info fields to show up in the grid or form set the following properties to no (unchecked): displayed and show in grid view. 
  See the screenshot below which shows how the organization is added to the tab as a field, so that combos show the correct information when editing the sales invoice lines:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/How_to_use_property_fields-6.png)

---

This work is a derivative of [How to add a canvas field to a form or grid](http://wiki.openbravo.com/wiki/How_to_use_property_fields){target="\_blank"} by [Openbravo Wiki](http://wiki.openbravo.com/wiki/Welcome_to_Openbravo){target="\_blank"}, used under [CC BY-SA 2.5 ES](https://creativecommons.org/licenses/by-sa/2.5/es/){target="\_blank"}. This work is licensed under [CC BY-SA 2.5](https://creativecommons.org/licenses/by-sa/2.5/){target="\_blank"} by [Etendo](https://etendo.software){target="\_blank"}.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Use Secure Web Services
## Article Path: /Developer Guide/Etendo Classic/How to Guides/How to Use Secure Web Services
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-use-secure-webservices
## Article Content: 
### How to Use Secure Web Services

#### Overview

This module allows calling any standard Etendo web service in the same way as calling the `/ws` endpoint, but using token authentication.

This authentication method also allows defining the context for the calls by choosing the role and/or organization when requesting a token. It is also possible to renew a token to refresh the expiration date or change the role/organization.

Besides the authentication implementation, the module includes utilities for developers and useful web services, such as jsonDal (to access the OB Data Access Layer with json).

#### Setup 

!!! Info 
    By default, the ES256 encryption algorithm is used, it is possible to change it by setting a new preference with the `Encryption Algorithm` property and set its value to `HS256`.

##### Initial configuration
:material-menu: `Application` > `General Setup` > `Client` > `Client`
It is necessary to configure the encryption key and the expiration time for the authentication tokens in the Client window with the System Administrator role.

If the expiration time is equal to "0" the tokens do not expire.

Generate a random key with the "Generate key" button.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-use-secure-web-services/SWS.png)


#### Secure Web Services Swagger

!!! info
    For more information, visit [Secure Web Services Swagger](https://demo.etendo.cloud/etendo/web/com.smf.securewebservices/doc/#/Login/post_sws_login){target="_blank"}.



==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo Gradle Plugin
## Article Path: /Developer Guide/Etendo Classic/Developer Tools/Etendo Gradle Plugin
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/developer-tools/etendo-gradle-plugin
## Article Content: 
#### Overview

This article explains how to use Gradle, an open-source build automation tool that is designed to be flexible enough to build almost any type of software. 

!!! note
    For additional information read: [What is gradle?](https://docs.gradle.org/7.3/userguide/what_is_gradle.html){target="_blank"}.


Etendo uses Gradle to define and improve compilation, version management, modules publication, migrations and more tasks.


#### How to use Gradle

Etendo project includes an embedded wrapper from Gradle called `gradlew`. Run the following  command in the Etendo project directory, and it will execute the mentioned task.

```bash title="Terminal"
 ./gradlew <task>
```
 

You can use `-P<Parameter Name>` to pass parameters in a task. For example:

```bash title="Terminal"
./gradlew publishVersion -Ppkg=test.package
```

#### Common Gradle flags

| Flag                   | Description                                          |
| ---------------------- | ---------------------------------------------------- |
| --offline              | To execute Gradle without internet connection.       |
| --stop                 | To stop all Gradle daemons.                          |
| --no-daemon            | To execute a Gradle task without launching a daemon. |
| --info                 | To give more information in the task execution.      |
| --refresh-dependencies | Will force download of dependencies.                 |


#### Etendo plugin


Add in the `build.gradle` file the plugin version available in [Gradle Plugin Release Notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/plugins/etendo-gradle-plugin/release-notes.md) or use `lastest.release` to resolve the latest version.

```groovy title="build.gradle"
plugins {
    id 'com.etendoerp.gradleplugin' version '<version>'
}
```

#### Plugin configuration

The plugin configuration need to be declared in the *etendo block*. <br>
In the following sections, you can find all the flags or variables available to set up and a brief description of each one.

```groovy title="build.gradle"
etendo {
  /**
  * Flags used to indicate if the 'default' core dependencies (jar files) should be
  * loaded (This is the case when you are working with sources and the 'default' jar files are missing)
  * This flags should be false.
  */
  boolean loadCompilationDependencies = false
  boolean loadTestDependencies = false

  /**
  * Flag used to ignore loading the source modules to perform resolution conflicts.
  * Default true
  */
  boolean ignoreSourceModulesResolution = true

  /**
  * Flag used to perform or not the resolution of conflicts.
  * Default true
  */
  boolean performResolutionConflicts = true

  /**
  * Flag used to ignore throwing a error if there is conflict resolutions with the Core dependency.
  * Default false
  */
  boolean forceResolution = false

  /**
  * Flag used to apply the subproject dependencies to the main project.
  * Default true
  */
  boolean applyDependenciesToMainProject = true

  /**
  * Flag used to prevent overwriting the transitive source modules when performing the expandModules task.
  * Default true
  */
  boolean overwriteTransitiveExpandModules = true

  /**
  * Flag used to exclude the Core dependency from each subproject to all the configurations.
  * Default true
  */
  boolean excludeCoreDependencyFromSubprojectConfigurations = true

  /**
  *  Flag used to indicate that the current Core version support jars.
  *  Default true.
  * 	When this flag is set to false, the behavior of the 'expandModules' task will change, forcing to expand all the declared modules with 'moduleDeps' to sources.
  */
  boolean supportJars = true

  /**
  * List of Etendo artifacts to always extract and ignore from the version consistency verification.
  */
  List<String> ignoredArtifacts = []

  /**
  * Flag use to prevent throwing error on version inconsistency between modules.
  * Default false
  */
  boolean ignoreConsistencyVerification = false

  /**
  * Flag used to prevent throwing error when an artifact could not be resolved.
  * This includes transitives ones.
  * Default false
  */
  boolean ignoreUnresolvedArtifacts = false

  /**
  * The list of modules that should not be re expanded.
  * Default empty.
  */
  List<String> sourceModulesInDevelopment = []

  /**
  * Flag used to ignore the Etendo CORE jar dependency located in the
  * build.gradle of the root project.
  * Default false.
  */
  boolean ignoreCoreJarDependency = false
}

```

#### Common Gradle tasks

- Creates the properties and configuration files.
  
    ``` bash title="Terminal"
    ./gradlew setup 
    
    ```
  
    | Command line parameters                  | Description                                               |                       
    |  -------------------       | ------------------------------------                      |
    | `-PforceDefaultProps=true` | Recreates the default properties file from the template.  |
    | `-PforceBackupProps=true`  | Recreates the backup.properties file from the template.   |
    | `-PforceQuartzProps=true`  | Recreates the quartz.properties file from the template.   |





- Creates the properties files from the templates in `/config` folder. The *setup* tasks depend on this task.
    ``` bash title="Terminal"
    ./gradlew prepareConfig
      
    ```

- Creates the database and installs reference data. 
    ``` bash title="Terminal"
    ./gradlew install
        
    ```

-  Compiles the Java classes that were modified and deploys them to Tomcat.

    ``` bash title="Terminal"
    ./gradlew smartbuild
        
    ``` 
    
    | Command line parameter         | Description                                                                                                            |          
    |  -------------------           | ------------------------------------                                                                                     |
    | `PignoreConsistency=true`      | Flag used to ignore the consistency verification (verifies the versions between the local modules and the installed ones)|
    

- Deletes all the Java Classes and recompiles them. 
    ``` bash title="Terminal"
    ./gradlew compile.complete
          
    ``` 
       
- Updates the database applying the changes in XML files.
    ``` bash title="Terminal"
    ./gradlew update.database
            
    ``` 

- Exports the database changes to XML files
    ``` bash title="Terminal"
    ./gradlew export.database
              
    ``` 
      
- Exports the module Application Dictionary data.
    ``` bash title="Terminal"
    ./gradlew export.database
                  
    ``` 

- Exports the configuration script. 
    ``` bash title="Terminal"
    ./gradlew export.config.script 
                  
    ``` 
   

- Task to download core dependency.
    ``` bash title="Terminal"
    ./gradlew expandCore
                      
    ``` 
      

    | Command line parameter    | Description                                                        |                       
    |  -------------------       | ------------------------------------                               |
    | `-PforceExpand=<true>`     | Flag used to force the sources expansion when the core is in JAR.  |



- Task to download the modules dependencies in sources.
    ``` bash title="Terminal"
    ./gradlew expandModules
                      
    ``` 


    | Command line parameter    | Description                                                        |  
    |  -------------------       | ------------------------------------                                                                                                  |
    | `-Ppkg=<package name>`     | The name of the module to be *re expanded* in case that it is already in sources. This will *OVERWRITE* all the changes in the module.|

#### Submodules

- Creates the `build.gradle` file with all the necessary information to publish.
    ``` bash title="Terminal"
    ./gradlew createModuleBuild
                      
    ```  

    | Command line parameters                  | Description                                               |                       
    |  -------------------       | ------------------------------------                      |
    | `-Ppkg=<package name>`     | The name of the module.                                   |
    | `-Prepo=<repository name>` | The name of the repository.                               |




- Publish the module to a custom repository.
    
    ``` bash title="Terminal"
    ./gradlew publishVersion
                            
    ``` 

    |   Command Line Parameters         | Description| 
    |  :------------------------------- | :--- |
    | `-Ppkg=<packagename>`     | **Required** The name of the module.                                                |
    | `-Precursive=true    `     | This trigger the republication of all the modules which depends on the module being published. By default false.|
    | `-PupdateLeaf=true   `     | This updates automatically the version of the project beign published.By default false.|

  
  
- Uninstalls a source module.
    ``` bash title="Terminal"
    ./gradlew uninstallModule
                              
    ``` 
    
    | Command line parameter                  | Description                                                                         |                       
    |  -------------------       | ------------------------------------                                                |
    | `-Ppkg=<modulename>`       | The javapackage of the source module to uninstall.                                  |



#### Internal developer tasks

- Used to clone all the git submodules of a module extension (bundle). The module `build.gradle` should contain the property
      ``` bash title="Terminal"
      ./gradlew cloneDependencies
                                    
      ```
    


      ```groovy  title="build.gradle"
      ext.defaultExtensionModules = [
          'git@bitbucket.org:example1.git',
          'git@bitbucket.org:example2.git'
        ]
      ```



      | Command line parameter                  | Description                                                  |                       
      |  -------------------                   | ------------------------------------                         |
      | `-Ppkg=<package name>`                 | **Required** The name of the bundle                          |



- Creates all the `build.gradle` files for each module using the database from AD_MODULExml.
    ``` bash title="Terminal"
    ./gradlew createModuleBuild
                                          
    ```

    | Command line parameter                  | Description                                                  |                       
    |  -------------------                   | ------------------------------------                         |
    | `-Ppkg=<package name>`                 | **Required** The name of the bundle                          |
    | `-Prepo=<repository name>`             | **Required** The name of the repository                      |
    | `-Pbundle=<bundle package name>`       | The name of the bundle                                       |
    | `--Ppkg=all`                           |Creates all the `build.gradle` files for each module, each `build.gradle` file will contain the dependencies between projects (in the dependencies block).                |
  
      

- Parameters to override the default core group, name and version.

    | Command line parameters                  | Description                                                  |                       
    |  -------------------                   | ------------------------------------                         |
    | `-PcoreGroup=<core group>`             | The core group name                                          |
    | `-PcoreName=<core name>`               | The core name                                                |
    | `-PcoreVersion=<core version>`         | The core version                                             |


     
- Parameters to override the default repository. Publish all the modules located in the source modules directory.
    ``` bash title="Terminal"
    ./gradlew publishAll
                                              
    ```

    | Command line parameters                  | Description                                                  |                       
    |  -------------------                    | ------------------------------------                         |
    | `-PupdateLeaf=true`                     | This updates automatically the version of all the project beign published. By defaul false.|
    | `-Pupdate=<mayor, minor, patch>`        | Used to specify which part of the version will be updated. By default patch.               |
    | `-PpushAndTag=true`                     | Used to specify if the modules published should push the changes and create a tag in the git repository. By default false.|
    | `-PpushAll=true`                        | Used to specify if all the modules should run the push and tag. By default false.|
        

- Task used to push and tag the modules' changes.
    ``` bash title="Terminal"
    ./gradlew pushToGit
                                                          
    ```

    | Command line parameters                  | Description                                                  |                       
    |  -------------------                    | ------------------------------------                         |
    | `-PpushAll=true`                        | Used to specify if all the modules should run the push and tag. By defaul false.|
        
 

- Updates the version of a dependency in each `build.gradle` submodule.
    ``` bash title="Terminal"
    ./gradlew updateModuleBuildDependency
                                                              
    ```

    !!! warning
        If you put a wrong version, you have to revert the changes manually.


    | Command line parameters                  | Description                                                  |                       
    |  -------------------                    | ------------------------------------                         |
    | `-Pdependency=<dependency name>`        | The name of the module to update in each `build.gradle`. Default `com.etendoerp.platform.etendo-core`|
    | `-PlowerBound=<version>`                | The lower version bound. Example: `-PlowerBound=1.0.3`|
    | `-PlowerBoundInclusive=<true or false>` | (Default false)|
    | `-PupperBound=<version>`                | The upper version bound. Example: `-PupperBound=1.0.3`|
    | `-PupperBoundInclusive=<true or false>` |(Default false)|
    | `-PexactVersion=<version>`             |Will replace the current version with the specified one. The version should be between quotes. Example: `-PexactVersion="[1.0.3]"`|



#### Ant tasks

Most of [ant build tasks](http://wiki.openbravo.com/wiki/Development_Build_Tasks#Detailed_Build_Tasks){target="_blank"} previously used can be run with Gradle:

```bash title="Terminal"

./gradlew <ant task> [params]
```

Except for some commands:

|Old Command| New Command| 
|---|---| 
|clean| antClean|
|setup|antSetup|
|init |antInit|
|install.source|antInstall|
|war|antWar|


#### Conflict resolution

!!!note
    Etendo makes use of the [Conflict Resolution Strategy](https://docs.gradle.org/current/userguide/dependency_resolution.html){target="_blank"} offered by GRADLE.

This approach is used to identify conflict between Etendo artifacts published in a repository.

For example, when you make use of an Etendo module, which depends on the Etendo core

```groovy title="build.gradle"
group          = 'com.etendo'
ext.artifact   = "moduleCextract"
version        = '1.0.1'
dependencies {
    // Etendo CORE dependency
    implementation 'com.etendoerp.platform:etendo-core:[22.1.1, 22.1.2]'
}
```

and you are currently working with the Etendo core in `22.1.0`, then a conflict resolution is found.

Depending on the type of conflict, if the problem is with the Etendo Core, then a Exception will be thrown.


!!!danger "To force the dependencies' resolution must be the last step to follow"
    You can force the resolution using the extension flag
    ``` groovy
    etendo {
      forceResolution = true
    }
    ```

    If you want to skip the resolution you can add to the plugin extension the flag.
    ``` groovy
    etendo {
      performResolutionConflicts = false
    }
    ```


#### Version consistency
The version consistency approach verifies that an extracted Etendo JAR artifact is consistent with the installed one (Equal version).

When a new Etendo JAR dependency is added or the version is updated, a `update.database` is needed to run before executing any compilation task (smartbuild, compile.complete, etc).
You can force the compilation tasks by adding to the Etendo plugin extension the ignore flag

!!!warning "These section explains how to ingore the consistency verification. Use this approach only if there are no conflicts between versions. "
    ``` groovy
    etendo {
      ignoreConsistencyVerification = true 
    }
    ```
    or run the tasks with the `-PignoreConsistency=true` flag.

    By default Etendo does not allow you to add a JAR dependency with an old version to the current installed one.
    You can ignore this behavior adding the module name to be updated with an old version as a configuration.
    ``` groovy
    etendo {
      ignoredArtifacts = ['com.etendoerp.mymodulename']
    }
    ```



#### Uninstall modules

=== ":octicons-package-16: Source Modules"

    To uninstall an Etendo module you need to run the gradle task.

    ``` bash title="Terminal"
    ./gradlew uninstallModule -Ppkg=<modulename>
    ```

    This task will try to delete the source module and the source dependencies which depends on it.

    If the module to uninstall is a dependency of other source module, an exception is thrown. You can force the uninstall providing the flag `-Pforce=true`.


=== ":material-language-java: Jar Modules"

    You can make use of Gradle exclusion rules to prevent the extraction of a JAR dependency.
    In the `build.gradle` of the root project you can specify the dependency to exclude.

    ``` groovy title="build.gradle"
    configurations.implementation {
      exclude group: 'com.test', module: 'custommodule1'
      exclude group: 'com.test', module: 'custommodule2'
    }
    ```

    If the dependency belongs to a `build.gradl` of a source module, it may be downloaded when the `javaCompile` task is executed. You can also make use of gradle exclude rules.

    !!! warning
        When you make use of exclude rules in a custom source module, the `pom.xml` can be affected when you publish a new version.

    To prevent downloading dinamic JAR modules, you need to remove the dependency from each `build.gradle`.

    The JAR module could also be a transitive dependency.
    You can see the transitive dependencies tree running the gradle task
    `./gradlew dependencies --info`
    and remove the root parent dependency.

    When you declare a dependency you can also exclude custom modules. See [Gradle dependency exclusion](https://docs.gradle.org/current/userguide/dependency_downgrade_and_exclude.html#sec:excluding-transitive-deps){target="_blank"}.

    !!! info
        Etendo JAR modules are dinamically extracted in the root project `build/etendo/modules` directory.

    !!! warning
        Each `build.gradle` file (from the root project or source modules) can be using the dependency directly or by transitivity and this can lead to resolution of the module.

    Finally you need to rebuild the system:

    ``` bash title="Terminal"
    ./gradlew update.database compile.complete
    ```

#### Recompile CSS files

##### Requirements

  - *Node.js*: Version 16 or higher.
  - *npm*: Node Package Manager.
  - *Sass*: Must have a Sass compiler installed.


??? info "How to install Node.js, npm and Sass"

    === ":simple-linux: Linux"
        
        **Node.js 16.10.0 using NVM:**
        
        1. Install NVM (Node Version Manager):
        ```bash
        curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
        ```
        Close and reopen your terminal to start using NVM, or execute the following commands:
        ```bash
        export NVM_DIR="$HOME/.nvm"
        [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
        [ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"
        ```
        
        2. Install Node.js version 16.10.0:
        ```bash
        nvm install 16.10.0
        ```

            **Note:** If you encounter errors during the installation of Node.js with the `nvm install 16.10.0` command, it might be because `curl` isn't installed or is misconfigured on your system. In such cases, you can try running the following commands:

            ```bash
            sudo snap remove curl
            sudo apt install curl
            ```

            After successfully configuring `curl` using this method, return to this guide and execute the steps above to install NVM and set up Node.js.
        
        3. Set Node.js version 16.10.0 as the default version:
        ```bash
        nvm use 16.10.0
        nvm alias default 16.10.0
        ```
        
        4. Verify the installation:
        ```bash
        node -v
        npm -v
        ```


    === ":simple-macos: Mac OS"

        **Homebrew Installation:**

        - Install Homebrew by running the following command in the terminal:

        ```bash
        /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
        ```

        - Once Homebrew is installed, verify it by checking its version:

        ```bash
        brew --version
        ```

        **Node.js & npm Installation using Homebrew:**
            
        1. Update Homebrew (ensuring you have the latest package definitions):
        ```bash
        brew update
        ```

        2. Install Node.js and npm:
        ```bash
        brew install node
        ```

        3. Verify the installation of Node.js and npm:
        ```bash
        node -v
        npm -v
        ```


    === ":material-microsoft-windows: Windows"
        
        **Node.js & npm:**
        
        1. Download the Node.js Windows Installer from the [official website](https://nodejs.org/){target="_blank"}.
        
        2. Run the installer and follow the instructions.
        
        3. After installation, open a command prompt or PowerShell and verify the installation:
        ```powershell
        node -v
        npm -v
        ```

    **Installing npm (Node Package Manager)**

    If you don't have npm installed on your system, follow these steps:

    - Install npm globally using the following command:

    ```bash
    npm install -g npm
    ```

    - Confirm the installation by checking the versions of node and npm:

    ```bash
    node -v
    npm -v
    ```

    **Installing Sass (Syntactically Awesome Style Sheets)**
    
    If you have npm installed and need the Sass compiler, follow these instructions:

    - Use npm to install Sass globally on your system:

    ```bash
    npm install -g sass
    ```

    - Confirm the Sass installation by running:

    ```bash
    sass --version
    ```

    Seeing the Sass version number means that Sass has been installed correctly.

##### Execution

The `cssCompile` task in the Etendo Gradle configuration is specifically designed to convert `.scss` files into `.css` files. To customize the Etendo skin, you will need to work with `.scss` files. 

``` bash title="Terminal"
./gradlew cssCompile smartbuild
```


After executing the task, look for the following output to indicate a successful build:
!!! success "Successful Execution"
    After executing the task, the following output indicates a successful build:

    ```
    > Task :cssCompile
    > BUILD SUCCESSFUL
    ```

    This confirms the successful processing of the files.

Finally, restart Tomcat to apply the changes and ensure the updated `.css` files are properly deployed.

#### Delete Client Process

- The `delete.client` task allow runs Delete Client Process directly from gradlew, also this task allows runs this process with Tomcat service down to avoid database locks.

    ``` bash title="Terminal"
    ./gradlew delete.client

    ```

    | Command line parameters                   | Description                                                                                               |
    |  -------------------                      | ------------------------------------                                                                      |
    | `-DclientId=<AD_Client_ID>`               | `AD_Client_ID` of `AD_Client` table to be used on this process to delete all information of this client.  |

    !!!danger "Danger Process"
        This task execute the same legacy process that you can run in the application like as System Administrator role. It is a very sensitive task you must be very careful because this can lead to crashes in the system if used incorrectly.
        <br>**A backup previous to executing the task is recommended.**

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo Backup and Restore Plugin
## Article Path: /Developer Guide/Etendo Classic/Developer Tools/Etendo Backup and Restore Plugin
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/developer-tools/etendo-backup-restore-tool
## Article Content: 
#### Overview

This article explains how to use the Etendo Backup and Restore plugin in Etendo Classic. This plugin allows you to easily generate and restore Etendo backups.

#### Install plugin

To use the Etendo Backup and Restore tool, you should add the plugin id on the `build.gradle` file, with the selected version.

``` groovy  title="build.gradle"
plugins {
    id 'com.etendoerp.etendobackup' version '<version>'
}
```

!!! info
    To know the available versions of the plugin, please visit [Etendo Backup and Restore Plugin | Release Notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/plugins/etendo-backup-restore-plugin/release-notes.md).

To resolve the plugin dependiencies, you should add the following lines on top of the `settings.gradle` file

``` groovy  title="settings.gradle"
pluginManagement {
    repositories {
        maven {
            url 'https://maven.pkg.github.com/etendosoftware/com.etendoerp.etendobackup'
            credentials {
                username "${githubUser}"
                password "${githubToken}"
            }
        }
        maven {
            url "https://repo.futit.cloud/repository/static-public-snapshots"
        }
        mavenCentral()
    }
}
```

!!! warning
    Make sure you have your Github credentials (`githubUser` and `githubToken`) set in the `gradle.properties` file.

#### Backup task

!!! warning
    The User running the backup must have `SUDO` access and the `backup.properties` file properly configured.


To run the backup, execute

``` bash title="Terminal"
./gradlew backup -PbkpMode=<mode>
```

Where the mode could be `manual` or `auto`

##### Backup properties file

The `backup.properties` file is found inside the `config` folder on the root project.
If it does not exists, run `./gradlew setup` to generate the missing files.

You can also provide a custom location of `backup.properties` adding the next block inside `build.gradle`.
``` groovy title="build.gradle"
backup {
    configPath = "/path/to/backup.properties"
}
```

`backup.properties` contains most of the properties that you should customize before running the backup.

* `USER`
Sets the user who will be running the backup.

* `GROUP`
Sets the group related to the user running the backup.

* `BACKUPS_DIR`
Sets the path where the backup will be stored.

* `BACKUPS_TMP_DIR`
Sets the path where the temp directory will be created to store the generated files.

* `ATTACH_COPY`
Sets a flag (`yes` or `no`) if the external attachments (if cointained) should be included in the backup.

* `ATTACH_IN_BKP`
Sets a flag (`yes` or `no`) if the source attachments should be included in the backup.

###### Email properties

These properties are used when the backup is running in `auto` mode.

* `EMAIL_FROM`
Sets the address sending emails.
* `EMAIL_SERVER`
Sets the email server address.
* `EMAIL_PORT`
Sets the port for the email server..
* `EMAIL_USER`
Sets the user address who sends emails.
* `EMAIL_PASSWORD`
Sets the email user password.
* `EMAIL_ENVIRONMENT`
Specifies the environment for sending emails.

Depending on the end `STATE`, the following properties are used to specify the email address where to send emails.

!!! failure "Error" 
    * `EMAIL_ERROR_TO`
      Sets the email address where error emails will be sent.
    * `EMAIL_ERROR_CC`
      Sets the email address to which copies (CC) will be sent in case of error.
    * `EMAIL_ERROR_SUBJECT`
      Sets the subject of the error email.

!!! warning 
    * `SEND_EMAIL_ON_WARNING`
      Specifies whether to send an email notification in case of warning during the backup process. Accepted values are `yes` or `no`.
    * `EMAIL_WARNING_TO`
      Sets the email address where warning emails will be sent.
    * `EMAIL_WARNING_CC`
      Sets the email address to which copies (CC) will be sent in case of warning.
    * `EMAIL_WARNING_SUBJECT`
      Sets the subject of the warning email.

!!! success 
    * `SEND_EMAIL_ON_SUCCESS`
      Specifies whether to send an email notification in case of success during the backup process. Accepted values are `yes` or `no`.
    * `EMAIL_WARNING_TO`
      Sets the email address where success emails will be sent.
    * `EMAIL_WARNING_CC`
      Sets the email address to which copies (CC) will be sent in case of success.
    * `EMAIL_WARNING_SUBJECT`
      Sets the subject of the success email.

!!! note
    In order to send the email to multiple accounts, separate addresses with `;`.<br>
    For example: `EMAIL_ERROR_CC=user1@smfconsulting.es;user2@smfconsulting.es`

##### End states
The following are the possible states at the end of the `backup` task:

!!! failure "Error" 
    Occurs when the creation of the backup fails. An email must be sent to the specified properties.

!!! warning
    The backup ends with warning messages. If the `SEND_EMAIL_ON_WARNING` flag is set to yes, an email should be sent to the specified properties.

!!! success
    The backup ends without warning or errors. If the `SEND_EMAIL_ON_SUCCESS` flag is set to yes, an email should be sent to the specified properties.

#### Restore task

!!! warning
    The user running the restore should have `SUDO` access.

To run the restore, execute

``` bash title="Terminal"
./gradlew restore -PbackupPath=/path/to/backup
```

Replace `/path/to/backup/` with the location of the backup to be restored.

A menu will be shown where you can choose multiple options to be performed.

!!! warning
    Make sure all the options selected are correct. The selected destination directories and database will be OVERWRITTEN.

1. *User verification*<br>
  You should run the restore with `SUDO` access (recommended). In case of not having permissions, you will have the option of inserting the `SUDO` password.

2. *Sources destination*<br>
  You can select the location in which the sources will be restored. The default path is set to the root dir from the project where the restore command is being executed.

3. *Attachments verification*<br>
  You can select to keep or ignore the copy of attachments (externals or contained inside the sources).

4. *Properties verification*<br>
  You can select which properties to use.

    !!! info
        The properties set the options which the database will use on the restore.

    - *Project properties*<br>
      Obtained from the `gradle.properties` file inside the current project running the restore. 
      You can change these properties to select, for example, the name of the database to be restored.
      Once the restore is done, the properties inside `config/Openbravo.properties` will be updated with the selected ones.

    - *Original sources properties*<br>
      Obtained from the `gradle.properties` file inside the original sources.
      The database will be restored with the original options (this could overwrite an existing database)
      The properties inside `config/Openbravo.properties` will not change.

5. *Database properties*<br>
  In the end, a message will be shown with the properties which the database will use to be restored. These properties depend on the ones selected previously.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /Developer Guide/Etendo Classic/Bundles/Platform Extensions Bundle/Overview
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/overview
## Article Content: 
#### Overview

This bundle includes enhancements for platform functionalities in Etendo.

#### Docker Management

:octicons-package-16: Javapackage: `com.etendoerp.docker`

This module enables the use of Dockerized containers in Etendo Classic.

!!!info
    For more information visit, [Docker Management developer guide](https://docs.etendo.software/latest/platform/docker-management.md).

#### Dockerized Tomcat Service

:octicons-package-16: Javapackage: `com.etendoerp.tomcat`

This module enables the Dockerization of Tomcat within Etendo Classic. 

!!!info
    For more information visit, [Dockerized Tomcat Service developer guide](https://docs.etendo.software/latest/platform/dockerized-tomcat-service.md).


#### Dynamic App 

:octicons-package-16: Javapackage: `com.etendoerp.dynamic.app`

Dynamic App allows you to create sub applications in Etendo Mobile.

!!! info
    For more information, visit the [Dynamic App developer guide](./dynamic-app.md)

#### EAN 128

##### Technical Aspects

It is a module for the transmission of information between the agents of the supply chain under the specifications of the Code 128 barcode. This, provide generic Utils for EAN128 Definition and parsing

Is a Java-based module for managing EAN-128 barcodes in an Etendo ERP context. Below is an overview of what each file appears to do:

##### SelectorFieldPropertyDataSource.java

**Purpose**: Implements a data source for a custom field selector.
**Main Operations**: Verifies whether a user has the access right to fetch data from the datasource.
Filters out Blob and OneToMany properties when getting entity properties.

##### EAN128Utils.java

**Purpose**: Utility class for handling EAN-128 data parsing and manipulation.

**Main Operations**: Defines standard date formats and JSON keys.
Parses incoming EAN128 Data JSON and extracts relevant information such as lot, serial number, expiration dates, etc.
If Inventory Line quantity was parsed, it modifies the relevant BaseOBObject's quantity.
Provides methods to edit OpenBravo base objects (BaseOBObject) based on the parsed EAN-128 data.

##### EANType.java

**Purpose**: Web Service to manage EAN-128 Types.

**Main Operations**: Handles HTTP GET requests and retrieves EAN-128 type information.
The information fetched depends on the warehouse specified in the request parameters.
If a warehouse-specific EAN-128 type isn't available, it attempts to fetch the default one.
Converts EAN-128 type to a JSON object and returns it as a response.

**Key Libraries used**:

- Etendo DAL for database interaction.
- Apache Commons Lang for String manipulations.
- JSON and Jettison for JSON parsing.

##### SMFEANComponentProvider.java

**Purpose**: It defines the global resources that are necessary for the operation of the components it provides.

#### Etendo Advanced Security

:octicons-package-16: Javapackage: `com.etendoerp.advanced.security`

:octicons-package-16: Javapackage: `com.etendoerp.advanced.security.template`

##### Technical Aspects

This module allows customizing several security features related to

- Password Security
- Password History
- User Lockout
- Multiple Session Verification
- Changing Password after Login
- Expiration Time (Autolock Password)

To make this module work, authentication Java class must be configured in the `gradle.properties` file by adding the following line:

```groovy title="gradle.properties"
authentication.class=com.etendoerp.advanced.security.process.AdvancedAuthenticationManager
```

Then `./gradlew setup` must be executed.

!!! warning
      It is mandatory to execute this step before installing the module. 

#### Etendo Webhooks

It allows you to execute actions via a URL call, providing a powerful way to integrate with external services.

!!! info
    For more information, visit the [Etendo Webhooks developer guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/etendo-webhooks.md).

#### Javax XML SOAP API

:octicons-package-16: Javapackage: `org.openbravo.util.javax.xml.soap`


##### Technical Aspects

This module provides SOAP with Attachments API for Java (SAAJ), which was part of JDK until 10. Starting from JDK 11, it was removed, which makes this module required as a dependency for those modules making use of it in order to be able to compile in JDK11+.

#### Number To Word (English)

:octicons-package-16: Javapackage: `org.openbravo.numbertoword_en`

:octicons-package-16: Javapackage: `org.openbravo.numbertoword`

It provides the infrastructure to convert a number into its equivalent in words. This functionality is especially useful while printing checks.

##### Technical Aspects

The NumberToWord module deploys an infrastructure to define Number to Word conversion modules so that different logics for different languages can be deployed.

To introduce a different language (other than English and Spanish), follow this example to extend this Number to Word extend:

```java
public class NumberToWord_es extends NumberToWord {
  private static String[] _grupos = { "", "millon", "billon", "trillon" };

  private static String[] _unidades = { "", "un", "dos", "tres", "cuatro", "cinco", "seis",
      "siete", "ocho", "nueve" };

  private static String[] _decena1 = { "", "once", "doce", "trece", "catorce", "quince",
      "dieciseis", "diecisiete", "dieciocho", "diecinueve" };

  private static String[] _decenas = { "", "diez", "veinte", "treinta", "cuarenta", "cincuenta",
      "sesenta", "setenta", "ochenta", "noventa" };

  private static String[] _centenas = { "", "cien", "doscientos", "trescientos", "cuatrocientos",
      "quinientos", "seiscientos", "setecientos", "ochocientos", "novecientos" };

  public static String millarATexto(int n) {
    if (n == 0)
      return "";

    int centenas = n / 100;
    n = n % 100;
    int decenas = n / 10;
    int unidades = n % 10;

    String sufijo = "";

    if (decenas == 0 && unidades != 0)
      sufijo = _unidades[unidades];

    if (decenas == 1 && unidades != 0)
      sufijo = _decena1[unidades];

    if (decenas == 2 && unidades != 0)
      sufijo = "veinti" + _unidades[unidades];

    if (unidades == 0)
      sufijo = _decenas[decenas];

    if (decenas > 2 && unidades != 0)
      sufijo = _decenas[decenas] + " y " + _unidades[unidades];

    if (centenas != 1)
      return _centenas[centenas] + " " + sufijo;

    if (unidades == 0 && decenas == 0)
      return "cien";

    return "ciento " + sufijo;
  }

  public static String numeroACastellano(long n) {
    String resultado = "";
    int grupo = 0;
    while (n != 0 && grupo < _grupos.length) {
      long fragmento = n % 1000000;
      int millarAlto = (int) (fragmento / 1000);
      int millarBajo = (int) (fragmento % 1000);
      n = n / 1000000;

      String nombreGrupo = _grupos[grupo];
      if (fragmento > 1 && grupo > 0)
        nombreGrupo += "es";

      if ((millarAlto != 0) || (millarBajo != 0)) {
        if (millarAlto > 1)
          resultado = millarATexto(millarAlto) + " mil " + millarATexto(millarBajo) + " "
              + nombreGrupo + " " + resultado;

        if (millarAlto == 0)
          resultado = millarATexto(millarBajo) + " " + nombreGrupo + " " + resultado;

        if (millarAlto == 1)
          resultado = "mil " + millarATexto(millarBajo) + " " + nombreGrupo + " " + resultado;
      }
      grupo++;
    }
    resultado = resultado.trim().concat(" ");
    return resultado;
  }

  public String convert(BigDecimal number) {

    double num = number.doubleValue();

    num = (double) (Math.round(num * Math.pow(10, 2)) / Math.pow(10, 2));
    int number_whole = (int) num;
    int number_decimal = (int) ((num * 100) - (number_whole * 100));
    String value;
    if (number_decimal == 0) {
      value = numeroACastellano(number_whole).concat("00/100 M.N.");
    } else {
      value = numeroACastellano(number_whole).concat(Integer.toString(number_decimal)).concat(
          "/100 M.N.");
    }
    value = value.substring(0, 1).toUpperCase().concat(value.substring(1));
    return value;
  }

}
```

#### OpenAPI

:octicons-package-16: Javapackage: `com.etendoerp.openapi`

This module module serves as an integration layer for documenting and exposing APIs within the Etendo ecosystem. It enables developers to define, organize, and document API endpoints using the OpenAPI specification, ensuring compatibility with tools like Swagger for visualization and testing.

!!!info
    For more information, visit [How to Document an Endpoint with OpenAPI](https://docs.etendo.software/latest/how-to-guides/how-to-document-an-endpoint-with-openapi.md). 

#### Print Document Web Service

:octicons-package-16: Javapackage: `com.etendoerp.printdocumentws`

:octicons-package-16: Javapackage: `com.smf.ws.printdocument`

##### Technical Aspects

This module allows downloading a PDF from some transaction documents using a web service called printDocument. It returns a PDF with the order, invoice or delivery note. This is useful for companies that use third party applications and require making printables accessible from those applications.

The supported documents are:

- Sales Quotation
- Invoice
- Shipment
- Proforma Order
- Proforma Quotation

To call the Web Service, the following URL is needed:

```
http://<client-url/etendo>/sws/com.etendoerp.printdocumentws.printDocument
```

It is necessary to configure Token authentication to use the web service.

Values that can be used to call the Web Service are:

- order
- invoice
- shipment
- quotation
- orderProforma
- shipmentValued
- quotationProforma

This is a RESTful Web Service that returns a .PDF file of the document using the template that is configured. The supported documents are Sales Quotation, Invoice, Shipment, Proforma Order, Proforma Quotation.

It is mandatory to insert the organization ID when you call the web service because it filters by organization.

#### Report Cache Management

:octicons-package-16: Javapackage: `com.exos.erp.reportcachemanagement`

This module allows changing or updating a Jasper Report in an Etendo environment without stopping the server.

##### Technical Aspects

This module allows clearing the cache for compiled reports in Tomcat.

The reports have to be uploaded in the correct folder, for example: `/var/lib/tomcat/webapps/etendo/…`

Then, in the "Clear report cache" window, click ’Done’:

![Clear Report Cache](https://docs.etendo.software/latest/assets/drive/10BWG7z1bmplzWz--wUqI6maavHs4dC1c.png)

#### Upload Files

:octicons-package-16: Javapackage: `com.etendoerp.upload.file`

This module facilitates developers to include a type of reference that present a File Upload Element which allows uploading a single file for processing. 

!!!info
    For more information, visit [How to Create a Standard Process Definition developer guide](https://docs.etendo.software/latest/how-to-guides/how-to-create-a-standard-process-definition.md#uploading-files). 



==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo Webhooks
## Article Path: /Developer Guide/Etendo Classic/Bundles/Platform Extensions Bundle/Etendo Webhooks
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/etendo-webhooks
## Article Content: 
#### Overview

##### What is a Webhook?

A webhook is a method used by web applications to send real-time notifications or data to other applications or servers. Webhooks operate using HTTP callbacks, which means that an application sends an HTTP request to a specified URL (the webhook URL) when a particular event occurs.

In simple terms, a webhook acts as a messenger that delivers a message (data payload) from one application to another when certain conditions are met. Webhooks enable applications to communicate and share information automatically, making it easier to integrate different services and create seamless workflows.

By using webhooks, you can keep your applications in sync, automate processes, and extend the functionality of your applications with minimal effort.

This documentation will guide you through the process of setting up and using webhooks in Etendo Classic. Webhooks allow you to execute actions via a URL call, providing a powerful way to integrate with external services.


#### Webhook Description

##### Webhook Header Fields

| Field                        | Description                                                            |
|------------------------------|------------------------------------------------------------------------|
| Module                       | Module in which the webhook will be created                            |
| Name                         | Webhook name                                                           |
| Description                  | Webhook description                                                    |
| Java Class                   | Class in which the webhook service was created                         |
| Allow to give access to role | Check if it is allowed to give access to roles via secure web services |
| Active                       | Webhook status (Active by default)                                     |

![Webhook Header](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/platform/etendo-webhooks/WebhookHeader.png)

##### Webhook Tabs Fields

Webhook window has 2 tabs: Access and Params.

The params tab allows you to create parameters that will be used in the URL call.

The access tab allows you to create access that will be used in the URL call.

###### Params

| Field           | Description                                                |
|-----------------|------------------------------------------------------------|
| Name            | Parameter name that will be used in the URL call           |
| Is required     | Whether the parameter is required or not                   |
| Active          | Parameter status (Active by default)                       |

###### User Access

Allow execution via token.

| Field           | Description                                                                                 |
|-----------------|---------------------------------------------------------------------------------------------|
| Active          | Access status (Active by default)                                                           |
| Token           | Selector with the token that will be used in the URL call created on User API Token window  |

###### Role Access

If you need to allow authenticated users with SWS read the guide: [How to use secure web services](https://docs.etendo.software/latest/how-to-guides/how-to-use-secure-webservices.md). For this you have to add roles that are allowed to execute a webhook in the **Role access** tab.

#### Webhook Usage Example

##### Setting up Webhooks

1. Navigate to the new menu option: `Application → General Setup → Application → Webhook Events → Webhooks`
2. Create a new webhook by filling in the required fields:

    | Field           | Value                                                      |
    |-----------------|------------------------------------------------------------|
    | Name            | Alert                                                      |
    | Description     | Create alert with custom message                           |
    | Java Class      | com.etendoerp.webhookevents.ad_alert.AdAlertWebhookService |
            
    ![Webhook Alert](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/platform/etendo-webhooks/WebhookAlert.png)

3. Focus on "Params" tab and create the following params:

    | Field           | Value                    |  Is required       |
    |-----------------|--------------------------|--------------------|
    | Name            | description              | :white_check_mark: |
    | Name            | rule                     | :white_check_mark: | 
        
![Webhook Params](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/platform/etendo-webhooks/WebhookParams.png)
        
##### Role access

###### API Key Generation

1. To give execution permission to a user, go to: `Application → General Setup → Application → Webhook Events → User API Token`
2. Create a new API with the Name: `<<user>> token`
    ![Webhook Token](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/platform/etendo-webhooks/WebhookToken.png)
3. After saving, run the “Get API Key” option, and save the resulting token (64-length random string) to your clipboard.
    ![Webhook Token](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/platform/etendo-webhooks/WebhookTokenString.png)

###### Assigning Webhook Access to Users

1. Navigate to: `Application → General Setup → Application → Webhook Events → Webhooks`
2. Select the created webhook and open the access tab.
3. Create a new row and select the previously created API record.

![Webhook Access](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/platform/etendo-webhooks/WebhookAccess.png)

##### Secure web servicess access

###### Assign allowed roles

In Webhooks window, add roles allowed to run the webhook.

![Webhook Role](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/platform/etendo-webhooks/WebhookRole.png)

##### Executing the Webhook

To execute the webhook, make a GET request using a REST client like Postman with the following syntax:


```
URL=http://localhost:8080/
CONTEXT=etendo
WEBHOOK_ENDPOINT=/webhooks/
[VARS]
WEBHOOK_NAME=name=alert
DESCRIPTION=new alert description
RULE=649BBFA37BA74FA59AEBE7F28524B0C8
```

###### Example URL:

*With token*

APIKEY=8b1012f0d442406ed602d87c13edcee9

```
http://localhost:8080/etendo/webhooks/?name=Alert&apikey=<api-key>&description=new alert description&rule=649BBFA37BA74FA59AEBE7F28524B0C8
```

*With sws token*

```
http://localhost:8080/etendo/webhooks/?name=Alert&description=new alert description&rule=649BBFA37BA74FA59AEBE7F28524B0C8
```

Add as authorization Bearer Token, the JWT obtained via SWS login.

###### Expected response

!!! success
    This webhook creates an alert, and you can visualize it in the "Alert Management" window.

    The response will return a status code **200** and the **alert ID**, for example: 
    ```
    {
      "created": "91FEABC1604E404CB565FC79435C4344"
    }
    ```

##### Example code usage

```java title="AdAlertWebhookService.java"
/**
 * Example webhoook to take as a starting point.
 * This service receive a description and a alert rule ID and insert one standard alert
 */
public class AdAlertWebhookService extends BaseWebhookService {
  private static final Logger log = LogManager.getLogger();
  
  @Override
  public void get(Map<String, String> parameter, Map<String, String> responseVars) {
    Alert alert = new Alert();
    alert.setAlertRule(OBDal.getInstance().get(AlertRule.class, parameter.get("rule")));
    alert.setDescription(parameter.get("description"));
    alert.setReferenceSearchKey("");
    OBDal.getInstance().save(alert);
    OBDal.getInstance().flush();
    responseVars.put("created", alert.getId());
  }
}
```

#### Use Cases

##### Tokens Visibility

!!! note
    :eye: Users can visualize tokens of their current profile.

!!! warning
    :warning: Other users cannot access another user's token. The API Token Window and webhook access tab will be empty.

##### Error Handling

!!! failure
    If a user calls a webhook without a token or includes an incorrect API token, the backend will respond with a **401** response and a message.

!!! failure
    If a user calls a webhook with an incorrect webhook name, the backend will respond with a **404** response and a message.

!!! failure
    If a user calls a webhook without access, the backend will respond with a **401** response and a message.


!!! failure
    If a user calls a webhook with a missing required parameter, the backend will respond with a **500** response and a message.

!!! failure
    If a user calls a webhook without a newly required parameter (after the backend configuration is changed), the backend will respond with a **500** response and a message.

!!! failure
    If a user calls a webhook with revoked access, the backend will respond with a **401** response and a message.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Docker Management
## Article Path: /Developer Guide/Etendo Classic/Bundles/Platform Extensions Bundle/Docker Management
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/docker-management
## Article Content: 
### Docker Management

:octicons-package-16: Javapackage: `com.etendoerp.docker`

#### Overview

[Docker](https://docs.docker.com/){target=_isblank} is a platform that enables developers to automate the deployment, scaling, and management of applications. It uses containerization technology, which packages an application and its dependencies into a standardized unit called a **container**. Containers can run consistently across different computing environments, making them highly portable and efficient.

The `com.etendoerp.docker` module enables the use of Dockerized containers in Etendo Classic. This allows for the distribution and encapsulation of new functionalities using Etendo's existing module infrastructure. It also provides the capability to Dockerize the database, Tomcat, or any current or future Etendo infrastructure dependencies. Also, the module includes Gradle tasks to manage containers.

!!! Info 
    This module includes the infrastructure for container management and the Postgres database service, as an example. In case you want to run other services, add the corresponding modules that implement the dockerization.  

Additionally, the infrastructure could be extended, and allows other modules to include in it their own specific containers.

!!! info
    To be able to include this functionality, the Platform Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Platform Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=5AE4A287F2584210876230321FBEE614){target=_isblank}. For more information about the available versions, core compatibility and new features, visit [Platform Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/platform-extensions/release-notes.md).

#### Requirements

This project depends on the following tools:

- [Docker](https://docs.docker.com/get-docker/){target="_blank"}: version `26.0.0` or higher.
- [Docker Compose](https://docs.docker.com/compose/install/){target="_blank"}: version `2.26.0` or higher.

#### Using Containers Distributed in Modules

##### Configuration Variables

  - It is necessary to include at least one configuration variable for each module to be launched, this variable enables all the services related to the module to be started.
    
    `docker_<javapackage>=true`
    
    
    Example:
    ``` groovy title="gradle.properties"
    docker_com.etendoerp.tomcat=true
    ```

  - In case you want to configure only one service belonging to a module, it is possible by adding a variable with the format:

    `docker_<javapackage>_<service>=true`

    Example:
    ``` groovy title="gradle.properties"
    docker_com.etendoerp.docker_db=true
    ```
    !!!note
        In this case, only the database service will be taken into account when raising and lowering services related to the `com.etendoerp.docker` module. 
    
  - It is also possible that some services may require configuration variables, in which case they should be added: 

    `docker_<javapackage>_<variable>=<value>`

    Example:
    ``` groovy title="gradle.properties"
    docker_com.etendoerp.tomcat_port=8080
    ``` 
    !!!note
        In this example, this variable configures the [Dockerized Tomcat Service](./tomcat-dockerized-service.md) module port, although the necessary configurations will be included in the documentation of each module.

  Finally, always to apply changes, execute 

  ``` bash title="Terminal"
  ./gradlew setup
  ```

#### Gradle Tasks to Manage Containers
Execute the following command to use the infrastructure:

##### Running

``` bash title="Terminal"
./gradlew resources.up
```
This command will search for all configured resources and start the containers.

!!! note 
    If you only have the base `com.etendoerp.docker` module installed and configured, this command will start a PostgreSQL database.

##### Stopping
``` bash title="Terminal"
./gradlew resources.stop
```
This command will stop the containers.

##### Down

``` bash title="Terminal"
./gradlew resources.down
```
This command will stop and remove the containers.


#### Verifying the Status

To verify the status of the resources started by Docker Compose, you can use the following Docker commands:

`docker ps`

This command lists all running Docker containers. You should see the containers related to Etendo

`docker compose logs`

This command shows the logs of all the services defined in your Docker Compose configuration, which can help in troubleshooting and verifying that the services are running correctly.

It is also possible to manage containers with tools such as [Lazydocker](https://github.com/jesseduffield/lazydocker#installation){target=_isblank} or [Docker Desktop](https://www.docker.com/products/docker-desktop/){target=_isblank}.


#### Postgres Database Service

In this module a Postgres database service is included, this allows to use the dockerized database in Etendo. To use it the following steps must be followed:

1. Once the `com.etendoerp.docker` module is installed, it is necessary to add a configuration variable in the `gradle.properties` to enable the use of the service:

    ``` groovy title="gradle.properties"
    docker_com.etendoerp.docker_db=true
    ```

2. Then it is necessary to run `./gradlew setup`, to apply the configuration changes.

3. When `./gradlew resources.up` is executed, a new Docker container with the database service will be raised using the configuration variables defined in the `gradle.properties`, such as port, user, password, etc. 

    !!! warning
        In case you have the same service running locally on the same port it should be down. 

4. Finally, using this service it is possible to run `./gradlew install` to install the database from scratch, or it is possible to restore a backup and start using the new dockerized database service. 


==ARTICLE_END==
==ARTICLE_START==
# Article Title: Dockerized Tomcat Service
## Article Path: /Developer Guide/Etendo Classic/Bundles/Platform Extensions Bundle/Dockerized Tomcat Service
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/dockerized-tomcat-service
## Article Content: 
### Dockerized Tomcat Service

:octicons-package-16: Javapackage: `com.etendoerp.tomcat`

#### Overview

The `com.etendoerp.tomcat` module enables the Dockerization of Tomcat within Etendo Classic. This module modifies Gradle tasks to automatically deploy the `WAR` file into the container when executing the `smartbuild` task.

!!! info
    To be able to include this functionality, the Platform Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Platform Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=5AE4A287F2584210876230321FBEE614){target=_isblank}. For more information about the available versions, core compatibility and new features, visit [Platform Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/platform-extensions/release-notes.md).

#### Configuration Variables

To enable and configure the Tomcat service, the following configuration variables are available:

- **Enable the Service**

    ```groovy title="gradle.properties"
    docker_com.etendoerp.tomcat=true
    ```
    This variable enables the Tomcat service.

- **Configure Tomcat Port** (Optional)
    ```groovy title="gradle.properties"
    docker_com.etendoerp.tomcat_port=<port>
    ```
    This variable sets the port for the Tomcat service. The default port is `8080`

- **Configure Debug Port** (Optional)

    ```groovy title="gradle.properties"
    docker_com.etendoerp.tomcat_debug=<debug_port>
    ```
    This variable sets the debug port for the Tomcat service. The default debug port is `8009`

    !!! info
        For debugging in IntelliJ, create a new configuration of type **Remote JVM Debug** and set the port to listen on.

        ![Debug-Mode.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/platform/tomcat-dockeridez-service/debug-mode.png)


Execute the following command to apply the configuration changes:

```groovy title="Terminal"
./gradlew setup
```

#### Compile the Environment

- The first time Tomcat is used within a Docker environment, the setup must be compiled by executing:
    
    ``` bash title="Terminal"
    ./gradlew update.database compile.complete smartbuild
    ```

    This command will update the database and recompile the java classes and deploy the `WAR` to the dockerized Tomcat service. 

    !!! info
        This module modifies **Gradle tasks**. Executing the `update.database` command will automatically stop the Tomcat service. The `smartbuild` task will then ensure that the `WAR` file is correctly deployed in the container. After the smartbuild execution, the service will automatically restart, enabling an automated compilation from the command line.
         


- Refer to [Docker Management](./docker-management.md) page for more information on container management.


#### Extra Configuration to Use Tomcat (Dockerized) with a Host Database in Linux Environments

1. Listen on the Docker Network

    Create the `etendo.conf` file in the location `/etc/postgresql/<your_pg_version>/main/conf.d/etendo.conf` with the following content:

    ``` title="etendo.conf"
    listen_addresses = 'localhost,172.17.0.1'
    ```

    !!! note
        The IP address `172.17.0.1` is the interface that connects the host with the Docker service. This is the default address used for this connection.

2. Allow Access from the Docker Subnetwork

    Add the following line to the `/etc/postgresql/<your_pg_version>/main/pg_hba.conf` file:
    
    ``` title="pg_hba.conf"
    host all all 172.0.0.0/8 scram-sha-256
    ```
    !!! note
        The subnet `172.0.0.0/8` is used to enable access from Docker Tomcat to the host. By default, Docker assigns a subnet within the range of `172.1.0.0/8` to `172.254.0.0/8`.
3. Restart the PostgreSQL Service

    Finally, restart the PostgreSQL service by running the following command in the terminal:

    ``` bash title="Terminal"
    sudo systemctl restart postgresql
    ```


==ARTICLE_END==
==ARTICLE_START==
# Article Title: Dynamic App
## Article Path: /Developer Guide/Etendo Classic/Bundles/Platform Extensions Bundle/Dynamic App
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/dynamic-app
## Article Content: 
### Dynamic App 
:octicons-package-16: Javapackage: `com.etendoerp.dynamic.app`

#### Overview
This page explains how to configure and export dynamic applications in Etendo Classic, which are dynamically displayed in Etendo Mobile.

##### Dynamic App window
:material-menu: `Application` > `General Setup` > `Application` > `Dynamic App`

As `System Administrator` role, in the **Dynamic App** window, specify the paths and versions for each subapplication. These settings determine how subapplications are displayed when users log into Etendo Mobile.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/dynamic-app-creation.png)

Fields to note:

- **Module**: The module that can export the window configuration.
- **Name**: Name with the application will be shown.
- **Directory Location**: The path where the compiled application bundle is located. In development, the path must be empty `/`, but in production, the path is `/<javapackage>/web/`.
- **Active**: To select if this application is active or not.

##### Dynamic App Version Tab 
Allows the application to be versioned, enabling both development and production versions.

Fields to note:

- **Name**: Name of the application version E.g. `dev` or `1.0.0`.
- **File Name**: The bundle name of the compiled application, by default `dist.js`.
- **Default**: This check defines that this version is productive.
- **Is Development**: This check defines that this version is in development and can be deployed locally.
- **Active**: To select if this application version is active or not.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Warehouse Extensions Bundle
## Article Path: /Developer Guide/Etendo Classic/Bundles/Warehouse Extensions Bundle
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/warehouse-extensions-bundle
## Article Content: 
#### Overview

In this section, the user can find technical information about the Warehouse Extensions Bundle.

#### Stock History 

:octicons-package-16: Javapackage: `com.etendoerp.stock.history`

This module is added to the Create Stock History process and has the following characteristics: 

It takes all the stock data from each product (present in the table `m_storage_detail_history`) and enters them into the table `etst_storage_detail_history`, under the day the process was executed. If there is already data loaded on that date it is overwritten with the new data. The whole process is monitored by logs that can be viewed in the 'Process Request' window under the 'Process Monitor' tab of the process.

If the user would like to make changes on the table, and would like them to be taken into account in the data loading process, it  can be done by means of the hooks functionality present in the module. Just create a class that implements the StockHistoryHooks interface and extends the StockHistoryPioritizer abstract class, and implement the desired functionality under the doExecute method. This method will be executed once for each row added to the table. If multiple instances of the same interface are implemented, the order of execution can be decided by the getPriority method. The priority is given by how close to 0 is the number returned by this method. 

##### How to define a Stock History Hook 

- Define the class for the hook, extending the abstract class StockHistoryHookPrioritizer and implementing the interface StockHistoryHook:

    ```java
    import com.etendoerp.stock.history.hooks.StockHistoryHookPrioritizer;
    import com.etendoerp.stock.history.hooks.StockHistoryHook;

    public class ExampleHook extends StockHistoryHookPrioritizer
      implements StockHistoryHook {
    }
    ```

- Implement the abstract methods of the interface and abstract class: 


    ```java
    import com.etendoerp.stock.history.data.ETSTStorageDetailHistory;
    import com.etendoerp.stock.history.hooks.StockHistoryHookPrioritizer;
    import com.etendoerp.stock.history.hooks.StockHistoryHook;

    public class ExampleHook extends StockHistoryHookPrioritizer
      implements StockHistoryHook {

    @Override
    public void exec(ETSTStorageDetailHistory hookObject) throws Exception {
      System.out.println("This is the ExampleHook hook");
    }

    @Override
    public int getPriority() {
      return 0;
    }
    }
    ``` 

##### Uninstall module

To uninstall the module and prevent future problems with orphan records, a sequence of steps must be followed:

1. Run the following query in the environment's database
```
DELETE FROM OBUIAPP_GC_TAB 
WHERE AD_TAB_ID = 'C3DB551F2BCA40A79AAF21DBD6D06309';
```

2. After the query successfully finishes, delete the module by the way corresponding to the installation method (Sources/JARs)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /Developer Guide/Etendo Classic/Bundles/Financial Extensions Bundle/Overview
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/financial-extensions-bundle/overview
## Article Content: 
#### Overview

In this section, the user can find technical information about the Financial Extensions Bundle.

#### Conversion Rate Downloader

:octicons-package-16: Javapackage: `com.smf.currency.conversionrate`

##### Technical Aspects

In the Currency Converters window, the necessary Apilayer data has to be configured:

-   Classname: com.smf.currency.apiconfig.CurrencyLayerConverter
-   URL: [http://apilayer.net/api/](http://apilayer.net/api/)
-   Token
-   User
-   Password

In the Conversion Rate Downloader Rule window, the configuration includes which conversions are required from which currency to which currency, what is the tolerance, etc.  
The "Conversion Rate Downloader" process in the background also needs to be configured. This is the one that will obtain the conversion and insert it in the Conversion Rates window.

#### Business Partner Settlement

:octicons-package-16: Javapackage: `org.openbravo.financial.bpsettlement`

##### **Introduction**

In this document, all the developments that need to be delivered to fulfill the Business Partner Settlement project are described in detail.

The document is structured in the different main processes that are included in the project.

-   Module definition
-   BP Settlement window
-   Add Credit Payments Pick and Execute
-   Add Pending Invoices Pick and Execute
-   Process/Cancel/Reopen Process Definition

##### Module Definition

**Module Name**

Business Partner Settlements

**Description**

This module provides the ability to settle Available Credit or Pending Payments of a Business Partner that is both Customer and Provider.

**License**

OBPL

**DB Prefix**

OBFBPS

**javapackage**

`org.openbravo.financial.bpsettlement`

**Translation Required**

Yes

**Dependant Modules**

`*Openbravo 3.0 Framework* PR14Q3.1 (2.1.24019)`

**datapackage**

`org.openbravo.financial.bpsettlement`

##### **BP Settlement window**

-   **Window Name**:Business Partner Settlement
-   **Help**: Window to manage settlements that cancels available credit or pending Payments of a Business Partner.
-   **Type**: Maintain
-   **Menu folder**: Financial Management >> Receivables and Payables >> Transactions. Just above 'Financial Account' window

###### **Header Tab**

-   **Name**: Header
-   **Help**: Definition of each settlement created for a business partner.
-   **UI Pattern**: Standard
-   **Table**: OBFBPS\_Settlement
-   **Sequence**: 10
-   **Tab level**: 0

Table Definition:

-   **Name**: OBFBPS\_Settlement
-   **TableName**: OBFBPS\_Settlement
-   **Java Class Name**: BPSettlement
-   **Window**: Business Partner Settlement

| **Name** | **Column Name** | **Mandatory** | **SeqNo** | **Reference** | **Show in Grid (seq)** | **Default** | **Definition** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| **Organization** | AD\_Org\_ID | Yes | 10  | Table Dir only allow transactional Orgs | Yes (10) |     |     |
| **Settlement Type** | BP\_Settlement\_Type | Yes | 20  | List new *BP\_Settlement Type*:  <br>  <br>\- *Credit* (CR), *Invoice* (INV) | Yes (20) |     | Stored In session: Yes  <br>  <br>Do not allow to change when there are lines. Using an Event Handler |
| **Settlement Date** | SettlementDate | Yes | 30  | Date | Yes (30) | *SYSDATE / now()* |     |
| **Business Partner** | C\_BPartner\_ID | Yes | 40  | Selector new *Customer/Vendor Business Partner*:  <br>  <br>\- HQL Filter by customer = 'Y' and vendor = 'Y'  <br>\- Grid fields: Name, Search Key, Category | Yes (40) |     | Do not allow to change when there are lines. Using an Event Handler |
| **GL Item** | C\_GLItem\_ID | Yes | 50  | GL Item Selector | Yes (50) |     |     |
| **Settlement Payment In** | FIN\_Payment\_In\_ID | No  | 60  | Payment selector | Yes (60) |     | Read Only Yes |
| **Settlement Payment Out** | FIN\_Payment\_Out\_ID | No  | 70  | Payment selector | Yes (70) |     | Read Only Yes |
| **Description** | Description | No  | 80  | Text. Length: 2000 | No  |     |     |
| **Status** | BP\_Settlement\_Status | Yes | 1010 | List new *BP Settlement Status*:  <br>  <br>\- Values: *Draft* (DR), *Processed* (CO), *Canceled* (VO) | Yes (80) | DR  | Show In Status Bar Yes  <br>  <br>Stored In Session: Yes |
| **Incoming Amount** | Incoming\_Amt  <br>  <br>(Defined in the ad\_column, but not physically in the DB) | No  | 1020 | Computed field: Sum of incoming amounts (Credit In and Sales Invoice) | Yes (90) |     | Show In Status Bar: Yes |
| **Outgoing Amount** | Outgoing\_Amt  <br>  <br>(Defined in the ad\_column, but not physically in the DB) | No  | 1030 | Computed field: Sum of outgoing amounts (Credit Out and Purchase Invoice) | Yes (100) |     | Show In Status Bar: Yes |
| **Add Credit Payments** | Add\_Credit\_Payments\_Process  <br>  <br>(AD\_Column.Name: Add Credit Payments Process) | No  | 2010 | Button (Char 1) | No  | Y   | Display Logic: type credit and status Draft |
| **Add Not Paid Invoices** | Add\_Invoices\_Process  <br>  <br>(AD\_Column.Name: Add Invoices Process) | No  | 2020 | Button (Char 1) | No  | Y   | Display Logic: type invoice and status Draft |
| **Process Settlement** | Process\_Settlement | No  | 2030 | Button (Char 60) new *BP Settlement Action* List:  <br>  <br>\- Values: *CO* Process, *VO* Cancel, *RE* Reactivate | No  | *CO* |     |

####### **OBFBPS\_Settlement\_trg trigger**

Trigger to avoid modifying any field when the Settlement is in status Processed or Canceled.

When the status is changing from *CO* to any other it should allow setting `FIN\_Payment\_In\_ID` and `FIN\_Payment\_Out\_ID`  to null.

###### **Credit In Tab**

-   **Name**: Credit In
-   **Help**: Each Payment In with available credit to consume that it is canceled in this settlement.
-   **UI Pattern**: Read Only
-   **Table**: OBFBPS\_Credit\_Payment
-   **Sequence**: 20
-   **Tab level**: 1
-   **Display Logic**: Settlement Type Credit
-   **Auxiliary Input**: *IsSoTrxTab* value *Y*

Table Definition:

-   **Name**: OBFBPS\_Credit\_Payment
-   **TableName**: OBFBPS\_Credit\_Payment
-   **Java Class Name**: CreditPayment
-   **Window**: Business Partner Settlement

| **Name** | **Column Name** | **Mandatory** | **SeqNo** | **Reference** | **Show in Grid (seq)** | **Default** | **Definition** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| **Credit Payment** | FIN\_Payment\_ID | Yes | 10  | Payment Selector | Yes (10) |     |     |
| **Settlement Amount** | Settlement\_Amt | Yes | 20  | Amount | Yes (20) |     |     |
| **Is Sales Transaction** | IsSOTrx | Yes |     | Yes/No | No  | @IsSoTrxTab@ (Auxiliary Input value) | Hidden Field |

####### **OBFBPS\_Credit\_Payment trigger**

Trigger to avoid modifying any field when the Settlement is in status Processed or Canceled.

When the status is changing from *CO* to any other, it should allow setting `FIN\_Payment\_In\_ID` and `FIN\_Payment\_Out\_ID` to null.

###### **Credit Out Tab**

It is the same as Credit In with these differences:

-   **Name**: Credit Out
-   **Help**: Each Payment Out with available credit to consume that it is canceled in this settlement.
-   **Sequence**: 30
-   **Tab level**: 1
-   **Auxiliary Input**: *IsSoTrxTab* value *N*

###### **Sales Invoice Tab**

-   **Name**: Sales Invoices
-   **Help**: Each not paid Sales Invoice that it is canceled in this settlement.
-   **UI Pattern**: Read Only
-   **Table**: OBFBPS\_Invoice
-   **Sequence**: 40
-   **Tab level**: 1
-   **Display Logic**: Settlement Type Invoice
-   **Auxiliary Input**: *IsSoTrxTab* value *Y*

Table Definition:

-   **Name**: OBFBPS\_Invoice
-   **TableName**: OBFBPS\_Invoice
-   **Java Class Name**: SettledInvoice
-   **Window**: Business Partner Settlement

| **Name** | **Column Name** | **Mandatory** | **SeqNo** | **Reference** | **Show in Grid (seq)** | **Default** | **Definition** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| **Invoice** | C\_Invoice\_ID | Yes | 10  | Invoice Selector | Yes (10) |     |     |
| **Settlement Amount** | Settlement\_Amt | Yes | 20  | Amount | Yes (20) |     |     |
| **Is Sales Transaction** | IsSOTrx | Yes |     | Yes/No | No  | @IsSOTrxTab@ (Auxiliary Input value) | Hidden Field |

####### **OBFBPS\_Invoice\_Trg trigger**

Trigger to avoid modifying any field when the Settlement is in status Processed or Canceled.

###### **Purchase Invoice Tab**

Same as Sales Invoice with these differences:

-   **Name**: Purchase Invoice
-   **Help**: Each not paid Purchase Invoice that it is canceled in this settlement.
-   **Sequence**: 50
-   **Tab level**: 1
-   **Auxiliary Input**: *IsSoTrxTab* value *N*

##### **Process/Cancel/Reopen Report and Process**

*Report and Process* to manage bp settlements.

-   Name: BP Settlement Process.
-   UI Pattern: Standard
-   Data access level: Organization
-   All flags to *false*
-   Parameter *Action*
    -   Reference *List*. *BP Settlement Action*, the list assigned to the button.
    -   Validation *BP Settlement Valid Actions*. Filters the available actions based on the *BP\_Settlement\_Status* column value.
        -   Status *Draft (DR)*: *Process (CO)*
        -   Status *Processed (CO)*: *Cancel (VO)*, *Reactivate (RE)*
        -   Status *Canceled (VO)*: None (the button should be hidden as well).
    -   Default value: value of `Process\_Settlement` column.
-   Process class: `org.openbravo.financial.bpsettlement.process.BPSettlementProcess`
-   Similar example in *Payment Process* Report and Process.

###### ***BPSettlementProcess*** **java class**

Extends `org.openbravo.service.db.DalBaseProcess`.

Validations:

-   Status - action validation.
    -   Settlements in status *DR* can only be processed.
    -   Settlements in status *CO* can only be canceled or reactivated.
    -   Settlements in status *VO* cannot be modified.

####### ***Process CO*** **action**

This action does an extra validation:

-   When it is an invoice settlement type, ensure that there are invoices and total amounts for purchase and sales invoices are the same.
    -   If it is a credit settlement type, the same check with credit payments.
-   Ensure that there are no invoices and credit payments in the same settlement.

######## **Invoice type**

Create and process a Payment In with all the sales Payment Schedule Details included in the `OBFBPS\_Invoice` table for the settlement. Create a similar Payment Out with the purchase Payment Schedule Details.

Add a Payment Detail on each payment using the *GL Item* defined in the settlement, so the total amount of each payment is Zero.

Set the generated payment ids on `FIN\_Payment\_In\_ID` and `FIN\_Payment\_Out\_ID` columns.

Set the `BP\_Settlement\_Status` to *CO* and the `Process\_Settlement` to *VO*

To build the Payments based on the selected Payment Schedule details, use the following public method:

```java
org.openbravo.advpaymentmngt.process.FIN\_AddPayment.savePayment(FIN\_Payment \_payment, boolean isReceipt, DocumentType docType, String strPaymentDocumentNo, BusinessPartner businessPartner, FIN\_PaymentMethod paymentMethod, FIN\_FinancialAccount finAccount, String strPaymentAmount, Date paymentDate, Organization organization, String referenceNo, List<FIN\_PaymentScheduleDetail> selectedPaymentScheduleDetails, HashMap<String, BigDecimal> selectedPaymentScheduleDetailsAmounts, boolean isWriteoff, boolean isRefund, Currency paymentCurrency, BigDecimal finTxnConvertRate, BigDecimal finTxnAmount)
```


To add the GL Item payment details use the following public method:

```java
org.openbravo.advpaymentmngt.process.FIN\_AddPayment.saveGLItem(FIN\_Payment payment, BigDecimal glitemAmount, GLItem glitem)
```

To process the payment use the following public method (strAction: *P*):

```java
org.openbravo.advpaymentmngt.process.FIN\_AddPayment.processPayment(VariablesSecureApp vars, ConnectionProvider conn, String strAction, FIN\_Payment payment)
```

######## **Credit type**

Create and process a Payment In with all the sales credit payments included in the `OBFBPS\_Credit\_Payment` table. A similar Payment Out is created with the purchase credit payments.

For each selected credit payment, update its description with the new payment document number and increment the Used Credit amount by the settled amount. Link the credit payment to the new payment.

Add a Payment Detail on each payment using the *GL Item* defined in the settlement, so the total amount of each payment is Zero.

See an example on how to add the selected credit payments to the new payments in the following method:

```java
org.openbravo.advpaymentmngt.actionHandler.AddPaymentActionHandler.addCredit(FIN\_Payment payment, JSONObject jsonparams)
```

Note that to link the credit payments with the new payment, it is used the public method:

```java
org.openbravo.advpaymentmngt.process.FIN\_PaymentProcess.linkCreditPayment(FIN\_Payment newPayment, BigDecimal usedAmount, FIN\_Payment creditPayment)
```

####### ***Cancel VO*** **action**

It cancels the Payments generated in this settlement and stored in `FIN\_Payment\_In\_ID` and `FIN\_Payment\_Out\_ID` columns.

To cancel the payment, use the following public method (strAction: *V*):

```java
org.openbravo.advpaymentmngt.process.FIN\_AddPayment.processPayment(VariablesSecureApp vars, ConnectionProvider conn, String strAction, FIN\_Payment payment)
```

Sets the `BP\_Settlement\_Status` to *VO* and the `Process\_Settlement` to *VO*

####### ***Reactivate RE*** **action**

As in *Cancel* action cancels the payment generated on the settlement.

Sets the `BP\_Settlement\_Status` to *DR* and the `Process\_Settlement` to *CO*

Sets to null the `FIN\_Payment\_In\_ID` and `FIN\_Payment\_Out\_ID` columns.

#### Banking Pool

:octicons-package-16: Javapackage: `com.etendoerp.bankingpool`

##### Overview

This document covers how to create a process that automatically generates a new Finance Plan or updates a Finance Plan from the Financial Management >> Accounting >> Transactions >> Financial Type Configuration window.  It also provides a structure that should be considered when creating the Java class that is responsible for performing these new processes.

##### Creating the new Java Class

The Java class in charge of creating the financing plan must extend the Java `FinanceTypeTemplate` class. It provides some abstract methods to be performed and other methods that are useful when creating the new process. The basic structure that the new Java class must follow is the following:

```java
package com.etendoerp.bankingpool.types;
import com.etendoerp.bankingpool.FinancialTypeConfiguration;
import java.math.BigDecimal;
import java.util.Date;
public class NewFinancialType extends FinanceTypeTemplate {
 @Override
 public void exec(FinancialTypeConfiguration configuration, Date date,
     boolean isNewFinancePlan) {
   if (isNewFinancePlan) {
     for (int paymentNo = 0; paymentNo < configuration.getInstallmentNo(); paymentNo++) {
       //Implement the creation of the new Financing Plan
     }
   } else {
     for (int paymentNo = 0; paymentNo < configuration.getInstallmentNo(); paymentNo++) {
       //Implement the update of the Financing Plan
     }
   }
 }
 @Override
 public BigDecimal getInstallment(FinancialTypeConfiguration configuration,
     BigDecimal totalAmortization, int totalInstallment) {
   //Calculate the value of the Installment
   return null;
 }
 @Override
 public BigDecimal getRecalculatedInstallment(FinancialTypeConfiguration configuration,
     BigDecimal totalAmortization, BigDecimal residualValue, int totalInstallment) {
   //Calculate the value of the installment recalculation
   return null;
 }
}
```

The Exec method is the method executed when a new Finance Plan is created or the Finance Plan is to be modified.

The Exec method receives 3 parameters:

-   configuration: The record of the Financial Type Configuration window to which the new finance Plan is created or modified.
-   date: The date that is passed as a parameter when creating a finance Plan.
-   isNewFinancePlan: Check that indicates whether a new finance plan is being created or updated. If called from the Create Finance Plan button this parameter will be True and if called from the Update Finance Plan button the parameter will be False.

The abstract class `FinanceTypeTemplate` has implemented several methods that can be useful, among them can be found:

-   newFinancePlan: Creates a new installment of the finance plan
-   setDate:  Assigns a date to the date field in a finance plan record
-   setAllDates: Assigns the date to the new Financing plan taking into account the payment date and frequency defined in the header
-   getLastFinancePlanWithInvoice: Obtains the last installment of the financing plan with an invoice
-   getLastFinancePlanWithPayment: Obtains the last installment of the financing plan with a payment
-   getMonthlyInterest: Performs the calculation (% Annual Interest/(12/frequency))
-   getCapitalizedInterest: (1+% monthly Interest)^Installment Nro^
-   getResidualValueDivideCapitalizedInterest: Performs the calculation Residual Value/Capitalized Interest.
-   setAmortizationRenting: Performs the calculation Installment - Interest
-   setTotalAmortization: Calculates the total amount paid up to that point in the finance plan
-   setPendingAmortization: Calculates the outstanding amount to be paid in the finance plan
-   setInterest: Performs the calculation ((last Pending Amortization\*% annual Interest)/12)\*frequency
-   setCommission: Assigns the commission defined in the header
-   setBusinessPartner: Assigns the Financial Bank/Entity defined in the header
-   setProject: Assigns the Project defined in the header
-   setCostCenter: Assigns the Cost Center defined in the header
-   setFirstPendingAmortization: Method of calculating the outstanding amortization for the first installment
-   getFinancePlanToRecalculate: Method that obtains all the financing plan installments to be updated if you want to update a finance plan

The abstract methods must be implemented in the new Java class and, if required, an override can be made on any of the methods of the `FinanceTypeTemplate` class.

##### Creating the new Financial Type

In the Financial Type window a new record is created with the new Financial Type and in the Class Name field the package of the Java class that was implemented is entered followed by the Java class name.

![](https://docs.etendo.software/latest/assets/drive/O0wwVyzJUyoTZblrURHjjOMPgcwQ1-NPr8XlI1qaE37Mo0PQ1WVVdHlOV1YPDpBjbzzeDaOgIsWoS01ptNgGT3_VintShkcxoZGdioZ8jTNuk-CyXUxZNjmSa8YaEKwlP58Gv3AXBmqEmdG2IQ.png)

By simply filling in the Class Name field, the Create New Funding Plan and Update Funding Plan button will be visible.

![](https://docs.etendo.software/latest/assets/drive/aq3IBl8B85MUhWR_N0Buo6qjtcxAhESwYOpGkh8Hn1X-ka9jGGVpgfaW3jzbzfuY2Bca2F3O-zPaU3GEtdYEVLy2_u0_f1wVNF3rjteWPBBbCFIM4Lv_ZW5FEMni5EVA2IKgtiOckQPrzhSa1g.png)

![](https://docs.etendo.software/latest/assets/drive/_r4oVdOsDGq8rLR2_c2foimTnGGh66TGlUIs1J_ZiWG4yuSXnNNMLDFAwtN4D6w_GU_XjgJ8Ix5s9KF4jrTAKHsdLliRdPS06BqHgl8hPYmf9QvYfbg9oOwWRUp9pBNbhcIDN6KOtS07OornYw.png)

There is no need to modify any of the 2 buttons, as they automatically execute the Exec method of the Java class specified in the Financial Type.

#### Advanced Financial Docs. Processing

:octicons-package-16: Javapackage: `com.etendoerp.advanced.financial.docs.processing`

:octicons-package-16: Javapackage: `com.etendoerp.advanced.financial.docs.processing.template`

##### Undo Closed orders / Unvoid voided invoices hooks

New hooks have been added to the 'Undo Close' and 'Unvoid' processes, from the Sales/Purchase orders and invoices respectively. 
These hooks allow the developer to add new validations before and/or after the action is executed, and thus create new automations more easily.

##### How to define an UnvoidInvoiceHook instance
- Define the class for hook, implementing the `UnvoidInvoiceHook`  interface. This hook is executed when a user tries to unvoid a voided invoice:

```
public class UnvoidInvoiceImpl implements UnvoidInvoiceHook {
  @Override
  public OBError preProcess(Invoice invoice) {
    System.out.println("This is an example of pre method hook");
    return new OBError();
  }

  @Override
  public OBError postProcess(Invoice invoice) {
    System.out.println("This is an example of post method hook");
    return new OBError();
  }
}
```

##### How to define a UndoCloseOrderHook instance
- Define the class for hook, implementing the UndoCloseOrderHook interface. This hook is executed when a user tries to undo a closed order:

```
public class UndoOrderImpl implements UndoCloseOrderHook {

  @Override
  public OBError preProcess(Order order) {
    System.out.println("This is an example of pre method hook");
    return new OBError();
  }

  @Override
  public OBError postProcess(Order order) {
    System.out.println("This is an example  of post method hook");
    return new OBError();
  }
}
```

#### PSD2 Integration

:octicons-package-16: Javapackage: `com.etendoerp.psd2.bank.integration`

:octicons-package-16: Javapackage: `com.etendorx.psd2.bank.integration`

The PSD2 (Payment Services Directive 2) security protocol and the payment service provider Redsys are used for the integration between financial accounts and banks. For this integration to be successful, it is crucial to understand certain key concepts and the role of specific components such as the .p12 file. This section provides an overview of PSD2, Redsys, and the role of a .p12 file in this integration.

!!!info
    For more information, visit [PSD2 Integration Developer Guide](https://docs.etendo.software/latest/financial-extensions-bundle/psd2-integration.md).
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Bank Integration PSD2
## Article Path: /Developer Guide/Etendo Classic/Bundles/Financial Extensions Bundle/Bank Integration PSD2
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/financial-extensions-bundle/psd2-integration
## Article Content: 
### Bank Integration PSD2 

:octicons-package-16: Javapackage: `com.etendoerp.psd2.bank.integration`

#### Overview

Etendo is able to integrate with several banking entities using the PSD2 (Payment Services Directive 2) protocol through the [Redsys](https://redsys.es/){target="_blank"} API, which acts as a service provider.
The integration is carried out only with **banks that support Redsys**, thus guaranteeing secure and efficient communication for obtaining financial transactions, balance inquiries and movements compatible with the PSD2 protocol.

!!!info
    For more information about banks supported by Redsys visit [Banks supported by Redsys](https://redsys.es/psd2.html){target="_blank"}.

!!!info
    To be able to include this functionality, the **Financial Extensions Bundle** must be installed. To do that, follow the instructions from the marketplace: [Financial Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=9876ABEF90CC4ABABFC399544AC14558){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Financial Extensions - Release notes](https://docs.etendo.software/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes/).

!!!warning
    It is important to note that before starting this configuration, the **QWAC** and **QSealC** certificates are required. Detailed instructions on how to obtain them can be found in the [Certificates](#certificates) section.


#### Dockerized Services

To begin the integration, it is essential to launch all the services related to this module. This includes **Etendo RX**, a service that provides a reactive development platform and implements a security layer using the standard **OAuth** authentication protocol required for synchronization. Additionally, the **PSD2 service**, which interacts with Redsys, needs to be started.

Within the PSD2 module and its dependencies, the required infrastructure is distributed using **Etendo Docker Manager**. In this case, it is necessary to define the following configuration variables in the `gradle.properties` file to launch the services:

```groovy title="gradle.properties"
docker_com.etendoerp.etendorx=true
docker_com.etendorx.psd2.bank.integration=true
```

!!!info
    For more information about how to handle Etendo Dockerizations visit [Docker Management](https://docs.etendo.software/latest/platform/dependency-manager.md). 

??? Note "Tomcat and PostgresSQL Dockerized (Optional)"
    It is also possible to run the dockerized [PostgreSQL service](https://docs.etendo.software/latest/platform/docker-management.md#postgres-database-service) and [Tomcat service](https://docs.etendo.software/latest/platform/tomcat-dockerized-service.md), **optionally** adding the [Platform Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=5AE4A287F2584210876230321FBEE614){target=_isblank} and the following configuration variables:

    ```groovy title="gradle.properties"
    docker_com.etendoerp.tomcat=true
    docker_com.etendoerp.docker_db=true
    ```

Then, to effectively run the services is necessary to **execute the command** in the terminal: 

```bash title="Terminal"
./gradlew resources.up
```

Here, all the services and their respective logs can be seen running using [LazyDocker tool](https://github.com/jesseduffield/lazydocker){target=_isblank}.

![Docker Services](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/financial/psd2-integration/tech-doc-psd2-integration-9.png)

#### Services Configuration

##### RX Config window
:material-menu: `Application` > `Etendo RX` > `RX Config`

As `System Administrator` role, in this window, it is necessary to add two entries, one for each service to be used. The following fields should be included:

- **Service Name**: The name of each service.
- **Service URL**: The internal URL of the Docker service.
- **Updatable Configs**: Check this checkbox.
- **Public URL**: Configure the publicly accessible URL for the service.

!!! info 
    Below are configuration examples. Replicate them, only personalizing the **Public URL** fields.

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/financial/psd2-integration/tech-doc-psd2-integration-0.png)

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/financial/psd2-integration/tech-doc-psd2-integration-13.png)

##### Get User Token 
:material-menu: `Application` > `General Setup` > `Security` > `User`

It is necessary to obtain and configure a user token that will later be used by the **PSD2 service** to modify authentication records within Etendo when interacting with Redsys.

1. As `Administrator` role, in the **User** window, select the user who has access to Banks and Banking Information, and this token will interact with the system under that user.
    
    !!! info
        It is recommended to associate the service with the administrator user.

    A new entry must be created in the **RX Service Access** tab, and the corresponding fields should be completed. 

    - In the **RX Services** field, select **psd2** option.
    - Define the **Default Role** and **Default Organization** fields based on the user's access level.

    ![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/financial/psd2-integration/tech-doc-psd2-integration-11.png)
    !!!note
        In this example, the **admin** user is used:

        - **Default Role**: F&B Group Admin
        - **Default Organization**: F&B International Group

        This configuration provides the highest level of access but can be customized according to specific requirements.

2. Next, to obtain the token, it is necessary to make a request from Postman or any REST client, using the following format:

    **Request:**

    - URL: `https://<PublicServerURL>/auth/api/authenticate`
    - Method: `GET`  
    - Body:

    ```json title="Body"
    {
        "username":"admin",
        "password":"admin",
        "service":"Psd2",
        "secret":"1234"
    }
    ```
    !!! info 
        Replace the credentials with those of the user configured in the previous step.

    **Response:**

    ```json
    {
        "token": "*********"
    }
    ```

    ![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/financial/psd2-integration/tech-doc-psd2-integration-12.png)

3. Once the token is obtained, it is necessary to add it to the `gradle.properties` file in the `psd2.token` variable so that it can be used by the PSD2 service.

    ```groovy title="gradle.properties"
    psd2.token= ******
    ```

##### Configuration of the PSD2 HUB service in Redsys

**Redsys** is a technology platform that provides payment services in Spain. It works with banks and other payment service providers to facilitate secure electronic transactions, including card payments and mobile payment solutions.

Redsys acts as an **intermediary in payment processing**, offering payment gateway services and transaction security. So, it is necessary to create an account in Redsys in order to integrate the Etendo with the bank provider. 

- To create an account in Redsys, login to the [Sandbox Registration Page](https://market.apis-i.redsys.es/psd2/xs2a/user/register){target="_blank"}.

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/financial/psd2-integration/tech-doc-psd2-integration-1.png)

- Create a new service under the title `<Client Name>-API` by entering in the [Application Registration Section](https://market.apis-i.redsys.es/psd2/xs2a/application){target="_blank"}.

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/financial/psd2-integration/tech-doc-psd2-integration-2.png)

- Choose a tittle to create the application: 

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/financial/psd2-integration/tech-doc-psd2-integration-3.png)

- After adding the required information, the application will be created:

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/financial/psd2-integration/tech-doc-psd2-integration-4.png)

- At the bottom of the same page the **Subscription** section is shown, click on **See Details** to subscribe to the HUB of your choice.

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/financial/psd2-integration/tech-doc-psd2-integration-5.png)


#### Certificates

When integrating **Etendo financial accounts with the bank** using the PSD2 security protocol and the Redsys payment service provider, understanding key components like the **.p12 file** is crucial. This document provides an overview of PSD2, Redsys, and the role of the .p12 file in this integration.

##### Utility of the .p12 File in PSD2 Integration with Redsys

A .p12 file (PKCS#12) is a **container file** that stores one or more X.509 certificates along with the associated private key. These files are essential for securing communications and authenticating the identity of the parties involved in a transaction.

Functions of the .p12 file:

- **Authentication**: Verifies the identity of the bank account user accessing account information or initiating payments.
  
- **Encryption**: Ensures the confidentiality of communications between Etendo, the bank, and Redsys, preventing unauthorized access to sensitive data.

- **Integrity**: Uses digital signatures to ensure that messages have not been altered during transmission.

To ensure security and compliance with PSD2 regulations, two types of certificates are required:

- **QSealC (Qualified Electronic Seal Certificate)**: Digitally signs messages to guarantee their integrity and authenticity.

- **QWAC (Qualified Website Authentication Certificate)**: Authenticates the server and secures communications.


!!!info
    These certificates are issued by authorized trust service providers, through the [URL eIDAS Dashboard](https://esignature.ec.europa.eu/efda/tl-browser/#/screen/home){target="_blank"}, you can locate the authorized certifying entities for the issuance of the EIDAS certificate.

!!!note
    In the case of obtaining these certificates in Spain, it is an **indispensable condition to be registered with the Bank of Spain**, the banking supervisor for these certificates. Contact a service provider for more information.


#### Generating the .p12 file
Once the **QSealC** and **QWAC** certificates have been obtained, the .p12 file must be generated, taking into account that the server certificate corresponds to the QWAC certificate and the private key corresponds to the QSealC certificate, copy into separate files, e.g. `cert.cer` and `key.pem` respectively.

There are two ways of generating the .p12 file: 

1.   Create the P12 file: Using the [KeyStore Explorer application](https://keystore-explorer.org/){target="_blank"}. This application provides an intuitive interface and facilitates the creation of the .p12 file.

2. It is also possible to perform this procedure using the [OpenSSL tool](https://openssl.org/){target="_blank"}.

    This is the specific example command:

    ``` bash title="Terminal"
    openssl pkcs12 -export -out keystore_tls.p12 -inkey key.pem -in cert.cer -name "keystore_tls" -passout pass:<keystore_password> -passin pass:<cert_password>
    ```

    !!!warning
        To protect the P12 file a password will be prompted. This password will be required each time the P12 file is used for authentication or digital signature.

    **OpenSSL command explained**

    - **export**: Indicates that a PKCS#12 file is being created.
    - **out `keystore_tls.p12`**: Specifies the name of the output PKCS#12 file.
    - **inkey `key.pem`**: Specifies the file containing the private key.
    - **in `cert.cer`**: Specifies the file containing the public certificate.
    - **name `keystore_tls`**: Assigns the alias `keystore_tls` to the certificate inside the PKCS#12 file.
    - **passout pass**: `keystore_password`: Specifies the keystore password. This sets the password to protect the PKCS#12 file.
    - **passin pass:`cert_password`**: Specifies the password for the private key, if the key is encrypted.


Once the `.p12` file is generated, it must be copied to the `/cert` folder in the root of the project to be used. For example, at `/opt/EtendoERP/cert/keystore_tls.p12`.


#### Provider Configurations

:material-menu: `Application` > `General Setup` > `Enterprise Model` > `Enterprise Module Management`

As `Administrator` role, apply the dataset **Bank Integration PSD2**, that includes the configuration needed for each supported provider offered by [Redsys](https://redsys.es/){target="_blank"}, 

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/financial/psd2-integration/tech-doc-psd2-integration-15.png)

!!! info
    For more information about how to apply a dataset visit the functional documentation about [Enterprise Module Management](https://docs.etendo.software/latest/basic-features/general-setup/enterprise-model.md#enterprise-module-management). 

Once the dataset is applied, all provider configurations will be added to the **Auth Provider** window.

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/financial/psd2-integration/tech-doc-psd2-integration-14.png)


##### Key Store Configuration

:material-menu: `Application` > `RX Service` > `oAuth Provider`

In the **oAuth Provider** window, access each provider to be used and add the certificate configuration.

The fields to be completed are:

- **Keystore Path**: Path to the `.p12` file, e.g. `/cert/keystore_tls.p12`.
- **Keystore Password**: Password of the `.p12` file.
- **Certificate Alias**: Alias of the certificate. e.g. `keystore_tls`
- **Certificate Password**: Password of the private key.

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/financial/psd2-integration/tech-doc-psd2-integration-8.png)

These parameters allow the integration to make use of the .p12 to secure communications and authenticate the identity of the transaction participants.

#### Restart Docker Services
Once all the configuration is complete, it is necessary to relaunched the Docker services so that the certificate changes, token, and other configurations are applied.

```bash title="Terminal"
./gradlew resources.up
```
Afterward, you can continue with the setup in the [Bank Integration PSD2 User Guide](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/psd2-bank-integration.md#setup).

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo BI Extensions Bundle
## Article Path: /Developer Guide/Etendo Classic/Bundles/Etendo BI Extensions Bundle
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/etendo-bi-extensions
## Article Content: 
#### Overview

In this section, the user can find technical information about the Etendo BI Extensions Bundle.

#### Etendo BI Connector

:octicons-package-16: Javapackage: `com.etendoerp.integration.powerbi`

In Etendo, it is possible to create base queries and to customize them when needed. This will provide information which can be used by Power BI.

For this process, a background setting is required in order to create CSV files that will be uploaded to a server. The files will use information from the pre-established base queries and their customazation in case there are any. 

The following documentation is about the steps to consider when configuring this funtionality to create the CSV files.

##### Requirements

To ensure proper functioning of the script, follow the steps below:

!!! note
    The following steps can only be used for Linux OS.

1. rsync must be installed in our system, since this is the tool we use to connect to the server.

    ``` bash title="Terminal"
    sudo apt install rsync
    ```

2. Make sure you have at least python3.7 or above installed on your system. You can verify the installation by running

    ``` bash title="Terminal"
    python3 --version
    ```

    If it is not installed, run 
    
    ``` bash title="Terminal"
    sudo apt update && sudo apt install python3
    ```
    And then verify that the version is correct.

3. It is highly likely that pip3 comes bundled with the installation of python3. Verify if it is installed by running 

    ``` bash title="Terminal"
    pip3 --version
    ```

    Then ensure to have an updated version of it

    ``` bash title="Terminal"
    sudo pip3 install --upgrade pip
    ```

    If it is not installed, run

    ``` bash title="Terminal"
    sudo apt install python3-pip
    ```

4. The user needs to install libpq-dev to ensure seamless communication and compatibility between our python script and the postgresql database.

    To install it, run 
        ``` bash title="Terminal"
        sudo apt install libpq-dev
        ```

5. The following libraries need to be installed using pip3 for them to work: psycopg2, pandas and requests. You can install them by running:

    ``` bash title="Terminal"
    sudo apt install python3-psycopg2
    ```

    ``` bash title="Terminal"
    pip3 install pandas
    ```

    ``` bash title="Terminal"
    pip3 install requests
    ```

##### Etendo BI Connector Module Configuration

First, make the proper configurations from the **Webhooks window**. This will later allow BI Logs to be sent to the **BI Logs Monitor window**.

###### Webhooks window

:material-menu: `Application` > `General Setup` > `WebHook Events` > `Webhooks`

From the Webhooks window, it is necessary to create a new record and complete the required fields as follows:

- **Module**: Base Queries for EtendoBI 

- **Name**: EtendoBI Logger

- **Description**: Fill EtendoBI Log window

- **Event Class**: Java

- **Java\_Class**: `com.etendoerp.integration.powerbi.processes.FillLogWindow`

!!! info
    It is highly recommended to have just one Webhook for this module to work properly, as its functionality will not vary. That’s why, it is better to use the organization \* in order to cover all child organizations.


In the **Params tab**, four records must be created under the names:

- **client**
   
- **description**

- **logtype**

- **organization**

- **rule**

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/etendo-bi/etendo-bi-connector-0.png)


!!! info
    For more information about Webhooks, visit [Webhooks Events](https://docs.etendo.software/latest/bundles/platform/etendo-webhooks.md).

###### User API Token window 

:material-menu: `Application` > `General Setup` > `WebHook Events` > `User API Token`

Then, make the proper configurations from the **User API Token window**. Here, it is necessary to grant access to a **user role**, so a token in this window needs to be created.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/etendo-bi/etendo-bi-connector-1.png)

Then, go back to the **Webhooks window**, and create a record in the **Access tab** in order to add the previously generated token. 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/etendo-bi/etendo-bi-connector-2.png)


!!! success 
    This way the Webhook is configured. Now, it is necessary to configure the EtendoBI Connector module.


###### BI Connection Window

:material-menu: `Application` > `Master Data Management` > `Analysis` > `BI Connection`

In the **BI Connection window**, It is necessary to create a record to specify the path to the CSVs creation script and the Webhook to use. If the **EtendoBI bundle** is installed and the script path was not changed, the user should use the default value of ‘repository path’ field. Otherwise, the corresponding path should be specified. 

!!! info
    It is important to note that the **Repository path** will search for the corresponding path INSIDE the WebContent folder of the project. 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/etendo-bi/etendo-bi-connector-3.png)


In the **Data Destination** tab, the file name of the script needs to be specified. 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/etendo-bi/etendo-bi-connector-4.png)

Finally, in the **Execution variables** tab, some records must be created being the ‘Variable’ field:

- **ip**: ip of the server where the files will be uploaded **(mandatory)**

- **client**: the name of our client **(mandatory)**

- **user**: the user used to connect to the server. **(mandatory)**

- **application_url**: url of our application. e.g. "https://my-domain.cloud/etendo" **(mandatory)**

- **port**: port of the server where the user is  connecting to **(default: 22)** 

- **path**: path of the server where the files will be sent **(default: /)**

- **private-key-path**: path of the private key used for the connection to the server

- **bbdd\_user**: username of a read only user to access the database

- **bbdd\_password**: password of the read only user

- **csv_separator**: delimiter to use in the final csv files **(default: |)**

**private-key-path** is the path of the private key used for the connection to the server. If this variable is not specified, the script will try to connect without specifying a private key.
In the **bbdd\_user** and **bbdd\_password** variables, enter the **username** and **password** of a user with read-only permissions to the database. If either of these two variables is not found, the process will use the credentials of the database superuser.

!!! info
    However, it is **highly recommended** to use a user with read only permissions as it is a great security measure.


As an example, let’s use the following values:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/etendo-bi/etendo-bi-connector-5.png)

!!! info
    It is important to respect the specified names for the “Variable” field.


Also, it is important to note that the script is going to create a folder named as the value of the **“Client” variable**, and it will contain folders for each organization that executes the background process. Therefore, if there are **two BI Connections** with the same **“Client” value**, the last execution of the process will overwrite the folder.  
  
 

For example, let's say there is  Organization A, which has Organizations B and C as its child organizations. If the user needs to have the same configuration for both, we can create a BI Connection using Organization A and set up two background processes that run the "EtendoBI Process," one for Organization B and the other for Organization C.

When the script is executed, a folder will be created with the value of the "Client" variable in the BI Connection window as its name. Within that folder, subfolders will be created for each organization (in this case, A\_logs and A\_output for Organization A, and B\_logs and B\_output for Organization B).

###### Enterprise Module Management window

:material-menu: `Application` > `General Setup` > `Enterprise Model` > `Enterprise Module Management`

To load the Etendo base queries, go to the **Enterprise Module Management window**, and select Base Queries for EtendoBI and then click the **OK button**.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/etendo-bi/etendo-bi-connector-6.png)

###### BI Query window 

:material-menu: `Application` > `Master Data Management` > `Analysis` > `BI Query`

After that, Etendo base queries should be successfully loaded in the **BI Query window**.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/etendo-bi/etendo-bi-connector-7.png)

There are several points to consider when handling queries in this module.

- **Primary Key Requirement**: Every base query must have its primary key as the first column. This is crucial  since in the script it is assumed that the first column is the identifier. 

!!! warning
    A failure to adhere to this can result in incorrect output, duplicated records, and an immense number of rows.

- **Client column on base query**: Every base query must include `ad_client_id` column, with the alias “ClientID”

- **Organization column on base query**: Every base query must include `ad_org_id` column, with the alias “OrgID”

- **Custom Query Customization**: The customization of the query must also include the primary key (which is the same as the base query since customization is performed on the same table) with the SAME ALIAS as the base query. 

!!! warning
    Failing to respect this can lead to improper mapping between the results of the base query and its customization, resulting in incorrect output.

Let’s see an example of a correct base query and customization.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/etendo-bi/etendo-bi-connector-8.png)

In this case, as a base query there are three columns. In its customization, there is a new column “name”. 

!!! info
    Note that there are three mandatory columns in the base query, with the correct alias for column `ad_client_id` and `ad_org_id`. It is important to make sure that **“ClientID”** and **“OrgID”** aliases are being set WITHOUT double quotes. Also, **there should not be** more than one space between the “as” keyword. 

    ``` sql
        … ad_client_id as “ClientID”, …    -- INCORRECT
        … ad_client_id as ClientID, …      -- CORRECT
    ```

In the customization query, despite the requirement to have the primary key with the same alias as the base query, it is not necessary for it to be the first column. In this case, if instead of having:

``` sql
SELECT m_warehouse_id as WarehouseID, name as "Warehouse Name" FROM m_warehouse
```

We have:

``` sql
SELECT name as "Warehouse Name", m_warehouse_id as WarehouseID FROM m_warehouse
```

The result will be exactly the same.

The script executes the base query, and then merges the customization, using both primary keys for mapping the rows.

If a base query has a **customization**, the script creates **three different CSVs**.

- A CSV file that contains the **result of the base query**. This CSV file has the prefix `EBI_` if it is an Etendo base query. If it is a client base query, it has the **first three letters** of the value of the “Client” variable that was set earlier as a prefix.

- A CSV file with the prefix `BASE_`, which contains the **columns from the base query**, but if the customization overrides any of these values, they will be overwritten with the values from the customization. In this case, the `BASE_` CSV file will be the same as the base query since the **customization does not override** any values from the base query columns.

- A CSV file with the prefix `FULL_`, which includes b**oth the columns from the base query and any additional columns added in the customization**. In the given example, the `FULL_` CSV file will contain the additional column “Warehouse Name”. 

Later, at the end of the configuration,  this example query will be executed to analyze the **generated CSV files**.

!!! info
    It is important to note that there should be only one customization per base query. It should also be made clear that it is not possible to add constraints to the customization to remove rows from the base query. Instead, the customization allows adding or overwriting columns in the original query, using the primary key to map the records.


Base queries must all contain the `ad_client_id` and `ad_org_id` columns, with alias **“ClientID”** and **“OrgID”** (case insensitive). 
!!! warning
    If a query does not have these columns with their alias, it will produce an error and be ignored.

###### Process Request window

:material-menu: `Application` > `General Setup` > `Process Scheduling` > `Process Request`

Once the query configuration is done, go to the **Process Request window**, create a new record, select the **EtendoBI Process** from the process field and schedule it.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/etendo-bi/etendo-bi-connector-9.png)

The scope of the data collection performed by the queries is based on the **organization** that configured the **background process**. In other words, all the obtained data is  filtered by the **client** and the **organization** that configured the **background process**, and **NOT** by the organization used in the **BI Connection window**. If the organization does not have a configuration in the **BI Connection**, Etendo will search for the **configuration** in one of its **parent organizations**, but the data scope will remain the same (itself and its child organizations).

!!! info
    If the organization that configured the background process does not have a BI Connection and there is no BI Connection found for its parent organizations either, the **process will not be executed**. 


The process will never search for a BI Connection in the child organizations of the one which was set on the background process.


![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/etendo-bi/etendo-bi-connector-10.png)

In the **Process Monitor** tab, the status of **Success** is shown in the new record that appears when the process is executed. It is good to know that this process executes our python script, so if there were no issues up until the execution of the python script, it will return to success status regardless of whether the python script fails.

###### BI Logs Monitor window 

:material-menu: `Application` > `Master Data Management` > `Analysis` > `BI Logs Monitor`

The execution process can be checked in the **BI Logs Monitor** window.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/etendo-bi/etendo-bi-connector-11.png)

In this example image, the information about the script execution can be seen.

If no records in the **Logs window** were created after the execution of the script, it is possible that the error occurred on the **synchronization** of the files with the server. The user is able to check this by looking at the **rsync log files** created in the **filesystem**. 


After the execution of the process, two new directories should be created in the filesystem. One will contain the logs files, one for the rsync execution that will contain information about the file upload to the server; another file called syncScript.log.{datetime}, that will contain information about the script execution (most of this information can be seen in the Logs Monitor window, but if for any reason the window cannot receive this information, it should be able to be seen using this .log file).

In this example, in the path where the script is allocated, a new directory named “Etendo” should be created. Inside it, there should be two folders for the organization that set the background process (F&B US West Coast).

`drwxrwxr-x 1 <user> <group> 9,1K jun 8 16:52 ETPBIC_SyncScript.py`

`drwxrwxr-x 4 <user> <group> 4,0K jun 8 17:39 Etendo/`

Inside the Etendo/ folder, we have:

`drwxrwxr-x 2 <user> <group> 4,0K jun 8 16:54 F+B_US_West_Coast_logs/`

`drwxrwxr-x 2 <user> <group> 4,0K jun 8 16:54 F+B_US_West_Coast_output/`


The output directory, will contain all the CSVs that should have been uploaded to the server.

!!! info
    Remember that the main folder is created using the prefix of the “Client” variable that is set on BI Connection window. If two connections have the same value for “Client” variable, these directories will be overwritten.


This is the content of `Ete_Example.csv` and `BASE_Example.csv` files: 

!!! info
    Remember that since any column is not being overridden, these files are the same. 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/etendo-bi/etendo-bi-connector-12.png)

On the other hand, this is the content of `FULL_Example.csv`:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/bundles/etendo-bi/etendo-bi-connector-13.png)

!!! warning
    Make sure to have the corresponding permissions to connect to Files, since an incorrect configuration can lead to an error.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: ✨ Getting Started
## Article Path: /Developer Guide/Etendo RX/✨ Getting Started
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-rx/getting-started
## Article Content: 
#### Overview

This guide will help you set up Etendo, including both the Etendo Classic functionalities and Etendo RX, our reactive platform capable of executing microservices with database interaction and asynchronous actions.

#### Requirements

1. Install Etendo Classic. For this, follow the [Etendo Classic installation guide](https://docs.etendo.software/latest/getting-started/installation.md).
2. Install the [Platform Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=5AE4A287F2584210876230321FBEE614){target="_blank"}.
3. This project depends on the following tools:
    - [Docker](https://docs.docker.com/get-docker/){target="_blank"}: version `26.0.0` or higher.
    - [Docker Compose](https://docs.docker.com/compose/install/){target="_blank"}: version `2.26.0` or higher.


#### Dockerized Services

In the platform bundle, you can find the Dockerized Services module, which provides the necessary architecture to distribute infrastructure. In this case, in this bundle, the module Etendo RX is also included and, to launch the Services distributed in it, a certain configuration is needed. In the `gradle.properties` file, add the following variable:

``` groovy title="gradle.properties"
docker_com.etendoerp.etendorx=true
```

!!!info
    For more information about how to handle Etendo Dockerizations, visit [Docker Management](https://docs.etendo.software/latest/etendo-classic/bundles/platform/docker-management.md). 

??? Note "Tomcat and PostgresSQL Dockerized (Optional)"
    It is also possible to run the dockerized [PostgreSQL service](https://docs.etendo.software/latest/platform/docker-management.md#postgres-database-service) and [Tomcat service](https://docs.etendo.software/latest/platform/tomcat-dockerized-service.md), **optionally** adding the [Platform Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=5AE4A287F2584210876230321FBEE614){target=_isblank} and the following configuration variables:

    ```groovy title="gradle.properties"
    docker_com.etendoerp.tomcat=true
    docker_com.etendoerp.docker_db=true
    ```

    If you want to debug Tomcat locally with IntelliJ, visit [Tomcat Dockerized Service](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/tomcat-dockerized-service.md).

Then, to effectively run the services, it is necessary to **execute the command** in the terminal: 

```bash title="Terminal"
./gradlew resources.up
```

Here, all the services and their respective logs can be seen running using [lazydocker](https://github.com/jesseduffield/lazydocker#installation){target="_blank"} or [Docker Desktop](https://www.docker.com/products/docker-desktop/){target="_blank"} for a simple and fast container management. 

![Docker Services](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/getting-started/rx-services.png)

By default, the following services should be up and running:

- Config
- Auth
- Edge
- Das

!!! success
    You have successfully set up the Etendo RX services. For more information, visit [Projections and Mappings](./concepts/projections.md) and [Creating a New Microservice](https://docs.etendo.software/latest/developer-guide/etendo-rx/tutorials/creating-a-new-microservice.md) page in the developer guide section.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Config Server
## Article Path: /Developer Guide/Etendo RX/Concepts/Config Server
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-rx/concepts/config-server
## Article Content: 
#### Etendo RX Config Server

The Etendo RX Config Server is a crucial component in a distributed system, providing both server-side and client-side support for managing externalized configurations. This centralized solution allows for efficient and consistent management of application properties across various environments, from development to production. Seamlessly integrating with the Spring Environment and PropertySource abstractions, the Config Server is not only compatible with RX applications but also adaptable to a wide range of applications in different programming languages. This flexibility ensures that as applications progress through deployment stages, they consistently receive the necessary configurations to function optimally.

!!!info
      For detailed guidance on advanced usage, visit the [Spring Cloud Config Documentation](https://docs.spring.io/spring-cloud-config/docs/current/reference/html/){target="\_blank"}.

##### Default configuration

The Config Server, by default, sources its configuration from the `./src-rc/rxconfig` directory. For those utilizing Etendo via source code, the configurations are located in the `./rxconfig` directory. To set up the basic configuration, run the command `./gradlew setup`. This will create the following files in the specified directory:

* `application.yaml`
* `das.yaml`
* `auth.yaml`
* `edge.yaml`

Each of these YAML files is structured to include the necessary properties for various applications.

##### YAML structure

YAML files are used to define properties required by different applications in a simple, readable format. The syntax of YAML is based on key-value pairs, where indentation (spaces, not tabs) is used to show hierarchy. Here's an example:

```yaml title="YAML example"
classic:
  url: http://localhost:8080/etendo

das:
  url: http://localhost:8092
  label: Example text
```

In this example, properties like `classic.url`, `das.url`, and `das.label` are defined. Applications will refer to these properties using their respective keys.

##### Properties access

Applications within Etendo RX, such as das, auth, edge, etc., each have a dedicated YAML file for their specific configurations. The application.yaml file is reserved for configurations that are shared across all services. For instance, by setting `das.url` in `application.yaml`, all applications can access this data. Properties defined in a service-specific file are exclusive to that service.

##### Running config service

To launch the Config Service, execute the command `./gradlew rx:rx` (or `./gradlew rx` for source code installations). This action enables each service to access its configuration. For example, accessing `http://localhost:8888/das/default` yields a JSON response like the following:

For example, if you access `http://localhost:8888/das/default`
You will have something similar to:

```json title="Query response"
{
   "name":"das",
   "profiles":[
      "default"
   ],
   "label":null,
   "version":null,
   "state":null,
   "propertySources":[
      {
         "name":"file:<...>/rxconfig/das.yaml",
         "source":{
            "server.port":8092,
            "spring.datasource.url":"jdbc:postgresql://localhost:5432/etendo",
            "spring.datasource.username":"tad",
            "spring.datasource.password":"tad",
            "spring.jackson.serialization.FAIL_ON_EMPTY_BEANS":false,
         }
      },
      {
         "name":"file:/<...>/rxconfig/application.yaml",
         "source":{
            "classic.url":"http://localhost:8080/etendo",
            "das.url":"http://localhost:8092",
            "management.endpoints.web.exposure.include":"*",
            "spring.output.ansi.enabled":"ALWAYS",
            "public-key":"<...>"
         }
      }
   ]
}
```

This response indicates the configuration for the das service. The propertySources key lists the properties in priority order; if a property is defined in multiple files, the first definition is used.

##### How to config a property

To modify a property, locate and edit the corresponding service configuration file. The Config Server dynamically updates to reflect the latest file content. However, client services load configurations at startup. Therefore, to apply new configurations, stop the running service using the rx command and then restart it.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Edge Server
## Article Path: /Developer Guide/Etendo RX/Concepts/Edge Server
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-rx/concepts/edge-server
## Article Content: 
#### Overview of Etendo RX Edge Service

The Etendo RX Edge Service is designed to simplify API routing and provide essential services like security, monitoring, metrics, and resilience. It is a versatile tool that integrates seamlessly into your API infrastructure.

##### Key Features

- Spring Framework Base: Utilizes the robustness of Spring Framework and Spring Boot.
- Flexible Route Matching: Capable of matching routes based on various request attributes.
- Customizable Predicates and Filters: Offers the ability to tailor predicates and filters for specific routes.
- User-Friendly Configuration: Predicates and filters are straightforward to configure.
- Path Rewriting Capability: Allows for the modification of request paths as needed.

!!!info
    For more advanced configurations and features, visit the [Spring Cloud Gateway Documentation](https://docs.spring.io/spring-cloud-gateway/reference/index.html){target="\_blank"}.

##### Operational Dynamics

The Edge Service functions as a gateway, handling client requests. When a request is made to the Edge Server Gateway, the Gateway Handler Mapping assesses whether the request corresponds to an established route. If it does, the Gateway Web Handler processes the request, applying a set of route-specific filters.

##### Running the Service

To launch the Edge Service, execute `./gradlew rx:rx` (or `./gradlew :rx` for installations from the source code). The service can be accessed at its default URL: `http://localhost:8096`.

##### Configuration Guidelines

Configuration adjustments can be made in the `edge.yaml` file. For further information on configuration settings, please refer to the [Config Server Documentation](config-server.md) in the rxconfig directory.

The following is a basic overview of the default edge configuration:

```yaml title="edge.yaml"
### Global settings
etendorx:
  auth:
    url: http://localhost:8094
classic:
  url: http://localhost:8080
subapp:
  url: http://localhost:3000

### Spring Cloud Gateway routing configurations
spring:
  cloud:
    gateway:
      routes:
        # Login Authentication Route
        - id: login_auth_route
          uri: ${etendorx.auth.url}
          predicates:
            - Method=GET,POST
            - Path=/login
          filters:
            - RewritePath=/login, /api/authenticate

        # Classic Application Path Route
        - id: classic_path_route
          uri: ${classic.url}
          predicates:
            - Method=GET, POST, DELETE, HEAD, PATCH
            - Path=/etendo/**
          filters:
            - RewritePath=/etendo/(?<segment>.*), /etendo/$\{segment}
            - RemoveResponseHeader=Location

        # DAS Path Route
        - id: das_path_route
          uri: ${das.url}
          predicates:
            - Method=GET, POST, DELETE, HEAD, PATCH
            - Path=/das/**
          filters:
            - RewritePath=/das/(?<segment>.*), /$\{segment}
```

##### Understanding the Configuration

1. Global Variables: Define URLs for different services like authentication, classic app, and sub-applications.
2. Routing Configurations:
   - Login Authentication Route: Routes `/login` requests to the authentication service.
   - Classic Application Path Route: Handles various HTTP methods for paths starting with `/etendo/`.
   - DAS Path Route: Manages requests to the DAS service with paths starting with `/das/`.

##### Adding Custom Services

To integrate a new service, add a routing configuration in `spring.cloud.gateway.routes`. Follow the existing structure:

```yaml title="YAML example"
### Example of adding a custom service route
- id: <<custom_service_identifier>>
  uri: <<Internal_url_accessible_by_edge_service>>
  predicates:
    - Method=<<HTTP_Methods>>
    - Path=<<Matching_Path>>
  filters:
    - RewritePath=/<<path_segment_to_remove>>/(?<segment>.*), /$\{segment}
```

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Projections and Mappings
## Article Path: /Developer Guide/Etendo RX/Concepts/Projections and Mappings
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-rx/concepts/projections
## Article Content: 
### Projections and Mappings

#### Overview

When using Spring Data JPA to implement the persistence layer, the repository typically returns one or more instances of the root class. However, more often than not, we do not need all the properties of the returned objects.

In such cases, we might want to retrieve data as objects of customized types. These types reflect partial views of the root class, containing only the necessary properties. This is where projections are useful.

#### Projections and Mappings Window

:material-menu: `Application` > `Etendo RX` > `Projections and Mappings`

A **projection** is a set of specific fields from an entity or combined fields from multiple entities. Projections are useful when we need to retrieve only a subset of data, as it reduces the amount of data we need to retrieve from the database, leading to improved performance.

This window allows the creation of data reading and writing endpoints in Etendo, using the DAS service. This service, based on this window configurations, dinamically generates the endpoints when launched.

To create a new projection in Etendo, it is necessary to complete the fields in the header of the **Projections and Mappings** window.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/concepts/projections/projection-and-mappings.png)

- Organization: Organizational entity within client.
- Name: It describes the name of the projection. The maximum amount of characters for this field is 10.
- Module: It indicates the module the element forms part of. This is the module in which the configuration is exported.
- Description: Description of the projection.
- Active: A check to indicate whether this projection is available or disabled.

##### Projected Entities Tab

In this tab, the entities to be projected can be defined. They can have two types of projections: Read and Write. This means that, when interacting with an external system, it is possible to read the information in the Etendo Classic database to expose it to the other system. The other option is to write information into the Etendo Classic database, that is, to extract external system information to use it in Etendo.

When referring to an entity to project, this entity is related to a specific table.

!!!warning
    Remember,  it is always necessary to create both records, a write type one and read type one, so the generated endpoints work properly.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/concepts/projections/projected-entities.png)

Fields to note:

- Organization: The corresponding organization of the entity
- Name: This field is autocompleted according to the options selected in the Table and Mapping Type fields, adding _Read_ or _Write_ accordingly.
- Table: It is the identifier that connects the Etendo entity to project with the database table, responsible to store the entity information.
- Mapping Type: In this case, there are two options: Etendo to external system and External system to Etendo. In the case of the Read type, the option to select is Etendo to external system. In the case of the Write type, the option to select is External system to Etendo.
- Is Rest Endpoint: Checkbox to allow the service to generate the endpoint or not.
    
    !!!info
        This box should not be checked, for example, when it is not necessary to expose a subentity endpoint.
- External_Name: parameter to call the API. It must be unique but it is possible to have more than one name for each entity. By default, it is autogenerated with the entity name, but in case of generating more than one, they should have different names.
- Active: A check to indicate whether this record is available or not.


###### Create Projection Fields Button

With this button, a pop up window is shown where you can find a list of all the fields to project and select the necessary ones. This process does not include List and Identity type projections.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/concepts/projections/create-projections-fields.png)

!!!info
    The mandatory fields to project can be filtered with the _Is mandatory_ column.

###### Entity Field Subtab

In this subtab, each entity field to be included in the projection can be defined by the developer.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/concepts/projections/entity-field.png)

=== "Read Type"

    Fields to note:

    - Module: It indicates the module the element forms part of. This is the module in which the configuration is exported.
    - Organization: The corresponding organization of the entity
    - Property: This field has 3 types of options:
        - `_identifier`: This option allows projecting the field/s defined as identifier in the Tables and Columns window. This option always projects a string.
        - Standard: In this case, it is possible to select all the standard fields from the projected entity. Ex: string, number, date types, etc. Also, it is possible to navigate through the different entities. Ex: product.name, businessPartner.name, etc
        - `*List`: The properties that finish in "List", allow projecting a list of related entities. These lists are autogenerated from the columns with the Link to Parent Column checkbox selected. Ex: the property `OrderLineList` of the Order entity is generated since the `C_Order_ID` column from the `C_OrderLine` table is related with `C_Order` table.
    - Name: Output JSON Key. It must be unique but it is possible to have more than one name for each property. By default, it is autogenerated with the property name, but in case of generating more than one, they should have different names.
    - Identifies Record Univocally: Checkbox to use this record as an identifier. If no field has this check selected, the database ID of the table will be used.

    Mapping Configuration

    - Field Mapping: 
      - Direct Mapping: each property is shown as it is.
      - Java Mapping: It is a customizable mapping and can be configured through the Java Mappings window. If this option is chosen, it allows you to define more complex mappings or implement a specific logic The result of the mapping will be Json type. 
      - Entity Mapping: this option is used when it is necessary to relate two different projections. In this case, the Related Projection Entity field is enabled to select the projected entity. In case of projecting a list of elements, the selected entity is assigned to each item of the list.
      - Constant Mapping: If you choose this option, the constant value defined in the corresponding field is projected.
    - Related Projection Entity: Extra field shown when Entity Mapping option above is selected. Here, you can select the property to be projected for each entity in the mapping.
    - Constant Value: Only available when Constant Mapping is selected as the Mapping type. Here, you define the constant value to be used in the mapping.
    - Related Projection Identifiers: Extra field shown when Entity Mapping option above is selected. It is an information field to revise the identifier of the mapped entity.
    - Active: A check to indicate whether this record is available or disabled.

=== "Write Type"

    Fields to note:

    - Module: It indicates the module the element forms part of. This is the module in which the configuration is exported.
    - Organization: The corresponding organization of the entity
    - Property: This field has 3 types of options:
        - `_identifier`: This option allows projecting the field/s defined as identifier in the Tables and Columns window. This option always projects a string.
        - Standard: In this case, it is possible to select all the standard fields from the projected entity. Ex: string, number, date types, etc. Also, it is possible to navigate through the different entities. Ex: product.name, businessPartner.name, etc
        - `*List`: The properties that finish in "List", allow projecting a list of related entities. These lists are autogenerated from the columns with the Link to Parent Column checkbox selected. Ex: the property `OrderLineList` of the Order entity is generated since the `C_Order_ID` column from the `C_OrderLine` table is related with `C_Order` table.
    - Name: Output JSON Key. It must be unique but it is possible to have more than one name for each property. By default, it is autogenerated with the property name, but in case of generating more than one, they should have different names.
    - Is Mandatory: Checkbox only available for "Write" projections. This indicates that the projected property is mandatory when a new item is created.
    - Identifies Record Univocally: Checkbox to use this record as an identifier. If no field has this check selected, the database ID will be used.

    Mapping Configuration

    - Field Mapping: 
      - Direct Mapping: each property is shown as it is.
      - Java Mapping: It is a customizable mapping and can be configured through the Java Mappings window. If this option is chosen, it allows you to define more complex mappings or implement a specific logic The result of the mapping will be Json type. 
      - Entity Mapping: this option is used when it is necessary to relate two different projections. In this case, the Related Projection Entity field is enabled to select the projected entity. In case of projecting a list of elements, the selected entity is assigned to each item of the list.
      - Constant Mapping: If you choose this option, the constant value defined in the corresponding field is projected.
    - Create related: It enables the creation of related elements from a selected entity. Only available for Write type mappings.
    - Related Projection Entity: Extra field shown when Entity Mapping option above is selected. Here, you can select the property to be projected for each entity in the mapping.
    - Jsonpath: language to extract properties from Json objects. For more information, visit [Json](https://en.wikipedia.org/wiki/JSONPath){target="_blank"}.
    - Constant Value: Only available when Constant Mapping is selected as the Mapping type. Here, you define the constant value to be used in the mapping.
    - Related Projection Identifiers: Extra field shown when Entity Mapping option above is selected. It is an information field to revise the identifier of the mapped entity.
    - Active: A check to indicate whether this record is available or disabled.

    **Map Fields to Child**

    This subtab is shown if the Create related check in the Entity Field subtab is selected. It allows the possibility to provide information from the parent fields to the child records. The records created in this subtab are useful to connect the projected entity fields to properties that belong to parent entities.

    Fields to note:

    - Module: It indicates the module the element forms part of. This is the module in which the configuration is exported.
    - Organization: The corresponding organization of the entity.
    - Related Field: Shows field options of the related projected entity already defined.
    - Property: If it is necessary to create a new field, this is the property to use to create it.
    - Active: A check to indicate whether this record is available or disabled.

    **Example:**

 	![](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/concepts/projections/map-fields-to-child.png)
    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/concepts/projections/map-fields-to-child1.png)

    In this example, when writing a projection on the C_OrderLine table and projecting the orderLineTaxList (with the list of applicable taxes for each line), it is necessary to first select the Create Related checkbox. This option will create the related elements in the input list. However, the tax lines require a mandatory reference to the header, specifically the Order.
    
    For this, the information must be transmitted from the source entity to the mapped entity. This can be done by adding a new record in the Map Fields to Child tab. In the Related Field, select the child entity field corresponding to the projected entity (e.g., the Sales Order field in the OrderLineTax entity). In the Property field, select the field from the source entity (e.g., Sales Order from OrderLine entity).
    
    This setup ensures that when new order lines are created, the related taxes reference the original order. This configuration is only necessary if the mapped column does not have the Link to Parent Column checkbox selected. In this example, this refers to the Sales Order column in the C_OrderLineTax table.
	

#### Tables and Columns Window

:material-menu: `Application` > `Application Dictionary` > `Tables and Columns`

In this window, it is possible to define table associated searches. These are custom filters with HQL queries. 

This window also allows the creation of search endpoints, using the DAS service. This service, based on this window configurations, dinamically generates the endpoints when launched.

##### Repository Tab

In Spring Data, a repository is an abstraction that provides the operations relative to a domain class to interact with a data store.
To create the repository for our purpose, we need to go to Tables and Columns, select a table and, in the *Repository* tab, create a new record defining the module in development where the configurations are exported. 

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/concepts/projections/repository-tab.png)

###### Search Subtab

Then, we can define searches to get filtered data from the selected table. 

<figure markdown="span">
 	![new-search.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/tutorial/new-search.png)
	<figcaption>Search example in the C_Order table</figcaption>
</figure>


Fields to note:

- Method Name: the name of the search which is used in the endpoint generation.
- Query: HQL query to filter the table elements.

####### Search Parameter Subtab

In this subtab, it is possible to define parameters to use in the search.

<figure markdown="span">
 	![new-search-parameter.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/tutorial/new-search-parameter.png)
	<figcaption>Parameter example used in the previous section search</figcaption>
</figure>

Fields to note:

- Name: Parameter name
- Type: Parameter type. It is a dropdown with the available base types.

#### Constant Values Window

:material-menu: `Application` > `Etendo RX` > `Constant Values`

In this window, it is possible to define constant values to be used for [entity fields](#entity-field-subtab) in which the information must not be modified. This configuration is done in the [Projections and Mappings](#projections-and-mappings) window.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/concepts/projections/constantvalues.png)

Fields to note:

- Module: It indicates the module the value forms part of. This is the module in which the configuration is exported.
- Organization: Organizational entity within client.
- Name: It describes the identifier name of the value.
- Constant Value: It describes the value to set, for example, an entity ID.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Creating a New Microservice
## Article Path: /Developer Guide/Etendo RX/Tutorials/Creating a New Microservice
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-rx/tutorials/creating-a-new-microservice
## Article Content: 
#### Overview

This section provides a step-by-step guide for working with Etendo RX, which involves creating a new module with RX capabilities and building a Spring Boot project to consume orders making use of projections, repository and other JPA resources that we will create on our Etendo Classic.

------------------------------------------------------------------

#### Building a New Module for RX Capabilities

!!!note
    Make sure to complete the [Getting Started section in the developer guide](https://docs.etendo.software/latest/developer-guide/etendo-rx/getting-started.md) to set up the Etendo Platform.


##### Accessing as Admin User

After setting the local environment up, as described in the [**install etendo development environment**](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/install-etendo-development-environment.md), we will need to log in to the system with administration permissions to create the new module, projections, repository, etc.

Log in to your account as an administrator. The default login credentials for this administrative account are:

- Username: `admin`
- Password: `admin`

Once you are logged in, switch your role to *System Administrator*, as the image shows:

  ![switch-admin.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/tutorial/switch-admin.png)


The *System Administrator* role allows us to access some windows and permission to create and manipulate the system to fulfill our needs.

##### Creating a New Module

Now we will create a new module. It is a self-contained unit of code that performs a specific function and, in our case, it contains all the resources needed in this guide.
To create a new module, go to the Module window, and add a new record providing the following information:

| Parameter       | Value                                 |
| --------------- | ------------------------------------- |
| Java Package    |`com.tutorial.classictutorial`         |
| Name            |`Tutorial`                             |
| Description     |`Module created for tutorial purposes` |
| Version         |`1.0.0`                                |
| Is RX           |`True`                                 |
| Rx Java Package |`com.tutorial.rxtutorial`              |


It should look like this:

  ![new-module.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/tutorial/new-module.png)


With our new module created, we will start working with *Projections*.

------------------------------------------------------------------

#### Projection

When using Spring Data JPA to implement the persistence layer, the repository typically returns one or more instances of the root class. However, more often than not, we do not need all the properties of the returned objects.

In such cases, we might want to retrieve data as objects of customized types. These types reflect partial views of the root class, containing only the necessary properties. This is where projections come in handy.

Start by opening *Projections* windows and creating a new projection with the following properties:

| Field       | Value                                 |
| ----------- | ------------------------------------- |
| Module      |`tutorial - 1.0.0 - English (USA)`     |
| Name        |`rxtutorial`                           |
| Description |`Projections needed for the tutorial`  |


  ![new-projection.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/tutorial/new-projection.png)

##### Adding the projection to a table

As we create the projection, now we need to assign it to a table where we want to extract data.
For this, open the *Tables and Columns* window and look for the *Order* table (as mentioned in the introduction, we want to consume orders).

##### Adding a Projection

Next, navigate to the *Projections* tab and add a new projection with the following value:

| Field      | Value                                          |
| ---------- | ---------------------------------------------- |
| Projection |`rxtutorial - tutorial - 1.0.0 - English (USA)` |


  ![assign-projection.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/tutorial/assign-projection.png)

##### Adding Entity Fields

When a projection is created, we need to define which fields we want to retrieve.
In our case, we will need the record ID, Business Partner name, Document No, Document Type name, and the Grand total.
Under the Projection tab navigate to the *Entity Field* tab and add the following fields:

|  Field Name         |  Property             |
| ------------------- | --------------------- |
| id                  |`id`                   |
| businessPartnerName |`businessPartner.name` |
| documentNo          |`documentNo`           |
| documentTypeName    |`documentType.name`    |
| grandTotalAmount    |`grandTotalAmount`     |

!!!note
    The *Property* field of this tab is handled with an Entity Mapping, this is like a Hibernate property.
    So, you can navigate the entities related from here. E.g. To get the Business Partner name, you can have it by accessing the entity *businessPartner* and then, adding the field that you want to filter, *name* in this case.


  ![new-entity-fields.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/tutorial/new-entity-fields.png)

------------------------------------------------------------------

#### Repository

In Spring Data, a repository is an abstraction that provides the operations relative to a domain class to interact with a data store.
To create the repository for our purpose, and the same as we did for projections, we need to go to Tables and Columns and look for `C_Order` table.

##### Creating a New Repository

After selecting a table, in this case `C_Order`, we need to go to *Repository* tab and create a new record with the following values:

| Field       | Value                                |
| ----------- | ------------------------------------ |
| Module      |`tutorial - 1.0.0 - English (USA)`    |


 ![new-repository.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/tutorial/new-repository.png)

------------------------------------------------------------------

#### Search

##### Creating a New Search

Next, we will define a search method to use later when we want to consume the orders. This query is taken as a filter for retrieving the orders.
To create this new filter/search method, under Repository tab of the `C_Order` table, create a new record with the following data:

| Field       | Value                                                                                  |
| ----------- | -------------------------------------------------------------------------------------- |
| Method Name |`findSalesOrder`                                                                        |
|  Query      |`select o from Order o where o.documentType.id = :documentType order by o.documentNo`   |


  ![new-search.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/tutorial/new-search.png)

##### Creating a New Search Parameter

As you can see in the query above, we use a parameter called `:documentType`. 
We can add this type of parameter to use it later by adding a corresponding value to it and filtering depending on the current needs.
To define the parameter, we need to create a new row on the *Search Parameter* tab of the *Search* tab. Fill it with the following settings:

| Field | Value         |
| ----- | ------------- |
| Line  |`10`           |
| Name  |`documentType` |
| Type  |`String`       |

In our case, we will filter depending on the Document Type of the orders.

  ![new-search-parameter.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/tutorial/new-search-parameter.png)

------------------------------------------------------------------


#### Creating a New Spring Boot Project

Now that we have declared the projection, fields, repository, and searches on Etendo Classic, we will need to create a new spring project to make use of these JPA resources that we have created just before.
Next, you will find the steps to create the Spring Boot project and add it as a module on Etendo RX.

##### Project Creation

1. Visit [**Spring Initializr**](https://start.spring.io/){target="_blank"} to start your project setup.
2. Fill in the following details:

    | Field        | Value                           |
    | ------------ | ------------------------------- |
    | Project      |Gradle Project                   |
    | Language     |Java                             |
    | Spring Boot  |2.7.15 (or latest 2.7.x version) |


    Project Metadata

    | Field        | Value                     |
    | ------------ | ------------------------- |
    | Group        |com.tutorial               |
    | Artifact     |rxtutorial                 |
    | Name         |rxtutorial                 |
    | Description  |Etendo RX tutorial project |
    | Package Name |com.tutorial.rxtutorial    |
    | Packaging    |Jar                        |
    | Java Version |11                         |

3. Add the following dependencies: Spring Web, Lombok, Config Client
4. Click on the *Generate* button to download your project. The page will generate a file named `rxtutorial.zip`.

    ![spring-initializr.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/tutorial/spring-initializr.png)

5. Uncompress the zip file to the platform project created in the first step, as: `modules_rx/com.tutorial.rxtutorial`.

!!!info
    Remember to create the `com.tutorial.rxtutorial` folder, inside of `modules_rx` before extract it.


##### Project Configuration

After creating the project, we need to add some configuration in order to work with Etendo Classic.

##### Modify build.gradle File

Remove version of spring plugins:

```groovy
plugins {
    ...
    id 'org.springframework.boot' version '2.7.14'
    id 'io.spring.dependency-management' version '1.0.15.RELEASE'
}
```

Change it to this:

```groovy
plugins {
    ...
    id 'org.springframework.boot'
    id 'io.spring.dependency-management'
}
```

Gradle will get versions from the Etendo Platform project.

Add the following dependencies in the dependencies section:

```groovy
implementation 'org.springframework.cloud:spring-cloud-starter-openfeign'
implementation 'org.springframework.boot:spring-boot-starter-hateoas'
implementation 'com.etendorx:clientrest_core:latest.integration'
```

Add the Etendo repository:

```groovy
repositories {
    mavenCentral()
    maven {
        url = "https://maven.pkg.github.com/etendosoftware/etendo_rx"
        credentials {
            username = "${githubUser}"
            password = "${githubToken}"
        }
    }
}
```

!!! note
    `githubUser` and `githubToken` were configured in the first step.

Add custom source set:

```groovy
sourceSets {
    main {
        java {
            srcDirs = [
                'src/main/java',
                'src-gen/main/java',
            ]
        }
    }
}
```
After configuring the project, we will need to generate the proper files for RX.
RX generate.entities task will generate java files in the `src-gen` directory.
Execute `rx:generate.entities` task to do so.

``` bash title="Terminal"
./gradlew rx:generate.entities
```

------------------------------------------------------------------

#### Configuring a Spring Boot Project

Now we will configure the new spring boot project to define how it will run.

##### Updating the application.properties file

Modify your `application.properties` file, under the new spring boot project created on the previous steps, with the following configurations:

```groovy title="application.properties"
config.server.url=http://localhost:8888
spring.config.import=configserver:${config.server.url}
spring.application.name=rxtutorial
server.port=8101
token=
```

The token is empty, but now we will generate a new one. 

##### Adding the token value

To generate the token value we need to follow these steps:

  1. As *System Administrator* role on Etendo Classic, go to *RX Services* window.
  2. Create a new row with the following values:

    |  Field Name         |  Property                      |
    | ------------------- | ------------------------------ |
    | Searchkey           |Tutorial                        |
    | Secret              |123                             |
    | Module              |Tutorial - 1.0.0 - English (USA)|

    ![new-rx-service.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/tutorial/new-rx-service.png)

  3. Change to *F&B International Group Admin* role.
  4. Go to *User* window.
  5. Choose a user, e.g. F&B ES User
  
    !!! info
        Change the password for this record, you will need it later.
        Also, check that the user is active.

  6. In the tab *RX Services Access* create a new row and fill it with the following values:
    
    | Field Name           |  Property                     |
    | ------------------- | ------------------------------ |
    | Organization        |*                               |
    | RX Services         |Tutorial                        |
    | Default Role        |F&B España, S.A - Sales         |
    | Default Org         |F&B España, S.A                 |

    ![new-rx-service-access.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/tutorial/new-rx-service-access.png)

  7. Let's run RX so we can make the request to the Auth service:

    ``` bash title="Terminal"
    ./gradlew rx:rx
    ```

  8. Open Postman and we will make an authenticate request.
    
    ```json
    Verbose: POST
    URL: http://localhost:8094/api/authenticate
    Body:
    {
      "username":"F&BESUser",
      "password":"EtendoAdmin1",
      "service":"Tutorial",
      "secret":"123"
    }
    ```

    !!!warning
        Remember the password changed before.

    ![postman-request.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-rx/tutorial/postman-request.png)
  
  9. Take the token under the response and fill in the *token* property on the `application.properties` of the tutorial module.

##### Adding Component Scan Annotation to the Application Class

To scan your application for annotated components, add the `@ComponentScan` annotation to your Application class with the necessary base packages:

!!!info
    The path to the application class, in this case, is: `modules_rx/com.tutorial.rxtutorial/src/main/java/com/tutorial/rxtutorial/RxtutorialApplication.java`

```java
@ComponentScan({
    "com.tutorial.rxtutorial",
    "com.etendorx.clientrest.base",
})
```
!!! warning
    Remember to add the import for ComponentScan annotation: 
    ```java
    ...
    import org.springframework.context.annotation.ComponentScan;
    ...
    ```

Hence, your Application class should look like:

```java
package com.tutorial.rxtutorial;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.ComponentScan;

@SpringBootApplication
@ComponentScan({
    "com.tutorial.rxtutorial",
    "com.etendorx.clientrest.base",
})
public class RxtutorialApplication {

  public static void main(String[] args) {
    SpringApplication.run(RxtutorialApplication.class, args);
  }

}
```

------------------------------------------------------------------

#### Creating a New Spring Boot Service

In this last step before launching the microservice, we will create the logic to consume the orders using the projection and all the JPA resources that we defined in the previous steps. 
Follow the instructions below to create a new service:

1. Create a new file at the following path:

    ```java
    modules_rx/com.tutorial.rxtutorial/src/main/java/com/tutorial/rxtutorial/RxtutorialService.java
    ```

2. Then, copy and paste the following code into the file:

    ```java
    package com.tutorial.rxtutorial;

    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.web.bind.annotation.GetMapping;
    import org.springframework.web.bind.annotation.RequestMapping;
    import org.springframework.web.bind.annotation.RestController;

    import com.etendorx.clientrest.base.RestUtils;
    import com.etendorx.clientrest.base.RestUtilsException;
    import com.tutorial.rxtutorial.entities.org.openbravo.model.common.order.OrderRxtutorialModel;

    @RestController
    @RequestMapping(path = "/api")
    public class RxtutorialService {
      @Autowired
      RestUtils restUtils;

      @GetMapping(path = "/")
      public String get() throws RestUtilsException {
        String url = "/Order/search/findSalesOrder?documentType=AB22CE8FFA5E4AF29F2AC90FCDD400D8&projection=rxtutorial";
        var orders = restUtils.getList(url, OrderRxtutorialModel.class);
        StringBuilder html = new StringBuilder("<html>");
        html.append("<head>");
        html.append("<style type=\"text/css\">html {font-family: sans-serif;}</style>");
        html.append("</head>");
        html.append("<title>Orders</title></head>");
        html.append("<body>");
        html.append("<h2>Orders</h2>");
        html.append("<table>");
        for (OrderRxtutorialModel o : orders) {
          html.append(
              "<tr>" +
                  "<td>" + o.getDocumentNo() + "</td>" +
                  "<td>" + o.getBusinessPartnerName() + "</td>" +
                  "<td>" + o.getDocumentTypeName() + "</td>" +
                  "<td>" + o.getGrandTotalAmount() + "</td>" +
                  "</tr>"
          );
        }
        html.append("</table></body></html>");
        return html.toString();
      }
    }
    ```

    This file will display a simple HTML page with the retrieved orders.
    But first, we will take a look at the class that we just created.

      ```java
      String url = "/Order/search/findSalesOrder?documentType=AB22CE8FFA5E4AF29F2AC90FCDD400D8&projection=rxtutorial";
      ```
      This URL is the one that the process will use to consume the service, as you can see, we add here the *Search* filter that we created before and give it the document type parameter, with one document type id of the order that we will filter. Also, we are adding the projection to use too, same as before, it is the one created before.

      
      ```java
      var orders = restUtils.getList(url, OrderRxtutorialModel.class);
      ```

      The orders variable will store all the orders that will be filtered with our request, as you can see, the method `getList` receives two parameters, the first one is the URL that we will use to make the request, and the second one is the model class of the retrieved object.

3. Then, we simply create a StringBuilder as an HTML page that will be shown on the browser.

------------------------------------------------------------------

#### Run RX Services

To simplify RX executions you have a simplified run task:

``` bash title="Terminal"
./gradlew rx:rx
```

!!!warning
    Remember to configure the Auth service as described on the [Getting Started](https://docs.etendo.software/latest/developer-guide/etendo-rx/getting-started.md#configure-auth-project) page.

#### Run tutorial project

Now we are able to run our new microservice. For that, execute the following task:

``` bash title="Terminal"
./gradlew :com.tutorial.rxtutorial:bootRun
```

Open your browser and you can view the generated page with the following URL: [**http://localhost:8101/api/**](http://localhost:8101/api/)

!!! success
    You have successfully created a fully working RX service.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Filter any request for Active or all Records
## Article Path: /Developer Guide/Etendo RX/How to Guides/How to Filter any request for Active or all Records
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-rx/how-to-guides/how-to-filter-for-active-or-inactive
## Article Content: 
#### You can filter any request by active or all rows

The `_noActiveFilter` parameter can be used in any request method to filter active records or all records (active and inactive). This way it allows more control when obtaining the results.

---

#### Example of GET request for all records

Open Postman and we will make a get request.

    Verbose: GET

    URL: http://localhost:8094/BusinessPartner?_noActiveFilter=true

    Body: empty

    Return: a json object with all businessPartners active or inactive

---

#### Example of GET request only for active records

Open Postman and we will make a get request.

    Verbose: GET

    URL: http://localhost:8094/BusinessPartner?_noActiveFilter=false

    Body: empty

    Return: a json object with all active BusinessPartner rows

---

Another way to get active rows is to remove the parameter `_noActiveFilter parameter` , because by default the active row always applies the active row filter.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to start RX as service
## Article Path: /Developer Guide/Etendo RX/How to Guides/How to start RX as service
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-rx/how-to-guides/hot-to-start-rx-as-service-source-code
## Article Content: 
### How to Start RX as a Service from Source Code

This document guides you through the process of starting the RX service from the source code, including generating JAR files and launching various components.

#### 1. Generating JARs

Ensure you have built the JAR files necessary for different service components. Use these commands in your terminal:

```bash
./gradlew com.etendorx.entities:build 
./gradlew com.etendorx.das:build -x test
./gradlew com.etendorx.config:build -x test
./gradlew com.etendorx.auth:build -x test
```

#### 2. Starting the Config Server

Before initiating the Config Server, confirm that your configuration files are correctly set up.

**Configuration Files:**
Ensure the required files, such as `service.yaml`, are present in the designated directory (`/path/to/directory/rxconfig`).

**Setting Environment Variables:**
Configure the necessary environment variables to direct the Config Server to these files:

```bash
export SPRING_PROFILES_ACTIVE=native
export SPRING_CLOUD_CONFIG_SERVER_NATIVE_SEARCH_LOCATIONS=$(pwd)/rxconfig
```

**Starting the Config Service:**

```bash
java -jar modules_core/com.etendorx.config/build/libs/com.etendorx.config-1.1.0.jar
```

#### 3. Starting DAS

Use this command to start the DAS service, ensuring the correct path and version for the generated entities jar.

```bash
java -Dloader.path=modules_gen/com.etendorx.entities/build/libs/com.etendorx.entities-1.1.0-plain.jar -jar modules_core/com.etendorx.das/build/libs/com.etendorx.das-1.1.0.jar
```

!!!info
    - **Validation:** Confirm that all paths and filenames in the commands align with your project structure.
    - **Dependencies:** Check that all necessary dependencies are installed prior to executing these commands.
    - **Testing:** Testing each step in a development setting before production deployment is recommended.

#### 4. Starting AUTH

To initiate the AUTH service, execute the following command, making sure the path and version of the generated entities jar are correct.

```bash
java -jar modules_core/com.etendorx.auth/build/libs/com.etendorx.auth-1.1.0.jar
```

#### 5. Starting EDGE

To initiate the EDGE service, execute the following command, making sure the path and version of the generated entities jar are correct.

```bash
java -jar modules_core/com.etendorx.edge/build/libs/com.etendorx.edge-1.1.0.jar
```

##### Disclaimer: Advanced Knowledge Required

This guide assumes a fundamental understanding of Java development environments, including familiarity with Gradle build commands and Java application deployment. It is intended for users with intermediate to advanced technical skills in software development and system administration. New users or those unfamiliar with the concepts discussed may need additional resources or assistance. 
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to change date format
## Article Path: /Developer Guide/Etendo RX/How to Guides/How to change date format
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-rx/how-to-guides/how-to-change-date-format
## Article Content: 
### Changing Date Format and Time Zone in a Request

#### Overview

This document outlines the steps for developers to change the date format and time zone when making an HTTP request to the application. These features are useful for ensuring that date and time values are interpreted correctly based on the user's locale or specific requirements.

#### Prerequisites

- Familiarity with HTTP requests and RESTful APIs.
- Access to the application's API documentation for endpoint details.

#### Adding Date Format and Time Zone Parameters

##### Date Format

To specify a custom date format, add a `_dateFormat` parameter to your HTTP request. The value should be a string that represents the desired date format, following the Java `SimpleDateFormat` conventions.

**Example:**

```http
GET /OBMAPBusinessPartner/2C4C71BC828B47A0AF2A79855FD3BA7A?_dateFormat=yyyy-MM-dd
```

In this example, the date format is set to `"yyyy-MM-dd"`, which will format dates as `"2023-08-29"`.

##### Time Zone

To specify a custom time zone, add a `_timeZone` parameter to your HTTP request. The value should be a string that represents the desired time zone, following the Java `TimeZone` conventions. This parameter, requires to have a `_dateFormat`, cannot be used as single parameter.

**Example:**

```http
GET /OBMAPBusinessPartner/2C4C71BC828B47A0AF2A79855FD3BA7A?_dateFormat=yyyy-MM-dd&_timeZone=America/New_York
```

In this example, the date format is set to `"yyyy-MM-dd"` and the time zone is set to `"America/New_York"`.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to give public access to RX with Apache2
## Article Path: /Developer Guide/Etendo RX/How to Guides/How to give public access to RX with Apache2
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-rx/how-to-guides/how-to-give-public-access-to-rx-apache
## Article Content: 
##### Prerequisites

- Read [Config Server Guide](https://docs.etendo.software/latest/developer-guide/etendo-rx/concepts/config-server.md) and [Edge Guide](https://docs.etendo.software/latest/developer-guide/etendo-rx/concepts/edge-server.md)
- Etendo RX Edge Service set up and running.
- Apache2 installed on the server.
- A valid SSL configuration
- Root or sudo access to the server.

##### Disclaimer

This guide for setting up public access to the Etendo RX Edge Service using Apache2 SSL Proxy covers complex topics that may extend beyond its scope, requiring extra knowledge or expertise:

* Apache2 Web Server Configuration: Requires foundational web server management skills, including setting up virtual hosts and configuring SSL.
* SSL Certificates and Encryption: Assumes knowledge of obtaining, renewing, and installing SSL certificates.
* Network Security and Firewalls: Involves adjusting firewall settings for HTTPS traffic.
* Reverse Proxy Setup: Understanding the functioning and configuration of reverse proxies.

##### Step 1: Configure Apache2 as a Reverse Proxy

1. **Enable Proxy Modules**: Enable the necessary proxy modules in Apache2.

   ```shell
   sudo a2enmod proxy
   sudo a2enmod proxy_http
   ```

2. **Configure Proxy Settings**: Add the following configuration inside the `<VirtualHost>` block in your SSL virtual host file (`etendorx-ssl.conf`):

   ```apache
   <VirtualHost *:443>
       # ... SSL configurations ...

       ProxyPreserveHost On
       ProxyRequests Off
       ProxyPass / http://localhost:8096/
       ProxyPassReverse / http://localhost:8096/
   </VirtualHost>
   ```

   - This configuration forwards all requests from the public-facing domain to the Etendo RX Edge Service running on port 8096.

3. **Restart Apache2 Again**:

   ```shell
   sudo systemctl restart apache2
   ```

##### Step 2: Verify Configuration

1. **Browser Test**: Open a web browser and navigate to `https://yourdomain.com`. You should see the Etendo RX Edge Service interface, securely served over HTTPS.

2. **Check SSL Configuration**: Use an SSL checker tool online to verify that your SSL certificate is correctly installed and valid.

##### Step 3: Firewall Configuration (Optional)

If your server is protected by a firewall, ensure that port 443 (HTTPS) is open for incoming connections.

##### Conclusion

Your Etendo RX Edge Service is now accessible publicly with SSL security provided by Apache2. This setup ensures that the traffic between the clients and your Edge Service is encrypted and secure. Remember to keep your SSL certificates and Apache2 up to date for security and performance.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: ✨ Getting Started
## Article Path: /Developer Guide/Etendo Copilot/✨ Getting Started
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/installation
## Article Content: 
#### Overview

This guide provides detailed instructions on how to get started with Etendo Copilot, an API that allows interaction with a bot capable of selecting the appropriate tools to respond to user queries. It includes the necessary requirements, instructions for adding dependencies, environment variable configurations, and steps to run Copilot on an Etendo Classic project. Additionally, it covers optional configurations to customize Copilot's behavior and provides links to detailed installation guides for required software.

#### Requirements

1. Install Etendo Classic. For this, follow the [Etendo Installation Guide](https://docs.etendo.software/latest/getting-started/installation.md){target="_blank"}.
2. This project depends on the following tools:
    - [Docker](https://docs.docker.com/get-docker/){target="_blank"}: version `26.0.0` or higher.
    - [Docker Compose](https://docs.docker.com/compose/install/){target="_blank"}: version `2.26.0` or higher.
    - [Python 3](https://www.python.org/downloads/){target="_blank"} version `3.10`or higher.

!!!info
    The [Docker Management](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/docker-management.md) module, included as a dependency allows for the distribution of the infrastructure within Etendo modules, which include Docker containers for each service.

#### Installation 
Etendo Copilot is distributed within the Copilot Extensions bundle, which in addition to including the Copilot Core functionality and infrastructure, includes default assistants and tools that can be used directly or compose their use in new wizards.  

!!! info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).


#### Running Etendo Copilot

The simplest configuration we are going to follow as an example is to mount Copilot Dockerized and Tomcat running as a local service. Other configurations are detailed in the section, [Advanced Configurations](#advanced-configurations).

1. In `gradle.properties` file is necessary to add some environment variables as a mandatory requirement

    !!!info
        From Etendo Classic version [24.4.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/release-notes.md) onwards the variables `ETENDO_HOST`, `COPILOT_HOST` and `ETENDO_HOST_DOCKER` are optional, in case they are defined they will overwrite the automatically generated variables.

    ```groovy title="gradle.properties"
    OPENAI_API_KEY= ****
    ETENDO_HOST=https://<Etendo URL>/<Context Path>
    ETENDO_HOST_DOCKER=http://host.docker.internal:<Tomcat Port>/<Context Path>
    COPILOT_HOST=<Copilot URL>
    COPILOT_PORT=<Copilot Port>

    docker_com.etendoerp.copilot=true
    ```

    | **Environment Variable**   | **Default**  | **Info** |
    | -------------------------- | -------------| -------- |
    | OPENAI_API_KEY         | `***********************` | **Required** You can use an [OPEN AI API Key](https://platform.openai.com/account/api-keys){target="_blank"} of your own, or you can contact the Etendo support team to obtain one.|
    | ETENDO_HOST            |  | **Optional** The URL of the Etendo system, this is where copilot will send the requests to communicate with the Etendo system. E.g: https://demo.etendo.cloud/etendo or http://localhost:8080/etendo |
    | ETENDO_HOST_DOCKER     |  | **Optional** The URL of the Etendo system, this is where copilot will send the requests to communicate with the Etendo system. This variable is used when the copilot is running in a docker container and the Etendo Instance is not accessible from a domain. |
    | COPILOT_HOST           | `localhost` | **Optional** The copilot host can be defined by the user. By default use `localhost` |
    | COPILOT_PORT           | `5005` | **Required** The copilot port can be defined by the user. By default use `5005` |
    | docker_com.etendoerp.copilot | `true` | **Required** Configuration variable for the Etendo Copilot container to be launched. |
    |ANTHROPIC_API_KEY      | `***********************` | **Optional** You can use an [ANTHROPIC API Key](https://docs.anthropic.com/en/api/getting-started){target="_blank"} of your own, or you can contact the Etendo support team to obtain one. Remember, its only necessary if you want to use Anthropic AI Models. |

    !!! info
        The `ETENDO_HOST_DOCKER` variable is used when the copilot is running in a docker container and the Etendo Instance is not accessible from a domain. This is important because the copilot needs to communicate with the Etendo system to perform the necessary actions. For example, if Copilot is running into a docker container and the Etendo Instance is running locally, the `ETENDO_HOST` variable should be `http://localhost:8080/etendo` and the `ETENDO_HOST_DOCKER` variable should be `http://host.docker.internal:8080/etendo`. Its recommended to access to the Docker Container shell and check the network configuration to get the correct IP address.
   

2.  Once the Copilot Extensions Bundle dependency was added and the variables configurated, in the terminal execute the following command to apply the changes:

    ``` bash title="Terminal"
    ./gradlew setup
    ```

    Then, the copilot container needs to be created:
    ``` bash title="Terminal"
    ./gradlew resources.up
    ```

    And then recomplile the environment: 

    ``` bash title="Terminal"
    ./gradlew update.database compile.complete smartbuild --info
    ```
    
3. To start the copilot Docker image, execute:

    ``` bash title="Terminal"
    ./gradlew resources.up
    ```

    To stop the Copilot container you can run: 
    ``` bash title="Terminal"
    ./gradlew resources.stop
    ```

    Everytime a new tool is added or the enviorement variables change, it's necessary to delete and create the Copilot container again. Execute the following command to delete the container: 
    ``` bash title="Terminal"
    ./gradlew resources.down
    ```

    !!! warning 
        Be aware that resources.stop and resources.down will also affect other services configured in the etendo container

4. Try Copilot in your Etendo instance. To configure an assistant to use Etendo Copilot, follow the [Copilot Setup and Usage](https://docs.etendo.software/latest/user-guide/etendo-copilot/setup-and-usage.md){target="_blank"} guide.


#### Advanced Configurations 

=== "Copilot & Tomcat Dockerized"

    The `com.etendoerp.tomcat` module enables the Dockerization of Tomcat within Etendo Classic. This module modifies Gradle tasks to automatically deploy the `WAR` file into the container when executing the `smartbuild` task.
    Follow the [Dockerized Tomcat Service](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/dockerized-tomcat-service.md) documentation to learn how to configure it.

    When using both services in docker, the enviorement variables should look like this:

    ```groovy title="gradle.properties"
    OPENAI_API_KEY= ****
    ETENDO_HOST=http://tomcat:<Docker Tomcat Port>/<Context Path>
    ETENDO_HOST_DOCKER=http://host.docker.internal:<Docker Tomcat Port>/<Context Path>
    COPILOT_HOST=copilot
    COPILOT_PORT=<Docker Copilot Port>

    docker_com.etendoerp.copilot=true
    docker_com.etendoerp.tomcat=true
    docker_com.etendoerp.tomcat_port=<Docker Tomcat Port>
    ```

=== "Copilot locally (for developing copilot only)"

    Requirements:
    
    - [Python](https://www.python.org/downloads/){target="_blank"} 3.10 or 3.11
    
    - [Poetry](https://pypi.org/project/poetry/){target="_blank"}

    We recommend usign PyCharm to run copilot locally. Download and install here [PyCharm Community Edition](https://www.jetbrains.com/pycharm/download/){target="_blank"}

    1. Open PyCharm, search for the copilot module and open it.
    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/getting-started/Copilot_Local_1.png)


    2. Open the `Run.py` file, then add a new interpreter.
    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/getting-started/Copilot_Local_2.png)
    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/getting-started/Copilot_Local_3.png)


    3. Add a new configuration file and select Python
    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/getting-started/Copilot_Local_4.png)
    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/getting-started/Copilot_Local_5.png)


    4. Select the interpreter created before, in the script field select the `run.py` file and .env field select the `gradle.properties`
    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/getting-started/Copilot_Local_6.png)
    
    
    5. Once done, open the PyCharm terminal and execute the following commands:
    ``` bash title="terminal"
    source venv/bin/activate
    poetry install
    ```

    6. Execute `Run.py` from PyCharm
    
##### Developer Environment Variables

In addition, there are other **optional** variables to configure certain aspects of the copilot. If not specified, default values are used.
    
| **Environment Variable**    | **Options**  | **Default**  | **Info** |
| ----------------------------| -------------| -------------| -------- |
| COPILOT_DEBUG | `Boolean` | `false` | **Optional** If true, copilot will log additional messages in the console. |
| COPILOT_MAX_ITERATIONS | `Integer` | `100` | **Optional** Maximum number of interactions of agents. |
| COPILOT_EXECUTION_TIMEOUT | `Integer` | `0` | **Optional** Defines a timeout in the execution of an agent in seconds, by default 0 represents unlimited time. |
| COPILOT_STREAM_DEBUG | `Boolean` | `false` | **Optional** Enable debug mode in the copilot pop-up, to see the log while the response is being generated. |
| CONFIGURED_TOOLS_FILENAME | `JSON File name` | `tools_config.json` | **Optional** The name of the file that contains the configuration of the enabled tools. |
| DEPENDENCIES_TOOLS_FILENAME | `TOML File name` | `tools_deps.toml` | **Optional** The name of the file that contains the configuration of the dependencies of the tools. |
| COPILOT_PULL_IMAGE | `Boolean` | `true` | **Optional** If true, the copilot docker image will be pulled from docker hub. If false, gradle will try to use the local image with the tag specified in COPILOT_IMAGE_TAG, but if it does not exist, it will be pulled from docker hub. |
| COPILOT_IMAGE_TAG | `String` | `master` | **Optional** The tag of the copilot docker image that will be used. |
| COPILOT_PORT_DEBUG | `String` | `5100` | **Optional** The copilot debug port can be defined by the user. |


==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /Developer Guide/Etendo Copilot/Bundles/Copilot Extensions/Overview
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/bundles/overview
## Article Content: 
### Copilot Extensions

:octicons-package-16: Javapackage: `com.etendoerp.copilot.extensions`

:material-store: Etendo Marketplace:  [Copilot Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="_blank"}

#### Overview

The Copilot Extensions Bundle includes functionalities for developers to help them streamline daily tasks using AI.

#### Dev Assistant

:octicons-package-16: Javapackage: `com.etendoerp.copilot.devassistant`

<iframe width="560" height="315" src="https://www.youtube.com/embed/58U9LThdTGo?si=kSxA3MAf22U8fdHh" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

The **Dev Assistant** module includes various development assistants that will facilitate developers the processes of creating buttons, windows, tabs, fields, background processes, Event Handlers, Jasper reports and much more.

!!!info
    For more information, visit [Dev Assistant developer guide](https://docs.etendo.software/latest/etendo-copilot/bundles/dev-assistant.md).

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Dev Assistant
## Article Path: /Developer Guide/Etendo Copilot/Bundles/Copilot Extensions/Dev Assistant
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/bundles/dev-assistant
## Article Content: 
### Dev Assistant

:octicons-package-16: Javapackage:  `com.etendoerp.copilot.devassistant`

#### Overview

This page provides an overview of the tools, functionality, and usage examples for various development assistants available in Etendo. Dev Assistant streamlines workflow management for developers by offering **specialized assistants** that simplify tasks such as creating buttons, windows, tabs and tables, Event Handlers, Jasper Reports, background processes, and more. These assistants are designed to enhance productivity and reduce complexity, making it easier for developers to efficiently build and manage different components within the Etendo platform.

<iframe width="560" height="315" src="https://www.youtube.com/embed/58U9LThdTGo?si=kSxA3MAf22U8fdHh" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

!!!warning
    Consider that the assistants are currently in their beta testing phase. 

Access to the information for each of the Assistants:

[:material-file-document-outline: Background Process Creator](https://docs.etendo.software/latest/bundles/dev-assistant.md#background-process-creator){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Button Process Creator](https://docs.etendo.software/latest/bundles/dev-assistant.md#button-process-creator){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Code Run](https://docs.etendo.software/latest/bundles/dev-assistant.md#code-run){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Etendo Code Expert](https://docs.etendo.software/latest/bundles/dev-assistant.md#etendo-code-expert){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Event Handler Creator](https://docs.etendo.software/latest/bundles/dev-assistant.md#event-handler-creator){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Jasper Report Creator](https://docs.etendo.software/latest/bundles/dev-assistant.md#jasper-report-creator){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Java Test Supervisor](https://docs.etendo.software/latest/bundles/dev-assistant.md#java-test-supervisor){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Message Creator](https://docs.etendo.software/latest/bundles/dev-assistant.md#message-creator){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Module Creator](https://docs.etendo.software/latest/bundles/dev-assistant.md#module-creator){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Module Translation Creator](https://docs.etendo.software/latest/bundles/dev-assistant.md#module-translation-creator){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Refactor Assistant](https://docs.etendo.software/latest/bundles/dev-assistant.md#refactor-assistant){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Reference Creator](https://docs.etendo.software/latest/bundles/dev-assistant.md#reference-creator){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Tables, Windows and Tabs Creator](https://docs.etendo.software/latest/bundles/dev-assistant.md#tables-windows-and-tabs-creator){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Unique Java Test Assistant](https://docs.etendo.software/latest/bundles/dev-assistant.md#unique-java-test-assistant){ .md-button .md-button--primary } <br>

[:material-file-document-outline: Webhook Creator](https://docs.etendo.software/latest/bundles/dev-assistant.md#webhook-creator){ .md-button .md-button--primary } <br>

#### Background Process Creator

**Background Process Creator** is an assistant specialized in the automatic creation of Background Processes in Java. The assistant reads previously indexed code and uses examples of classes extending `DalBaseProcess` to build new Background Processes.

##### Tools

- [API Call Tool](https://docs.etendo.software/latest/available-tools/openapi-tool.md)

- [Read File Tool](https://docs.etendo.software/latest/available-tools/read-file-tool.md)
  
- [Write File Tool](https://docs.etendo.software/latest/available-tools/write-file-tool.md)

##### Functionality

Background Process Creator generates Background Processes in Java using indexed examples of classes that extend `DalBaseProcess`. To configure the assistant properly, you need to provide the following parameters:

- **Java package**: The Java package where the new process will be saved. It should follow the format `java.package.of.the.module`.
- **Name**: The name of the Java file to be created.
- **Search Key**: A key that will be used to locate the process in other windows when necessary.
- **Code description**: The purpose and logic that the Background Process should fulfill.

##### Usage Example

1. To use this assistant, it is necessary to log in as `System Administrator` role and set the role access. For this, go to the **Assistant** window, select Background Process Creator and synchronize it. Then, go to the **Assistant Access** window and give access to the role.

    ![background.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/BG1.png)


2. Open Copilot and select Background Process Creator, then ask to the assistant what you need to create.

3. Then, this is the result given by the assistant.

    ![background.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/BG2.png)

    ![background.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/BG3.png)



#### Button Process Creator

The **Button Process Creator** simplifies the process of creating and registering buttons and process definitions in Etendo Classic. By automating the workflow through webhooks, it removes the need for manual configuration, ensuring that your processes and buttons are set up correctly and efficiently.

##### Tools

- [ApiCallTool](https://docs.etendo.software/latest/available-tools/openapi-tool.md) 
    
- [ReadFileTool](https://docs.etendo.software/latest/available-tools/read-file-tool.md)

- [WriteFileTool](https://docs.etendo.software/latest/available-tools/write-file-tool.md)

##### Functionality

The **Button Process Creation Assistant** automates the creation of a button and the registration of a process in Etendo Classic through a webhook call. Through a webhook call, the tool ensures the correct setup by validating necessary parameters like the module prefix, Java package, and process name, making sure the search key is correctly formed. It then generates a Java class for the button, which extends `BaseProcessActionHandler`, and registers this button in the desired window, tab, and table within the Etendo system. 

Additionally, it defines and registers the process by creating a process definition and associating it with any required parameters, including attributes like database name, length, and reference, ensuring integration and functionality within the system. 

When creating a button or registering a process, the assistant will request the following information:

- **Java Package**: The Java package of the module where the button's class will be created (e.g., `com.etendoerp.module`).
- **Module Prefix**: A prefix for the module (e.g., `COPDEV`).
- **Window**: The window in Etendo where the button will appear.
- **Tab**: The specific tab within the window where the button will be located.
- **Table**: The table associated with the process.
- **Process Name**: The name of the process to be created.
- **Search Key**: A unique search key for the process that includes the module prefix (e.g., `COPDEV_ActualizarDescripciónPedido`).
- **Parameters**: Optional parameters for the process, including:
    - **BD_NAME**: The database column name.
    - **NAME**: The name of the parameter.
    - **LENGTH**: The length of the parameter field.
    - **SEQNO**: The sequence number of the parameter.
    - **REFERENCE**: A reference for the parameter (if it's linked to another field or table).
- **Help Comment**: An optional help comment for the process.
- **Description**: An optional description for the process.

The webhook call used to register the process in Etendo will require the following body parameters:

```json
body_params = {
    "Prefix": "COPDEV",
    "SearchKey": "COPDEV_ActualizarDescripciónPedido",
    "ProcessName": "ActualizarDescripciónPedidos",
    "HelpComment": "This process updates the description of associated orders.",
    "Description": "A process to update the description of the associated sales orders based on a text input.",
    "Parameters": [
        {
            "BD_NAME": "text_parameter",
            "NAME": "Description Text",
            "LENGTH": 255,
            "SEQNO": 10,
            "REFERENCE": "Text"
        }
    ],
    "JavaPackage": "com.etendoerp.copilot.devassistant"
}
```

This call registers the process in the system and attaches the necessary parameters.

##### Usage Example 

The process and the button will be automatically registered, and the user will be notified.

![ButtonProcess.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/ButtonProcess.png)

At this point, we will have the Java class of the button created along with the registered process.

![ButtonProcess2.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/ButtonProcess2.png)


#### Code Run

**Code Run** is an assistant designed for executing Python commands in a controlled environment. It translates the request into Python or Bash commands to fulfill the task. 

##### Tools

- [Docker Tool](https://docs.etendo.software/latest/available-tools/docker-tool.md)

##### Functionality

Code Run enables users to execute Python scripts and commands dynamically, even if dependencies or configurations are missing. Key features include:

1. Dynamic Code Execution:

    - Allows running Python code snippets.

    - Example: `print('Hello, World!')`.


2. Natural Language Requests:

    - Users can provide tasks in plain language (e.g., "Ping Google"), and the assistant translates them into executable Python or Bash commands.


3. Automatic Dependency Management:

    - Identifies and installs missing libraries when a task requires them.

    - Example: `!pip install numpy`.


4. Error Handling:

    - Provides meaningful error messages for invalid commands or missing inputs.


5. Flexible Task Management:

    - Supports file operations and multi-step workflows combining Python and Bash.


##### Usage Example

1. Log in to the system as the **System Administrator** role and configure the assistant in the **Assistant** window. Synchronize it and grant access to the role in the **Assistant Access** window.

2. Open Copilot and select **Code Run**. Then, ask the assistant what you need to execute.

3. Example interaction and result:

    ![code-run-example.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/Code-Run-Example.png)

    **Input:**

    - "Create a Python program that calculates the sum of the numbers between 1 and 100."

    **Execution:**

    - The assistant processes the request and executes the following Python code:

      ```python
      def calculate_sum(start, end):
          return sum(range(start, end + 1))

      # Calculate the sum of numbers between 1 and 100
      result = calculate_sum(1, 100)
      print(f'The sum of numbers between 1 and 100 is: {result}')
      ```

    **Result:**

    - The assistant outputs the result of the program:

      ```
      The sum of numbers between 1 and 100 is: 5050
      ```
      

#### Etendo Code Expert 

**Etendo Code Expert** is an assistant designed to read indexed files and provide answers related to their content. 

##### Functionality

With this assistant it is possible to ask **code development questions** and based on Etendo code indexed, the assistant will give possible code suggestions or solutions. It can summarize, answer technical questions, suggest programming code improvements, and offer general assistance about files.

This assistant is useful for avoiding the need to manually review all files. Also, multiple files can be configured if neccesary.


##### Usage Example 

1. To use this assistant, it is necessary to log in as `System Administrator` role and set the role access. This assistant do not include the path configured to the indexed files. To do that, go to the **Knowledge Base File** window in `Application`>`Service`>`Copilot`>`Knowledge Base File` and select the `EtendoJAvaSourceCode` file and, in the **File Path Tab**, specify the path where the code files you need the assistant to read are located. 
		
	<figure markdown="span">
		![code-expert.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/etendo-code-expert3.png)
		<figcaption>In this example using the path shown in the image, we will obtain all the files with Java extension from the Etendo core source code</figcaption>
	</figure>


2.  Then, go to the **Assistant** window, configure Etendo Code Expert and synchronize it. After that, go to the **Assistant Access** window and give access to the role.  

3. Start using the assistant. Open Copilot and select Etendo Code Expert.

    ![code-expert.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/etendo-code-expert1.png)

4. Ask the assistant for what you need to create.

    ![code-expert.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/etendo-code-expert2.png)


#### Event Handler Creator

This assistant is capable of creating **Event Handlers** in Etendo Classic. You only need to provide the Java package of the module where it should be exported and specify the action to be performed. 

##### Tools

- [Read File Tool](https://docs.etendo.software/latest/available-tools/read-file-tool.md)
  
- [Write File Tool](https://docs.etendo.software/latest/available-tools/write-file-tool.md)

##### Functionality

**Event Handler Creator** is an assistant designed to automatically create event handlers in Java. It uses code indexed in its knowledge base to read classes that extend `EntityPersistenceEventObserver`, providing examples to build a new event handler. To generate an event handler, the assistant requires the following parameters:
  
- **Java package**: The package where the file will be saved.
- **File name**: The name of the file to create.
- **Entity**: The entity to observe.
- **Description**: A description of the functionality to be implemented by the event handler.

##### Usage Example

1. To use this assistant, it is necessary to log in as `System Administrator` role and set the role access. For this, go to the **Assistant** window, select Event Handler Creator and synchronize it. Then, go to the **Assistant Access** window and give access to the role.  

2. Open Copilot and select Event Handler Creator, then ask to the assistant what you need to create.

    ![eventhandler.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/EH1.png)

3. Then, this is the result given by the assistant.

    ![eventhandler.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/EH2.png)


#### Jasper Report Creator

The **Jasper Assistant** is designed to facilitate the creation, editing, and registration of reports within the Etendo platform. Using JasperReports, it allows developers to define the structure of the report, apply styles, manage parameters, and register the reports in the system to use in different modules.

!!!info
    This assistant simplifies the process by verifying that all fields used in a report are correctly defined in the database, thus avoiding common errors such as **Field not found**. It also supports integrating logos, applying styles, and performing data grouping to ensure that the reports meet business requirements.

##### Tools

- [DBQueryGeneratorTool](https://docs.etendo.software/latest/available-tools/database-query-tool.md)

- **JasperTool**

- [OCRTool](https://docs.etendo.software/latest/available-tools/ocr-tool.md)

- [ReadFileTool](https://docs.etendo.software/latest/available-tools/read-file-tool.md)

- [WriteFileTool](https://docs.etendo.software/latest/available-tools/write-file-tool.md)

##### Functionality

**Report Creation**

The Jasper Assistant requests the following parameters to create a report:

- **Report storage path**: The location in the file system where the report file will be saved.
- **Report name**: The name that will be assigned to the report.
- **Report encoding language**: The language in which the report will be encoded (default is UTF-8).
- **Report parameters**: A list of parameters that the report will accept.
- **SQL query**: The SQL query that will provide data to the report.
- **Report styles**: Definition of the visual styles applied to the report.
- **Data grouping**: Configuration of data grouping within the report.
- **Image or logo in the report**: Specification of images or logos to include.
- **Data distribution**: Structure of how the data will be organized in the report.

**Report Registration**

Once the report is created, it can be registered in the system. The assistant requests the following arguments:

- **Report name**: Name that will be used to register the report in the system.
- **Module prefix**: Prefix that identifies the module where the report will be registered.
- **Search key**: Unique key to identify the report in the system.
- **Help comments**: Additional information to help understand the purpose of the report.
- **Description**: Detailed description of the report.
- **Report path**: Path where the report is stored.
- **Parameters**: List of registered parameters that can be used when executing the report.

**Report Editing**

The assistant also allows editing existing reports. Available actions include:

- **Parameter Modification**: Allows editing any already registered report parameter.
- **SQL Query Update**: Modification of the SQL query used by the report.
- **Change of Styles and Groupings**: Update of visual styles and data grouping configuration.

##### Usage Example

1. To use this assistant, it is necessary to log in as `System Administrator` role and set the role access. For this, go to the **Assistant** window, select Jasper Report Creator and synchronize it. Then, go to the **Assistant Access** window and give access to the role.  

2. Open Copilot and select Jasper Report Creator

3. Depending on the request, the Jasper Assistant will return:

**Report Creation**

![CreateReport.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/CreateReport.png)


**Report Registration**

![RegistrateReport.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/RegistrateReport.png)

After running the smartbuild we will be able to see the process of the created report:

![RegistrateReport3.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/RegistrateReport3.png)

As you can see in the image, it also adds the parameters and even in the **Report Definition** tab, it defines the PDF Template of the report and in the **Menu**, it creates the Process definition that we have defined in the previous step.

![RegistrateReport4.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/RegistrateReport4.png)

![RegistrateReport5.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/RegistrateReport5.png)


Finally, we can observe the created report and set the chosen parameter to see the printed version.

![RegistrateReport6.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/RegistrateReport6.png)


**Report Editing**

![EditReport.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/EditReport.png)

#### Java Test Supervisor
A supervisor that allows to generate tests for a whole Etendo Module through a workflow, checking the files without tests and generating them. The supervisor will also execute the tests and provide feedback to the user.

##### Functionality 
This assistant receives an Etendo Module and will check for Java files, determining which ones have tests and which ones do not. 

- The assistant will generate a report with the results and will suggest the user to generate tests for the files without them. 
- The assistant will generate the tests and execute them, checking for errors and providing feedback to the user.

##### Team Members

###### Java Test Checker

This assistant receiving a Etendo Module, will check for Java files, determining which ones have tests and which ones do not. The assistant will generate a report with the results and will suggest the user to generate tests for the files without them.

!!!info
    This assistant is intended and designed to be used as part of a Langgraph type supervisor, it can be used individually, but does not have full functionality.

**Tools**

- [Print Directory Tool](https://docs.etendo.software/latest/available-tools/print-directory-tool.md)

###### Java Test Executor

This assistant is designed to execute tests for a Java Package, can be used to execute:

- All tests.
- Tests for a module.
- Tests for a single Java file.

This depends on the user input. The assistant will execute the tests and provide feedback to the user.

!!!info
    This assistant is intended and designed to be used as part of a Langgraph type supervisor, it can be used individually, but does not have full functionality.

**Tools** 

- [Test Run Tool](https://docs.etendo.software/latest/available-tools/test-run-tool.md)

###### Java Test Generator

This assistant generates tests for a single Java file. It reads the Java file and creates a test file with the same name and the suffix `Test` in the same package. The assistant generates test methods for each method in the Java file. The assistant has a Knowledge Base with the Java classes of Etendo Classic.
This assistant will generate the tests and execute them, checking for errors and providing feedback to the user.

!!!info
    This assistant is intended and designed to be used as part of a Langgraph type supervisor, it can be used individually, but does not have full functionality.

**Tools**

- [Read File Tool](https://docs.etendo.software/latest/available-tools/read-file-tool.md)
- [Write File Tool](https://docs.etendo.software/latest/available-tools/write-file-tool.md)
- [Test Run Tool](https://docs.etendo.software/latest/available-tools/test-run-tool.md)

##### Usage Example
1. To use this assistant, it is necessary to log in as `System Administrator` role and set the role access. For this, go to the **Assistant** window, select `Java Test Supervisor` and synchronize it. Then, go to the **Assistant Access* window and give access to the role.
2. Open Copilot and select `Java Test Supervisor`, then ask to the assistant what you need to create. A suggested input could be `Generate tests for the module com.etendoerp.examplemodule`.
3. The assistant will generate the tests and execute them, checking for errors and providing feedback to the user.


#### Message Creator

The **Message Creator** streamlines the process of creating and registering AD_Messages in Etendo Classic. By utilizing a webhook, it ensures efficient and error-free message creation while adhering to naming conventions and best practices. 

##### Tools

- [ApiCallTool](https://docs.etendo.software/latest/available-tools/openapi-tool.md)

##### Functionality

The **Message Creator** facilitates the creation of AD_Messages by interacting with Etendo Classic via a webhook. It validates the input parameters, enforces the proper format for search keys, and registers the message with the appropriate module. This assistant supports both parametric and non-parametric messages and ensures messages are immediately usable in Java code. 

The assistant performs the following tasks:

- **Validates Input Parameters**: Ensures required fields like module Java package, search key, message type, and message text are correctly provided.
- **Search Key Format Enforcement**: Confirms that search keys follow the required format: `PREFIX_DescriptiveName`, where:
  - `PREFIX` is the module's prefix in uppercase.
  - `DescriptiveName` is in CamelCase.
  - The total length does not exceed 32 characters.
- **Message Type Validation**: Confirms the message type is either `"I"` (Informative) or `"E"` (Error).
- **Registers the AD_Message**: Saves the message in the system, linking it to the specified module.

When creating a message, the assistant will request the following information:

- **Module Java Package**: The Java package of the module where the message will be created (e.g., `com.etendoerp.module`).
- **Search Key**: A unique identifier for the message following the `PREFIX_DescriptiveName` format.
- **Message Type**: The type of the message:
  - `"I"` for informative messages.
  - `"E"` for error messages.
- **Message Text**: The content of the message.

Notes:

- **Module In Development**: The module must be set to development mode to allow the assistant to create it.

- **Java Usability**: After creation, the AD_Message can be used in Java with:  
  `OBMessageUtils.messageBD("MESSAGE_SEARCH_KEY")`.

- **Parametric Messages**: If the message requires parameters, `%s` can be added to the text, and the assistant will provide a code snippet to use `String.format`.  
  Example:  
  **Message Text**: `"The value %s is invalid."`  
  **Java Usage**:  
  ```java
  String formattedMessage = String.format(OBMessageUtils.messageBD("PREFIX_InvalidValue"), value);
  ```

##### Usage Example

1. Provide the required inputs:
    - Module Java Package: `com.etendoerp.module`
    - Search Key: `MODPREFIX_InvalidInput`
    - Message Type: `E`
    - Message Text: `"The input provided is not valid."`

    ![MessageCreator_1.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/MessageCreator_1.png)

2. The assistant validates and sends the request to the webhook.

3. Upon successful creation, the system will confirm:
    - Message created with the key: `MODPREFIX_InvalidInput`.

    ![MessageCreator_2.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/MessageCreator_2.png)

4. The message is ready for use in Java:
    ```java
    OBMessageUtils.messageBD("MODPREFIX_InvalidInput");
    ```

#### Module Creator

Etendo Classic allows you to create modules that provide additional functionality that can be deployed independently. These modules can range from additional reports to content packs (translations, chart of accounts, etc.).

##### Tools

- [ApiCallTool](https://docs.etendo.software/latest/available-tools/openapi-tool.md)

##### Functionality

The Module Creator streamlines the process of building independent modules that enhance Etendo Classic with new functionalities, such as additional reports or content packs like translations or charts of accounts. By using the `CreateModuleWebHook`, the tool automates several critical steps. It begins by validating essential details like the module's Java package, name, description, version, and database prefix, ensuring everything is properly formatted and complete. After validation, it assigns the necessary database prefix, registers the module within the system, and allows for optional inclusion of dependencies. 

To start creating your module in Etendo, follow the steps below.

- Provide the following information:

- **Javapackage**: The Java package of the module (e.g., `com.etendoerp.copilot.prueba`).
- **Module Name**: A name for your module (e.g., `Test Module`).
- **Description**: A brief description of the module's functionality.
- **Help/Comment**: Additional help text or comments regarding the module (optional).
- **Version**: The version of the module (e.g., `1.0.0`).
- **Type**: The type of the module. Option are "M" for standard module, "T" for template module.
- **DBprefix**: A prefix for the database objects associated with the module (must be in uppercase, e.g., `FJTS`).
- **License**: The license type for the module. Options are:
    - `Apache License 2.0`
    - `Openbravo Public License`
    - `Mozilla Public License 1.1`
    - `Etendo Commercial License`

- Call the `CreateModuleWebHook`. The `CreateModuleWebHook` simplifies the creation process by automating various steps. This webhook will:

- Validate all the parameters (such as module name, version, and license).
- Assign the database prefix.
- Register the module.
- Optionally, add module dependencies.

- When invoking the webhook, the **body parameters** should follow this structure:

```json
body_params = {
  "Javapackage": "com.etendoerp.copilot.test",
  "SearchKey": "testmodule",
  "ModuleName": "Test Module",
  "HelpComment": "This is a test module created for demonstration purposes.",
  "Description": "This module adds test functionality to Etendo Classic.",
  "Version": "1.0.0",
  "Prefix": "FJTS",
  "Type": "M",
  "ModuleLicense": "Etendo Commercial License"
}
```

!!!note
    The database prefix must always be in uppercase.

##### Usage Example

1. To use this assistant, it is necessary to log in as `System Administrator` role and set the role access. For this, go to the **Assistant** window, select Module Creator and synchronize it. Then, go to the **Assistant Access** window and give access to the role.

2. Open Copilot and select Module Creator, then ask to the assistant what you need to create.

![ModuleCreation.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/ModuleCreation.png)

If we go to the **Module** window we can find the created record.

![ModuleCreation2.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/ModuleCreation2.png)

The module will also have the dependency, in this case **Core** with the prefix and data package mentioned by the user.

![ModuleCreation3.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/ModuleCreation3.png)

![ModuleCreation4.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/ModuleCreation4.png)

![ModuleCreation5.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/ModuleCreation5.png)

Once the webhook has been called, it will automatically:

- Register the module in Etendo.
- Assign the **Java package** and **database prefix**.
- Handle the specified **license**.
- Set up basic **module dependencies**.

You can confirm that the module has been created by navigating to the `Module` window in Etendo.

!!!note
    If your module depends on other modules (besides the Core module), you need to manually add these dependencies in the `Dependency` tab of the module window.


!!!info
    For further customization and development, refer to the official [Etendo Developer Guide](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-a-page-in-etendo-documentation/) for more detailed steps.


#### Module Translation Creator

##### Tools

- [XML Translation Tool](https://docs.etendo.software/latest/available-tools/xml-translation-tool.md)

##### Functionality

The Module Translation Creator automatically translates the content of a module.

Before using the assistant, the user will need to have a translation module already created with the XML files to translate.
!!!note
    For more info check [How to Create and Update Translation Modules](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-create-and-update-translation-modules.md){target="_blank"}.

Then, provide the path to the translation module to the assistant (e.g., `/modules/com.etendoerp.mymodule.es_ES`) and it will automatically translate all the files to the desired language.

##### Usage Example
1. Create a new module in the `Module` window
    - Check the flag "Is translation module".
    - Select the module languague (e.g., `Spanish (Spain)`). 
    - It should depend on the module you want to translate.


2. If it's the first time the language is configured:
    - In the `Language` window, look for the language selected and mark the "System Language" checkbox.
    - Execute the button `Verify Languages``.
![](https://docs.etendo.software/latest/assets/drive/6WuHosAvU6L3iCuQ8tLMzV9c_gTxjhk7whON6b3eWd67uR9bJKlrynGI686XRxXjNXngvQcL_5u8kmI-RnBCxq7ofI1QlZB1MlyTFRU2yf6Ukdrqy6768L7Wo6osm7Spy7nCHAbguCxp81ulGHaThEN57W--AXtajOXOuPzdj8ikaOeV4ZEj5r7UhjtuCw.png)


3. Then, go to the "Import/Export Language" window, select the language and execute the Export process (this may take some time to finish).
![](https://docs.etendo.software/latest/assets/drive/fSONWx4HIzELPexas8U20mjvn5nJk774cD_YAickqJG7dmvdLXlBOTGbOIKYMGpMB8EKzU3kjl6FrvLdls6SChKoj97VYKL9sHE9UKF1hX7M1T3b8XIGZ9cbR36-fDYADIMa2XvOX8UM0uFyXyCNukb_j1AHWoHTcFmXIzfSJA2-WMfDrqtZeNhXTL5L6w.png)


4. The previous step will generate XML files for all modules in the `attachments/lang/es_ES` folder. Locate the module you want to translate and copy the files to the translation module in the `modules/<JAVAPACKAGE.OF.THE.MODULE>/referencedata/translation/es_ES` folder.
![](https://docs.etendo.software/latest/assets/drive/ZfvOyXa64_eeQCCVz-c5tcjgrfgoQVsfqkUhnYxW6ORFoyXfXqb3fLk3yqageghTnCGzdD5EbbOaftppa2X3isDBNPXYF0PtpbW0p4ve9cmRO-FxzCWWi7vE4p5VYD2ZJ8Ojfm_wq6CiXRUkiajLxB82MviBtLrPEaWcVvbz-JaTIkIQ5750LctJGZ43Iw.png)


5. Now, to use this assistant it is necessary to log in as `System Administrator` role and set the role access. For this, go to the **Assistant** window, select Module Translation Creator and synchronize it. Then, go to the **Assistant Access** window and give access to the role.


6. Open Copilot and select Module Translation Creator, then ask to the assistant to translate the files in your module (e.g., `/modules/<JAVAPACKAGE.OF.YOUR.MODULE>`).
![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/ModuleTranslation_1.png)


7. To apply the changes, execute these commands:

``` bash title="Terminal"
./gradlew install.translation -Dmodule=javapackage
./gradlew smartbuild -Dlocal=no
```

#### Refactor Assistant

An expert code refactoring assistant focused on improving clarity, maintainability, and originality while preserving functionality. The assistant analyzes code files, identifies areas for improvement, and suggests changes to variable names, documentation, and structures for better readability. It ensures imports, method names, and entity names remain unchanged to maintain functionality. Workflow includes code analysis, user confirmation, applying changes, and verifying updates. Clear explanations and a summary of changes are provided for user understanding.
##### Functionality
- The refactor assistant receives a file path.
- The assistant will read the file.
- The assistant may ask to it knowledge base for suggestions.
- The assistant will write the file with the changes, overwriting the original file.
- The assistant will read the file again to verify the changes.
##### Tools
- [Read File Tool](https://docs.etendo.software/latest/available-tools/read-file-tool.md)
- [Write File Tool](https://docs.etendo.software/latest/available-tools/write-file-tool.md)
##### Usage Example
1. To use this assistant, it is necessary to log in as `System Administrator` role and set the role access. For this, go to the **Assistant** window, select Refactor Assistant and synchronize it. Then, go to the **Assistant Access** window and give access to the role.
2. Open Copilot and select Refactor Assistant, then ask to the assistant what you need to refactor. For example, a suggested input could be `Refactor the file located in the path /modules/com.etendoerp.module/src/com/etendoerp/module/MyClass.java changing the variables to spanish`.
3. The assistant will read the file, analyze it, and suggest changes.
4. The assistant will write the file with the changes, overwriting the original file.

#### Reference Creator

The **Reference Creator** creates references in the Etendo Application Dictionary. This tool allows for example the addition of new list references to a specific module within the Etendo database via an HTTP request to a webhook.

It is particularly useful in the development process, enabling system administrators or developers to define new references that can later be utilized in applications. This tool automates the creation of these references, ensuring **consistency and adherence** to quality standards in the configuration.

##### Tools

- [Create Reference Tool](https://docs.etendo.software/latest/available-tools/create-reference-tool.md)

##### Functionality

The **Reference Creator** is designed to facilitate the creation of references, for example, it is possible to create list of references in the Etendo Application Dictionary by providing the assistant the necesary input parameters. 

##### Usage Example 

1. To use this assistant, it is necessary to log in as `System Administrator` role and set the module in which the changes will be exported in development.

2. Open Copilot and select Reference Creator

    ![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/create-references/create-references-0.png)

3. Ask the assistant which reference type you need to create

    ![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/create-references/create-references1.png)

4. The Create References Tool will process these parameters, verify the access token, build the request body and call the Etendo webhook to create the reference.

    In the Reference window, Etendo shows all the fields with the corresponding information generated and in the List Reference tab, it is possible to see the new list reference created. 

    ![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/create-references/create-references-2.png)


5. Once the development is validated by the developer, and the necessary manual modifications are made, it is possible to export the changes in the corresponding module.

    ```title="Terminal"
    ./gradlew export.database --info
    ```


#### Tables, Windows and Tabs Creator

!!!warning
    The Tables, windows and tabs assistant is currently in its beta testing phase. While it is designed to automate the process of creating windows and tables, there are instances where tasks may not be fully completed. Specifically, there may be issues with adding foreign keys, correctly naming elements, etc.

    For optimal results, it is recommended to proceed step-by-step and be as specific as possible in your instructions to the Assistant. This will help mitigate potential errors and ensure more accurate task completion.

The **Tables, Windows and Tabs Creator** is designed to help developers and speed up the process of creating windows, tabs, fields, system elements, menu entries, etc.  as well as tables and columns in the database.
It is possible to give an input with all the necessary information, or the assistant will go step by step, asking for more information. Also, depending on the context, the assistant can make suggestions that the developer must confirm.

##### Tools

- [**DDL Tool**](https://docs.etendo.software/latest/etendo-copilot/available-tools/ddl-tool.md): This tool allows to registering and creating tables on Etendo and on the database using queries generated with the parameters given on the tool. The query is adjusted for the user needs, for example, if the user wants to add a column with a default value, the tool can receive a value or not if the element should not has a default value.

- **Multiples Webhooks**: These webhooks are used to run the java files that create or modify the fields on the Etendo Classic and execute process or queries. These webhooks are: `RegisterTable`, `CreateTable`, `RegisterFields`, `RegisterWindowAndTab`, `RegisterColumns`, `ElementsHandler`, `SyncTerms`.


##### Functionality

!!! info
    With this assistant, it is possible to create: 

    - **Tables and Columns**: both tables and columns are created based on user specification and the supported types are `string`, `number`, `tableDir`, `date`, `text` and `boolean` (each field will have default lengths unless specified).  
    - **Windows**: only Mantein type windows are supported
    - **Tabs**: Can be created at multiple levels, although it is important to make it clear to the assistant to add the corresponding foreign keys.
    - **Fields**: Fields are created from columns, respecting the same name but without *"_"*.
    - **Elements**: The elements will be created automatically, sharing the name of the columns, but replacing the *"_"* with spaces. The help and description fields will also be added automatically.
    - **Menu**: A menu entry is automatically created, the developer must manually place it in the desired position.

 - Ask the **Tables, Windows and Tabs Creator** for a window to add in the system and the module database prefix where the table will be exported. The assistant will then register in the system the table and create it in database, including the mandatory columns. At this stage the assistant checks if the module is in development. If is not, the assistant prompts the user for a correct prefix from a module in development. Additionaly, the assistant checks if the table name is already in use; if it is, asks the user to provide a new name. In case the window belongs to the module under development, new columns, tabs and fields can be added.

- The assistant will ask to the user for information to add, like columns, data types, help and description, etc.

- The user must confirm the steps or set up a modification about the given information.


##### Usage Example 

1. To use this assistant, it is necessary to log in as `System Administrator` role and set the module in which the changes will be exported in development.

2. Open Copilot, and select Tables, Windows and Tabs Creator 
    ![dev-assistant.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/dev-assistant-1.png)

3. Ask the assistant for what you need to create.
    ![dev-assistant.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/dev-assistant5.png)


4. With the task complete, it is necessary recompile with a smartbuild and restart Tomcat

    ```title="Terminal"
    ./gradlew smartbuild --info
    ```
    ![dev-assistant2.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/dev-assistant2.png)

5. Window in the System, the window can be viewed with the user role.
    ![dev-assistant3.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/dev-assistant3.png)
    ![dev-assistant4.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/dev-assistant4.png)

6. Once the development is validated by the developer, and the necessary manual modifications are made, it is possible to export the changes in the corresponding module.

```title="Terminal"
./gradlew export.database --info
```

#### Unique Java Test Assistant
This assistant is designed to generate tests for a single Java File or an Etendo Classic module. 
##### Functionality
- This assistant receives a Java file path or a module path, but its main functionality is to generate tests for a single Java File. 
- In the case of a given Module, the assistant will check for file without tests and generate for them.
- The assistant expected behaviour is to read the Java file and generate a test file with the same name and the suffix `Test` in the same package. 
- The assistant will also generate the test methods for each method in the Java.
- This assistant has a Knowledge Base with the Java classes of Etendo Classic.

##### Tools

- [Print Directory Tool](https://docs.etendo.software/latest/available-tools/print-directory-tool.md)
- [Read File Tool](https://docs.etendo.software/latest/available-tools/read-file-tool.md)
- [Write File Tool](https://docs.etendo.software/latest/available-tools/write-file-tool.md)

!!!warning Disclaimer
    The test generators provided by this tool are designed to deliver an initial batch of test cases efficiently, based on the parameters provided. However, it is important to note that the generated tests serve as a starting point and may require additional work to:

    - Fix potential errors in the generated test cases.
    - Improve test coverage.
    - Adapt them to the specific scenarios of your project or environment.

    We recommend carefully reviewing the generated tests, executing them in the development environment, and making the necessary adjustments to ensure they meet the expected functional and quality requirements.

##### Usage Example
1. To use this assistant, it is necessary to log in as `System Administrator` role and set the role access. For this, go to the **Assistant** window, select Java Test Generator and synchronize it. Then, go to the **Assistant Access** window and give access to the role.
2. Open Copilot and select Unique Java Test Assistant, then ask to the assistant what you need to create. A suggested input could be ```Generate tests for the Java file located in the path /modules/com.etendoerp.module/src/com/etendoerp/module/MyClass.java```.
3. The assistant will generate the tests and execute them, checking for errors and providing feedback to the user.



#### Webhook Creator

**Webhook Creator** is an assistant designed to facilitate the creation and registration of webhooks in Java. A webhook acts as a communicator between applications or services, allowing data to be automatically sent from one system to another in real-time when a specific event occurs.

##### Tools

- [API Call Tool](https://docs.etendo.software/latest/available-tools/openapi-tool.md)

- [Read File Tool](https://docs.etendo.software/latest/available-tools/read-file-tool.md)
  
- [Write File Tool](https://docs.etendo.software/latest/available-tools/write-file-tool.md)

##### Functionality

This assistant simplifies webhook creation by automatically generating the necessary Java files and registering them in the Etendo ERP system, taking examples of indexing code readeing the classes extends of `BaseWebhookService`. It is necessary give some useful information:

- **Module Package**: The Java package where the new process will be saved. It should follow the format `java.package.of.the.module`.
- **Webhook Name**: The name of the Java file to be created.
- **Parameters**: The parameters will be added to the webhook for the use.

##### Usage Example

1.  To use thisassistant, it is necessary to log in as `System Administrator` role and set the role access. For this, go to the **Assistant** window, select Webhook Creator and synchronize it. Then, go to the **Assistant Access** window and give access to the role.

2. Open Copilot and select Webhook Creator, then ask to the assistant what you need to create.

	![webhook.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/WH1.png)

3. Then, this is the result given by the assistant.

    ![webhook.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/WH2.png)

    ![webhook.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/bundles/dev-assistant/WH3.png)




==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /Developer Guide/Etendo Copilot/Tools/Overview
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/overview
## Article Content: 
### Overview

Here you can find a list of the all the available tools in the Copilot bundle.

- [Attach File Tool](https://docs.etendo.software/latest/available-tools/attach-file-tool.md)
- [Audio Tool](https://docs.etendo.software/latest/available-tools/audio-tool.md)
- [Codbar Tool](https://docs.etendo.software/latest/available-tools/codbar-tool.md)
- [Create Reference Tool](https://docs.etendo.software/latest/available-tools/create-reference-tool.md)
- [Database Query Tool](https://docs.etendo.software/latest/available-tools/database-query-tool.md)
- [DDL Tool](https://docs.etendo.software/latest/available-tools/ddl-tool.md)
- [Docker Tool](https://docs.etendo.software/latest/available-tools/docker-tool.md)
- [File Copy Tool](https://docs.etendo.software/latest/available-tools/file-copy-tool.md)
- [File Downloader Tool](https://docs.etendo.software/latest/available-tools/file-downloader-tool.md)
- [OpenAPI Interaction with Copilot](https://docs.etendo.software/latest/available-tools/openapi-tool.md)
- [Optical Character Recognition (OCR) Tool](https://docs.etendo.software/latest/available-tools/ocr-tool.md)
- [PDF to Images Tool](https://docs.etendo.software/latest/available-tools/pdf-to-images-tool.md)
- [Print Directory Tool](https://docs.etendo.software/latest/available-tools/print-directory-tool.md)
- [Read File Tool](https://docs.etendo.software/latest/available-tools/read-file-tool.md)
- [Send Email Tool](https://docs.etendo.software/latest/available-tools/send-email-tool.md)
- [Tavily Tool](https://docs.etendo.software/latest/available-tools/tavily-tool.md)
- [Template Tool](https://docs.etendo.software/latest/available-tools/template-tool.md)
- [Test Run Tool](https://docs.etendo.software/latest/available-tools/test-run-tool.md)
- [Uncompress Tool](https://docs.etendo.software/latest/available-tools/uncompress-tool.md)
- [Write File Tool](https://docs.etendo.software/latest/available-tools/write-file-tool.md)
- [XLS Tool](https://docs.etendo.software/latest/available-tools/xls-tool.md)
- [XML Translation Tool](https://docs.etendo.software/latest/available-tools/xml-translation-tool.md)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Attach File Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Attach File Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/attach-file-tool
## Article Content: 
### Attach File Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.openapi.purchase`

#### Overview

The **Attach File tool** uploads a file using the `AttachFile` webhook after verifying its existence and accessibility. It involves reading the file from a specified path, encoding it in base64, and then sending it to Etendo using the webhook, along with necessary identifiers and an access token.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

The primary purpose of the Attach File Tool is to facilitate the process of attaching files to records in Etendo, by ensuring the file is accessible and correctly encoded before upload. It is highly valuable in automated processes that require attaching files to records. 

This process consists of the following actions:

- **Receiving Parameters**

    The tool receives an input object containing the following keys:

    - `filepath` : The path of the file to upload.

    - `ad_tab_id` : A 32-character string which is the ID of the Tab.

    - `record_id` : A 32-character string which is the ID of the record.

- **File Verification**

    The tool checks if the file at the specified path exists and is readable. If the file does not exist or is not accessible, it returns an error.

- **File Reading and Encoding**

    If the file is available, it reads the file content and encodes it in base64 format.

- **Authentication**

    The tool retrieves an access token from the extra information stored in the thread context. If no access token is provided, it returns an error.

- **API Communication**

    The tool constructs the necessary headers and body parameters and sends the encoded file to the specified API endpoint using an HTTP POST request.

- **Returning the Result**

    Once the operation is completed, the tool returns the result of the API call, which could be a success or an error message.

#### Usage Example

Imagine there is a file at `/home/user/document.pdf`, and it is necessary to upload it to a specific record identified by its tab ID and record ID. The tool is used as follows:

- **Input**:

    ```
    {
    "filepath": "/home/user/document.pdf",
    "ad_tab_id": "1234567890abcdef1234567890abcdef",
    "record_id": "abcdef1234567890abcdef1234567890"
    }
    ```

- **Output**:

    ```
    {
    "result": { "message", "Attachment created successfully"}
    }
    ```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Audio Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Audio Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/audio-tool
## Article Content: 
### Audio Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.toolpack`

#### Overview

The Audio Tool is a tool that recognizes text from audio files. It can be used in Assistants to extract information from audio files, such as transcribing interviews, meetings, or podcasts. The tool accepts an audio file path as input and returns the text extracted from the audio.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

This tool automates the process of **text extraction from audio files**. This can be particularly useful for tasks such as transcribing conversation or speech from audio recordings. The tool uses a speech-to-text model to convert the audio content into text.

Using this tool consists of the following actions:

- Receiving Parameters:

    - The tool receives an input object that contains the path of the audio file to be processed.
    - **path**: The path of the audio file to be processed.
       
- Obtaining the File:

    - The tool retrieves the file specified in the **path** parameter. It verifies the existence of the file and ensures it is in a supported format (this tool uses the [Whisper model of OpenAI ](https://platform.openai.com/docs/guides/speech-to-text)).


- Returning the Result:

    - The tool returns a JSON object containing the extracted text from the audio file.
    - **message**: The extracted text from the audio file.

#### Usage Example

##### Requesting text recognition from an audio file

Suppose you have an audio at `/home/user/request.mp3` and you want to extract text related to an invoice information: 

**Audio Content**
``` txt
Can you create a new invoice for the customer John Doe with the following items: 2 Product A, 1 Product B and 3 Product C
```

- Use the tool as follows:

    - Input:

        ```
        {
            "path": "/home/user/request.mp3"
        }
        ```

    - Output:

        ``` Json title="Output Json"
        {
            "message": "Can you create a new invoice for the customer John Doe with the following items: 2 Product A, 1 Product B and 3 Product C"
        }
        ```

!!!note
    Remember that the result of the tool can be used in other tools, for example, you can use the result of the Audio Tool as input for an agent that uses the extracted text to create an invoice.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Codbar Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Codbar Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/codbar-tool
## Article Content: 
### Codbar Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.ocrtool`

#### Overview

The **CodbarTool** is a tool that reads barcodes from image files. It accepts an array of file paths as an input and returns an array of barcodes found in those images.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

This tool allows assistants to **read barcodes from multiple images**, which can then be applied in inventory management, product tracking, and document processing among other areas.

Using this tool consists of the following actions: 

- Receiving Parameters: 

    - The tool receives an input object containing a key called filepath which is a list of strings. Each string represents the file path of an image to be analyzed.
    - Example input:

        `{"filepath": ["/tmp/test.png", "/tmp/test1.png"]}`

- Processing Images: 

    - For each file path provided, the tool opens the image and attempts to decode any barcodes present.
    - It utilizes the pyzbar library to decode barcodes from the images.

- Returning the Result: 

    - If barcodes are found, the tool collects and returns them in a list.
    - Example output:

        `{"message": ["123456789012", "987654321098", ...]}`


!!!info
    The tool utilizes the PIL library to open image files.


!!!note
    The **pyzbar library** is used to decode barcodes from the image. If no barcodes are found, it returns None for that image. If barcodes are found, it decodes each barcode’s data.

#### Usage Example

- Suppose there is an image at `/tmp/goods-receipt.png` and you want to extract the barcode related to the goods receipt information:

The following is an example image of a goods receipt: 

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/available-tools/codbar-tool-0.jpg)

- The tool will be used as follows: 

    - Input

        ```
        `{"filepath": ["/tmp/goods-receipt.png"]}`

        ```

    - Output

        ```
        `{"message": ['ALV-4066905', '871000003252']}`

        ```

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Create Reference Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Create Reference Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/create-reference-tool
## Article Content: 
#### Overview

The **Create Reference Tool** is an Etendo Copilot tool developed by Python to create references in the database. This tool is useful to automate the creation of references saving time and manual effort.  

#### Functionality

This process consists of the following actions:

- **Argument Processing** 

    Takes various input parameters defined in a pydantic model:

    - `i_prefix`: The prefix of the module in the database.
    - `i_name`: The name of the reference.
    - `i_reference_list`: A comma-separated list of reference items.
    - `i_help` (optional): Help text for the reference.
    - `i_description` (optional): Description of the reference.

- **Access Token Verification**

Gets and verifies the access token from the thread context (`ThreadContext`).

- **Request Body Construction**

Constructs the body of the request parameters for the webhook.

- **Webhook Call**

Uses the `call_webhook` function to make an `HTTP POST` request to the Etendo webhook endpoint, providing the necessary parameters and the access token.

- **Result Handling**

Returns the result of the request to the webhook, which may contain a success message or an error in JSON format.


The system returns a dictionary with the result of the operation. For example:

- If the request was successful:

```
 { `success: true, message: Reference created successfully`}

```

- If there was an error:

```
 { `error: Description of the error`}

```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Database Query Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Database Query Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/database-query-tool
## Article Content: 
### Database Query Generator tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.dbquerytool`

#### Overview

This tool allows asking to Etendo for tables available in the database and the columns of each table. It also allows Copilot to execute SQL queries in the database that are generated by the Assistant.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Installation
The tool is included with the SQL Expert installation, see the [SQL Expert installation guide](https://docs.etendo.software/latest/user-guide/etendo-copilot/bundles/sql-expert.md) for more information.

#### Configuration
This tool can be configured in an Assistant:

1. Add **Database Query Generator tool** into the Assistant configuration, that you want to use the tool. Go to Assistant window, pick the Assistant and add the tool to the App in the **Tools** tab.

2. Re-Sync the Assistant running **Sync Assistant** process to get the tool available in the Assistant.

3. Check that the role of the user has permissions to use Secure Web Services in the **Role** Window. ![role configuration](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/available-tools/database-query-tool-3.png)
4. Check that the WebHook **DBQueryExec** is enabled and has the Role Access configured for the role.
    Example for *F&B International Group Admin*:
    ![DBQueryExec WebHook configuration](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/available-tools/database-query-tool.png)

5. Check that the `ETENDO_HOST` is configured in the `gradle.properties` file.

6. Can you check if the tool is available for the Assistant, asking for it. 
    <figure markdown>
    ![DBQueryGenerator tool](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/available-tools/database-query-tool-2.png){align=right width=300}
    </figure>


#### Security

For security and data segmentation:

- The tables instrospection is limited for the readable tables of the user.

- The tool automatically parses the `doSecurityCheck(entity)` with the conditions for a correct access to the Readable **Client** and **Organization**, for example: `doSecurityCheck(inv)`  for Invoices, is converted to

``` sql
inv.ad_client_id IN ('23C59575B9CF467C9620760EB255B389','0')  AND inv.ad_org_id IN ('0','E443A31992CB4635AFCAEABE7183CE85','B843C30461EA4501935CB1D125C9C25A','BAE22373FEBE4CCCA24517E23F0C8A48','DC206C91AA6A4897B44DA897936E0EC3','2E60544D37534C0B89E765FE29BC0B43','19404EAD144C49A0AF37D54377CF452D','7BABA5FF80494CAFA54DEBD22EC46F01')
```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: DDL Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/DDL Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/ddl-tool
## Article Content: 
### DDL Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.devassistant`

#### Overview

The **DDLTool** is an Etendo Copilot tool developed in Python to create a table in the database by adding mandatory columns and specific columns that the user wants. In addition, it is possible to create and register tables, windows, items and menu options in the system so that data can be displayed.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

The **DDL Tool** works with modes, each for a specific action. Through the prompt, the assistant can infer the mode needed to do the task requested by the user. The tool has a variable that contains a list with the available modes so the assistant will choose the most appropriate mode for the task. 

Assistants can choose from these modes:

- **REGISTER_TABLE:** This mode registers a table on the Etendo System, creating a table header. It requires a table name and a prefix of a module in development. The tool can infer fields like Java Class Name, Description, and Help. This mode has a method that fix the java class name with a camelcase style. The tool uses a webhook to execute a Java file named `RegisterTableWebHook` to check if a table name is already registered and then sets parameters as prefix, java class name, data acces level, etc. with Etendo rules.

- **CREATE_TABLE:** Creates a table on the database using the table name and prefix to build the query with mandatory columns and necessary constraints. The mandatory constraints with the `ad_org` and `ad_client` table are created withe a method that fix the name if these are longer that 32 characters. This query is executed in the database with an Etendo webhook that runs a Java file named CreateTableWebHook. This file uses the parameters given to execute the query with the user data (name of database, local host, etc).

- **ADD_COLUMN:** This mode modifies the previously created table instead of creating a new one. The tool has a list of acceptable data types for each column and this is chosen by the assistant, that also infers if the column can have a null value or if it needs a default value. If unsure, it waits for more information. It can generate the correct query if the column data type needs a constraint. This mode uses the same webhook `CreateTableWebHook`, cause should execute also a shortest query, but it is build with different params that assistant suppose (data type of the column, if can be null or not, name of the column, default values, etc).

- **REGISTER_COLUMNS:** This mode is executed automatically after the `ADD_COLUMN` mode. It creates columns on Etendo System from the database with the previous created columns by calling a webhook that runs a Java file named RegisterColumns. This mode ensures that is the correct and unique table where add the columns.

- **SYNC_TERMINOLOGY:** Cleans the terminology, removing "_" and adding spaces. It works by calling a webhook to execute a Java file named `SyncTermsWebHook`.

- **REGISTER_WINDOW_AND_TAB:** Registers a window and a table to show the data in the application, also add a menu to provide an easy access. It first checks if there is a window already created with the same name. If necessary, the tool can force the creation with a parameter called ForceCreate. This mode uses the `RegisterWindowAndTabWebHook` java file.

- **REGISTER_FIELDS:** Registers the fields of a tab in Etendo System to be recognized for it. It works by calling a webhook to run a Java file.

#### Usage Example 

In the section of Assistant, it is possible to configure the assistants and the tool that they can use.

![ddl-tool.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/available-tools/ddl-tool/ddl-tool.png)

Also in Assistant, it can insert a prompt where it is possible to indicate the tool to use. It is useful to provide a workflow example so the IA can use it to build its own workflow. 

![ddl-tool1.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/available-tools/ddl-tool/ddl-tool1.png)

Prompt Example:

*You are a developer assistant that can create register tables for Etendo.*

*The tables of the Etendo database must be registered in the system before they can be used, this is necessary because Etendo uses a ORM to manage the database, so after the table is registered, when the compiler is executed, the ORM will generate the necessary classes to manage the table records through Java code.*

*The process of create and register a table has the following steps:*

*1. Register the table in the system.*

*2. Create the table in the database, with the basic and mandatory columns. *

*3. Add the specific columns for the table. In other words, the columns that are specific to the table. *

*4. Execute the process to register the columns of the table in the system.*

*5. Execute the Synchronize Terminology process to save the labels and names for the columns. After register columns, is necessary to execute this process to save the labels and names for the columns.*

*6. Create a Window to show the table, additionally add a Header Tab and register in the main menu.*

*7. Execute the process to register all the fields necessary in the Tab.*

*8. Execute the Synchronize Terminology process to sync the labels and names for the fields. Its necessary to execute this process every time a field is registered.*

*9. Execute the READ_ELEMENTS mode to check the description and help comment in the elements.*

*10. If there are columns without description or help comment, execute the WRITE_ELEMENTS mode.*

*11. Sync the terminology again.*

*Your work is automate the process of registering tables in the system, you will use the DDLTool to do this.*

*The DDLTool is a tool that allows you to do operations based on "mode". The modes are:*

*REGISTER_TABLE: This mode is used to ...*

*CREATE_TABLE: This mode is used to ...*

*ADD_COLUMN: This mode is used to ...*

*REGISTER_COLUMNS: This mode is used to ...*

*REGISTER_WINDOW_AND_TAB : This mode is used to ...*

*SYNC_TERMINOLOGY: This mode is used to ...*

*REGISTER_FIELDS: This mode is used to ...*

*READ_ELEMENTS: This mode is used to ...*

*WRITE_ELEMENTS: This mode is used to ...*

*ADD_FOREIGN: This mode is used to ...*

*If you do not detect any mode or don't understand the request, ask to the user what they want to do. *

*Example workflow:*

*User: I want to register a table with name Dog and prefix MOD.*

*Step 1: Register the table in the system. At this point you must execute the DDLTool with the REGISTER_TABLE mode.*

*Step 2: Create the table in the database.*

*Step 3: Add the specific columns for the table. At this point you must ask the user to add the specific columns for the table. *

*Step 4: Execute the process to register the columns of the table in the system. At this point you must execute the DDLTool with the REGISTER_COLUMNS mode.*

*Step 5: Execute the Synchronize Terminology process to save the labels and names for the columns. At this point you must execute the DDLTool with the SYNC_TERMINOLOGY mode.*

*Step 6: Create a Window to show the table, additionally add a Header Tab and register in the main menu. 
*
*Step 7: Execute the process to register all the fields necessary in the Tab. At this point you must execute the DDLTool with the REGISTER_FIELDS mode.*

*Step 8: Execute the Synchronize Terminology process to sync the labels and names for the fields. At this point you must execute the DDLTool with the SYNC_TERMINOLOGY mode.*

*Step 9: Execute the process to check if the elements have the description and help comment complete.*

*Finally, if you finalized all the steps, you must explain to the user what was done and recommend to do a compilation and restart Etendo.*
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Docker Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Docker Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/docker-tool
## Article Content: 
### Docker Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.toolpack`

#### Overview

The **DockerTool** is a tool that manages Docker containers to execute Python or Bash code. It allows users to run isolated commands, copy files into containers, and clean up containers automatically after a period of inactivity.

!!!info
    To include this functionality, the Copilot Extensions Bundle must be installed. For instructions, visit the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For details about versions, core compatibility, and new features, check [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

This tool facilitates **code execution in isolated Docker environments**, supporting workflows for development, automation, and system tasks. The primary functionalities include:

##### Parameters

- **Executor**: The type of executor for the code (`python` or `bash`).
- **Code**: The code to be executed inside the container.
- **Files to Copy**: An optional list of file paths to copy into the container for execution.

##### Execution Workflow

1. **Container Creation**:
    - A Docker container is created if it doesn't already exist.
    - Containers are named using the format `tempenv-copilot-{conversation_id}` for traceability.

2. **File Transfer**:
    - Files specified in the `Files to Copy` parameter are uploaded to the container at the specified paths.

3. **Command Execution**:
    - The tool runs the specified Python or Bash code.
    - The output is captured and returned to the user.

4. **Container Cleanup**:
    - Containers are automatically deleted after 1 hour of inactivity.


#### Usage example

- **Example Input**

```json
{
    "executor": "bash",
    "code": "ping -c 4 google.com",
    "files_to_copy": []
}
```

- **Example Output**

```json
{
    "message": "PING google.com (172.217.12.206): 56 data bytes\n64 bytes from 172.217.12.206: icmp_seq=0 ttl=115 time=12.5 ms\n64 bytes from 172.217.12.206: icmp_seq=1 ttl=115 time=12.3 ms\n64 bytes from 172.217.12.206: icmp_seq=2 ttl=115 time=12.4 ms\n64 bytes from 172.217.12.206: icmp_seq=3 ttl=115 time=12.6 ms\n\n--- google.com ping statistics ---\n4 packets transmitted, 4 packets received, 0.0% packet loss\nround-trip min/avg/max/stddev = 12.3/12.5/12.6/0.1 ms"
}
```

!!!info
    This tool uses the official **Python 3.10-slim** Docker image for execution and can execute both Python and Bash commands.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: File Copy Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/File Copy Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/file-copy-tool
## Article Content: 
### File Copy Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.toolpack`

#### Overview

The **File Copy Tool** receives two paths: one from a file and one from a directory. Its function is to copy the specified file to the specified directory and return the path of the copied file.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

This tool is useful when you need to duplicate files in different locations within the file system. This can be essential for backup tasks, file organization, or preparing files for processing in specific locations. This simplifies the process of copying files and managing directories, ensuring the existence of the destination directory and providing clear feedback with the path of the copied file.

This process consists of the following actions:

- **Receiving Parameters**

    The tool receives an input object containing two keys:

    - `source_path`: path to the source file to be copied.
    - `destination_directory`: path to the destination directory where you want to copy the file.

- **Creating the Output Directory**

    If the output directory does not exist, the tool automatically creates it to ensure that the copy operation does not fail due to a missing path.

- **Copying the file**

    Use Python's `shutil.copy` function to copy the source file to the target directory.

- **Returning the Result**

    Once the process is complete, the tool returns an object containing the full path to the copied file in the output directory.

#### Usage Example

If you have a file in `/home/user/file.txt` and you want to copy it to the `/home/user/destination_directory` directory, you would use the tool as follows:

- **Input**
```
{"source_path": "/home/user/file.txt", "destination_directory": "/home/user/destination_directory"}
```

- **Output**
```
{"file_path": "/home/user/destination_directory/file.txt"}
```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: File Downloader Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/File Downloader Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/file-downloader-tool
## Article Content: 
### File Downloader Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.toolpack`

#### Overview

The **File Downloader Tool** is designed to receive a URL and download the corresponding file to a temporary directory, returning the path to the temporary file. This tool is extremely valuable for any application that needs to dynamically interact with files on the web. It allows you to efficiently download files and store them temporarily, facilitating their later use and manipulation without the need to worry about file management in the system. In addition, it handles different types of content (text and binary) automatically, making the operation transparent and simple for the user.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

This tool is especially useful when you need to download files from the web for further processing without worrying about managing the files on the local system. It can be useful for tasks such as:

- Downloading images, documents or other files for analysis and processing.
- Getting files for temporary storage, avoiding the need for direct file system management.

This process consists of the following actions:

- **Receiving Parameters**
    
    The tool receives a URL as a string via the `file_path_or_url` parameter.

- **Verifying URL**
    
    It checks if the entry is a valid URL (starts with `http://` or `https://`).

- **Downloading File**

    - It performs an HTTP GET request to the URL.
    - If the request is successful (status code 200):
        - It attempts to determine the file name from the URL.
        - If the name cannot be determined, it determines a generic name such as
        `downloaded_file`.
        - It determines the content type of the file (text or other):
            - If text, it writes the contents to a temporary file with the extension `.txt`, if it does not have another extension.
            - If other, it copies the content to a temporary file with the corresponding extension.

- **Returning the Result**
    
    It returns a dictionary with the path to the temporary file created under the `temp_file_path` key.

- **Handling the Error**

    If the URL is invalid or the download fails, it returns a relevant error message.

#### Usage Example

If there is a file hosted at `https://example.com/file.txt` and it is necessary to download it temporarily:

- **Input**

```
file_path_or_url: "https://example.com/file.txt"
```

- **Output**

```
{"temp_file_path": "/path/to/temp/downloaded_file.txt"}
```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: OpenAPI Interaction with Copilot
## Article Path: /Developer Guide/Etendo Copilot/Tools/OpenAPI Interaction with Copilot
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/openapi-tool
## Article Content: 
### OpenAPI Interaction with Copilot

:octicons-package-16: Javapackage: `com.etendoerp.copilot.openapi`

:octicons-package-16: Javapackage: `com.etendoerp.copilot.openapi.purchase`


#### Overview

The OpenAPI Specification (OAS) defines a standard, language-agnostic interface to RESTful APIs which allows both humans and computers to discover and understand the capabilities of the service without access to source code, documentation, or through network traffic inspection. When properly defined, a consumer can understand and interact with the remote service with a minimal amount of implementation logic. Similar to what interfaces have done for lower-level programming, OAS removes the guesswork in calling the service. 

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

!!!info
    For more information, see the [OpenAPI Initiative](https://www.openapis.org/){target="_blank"}.

This specification can be useful for Copilot since it can be used as a guide to Copilot to interact with the services, without the need to know the implementation details and implementing specific code for each service is not be necessary.

#### Tools

- **Etendo API Tool**: This tool returns the OpenAPI Specification of the Etendo API, it can be used by Copilot to ask for the general information of the API (endpoints, and the descriptions of the endpoints) or the specific information of the endpoints(Parameters, responses, etc). The Etendo API Tool only returns the OpenAPI Specification of the Etendo API to insert purchase orders in Etendo.
Roughly speaking, this tool reads and returns information from the Swagger (OpenAPI Spec), allowing the Assistant to request general information from the API, for example to know what endpoints it has and what each one does. It can also request specific information about an endpoint (such as the shape of its body). This allows the helper, in real time, to investigate the structure of the API. In addition, if the API changes, the simple fact that the Swagger is updated will ensure that the assistant adapts to those changes.

    This Tool serves as an example and template, since a similar tool could be made to integrate it with another API, as long as it has an OpenAPI Specification. 

- **API Call Tool**: This tool allows Copilot to make a call to an API endpoint. 
This tool will be responsible for making the call to the API endpoint, and will return the response.

#### Defined Assistant

In the basic use case, a **Purchase Assistant** was implemented, in which an assistant is defined that knows the flow of how purchase orders are loaded. And it was provided with a Tool that allows reading the API specification (Etendo API Tool) and "understand" it. It was also given access to a Tool to make the API calls (APICallTool).

##### Configuration

 - In the module `com.etendoerp.copilot.openapi.purchase` there is a dataset with the basic configuration of the purchase assistant. It can be imported in the "Enterprise module management" window. 
 - After importing the configuration, it is necessary to configure the OpenAI model for the assistant and Sync the assistant.
 - Finally, give access to the role and configure the permissions in "Role" Window.
!!! note
    In the last paragraph of the prompt, the link "http://localhost:8080/etendo/?tabId=294&recordId={ORDER_HEADER_ID}" is a link for localhost, it is necessary to replace it with the real link of the Etendo system.

##### Other Configurations

- It is necessary to add the `gradle.properties` file with the following configuration:
``` properties
    ETENDO_HOST=http://localhost:8080/etendo
```
!!! warning
    Replace http://localhost:8080/etendo with the real url of the Etendo system.


#### Functionality

The combination of the prompt with the functional concepts, the tool that allows to read and analyze the OpenAPI Spec to see the available endpoints and the tool to make the API calls, allows the defined assistant to load the purchase and its lines.

#### How to integrate Copilot with other APIs

The case of the purchase assistant is just an implementation to respond to a need. But, the usefulness of this is that, using the OpenAPI Spec reading tool as a base, the same dynamics can be replicated for a different API. For example, if we want to integrate Copilot with a [PetStore API](https://petstore.swagger.io/){:target="_blank"} that has an OpenAPI Spec file, we can create a tool that reads that file and provides the information to the assistant. This way, the assistant will be able to make calls to the PetStore API, without the need to know the implementation details of the API. What we should do is the following:

- Create an app, describing in the app prompt the functionality we want the helper to perform. In this case, describing that we need the assistant to know how to look up the exchange rates for us.

The important thing is that the prompt is clear and that the assistant has the necessary context to perform the task. For example, in the case of the petStore assistant, the prompt should be clear that the assistant should be able to search for pets, add pets, etc. The prompt could be something like this:
    
    ``` 
        You are an assistant that can interact with the PetStore API. You can search for pets, add pets, etc. You have a PetStore API Tool that can read the OpenAPI Spec file of the PetStore API. You also have an API Call Tool that allows you to make calls to the PetStore API.
        The recommended way to interact with the PetStore API is first to use the PetStore API Tool to read the OpenAPI Spec file and understand the available endpoints, without specifiying a specific endpoint(take a look at the general information of the API, like the endpoints and their descriptions). 
        Then, the PetStore API Tool can be used to read the specific information of the endpoints, like parameters, responses, etc. 
        Finally, the API Call Tool can be used to make the call to the API endpoint.
    ```

- Create a tool, using the example of the EtendoAPITool, that reads the OpenAPI Spec file, that can be remote or local. This tool should provide the API information. If it is an external API, it is recommended that it reads the remote file provided by the API, so that it is updated on the fly, if the API changes.

For this example, we will create a PetStoreAPITool.py file in a tools folder of a module. You can see how to create a module in the [How to Create a Module](https://docs.etendo.software/latest/etendo-classic/how-to-guides/How_To_Create_a_Module.md) page.

Here is a sample code to take as a base:

``` Python
import os
import threading
from typing import Dict, Final, Type, Optional

from langchain_community.chat_models import ChatOpenAI
from langchain_community.utilities import RequestsWrapper
from langchain_core.tools import Tool
from pydantic import BaseModel, Field

from copilot.core import utils
from copilot.core.tool_wrapper import ToolWrapper
from copilot.core.utils import copilot_debug


class PetStoreAPIToolInput(BaseModel):

    endpoint: Optional[str] = Field(None,
                                    description="The endpoint of the API we want to get the information. If not provided, returns the general information of the API, listing all the endpoints. With description of each endpoint,but without the parameters or responses. "
                                                "It needs to include the Method and the Path of the endpoint. For example, if we want to get the information of the endpoint GET of the path /example, we need to provide the parameter endpoint with the value 'GET /example'. If the endpoint is provided, returns the information of that endpoint, with the parameters and responses."
                                    )


class PetStoreAPITool(ToolWrapper):
    name = "PetStoreAPITool"
    description = (''' This Tool, based on the OpenAPI specification, allows you to get information about the API,
    such as the url of the server, the endpoints, the parameters of each endpoint, the responses of each endpoint, etc.
    It has one optional parameter, endpoint, which indicates of what endpoint of the API we want to get the information. It needs
    to include the Method and the Path of the endpoint. For example, if we want to get the information of the endpoint
    GET of the path /example, we need to provide the parameter endpoint with the value "GET /example".
    If not provided, returns the general information of the API, listing all the endpoints, with description of each endpoint,
    but without the parameters or responses. If the endpoint is provided, returns the information of that endpoint, with the
    parameters and responses.
    ''')
    args_schema: Type[BaseModel] = PetStoreAPIToolInput

    def run(self, input_params, *args, **kwargs):
        try:
            api_spec_file_url = "https://petstore.swagger.io/v2/swagger.json"
            url = "https://petstore.swagger.io/v2/"
            endpoint = input_params.get('endpoint')

            copilot_debug(f"PetStoreAPITool: endpoint: {endpoint}")
            # read the file from the internet or from the local file
            raw_api_spec = read_raw_api_spec(api_spec_file_url)

            if endpoint is None or endpoint == "":
                response = get_general_info(raw_api_spec) # read the information of the API, like the endpoints names and descriptions
            else:
                response = get_specific_info(raw_api_spec, endpoint) # read the information of the specific endpoint, like the parameters and responses

            return response
        except Exception as e:
            response = {'error': str(e)}
            return response
```
This is a simple example, but it can be expanded to filter the information, to provide more details, etc. In the previous code, the functions read_raw_api_spec, get_general_info and get_specific_info are not defined, but they should be implemented to read the OpenAPI Spec file and return the information requested. 

- Sync the tool information in the "Copilot Tool" tab of Etendo Classic. Remember that is necessary to restart the Docker image using `./gradlew resources.down` and `./gradlew resources.up` tasks. Ensure that the tool is loaded by Copilot.
![Sync tool info](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/available-tools/openapi-how-to.png)

- Configure the Tool created in the App, together with the APICallTool, which is a tool included in the module (```com.etendoerp.copilot.openai```) and is generic for any simple API.
![Configure the Assistant](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/available-tools/openapi-how-to-2.png)

- Sync the assistant and try it out.

This way, we can create assistants for any API, as long as we have the OpenAPI Spec file. The assistant will be able to read the API and make the calls, without the need to know the implementation details of the API. 
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Optical Character Recognition (OCR) Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Optical Character Recognition (OCR) Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/ocr-tool
## Article Content: 
### Optical Character Recognition (OCR) Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.ocrtool`

#### Overview

The Optical Character Recognition (OCR) Tool is a tool that recognizes text from images or pdfs. It can be used in Assistants to extract information from images or pdfs that are uploaded to the chat.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

This tool automates the process of **text extraction from image-based files or PDFs**. This can be particularly useful for tasks such as document digitization, data extraction, and content analysis. 

Using this tool consists of the following actions:

- Receiving Parameters:

    - The tool receives an input object that contains two keys:

        - **path**: The path of the image or PDF file to be processed.
        - **question**: A contextual question specifying the information to be extracted from the image. This is mandatory for precise results.

- Obtaining the File:

    - The tool retrieves the file specified in the **path** parameter. It verifies the existence of the file and ensures it is in a supported format (JPEG, JPG, PNG, WEBP, GIF, PDF).

- PDF Conversion:

    - If the input file is a PDF, it is converted to an image format (JPEG) using the **pypdfium2** library. Each page of the PDF is rendered as a separate image.

- Image Conversion:

    - Other image formats are processed directly or converted to JPEG if necessary.

- Image Processing:

    - The image is processed using a Vision model powered by GPT. This model interprets the text within the image and extracts the relevant information based on the provided **question**.

- Returning the Result:

    - The tool returns a JSON object containing the extracted information from the image or PDF.

#### Usage Example

    
##### Requesting text recognition from an image/pdf


Suppose you have an image at `/home/user/invoice.png` and you want to extract text related to an invoice information:

The following is an example image of an invoice:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/available-tools/ocr-tool.png)


- Use the tool as follows:

    - Input:

        ```
        {"path": "/home/user/invoice.png", "question": "Give me the content of this invoice"}

        ```

    - Output:

        ``` Json title="Output Json"
        {
            "company": {
                "name": "F&B España, S.A.",
                "tax_id": "B-1579173",
                "address": "Pg. de Gracia, 123 2-1ª",
                "city": "08009 - Barcelona (BARCELONA)"
            },
            "invoice": {
                "title": "This is a Sales invoice",
                "number": "1000000",
                "currency": "EUR",
                "date": "15-02-2011"
            },
            "customer": {
                "name": "Restaurantes Luna Llena, S.A.",
                "contact": "Ana Cortes",
                "phone": "092765188",
                "address": "Pl. Mayor, 78",
                "postal_code": "76764"
            },
            "items": [
                {
                "reference": "ES0024",
                "product_name": "Agua sin Gas 1L",
                "uom": "Unit",
                "quantity": 25000,
                "price": 1.13,
                "total": 28250.00
                },
                {
                "reference": "ES0021",
                "product_name": "Bebida Energética 0,5L",
                "uom": "Unit",
                "quantity": 45000,
                "price": 1.49,
                "total": 67050.00
                },
                {
                "reference": "ES1000",
                "product_name": "Cerveza Ale 0,5L",
                "uom": "Unit",
                "quantity": 33000,
                "price": 2.48,
                "total": 81840.00
                },
                {
                "reference": "ES1002",
                "product_name": "Cerveza Lager 0,5L",
                "uom": "Unit",
                "quantity": 45000,
                "price": 2.64,
                "total": 118800.00
                },
                {
                "reference": "ES0030",
                "product_name": "Cola de Cereza 0,5L",
                "uom": "Unit",
                "quantity": 40000,
                "price": 0.83,
                "total": 33200.00
                },
                {
                "reference": "ES0032",
                "product_name": "Limonada 0,5L",
                "uom": "Unit",
                "quantity": 40000,
                "price": 0.83,
                "total": 33200.00
                },
                {
                "reference": "ES0023",
                "product_name": "Vino Blanco 0,75L",
                "uom": "Unit",
                "quantity": 36000,
                "price": 3.05,
                "total": 109800.00
                },
                {
                "reference": "ES0025",
                "product_name": "Vino Rosado 0,75L",
                "uom": "Unit",
                "quantity": 36000,
                "price": 5.83,
                "total": 209880.00
                },
                {
                "reference": "ES1004",
                "product_name": "Vino Tinto 0,75L",
                "uom": "Unit",
                "quantity": 36000,
                "price": 5.07,
                "total": 182520.00
                },
                {
                "reference": "ES0037",
                "product_name": "Zumo de Naranja 0,5L",
                "uom": "Unit",
                "quantity": 45000,
                "price": 1.13,
                "total": 50850.00
                },
                {
                "reference": "ES1014",
                "product_name": "Zumo de Piña 0,5L",
                "uom": "Unit",
                "quantity": 33000,
                "price": 1.13,
                "total": 37390.00
                }
            ],
            "payment_terms": "30 days",
            "totals": {
                "subtotal": 927640.00,
                "tax": {
                "rate": "IVA 18%",
                "amount": 166975.20
                },
                "total": 1094615.20
            }
        }
        ```

##### Result Chaining

!!!note
    Remember that the result of the tool can be used in other tools, for example, you can use the result of the OCR Tool in a tool that writes the information in a database or sends it to a web service. 
==ARTICLE_END==
==ARTICLE_START==
# Article Title: PDF to Images Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/PDF to Images Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/pdf-to-images-tool
## Article Content: 
### PDF to Images Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.toolpack`

#### Overview

The **PDF to Images Tool** is a tool that converts a PDF file into an array of images, with each image representing a page of the PDF. The tool utilizes specialized Python libraries for PDF processing and image handling to achieve this conversion efficiently.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

This tool allows assistants to convert PDF documents into image formats. This is particularly useful for scenarios where individual pages of a PDF need to be processed as images, such as in digital archiving, document review, or further image analysis tasks.

It is invaluable for any automated workflow that requires handling PDF contents as image data. It simplifies the process of converting PDF pages to images, ensuring each page is accurately rendered and saved as a high-quality image. This tool is essential in fields such as digital archiving, where documents need to be preserved in an easily accessible and viewable format, and in applications involving image analysis, where each page of a PDF document can be independently processed.

Using this tool consists of the following actions:

- **Receiving Parameters** 

    The tool receives an input object that contains the following key:

    - path

        (str): the path to the PDF file to be converted.

- **Processing**

    - Validation: The tool first checks if the provided PDF path points to an existing file. If the file does not exist, it raises an exception with a relevant error message.

    - PDF Loading: The tool uses the pypdfium2 library to load the PDF document.

    - Page Rendering: For each page in the PDF:

        - The page is rendered at a scale of 2.0 to produce a high-quality image.

        - The rendered bitmap is then converted to a PIL (Python Imaging Library) image.

    - Temporary Storage: Each converted image is temporarily stored on the filesystem at a predefined path (`/tmp/page_{page_number}.png`).

    - Collecting Results: Paths to the stored images are collected in a list, which is returned as the final output.

- **Returning the Result**

    Once the conversion process is completed, the tool returns a list of file paths, each pointing to the respective converted image for each page of the PDF.


#### Usage Example

If you have a PDF file located at `/home/user/document.pdf` and you want to convert its pages into images, you would use the tool as follows:

- **Input**:

```
{
  "path": "/home/user/document.pdf"
}
```

- **Output**:

```
[
  "/tmp/page_0.png",
  "/tmp/page_1.png",
  "/tmp/page_2.png"
  // paths for all pages
]
```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Print Directory Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Print Directory Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/print-directory-tool
## Article Content: 
### Print Directory Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.toolpack`

#### Overview

The **Print Directory Tool** is a tool designed to print files and directories from the current directory or from a specified upstream directory. It allows the option to list the contents recursively.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).
    
This tool is extremely valuable for file system management and monitoring. It makes it easy to view the directory structure, either locally or upwards, and allows for detailed audits of the structure. Its ability to ignore specific directories common in development environments ensures that listings are relevant and clean, making the tool efficient and practical.

#### Functionality

This tool is used when you need to get a clear view of the file and directory structure in a specific directory on the system, either the current directory or one of its parent directories. It can be useful for:

- Auditing and reviewing the file structure.
- Automate operations that depend on the existence of certain files.
- Obtain directory listings for further processing.

This process consists of the following actions:

- **Receiving Parameters**

    The tool receives two key parameters:

    - Recursive (boolean): It indicates whether to list subdirectories recursively.
    - `parent_doubledot_qty` (integer): It specifies how many parent directories to ascend from the current directory.

    **Input example**

    ```
    {
    "recursive": true,
    "parent_doubledot_qty": 2
    }
    ```

    Calculation of the Directory to List:

    - Calculates the directory path based on the number of parents specified.
    - For example, if `parent_doubledot_qty` is 2, it will go up two levels from the current directory (../../).

- **Directory list**

    - If recursive is True, it will use `os.walk` to list all files and subdirectories recursively.
    - If recursive is False, it will use `os.listdir` to list only the contents of the specified directory.

- **Returning the Result**

    It returns a dictionary with the list of files and directories under the message key.

#### Usage Example

If you want to recursively list the files and directories in the grandparent directory of the current directory:

- **Input**
```
{ "recursive": true, "parent_doubledot_qty": 2 }
```
- **Output**
```
{ "message": ["/path/to/parent/dir/file1", "/path/to/parent/dir/subdir/file2", ...] }
```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Read File Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Read File Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/read-file-tool
## Article Content: 
### Read File Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.toolpack`

#### Overview

The **Read File Tool** is designed to read the contents of files given a filepath parameter. It provides a simple way to access the contents of text files on the local system.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

This tool is especially useful to access the contents of a file for processing or viewing. It can be used in several situations, such as:

- Reading configuration files.
- Accessing logs and log files.
- Viewing or processing data stored in text files.

This process consists of the following actions.

- **Receiving Parameters**

    The tool receives an input parameter called `filepath` which is the path to the file to be read.

- **Reading File**
    - It opens the file specified by `filepath`.
    - It reads the entire contents of the file.

- **Returning the Result**
    It returns a dictionary with the contents of the file under the `message` key.

#### Usage Example

If you want to read the contents of the `/tmp/test.txt` file:
    
- **Input**
```
{ "filepath": "/tmp/test.txt" }
```
- **Output**
```
{ "message": "Content of the read file..." }
```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Send Email Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Send Email Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/send-email-tool
## Article Content: 
### Send Email Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.toolpack`

#### Overview

The **Send Email Tool** is designed to send emails. This tool facilitates sending emails in an efficient and structured way. It accepts the following input parameters: subject (the email subject), mailto (the recipient's email address), and html (the HTML content of the email). As output, it returns a message indicating the result of sending the mail. 

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

This tool provides the assistant with:

- Automation: It automates the sending of emails in web applications and systems.
- Flexibility: It allows selecting between different sending methods (Resend or SMTP), depending on the environment configuration.
- Efficiency: It facilitates the management of email notifications and communications, improving operational efficiency.

This tool is essential for developers and system administrators who need to easily integrate email functionalities into their applications or services.

#### Setup

To use this tool, it is necessary to configure the variable `MAIL_METHOD`:

- SMTP: It uses the SMTP protocol to send mail. It configures and sends mail using an SMTP server such as Gmail. The SMTP is the default value for this variable. Additionally, credentials must be setup: `MAIL_FROM` with the sender email and `SMTP_PASSWORD` with the sender password.

For example:

``` groovy title="gradle.properties"
MAIL_METHOD=SMTP
MAIL_FROM= example@example.com
SMTP_PASSWORD= ******
```
- resend: In this case, the [resend API service](https://resend.com/){target="\_blank"} is used, designed to resend email requests. In case this is selected, it is necessary to set up the variable `RESEND_API_KEY`. For example:

``` groovy title="gradle.properties"
MAIL_METHOD=resend
RESEND_API_KEY=******
```

#### Functionality

This tool is useful in any application or service that needs to send emails automatically. It can be used for notifications, updates, order confirmations, password resets, among other things.

This process consists of the following actions:

- **Processing Arguments** 

    It takes the input parameters specifying the subject, recipient and HTML content of the mail.

- **Verifying Sending Method** 

    It determines the sending method using a `MAIL_METHOD` environment variable. The options are mentioned in the [Setup](#setup) section above.

- **Sending Mail**
    
    Depending on the sending method, it configures and sends mail with the information provided.

- **Returning the Result**
    
    Returns a message indicating if the mail was sent successfully or if there was an error. For example:
    
    ```
    { “message”: “Mail sent successfully”}
    ```
 
    if the mail was sent successfully.

    ```
    { “message”: “Mail method not supported”}
    ```
    
    if the sending method is not supported.

#### Usage Example

Imagine you want to send a notification email. The input parameters for the assistant would be:

- `subject`: Account update
- `mailto`: user@example.com
- `html`: 
    ```html
    <h1>Account Upgrade</h1>
    <p>Your account has been successfully upgraded.</p>
    <p><p>Your account has been successfully upgraded.
    ```


The Send Email Tool will process these parameters and select the configured sending method. It will then send the mail and return a message indicating whether the mail was sent successfully.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Tavily Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Tavily Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/tavily-tool
## Article Content: 
### Tavily Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.toolpack`

#### Overview 

The **TavilySearchTool** is a custom tool designed to perform searches using the Tavily search engine, which is known for allowing users to search the Internet for various types of information.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Configuration 

##### Tavily API key Configuration

1. Visit the [Tavily website](https://tavily.com/){target="_blank"} and sign up for an account.
2. Once logged in, navigate to the API key section of your account.
3. Generate a new API key.
4. It is necessary to add the `gradle.properties` file with the following configuration:

    ``` groovy title="gradle.properties"
    TAVILY_API_KEY=<your_api_key_here>
    ```

5. Restart Copilot service

    ``` bash title="terminal"
    ./gradlew resources.down resources.up
    ```


#### Functionality

This tool is used to interface with the Tavily search engine and retrieve search results for a given query.

Everytime this tool is called, the parameter to use is a JSON like:

```json 
{ "query": "What is the capital of Spain?" }
```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Template Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Template Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/template-tool
## Article Content: 
### Template Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.toolpack`

#### Overview

The **Template Tool** is a template for creating new tools in Python-based applications. It is designed to provide a basic structure on which to build custom functionality. The input parameters it accepts are: input1 and input2. The output consists of a message that confirms a predetermined action.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

This tool is useful for developers who want to create new tools quickly following a standard format. It can be used as a starting point to develop specific functions without having to worry about the initial code setup. It provides the user with:

- Standardization: It facilitates the creation of new tools following a standard format, ensuring consistency in development.
- Development Speed: It speeds up the development process by providing a predefined basic structure.
- Flexibility: It allows developers to modify and customize functionality according to the specific needs of their application.

Using this tool consists of the following actions:

- **Processing Arguments**

    It takes input parameters that are in JSON format. If the input is a string, it converts it to a JSON object; if it is already a JSON object, it uses it directly.

- **Accessing Parameters**
    
    It extracts the values of input1 and input2 from the provided JSON object.

- **Personalized Code**
    
    It contains a space where you can add specific code to perform the desired actions using input1 and input2.

- **Returning the Result**

    It returns a message that currently reads `{“message”: “Mail sent successfully”}`, but can be customized according to the action performed.

#### Usage Example

Imagine you want to create a tool that adds two numbers together. We would use the Template Tool as follows:
    
- input1: 3
- input2: 5

We can add the necessary code inside the **code here** section to perform the addition:

```
result = p_input1 + p_input2
return {“message”: f “Sum result is {result}”}
```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Test Run Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Test Run Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/test-run-tool
## Article Content: 
### Test Run Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.toolpack`

#### Overview

The **Test Run Tool** is designed to execute Java tests using Gradle, providing an efficient way to run tests in Java projects within a specific environment.

!!!info
    To include this functionality, the Copilot Extensions Bundle must be installed. For more information, follow the instructions in the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For information about available versions, core compatibility, and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

This tool is especially useful for running and validating Java test suites. It can be used in various scenarios, such as:

- Running specific tests or groups of tests to ensure functionalities are correctly implemented.
- Integrating automated tests into the development workflow.

The process consists of the following actions:

**Receiving Parameters**

The tool receives the following input parameters:

- `test_targets`: One or more tests or packages to execute.
- `working_directory`: The directory where the `gradlew` script is located.

**Running Tests**

- A Gradle command is constructed and executed with the specified tests.
- The execution is performed in the specified working directory.

**Returning the Result**

Returns a summary of the test execution along with details of passed and failed tests.

#### Usage Example

If you want to run specific tests in the `/path/to/erp` directory, the input and output format would be as follows:

- **Input**

```json
{
  "test_targets": ["com.etendoerp.webhookevents.WebhookSetupTest"],
  "working_directory": "/path/to/erp"
}
```

- **Output**

```json
{
  "summary": "Some tests failed. Review the details below.",
  "details": {
    "passed_tests": [
      "Test 1 PASSED>"
    ],
    "failed_tests": [
      "Test 2 FAILED> Reason"
    ]
  },
  "raw_logs": "Complete logs in case of failure"
}
```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Uncompress Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Uncompress Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/uncompress-tool
## Article Content: 
### Uncompress Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.toolpack`

#### Overview

The **Uncompress Tool** is a utility designed to uncompress various types of compressed files and return the paths of the uncompressed files. It supports common file types including `zip`, `gzip`, `bzip2`, and `rar`.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

The primary purpose of the this tool is to streamline the process of extracting files from compressed formats. It is particularly useful in scenarios where automated file extraction is needed, such as data processing pipelines, backup restoration, and file management systems. By supporting multiple common compression formats and providing a straightforward interface for file extraction, it simplifies workflows involving compressed files and ensures efficient handling of data archives.

This process consists of the following actions.

- **Receiving Parameters**
    The tool expects a single input parameter:

    `compressed_file_path` : Path to the compressed file that needs to be uncompressed.

- **Determining the File Type**

    The tool inspects the file extension to determine the type of compressed file and selects the appropriate uncompression method.

- **Creating the Output Directory**

    The tool creates an output directory based on the name of the compressed file to store the uncompressed contents.

- **Uncompressing the File**

    The tool supports multiple compression formats and uses corresponding Python libraries to uncompress files:

    - `gzip` : Uses the `gzip` library to uncompress `.gz` files.

    - `bzip2` : Utilizes the `bz2` library to handle `.bz2` files.

    - `rar` : Employs the rarfile library to extract `.rar` files.

    - `zip` : Leverages the `zipfile` library to uncompress `.zip` files.

- **Returning the Result**

    After successfully uncompressing the files, the tool returns an object containing the paths of the uncompressed files.

#### Usage Example

If there is a compressed file at `/home/user/archive.zip` and it is necessary to uncompress it, the tool would be used as follows:

- **Input**:

```
{"compressed_file_path": "/home/user/archive.zip"}
```

- **Output**:

```
{"uncompressed_files_paths": ["/home/user/archive/file1.txt", "/home/user/archive/file2.jpg", ...]}
```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Write File Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/Write File Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/write-file-tool
## Article Content: 
### Write File Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.toolpack`

#### Overview

The **Write File Tool** is a tool for writing and editing files. It allows specifying the file you want to write, the content to write and the option to overwrite the file or not. It also allows you to specify the exact line where you want to write the content. This tool returns a message indicating the result of the operation.

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

This tool is useful in any application or system that needs to manipulate text files programmatically. It can be used to edit settings, record data, create log files, among other things. This makes it easier for the user to handle:

- File Manipulation: It facilitates editing and manipulation of text files without the need to manually open the files in an editor.
- Task Standardization: It standardizes writing files from different parts of an application.
- Security: It creates automatic backups when writing existing files, preventing data loss.

Using this tool consists of the following actions:

- **Processing Arguments**

    It takes the following input parameters:

    - `filepath`: It specifies the file (file path)
    - `content`: The content to write
    - `override`: Whether the file should be overwritten
    - `lineno`: The line on which the content should be written

- **Creating the File**

    If the specified file does not exist, it creates it.

- **Backup**

    If the file exists, it reads it and creates a backup copy of it by adding a timestamp to the file name (`.bak%timestamp%`).

- **Writing the Content**
    - Override: If the override option is enabled, the file is cleaned up and the specified content is written, either at the end of the file (if line number is not specified) or on a specific line.
    - No Override: If no override is chosen, the content is appended to the end of the existing file.

- **Returning the Result**
    It returns a message including the file path and whether a backup was created. For example:
    ```
    { “message”: “File /tmp/test.txt written successfully, backup: True”}
    ```
    if the file was modified and a backup was created.
    ```
    { “message”: “File /tmp/test.txt written successfully, backup: False”}
    ```
    if a backup did not need to be created.

#### Usage Example

Imagine we want to write *Hello World* in the file `/tmp/test.txt`, overwriting its contents, in the first line of the file. Our entry could be:
- filepath: /tmp/test.txt
- content: Hello World
- override: True
- lineno: 1

The Write File Tool will process these parameters, write *Hello World* to the first line of the `/tmp/test.txt` file and return a message indicating that the operation completed successfully and whether a backup was created.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: XLS Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/XLS Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/xls-tool
## Article Content: 
### XLS Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.toolpack`

#### Overview

The XLS Tool processes `XLS` or `CSV` files to extract data. It is designed to facilitate tasks such as parsing spreadsheet content, processing tabular data, and extracting specific information from XLS files. The tool accepts the file path of an data file and returns processed data based on defined parameters.

!!!info
    To include this functionality, the Copilot Extensions Bundle must be installed. Follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about available versions, core compatibility, and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

This tool automates the process of **data extraction from XLS files**. It is particularly useful for tasks such as reading financial data, extracting customer details, or parsing inventory records. The tool supports customizable processing logic to handle diverse data structures.

Using this tool consists of the following actions:

- **Receiving Parameters**:

    - The tool receives an input object containing the file path of the XLS file to be processed and optional parameters for data extraction.
    - **path**: The path of the XLS file to be processed.
    - **parameters**: Optional extraction parameters such as sheet name, specific rows, or columns.

- **Processing the File**:

    - The tool reads the XLS file from the specified path, verifies its existence, and ensures the file format is supported.
    - It processes the file based on the input parameters to extract the required data.

- **Returning the Result**:

    - The tool returns a JSON object containing the extracted data.
    - **data**: The processed data extracted from the XLS file.

#### Usage Example

##### Extracting data from an XLS file

Suppose you have an Excel file at `/home/user/data.xls` and you want to extract customer information from the file:

**XLS Content**
``` txt
| Customer ID | Name       | Purchase Amount |
|-------------|------------|-----------------|
| 1001        | John Doe   | 500             |
| 1002        | Jane Smith | 300             |
```

- Use the tool as follows:

    - **Input**:

        ```
        {
            "path": "/home/user/data.xls",
            "parameters": {
                "sheet": "Customers",
                "columns": ["Customer ID", "Name", "Purchase Amount"]
            }
        }
        ```

    - **Output**:

        ```Json title="Output Json"
        {
            "data": [
                {"Customer ID": "1001", "Name": "John Doe", "Purchase Amount": 500},
                {"Customer ID": "1002", "Name": "Jane Smith", "Purchase Amount": 300}
            ]
        }
        ```

!!!note
    The result of the tool can be used as input for other processes. For instance, the extracted customer data can be utilized to generate personalized marketing campaigns or invoices.


==ARTICLE_END==
==ARTICLE_START==
# Article Title: XML Translation Tool
## Article Path: /Developer Guide/Etendo Copilot/Tools/XML Translation Tool
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/xml-translation-tool
## Article Content: 
###  XML Translation Tool

:octicons-package-16: Javapackage: `com.etendoerp.copilot.xmltranslationtool`

#### Overview

The XMLTranslationTool directly translates XML files’ content based on the specified language attribute within the XML, allowing for effective and accurate localization across different languages. 

!!!info
    To be able to include this functionality, the Copilot Extensions Bundle must be installed. To do that, follow the instructions from the marketplace: [Copilot Extensions Bundle](https://marketplace.etendo.cloud/?#/product-details?module=82C5DA1B57884611ABA8F025619D4C05){target="\_blank"}. For more information about the available versions, core compatibility and new features, visit [Copilot Extensions - Release notes](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md).

#### Functionality

The XMLTranslationTool allows assistants to translate the content of XML files from one language to another, as specified within the XML itself. This is particularly useful in scenarios where localized versions of XML content are required for different regions or languages.

This tool is ideal for automated workflows that need to handle XML translations efficiently, enabling seamless adaptation of content for various languages. By directly translating XML content based on specified language attributes, it ensures accurate localization of text without manually editing individual files.

Using this tool consists of the following actions:

- **Receiving Parameters** 
    The tool receives an input object that contains the following key:

    - relative_path 

        (str): The relative path to the XML files directory where translation is required.

- **Processing**

    1. Validation: The tool first verifies if the provided relative_path points to an existing directory. If the directory does not exist, it returns an error message indicating the issue.

    2. Path Calculation: It calculates the absolute path of the XML directory based on the relative path provided.

    3. XML File Iteration: For each XML file in the directory:

        - Skip Condition: If a file is already translated, it skips the translation process.

        - Translation Process:
            
            - The tool uses OpenAI's API to translate each XML file's text content according to the target language specified within the XML's attributes.

            - Each unlocalized element is marked as "translated" after processing.

            - If all files are already translated, a message indicating this is returned.

    4. Collecting Results: Paths to the successfully translated XML files are collected in a list, which is returned as the final output.

- **Returning the Result**

    Once the translation process is completed, the tool returns a list of file paths, each pointing to a successfully translated XML file.

#### Usage Example

If you have XML files located at `/modules/com.etendoerp.webhookevents.es_es` that need translation, you would use the tool as follows:

- **Input**:

```
{
  "relative_path": "/modules/com.etendoerp.webhookevents.es_es"
}
```

- **Output**:

```
{
  "translated_files_paths": [
    "Successfully translated file /modules/com.etendoerp.webhookevents.es_es/AD_REF_LIST_TRL_es_ES.xml",
    "Successfully translated file /modules/com.etendoerp.webhookevents.es_es/AD_ELEMENT_TRL_es_ES.xml"
  ]
}
```
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Create Copilot Tools
## Article Path: /Developer Guide/Etendo Copilot/How to Guides/How to Create Copilot Tools
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/how-to-guides/how-to-create-copilot-tools
## Article Content: 
### How to Create Copilot Tools

#### Overview

This article explains how to create a new tool for Copilot.

#### Etendo Copilot

Etendo Copilot module allows the creation of tools that add functionality to it. These tools are developed in Python and run in the Docker container where Copilot runs. Next, we explain how to create a new tool for Copilot, in a new module. But you can also add a new tool in an existing module and it can contain several tools.

!!! note "Etendo Copilot is based on Langchain"
    The Langchain libraries are available by default in Copilot. You can use them in your tools. See [Langchain documentation](https://python.langchain.com/){target="_blank"} for more information.

##### Requirements
- Copilot module installed in Etendo Classic. If you do not have it, you can install it using the getting started guide for the Copilot API [Installation](https://docs.etendo.software/latest/developer-guide/etendo-copilot/installation.md){target="_blank"}.

##### Create a new tool
For this example, we will create a tool that will allow us to make a ping to a host. The tool will be called `Ping Tool` and will be located in the `com.etendoerp.copilot.pingtool` package.

!!! note "Create the classic module"
    
    Copilot tools are created within an Etendo Classic module. So the first thing we have to do is create an Etendo Classic module. 

1. The structure of the module will be as follows:

    ``` 
    modules
    └── com.etendoerp.copilot.pingtool
        ├── src-db 
        │   └── database
        │       └── sourcedata
        │           ├── AD_MODULE.xml
        │           ├── AD_MODULE_DBPREFIX.xml
        │           ├── AD_MODULE_DEPENDENCY.xml
        │           └── ETCOP_TOOL.xml
        ├── tools 
        │   └── PingTool.py
        ├── .gitignore
        ├── build.gradle
        └── tools_deps.toml
    ```
    *src-db*: Contains the database structure of the module. This folder is created automatically when creating and exporting the module from Etendo Classic.
   
    *tools*: Contains the tools of the module. Can contain one or more tools.
    
    *.gitignore*: Contains the files that will be ignored by git.
   
    *build.gradle*: Contains the configuration of the module. This file is created when the module is prepared to be published. See 
    [How to publish modules to GitHub repository](https://docs.etendo.software/latest/developer-guide/etendo-classic/how-to-guides/how-to-publish-modules-to-github-repository.md)
    
   
    *tools_deps.toml*: Contains the dependencies of the tools of the module. This file contains the dependencies of the tools of the module.


    

2. Its necessary to use a Dict as input. In order to do that, we have to create a new class that defines the inputs of the tool using pydantic. 
For the case of the PingTool, we will create a class called `PingToolInput` that will define the inputs of the tool. The class will be located in the `PingTool.py` file. Here is an example of a tool that receives a Dict as input, with the structure of the Dict defined in a class:
    
    !!!Warning 
        The SearchKey of the tool must be the same as the name of the class that extends the ToolWrapper class.

    ```python title="PingTool.py"
    import os
    from typing import Type, Dict

    from copilot.core.tool_input import ToolInput, ToolField

    from copilot.core.tool_wrapper import ToolWrapper  # Import the ToolWrapper class from the copilot.core.tool_wrapper module. This class is the one that must be extended to create a new tool.


    class PingToolInput(ToolInput):
        host: str = ToolField(
            title="Host",
            description='''The host to ping.''',
        )
        message_to_print: str = ToolField(
            default="default message!",  # Default value of the input, if there is no default value, the input is mandatory.
            title="Message to print",
            description=" Custom message to print before the ping result.",
        )


    class PingTool(ToolWrapper):
        name: str = 'PingTool'  # Name of the tool
        # Description of the tool.
        # This description tells Copilot what the tool does and based on this description it will decide if this tool will solve the user's request.
        description: str = (
            '''This tool receives a hostname and returns the ping result.''')
        args_schema: Type[ToolInput] = PingToolInput  # The args_schema attribute must be a Pydantic model that defines the inputs of the tool.
        
        #return_direct = True  # If return_direct is True, the tool will return the result directly, without execute any other tool. If return_direct is not defined, the tool output can be used as input of another tool. This is only available for tools in the Langchain agent. In the OpenAI agent, the return_direct attribute is taken into account, and the tool output can be used as input of another tool.

        def run(self, input_params: Dict, *args,
                **kwargs):  # The run method is the one that will be executed when the tool is executed.
            import requests  # Import the necessary libraries to execute the tool.
            # It is recommended to import the libraries inside the run method to avoid conflicts with other tools.
            host = input_params.get('host')  # Get the host input from the input_params dictionary.
            # Get the message_to_print input from the input_params dictionary
            # or from the args attribute that contains the default values of the inputs.
            message_to_print = input_params.get('message_to_print') or self.args.get('message_to_print').get('default')
            print('MESSAGE:' + message_to_print)
            response = requests.get(host)
            return {"status_code": response.status_code}  # The run method must return a dictionary with the outputs of the tool.
    ```
    !!! note "Enviroment variables"
        Automatically, Copilot reads the `gradle.properties` file of Etendo Classic and add configuration as environment variables. The name of the environment variable will be the same as the name of the property. The only difference is that the . is replaced by _. For example, if we have the property `COPILOT_PORT` in the gradle.properties file, Copilot will create the environment variable `COPILOT_PORT`. If we have the property `bbdd.sid` in the gradle.properties file, Copilot will create the environment variable `bbdd_sid`.
         This allows us to use the environment variables in the tools. 
        
    

3. Create the file `tools_deps.toml` in the root folder of the module. This file will contain the dependencies of the tools of the module. The content of the file follows the TOML format. The content of the file will be as follows:

    ``` toml
    [ToolName]
    dependency_name = "dependency_version"
    dependency_name = "dependency_version"
    ```
    For our example, the content of the file will be as follows:

    ``` toml
    [PingTool]
    requests = "*"
    ```
    The SearchKey of the tool must be the same as the name of the class that extends the ToolWrapper class. In our case, the SearchKey of the tool is `PingTool` and the name of the class that extends the ToolWrapper class is also `PingTool`. During the load of copilot, the tool will be loaded and the dependencies will be installed. Additionally, the dependencies will be tested to ensure that they are installed correctly.

    The version of the dependency can be specified or not. If the version is not specified, the latest version will be installed. If the version is specified, the version specified will be installed. The version can be specified with the following operators:
    ``` toml
    [PingTool]
    requests = "*" # Installing latest version
    requests = "==2.26.0" # Installing a specific version
    requests = ">=2.26.0" # Greater than or equal to a certain version
    requests = "<=2.26.0" # Less than or equal to a certain version
    requests = ">2.26.0" # Greater than a certain version
    requests = "<2.26.0" # Less than a certain version
    requests = ">=2.26.0,<=2.26.1" # Using version ranges
    requests = "~=2.26.0" # Tilde operator (~) for installing compatible versions
    
    ```


    !!! warning "Different name of depedency while installing and importing"
        If the name of the dependency is different from the name of the dependency that is imported in the tool, it is necessary to specify the name of the dependency that is imported in the tool. For example, if the dependency is installed with the name `pyscopg2-binary` but is imported with the name `psycopg2`, we can use a | to specify both names. If this clarification is not made, the tool will not be able to import the dependency to "test" if it is installed correctly, this will throw a warning, but the tool will be able to run correctly.
        The content of the file will be as follows:


        ``` toml
        [PingTool]
        requests2 = "*" 

        [OtherTool]
        "pyscopg2-binary|psycopg2" = "*"   # First name is the name of the dependency that is installed, second name is the name of the dependency that is imported. In the tool code, we will do import psycopg2
        ```

4. Additionaly, open the *Copilot Tool* window as *System Administrator* role. In this window we will create a new record, with the following information:

    - *Search key*: The tool search key. The same name as the tool class must be used, this field is mandatory to find the tool in the `Sync Tool Structure` process. 
    - *Name*: The name of the tool. It is the name that will be shown in the Copilot UI.
    - *Description*: This is a description of what the tool does. This field is automatically populated when the tool is synchronized.
    - *Module*: The module where the tool is located. This field is a reference to the module that we have created in the first step, and where these configurations will be exported.
    - *JSON Info*: Contains a JSON descrition of the tool. This field is automatically filled when the tool is synchronized. 
 

    The last step is getting the Tool parameter information from the tool class. This information is used to create the parameters in the Assistant. To do so, we have to execute the button `Sync Tool Structure` in the `Skill/Tool` window. This process will load the *Description* and the *JSON Info* fields of the tool. This data is obtained from the tool class.

    !!! Warning Before Sync Tool Structure
        It is mandatory to have copilot running and the tool loaded in the copilot container. If the tool is not loaded, the process will not retrieve the tool parameters.

    ![how-to-create-copilot-tools.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/how-to-create-copilot-tools.png)

    After creating the record, we have to export the module to persist the changes in the database:
    ```bash title="Terminal"
    ./gradlew export.database
    ```
    Once the *Copilot Tool* is defined, this tool must be associated to the assistant(s), to do so, a record must be created in the *tools* tab of the **Assistant** window, this record will allow us to activate or deactivate the tool.

    ![how-to-create-copilot-tools-2.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/how-to-create-copilot-tools-2.png)

    !!! note "OpenAI Assistants tools"
        Remember to execute `Sync Assistant` process after linking the tool, if not, the tool will not be available in the OpenAI Assistant.

5. Finally, restart the Copilot service and check that the tool and its dependencies have been installed correctly. 
To test the developed Tool, you can ask to an assistant that has the tool associated. The assistant will execute the tool and return the result.


#### Interacting with Etendo

When creating tools that need to interact with Etendo Classic, the best approach is to use the Etendo Classic Event Webhooks API. This API facilitates authentication through an authentication token and triggers a Webhook, which can receive a dictionary with information as a parameter and perform various actions.

##### Utilizing Etendo Classic Event Webhooks API

The Etendo Classic Event Webhooks API is a standard feature in Etendo, and it allows for easier integration with tools through Copilot utilities. For example, if you need to trigger a WebHook named `UpdateOrderDescription` to update an order in Etendo Classic, receiving a document number and a description as parameters, you can do so by creating a specific tool.

##### Example Tool: UpdateSOTool

Here is an example of a tool that triggers the `UpdateOrderDescription` WebHook:

```python

from typing import Type, Dict

from copilot.core.etendo_utils import call_webhook, get_etendo_token, get_etendo_host
from copilot.core.tool_input import ToolInput, ToolField
from copilot.core.tool_wrapper import ToolWrapper, ToolOutput, ToolOutputMessage

class UpdateSOToolInput(ToolInput):
   documentNo: str = ToolField(description="DocumentNo of the Sales Order")
   description: str = ToolField(description="New description to set in the Sales Order")

class UpdateSOTool(ToolWrapper):
   name: str = "UpdateSOTool"
   description: str  = "Set description in a Sales Order by DocumentNo2"
   args_schema: Type[ToolInput] = UpdateSOToolInput
   return_direct: bool = False

   def run(self, input_params: Dict = None, *args, **kwargs) -> ToolOutput:
       documentNo = input_params['documentNo']
       description = input_params['description']
       token = get_etendo_token()
       # Build the body of the request
       body = {
           "documentNo": documentNo,
           "description": description
       }
       url = get_etendo_host()
       response = call_webhook(url=url, webhook_name="UpdateOrderDescription", access_token=token, body_params=body)
       return ToolOutputMessage(message=response)
```

##### Explanation of Tool Components

The above tool leverages utilities provided by Copilot Core:

- `get_etendo_token()`: This function returns the authentication token for Etendo Classic, allowing the tool to operate within the user's session. Copilot, acting as a "proxy," manages these sessions.

- `get_etendo_host()`: This function returns the URL of the Etendo Classic instance, which is required to trigger the WebHook. This host URL is configured as `ETENDO_HOST` in the `gradle.properties` configuration file.

- `call_webhook(url:String, webhook_name:String, access_token:String, body_params:Dict)`: This function triggers the WebHook, passing the Etendo Classic URL, the WebHook name, the authentication token, and the parameters needed by the WebHook.

##### Conclusion: Simplified WebHook Integration

By using these utilities, you can easily call Etendo Classic WebHooks, leaving only the logic of building the request body and the specific tool's logic itself. This approach streamlines the process of creating tools that interact with Etendo Classic.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to execute Copilot through the console
## Article Path: /Developer Guide/Etendo Copilot/How to Guides/How to execute Copilot through the console
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/how-to-guides/how-to-execute-copilot-through-console
## Article Content: 
### How to execute Copilot through the console

#### Overview

This article explains how to execute Copilot through the console. This is useful when you want to test a tool or assistant without using the Etendo Classic interface.

#### Prerequisites
* Access to the Etendo Classic host.

#### Command
```bash
./gradlew copilot.do -Phost='https://my.etendo.instance/etendo' -Papp_id="Module Creator" -Pusername=my-user -Ppassword=my-password -Pquestion="Can you create a Module called 'Test Module? "  --console=plain 
```

#### Parameters

* **-Phost**: The URL of the Etendo Classic host. If not provided, the default host http://localhost:8080/etendo will be used.
* **-Pusername**: The Etendo Classic username, who will execute the command. This user must have the necessary permissions to execute the command.
* **-Ppassword**: The Etendo Classic password who will execute the command. 
* **-Prole**: The role of the user who will execute the command. If not provided, the default role will be used.
* **-Papp_id**: The ID of the assistant to be executed. It can be the **exact** name of the assistant or the **ID** of the assistant.
* **-Pquestion**: The question you want to ask the assistant.

* **--console=plain**: This parameter is used to avoid the Gradle console from showing the progress bar.


!!! warning
    - The parameters ```username``` and ```password``` are mandatory.
    - If not provided, the script will ask for them. This is to avoid storing sensitive information in the command history.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to Export Tools and Assistants
## Article Path: /Developer Guide/Etendo Copilot/How to Guides/How to Export Tools and Assistants
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-copilot/how-to-guides/how-to-export-tools-and-assistants
## Article Content: 
### How to Export Tools and Assistants

#### Overview

When developing in Etendo Copilot, it is possible to export assistants and tools. This documentation details how to export them and how to make sure that, when installing the module, the configurations are ready to use, allowing a **plug and play** process.

#### Exporting Assistants

There are two main methods for exporting assistants: export it as a dataset where the configured assistant is exported within an Etendo Classic dataset or export as a System Administrator, where the assistant(s) defined with the System Administrator role are exported directly together with the module.

##### Exporting Assistants as Datasets

Assistants must be exported as a dataset, in case optional installation is required and with `Client/Organization` data access level. 

1. Initial setup of the assistant:
    - Configure the assistant and tools in the environment where the development takes place.
    - Make sure to include all the necessary fields to be exported. Make sure to configure correctly the **Knowledge Base**, **Skills/Tools** and **Team Members** tabs, as well as the records in the **Knowledge Base File** window.

    
    <figure markdown="span">
    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/exportcopilot1.png)
  <figcaption>Assistant example with complete tabs.</figcaption>
</figure>

2. Create and Configure a Dataset:
    - As System Administrator, go to the **Dataset** window and create a new record by selecting the module under development.
    - Define the **Search Key** and **Name** of the dataset.
    - Set the **Data Access Level** to **System/Organization** (recommended for user assistants).

3. Add Tables to the Dataset

    For each window or tab to be exported, create a record in the **Table** tab. Specify the corresponding table and add the appropriate **HQL/SQL Where** clause.

    - **Assistant:** Table `etcop_app` 
    ```sql title="Where Clause"
    id in ('<AssistantID>')
    ```
    - **Knowledge Base:** Table `etcop_app_source`
    ```sql title="Where Clause"
    etcopApp.id in ('<AssistantID>')
    ```
    - **Skills/Tools:** Table `etcop_app_tool`
    ```sql title="Where Clause"
    `copilotApp.id in ('<AssistantID>')
    ```
    - **Team Members:** Table `ETCOP_Team_Member`
    ```sql title="Where Clause"
    copilotApp.id in ('<AssistantID>')
    ```
    - **Knowledge Base File:** Table `etcop_file`
    ```sql title="Where Clause"
    id in ('<knowladgeBaseFileID>')
    ```
    
    <figure markdown="span">
    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/exportcopilot2.png)
    <figcaption>Dataset window configuration example in the module Copilot Purchase Expert</figcaption>
    </figure>

4. Export Reference Data Button
    - Execute the **Export Reference Data** process, which will create the `referencedata/` folder inside the selected module, with all the records that were exported according to the dataset configuration. 

    !!!note
        Verify that all the required records are generated in the `.XML` file.


5. Include Reference Data in the Module
    - Check the **Include Reference Data** checkbox in the module definition and add a description to the dataset referring to the exported assistant.

    <figure markdown="span">
    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/exportcopilot3.png)
    <figcaption>Configuration example in the module Copilot Purchase Expert</figcaption>
    </figure>

    - When the module is installed, the dataset will be available for application in the **Enterprise Module Management** window.

    <figure markdown="span">
    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/exportcopilot4.png)
    <figcaption>Distributed datasets example</figcaption>
    </figure>


##### Exporting Assistants as System Administrator

When exporting assistants that need to be pre-configured in a module installation, they must be created with the System Administrator role. These assistants will be editable only by the System Administrator, but they can be executed either by the `System Administrator` or by users with `Client/Organization` data access levels.

1. Create Assistant with System Administrator Role:

    - Log in as System Administrator.
    - Configure the assistant and its tabs, ensuring to select the module (under development) in the **Module** field.
    - If the assistant should be restricted to System Administrator use only, check the **System App** checkbox. Otherwise, leave it unchecked to allow execution across all data access levels.

    <figure markdown="span">
    ![](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/exportcopilot5.png)
    <figcaption>Exported assistant example and available only as System Administrator</figcaption>
    </figure>

2. **Export the Database**.
    - Execute the command `./gradlew export.database` to export the assistant together with the module.

#### Exporting Tools

**Tool configuration**: When defining a tool, select the module (under development) in the **Module** field, and run `./gradlew export.database` command to export the tool together with the module.

<figure markdown="span">
![](https://docs.etendo.software/latest/assets/developer-guide/etendo-copilot/exportcopilot6.png)
<figcaption>Tool configuration example</figcaption>
</figure>

!!!info
    For more information, visit [How to create a Copilot Tool](https://docs.etendo.software/latest/developer-guide/etendo-copilot/how-to-guides/how-to-create-copilot-tools.md).
==ARTICLE_END==
==ARTICLE_START==
# Article Title: ✨ Getting Started
## Article Path: /Developer Guide/Etendo Mobile/✨ Getting Started
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-mobile/getting-started
## Article Content: 
### Etendo Mobile

![cover-getting-started.png](https://docs.etendo.software/latest/assets/getting-started/overview/cover-getting-started.png)

#### Overview

*Etendo Mobile* is a subapplication development platform that includes the possibility to log in to an *Etendo Classic* server and configure the available dynamic subapplications there according to role. 

A schematic of the infrastructure is shown here:

![etendo-mobile-infrastructure.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/getting-started/etendo-mobile-infrastructure.png)

On this page we will explain what are the requirements to create a subapplication and how to install all the necessary tools to develop a new subapplication.

#### Environment Setup
##### Requirements

- [Etendo Classic](https://docs.etendo.software/latest/developer-guide/etendo-rx/getting-started.md)
- [Etendo Mobile](https://docs.etendo.software/latest/user-guide/etendo-mobile/getting-started.md) latest version available in PlayStore or Appstore.
- [Platform Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=5AE4A287F2584210876230321FBEE614){target=_isblank}.
- [Docker](https://docs.docker.com/get-docker/){target="_blank"}: version `26.0.0` or higher.
- [Docker Compose](https://docs.docker.com/compose/install/){target="_blank"}: version `2.26.0` or higher.
- [Yarn](https://classic.yarnpkg.com/en/docs/install/){target="_blank"} version `1.22.0` or higher
- [NodeJS](https://nodejs.org/en/download/package-manager){target="_blank"} version `16.20` or higher.
- [Java](https://www.oracle.com/ar/java/technologies/downloads/#jdk17){target="_blank"} JDK 17 

Then continue with the [Create New Subappliction](https://docs.etendo.software/latest/developer-guide/etendo-mobile/tutorials/create-new-subapplication.md){target="_blank"} tutorial.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Sup-application Structure
## Article Path: /Developer Guide/Etendo Mobile/Concepts/Sup-application Structure
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-mobile/concepts/subapp-structure
## Article Content: 
### Subapplications Structure in Etendo Mobile

#### Overview
This page provides a comprehensive guide to the structure of subapplications in Etendo Mobile. It explains key concepts such as the `App.tsx` file, which serves as the main entry point for subapplications, and details how parameters from Etendo Mobile are utilized for initialization. Additionally, the guide covers language management, navigation between screens using the navigation stack, and the use of the Etendo UI Library for consistent design and functionality across subapps. These elements form the foundation for developing dynamic and well-integrated subapplications within Etendo Mobile.

#### App File
In `App.tsx`, it is the main file located in the root of the subapplication. In this file, we will define the routes and the components that will be rendered in each route. In addition, this file is responsible for the initialization of the subapplication and gets the params from Etendo Mobile.

##### Params from Etendo Mobile
Etendo Mobile _sends_ params to the subapplication and all of them are ready to use, they are:

!!! abstract "Params"
    - _ _id_: ID of the subapplication
    - _url_: the environment URL(setted in setting's Etendo Mobile)
    - _contextPathUrl:  the environment context path (setted in setting's Etendo Mobile)
    - _navigationContainer_: an instance of the navigation container of Etendo Mobile
    - _token_: Token
    - _language_: Language
    - _dataUser_: all data related to the user. It has a typed interface that can be found in the file `src/interfaces/index.ts`
    - _isDev_: boolean that identifies whether the application is configured in development (true) or production (false) mode.
    - _Camera_: a component previously integrated into Etendo Mobile has now been seamlessly transferred to the subapps. This particular component includes a remarkable QR code scanning capability, enhancing the overall functionality of the subapps.

##### Language
The language is a string that serves as a representation of the user's selected language. This language setting is configurable within the Etendo Mobile application's settings and plays a crucial role in determining the language in which texts are presented within the subapplication. In this example, we will use the _language_ parameter received as input to initialize the remaining aspects of the application in the `App.tsx` file.

``` typescript title="App.tsx"
  locale.init();
  locale.setCurrentLanguage(locale.formatLanguageUnderscore(language));
```
!!! tip
    All subapps must be developed in English _en-US_ and may include translations such as Spanish _es-ES_.  

As you can see, we use `locale` to set the language of the subapplication. This `locale` is an instance of a custom handler of the language which is based in `i18n` and defined in the path `subapp/src/localization/locale.ts`.

``` typescript title="locale.ts"
const locale: LocaleModule = {
  currentDateLocale: null,

  i18n,
  init() {...}

  t(key, params) {...}

  setCurrentLanguage(input) {...}

};

export default locale;

```

!!! info
    - Translations folder: Translations are organized in the folder `subapp/src/lang`
    - JSON files by language: Each translation file corresponds to a language and locale, following a structure that includes the language code and region. E.g:

    ```
    └── subapp
          └── src
            └── lang
                └── enEN.json
                └── esES.json
    ```

Between the functions of the `locale` handler, some of the most important are:

- `t(key, params)`: this function receives a key (and other optional params) and returns the text translated to the language of the subapplication. This function is based on [i18n](https://github.com/fnando/i18n#readme){target="_blank"} and the keys are defined in `.json` files in `subapp/src/lang`. 

- `setCurrentLanguage(input)`: gets a language as a param and sets this language as default in the subapplication.

The translation definition files can group the information, for example, in the English translations file `/subapp/src/lang/enUS.json` we can group the messages or labels by screens, components or as it is optimal according to the development. For Example

``` json title="enUS.json"
{
  "ScreenOne": {
    "LabelOne": "Label 1 Example",
    "LabelTwo": "Label 2 Example",
  },
  "ScreenTwo": {
    "LabelOne": "Label 1 Example",
    "LabelTwo": "Label 2 Example",
  },

```

Then to use it, use the `local.t` function, E.g:  `locale.t('ScreenOne.LabelOne')`

##### Navigation Stack
The navigation stack part of `App.tsx` that allows us to navigate between screens. It is a component provided by  `@react-navigation/stack` in a React Native application. Conceptually, a navigation stack manages the flow between different screens in the app, allowing users to navigate forward and backward between these screens.

**Key Concepts**

1. **Navigation Stack Initialization**:  
    The `createStackNavigator()` function from `@react-navigation/stack` is used to create a navigation stack. This stack manages a sequence of screens, and each screen is treated as a "route" within the stack.

    ```typescript
    const Stack = createStackNavigator();
    ```

2. **Screen Definitions:** Each screen in the app is defined using the `Stack.Screen` component. The `name` prop specifies the unique identifier of the screen, and the component associated with the screen is defined within the children or passed as a function using render props (`{props => <Component {...props} />}`).
    
    Example of screen definitions:

    ``` typescript
    <Stack.Screen
    name="Home"
    options={{ headerShown: false }}
    initialParams={{ dataUser }}>
    {props => <Home {...props} navigationContainer={navigationContainer} />}
    </Stack.Screen>   
    ```

3. **Initial Route:** The `initialRouteName` prop in `Stack.Navigator` specifies which screen will be loaded first when the app starts. In the following example case, the Home screen is defined as the initial route:

    ```typescript
    <Stack.Navigator initialRouteName="Home">
    ```

##### Etendo UI Library
Etendo UI Library is a library of UI components following the style and design of Etendo, that should be used throughout the subapplication development. This library is based on _React Native Elements_ and it is available on [NPM - Etendo UI Library ](https://www.npmjs.com/package/etendo-ui-library){target="_blank"}. You can use it in all of your subapplications. In this library, we can find components like:  Button, Input, Navbar, Cards, Icons, etc.

!!! info 
    For more information, visit [Etendo UI Library - Storybook](https://main--65785998e8389d9993e8ec4c.chromatic.com){target="_blank"} place where you can see all the components of the library. Also, you can see the code of each component and how to use it.

    ![storybook.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/concepts/subapplication-structure/storybook.png)
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Create New Subapplication
## Article Path: /Developer Guide/Etendo Mobile/Tutorials/Create New Subapplication
## Article URL: 
 https://docs.etendo.software/latest/developer-guide/etendo-mobile/tutorials/create-new-subapplication
## Article Content: 
### Create New Subapplication

#### Overview

This tutorial provides a step-by-step guide to creating a new subapplication within **Etendo Mobile**. By following these instructions, you will learn how to fully utilize the capabilities of **Etendo RX** and leverage the visual components available in the **Etendo UI Library** to build a functional subapplication.

The tutorial will guide you through the creation of the *Product Subapp*, a simple application that enables the addition, deletion, and modification of products, as well as their visualization in a grid. Upon completion, you will have the skills to create and distribute subapplications as modules, thereby extending the mobile functionality of Etendo.


!!! info
    Before beginning, ensure that your local environment meets all necessary requirements by reviewing the Etendo Mobile [Getting Started](https://docs.etendo.software/latest/getting-started.md) section.


#### Module Setup 

##### Create New Etendo Classic Module

:material-menu: `Application` > `Application Dictionary` > `Module`

1. As a System Administrator role, open the **Module** window and create a new register. This module will be used to develop and distribute the application.

    <figure markdown="span">
    ![modules-creation.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/modules-creation.png)
    <figcaption>Product Subapp module configuration example</figcaption>
    </figure>

    !!! tip
        - Notice that the name can be anything you want, but the type has to be set as Module.
        - The _description_ field is free and also _required_.
        - The _Is Rx_ checkbox indicates that this module will include RX service configurations, the RX service Javapackage must be specified.
        - The _Is React_ checkbox indicates that this module includes a subapplication and React Native code is generated.
        - In this case, start from `1.0.0` module version and set the DB Prefix as `ETSAPPP`.


##### Dynamic App configuration

:material-menu: `Application` > `General Setup` > `Application` > `Dynamic App`

Configure and export dynamic applications in Etendo Classic, which are displayed dynamically in Etendo Mobile.

In the **Dynamic App** window, specify the subapplication path and version. 

For the example we are following, the Dynamic App in Etendo must be configured with the following form fields and corresponding values:

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/dynamic-app-creation.png)

Fields to note:

- **Module**: The module that can export the window configuration. In our example case, set `Product SubApp`.
- **Name**: Name with the application will be shown. In our example case, set `Product Subapp`
- **Directory Location**: The path where the compiled application bundle is located. In development, the path is empty `/`, but in production, the path is `/<javapackage>/web/`. In our example case, set `/`
- **Active**: To select if this application is active or not. In our example case, set `true`


The **Dynamic App Version** tab allows the application to be versioned, enabling both development and production versions.

Fields to note:

- **Name**: Name of the application version E.g. `dev` or `1.0.0`. In our example case, set `dev`
- **File Name**: The bundle name of the compiled application, by default `dist.js`.
- **Default**: This check defines that this version is productive. In our example case, set `false`
- **Is Development**: This check defines that this version is in development and can be deployed locally. In our example case, set in `true`
- **Active**: To select if this application version is active or not. In our example case, set `true`

!!! info
    For more information visit the [Dynamic App](https://docs.etendo.software/latest/etendo-classic/bundles/platform/dynamic-app.md) developer guide.

##### Role configuration
:material-menu: `Application` > `General Setup` > `Security` > `Role`

Logged in as the **Group Admin** role (which is the default role for accessing Etendo Mobile), the settings are applied as specified below.

![role-configuration.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/role-configuration.png)

!!! warning "Important"
    Keep this dynamic app as _active_.

##### Export the Module

1. After saving all the configuration, you have to export the changes. Open a terminal in the root of your **Etendo Classic** project and execute the following command:
    
    ``` bash title="Terminal"
    ./gradlew export.database --info
    ```

    !!!success "Important"
        The output must be a "BUILD SUCCESSFUL" message.

3. A new module is created in the `/modules` folder, with the following structure

    ```
    modules
    └── com.etendoerp.subapp.product
        └── src-db 
    ```

#### Dockerized Services
Before starting the dockerized services, there are some configurations that need to be done in Etendo Classic

##### Client Setup 
:material-menu: `Application` > `General Setup` > `Client` > `Client`

It is necessary to configure the encryption token for the authentication in the  Client window with the System Administrator role.
If the expiration time is equal to "0" the tokens do not expire.

Generate a random key with the "Generate key" button.

![](https://docs.etendo.software/latest/assets/developer-guide/etendo-classic/how-to-guides/how-to-use-secure-web-services/SWS.png)


##### RX Config window
:material-menu: `Application` > `Etendo RX` > `RX Config`

This configuration window stores the access data for Etendo RX services, which are crucial for the interaction between different services. In this case, some records need to be created.
As `System Administrator` role, in this window, it is necessary to add the entries, one for each service to be used. The following fields should be included:

- **Service Name**: The name of each service.
- **Service URL**: The internal URL of the Docker service.
- **Updatable Configs**: Check this checkbox.
- **Public URL**: Configure the publicly accessible URL for the service.

!!!info
    The **Public URL** field only needs to be configured when the sub-application is set to production.


See the configuration examples bellow and replicate them. 

```
application   
auth        http://localhost:8094
config      http://localhost:8888
das         http://localhost:8092  
edge        http://localhost:8096
```

Also in the case of **edge** and **auth** services it is necessary to add the `das.url` Parameter Key with the Parameter Value `http://das:8092`.

![alt text](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/rx-config.png)

!!!info 
    If using Dockerized Tomcat, the URLs within the container's network are `http://auth:8094`, `http://config:8888`, `http://das:8092`  and `http://edge:8096`.


##### Execute RX services
Before proceeding, it is necessary to start the **Etendo RX** services. These services provide a security layer (Auth Service), a data access layer (Das Service), which are essential for consuming or writing data in Etendo and Edge Service . Additionally, by selecting the **isReact** checkbox in the previously defined module, React code will be automatically generated, allowing for easier data access.

To launch all the services, it is necessary to define the following configuration variables in the `gradle.properties` file:

```groovy title="gradle.properties"
docker_com.etendoerp.etendorx=true
```

!!!info
    For more information about how to handle Etendo Dockerizations, visit [Docker Management](https://docs.etendo.software/latest/etendo-classic/bundles/platform/dependency-manager.md). 

??? Note "Tomcat and PostgresSQL Dockerized (Optional)"
    It is also possible to run the dockerized [PostgreSQL service](https://docs.etendo.software/latest/platform/docker-management.md#postgres-database-service) and [Tomcat service](https://docs.etendo.software/latest/platform/tomcat-dockerized-service.md), **optionally** adding the [Platform Extensions Bundle](https://marketplace.etendo.cloud/#/product-details?module=5AE4A287F2584210876230321FBEE614){target=_isblank} and the following configuration variables:

    ```groovy title="gradle.properties"
    docker_com.etendoerp.tomcat=true
    docker_com.etendoerp.docker_db=true
    ```

Then, to effectively run the services, it is necessary to **execute the command** in the terminal: 

```bash title="Terminal"
./gradlew resources.up
```

Here, all the services and their respective logs can be seen running using [Docker Desktop](https://www.docker.com/products/docker-desktop/){target=_isblank} tool.

![Docker RX Services](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/rx-services.png)


#### Projections and Search

This section covers the creation of projections, mappings, and searches, which enable the generation of a dynamic REST API in the RX DAS service. These configurations allow for reading, writing, and filtering data. Projections are applied to Etendo Classic tables, creating a subset of data that can be interacted with through the API.


##### Create a Projection
:material-menu: `Application` > `Etendo RX` > `Projections and Mappings`

1.  As a `System Administrator` role, it is required to create a projection that reflect partial views of the Product class and contain only the necessary properties.

2. To do this, we will go to the `Projections and Mappings` window and create a new projection, select the module under development `Product SubApplication - 1.0.0 - English (USA)`, where these configurations will be exported and in the name field we define `ProdSubApp`.

3. Now, with the selected projection we add in the tab `Projected Entities` two projections, one for reading data, selecting the table `M_Product` and in the Mapping Type field we select `Etendo to external system` and another projection for writing data, selecting again the table `M_Product` and in the Mapping Type field `External system to Etendo`.  The other fields are auto-completed with respect to these values.

<figure markdown="span">
 	![projection.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/projections-mappings.png)
	<figcaption>Projection and Projected Entities configuration example</figcaption>
</figure>

##### Creating Entity Fields

1. Now, we define which fields we want to retrieve. To do this, we start by selecting the data reading projection `PRODSUBAPP - Product - Read` and run the `Create Projection Fields` process, in the pop-up we will select the fields to project. In our example case: 

    - active
    - id
    - name
    - productCategory
    - searchkey
    - taxCategory
    - UOM
    - UPCEAN

    !!! note
        While not all of these fields will be displayed in the application, as record editing is allowed, we are also selecting all the mandatory fields to create a product.

    <figure markdown="span">
    ![create-projection-fields.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/create-projection-fields.png)
    <figcaption>Create read projection fields process execution example</figcaption>
    </figure>


2. Now we define which fields should be saved when creating or editing a record, in this case we select the write projection ` PRODSUBAPP - Product - Write` and run the process `Create Projection Fields` selecting the same fields as for the read one

    - active
    - id
    - name
    - productCategory
    - searchkey
    - taxCategory
    - UOM
    - UPCEAN


    <figure markdown="span">
    ![create-projection-fields.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/create-projection-fields.png)
    <figcaption> Entity fields created example</figcaption>
    </figure>

3. In the case of the `productCategory`, `taxCategory` and `UOM` fields in the application they will not be editable, but they must be autocompleted with a default value, for this we can use constant mappings. If new Products are created, these default values will be used.

    To do this, we go to the `application` > `Etendo RX` > `Constant Values` window and define constant IDs of default values. Here are some example IDs:

    | Name       | Default Value                              |
    | ---------------- | ------------------------------------ |
    | `ProductCategory`|`DC7F246D248B4C54BFC5744D5C27704F`    |
    | `taxCategory`    |`43A120C9377B4537B5D1976D9B1233D7`    |
    | `uOM`            |`100`                                 |
   
    <figure markdown="span">
    ![constant-values.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/constant-values.png) 
    <figcaption>Constant values definition example</figcaption>
    </figure>
    

4. Finally selecting the `PRODSUBAPP - Product - Write` write projection, edit the `productCategory`, `taxCategory` and `UOM` records, modify the `Field Mapping` field to `Constant Mapping`, delete the `Jsonpath` and select the corresponding value in the `Constant Value` drop-down list, defined in the previous step.

    <figure markdown="span">
    ![constant-values-definition](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/constant-values-definition.png)
    <figcaption>Entity field tab, constant values definition example</figcaption>
    </figure>


##### Create a Search in Projected Data

Now, when reading data, it is possible to create filters, for this we have to associate these filters to a table and it is possible to export this filter in the module under development. 
To do this, we open the `Tables and Columns` window, in our example select the `M_Product` table, go to the `Repository` tab and create a new record with the development module.  Then we create a new record in the `Search` tab

<figure markdown="span">
    ![repository.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/repository.png)
    <figcaption>Repository Creation Example</figcaption>
</figure>

##### Create a New Search and Search Parameter

Next, we will define a search method to be used when we want to consume the products. To create this new filter/search method, in the Repository tab of the `M_Product` table, create a new record with the method name `getFilteredProducts` and the hql query filter. 

```
SELECT e FROM Product e WHERE (e.active = true) AND (lower(e.name) LIKE lower('%' || :name || '%') OR lower(e.uPCEAN) LIKE lower('%' || :name || '%')) order by e.updated desc
```
This query filters active products by name or bar code. 

As we can see in the query, it receives the`:name` parameter of String type that we define in the `Search Parameter` tab.

<figure markdown="span">
    ![search-parameters.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/search-parameters.png)
    <figcaption>Search and Search Parameter creation example</figcaption>
</figure>

##### Restart the Etendo RX Service

Restart the Das RX service to recognize the projections and mappings.

```bash title="Terminal"
./gradlew rx.das.restart
```

!!! info 
    By accessing [http://localhost:8092/swagger-ui/index.html](http://localhost:8092/swagger-ui/index.html), the RX DAS Service Swagger can be visualized. This interface allows for consultation of the endpoints generated based on the previously made configurations.

    ![RX DAS Service Swagger](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/das-api.png)


#### Creating the Subapplication

1. Now, create the subapplication based on a template published in NPM, [Etendo Subapp Data Template Typescript ](https://www.npmjs.com/package/etendo-subapp-data-template-typescript){target="_blank"}. Execute the Gradle command to automatically create the subapplication within the module under development.

    ``` bash title="Terminal"
    ./gradlew subapp.create -Ppkg=<javapackage> --info
    ```
    In the example we are working on, use the following command:

    ```bash title="Terminal"
    ./gradlew subapp.create -Ppkg=com.etendoerp.subapp.product --info
    ```
    
    A new subapplication will be created within the module, with the following structure:

    ```
    modules
    └── com.etendoerp.subapp.product
      ├── src-db 
      └── subapp
          ├── .bundle
          ├── _tests_
          ├── android
          ├── ios
          ├── lib
          ├── node_modules
          └── src
          └── App.tsx
    ```


#### Product Subapp Example
This section covers an overview about the product subapplication example screens and principal parts of the subapplication.

!!! info "Consideration"
    The applications must be developed for both platforms: phone and tablet. 
   
##### Home Screen 
 
- This is the main screen of the subapplication. It will show a list of products. Also, it will allow us to edit and remove a product, find a product by name and navigate to the detail of a product.

**Phone View**
<figure markdown>
![home-screen.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/home.jpg){ width="300", align=left } 
![remove-product.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/delete-product.jpg){ width="300", align=right}
</figure>
**Tablet View**
![home-screen-tablet.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/home-tablet.jpg)


- The route to this screen is `src/screens/home/index.tsx` and the content:

``` javascript title="src/screens/home/index.tsx"
import React from 'react';
import TableList from '../../components/table/list';
import { NavigationProp } from '@react-navigation/native';
import { INavigationContainerProps } from '../../interfaces';
import locale from '../../localization/locale';
import useProduct from '../../lib/data_gen/useProduct';
import { Product } from '../../lib/data_gen/product.types';

interface TableListProps {
  navigation: NavigationProp<any>;
  route: any;
  navigationContainer: INavigationContainerProps;
}

const Home = (props: TableListProps) => {
  const { getFilteredProducts, updateProduct } = useProduct();
  return (
    <TableList
      deleteDataItem={async (item: Product) => {
        item.active = false;
        await updateProduct(item);
      }}
      {...props}
      columns={[
        {
          key: 'id',
          primary: true,
          visible: false,
        },
        {
          key: 'name',
          label: locale.t('Table.products'),
          visible: true,
          width: '50%',
        },
        {
          key: 'uPCEAN',
          label: locale.t('Table.barcode'),
          visible: true,
          width: '30%',
        },
      ]}
      getData={getFilteredProducts}
      labels={{
        dataName: 'Product',
        navbarTitle: locale.t('Home.welcome'),
        containerTitle: locale.t('Home.productList'),
        buttonNew: locale.t('Home.newProduct'),
        searchPlaceholder: locale.t('Home.typeProduct'),
        successfulDelete: locale.t('Success.deleteProduct'),
        errorDelete: locale.t('Error.deleteProduct'),
      }}
    />
  );
};

export default Home;
```

##### Product Detail

![product detail](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/product-detail.jpg){ width="300"}

- This screen will show the detail of a product. Also, it will allow us to edit the product.
- It is the same screen used to create a new product, if the prop does not have ID.
- The route to this screen is `src/screens/productDetail/index.tsx`,  add the content:

``` javascript title="src/screens/productDetail/index.tsx"
import React, { useState } from 'react';
import TableDetail from '../../components/table/detail';
import { NavigationProp } from '@react-navigation/native';
import locale from '../../localization/locale';
import useProduct from '../../lib/data_gen/useProduct';

interface TableDetailProps {
  navigation: NavigationProp<any>;
  route: any;
}

const ProductDetail = (props: TableDetailProps) => {
  const { createProduct, updateProduct } = useProduct();
  const [id, setId] = useState<string>('');
  const [searchKey, setSearchKey] = useState<string>('');
  const [name, setName] = useState<string>('');
  const [uPCEAN, setUPCEAN] = useState<string>('');
  return (
    <TableDetail
      {...props}
      createData={async () => {
        await createProduct({ searchKey, name, uPCEAN });
      }}
      updateData={async () => {
        await updateProduct({ id, searchKey, name, uPCEAN });
      }}
      fields={[
        {
          key: 'id',
          visible: false,
          setValue: setId,
          getValue: id,
          labels: {
            title: '',
            placeholder: '',
          },
        },
        {
          key: 'searchKey',
          setValue: setSearchKey,
          getValue: searchKey,
          labels: {
            title: locale.t('ProductDetail.searchKey'),
            placeholder: locale.t('ProductDetail.searchKeyExample'),
          },
        },
        {
          key: 'name',
          setValue: setName,
          getValue: name,
          labels: {
            title: locale.t('ProductDetail.products'),
            placeholder: locale.t('ProductDetail.nameExample'),
          },
        },
        {
          key: 'barcode',
          setValue: setUPCEAN,
          getValue: uPCEAN,
          labels: {
            title: locale.t('ProductDetail.barcode'),
            placeholder: locale.t('ProductDetail.barcodePlaceholder'),
          },
        },
      ]}
      labels={{
        editTitle: locale.t('ProductDetail.editProduct'),
        newTitle: locale.t('ProductDetail.newProduct'),
        errorTitle: locale.t('Error.product'),
        successUpdateTitle: locale.t('Success.updateProduct'),
        successCreateTitle: locale.t('Success.saveProduct'),
        connectionError: locale.t('Error.connection'),
        navbarTitle: locale.t('Home.welcome'),
        cancel: locale.t('Common.cancel'),
        save: locale.t('Common.save'),
        successTitle: id
          ? locale.t('Success.updateProduct')
          : locale.t('Success.createProduct'),
      }}
    />
  );
};

export default ProductDetail;

```
    
##### Navigation 

In addition, it is necessary to add the navigation configuration in the `app.tsx` file, in the return statement. This configuration provides the infrastructure to navigate between the different screens of the application.

``` javascript title="App.tsx"
<Stack.Navigator initialRouteName="Home">
      <Stack.Screen
        options={{ headerShown: false }}
        name="Home"
        initialParams={{ dataUser }}>
        {props => <Home {...props} navigationContainer={navigationContainer} />}
      </Stack.Screen>
      <Stack.Screen
        options={{ headerShown: false }}
        name="ProductDetail"
        initialParams={{ dataUser }}>
        {props => <ProductDetail {...props} />}
      </Stack.Screen>
</Stack.Navigator>
```

!!! info 
    For more information, visit [Navigation Stack](https://docs.etendo.software/latest/concepts/subapp-structure.md#navigation-stack) concept in Subapplication Structure Page.

!!! info 
    For more information about the language management and translations, visit [Languague](https://docs.etendo.software/latest/concepts/subapp-structure.md#language) concept.

!!! info 
    For more information about Subapplication Params, visit [Params from Etendo Mobile](https://docs.etendo.software/latest/concepts/subapp-structure.md#params-from-etendo-mobile) concept.

##### Running the Sub-application
1. Once the subapplication is created, the react-native code must be generated, with types and functions that interact with the RX DAS Service, for this we execute the command Gradle : 

    !!! info
        Make sure that the Etendo RX services are running and without errors before executing this command.

    ``` bash title="Terminal"
    ./gradlew subapp.build -Ppkg=<javapackage> 
    ```

    In our example case 
    ``` bash title="Terminal"
    ./gradlew subapp.build -Ppkg=com.etendoerp.subapp.product --info
    ```
    As we can see, it will be generated in the `/subapp/src/libs/` folder the functions and types that will be used for reading and writing `GET` and `POST` data.

    ```
    modules
    └── com.etendoerp.subapp.product
      ├── src-db 
      └── subapp
          └── src
            └── lib
                └── base
                    └── baseservice.ts
                    └── baseservice.types.ts
                └── data_gen
                    └── product.types.ts
                    └── productservice.ts
                    └── useProduct.ts      
    ```

2. In a terminal on path `modules/<javapackage>/subapp`, install the depedencies declared in the `package.json`,  following the command: 

    ``` bash title="Terminal"
    yarn install 
    ```

3. Then, to run the subapplication in development mode execute: 

    ``` bash title="Terminal"
    yarn dev 
    ```
    !!! note
        By default, the application run in development mode on `localhost` at port `3000`. Additionally, changes in the `/src` directory are automatically scanned, enabling dynamic updates to the application during development. This ensures that any modifications are reflected in real-time without restarting the application.


##### Visualizing the subapplications

1. Open the [Etendo Mobile](https://docs.etendo.software/latest/user-guide/etendo-mobile/getting-started.md) application on a mobile device. You can use either an emulator or a physical device.
    
2. In Etendo Mobile setting up the Edge service URL (Edge is an Etendo RX service, which implements a Spring cloud-driven gateway), by default the environment URL should be `http://<local-network-ip>:8096/` and the context path by default `/etendo`.

    !!! info
        To find out your IP address on the local network, you can run the command `ifconfig` in a Mac or Linux terminal or `ipconfig` in Windows CMD.
  
    ![ip-config](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/ip-config.png)

3. Login Etendo Mobile and you will see the list of subapps. Clicking on `Product Subapp` will access to development mode app.
    ![app-home.png](https://docs.etendo.software/latest/assets/developer-guide/etendo-mobile/tutorials/create-new-subapplication/app-home.png)

4. Now you can view, filter, create, edit and delete products.

#### Debug Log

This section explains how to log data in a sub-application using the `logger` utility function. To log any information, call the `logger` function with a key and a value:

```javascript
logger('key', value );

```

**Importing the Logger Function** 
To use the logger in any file, import it as follows:

``` javascript
import logger from '../../utils/log'; // The path to the file is relative 

```

!!!info "Automatic String Conversion"
    Objects passed to the `logger` function will be automatically converted to strings using the `JSON.stringify` function. This ensures compatibility with the logging mechanism.

**Example Usage**
Below is an example of how to use the logger function, including handling errors:

``` javascript
try {
  // Your code here
} catch (err) {
  logger('Handle Error', err));
  showAlert(labels.connectionError, 'error');
}
```
In this example:

- The error object `err` is automatically converted to a `String` using `JSON.stringify` and logged.
- An alert is shown using `showAlert` component to inform the user of a connection error.

By integrating this logging utility, developers can track application behavior and debug more effectively.


==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo UI Library
## Article Path: /Developer Guide/Etendo Mobile/Etendo UI Library
Article URL: https://main--65785998e8389d9993e8ec4c.chromatic.com

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /What's New/Overview
## Article URL: 
 https://docs.etendo.software/latest/whats-new/overview
## Article Content: 
#### Welcome to our Release Notes Documentation

Here, you'll discover a comprehensive overview of the latest updates, enhancements, and fixes that have been meticulously crafted to elevate your Etendo software experience.

Stay informed and empowered as we walk you through each new iteration, showcasing the innovative features and improvements that await your exploration. Whether you're a seasoned user or just getting started, our Release Notes provide a roadmap to navigate the ever-evolving landscape of our software.

---

<figure markdown>
![release-cycle.png](https://docs.etendo.software/latest/assets/whats-new/overview/release-cycle.png){align=right width=400}
<br><br>
##### In this section you can learn about Etendo's life cycle, when updates are released and valuable information to keep you up to date with our news.
</figure>

---

<figure markdown>
![roadmap.png](https://docs.etendo.software/latest/assets/whats-new/overview/roadmap.png){align=left width=400}
<br><br>
##### Get to know about our current projects, their  status and future ideas and projects.                                            
</figure>

---

<figure markdown>
![release-notes.png](https://docs.etendo.software/latest/assets/whats-new/overview/release-notes.png){align=right width=400}
<br><br>

##### In this section, you will find a concise summary of the latest updates and improvements, bug fixes and news introduced in our latest releases for each of our products

</figure>
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo Release Cycle
## Article Path: /What's New/Etendo Release Cycle
## Article URL: 
 https://docs.etendo.software/latest/whats-new/etendo-release-cycle
## Article Content: 
### Etendo Release Cycle

The launch phase covers all the steps that are necessary to deliver a successful release to the market, including (but not limited to):

- quality assurance testing (QA)
- early adopters testing (Innovators program)
- and training

Etendo solutions are released on a quarterly basis.

- YX is the year and QZ the quarter of the year.

![new-etendo-lifecycle](https://docs.etendo.software/latest/assets/whats-new/etendo-release-cycle/new-etendo-lifecycle.png)

As shown in the image above, the duration of a release cycle is nine months. For instance, and in the case of Etendo Y1Q4 development activities started dated on July and will finish at release dated on March.

#### Release Phases

The release process consists of the following phases: 

- **3-month development cycle:** The engineering team focuses on code development, review, testing, and integration.
- **3-month QA cycle:** The QA team tests and validates the release according to the Test Plan, creates user documentation, and trains the support team.
- **3-month Etendo Early Adopters Program:** The release is initially published as QA Approved (QAA). This phase includes a maturation cycle to evolve the release from QA Approved (QAA) to Confirmed Stable (CS).

![etendo-release-cycle-phase.png](https://docs.etendo.software/latest/assets/whats-new/etendo-release-cycle/etendo-release-cycle-phase.png)

!!! note
    Etendo strongly recommends that only releases that have reached CS are used in production environments.

In summary, Etendo will release Confirmed Stable (CS) releases in March, June, September, and December on a yearly basis.

!!! info
    Etendo will give support to the current year and prior year releases.

##### Early Adopters Testing (Innovators Program)

As already mentioned, Etendo has established an innovators program based on a maturation cycle to evolve Etendo releases from QAA to Confirmed Stable, in collaboration with a set of Etendo end clients.

These clients install the releases in QAA status for them to use it and help Etendo to mature it.

QAA releases have passed automated tests, all fixed issues have been individually verified and the QA team has completed a set of manual tests to identify further improvement.

When it reaches the QAA stage, the release is not yet available for a wide audience but it can already be used for production purposes for those who have a particular interest, explicitly assuring full alignment with the end client.

As part of the Innovators program, interested Partners will receive support in the update process of a customer’s production environment to the current QA Approved release.

##### Emergency Releases

When required, there are out of schedule emergency releases which are used for targeted fixing of very important bugs. These bugs may have been reported by our partners, members of the development team or simply bugs found by our automations that are periodically testing our products.

Those releases can be identified by their version which is constructed as follows ETXXQY.Z, where :

- XX is the year of the base release
- QY is the quarter of the base release
- Z is a minor digit number starting with 1

and will run through the same maturity status and release process.

#### Quality Assurance

In Etendo, we carry out constant processes to ensure the quality and safety of our product throughout the entire development cycle. The following are the main steps of our quality assurance process.

##### Code Analysis

When code changes or additions are made, the code is subjected to a thorough analysis using the following tools:

- **Sonar:** Our development repositories employ Sonar rules to analyze code in pull requests created or updated. Sonar identifies potential problems and makes suggestions to improve code quality.

![sonar-review.png](https://docs.etendo.software/latest/assets/whats-new/etendo-release-cycle/sonar-review.png)

- **Auto Code Reviewer:** We have developed a tool called Auto Code Reviewer, which uses ChatGPT to analyze the changes made in the Pull Request and make suggestions. This tool complements the Sonar analysis and helps us to maintain high quality standards in our code and architecture.

##### Automated Testing

Once a pull request has been created or updated, automated tests are run using Jenkins, our continuous integration system. Through a scheduled job in Jenkins, the following types of tests are executed:

- **Compilation Tests:** At this stage, we test that the code is compiled correctly, identifying possible errors at compile time.
- **Unit Test:** We run automated tests designed to verify the behavior and functionality of individual units of code. These tests help us to identify bugs and ensure the correct functioning of the different parts of the system.

![jenkins-develop-branch.png](https://docs.etendo.software/latest/assets/whats-new/etendo-release-cycle/jenkins-develop-branch.png)

If bugs are detected in any of these automated tests, the development team is immediately notified so that they can address and correct them.

Once a pull request has passed the code review and quality assurance processes specific to each development, the merge to the "develop" branch is performed. At this point, automated tests are re-run to ensure that the code integration has not introduced new problems.

Along the lines of the automatic tests that are performed, we have the stress and interface tests that are performed monthly:

- **Stress Testing:** In addition to the regular automated tests, we conduct stress tests on our applications on a monthly basis. These tests help us identify potential bottlenecks, resource limitations, and areas that may cause degradation or failures under high user loads. By simulating concurrent user interactions and generating high traffic, we evaluate the system's responsiveness, scalability, and overall robustness. Performing these tests monthly ensures that our applications can handle increasing user demands and maintain optimal performance.
- **Selenium Interface Testing:** To ensure the functionality and user experience of our applications, we conduct monthly Selenium interface testing. Selenium allows us to automate browser interactions and perform tests on different web browsers, such as Firefox and Google Chrome. Using Selenium, we create test scripts that simulate user actions, navigate through the application's interface, and verify that all elements and features work as expected. This ensures consistency across different browsers and helps us identify any compatibility issues that may arise. Conducting these tests monthly allows us to catch any potential interface issues and ensure a seamless user experience across various platforms.

##### Vulnerability Analysis and Deprecation

On a quarterly basis, we run a Static Application Security Testing (SAST) and Software Composition Analysis (SCA) tools to detect possible vulnerabilities or deprecations in the libraries and stack we use. This analysis allows us to keep our application updated and secure. Based on the results of this tool, we start the corresponding update process, considering the priority level assigned to each identified change.

![vulnerability-and-deprecation](https://docs.etendo.software/latest/assets/whats-new/etendo-release-cycle/vulnerability-and-deprecation-2.png)

- **Update with API Changes (major):** This type of upgrade involves significant changes to the application programming interface (API). A major upgrade generally involves substantial modifications to the way system components or modules interact with each other, which may require extensive changes to existing code to make it compatible with the new version. These changes may include the introduction of new functionality, removal of obsolete features, changes to the data structure or communication protocols. Due to the nature of these changes, a major upgrade is scheduled once a year to allow sufficient time to plan, test and make the necessary modifications to the code and systems using the updated API.
- **Soft Update:** In a soft update, the changes made are minor, not significant to the API and generally focused on performance improvements, bug fixes, optimizing existing code or updating external dependencies. These changes are less disruptive and can be implemented more frequently, so a soft upgrade is performed quarterly to keep the system up to date and take advantage of continuous improvements. Although the changes are not drastic, extensive testing is still recommended to ensure stability and compatibility with dependencies and related components.
- **CRITICAL Update:** A critical update addresses a major security vulnerability or issue that could be exploited by attackers to compromise the integrity, confidentiality or availability of the system. This type of update is considered an emergency and must be implemented quickly by releasing a hotfix to resolve the security issue in the shortest time possible. Critical updates may include security patches, workarounds or mitigations to prevent exploitation of the vulnerability while a more complete solution is being worked on.

---

###### Integration of Snyk in Vulnerability Analysis

![snyk-banner.png](https://docs.etendo.software/latest/assets/whats-new/etendo-release-cycle/snyk-banner.png)
At Etendo, we are committed to ensuring the security of our applications at all times. That's why one of the prominent tools we use is _[Snyk](https://snyk.io/)_, a powerful Software Composition Analysis (SCA) solution.

_Snyk_ enables us to conduct a comprehensive analysis of the libraries and dependencies used in our application stack. By integrating our repositories with _Snyk_, we gain detailed visibility into potential vulnerabilities and deprecations that may exist in our code.

_Snyk_ is widely recognized for its ability to accurately and promptly identify vulnerabilities in software dependencies. Through _Snyk_, we can perform continuous and real-time analysis of our dependencies, enabling us to detect any security issues early on and take proactive measures to address them.

The integration with _Snyk_ provides us with detailed information on each identified vulnerability or deprecation, including descriptions, severity levels, and specific recommendations for resolution. This information is invaluable as it allows us to assess and prioritize the necessary changes based on their potential impact on our application.

Based on the analysis results from _Snyk_ and other security tools, we initiate the corresponding update process, considering the assigned priority level for each identified change. This approach enables us to effectively manage security risks and keep our application up to date and secure for our users.

#### Etendo Release Notes

Every time Etendo releases a new version, all that it contains is documented in the corresponding Release Notes wiki page.  
It is important to highlight that within Etendo release notes wiki page, there are direct links to what a given release includes.  
New versions of Etendo can include:

- new functionalities implemented according to the corresponding product roadmap,
- fixes of the issues reported by Etendo partners, fixed by Etendo according to the corresponding Etendo partner’s services level agreement,
- and extensions, modules which extend the functionality of Etendo.
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Roadmap
## Article Path: /What's New/Roadmap
Article URL: https://etendo.software

==ARTICLE_END==
==ARTICLE_START==
# Article Title: ✨ Etendo News
## Article Path: /What's New/Release Notes/✨ Etendo News
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-news
## Article Content: 
#### December 2024

##### Etendo Classic
:octicons-rocket-24: **New Etendo Classic Release Available!**

Version [24.4.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/release-notes.md) of Etendo Classic has been released for the last quarter of the year. All packages have been updated to ensure integration with this new release.  In addition this release includes all bugs resolved in the quarter.

<div class="grid cards" markdown>
- **The document completion process allows the use of Credit Payment as a payment method again.** 

    From now on, the completion is again one record at a time and is added to the [Bulk Completion](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/essentials-extensions/bulk-completion.md) button by installing the Essential Extensions bundle.
</div>

##### Essentials Extensions

:octicons-package-16: **Managing documents has never been so fast and easy**

![](https://docs.etendo.software/latest/assets/whats-new/etendo-news/bulk-completion.png)
In version [1.7.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/essentials-extensions/release-notes.md) of the Essentials Extensions bundle, you can effortlessly manage multiple records with the [Bulk Completion](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/essentials-extensions/bulk-completion.md) feature. Select the records you want to complete, reactivate, or close, and process them all at once with a single click.

##### Warehouse Extensions
:octicons-package-16: **More accurate automatic stock reservation**

In version [1.10.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/warehouse-extensions/release-notes.md) of the Warehouse Extensions bundle, with the [Automatic Warehouse Reservation](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/warehouse-extensions/overview.md#automated-warehouse-reservation) module the stock reservations can be limited only to the warehouse specified in the order header. This way you can ensure that your orders always use the right warehouse.

##### Financial Extensions

<div class="grid cards" markdown>

- :octicons-package-16: **Automated remittances: Simplify remittance management by automating the settlement and protest process.**

    ![](https://docs.etendo.software/latest/assets/whats-new/etendo-news/automated-remittances.png)

    In version [1.21.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md) of the Financial Extensions bundle, with the [Automated remittances](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/automated-remittance.md) module, when processing remittances, bank instructions are created and automatically settled with the current date. 

    The Protest Remittance button has also been added, making it possible to return receipts in collection remittances from a single place.

- :octicons-package-16: **Bank account and payment management allows for more automation**

    In version [1.21.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md) of the Financial Extensions bundle, with the Advanced Bank Account Management module, added the possibility to set a default bank account in the busines partner configuration, as well as to define bank accounts for each location. 
    The possibility to select the bank account when adding payments and even edit payment plans with the Modify Payment button has also been added.
</div>

##### Copilot Extensions 

:material-robot: **Copilot allows the use of multiple AI models from different suppliers.**

In version [1.9.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md) of the Copilot Extensions bundle, Multi-Model Assistant type was added, this agents extends the `Langchain` type with the particularity that it can be used with models from various suppliers such as Anthropic or Gemini, in addition to the existing OpenAI models.
In addition, the AI Models window was added where the user can manage the models to be used by the different agents.


#### November 2024

##### Copilot Extensions

:material-robot: **New Etendo Copilot Release Available!**

New Copilot Extensions bundle version [1.8.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md) 

<div class="grid cards" markdown>
-  **Improve your Python Tools development with the Code Run assistant**

    ---
    The [Code Run](https://docs.etendo.software/latest/developer-guide/etendo-copilot/bundles/dev-assistant.md#code-run) assistant combined with the [Docker Tool](https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/docker-tool.md) introduces a safe and efficient way to run Python and Bash code inside isolated Docker containers. This tool revolutionizes the way coding tasks are handled. The wizard specializes in managing Docker containers to execute Python scripts, ensuring a reliable and isolated environment.

    Equipped with advanced capabilities, the assistant prioritizes Python for troubleshooting, manages library installations dynamically, integrates Bash commands for flexible operations and handles file processing with precision. Whether you are troubleshooting, automating tasks or testing scripts, this tool ensures efficiency and security. Transform your development workflow with this powerful addition to Etendo.
</div>

#### October 2024

##### Copilot Extensions

:material-robot: **New Etendo Copilot Release Available!**

New Copilot Extensions bundle version [1.7.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md)  

<div class="grid cards" markdown>
-  **Boost Your Development Workflow with the New Dev Assistant!**

    ---
    The [Dev Assistant](https://docs.etendo.software/latest/developer-guide/etendo-copilot/bundles/dev-assistant.md) module streamlines and accelerates your development workflow in Etendo Classic. With specialized assistants, you can now easily create buttons, windows, tabs, tables, event controllers, Jasper reports, and background processes. 

    This assistants are designed to enhance productivity and reduce complexity, enabling efficient management and construction of all components within Etendo. Take your development process to the next level!
</div>

<div class="grid cards" markdown>
-  **Copilot in Mobile: Try Copilot on Your Mobile Devices and Tablets!**

    ---
    The new [Etendo Copilot sub-application](https://docs.etendo.software/latest/user-guide/etendo-copilot/bundles/overview.md#etendo-copilot-subapp) enables you to interact with AI-powered assistants from anywhere. Now, you can attach files, access role-specific windows, and receive real-time, personalized assistance directly on your mobile or tablet. Enjoy seamless integration with all the familiar features of Etendo, right from your fingertips!

</div>

##### Dependency Manager
:octicons-package-16: **Managing Etendo modules and dependencies has never been so easy**
![](https://docs.etendo.software/latest/assets/whats-new/etendo-news/devassistant.png)

The [Dependency Manager](https://docs.etendo.software/latest/developer-guide/etendo-classic/getting-started/installation/dependency-manager.md) module allows users to access all published packages in Etendo Software repositories directly from the Etendo Classic interface. With the Dependency Management window, you can browse available bundles, check version details and dependencies, and easily install new packages. The module also supports updating, removing, and modifying installed modules, giving you full control over your environment.


#### September 2024

##### Etendo Classic

:octicons-rocket-24: **New Etendo Classic Release Available!**

Version [24.3.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/release-notes.md) of Etendo Classic has been released for the third quarter of the year. All packages have been updated to ensure integration with this new release.  In addition this release includes all bugs resolved in the quarter.


##### Copilot Extensions

:material-robot: **New Etendo Copilot Release Available!**

New Copilot Extensions bundle version [1.5.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md)  

<div class="grid cards" markdown>
- **New Feature Update: Zip File Support for LangChain Assistants**
    
    ![](https://docs.etendo.software/latest/assets/whats-new/etendo-news/LangChain.png)

    We are excited to announce a new functionality in LangChain assistants: the ability to upload .zip files directly into the knowledge base! These .zip files can contain a variety of file formats, including .txt, .pdf, .md, .py, .java, and .js.
    This enhancement allows developers to train assistants with example source code.
    Boost your assistant’s capabilities with this powerful new feature!

</div>

#### August 2024

##### Copilot Extensions

[:material-robot: **New Etendo Copilot Release Available!**](https://docs.etendo.software/latest/user-guide/etendo-copilot/getting-started.md): Boost Your Productivity

![](https://docs.etendo.software/latest/assets/whats-new/etendo-news/copilot.png)

The newest version [1.4.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md) of the Copilot Extensions bundle brings the following key enhancements in Etendo Copilot:

<div class="grid cards" markdown>

-   **New Capabilities:**
    
    ---
    - **Database Queries:** Use system database queries as knowledge bases to automate tasks under specific conditions.
    -  **Copilot Stream:** Track in real-time which assistant or tool is working.
    -  **Improved UX:** The chat now retains the last assistant used for seamless interaction.

-   **Assistants Updates:**
    
    ---
    -  **Langchain Assistants:** Now manage local knowledge bases, keeping your data secure.
    -  **LangGraph Assistants:** Manage a team of assistants, delegating tasks efficiently. 
     
</div>

These updates make Etendo Copilot more powerful, secure, and user-friendly, driving efficiency to new heights.


##### Platform Extensions



[:simple-docker: **Docker Management**](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/docker-management.md)

![](https://docs.etendo.software/latest/assets/whats-new/etendo-news/docker.gif){align=right width=400}

- In version [1.18.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/platform-extensions/release-notes.md) of the Platform Extensions bundle, the new **Docker Management** module has been introduced.
- This module simplifies the deployment of services by allowing you to configure the entire infrastructure your service requires using Etendo modules.
- PostgreSQL Database Service is included in the module, making service installation faster and easier than ever.

[:simple-apachetomcat: **Tomcat Dockerized Service**](https://docs.etendo.software/latest/developer-guide/etendo-classic/bundles/platform/tomcat-dockerized-service.md)

- In version [1.18.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/platform-extensions/release-notes.md) of the Platform Extensions bundle, the new **Tomcat Dockerized Service** module has been introduced, which simplifies the installation of Etendo on any server.
- With this module, setting up Etendo becomes a quick and straightforward process, removing the complexities typically associated with server configuration. 



##### Warehouse Extensions
[:octicons-package-16: **Product Operations**](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/procurement-extensions/purchase-invoice-validation.md)

![](https://docs.etendo.software/latest/assets/whats-new/etendo-news/product-operation.png)

In the version [1.8.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/warehouse-extensions/release-notes.md) of the Warehouse Extensions bundle, the **Product Operations** functionality has been included. This module allows you to centralize and control all your product movements with Products Operations. View every transaction, from shipments and receipts to costs and location, in one place. Simplify analysis and get a clear view of your operations' performance.


#### July 2024

##### Copilot Extensions

<div class="grid cards" markdown>

-   [:material-tools: **Tool Pack**](https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/overview.md)

    ---
    
    The Tool Pack module, available from version [1.3.1](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md) of the Etendo Copilot bundle, includes a collection of tools designed to enhance the capabilities of Etendo Copilot assistants. This module enables functionalities such as file reading and writing, directory navigation, and email sending, thereby significantly expanding the operational scope of the assistants.

-   [:material-tools: **OCR Tool**](https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/ocr-tool.md)

    ---

    From version [1.3.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md) of the Copilot Extensions bundle, the possibility to add a parameter to the OCR Tool to specify and detail the analysis on images has been included, and Codbar tool reader has been added to the tool capable of reading barcodes on images.

-   [:material-robot: **Purchase Expert**](https://docs.etendo.software/latest/user-guide/etendo-copilot/bundles/copilot-purchase-expert.md)
    
    ---   

    As of version [1.3.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md) of the Copilot bundle, the [Attach File tool](https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/attach-file-tool.md) was included, a tool capable of adding attachments to any record in Etendo.

-   [:material-robot: **Dev Assistant**](https://docs.etendo.software/latest/developer-guide/etendo-copilot/bundles/dev-assistant.md)

    ---

    From version [1.1.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md) onwards, the [Create Reference Assistant](https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/create-reference-tool.md) was included, capable of creating list type references to be used in the development process.

</div>

:material-bug: **Fixed Issues**

In version [1.2.1](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md), Issue [#5](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/issues/5){target="_blank"} which caused incorrect rendering of line breaks in code blocks, has been resolved.

##### Financial Extensions

[:octicons-package-16: **VAT Regularization**](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/overview.md/#vat-regularization)

In version [1.16.1](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md) of this bundle, the [VAT Regularization](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/financial-extensions/overview.md/#vat-regularization) module has been included, which allows you to **easily adjust the accounts** to ensure that the **VAT balance is adjusted**.

---

#### June 2024

##### Etendo Classic

:octicons-rocket-24: **New Release Available!**

Etendo Classic version [24.2.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/release-notes.md) has been released, corresponding to the second quarter of the year. All bundles have been updated to ensure seamless integration with this new version.

:material-bug: **Fixed Issues**

In version [24.1.8](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/release-notes.md), Issue [#270](https://github.com/etendosoftware/etendo_core/issues/270){target="_blank"}, which caused **unexpected execution of callouts** in the **Sales Order** window, has been resolved.

##### Copilot Extensions

:material-trending-up: **Optimizations**

Starting with version [1.2.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md) of this package, bugs have been fixed and stability improvements have been made to Copilot. This update also introduces visual improvements to the chat by making it possible to enter **text on more than one line**.

##### Financial Extensions

[:octicons-package-16: **G/L Journal Clone**](https://docs.etendo.software/latest/user-guide/etendo-classic/basic-features/financial-management/accounting/transactions.md/#gl-journal-clone)

Starting with version [1.15.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes.md) of this bundle, the GL Journal Clone module is included, which makes it possible to clone the Simple GL Journal.

---

#### May 2024

##### Copilot Extensions

[:material-robot: **SQL Expert**](https://docs.etendo.software/latest/user-guide/etendo-copilot/bundles/sql-expert.md)

In the version [1.1.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md) of the Copilot Extensions bundle, the SQL Expert has been included.
With this assistant, you will be allowed to **formulate questions** in natural language, and the system will automatically generate the necessary SQL query to return data in code or natural language.

---

#### April 2024

##### Copilot Extensions

[:material-robot: **Purchase Expert Assistant**](https://docs.etendo.software/latest/user-guide/etendo-copilot/bundles/copilot-purchase-expert.md)

In the version [1.1.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md) of the Copilot Extensions bundle, the Purchase Expert Assistant has been included.
Your purchase orders are made easier with the new Copilot assistant. Interact via **text or by uploading images or PDFs** with the purchase order data, and the assistant will automatically generate a draft.

##### Spanish Localization

:material-trending-up: **Optimizations**

As of version [1.9.4](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/localization-spain-extensions/release-notes.md) of this bundle, we have simplified maintenance by replacing the `org.openbravo.util.saaj.impl` and `org.openbravo.util.javax.xml.soap` module dependencies with the new Maven dependencies [Jakarta SOAP Implementation](https://mvnrepository.com/artifact/com.sun.xml.messaging.saaj/saaj-impl/1.5.3){target="_blank"} and [Jakarta SOAP with Attachments API](https://mvnrepository.com/artifact/jakarta.xml.soap/jakarta.xml.soap-api/1.4.2){target="_blank"}.

To take advantage of these enhancements, when upgrading to version [1.9.4](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/localization-spain-extensions/release-notes.md) or higher, be sure to manually remove the old modules from the `/modules` directory so that the new build will use the new dependencies.

---

#### March 2024

##### Etendo Classic

:material-trending-up: **Optimizations**

As of version [24.1.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/release-notes.md), the support for [Tomcat 9](https://tomcat.apache.org/download-90.cgi){target="_blank"} has been updated.

##### Copilot Extensions

[:material-tools: **OCR Tool**](https://docs.etendo.software/latest/developer-guide/etendo-copilot/available-tools/ocr-tool.md)

In the version [1.0.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes.md) of the Copilot Extensions bundle, the OCR Tool has been included.
With this tool designed for **optical character recognition**, you will be able to extract text from images or PDF files.

##### Procurement Extensions

[:octicons-package-16: **Purchase Invoice Validation**](https://docs.etendo.software/latest/user-guide/etendo-classic/optional-features/bundles/procurement-extensions/purchase-invoice-validation.md)

In the version [1.0.0](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/procurement-extensions/release-notes.md) of the Procurement Extensions bundle, the Purchase Invoice Validation functionality has been included. Now, you will be able to **avoid the duplication of purchase invoices** through established rules and automatic validations.

##### Platform Extensions

:material-trending-up: **Optimizations**

As of version [1.13.2](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/platform-extensions/release-notes.md) of this bundle, the module dependency `org.openbravo.util.javax.xml.soap` has been removed as it was not needed for any module in this bundle. In case this dependency is needed for development, we recommend using the Maven dependency [Jakarta SOAP with Attachments API](https://mvnrepository.com/artifact/jakarta.xml.soap/jakarta.xml.soap-api/1.4.2){target="_blank"}

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Release Notes
## Article Path: /What's New/Release Notes/Etendo Classic/Release Notes
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/release-notes
## Article Content: 
### Release Notes

:octicons-package-16: Javapackage: `com.etendoerp.platform.etendo-core`

| Release notes | Publication date | Version | Status | ISO Image | GitHub |
| ---           | ---              | ---     | ---    | ---       | :---:  |
| [24Q4.1](https://github.com/etendosoftware/etendo_core/releases/tag/24.4.1){target="_blank"} | 17/01/2025 | 24.4.1 | QAA |  | :white_check_mark: |
| [24Q4.0](https://github.com/etendosoftware/etendo_core/releases/tag/24.4.0){target="_blank"} | 19/12/2024 | 24.4.0 | C | [24Q4.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-24Q4.0.iso){target="_blank"} | :white_check_mark: |
| [24Q3.6](https://github.com/etendosoftware/etendo_core/releases/tag/24.3.6){target="_blank"} | 13/12/2024 | 24.3.6 | CS |  | :white_check_mark: |
| [24Q3.5](https://github.com/etendosoftware/etendo_core/releases/tag/24.3.5){target="_blank"} | 06/12/2024 | 24.3.5 | C |  | :white_check_mark: |
| [24Q3.4](https://github.com/etendosoftware/etendo_core/releases/tag/24.3.4){target="_blank"} | 29/11/2024 | 24.3.4 | C |  | :white_check_mark: |
| [24Q3.3](https://github.com/etendosoftware/etendo_core/releases/tag/24.3.3){target="_blank"} | 12/11/2024 | 24.3.3 | C |  | :white_check_mark: |
| [24Q3.2](https://github.com/etendosoftware/etendo_core/releases/tag/24.3.2){target="_blank"} | 02/11/2024 | 24.3.2 | C |  | :white_check_mark: |
| [24Q3.1](https://github.com/etendosoftware/etendo_core/releases/tag/24.3.1){target="_blank"} | 10/10/2024 | 24.3.1 | C |  | :white_check_mark: |
| [24Q3.0](https://github.com/etendosoftware/etendo_core/releases/tag/24.3.0){target="_blank"} | 30/09/2024 | 24.3.0 | C | [24Q3.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-24Q3.0.iso){target="_blank"} | :white_check_mark: |
| [24Q2.8](https://github.com/etendosoftware/etendo_core/releases/tag/24.2.8){target="_blank"} | 27/09/2024 | 24.2.8 | C |  | :white_check_mark: |
| [24Q2.7](https://github.com/etendosoftware/etendo_core/releases/tag/24.2.7){target="_blank"} | 20/09/2024 | 24.2.7 | C |  | :white_check_mark: |
| [24Q2.6](https://github.com/etendosoftware/etendo_core/releases/tag/24.2.6){target="_blank"} | 23/08/2024 | 24.2.6 | C |  | :white_check_mark: |
| [24Q2.5](https://github.com/etendosoftware/etendo_core/releases/tag/24.2.5){target="_blank"} | 09/08/2024 | 24.2.5 | C |  | :white_check_mark: |
| [24Q2.4](https://github.com/etendosoftware/etendo_core/releases/tag/24.2.4){target="_blank"} | 02/08/2024 | 24.2.4 | C |  | :white_check_mark: |
| [24Q2.3](https://github.com/etendosoftware/etendo_core/releases/tag/24.2.3){target="_blank"} | 19/07/2024 | 24.2.3 | C |  | :white_check_mark: |
| [24Q2.2](https://github.com/etendosoftware/etendo_core/releases/tag/24.2.2){target="_blank"} | 12/07/2024 | 24.2.2 | C |  | :white_check_mark: |
| [24Q2.1](https://github.com/etendosoftware/etendo_core/releases/tag/24.2.1){target="_blank"} | 05/07/2024 | 24.2.1 | C |  | :white_check_mark: |
| [24Q2.0](https://github.com/etendosoftware/etendo_core/releases/tag/24.2.0){target="_blank"} | 28/06/2024 | 24.2.0 | C | [24Q2.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-24Q2.0.iso){target="_blank"} | :white_check_mark: |
| [24Q1.8](https://github.com/etendosoftware/etendo_core/releases/tag/24.1.8){target="_blank"} | 14/06/2024 | 24.1.8 | C |  | :white_check_mark: |
| [24Q1.7](https://github.com/etendosoftware/etendo_core/releases/tag/24.1.7){target="_blank"} | 31/05/2024 | 24.1.7 | C |  | :white_check_mark: |
| [24Q1.6](https://github.com/etendosoftware/etendo_core/releases/tag/24.1.6){target="_blank"} | 17/05/2024 | 24.1.6 | C |  | :white_check_mark: |
| [24Q1.5](https://github.com/etendosoftware/etendo_core/releases/tag/24.1.5){target="_blank"} | 10/05/2024 | 24.1.5 | C |  | :white_check_mark: |
| [24Q1.4](https://github.com/etendosoftware/etendo_core/releases/tag/24.1.4){target="_blank"} | 03/05/2024 | 24.1.4 | C | [24Q1.4.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-24Q1.4.iso){target="_blank"} | :white_check_mark: |
| [24Q1.3](https://github.com/etendosoftware/etendo_core/releases/tag/24.1.3){target="_blank"} | 19/04/2024 | 24.1.3 | C |  | :white_check_mark: |
| [24Q1.2](https://github.com/etendosoftware/etendo_core/releases/tag/24.1.2){target="_blank"} | 12/04/2024 | 24.1.2 | C |  | :white_check_mark: |
| [24Q1.1](https://github.com/etendosoftware/etendo_core/releases/tag/24.1.1){target="_blank"} | 05/04/2024 | 24.1.1 | C |  | :white_check_mark: |
| [24Q1.0](https://github.com/etendosoftware/etendo_core/releases/tag/24.1.0){target="_blank"} | 28/03/2024 | 24.1.0 | C | [24Q1.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-24Q1.0.iso){target="_blank"} | :white_check_mark: |
| [23Q4.5](https://github.com/etendosoftware/etendo_core/releases/tag/23.4.5){target="_blank"} | 22/03/2024 | 23.4.5 | CS |  | :white_check_mark: |
| [23Q4.4](https://github.com/etendosoftware/etendo_core/releases/tag/23.4.4){target="_blank"} | 15/03/2024 | 23.4.4 | C |  | :white_check_mark: |
| [23Q4.3](https://github.com/etendosoftware/etendo_core/releases/tag/23.4.3){target="_blank"} | 08/03/2024 | 23.4.3 | C |  | :white_check_mark: |
| [23Q4.2](https://github.com/etendosoftware/etendo_core/releases/tag/23.4.2){target="_blank"} | 26/02/2024 | 23.4.2 | C |  | :white_check_mark: |
| [23Q4.1](https://github.com/etendosoftware/etendo_core/releases/tag/23.4.1){target="_blank"} | 02/02/2023 | 23.4.1 | C |  | :white_check_mark: |
| [23Q4.0](https://github.com/etendosoftware/etendo_core/releases/tag/23.4.0){target="_blank"} | 28/12/2023 | 23.4.0 | C | [23Q4.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-23Q4.0.iso) | :white_check_mark: |
| [23Q3.4](https://github.com/etendosoftware/etendo_core/releases/tag/23.3.4){target="_blank"} | 05/12/2023 | 23.3.4 | C |  | :white_check_mark: |
| [23Q3.3](https://github.com/etendosoftware/etendo_core/releases/tag/23.3.3){target="_blank"} | 30/11/2023 | 23.3.3 | C |  | :white_check_mark: |
| [23Q3.2](https://github.com/etendosoftware/etendo_core/releases/tag/23.3.2){target="_blank"} | 10/11/2023 | 23.3.2 | C |  | :white_check_mark: |
| [23Q3.1](https://github.com/etendosoftware/etendo_core/releases/tag/23.3.1){target="_blank"} | 01/11/2023 | 23.3.1 | C |  | :white_check_mark: |
| [23Q3.0](https://github.com/etendosoftware/etendo_core/releases/tag/23.3.0){target="_blank"} | 29/09/2023 | 23.3.0 | C | [23Q3.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-23Q3.0.iso) | :white_check_mark: |
| [23Q2.8](https://github.com/etendosoftware/etendo_core/releases/tag/23.2.8){target="_blank"} | 14/09/2023 | 23.2.8 | C |  | :white_check_mark: |
| [23Q2.7](https://github.com/etendosoftware/etendo_core/releases/tag/23.2.7){target="_blank"} | 05/09/2023 | 23.2.7 | C |  | :white_check_mark: |
| [23Q2.6](https://github.com/etendosoftware/etendo_core/releases/tag/23.2.6){target="_blank"} | 25/08/2023 | 23.2.6 | C |  | :white_check_mark: |
| [23Q2.5](https://github.com/etendosoftware/etendo_core/releases/tag/23.2.5){target="_blank"} | 17/08/2023 | 23.2.5 | C |  | :white_check_mark: |
| [23Q2.4](https://github.com/etendosoftware/etendo_core/releases/tag/23.2.4){target="_blank"} | 16/08/2023 | 23.2.4 | C |  | :white_check_mark: |
| [23Q2.3](https://github.com/etendosoftware/etendo_core/releases/tag/23.2.3){target="_blank"} | 04/08/2023 | 23.2.3 | C |  | :white_check_mark: |
| [23Q2.2](https://github.com/etendosoftware/etendo_core/releases/tag/23.2.2){target="_blank"} | 26/07/2023 | 23.2.2 | C |  | :white_check_mark: |
| [23Q2.1](https://github.com/etendosoftware/etendo_core/releases/tag/23.2.1){target="_blank"} | 17/07/2023 | 23.2.1 | C |  | :white_check_mark: |
| [23Q2.0](https://github.com/etendosoftware/etendo_core/releases/tag/23.2.0){target="_blank"} | 27/06/2023 | 23.2.0 | C | [23Q2.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-23Q2.0.iso) | :white_check_mark: |
| [23Q1.5](https://github.com/etendosoftware/etendo_core/releases/tag/23.1.5){target="_blank"} | 29/05/2023 | 23.1.5 | C |  | :white_check_mark: |
| [23Q1.4](https://github.com/etendosoftware/etendo_core/releases/tag/23.1.4){target="_blank"} | 19/05/2023 | 23.1.4 | C |  | :white_check_mark: |
| [23Q1.3](https://github.com/etendosoftware/etendo_core/releases/tag/23.1.3){target="_blank"} | 02/05/2023 | 23.1.3 | C |  | :white_check_mark: |
| [23Q1.2](https://github.com/etendosoftware/etendo_core/releases/tag/23.1.2){target="_blank"} | 19/04/2023 | 23.1.2 | C |  | :white_check_mark: |
| [23Q1.1](https://github.com/etendosoftware/etendo_core/releases/tag/23.1.1){target="_blank"} | 11/04/2023 | 23.1.1 | C |  | :white_check_mark: |
| [23Q1.0](https://github.com/etendosoftware/etendo_core/releases/tag/23.1.0){target="_blank"} | 31/03/2023 | 23.1.0 | C | [23Q1.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-23Q1.3.iso) | :white_check_mark: | 
| [22Q4.6](https://github.com/etendosoftware/etendo_core/releases/tag/22.4.6){target="_blank"} | 17/08/2023 | 22.4.6 | C |  | |
| [22Q4.5](https://github.com/etendosoftware/etendo_core/releases/tag/22.4.5){target="_blank"} | 16/03/2023 | 22.4.5 | C | [22Q4.5.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-22Q4-5.iso) | |
| [22Q4.4](https://github.com/etendosoftware/etendo_core/releases/tag/22.4.4){target="_blank"} | 16/02/2023 | 22.4.4 | C |  | |
| [22Q4.3](https://github.com/etendosoftware/etendo_core/releases/tag/22.4.3){target="_blank"} | 03/02/2023 | 22.4.3 | C |  | |
| [22Q4.2](https://github.com/etendosoftware/etendo_core/releases/tag/22.4.2){target="_blank"} | 25/01/2023 | 22.4.2 | C |  | |
| [22Q4.1](https://github.com/etendosoftware/etendo_core/releases/tag/22.4.1){target="_blank"} | 13/01/2023 | 22.4.1 | C |  | |
| [22Q4.0](https://github.com/etendosoftware/etendo_core/releases/tag/22.4.0){target="_blank"} | 04/01/2023 | 22.4.0 | C |  | |
| [22Q3.0](https://github.com/etendosoftware/etendo_core/releases/tag/22.3.0){target="_blank"} | 05/10/2022 | 22.3.0 | C |  | |
| [22Q2.2](https://github.com/etendosoftware/etendo_core/releases/tag/22.2.2){target="_blank"} | 12/08/2022 | 22.2.2 | C |  | |
| [22Q2.1](https://github.com/etendosoftware/etendo_core/releases/tag/22.2.1){target="_blank"} | 05/08/2022 | 22.2.1 | C |  | |
| [22Q2.0](https://github.com/etendosoftware/etendo_core/releases/tag/22.2.0){target="_blank"} | 06/07/2022 | 22.2.0 | C |  | |
| [22Q1.3](https://github.com/etendosoftware/etendo_core/releases/tag/22.1.3){target="_blank"} | 21/06/2022 | 22.1.3 | C |  | |
| [22Q1.2](https://github.com/etendosoftware/etendo_core/releases/tag/22.1.2){target="_blank"} | 25/05/2022 | 22.1.2 | C |  | |
| [22Q1.1](https://github.com/etendosoftware/etendo_core/releases/tag/22.1.1){target="_blank"} | 11/05/2022 | 22.1.1 | C |  | |
| [22Q1.0](https://github.com/etendosoftware/etendo_core/releases/tag/22.1.0){target="_blank"} | 01/03/2022 | 22.1.0 | C |  | |
| [21Q4.9](https://github.com/etendosoftware/etendo_core/releases/tag/21.4.9){target="_blank"} | 04/01/2023 | 21.4.9 | C |  | |
| [21Q4.8](https://github.com/etendosoftware/etendo_core/releases/tag/21.4.8){target="_blank"} | 12/08/2022 | 21.4.8 | C |  | |
| [21Q4.7](https://github.com/etendosoftware/etendo_core/releases/tag/21.4.7){target="_blank"} | 05/08/2022 | 21.4.7 | C |  | |
| [21Q4.6](https://github.com/etendosoftware/etendo_core/releases/tag/21.4.6){target="_blank"} | 21/06/2022 | 21.4.6 | C |  | |
| [21Q4.5](https://github.com/etendosoftware/etendo_core/releases/tag/21.4.5){target="_blank"} | 27/05/2022 | 21.4.5 | C |  | |
| [21Q4.4](https://github.com/etendosoftware/etendo_core/releases/tag/21.4.4){target="_blank"} | 25/05/2022 | 21.4.4 | C |  | |
| [21Q4.3](https://github.com/etendosoftware/etendo_core/releases/tag/21.4.3){target="_blank"} | 11/05/2022 | 21.4.3 | C |  | |
| [21Q4.2](https://github.com/etendosoftware/etendo_core/releases/tag/21.4.2){target="_blank"} | 10/03/2022 | 21.4.2 | C |  | |
| [21Q4.1](https://github.com/etendosoftware/etendo_core/releases/tag/21.4.1){target="_blank"} | 17/12/2021 | 21.4.1 | C |  | |
| [21Q4.0](https://github.com/etendosoftware/etendo_core/releases/tag/21.4.0){target="_blank"} | 13/12/2021 | 21.4.0 | C |  | |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo Gradle Plugin
## Article Path: /What's New/Release Notes/Etendo Classic/Plugins/Etendo Gradle Plugin
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/plugins/etendo-gradle-plugin/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | Status |
| --- | --- | --- |
| [1.5.1](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.5.1){target="_blank"} | 12/11/2024 | CS |
| [1.5.0](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.5.0){target="_blank"} | 08/11/2024 | C |
| [1.4.0](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.4.0){target="_blank"} | 18/10/2024 | C |
| [1.3.3](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.3.3){target="_blank"} | 11/03/2024 | C |
| [1.3.2](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.3.2){target="_blank"} | 04/01/2024 | C |
| [1.3.1](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.3.1){target="_blank"} | 15/12/2023 | C |
| [1.3.0](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.3.0){target="_blank"} | 12/12/2023 | C |
| [1.2.2](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.2.2){target="_blank"} | 20/10/2023 | C |
| [1.2.1](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.2.1){target="_blank"} | 18/10/2023 | C |
| [1.2.0](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.2.0){target="_blank"} | 17/10/2023 | C |
| [1.1.3](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.1.3){target="_blank"} | 31/08/2023 | C |
| [1.1.2](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.1.2){target="_blank"} | 31/07/2023 | C |
| [1.1.1](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.1.1){target="_blank"} | 10/07/2023 | C |
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.1.0){target="_blank"} | 30/05/2023 | C |
| [1.0.7](https://github.com/etendosoftware/com.etendoerp.gradleplugin/releases/tag/1.0.7){target="_blank"} | 05/04/2023 | C |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo Backup and Restore
## Article Path: /What's New/Release Notes/Etendo Classic/Plugins/Etendo Backup and Restore
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/plugins/etendo-backup-restore-plugin/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | Status | GitHub |
| --- | --- | :---: | :---: |
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.etendobackup/releases/tag/1.1.0) | 06/03/2024 | CS | :white_check_mark: |
| [1.0.0](https://github.com/etendosoftware/com.etendoerp.etendobackup/releases/tag/1.0.0) | 19/12/2022 | C | |

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Essentials Extensions Bundle
## Article Path: /What's New/Release Notes/Etendo Classic/Bundles/Essentials Extensions Bundle
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/essentials-extensions/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | From Core | To Core | Status | GitHub |
| --- | --- | --- | --- | :---: | :---: |
| [1.7.0](https://github.com/etendosoftware/com.etendoerp.essentials.extensions/releases/tag/1.7.0){target="_blank"} | 19/12/2024 | 22.1.0 | 24.4.x | CS | :white_check_mark: |
| [1.6.1](https://github.com/etendosoftware/com.etendoerp.essentials.extensions/releases/tag/1.6.1){target="_blank"} | 01/11/2024 | 22.1.0 | 24.3.x | C | :white_check_mark: |
| [1.6.0](https://github.com/etendosoftware/com.etendoerp.essentials.extensions/releases/tag/1.6.0){target="_blank"} | 01/10/2024 | 22.1.0 | 24.3.x | C | :white_check_mark: |
| [1.5.0](https://github.com/etendosoftware/com.etendoerp.essentials.extensions/releases/tag/1.5.0){target="_blank"} | 28/06/2024 | 22.1.0 | 24.2.x | C | :white_check_mark: |
| [1.4.0](https://github.com/etendosoftware/com.etendoerp.essentials.extensions/releases/tag/1.4.0){target="_blank"} | 29/03/2024 | 22.1.0 | 24.1.x | C | :white_check_mark: |
| [1.3.0](https://github.com/etendosoftware/com.etendoerp.essentials.extensions/releases/tag/1.3.0){target="_blank"} | 29/12/2023 | 22.1.0 | 23.4.x | C | :white_check_mark: |
| [1.2.0](https://github.com/etendosoftware/com.etendoerp.essentials.extensions/releases/tag/1.2.0){target="_blank"} | 29/09/2023 | 22.1.0 | 23.3.x | C | :white_check_mark: |
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.essentials.extensions/releases/tag/1.1.0){target="_blank"} | 27/06/2023 | 22.1.0 | 23.2.8 | C | :white_check_mark: |
| [1.0.0](https://github.com/etendosoftware/com.etendoerp.essentials.extensions/releases/tag/1.0.0){target="_blank"} | 10/05/2023 | 22.1.0 | 23.1.5 | C | :white_check_mark: |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Platform Extensions Bundle
## Article Path: /What's New/Release Notes/Etendo Classic/Bundles/Platform Extensions Bundle
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/platform-extensions/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | From Core | To Core | Status | GitHub |
| --- | --- | --- | --- | --- | :---: |
| [2.7.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/2.7.0){target="_blank"} | 08/01/2025 | 23.2.0 | 24.4.x | CS | :white_check_mark: |
| [2.6.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/2.6.0){target="_blank"} | 20/12/2024 | 23.2.0 | 24.4.x | C | :white_check_mark: |
| [2.5.1](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/2.5.1){target="_blank"} | 29/11/2024 | 23.2.0 | 24.3.x | C | :white_check_mark: |
| [2.5.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/2.5.0){target="_blank"} | 08/11/2024 | 23.2.0 | 24.3.x | C | :white_check_mark: |
| [2.5.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/2.5.0){target="_blank"} | 08/11/2024 | 23.2.0 | 24.3.x | C | :white_check_mark: |
| [2.4.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/2.4.0){target="_blank"} | 01/10/2024 | 23.2.0 | 24.3.x | C | :white_check_mark: |
| [2.3.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/2.3.0){target="_blank"} | 27/09/2024 | 23.2.0 | 24.2.x | C | :white_check_mark: |
| [2.2.1](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/2.2.1){target="_blank"} | 20/09/2024 | 23.2.0 | 24.2.x | C | :white_check_mark: |
| [2.2.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/2.2.0){target="_blank"} | 13/09/2024 | 23.2.0 | 24.2.x | C | :white_check_mark: |
| [2.1.1](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/2.1.1){target="_blank"} | 04/09/2024 | 23.2.0 | 24.2.x | C | :white_check_mark: |
| [2.1.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/2.1.0){target="_blank"} | 03/09/2024 | 23.2.0 | 24.2.x | C | :white_check_mark: |
| [2.0.1](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/2.0.1){target="_blank"} | 30/08/2024 | 23.2.0 | 24.2.x | C | :white_check_mark: |
| [2.0.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/2.0.0){target="_blank"} | 16/08/2024 | 23.2.0 | 24.2.x | C | :white_check_mark: |
| [1.19.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.19.0){target="_blank"} | 09/08/2024 | 23.2.0 | 24.2.x | C | :white_check_mark: |
| [1.18.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.18.0){target="_blank"} | 02/08/2024 | 23.2.0 | 24.2.x | C | :white_check_mark: |
| [1.17.1](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.17.1){target="_blank"} | 12/07/2024 | 23.2.0 | 24.2.x | C | :white_check_mark: |
| [1.17.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.17.0){target="_blank"} | 28/06/2024 | 23.2.0 | 24.2.x | C | :white_check_mark: |
| [1.16.1](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.16.1){target="_blank"} | 14/06/2024 | 23.2.0 | 24.1.x | C | :white_check_mark: |
| [1.16.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.16.0){target="_blank"} | 20/05/2024 | 23.2.0 | 24.1.x | C | :white_check_mark: |
| [1.15.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.15.0){target="_blank"} | 08/05/2024 | 23.2.0 | 24.1.x | C | :white_check_mark: |
| [1.14.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.14.0){target="_blank"} | 29/03/2024 | 23.2.0 | 24.1.x | C | :white_check_mark: |
| [1.13.3](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.13.3){target="_blank"} | 22/03/2024 | 23.2.0 | 23.4.x | C | :white_check_mark: |
| [1.13.2](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.13.2){target="_blank"} | 15/03/2024 | 23.2.0 | 23.4.x | C | :white_check_mark: |
| [1.13.1](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.13.1){target="_blank"} | 27/02/2024 | 23.2.0 | 23.4.x | C | :white_check_mark: |
| [1.12.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.12.0){target="_blank"} | 29/12/2023 | 23.2.0 | 23.4.x | C | :white_check_mark: |
| [1.10.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.10.0){target="_blank"} | 29/09/2023 | 23.2.0 | 23.3.x | C | :white_check_mark: |
| [1.9.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.9.0){target="_blank"} | 14/09/2023 | 23.2.0 | 23.2.8 | C | :white_check_mark: |
| [1.8.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.8.0){target="_blank"} | 28/08/2023 | 23.2.0 | 23.2.8 | C | :white_check_mark: |
| [1.7.1](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.7.1){target="_blank"} | 17/08/2023 | 23.2.0 | 23.2.8 | C | :white_check_mark: |
| [1.6.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.6.0){target="_blank"} | 29/06/2023 | 23.2.0 | 23.2.8 | C | :white_check_mark: |
| [1.5.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.5.0){target="_blank"} | 27/06/2023 | 22.1.0 | 23.2.8 | C | :white_check_mark: |
| [1.4.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.4.0){target="_blank"} | 17/05/2023 | 22.1.0 | 23.1.5 | C | :white_check_mark: |
| [1.3.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.3.0){target="_blank"} | 06/04/2023 | 22.1.0 | 23.1.5 | C | |
| [1.2.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.2.0){target="_blank"} | 06/04/2023	| 22.1.0 | 23.1.5 | C | |
| [1.1.3](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.1.3){target="_blank"} 	|09/01/2023	| 22.1.0 | 22.4.5 | C | |
| [1.1.2](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/v1.1.2){target="_blank"} | 06/10/2022 | 22.1.0 | 22.3.0 | C | |
| [1.1.1](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/1.1.1){target="_blank"} | 19/07/2022	| 22.1.0 | 22.2.2 | C | |
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions/releases/tag/v1.1.0){target="_blank"} | 08/07/2022	| 22.1.0 | 22.2.2 | C | |
| 1.0.501 | 24/06/2022 | 22.1.0 | 22.1.3 | C | |
| 1.0.500 | 24/06/2022 | 22.1.0 | 22.1.3 | C | |
| 1.0.400 | 05/04/2022 | 22.1.0 | 22.1.3 | C | |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Warehouse Extensions Bundle
## Article Path: /What's New/Release Notes/Etendo Classic/Bundles/Warehouse Extensions Bundle
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/warehouse-extensions/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | From Core | To Core | Status | GitHub |
| --- | --- | --- | --- | --- | :---: |
| [1.10.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.10.0){target="_blank"} | 19/12/2024 | 24.4.0 | 24.4.x | CS | :white_check_mark: |
| [1.10.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.10.0){target="_blank"} | 19/12/2024 | 24.4.0 | 24.4.x | C | :white_check_mark: |
| [1.10.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.10.0){target="_blank"} | 19/12/2024 | 24.4.0 | 24.4.x | C | :white_check_mark: |
| [1.10.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.10.0){target="_blank"} | 19/12/2024 | 24.4.0 | 24.4.x | C | :white_check_mark: |
| [1.9.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.9.0){target="_blank"} | 01/10/2024 | 21.4.0 | 24.3.x | C | :white_check_mark: |
| [1.8.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.8.0){target="_blank"} | 02/08/2024 | 21.4.0 | 24.2.x | C | :white_check_mark: |
| [1.7.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.7.0){target="_blank"} | 29/06/2024 | 21.4.0 | 24.2.x | C | :white_check_mark: |
| [1.6.1](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.6.1){target="_blank"} | 17/05/2024 | 21.4.0 | 24.1.x | C | :white_check_mark: |
| [1.6.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.6.0){target="_blank"} | 29/03/2024 | 21.4.0 | 24.1.x | C | :white_check_mark: |
| [1.5.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.5.0){target="_blank"} | 29/12/2023 | 21.4.0 | 23.4.x | C | :white_check_mark: |
| [1.4.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.4.0){target="_blank"} | 29/09/2023 | 21.4.0 | 23.3.x | C | :white_check_mark: |
| [1.3.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.3.0){target="_blank"} | 27/06/2023 | 21.4.0 | 23.2.8 | C | :white_check_mark: |
| [1.2.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.2.0){target="_blank"} | 17/05/2023 | 21.4.0 | 23.1.5 | C | :white_check_mark: |
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.1.0){target="_blank"} | 06/04/2023 | 21.4.0 | 23.1.5 | C | :white_check_mark: |
| [1.0.3](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.0.3){target="_blank"} | 06/02/2023 | 21.4.0 | 22.4.6 | C | :white_check_mark: |
| [1.0.2](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.0.2){target="_blank"} | 25/01/2023 | 21.4.0 | 22.4.6 | C | :white_check_mark: |
| [1.0.1](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/v1.0.1){target="_blank"} | 06/01/2023 | 21.4.0 | 22.4.6 | C | :white_check_mark: |
| [1.0.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions/releases/tag/1.0.0){target="_blank"} | 30/09/2022 | 21.4.0 | 22.3.0 | C | :white_check_mark: |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Production Extensions Bundle
## Article Path: /What's New/Release Notes/Etendo Classic/Bundles/Production Extensions Bundle
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/production-extensions/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | From Core | To Core | Status | GitHub |
| --- | --- | --- | --- | :---: | :---: |
| [1.9.0](https://github.com/etendosoftware/com.etendoerp.production.extensions/releases/tag/1.9.0){target="_blank"} | 19/12/2024 | 22.1.0 | 24.4.x | CS | :white_check_mark: |
| [1.8.0](https://github.com/etendosoftware/com.etendoerp.production.extensions/releases/tag/1.8.0){target="_blank"} | 01/10/2024 | 22.1.0 | 24.3.x | C | :white_check_mark: |
| [1.7.0](https://github.com/etendosoftware/com.etendoerp.production.extensions/releases/tag/1.7.0){target="_blank"} | 28/06/2024 | 22.1.0 | 24.2.x | C | :white_check_mark: |
| [1.6.0](https://github.com/etendosoftware/com.etendoerp.production.extensions/releases/tag/1.6.0){target="_blank"} | 29/03/2024 | 22.1.0 | 24.1.x | C | :white_check_mark: |
| [1.5.0](https://github.com/etendosoftware/com.etendoerp.production.extensions/releases/tag/1.5.0){target="_blank"} | 29/12/2023 | 22.1.0 | 23.4.x | C | :white_check_mark: |
| [1.4.0](https://github.com/etendosoftware/com.etendoerp.production.extensions/releases/tag/1.4.0){target="_blank"} | 29/09/2023 | 22.1.0 | 23.3.x | C | :white_check_mark: |
| [1.3.0](https://github.com/etendosoftware/com.etendoerp.production.extensions/releases/tag/1.3.0){target="_blank"} | 27/06/2023 | 22.1.0 | 23.2.8 | C | :white_check_mark: |
| [1.2.0](https://github.com/etendosoftware/com.etendoerp.production.extensions/releases/tag/1.2.0){target="_blank"} | 17/05/2023 | 22.1.0 | 23.1.5 | C | :white_check_mark: |
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.production.extensions/releases/tag/1.1.0){target="_blank"} | 06/04/2023 | 22.1.0 | 23.1.5 | C | :white_check_mark: |
| [1.0.0](https://github.com/etendosoftware/com.etendoerp.production.extensions/releases/tag/1.0.0){target="_blank"} | 06/03/2023 | 22.1.0 | 22.4.5 | C | :white_check_mark: |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Sales Extensions Bundle
## Article Path: /What's New/Release Notes/Etendo Classic/Bundles/Sales Extensions Bundle
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/sales-extensions/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | From Core | To Core | Status | GitHub |
| --- | --- | --- | --- | :---: | :---: |
| [1.11.0](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/1.11.0){target="_blank"} | 19/12/2024 | 22.1.0 | 24.4.x | CS | :white_check_mark: |
| [1.10.0](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/1.10.0){target="_blank"} | 01/10/2024 | 22.1.0 | 24.3.x | C | :white_check_mark: |
| [1.9.2](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/1.9.2){target="_blank"} | 30/08/2024 | 22.1.0 | 24.2.x | C | :white_check_mark: |
| [1.9.1](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/1.9.1){target="_blank"} | 26/07/2024 | 22.1.0 | 24.2.x | C | :white_check_mark: |
| [1.9.0](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/1.9.0){target="_blank"} | 29/06/2024 | 22.1.0 | 24.2.x | C | :white_check_mark: |
| [1.8.1](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/1.8.1){target="_blank"} | 14/06/2024 | 22.1.0 | 24.1.x | C | :white_check_mark: |
| [1.8.0](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/1.8.0){target="_blank"} | 29/03/2024 | 22.1.0 | 24.1.x | C | :white_check_mark: |
| [1.7.0](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/1.7.0){target="_blank"} | 29/12/2023 | 22.1.0 | 23.4.x | C | :white_check_mark: |
| [1.6.0](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/1.6.0){target="_blank"} | 29/09/2023 | 22.1.0 | 23.3.x | C | :white_check_mark: |
| [1.5.2](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/1.5.2){target="_blank"} | 16/07/2023 | 22.1.0 | 23.2.8 | C | :white_check_mark: |
| [1.5.1](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/1.5.1){target="_blank"} | 04/07/2023 | 22.1.0 | 23.2.x | C | :white_check_mark: |
| [1.5.0](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/1.5.0){target="_blank"} | 30/06/2023 | 22.1.0 | 23.2.x | C | :white_check_mark: |
| [1.4.0](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/1.4.0){target="_blank"} | 27/06/2023 | 22.1.0 | 23.2.x | C | :white_check_mark: |
| [1.3.0](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/1.3.0){target="_blank"} | 17/05/2023 | 22.1.0 | 23.1.5 | C | :white_check_mark: |
| [1.2.0](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/v1.2.0){target="_blank"} | 05/04/2023 | 22.1.0 | 23.1.5 | C	| |
| [1.1.2](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/v1.1.2){target="_blank"} | 06/01/2023 | 22.1.0 | 22.4.5 | C | |
| [1.1.1](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/v1.1.1){target="_blank"} | 05/10/2022 | 22.1.0 | 22.3.0 | C | |
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.sales.extensions/releases/tag/v1.1.2){target="_blank"} | 11/07/2022 | 22.1.0 | 22.2.2 | C | |
| 1.0.400 | - | 22.1.0 | 22.1.3 | C | |
| 1.0.300 | - | 22.1.0 | 22.1.3 | C | |
| 1.0.200 | - | 21.4.0 | 22.1.3 | C | |
| 1.0.100 | 06/01/2022 | 21.4.0 | 22.1.3 | C | |
| 1.0.000 | 03/01/2022 | 21.4.0 | 22.1.3 | C | |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Financial Extensions Bundle
## Article Path: /What's New/Release Notes/Etendo Classic/Bundles/Financial Extensions Bundle
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/financial-extensions/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | From Core | To Core | Status | GitHub |
| --- | --- | --- | --- | :---: | :---: |
| [1.21.1](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.21.1){target="_blank"} | 17/01/2025 | 23.1.4 | 24.4.x | CS | :white_check_mark: |
| [1.21.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.21.0){target="_blank"} | 21/12/2024 | 23.1.4 | 24.4.x | C | :white_check_mark: |
| [1.20.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.20.0){target="_blank"} | 06/12/2024 | 23.1.4 | 24.3.x | C | :white_check_mark: |
| [1.19.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.19.0){target="_blank"} | 12/11/2024 | 23.1.4 | 24.3.x | C | :white_check_mark: |
| [1.18.1](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.18.1){target="_blank"} | 04/10/2024 | 23.1.4 | 24.3.x | C | :white_check_mark: |
| [1.18.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.18.0){target="_blank"} | 01/10/2024 | 23.1.4 | 24.3.x | C | :white_check_mark: |
| [1.17.2](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.17.2){target="_blank"} | 13/09/2024 | 23.1.4 | 24.2.x | C | :white_check_mark: |
| [1.17.1](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.17.1){target="_blank"} | 30/08/2024 | 23.1.4 | 24.2.x | C | :white_check_mark: |
| [1.17.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.17.0){target="_blank"} | 22/08/2024 | 23.1.4 | 24.2.x | C | :white_check_mark: |
| [1.16.1](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.16.1){target="_blank"} | 19/07/2024 | 23.1.4 | 24.2.x | C | :white_check_mark: |
| [1.16.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.16.0){target="_blank"} | 08/07/2024 | 23.1.4 | 24.2.x | C | :white_check_mark: |
| [1.15.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.15.0){target="_blank"} | 28/06/2024 | 23.1.4 | 24.2.x | C | :white_check_mark: |
| [1.14.2](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.14.2){target="_blank"} | 14/06/2024 | 23.1.4 | 24.1.x | C | :white_check_mark: |
| [1.14.1](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.14.1){target="_blank"} | 26/04/2024 | 23.1.4 | 24.1.x | C | :white_check_mark: |
| [1.14.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.14.0){target="_blank"} | 28/03/2024 | 23.1.4 | 24.1.x | C | :white_check_mark: |
| [1.13.5](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.13.5){target="_blank"} | 15/03/2024 | 23.1.4 | 23.4.x | C | :white_check_mark: |
| [1.13.4](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.13.4){target="_blank"} | 01/03/2024 | 23.1.4 | 23.4.x | C | :white_check_mark: |
| [1.13.3](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.13.3){target="_blank"} | 27/02/2024 | 23.1.4 | 23.4.x | C | :white_check_mark: |
| [1.13.2](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.13.2){target="_blank"} | 14/02/2024 | 23.1.4 | 23.4.x | C | :white_check_mark: |
| [1.13.1](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.13.1){target="_blank"} | 10/01/2024 | 23.1.4 | 23.4.x | C | :white_check_mark: |
| [1.13.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.13.0){target="_blank"} | 29/12/2023 | 23.1.4 | 23.4.x | C | :white_check_mark: |
| [1.12.1](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.12.1){target="_blank"} | 15/12/2023 | 23.1.4 | 23.3.x | C | :white_check_mark: |
| [1.12.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.12.0){target="_blank"} | 13/12/2023 | 23.1.4 | 23.3.x | C | :white_check_mark: |
| [1.11.3](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.11.3){target="_blank"} | 07/12/2023 | 23.1.4 | 23.3.x | C | :white_check_mark: |
| [1.11.2](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.11.2){target="_blank"} | 05/12/2023 | 23.1.4 | 23.3.x | C | :white_check_mark: |
| [1.11.1](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.11.1){target="_blank"} | 16/11/2023 | 23.1.4 | 23.3.x | C | :white_check_mark: |
| [1.10.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.10.0){target="_blank"} | 29/09/2023 | 23.1.4 | 23.3.x | C | :white_check_mark: |
| [1.9.1](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.9.1){target="_blank"} | 15/08/2023 | 23.1.4 | 23.2.8 | C | :white_check_mark: |
| [1.9.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.9.0){target="_blank"} | 12/07/2023 | 23.1.4 | 23.2.8 | C | :white_check_mark: |
| [1.8.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.8.0){target="_blank"} | 27/06/2023 | 23.1.4 | 23.2.8 | C | :white_check_mark: |
| [1.7.1](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.7.1){target="_blank"} | 12/06/2023 | 23.1.4 | 23.1.5 | C | :white_check_mark: |
| [1.7.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.7.0){target="_blank"} | 31/05/2023 | 23.1.4 | 23.1.5 | C | :white_check_mark: |
| [1.5.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.5.0){target="_blank"} | 17/05/2023 | 22.4.2 | 23.1.5 | C | :white_check_mark: |
| [1.3.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.3.0){target="_blank"} | 06/04/2023 | 22.4.2 | 23.1.5 | C | :white_check_mark: |
| [1.2.4](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.2.4){target="_blank"} | 14/02/2023 | 22.4.2 | 22.4.x | CS | |
| [1.2.3](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.2.3){target="_blank"} | 31/01/2023 | 22.4.2 | 22.4.x | C | |
| [1.2.2](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.2.2){target="_blank"} | 10/01/2023 | 22.2.1 | 22.4.x | C | |
| [1.2.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.2.0){target="_blank"} | 12/10/2022 | 22.2.1 | 22.3.0 | C | |
| [1.1.4](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.1.4){target="_blank"} | 11/10/2022 | 22.2.1 | 22.3.0 | C | |
| [1.1.3](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.1.3){target="_blank"} | 06/10/2022 | 22.2.1 | 22.3.0 | C | |
| [1.1.2](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.1.2){target="_blank"} | 30/08/2022 | 22.2.1 | 22.2.2 | C | |
| [1.1.1](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/1.1.1){target="_blank"} | 10/07/2022 | 22.1.1 | 22.2.2 | C | |
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions/releases/tag/v1.1.0){target="_blank"} | 08/07/2022 | 22.1.1 | 22.2.2 | C | |
| 1.0.500 | 24/06/2022 | 22.1.0 | 22.1.3 | C | |
| 1.0.400 | 15/06/2022 | 22.1.0 | 22.1.3 | C | |
| 1.0.300 | 23/04/2022 | 22.1.0 | 22.1.3 | C | |
| 1.0.200 | 05/04/2022 | 22.1.0 | 22.1.3 | C | |
| 1.0.100 | 06/01/2022 | 21.4.0 | 21.4.x | C | |
| 1.0.000 | 04/01/2022 | 21.4.0 | 21.4.x | C | |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Spanish Localization Bundle
## Article Path: /What's New/Release Notes/Etendo Classic/Bundles/Spanish Localization Bundle
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/localization-spain-extensions/release-notes
## Article Content: 
#### Introducción

| Versión | Fecha de Publicación | Desde Core | Hasta Core | Estado | GitHub |
| :--- | :--- | :--- | :--- | :---: | :---: |
| [1.24.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.24.0){target="_blank"} | 20/01/2025 | 22.4.3 | 24.4.x | CS | :white_check_mark: |
| [1.23.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.23.0){target="_blank"} | 07/01/2025 | 22.4.3 | 24.4.x | C | :white_check_mark: |
| [1.22.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.22.0){target="_blank"} | 20/12/2024 | 22.4.3 | 24.4.x | C | :white_check_mark: |
| [1.21.1](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.21.1){target="_blank"} | 14/11/2024 | 22.4.3 | 24.3.x | C | :white_check_mark: |
| [1.21.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.21.0){target="_blank"} | 06/11/2024 | 22.4.3 | 24.3.x | C | :white_check_mark: |
| [1.20.1](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.20.1){target="_blank"} | 01/11/2024 | 22.4.3 | 24.3.x | C | :white_check_mark: |
| [1.20.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.20.0){target="_blank"} | 24/10/2024 | 22.4.3 | 24.3.x | C | :white_check_mark: |
| [1.19.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.19.0){target="_blank"} | 23/10/2024 | 22.4.3 | 24.3.x | C | :white_check_mark: |
| [1.18.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.18.0){target="_blank"} | 01/10/2024 | 22.4.3 | 24.3.x | C | :white_check_mark: |
| [1.17.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.17.0){target="_blank"} | 30/09/2024 | 22.4.3 | 24.2.x | C | :white_check_mark: |
| [1.16.1](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.16.1){target="_blank"} | 26/09/2024 | 22.4.3 | 24.2.x | C | :white_check_mark: |
| [1.16.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.16.0){target="_blank"} | 25/09/2024 | 22.4.3 | 24.2.x | C | :white_check_mark: |
| [1.15.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.15.0){target="_blank"} | 24/09/2024 | 22.4.3 | 24.2.x | C | :white_check_mark: |
| [1.14.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.14.0){target="_blank"} | 11/09/2024 | 22.4.3 | 24.2.x | C | :white_check_mark: |
| [1.13.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.13.0){target="_blank"} | 14/08/2024 | 22.4.3 | 24.2.x | C | :white_check_mark: |
| [1.12.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.12.0){target="_blank"} | 28/06/2024 | 22.4.3 | 24.2.x | C | :white_check_mark: |
| [1.11.1](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.11.1){target="_blank"} | 17/05/2024 | 22.4.3 | 24.1.x | C | :white_check_mark: |
| [1.11.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.11.0){target="_blank"} | 03/05/2024 | 22.4.3 | 24.1.x | C | :white_check_mark: |
| [1.10.1](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.10.1){target="_blank"} | 19/04/2024 | 22.4.3 | 24.1.x | C | :white_check_mark: |
| [1.10.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.10.0){target="_blank"} | 28/03/2024 | 22.4.3 | 24.1.x | C | :white_check_mark: |
| [1.9.4](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.9.4){target="_blank"} | 15/03/2024 | 22.4.3 | 23.4.x | C | :white_check_mark: |
| [1.9.3](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.9.3){target="_blank"} | 06/03/2024 | 22.4.3 | 23.4.x | C | :white_check_mark: |
| [1.9.2](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.9.2){target="_blank"} | 04/03/2024 | 22.4.3 | 23.4.x | C | :white_check_mark: |
| [1.9.1](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.9.1){target="_blank"} | 28/02/2024 | 22.4.3 | 23.4.x | C | :white_check_mark: |
| [1.9.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.9.0){target="_blank"} | 06/02/2024 | 22.4.3 | 23.4.x | C | :white_check_mark: |
| [1.8.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.8.0){target="_blank"} | 26/01/2024 | 22.4.3 | 23.4.x | C | :white_check_mark: |
| [1.7.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.7.0){target="_blank"} | 24/01/2024 | 22.4.3 | 23.4.x | C | :white_check_mark: |
| [1.6.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.6.0){target="_blank"} | 29/12/2023 | 22.4.3 | 23.4.x | C | :white_check_mark: |
| [1.5.2](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.5.2){target="_blank"} | 10/11/2023 | 22.4.3 | 23.3.x | C | :white_check_mark: |
| [1.5.1](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.5.1){target="_blank"} | 01/11/2023 | 22.4.3 | 23.3.x | C | :white_check_mark: |
| [1.5.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.5.0){target="_blank"} | 29/09/2023 | 22.4.3 | 23.3.x | C | :white_check_mark: |
| [1.4.1](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.4.1){target="_blank"} | 19/09/2023 | 22.4.3 | 23.2.8 | C | :white_check_mark: |
| [1.4.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.4.0){target="_blank"} | 27/06/2023 | 22.4.3 | 23.2.8 | C | :white_check_mark: |
| [1.3.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.3.0){target="_blank"} | 24/05/2023 | 22.4.3 | 23.1.5 | C | :white_check_mark: |
| [1.2.1](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.2.1){target="_blank"} | 26/04/2023 | 22.4.3 | 22.4.5 | C | |
| [1.2.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.2.0){target="_blank"} | 03/03/2023 | 22.4.3 | 22.4.5 | C | |
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.1.1){target="_blank"} | 03/02/2023 | 22.4.3 | 22.4.5 | C | |
| [1.0.5](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.0.5){target="_blank"} | 12/01/2023 | 21.4.0 | 22.4.5 | C | |
| [1.0.4](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.0.4){target="_blank"} | 07/12/2022 | 21.4.0 | 22.3.0 | C | |
| [1.0.3](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/v1.0.3){target="_blank"} | 06/10/2022 | 21.4.0 | 22.3.x | C | |
| [1.0.2](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.0.2){target="_blank"} | 11/07/2022 | 21.4.0 | 22.2.2 | C | |
| [1.0.1](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/1.0.1){target="_blank"} | 16/06/2022 | 21.4.0 | \* | C | |
| [1.0.0](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/releases/tag/v1.0.0){target="_blank"} | 01/01/2022 | 21.4.0 | \* | C | |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Procurement Extensions Bundle
## Article Path: /What's New/Release Notes/Etendo Classic/Bundles/Procurement Extensions Bundle
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/procurement-extensions/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | From Core | To Core | Status | GitHub |
| --- | --- | --- | --- | :---: | :---: |
| [1.4.0](https://github.com/etendosoftware/com.etendoerp.procurement.extensions/releases/tag/1.4.0){target="_blank"} | 19/12/2024 | 22.1.0 | 24.4.x | CS | :white_check_mark: |
| [1.3.0](https://github.com/etendosoftware/com.etendoerp.procurement.extensions/releases/tag/1.3.0){target="_blank"} | 01/10/2024 | 22.1.0 | 24.3.x | C | :white_check_mark: |
| [1.2.0](https://github.com/etendosoftware/com.etendoerp.procurement.extensions/releases/tag/1.2.0){target="_blank"} | 29/06/2024 | 22.1.0 | 24.2.x | C | :white_check_mark: |
| [1.1.2](https://github.com/etendosoftware/com.etendoerp.procurement.extensions/releases/tag/1.1.2){target="_blank"} | 14/06/2024 | 22.1.0 | 24.1.x | C | :white_check_mark: |
| [1.1.1](https://github.com/etendosoftware/com.etendoerp.procurement.extensions/releases/tag/1.1.1){target="_blank"} | 31/05/2024 | 22.1.0 | 24.1.x | C | :white_check_mark: |
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.procurement.extensions/releases/tag/1.1.0){target="_blank"} | 29/03/2024 | 22.1.0 | 24.1.x | C | :white_check_mark: |
| [1.0.0](https://github.com/etendosoftware/com.etendoerp.procurement.extensions/releases/tag/1.0.0){target="_blank"} | 19/02/2024 | 22.1.0 | 24.1.0 | C | :white_check_mark: |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo BI Extensions Bundle
## Article Path: /What's New/Release Notes/Etendo Classic/Bundles/Etendo BI Extensions Bundle
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/bundles/etendobi-extensions/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | From Core | To Core | Status | GitHub |
| --- | --- | --- | --- | :---: | :---: |
| [1.7.1](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.7.1){target="_blank"} | 17/01/2025 | 22.1.0 | 24.4.x | CS | :white_check_mark: |
| [1.7.0](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.7.0){target="_blank"} | 20/12/2024 | 22.1.0 | 24.4.x | C | :white_check_mark: |
| [1.6.1](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.6.1){target="_blank"} | 01/11/2024 | 22.1.0 | 24.3.x | C | :white_check_mark: |
| [1.6.0](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.6.0){target="_blank"} | 01/10/2024 | 22.1.0 | 24.3.x | C | :white_check_mark: |
| [1.5.0](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.5.0){target="_blank"} | 29/06/2024 | 22.1.0 | 24.2.x | C | :white_check_mark: |
| [1.4.1](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.4.1){target="_blank"} | 10/05/2024 | 22.1.0 | 24.1.x | C | :white_check_mark: |
| [1.4.0](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.4.0){target="_blank"} | 03/04/2024 | 22.1.0 | 24.1.x | C | :white_check_mark: |
| [1.3.0](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.3.0){target="_blank"} | 29/12/2023 | 22.1.0 | 23.4.x | C | :white_check_mark: |
| [1.2.1](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.2.1){target="_blank"} | 15/11/2023 | 22.1.0 | 23.3.x | C | :white_check_mark: |
| [1.2.0](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.2.0){target="_blank"} | 29/09/2023 | 22.1.0 | 23.3.x | C | :white_check_mark: |
| [1.1.2](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.1.2){target="_blank"} | 04/09/2023 | 22.1.0 | 23.2.8 | C | :white_check_mark: |
| [1.1.1](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.1.1){target="_blank"} | 07/07/2023 | 22.1.0 | 23.2.8 | C | :white_check_mark: |
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.1.0){target="_blank"} | 30/06/2023 | 22.1.0 | 23.1.5 | C | :white_check_mark: |
| [1.0.1](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.0.1){target="_blank"} | 23/06/2023 | 22.1.0 | 23.1.5 | C | :white_check_mark: |
| [1.0.0](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions/releases/tag/1.0.0){target="_blank"} | 29/05/2023 | 22.1.0 | 23.1.5 | C | :white_check_mark: |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Essentials Extensions Bundle ES
## Article Path: /What's New/Release Notes/Etendo Classic/Translation Bundles/Essentials Extensions Bundle ES
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/translation-bundles/essentials-extensions-es_es/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | Compatibility With Essentials Extensions | Status | GitHub |
| --- | --- | --- | :----: | :----: |
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.essentials.extensions.es_es/releases/tag/1.1.0){target="_blank"} | 16/01/2024 | [1.0.0, latest] | CS | :white_check_mark: |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Platform Extensions Bundle ES
## Article Path: /What's New/Release Notes/Etendo Classic/Translation Bundles/Platform Extensions Bundle ES
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/translation-bundles/platform-extensions-es_es/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | Compatibility With Platform Extensions | Status | GitHub |
| --- | --- | --- | :----: | :----: |
| [1.6.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions.es_es/releases/tag/1.6.0){target="_blank"} | 02/10/2024 | [1.1.3, latest] | CS | :white_check_mark: |
| [1.5.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions.es_es/releases/tag/1.5.0){target="_blank"} | 09/08/2024 | [1.1.3, latest] | C | :white_check_mark: |
| [1.4.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions.es_es/releases/tag/1.4.0){target="_blank"} | 08/05/2024 | [1.1.3, latest] | C | :white_check_mark: |
| [1.3.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions.es_es/releases/tag/1.3.0){target="_blank"} | 28/02/2024 | [1.1.3, latest] | C | :white_check_mark: |
| [1.2.0](https://github.com/etendosoftware/com.etendoerp.platform.extensions.es_es/releases/tag/1.2.0){target="_blank"} | 16/01/2024 | [1.1.3, latest] | C | :white_check_mark: |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Warehouse Extensions Bundle ES
## Article Path: /What's New/Release Notes/Etendo Classic/Translation Bundles/Warehouse Extensions Bundle ES
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/translation-bundles/warehouse-extensions-es_es/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | Compatibility With Platform Extensions | Status | GitHub |
| --- | --- | --- | :----: | :----: |
| [1.4.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions.es_es/releases/tag/1.4.0){target="_blank"} | 02/08/2024 | [1.0.0, latest] | CS | :white_check_mark: |
| [1.3.0](https://github.com/etendosoftware/com.etendoerp.warehouse.extensions.es_es/releases/tag/1.3.0){target="_blank"} | 19/01/2024 | [1.0.0, latest] | C | :white_check_mark: |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Production Extensions Bundle ES
## Article Path: /What's New/Release Notes/Etendo Classic/Translation Bundles/Production Extensions Bundle ES
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/translation-bundles/production-extensions-es_es/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | Compatibility With Production Extensions | Status | GitHub |
| --- | --- | --- | :----: | :----: |
| [1.2.0](https://github.com/etendosoftware/com.etendoerp.production.extensions.es_es/releases/tag/1.2.0){target="_blank"} | 16/01/2024 | [1.0.0, latest] | CS | :white_check_mark: |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Sales Extensions Bundle ES
## Article Path: /What's New/Release Notes/Etendo Classic/Translation Bundles/Sales Extensions Bundle ES
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/translation-bundles/sales-extensions-es_es/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | Compatibility With Sales Extensions | Status | GitHub |
| --- | --- | --- | :----: | :----: |
| [1.6.0](https://github.com/etendosoftware/com.etendoerp.sales.extensions.es_es/releases/tag/1.6.0){target="_blank"} | 18/01/2024 | [1.0.000, latest] | CS | :white_check_mark: |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Financial Extensions Bundle ES
## Article Path: /What's New/Release Notes/Etendo Classic/Translation Bundles/Financial Extensions Bundle ES
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/translation-bundles/financial-extensions-es_es/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | Compatibility With Financial Extensions | Status | GitHub |
| --- | --- | --- | :----: | :----: |
| [1.7.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions.es_es/releases/tag/1.7.0){target="_blank"} | 23/08/2024 | [1.13.1, latest] | CS | :white_check_mark: |
| [1.6.1](https://github.com/etendosoftware/com.etendoerp.financial.extensions.es_es/releases/tag/1.6.1){target="_blank"} | 19/07/2024 | [1.13.1, latest] | C | :white_check_mark: |
| [1.6.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions.es_es/releases/tag/1.6.0){target="_blank"} | 08/07/2024 | [1.13.1, latest] | C | :white_check_mark: |
| [1.5.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions.es_es/releases/tag/1.5.0){target="_blank"} | 23/01/2024 | [1.13.1, latest] | C | :white_check_mark: |
| [1.4.3](https://github.com/etendosoftware/com.etendoerp.financial.extensions.es_es/releases/tag/1.4.3){target="_blank"} | 12/01/2024 | [1.13.1, latest] | C | :white_check_mark: |
| [1.4.2](https://github.com/etendosoftware/com.etendoerp.financial.extensions.es_es/releases/tag/1.4.2){target="_blank"} | 07/12/2023 | [1.11.3, 1.13.0] | C | :white_check_mark: |
| [1.4.1](https://github.com/etendosoftware/com.etendoerp.financial.extensions.es_es/releases/tag/1.4.1){target="_blank"} | 06/12/2023 | [1.11.2, 1.11.2] | C | :white_check_mark: |
| [1.4.0](https://github.com/etendosoftware/com.etendoerp.financial.extensions.es_es/releases/tag/1.4.0){target="_blank"} | 23/10/2023 | [1.0.0, 1.11.1] | C | :white_check_mark: |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Procurement Extensions Bundle ES
## Article Path: /What's New/Release Notes/Etendo Classic/Translation Bundles/Procurement Extensions Bundle ES
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/translation-bundles/procurement-extensions-es_es/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | Compatibility with Procurement Extensions | Status | GitHub |
| --- | --- | --- | :----: | :----: |
| [1.0.1](https://github.com/etendosoftware/com.etendoerp.procurement.extensions.es_es/releases/tag/1.0.1){target="_blank"} | 31/05/2024 | [1.0.0, latest] | CS | :white_check_mark: |
| [1.0.0](https://github.com/etendosoftware/com.etendoerp.procurement.extensions.es_es/releases/tag/1.0.0){target="_blank"} | 19/02/2024 | [1.0.0, latest] | C | :white_check_mark: |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo BI Extensions Bundle ES
## Article Path: /What's New/Release Notes/Etendo Classic/Translation Bundles/Etendo BI Extensions Bundle ES
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/translation-bundles/etendobi-extensions-es_es/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | Compatibility With Etendo BI Extensions | Status | GitHub |
| --- | --- | --- | :----: | :----: |
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.etendobi.extensions.es_es/releases/tag/1.1.0){target="_blank"} | 19/01/2024 | [1.0.0, latest] | CS | :white_check_mark: |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: ISO image
## Article Path: /What's New/Release Notes/Etendo Classic/ISO image
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/iso
## Article Content: 
### ISO Image

:material-tools: Installation Guide: [ISO Installation Guide](https://docs.etendo.software/latest/getting-started/installation.md#steps-to-install-the-iso-with-internet-connection)

| Version | Publication Date | ISO Image |
| --- | --- | --- |
| [24.4.0](#2440) | 20/12/2024 | [24Q4.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-24Q4.0.iso) |
| [24.3.0](#2430) | 30/09/2024 | [24Q3.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-24Q3.0.iso) |
| [24.2.0](#2420) | 28/06/2024 | [24Q2.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-24Q2.0.iso) |
| [24.1.4](#2414) | 03/05/2024 | [24Q1.4.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-24Q1.4.iso) |
| [24.1.0](#2410) | 28/03/2024 | [24Q1.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-24Q1.0.iso) |
| [23.4.0](#2340) | 28/12/2023 | [23Q4.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-23Q4.0.iso) |
| [23.3.0](#2330) | 29/09/2023 | [23Q3.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-23Q3.0.iso) |
| [23.2.0](#2320) | 27/06/2023 | [23Q2.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-23Q2.0.iso) |
| [23.1.0](#2310) | 31/03/2023 | [23Q1.0.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-23Q1.3.iso) |
| [22.4.5](#2245) | 16/03/2023 | [22Q4.5.iso](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-22Q4-5.iso) |

#### 24.4.0
New ISO with Etendo Classsic version 24.4.0

#### 24.3.0
New ISO with Etendo Classsic version 24.3.0

#### 24.2.0
New ISO with Etendo Classsic version 24.2.0

#### 24.1.4
New ISO with Etendo Classsic version 24.1.4
##### Fixed
 - [EPL-1449](https://github.com/etendosoftware/etendo_backups_script/issues/1) Gradle loses execution permissions when doing an etendo-restore

#### 24.1.0
New ISO with Etendo Classsic version 24.1.0
##### Changes
 - Upgrade Tomcat version to 9.0.87

#### 23.4.0
New ISO with Etendo Classsic version 23.4.0

#### 23.3.0
New ISO with Etendo Classsic version 23.3.0

#### 23.2.0
New ISO with Etendo Classsic version 23.2.0

#### 23.1.0
New ISO with Etendo Classsic version 23.1.0

#### 22.4.5
First ISO version with Etendo Classsic version 22.4.5 :sparkles:
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Known Issues
## Article Path: /What's New/Release Notes/Etendo Classic/Known Issues
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/known-issues
## Article Content: 
#### Overview
This page displays the known issues reported by the support team.

#### Know Issues

??? success "EPL-1449 Solved"

    ### [EPL-1449](https://github.com/etendosoftware/etendo_backups_script/issues/1){target="\_blank"} Gradle loses execution permissions when doing an etendo-restore.

    #### Workaround

    Apply the following change in the etendo-restore file to ensure that the gradlew file is excluded from the permission change with chmod:

    ``` bash title="etendo-restore"
    - find /opt/EtendoERP -type f -exec chmod 644 '{}' \+
    + find /opt/EtendoERP -type f ! -name gradlew -exec chmod 644 '{}' \+
    ```

    This workaround is applicable if you have deployed Etendo from the ISO in versions prior to [24.1.4](https://etendo-appliances.s3.eu-west-1.amazonaws.com/etendo/iso/etendo-24Q1.4.iso). Starting from that version, the issue of permission changes on the gradlew file is no longer observed.

??? success "EE-856 Solved"

    ### [EE-856](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/issues/34){target="\_blank"} 390 Tax Report dataset duplicates data for 2022 when applied on a server migrated from OB to Etendo after 01-2023.

    #### Workaround

    **Warning:** The following workaround can vary depending on diverse factors, such as:

    - Hand-made taxes
    - Hand-made Tax Categories
    - Taxes dataset applied in an organization other than \*
    - Attemps to apply the datasets, previous to doing the workarounds
    - etc

    If you have some of these caracteristics in your environment, contact with the support team for a custom solution

    ---

    There are two ways to solve the problem, depending on how the taxes and temporal taxes datasets have been applied before:


    1. **Temporal Taxes dataset on "individual" organizations, and Taxes dataset at \* level:**  

        1. Execute this SQL script, which will do the following:

            1. Move the taxes from one of the Oraganizations (the first one where the Temporal Taxes dataset was applied) to \*.

            2. Update the taxes from the \* organization and change their application history IDs (an ID to know which tax was applied), to turn them from the Openbravo ones to the Etendo ones.

            3. Update application history IDs for those temporal taxes that have been created on individual organizations, so the dataset importing process does not detect them and does not put data into them.

            [Different Organizations Taxes Fix](https://docs.etendo.software/latest/assets/whats-new/release-notes/etendo-clasic/known-issues/fix_taxes_ids_different_orgs.sql)

        2. Install Taxes dataset at \* level. The taxes from the \* organization will be updated.

        3. Execute the fix script where the 390 duplication problem is solved.

            [390 Model Tax Reports 2022 Fix](https://docs.etendo.software/latest/assets/whats-new/release-notes/etendo-clasic/known-issues/fix_localization_spain_390_2022_ids.sql)   

        4. Apply the dataset update for the 390 tax model.
    
    2. **Taxes and Temporal Taxes datasets both applied at \* level:**

        1. Execute the taxes script designed in the issue [EE-808](#ee-808-problem-when-trying-to-import-the-taxes-configuration-for-spain-dataset-if-the-environment-already-has-imported-the-dataset-related-to-the-303-temporary-taxes-of-openbravo).

            [Taxes Fix for Same Organization](https://docs.etendo.software/latest/assets/whats-new/release-notes/etendo-clasic/known-issues/fix_taxes_ids_same_org.sql)

        2. Execute the fix script where the 390 duplication problem is solved.
        
            [390 Model Tax Reports 2022 Fix](https://docs.etendo.software/latest/assets/whats-new/release-notes/etendo-clasic/known-issues/fix_localization_spain_390_2022_ids.sql)

        3. Apply the Taxes dataset update for the corresponding organization.

        4. Apply the dataset update for the 390 tax model.

??? success "EE-808 Solved"

    ### [EE-808](https://github.com/etendosoftware/com.etendoerp.localization.spain.extensions/issues/33){target="\_blank"} Problem when trying to import the 'taxes: configuration for Spain' dataset if the environment already has imported the dataset related to the 303 temporary taxes of Openbravo.

    #### Workaround

    **Warning:** The following workaround can vary depending on diverse factors, such as:

    - Hand-made taxes
    - Hand-made Tax Categories
    - Taxes dataset applied in an organization other than \*
    - Attemps to apply the datasets, previous to doing the workarounds
    - etc

    If you have some of these caracteristics in your environment, contact with the support team for a custom solution

    ---

    There are two ways to solve the problem, depending on how the taxes and temporal taxes datasets have been applied before:

    1. **Temporal Taxes dataset on "individual" organizations, and Taxes dataset at \* level:**
    
        1. Execute this SQL script, which will do the following:

            1. Move the taxes from one of the Oraganizations (the first one where the Temporal Taxes dataset was applied) to \*.

            2. Update the taxes from the \* organization and change their application history IDs (an ID to know which tax was applied), to turn them from the Openbravo ones to the Etendo ones.

            3. Update application history IDs for those temporal taxes that have been created on individual organizations, so the dataset importing process does not detect them and does not put data into them.

            [Different Organizations Taxes Fix](https://docs.etendo.software/latest/assets/whats-new/release-notes/etendo-clasic/known-issues/fix_taxes_ids_different_orgs.sql)
        
        2. Install Taxes dataset at \* level. The taxes from the \* organization will be updated.
    
    2. **Taxes and Temporal Taxes datasets both applied at \* level:**
        1. Execute the following script, which will update the taxes from the \* organization and change their application history IDs (an ID to know which tax was applied), to turn them from the Openbravo ones to the Etendo ones:
        
            [Taxes Fix for Same Organization](https://docs.etendo.software/latest/assets/whats-new/release-notes/etendo-clasic/known-issues/fix_taxes_ids_same_org.sql)

        2. Install Taxes dataset at \* level. The taxes from the \* organization will be updated.

    The next steps are the same for both cases:

    1. Execute the following script, which will update the 303 model, changing their Openbravo IDs to Etendo IDs.
        
        [303 Model Tax Reports 2023 Fix](https://docs.etendo.software/latest/assets/whats-new/release-notes/etendo-clasic/known-issues/fix_localization_spain_303_2023_ids.sql)
    
    2. Install 303 model dataset at individual organizations level. The corresponding parameters will be inserted in the taxes from \* organization, each one associated to their specific individual organization.

??? success "EE-758 Solved"

    ### [EE-758](https://github.com/etendosoftware/com.etendoerp.financial.extensions/issues/17){target="\_blank"} Incorrect BP Settlement Module Functionality with Payment (In/Out) Combination and Credit Usage.

    #### Attention

    The combination of Payments (In/Out) with credit usage in the Business Partner Settlement module is currently experiencing issues. Incorrect values for amount and credit used may result in financial account discrepancies. We advise against combining credit usage with settlement until this issue is resolved.

??? success "EPL-858 Solved"

    ### [EPL-858](https://github.com/etendosoftware/com.etendoerp.gradleplugin/issues/34){target="\_blank"} Etendo does not compile with latest version of gradle plugin in JAR format.

    #### Workaround

    Before execute setup tasks in a etendo project in JAR format you must follow the next steps:

    On the source path, open `build.gradle` and locate the 'etendo' block in the file. Inside of it, add the following propertie:

    ``` groovy title="build.gradle" 
    etendo {
        ignoreCoreJarDependency = true
    }
    ```

    This configuration will allow you to download the source of the project on your local environment. It will be needed for following steps. 

    Now we need to execute the command that will download the source code:

    ```bash title='terminal'
    ./gradlew clean
    ./gradlew expandCore 
    ```
    If you don't want to change the `build.gradle`, you can execute the command `./gradlew expandCore` and add the flag `-PforceExpand=true` at the end of it

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo Mobile Extensions
## Article Path: /What's New/Release Notes/Etendo Mobile/Bundles/Etendo Mobile Extensions
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-mobile/bundles/mobile-extensions/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | From Core | To Core | Status | GitHub|
| --- | --- | --- | --- | :---: | :---: |
| [1.9.0](https://github.com/etendosoftware/com.etendoerp.mobile.extensions/releases/tag/1.9.0){target="_blank"} | 15/01/2025 | 23.2.0 | 24.4.x | CS | :white_check_mark: |
| [1.8.0](https://github.com/etendosoftware/com.etendoerp.classic.subapp.extensions/releases/tag/1.8.0){target="_blank"} | 20/12/2024 | 23.2.0 | 24.4.x | C | :white_check_mark: |
| [1.7.0](https://github.com/etendosoftware/com.etendoerp.classic.subapp.extensions/releases/tag/1.7.0){target="_blank"} | 01/10/2024 | 23.2.0 | 24.3.x | C | :white_check_mark: |
| [1.6.0](https://github.com/etendosoftware/com.etendoerp.classic.subapp.extensions/releases/tag/1.6.0){target="_blank"} | 02/08/2024 | 23.2.0 | 24.2.x | C | :white_check_mark: |
| [1.5.0](https://github.com/etendosoftware/com.etendoerp.classic.subapp.extensions/releases/tag/1.5.0){target="_blank"} | 29/06/2024 | 23.2.0 | 24.2.x | C | :white_check_mark: |
| [1.4.0](https://github.com/etendosoftware/com.etendoerp.classic.subapp.extensions/releases/tag/1.4.0){target="_blank"} | 29/03/2024 | 23.2.0 | 24.1.x | C | :white_check_mark: |
| [1.3.0](https://github.com/etendosoftware/com.etendoerp.classic.subapp.extensions/releases/tag/1.3.0){target="_blank"}  | 04/01/2024 | 23.2.0 | 23.4.x | C  | :white_check_mark:|
| [1.2.0](https://github.com/etendosoftware/com.etendoerp.classic.subapp.extensions/releases/tag/1.2.0){target="_blank"}  | 29/09/2023 | 23.2.0 | 23.3.x | C   | :white_check_mark:|
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.classic.subapp.extensions/releases/tag/1.1.0){target="_blank"}  | 14/09/2023 | 23.2.0 | 23.2.8 | C  | :white_check_mark:|
| [1.0.0](https://github.com/etendosoftware/com.etendoerp.classic.subapp.extensions/releases/tag/1.0.0){target="_blank"} | 11/09/2023 | 23.2.0 | 23.2.8 | C   | :white_check_mark:|
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo Copilot Extensions
## Article Path: /What's New/Release Notes/Etendo Copilot/Bundles/Etendo Copilot Extensions
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/bundles/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | From Core | To Core | Status | GitHub|
| --- | --- | --- | --- | :---: | :---: |
| [1.9.1](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.9.1){target="_blank"} | 10/01/2025 | 23.4.0 | * | CS | :white_check_mark: |
| [1.9.0](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.9.0){target="_blank"} | 20/12/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.8.4](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.8.4){target="_blank"} | 13/12/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.8.1](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.8.1){target="_blank"} | 15/11/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.8.0](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.8.0){target="_blank"} | 08/11/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.7.2](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.7.2){target="_blank"} | 29/10/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.7.1](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.7.1){target="_blank"} | 25/10/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.7.0](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.7.0){target="_blank"} | 18/10/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.6.2](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.6.2){target="_blank"} | 17/10/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.6.1](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.6.1){target="_blank"} | 11/10/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.6.0](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.6.0){target="_blank"} | 07/10/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.5.1](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.5.1){target="_blank"} | 01/10/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.5.0](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.5.0){target="_blank"} | 27/09/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.4.2](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.4.2){target="_blank"} | 20/09/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.4.1](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.4.1){target="_blank"} | 30/08/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.4.0](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.4.0){target="_blank"} | 20/08/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.3.2](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.3.2){target="_blank"} | 02/08/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.3.1](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.3.1){target="_blank"} | 22/07/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.3.0](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.3.0){target="_blank"} | 19/07/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.2.3](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.2.3){target="_blank"} | 19/07/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.2.2](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.2.2){target="_blank"} | 16/07/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.2.1](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.2.1){target="_blank"} | 09/07/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.2.0](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.2.0){target="_blank"} | 13/06/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.1.1](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.1.1){target="_blank"} | 21/05/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.1.0](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.1.0){target="_blank"} | 20/05/2024 | 23.4.0 | * | C | :white_check_mark: |
| [1.0.0](https://github.com/etendosoftware/com.etendoerp.copilot.extensions/releases/tag/1.0.0){target="_blank"} | 29/04/2024 | 23.4.0 | * | C   | :white_check_mark:|
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Etendo Copilot Extensions ES
## Article Path: /What's New/Release Notes/Etendo Copilot/Translation Bundles/Etendo Copilot Extensions ES
## Article URL: 
 https://docs.etendo.software/latest/whats-new/release-notes/etendo-copilot/translation-bundles/release-notes
## Article Content: 
#### Overview

| Version | Publication Date | Compatibility With Financial Extensions | Status | GitHub |
| --- | --- | --- | :----: | :----: |
| [1.0.0](https://github.com/etendosoftware/com.etendoerp.copilot.extensions.es_es/releases/tag/1.0.0){target="_blank"} | 08/05/2024 | [1.0.0, latest] | CS | :white_check_mark: |
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Live Builds
## Article Path: /Live Builds
## Article URL: 
 https://docs.etendo.software/latest/live-builds/overview
## Article Content: 
#### Explore and Experiment with Live Builds in Etendo Classic

Are you eager to test in the Etendo Classic environment? 

The Live Builds section offers you a versatile platform to test new concepts, innovative solutions and analyze the behavior of Etendo projects in real time. Whether you are fine-tuning the efficiency of your application or exploring new features, Live Builds is your ally for meaningful testing.

Step into a world of exploration using either Postgres or Oracle as database managers.

This page holds live testing instances. These live builds are updated and reset once per day at 03:30 UTC.

[ :simple-esbuild: Etendo 24.4.x - Supported Bundles Installed - Postgres 14](https://demo.etendo.cloud/etendo/security/Login){target="\_blank"}

[:simple-esbuild: Etendo 24.4.x - Supported Bundles Installed - Oracle 19](https://demo-oracle.etendo.cloud/etendo/){target="\_blank"}

??? warning "Oracle"
    If you need to test on Oracle, please feel free to [contact us](https://docs.etendo.software/latest/help-and-support/overview.md).

??? tip "Credentials"
    The default access credentials are: <br> 
      **Username:** admin <br>
      **Password:** admin <br>
==ARTICLE_END==
==ARTICLE_START==
# Article Title: Overview
## Article Path: /Help and Support/Overview
## Article URL: 
 https://docs.etendo.software/latest/help-and-support/overview
## Article Content: 
#### Welcome to our Help and Support Portal!

We understand that your journey with Etendo might sometimes raise questions or require assistance. That's why we've created this space as your go-to resource for all your inquiries and needs.

You also have a standard structure for you to report bugs if needed.

[:material-headphones-settings: Support Service](https://docs.etendo.software/latest/help-and-support/support-service.md){ .md-button .md-button--primary .md-button .md-button--primary--primary }
[:fontawesome-solid-bug: How to Report Bugs](https://docs.etendo.software/latest/help-and-support/how-to-report-bugs.md){ .md-button .md-button--primary .md-button .md-button--primary--primary }

==ARTICLE_END==
==ARTICLE_START==
# Article Title: Support Service
## Article Path: /Help and Support/Support Service
## Article URL: 
 https://docs.etendo.software/latest/help-and-support/support-service
## Article Content: 
#### Help Center

Etendo provides support to the users through our [Help Center](http://support.etendo.software){target="_blank"} 

Here, the user can ask questions or send information in these sections:

-   :material-lifebuoy: **Training**
-   :material-tools:  **Technical Support** 
-   :fontawesome-regular-money-bill-1:  **Licensing and Billing Questions** 
-   :material-headphones-settings:  **Product Trial Questions**
-   :material-message-text:  **Other Questions**
-   :fontawesome-solid-bug:  **Report a Bug**
-   :material-lightbulb:  **Suggest a New Feature**
-   :material-lightbulb-on:  **Suggest Improvement**

#### Get In Touch

!!! info
        For commercial information, visit the [Get in Touch section](https://etendo.software/get-in-touch/){target="_blank"} in the Etendo website.

==ARTICLE_END==
==ARTICLE_START==
# Article Title: How to report bugs
## Article Path: /Help and Support/How to report bugs
## Article URL: 
 https://docs.etendo.software/latest/help-and-support/how-to-report-bugs
## Article Content: 
#### Template to report bugs

!!! warning
    *This structure should always be respected to report a bug in [Etendo service desk](https://incidencias.atlassian.net/servicedesk/customer/portal/35/group/43/create/132){target="_blank"} .*

!!! sucess
    Remember to reproduce the error beforehand in a clean environment. Etendo version must be supported  [Etendo Versions](https://docs.etendo.software/latest/whats-new/release-notes/etendo-classic/release-notes.md)

To report a bug, a standard structure is meant to be followed. This structure is represented in the following template:

-   **Error's description**
     Short description of the bug.
    
-   **Steps to reproduce the error**
    Detailed description of settings and steps to be followed to reproduce the error. It can include screen videos and/or screenshots.
    
-   **Expected behavior** 
    Description of the expected behaviour without the bug.

-   **Affected Version**
    Version of **Etendo** in which the error occurs.
    (*Browser & Version - SO & Version*)

-   **Solution Design (optional)**
    After analyzing the bug, describe how it will be solved and also if necessary, the details of implementation.

-   **Other test cases**
    If necessary, add more test cases.
 
 ```
  # Error's description
  
  # Steps to reproduce the error

  ### Required Configurations (if necessary)

  1. <step>
  2. <step>
  ...
  
  # Expected behavior

  # Affected Version
  ¿Latest/Specific?
  Version number:
  
  # Solution Design (optional)
  
  # Other test cases
  **Given:**
  **When:**
  **Then:**
 

 ```
==ARTICLE_END==
