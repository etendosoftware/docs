---
title: Configuración de Debezium
---
## Configuración de Debezium

### Configuración de Postgres

* Ejecute
```
> psql -h localhost -U postgres
```
* Obtenga la ubicación del archivo de configuración:
```
> show config_file;
```

* Edite el archivo **postgresql.conf**. (Asegúrese de que no esté comenzando con '#')
```
listen_addresses = '*'			## qué dirección(es) IP escuchar;
wal_level = logical			   ## minimal, replica, o logical
```

* Obtenga la ubicación del archivo hba
```
show hba_file;
```

* Añada al final del archivo
```
hostnossl      all		all		all		md5
```

* Ejecute
```
sudo service postgresql restart
```

### Configuración de Docker compose

* Añada el ‘extra_hosts’ a los servicios de debezium en el archivo de docker compose

``` docker
debezium-ui:
  .
  .
  .
  extra_hosts:
    - "host.docker.internal:host-gateway"
```
``` docker
debezium:
  .
  .
  .
  extra_hosts:
    - "host.docker.internal:host-gateway"
```

### Configuración de Debezium

Siga la guía para [configurar debezium](https://en/technical-documentation/etendo-environment/platform/HowToListenNewTablesInEtendoRX)

* Sustituya el **‘Hostname’** de **postgres** a **host.docker.internal**.

* Sustituya la **‘Database’** por el nombre de su base de datos local.

* Edite las **Propiedades avanzadas**

* Configure el Plugin de replicación como **pgoutput**

* Valide la conexión

##### Verificación de Kafka
Vaya al servidor de kafka drop http://localhost:9000/ y verifique que su topic se ha creado. Cuando realice un cambio en una tabla seleccionada (edite la clave primaria de un registro), debería ver en los logs de kafka los cambios confirmados.

* **Resolución de problemas**
	* Si el topic no registra los cambios, y ya se había creado, intente eliminar el topic y ejecutar de nuevo la configuración de debezium.
  
  * Si el slot de replicación ya está creado, ejecute la consulta `select pg_drop_replication_slot('debezium');`. Después, ejecute de nuevo la configuración de debezium.